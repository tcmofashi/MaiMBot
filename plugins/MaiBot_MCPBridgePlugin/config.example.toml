# MCPæ¡¥æ¥æ’ä»¶ v1.7.0 - é…ç½®æ–‡ä»¶ç¤ºä¾‹
# å°† MCP (Model Context Protocol) æœåŠ¡å™¨çš„å·¥å…·æ¡¥æ¥åˆ° MaiBot
# 
# ä½¿ç”¨æ–¹æ³•ï¼šå¤åˆ¶æ­¤æ–‡ä»¶ä¸º config.tomlï¼Œç„¶åæ ¹æ®éœ€è¦ä¿®æ”¹é…ç½®
#
# ============================================================
# ğŸ¯ å¿«é€Ÿå¼€å§‹ï¼ˆä¸‰æ­¥ï¼‰
# ============================================================
# 1. åœ¨ä¸‹æ–¹ [servers] æ·»åŠ  MCP æœåŠ¡å™¨é…ç½®
# 2. å°† enabled æ”¹ä¸º true å¯ç”¨æœåŠ¡å™¨
# 3. é‡å¯ MaiBot æˆ–å‘é€ /mcp reconnect
#
# ============================================================
# ğŸ“š å»å“ªæ‰¾ MCP æœåŠ¡å™¨ï¼Ÿ
# ============================================================
#
# ã€è¿œç¨‹æœåŠ¡ï¼ˆæ¨èæ–°æ‰‹ï¼‰ã€‘
#   - ModelScope: https://mcp.modelscope.cn/ (å…è´¹ï¼Œæ¨è)
#   - Smithery: https://smithery.ai/
#   - Glama: https://glama.ai/mcp/servers
#
# ã€æœ¬åœ°æœåŠ¡ï¼ˆéœ€è¦ npx æˆ– uvxï¼‰ã€‘
#   - å®˜æ–¹åˆ—è¡¨: https://github.com/modelcontextprotocol/servers
#
# ============================================================

# ============================================================
# æ’ä»¶åŸºæœ¬ä¿¡æ¯
# ============================================================
[plugin]
name = "mcp_bridge_plugin"
version = "1.7.0"
config_version = "1.7.0"
enabled = false  # é»˜è®¤ç¦ç”¨ï¼Œåœ¨ WebUI ä¸­å¯ç”¨

# ============================================================
# ğŸ†• v1.5.4 å¿«é€Ÿå…¥é—¨ï¼ˆåªè¯»ï¼ŒWebUI æ˜¾ç¤ºï¼‰
# ============================================================
[guide]
# ğŸš€ å¿«é€Ÿå…¥é—¨ - ä¸‰æ­¥å¼€å§‹ä½¿ç”¨
quick_start = "1. ä»ä¸‹æ–¹é“¾æ¥è·å– MCP æœåŠ¡å™¨  2. åœ¨ã€Œå¿«é€Ÿæ·»åŠ ã€å¡«å†™ä¿¡æ¯  3. ä¿å­˜åå‘é€ /mcp reconnect"

# ğŸŒ è·å– MCP æœåŠ¡å™¨ - å¤åˆ¶é“¾æ¥åˆ°æµè§ˆå™¨æ‰“å¼€ï¼Œè·å–å…è´¹ MCP æœåŠ¡å™¨
# é­”æ­ ModelScope å›½å†…å…è´¹æ¨èï¼Œå¤åˆ¶æœåŠ¡å™¨ URL åˆ°ã€Œå¿«é€Ÿæ·»åŠ ã€å³å¯
mcp_sources = "https://modelscope.cn/mcp (é­”æ­Â·æ¨è) | https://smithery.ai | https://glama.ai | https://mcp.so"

# ğŸ“ é…ç½®ç¤ºä¾‹ - å¤åˆ¶åˆ°æœåŠ¡å™¨åˆ—è¡¨å¯ç›´æ¥ä½¿ç”¨ï¼ˆå…è´¹æ—¶é—´æœåŠ¡å™¨ï¼‰
example_config = '{"name": "time", "enabled": true, "transport": "streamable_http", "url": "https://mcp.api-inference.modelscope.cn/server/mcp-server-time"}'

# ============================================================
# å…¨å±€è®¾ç½®
# ============================================================
[settings]
# ğŸ·ï¸ å·¥å…·å‰ç¼€ - ç”¨äºåŒºåˆ† MCP å·¥å…·å’ŒåŸç”Ÿå·¥å…·
tool_prefix = "mcp"

# â±ï¸ è¿æ¥è¶…æ—¶ï¼ˆç§’ï¼‰
connect_timeout = 30.0

# â±ï¸ è°ƒç”¨è¶…æ—¶ï¼ˆç§’ï¼‰
call_timeout = 60.0

# ğŸ”„ è‡ªåŠ¨è¿æ¥ - å¯åŠ¨æ—¶è‡ªåŠ¨è¿æ¥æ‰€æœ‰å·²å¯ç”¨çš„æœåŠ¡å™¨
auto_connect = true

# ğŸ” é‡è¯•æ¬¡æ•° - è¿æ¥å¤±è´¥æ—¶çš„é‡è¯•æ¬¡æ•°
retry_attempts = 3

# â³ é‡è¯•é—´éš”ï¼ˆç§’ï¼‰
retry_interval = 5.0

# ğŸ’“ å¿ƒè·³æ£€æµ‹ - å®šæœŸæ£€æµ‹æœåŠ¡å™¨è¿æ¥çŠ¶æ€
heartbeat_enabled = true

# ğŸ’“ å¿ƒè·³é—´éš”ï¼ˆç§’ï¼‰- å»ºè®® 30-120 ç§’
heartbeat_interval = 60.0

# ğŸ§  æ™ºèƒ½å¿ƒè·³ - æ ¹æ®æœåŠ¡å™¨ç¨³å®šæ€§è‡ªåŠ¨è°ƒæ•´å¿ƒè·³é—´éš”ï¼ˆv1.5.2ï¼‰
# ç¨³å®šæœåŠ¡å™¨é€æ¸å¢åŠ é—´éš”ï¼Œæ–­å¼€çš„æœåŠ¡å™¨ç¼©çŸ­é—´éš”
heartbeat_adaptive = true

# ğŸ“ˆ æœ€å¤§é—´éš”å€æ•° - ç¨³å®šæœåŠ¡å™¨å¿ƒè·³é—´éš”æœ€é«˜å¯è¾¾ åŸºå‡†é—´éš” Ã— æ­¤å€¼ï¼ˆv1.5.3ï¼‰
heartbeat_max_multiplier = 3.0

# ğŸ”„ è‡ªåŠ¨é‡è¿ - æ£€æµ‹åˆ°æ–­å¼€æ—¶è‡ªåŠ¨å°è¯•é‡è¿
auto_reconnect = true

# ğŸ”„ æœ€å¤§é‡è¿æ¬¡æ•° - è¿ç»­é‡è¿å¤±è´¥åæš‚åœé‡è¿
max_reconnect_attempts = 3

# ============================================================
# v1.7.0 çŠ¶æ€å®æ—¶åˆ·æ–°
# ============================================================
# ğŸ“Š å¯ç”¨çŠ¶æ€å®æ—¶åˆ·æ–° - å®šæœŸæ›´æ–° WebUI çŠ¶æ€æ˜¾ç¤º
status_refresh_enabled = true

# ğŸ“Š çŠ¶æ€åˆ·æ–°é—´éš”ï¼ˆç§’ï¼‰- å€¼è¶Šå°åˆ·æ–°è¶Šé¢‘ç¹ï¼Œä½†ä¼šå¢åŠ å°‘é‡ç£ç›˜å†™å…¥
status_refresh_interval = 10.0

# ============================================================
# v1.2.0 é«˜çº§åŠŸèƒ½ï¼ˆå®éªŒæ€§ï¼‰
# ============================================================
# ğŸ“¦ å¯ç”¨ Resources - å…è®¸è¯»å– MCP æœåŠ¡å™¨æä¾›çš„èµ„æº
enable_resources = false

# ğŸ“ å¯ç”¨ Prompts - å…è®¸ä½¿ç”¨ MCP æœåŠ¡å™¨æä¾›çš„æç¤ºæ¨¡æ¿
enable_prompts = false

# ============================================================
# v1.3.0 ç»“æœåå¤„ç†åŠŸèƒ½
# ============================================================
# å½“ MCP å·¥å…·è¿”å›çš„å†…å®¹è¿‡é•¿æ—¶ï¼Œä½¿ç”¨ LLM å¯¹ç»“æœè¿›è¡Œæ‘˜è¦æç‚¼

# ğŸ”„ å¯ç”¨ç»“æœåå¤„ç†
post_process_enabled = false

# ğŸ“ åå¤„ç†é˜ˆå€¼ï¼ˆå­—ç¬¦æ•°ï¼‰- ç»“æœé•¿åº¦è¶…è¿‡æ­¤å€¼æ‰è§¦å‘åå¤„ç†
post_process_threshold = 500

# ï¿½ åå¤„ç†è¾“eå‡ºé™åˆ¶ - LLM æ‘˜è¦è¾“å‡ºçš„æœ€å¤§ token æ•°
post_process_max_tokens = 500

# ğŸ¤– åå¤„ç†æ¨¡å‹ï¼ˆå¯é€‰ï¼‰- ç•™ç©ºåˆ™ä½¿ç”¨ utils æ¨¡å‹ç»„
post_process_model = ""

# ï¿½ åå¤„ç†æç¤ºè¯æ¨¡æ¿-
post_process_prompt = '''ç”¨æˆ·é—®é¢˜ï¼š{query}

å·¥å…·è¿”å›å†…å®¹ï¼š
{result}

è¯·ä»ä¸Šè¿°å†…å®¹ä¸­æå–ä¸ç”¨æˆ·é—®é¢˜æœ€ç›¸å…³çš„å…³é”®ä¿¡æ¯ï¼Œç®€æ´å‡†ç¡®åœ°è¾“å‡ºï¼š'''

# ============================================================
# ğŸ†• v1.4.0 è°ƒç”¨é“¾è·¯è¿½è¸ª
# ============================================================
# è®°å½•å·¥å…·è°ƒç”¨è¯¦æƒ…ï¼Œä¾¿äºè°ƒè¯•å’Œåˆ†æ

# ğŸ” å¯ç”¨è°ƒç”¨è¿½è¸ª
trace_enabled = true

# ğŸ“Š è¿½è¸ªè®°å½•ä¸Šé™ - å†…å­˜ä¸­ä¿ç•™çš„æœ€å¤§è®°å½•æ•°
trace_max_records = 100

# ğŸ“ è¿½è¸ªæ—¥å¿—æ–‡ä»¶ - æ˜¯å¦å°†è¿½è¸ªè®°å½•å†™å…¥æ—¥å¿—æ–‡ä»¶
# å¯ç”¨åè®°å½•å†™å…¥ plugins/MaiBot_MCPBridgePlugin/logs/trace.jsonl
trace_log_enabled = false

# ============================================================
# ğŸ†• v1.4.0 å·¥å…·è°ƒç”¨ç¼“å­˜
# ============================================================
# ç¼“å­˜ç›¸åŒå‚æ•°çš„è°ƒç”¨ç»“æœï¼Œå‡å°‘é‡å¤è¯·æ±‚

# ğŸ—„ï¸ å¯ç”¨è°ƒç”¨ç¼“å­˜
cache_enabled = false

# â±ï¸ ç¼“å­˜æœ‰æ•ˆæœŸï¼ˆç§’ï¼‰
cache_ttl = 300

# ğŸ“¦ æœ€å¤§ç¼“å­˜æ¡ç›® - è¶…å‡ºå LRU æ·˜æ±°
cache_max_entries = 200

# ï¿½ ç¼“å­˜æ’é™¤åˆ—è¡¨ - å³ä¸ç¼“å­˜çš„å·¥å…·ï¼ˆæ¯è¡Œä¸€ä¸ªï¼Œæ”¯æŒé€šé…ç¬¦ *ï¼‰
# æ—¶é—´ç±»ã€éšæœºç±»å·¥å…·å»ºè®®æ’é™¤
cache_exclude_tools = '''
mcp_*_time_*
mcp_*_random_*
'''

# ============================================================
# ğŸ†• v1.4.0 å·¥å…·ç®¡ç†
# ============================================================
[tools]
# ğŸ“‹ å·¥å…·æ¸…å•ï¼ˆåªè¯»ï¼‰- å¯åŠ¨åè‡ªåŠ¨ç”Ÿæˆ
tool_list = "(å¯åŠ¨åè‡ªåŠ¨ç”Ÿæˆ)"

# ğŸš« ç¦ç”¨å·¥å…·åˆ—è¡¨ - è¦ç¦ç”¨çš„å·¥å…·åï¼ˆæ¯è¡Œä¸€ä¸ªï¼‰
# ä»ä¸Šæ–¹å·¥å…·æ¸…å•å¤åˆ¶å·¥å…·åï¼Œç¦ç”¨åè¯¥å·¥å…·ä¸ä¼šè¢« LLM è°ƒç”¨
# ç¤ºä¾‹ï¼š
# disabled_tools = '''
# mcp_filesystem_delete_file
# mcp_filesystem_write_file
# '''
disabled_tools = ""

# ============================================================
# ğŸ†• v1.5.1 å¿«é€Ÿæ·»åŠ æœåŠ¡å™¨
# ============================================================
# è¡¨å•å¼é…ç½®ï¼Œæ— éœ€æ‰‹å†™ JSON
[quick_add]
# ğŸ“› æœåŠ¡å™¨åç§° - æœåŠ¡å™¨å”¯ä¸€åç§°ï¼ˆè‹±æ–‡ï¼Œå¦‚ time-serverï¼‰
server_name = ""

# ğŸ“¡ ä¼ è¾“ç±»å‹ - è¿œç¨‹æœåŠ¡å™¨é€‰ streamable_http/http/sseï¼Œæœ¬åœ°é€‰ stdio
server_type = "streamable_http"

# ğŸŒ æœåŠ¡å™¨ URL - è¿œç¨‹æœåŠ¡å™¨å¿…å¡«ï¼ˆstreamable_http/http/sse ç±»å‹ï¼‰
server_url = ""

# âŒ¨ï¸ å¯åŠ¨å‘½ä»¤ - stdio ç±»å‹å¿…å¡«ï¼ˆå¦‚ uvxã€npxã€pythonï¼‰
server_command = ""

# ğŸ“ å‘½ä»¤å‚æ•° - stdio ç±»å‹ä½¿ç”¨ï¼Œæ¯è¡Œä¸€ä¸ªå‚æ•°
server_args = ""

# ğŸ”‘ é‰´æƒå¤´ï¼ˆå¯é€‰ï¼‰- JSON æ ¼å¼ï¼Œå¦‚ {"Authorization": "Bearer xxx"}
server_headers = ""

# ============================================================
# ğŸ†• v1.6.0 é…ç½®å¯¼å…¥å¯¼å‡º
# ============================================================
# æ”¯æŒä» Claude Desktop / Kiro / MaiBot æ ¼å¼å¯¼å…¥å¯¼å‡º
[import_export]
# ğŸ“¥ å¯¼å…¥é…ç½® - ç²˜è´´ Claude Desktop æˆ–å…¶ä»–æ ¼å¼çš„ MCP é…ç½® JSON
# ç²˜è´´é…ç½®åç‚¹å‡»ä¿å­˜ï¼Œ2ç§’å†…è‡ªåŠ¨å¯¼å…¥ã€‚æŸ¥çœ‹ä¸‹æ–¹ã€Œå¯¼å…¥ç»“æœã€ç¡®è®¤çŠ¶æ€
import_config = ""

# ğŸ“‹ å¯¼å…¥ç»“æœï¼ˆåªè¯»ï¼‰- æ˜¾ç¤ºå¯¼å…¥æ“ä½œçš„ç»“æœ
import_result = ""

# ğŸ“¤ å¯¼å‡ºæ ¼å¼ - claude: Claude Desktop æ ¼å¼ | kiro: Kiro MCP æ ¼å¼ | maibot: æœ¬æ’ä»¶æ ¼å¼
export_format = "claude"

# ğŸ“¤ å¯¼å‡ºç»“æœï¼ˆåªè¯»ï¼Œå¯å¤åˆ¶ï¼‰- ç‚¹å‡»ä¿å­˜åç”Ÿæˆï¼Œå¯å¤åˆ¶åˆ° Claude Desktop æˆ–å…¶ä»–æ”¯æŒ MCP çš„åº”ç”¨
export_result = "(ç‚¹å‡»ä¿å­˜åç”Ÿæˆ)"

# ============================================================
# ğŸ†• v1.4.0 æƒé™æ§åˆ¶
# ============================================================
[permissions]
# ğŸ” å¯ç”¨æƒé™æ§åˆ¶ - æŒ‰ç¾¤/ç”¨æˆ·é™åˆ¶å·¥å…·ä½¿ç”¨
perm_enabled = false

# ğŸ“‹ é»˜è®¤æ¨¡å¼
# allow_all: æœªé…ç½®è§„åˆ™çš„å·¥å…·é»˜è®¤å…è®¸
# deny_all: æœªé…ç½®è§„åˆ™çš„å·¥å…·é»˜è®¤ç¦æ­¢
perm_default_mode = "allow_all"

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ğŸš€ å¿«æ·é…ç½®ï¼ˆæ¨èæ–°æ‰‹ä½¿ç”¨ï¼‰
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

# ğŸš« ç¦ç”¨ç¾¤åˆ—è¡¨ - è¿™äº›ç¾¤æ— æ³•ä½¿ç”¨ä»»ä½• MCP å·¥å…·ï¼ˆæ¯è¡Œä¸€ä¸ªç¾¤å·ï¼‰
# ç¤ºä¾‹ï¼š
# quick_deny_groups = '''
# 123456789
# 987654321
# '''
quick_deny_groups = ""

# âœ… ç®¡ç†å‘˜ç™½åå• - è¿™äº›ç”¨æˆ·å§‹ç»ˆå¯ä»¥ä½¿ç”¨æ‰€æœ‰å·¥å…·ï¼ˆæ¯è¡Œä¸€ä¸ªQQå·ï¼‰
# ç¤ºä¾‹ï¼š
# quick_allow_users = '''
# 111111111
# '''
quick_allow_users = ""

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ğŸ“œ é«˜çº§æƒé™è§„åˆ™ï¼ˆå¯é€‰ï¼Œé’ˆå¯¹ç‰¹å®šå·¥å…·é…ç½®ï¼‰
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# æ ¼å¼: qq:ID:group/private/userï¼Œå·¥å…·åæ”¯æŒé€šé…ç¬¦ *
# ç¤ºä¾‹ï¼š
# perm_rules = '''
# [
#   {"tool": "mcp_*_delete_*", "denied": ["qq:123456:group"]}
# ]
# '''
perm_rules = "[]"

# ============================================================
# ğŸ”Œ MCP æœåŠ¡å™¨é…ç½®
# ============================================================
#
# âš ï¸ é‡è¦ï¼šJSON æ ¼å¼è¯´æ˜
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# æœåŠ¡å™¨åˆ—è¡¨å¿…é¡»æ˜¯ JSON æ•°ç»„æ ¼å¼ï¼
#
# âŒ é”™è¯¯å†™æ³•ï¼š
#    { "name": "server1", ... },
#    { "name": "server2", ... }
#
# âœ… æ­£ç¡®å†™æ³•ï¼š
#    [
#      { "name": "server1", ... },
#      { "name": "server2", ... }
#    ]
#
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# æ¯ä¸ªæœåŠ¡å™¨çš„é…ç½®å­—æ®µï¼š
#   name      - æœåŠ¡å™¨åç§°ï¼ˆå”¯ä¸€æ ‡è¯†ï¼‰
#   enabled   - æ˜¯å¦å¯ç”¨ (true/false)
#   transport - ä¼ è¾“æ–¹å¼: "stdio" / "sse" / "http" / "streamable_http"
#   url       - æœåŠ¡å™¨åœ°å€ï¼ˆsse/http/streamable_http æ¨¡å¼å¿…å¡«ï¼‰
#   headers   - ğŸ†• é‰´æƒå¤´ï¼ˆå¯é€‰ï¼Œå¦‚ {"Authorization": "Bearer xxx"}ï¼‰
#   command   - å¯åŠ¨å‘½ä»¤ï¼ˆstdio æ¨¡å¼ï¼Œå¦‚ "npx" æˆ– "uvx"ï¼‰
#   args      - å‘½ä»¤å‚æ•°æ•°ç»„ï¼ˆstdio æ¨¡å¼ï¼‰
#   env       - ç¯å¢ƒå˜é‡å¯¹è±¡ï¼ˆstdio æ¨¡å¼ï¼Œå¯é€‰ï¼‰
#   post_process - æœåŠ¡å™¨çº§åˆ«åå¤„ç†é…ç½®ï¼ˆå¯é€‰ï¼‰
#
# ============================================================

[servers]
list = '''
[
  {
    "name": "time-mcp-server",
    "enabled": false,
    "transport": "streamable_http",
    "url": "https://mcp.api-inference.modelscope.cn/server/mcp-server-time"
  },
  {
    "name": "my-auth-server",
    "enabled": false,
    "transport": "streamable_http",
    "url": "https://mcp.api-inference.modelscope.net/xxxxxx/mcp",
    "headers": {
      "Authorization": "Bearer ms-xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
    }
  },
  {
    "name": "fetch-local",
    "enabled": false,
    "transport": "stdio",
    "command": "uvx",
    "args": ["mcp-server-fetch"]
  }
]
'''

# ============================================================
# çŠ¶æ€æ˜¾ç¤ºï¼ˆåªè¯»ï¼‰
# ============================================================
[status]
connection_status = "æœªåˆå§‹åŒ–"
