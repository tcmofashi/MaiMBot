import{r as u,j as e,L as $c,e as fa,b as eb,f as tb,g as sb,h as ab,k as fs,l as lb,m as nb,O as pp,n as ib}from"./router-CWhjJi2n.js";import{a as rb,b as cb,g as ob}from"./react-vendor-Dtc2IqVY.js";import{I as db,c as ub,J as si,K as Lc,L as gu,M as mb,N as Ii,O as Pi,P as hb,n as ju}from"./utils-CCeOswSm.js";import{L as gp,T as jp,C as vp,R as xb,a as bp,V as fb,b as pb,S as yp,c as gb,d as Np,I as jb,e as wp,f as vb,g as _p,h as bb,i as yb,j as Nb,O as Sp,P as wb,k as Cp,l as kp,D as Tp,A as Ep,m as zp,n as _b,o as Sb,p as Ap,q as Cb,r as Mp,s as kb,t as Tb,u as Eb,v as zb,w as Ab,x as Dp,y as Op,F as Rp}from"./radix-extra-BM7iD6Dt.js";import{aj as Mb,ak as Db,al as Ob,am as Rb,an as Uc,ao as Bc,ap as Wi,aq as Lb,ar as vu,as as Hc,at as Ub,au as Bb,av as Hb}from"./charts-Dhri-zxi.js";import{S as qb,G as Lp,O as Up,o as Gb,C as Bp,p as Vb,T as Hp,D as qp,R as Fb,q as $b,H as Gp,I as Qb,J as Vp,K as Fp,L as Yb,M as $p,V as Xb,N as Qp,Q as Yp,U as Kb,X as Zb,Y as Xp,Z as Jb,_ as Ib,$ as Kp,a0 as Pb,a1 as Wb,a2 as Zp,a3 as ey,a4 as ty,a5 as sy,a6 as Jp,a7 as Ip,a8 as Pp,a9 as Wp,aa as eg,ab as tg,ac as ay}from"./radix-core-C3XKqQJw.js";import{R as ws,P as gr,C as ha,a as Oa,Z as ln,b as Kc,F as Da,c as ly,S as ai,A as ny,D as iy,d as Zc,e as Wn,M as cn,T as ry,X as on,f as cy,g as oy,I as Ra,h as ya,i as Na,j as Jc,E as or,k as Ws,l as sg,H as dy,m as at,n as rl,U as dr,o as ag,p as lg,L as Gf,K as ng,q as uy,r as my,s as Qc,t as Ss,u as hy,B as ar,v as Ic,w as Bu,x as xy,y as fy,z as zs,G as to,J as ti,N as Rl,O as ur,Q as jr,V as py,W as gy,Y as hs,_ as Hu,$ as nn,a0 as vr,a1 as dn,a2 as Ll,a3 as br,a4 as qu,a5 as jy,a6 as vy,a7 as by,a8 as rn,a9 as yy,aa as ig,ab as Eu,ac as mr,ad as Ny,ae as zu,af as Au,ag as rg,ah as Vf,ai as wy,aj as _y,ak as Sy,al as Ol,am as bu,an as Ff,ao as Cy,ap as yu,aq as ky,ar as Ty,as as Ey,at as zy,au as Ay,av as cg,aw as og,ax as dg,ay as My,az as $f,aA as Dy,aB as Oy,aC as Ry,aD as Ly}from"./icons-SnP_l694.js";import{S as Uy,p as By,j as Hy,a as qy,E as Qf,R as Gy,o as Vy}from"./codemirror-BHeANvwm.js";import{_ as Vs,c as Fy,g as ug,D as $y}from"./misc-DyBU7ISD.js";import{u as Qy,a as Yf,D as Yy,c as Xy,S as Ky,h as Zy,b as Jy,s as Iy,K as Py,P as Wy,d as eN,C as tN}from"./dnd-Dyi3CnuX.js";import{D as sN,U as aN}from"./uppy-BHC3OXBx.js";import{M as lN,r as nN,a as iN,b as rN}from"./markdown-A1ShuLvG.js";import{r as cN,H as Pc,P as Wc,u as oN,a as dN,R as uN,B as mN,b as hN,C as xN,M as fN,c as pN}from"./reactflow-B3n3_Vkw.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))d(h);new MutationObserver(h=>{for(const x of h)if(x.type==="childList")for(const f of x.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&d(f)}).observe(document,{childList:!0,subtree:!0});function c(h){const x={};return h.integrity&&(x.integrity=h.integrity),h.referrerPolicy&&(x.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?x.credentials="include":h.crossOrigin==="anonymous"?x.credentials="omit":x.credentials="same-origin",x}function d(h){if(h.ep)return;h.ep=!0;const x=c(h);fetch(h.href,x)}})();var Nu={exports:{}},er={},wu={exports:{}},_u={};var Xf;function gN(){return Xf||(Xf=1,(function(n){function r(A,X){var T=A.length;A.push(X);e:for(;0<T;){var te=T-1>>>1,_=A[te];if(0<h(_,X))A[te]=X,A[T]=_,T=te;else break e}}function c(A){return A.length===0?null:A[0]}function d(A){if(A.length===0)return null;var X=A[0],T=A.pop();if(T!==X){A[0]=T;e:for(var te=0,_=A.length,me=_>>>1;te<me;){var oe=2*(te+1)-1,ae=A[oe],xe=oe+1,ve=A[xe];if(0>h(ae,T))xe<_&&0>h(ve,ae)?(A[te]=ve,A[xe]=T,te=xe):(A[te]=ae,A[oe]=T,te=oe);else if(xe<_&&0>h(ve,T))A[te]=ve,A[xe]=T,te=xe;else break e}}return X}function h(A,X){var T=A.sortIndex-X.sortIndex;return T!==0?T:A.id-X.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var x=performance;n.unstable_now=function(){return x.now()}}else{var f=Date,j=f.now();n.unstable_now=function(){return f.now()-j}}var p=[],N=[],v=1,C=null,S=3,w=!1,L=!1,F=!1,B=!1,O=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;function z(A){for(var X=c(N);X!==null;){if(X.callback===null)d(N);else if(X.startTime<=A)d(N),X.sortIndex=X.expirationTime,r(p,X);else break;X=c(N)}}function V(A){if(F=!1,z(A),!L)if(c(p)!==null)L=!0,Y||(Y=!0,we());else{var X=c(N);X!==null&&be(V,X.startTime-A)}}var Y=!1,E=-1,R=5,ne=-1;function fe(){return B?!0:!(n.unstable_now()-ne<R)}function Ce(){if(B=!1,Y){var A=n.unstable_now();ne=A;var X=!0;try{e:{L=!1,F&&(F=!1,K(E),E=-1),w=!0;var T=S;try{t:{for(z(A),C=c(p);C!==null&&!(C.expirationTime>A&&fe());){var te=C.callback;if(typeof te=="function"){C.callback=null,S=C.priorityLevel;var _=te(C.expirationTime<=A);if(A=n.unstable_now(),typeof _=="function"){C.callback=_,z(A),X=!0;break t}C===c(p)&&d(p),z(A)}else d(p);C=c(p)}if(C!==null)X=!0;else{var me=c(N);me!==null&&be(V,me.startTime-A),X=!1}}break e}finally{C=null,S=T,w=!1}X=void 0}}finally{X?we():Y=!1}}}var we;if(typeof H=="function")we=function(){H(Ce)};else if(typeof MessageChannel<"u"){var pe=new MessageChannel,Ne=pe.port2;pe.port1.onmessage=Ce,we=function(){Ne.postMessage(null)}}else we=function(){O(Ce,0)};function be(A,X){E=O(function(){A(n.unstable_now())},X)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(A){A.callback=null},n.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<A?Math.floor(1e3/A):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function(A){switch(S){case 1:case 2:case 3:var X=3;break;default:X=S}var T=S;S=X;try{return A()}finally{S=T}},n.unstable_requestPaint=function(){B=!0},n.unstable_runWithPriority=function(A,X){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var T=S;S=A;try{return X()}finally{S=T}},n.unstable_scheduleCallback=function(A,X,T){var te=n.unstable_now();switch(typeof T=="object"&&T!==null?(T=T.delay,T=typeof T=="number"&&0<T?te+T:te):T=te,A){case 1:var _=-1;break;case 2:_=250;break;case 5:_=1073741823;break;case 4:_=1e4;break;default:_=5e3}return _=T+_,A={id:v++,callback:X,priorityLevel:A,startTime:T,expirationTime:_,sortIndex:-1},T>te?(A.sortIndex=T,r(N,A),c(p)===null&&A===c(N)&&(F?(K(E),E=-1):F=!0,be(V,T-te))):(A.sortIndex=_,r(p,A),L||w||(L=!0,Y||(Y=!0,we()))),A},n.unstable_shouldYield=fe,n.unstable_wrapCallback=function(A){var X=S;return function(){var T=S;S=X;try{return A.apply(this,arguments)}finally{S=T}}}})(_u)),_u}var Kf;function jN(){return Kf||(Kf=1,wu.exports=gN()),wu.exports}var Zf;function vN(){if(Zf)return er;Zf=1;var n=jN(),r=rb(),c=cb();function d(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function h(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function x(t){var s=t,a=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(a=s.return),t=s.return;while(t)}return s.tag===3?a:null}function f(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function j(t){if(t.tag===31){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function p(t){if(x(t)!==t)throw Error(d(188))}function N(t){var s=t.alternate;if(!s){if(s=x(t),s===null)throw Error(d(188));return s!==t?null:t}for(var a=t,l=s;;){var i=a.return;if(i===null)break;var o=i.alternate;if(o===null){if(l=i.return,l!==null){a=l;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===a)return p(i),t;if(o===l)return p(i),s;o=o.sibling}throw Error(d(188))}if(a.return!==l.return)a=i,l=o;else{for(var m=!1,g=i.child;g;){if(g===a){m=!0,a=i,l=o;break}if(g===l){m=!0,l=i,a=o;break}g=g.sibling}if(!m){for(g=o.child;g;){if(g===a){m=!0,a=o,l=i;break}if(g===l){m=!0,l=o,a=i;break}g=g.sibling}if(!m)throw Error(d(189))}}if(a.alternate!==l)throw Error(d(190))}if(a.tag!==3)throw Error(d(188));return a.stateNode.current===a?t:s}function v(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t;for(t=t.child;t!==null;){if(s=v(t),s!==null)return s;t=t.sibling}return null}var C=Object.assign,S=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),L=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),K=Symbol.for("react.consumer"),H=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),ne=Symbol.for("react.activity"),fe=Symbol.for("react.memo_cache_sentinel"),Ce=Symbol.iterator;function we(t){return t===null||typeof t!="object"?null:(t=Ce&&t[Ce]||t["@@iterator"],typeof t=="function"?t:null)}var pe=Symbol.for("react.client.reference");function Ne(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===pe?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case F:return"Fragment";case O:return"Profiler";case B:return"StrictMode";case V:return"Suspense";case Y:return"SuspenseList";case ne:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case L:return"Portal";case H:return t.displayName||"Context";case K:return(t._context.displayName||"Context")+".Consumer";case z:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case E:return s=t.displayName||null,s!==null?s:Ne(t.type)||"Memo";case R:s=t._payload,t=t._init;try{return Ne(t(s))}catch{}}return null}var be=Array.isArray,A=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=c.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,T={pending:!1,data:null,method:null,action:null},te=[],_=-1;function me(t){return{current:t}}function oe(t){0>_||(t.current=te[_],te[_]=null,_--)}function ae(t,s){_++,te[_]=t.current,t.current=s}var xe=me(null),ve=me(null),de=me(null),G=me(null);function W(t,s){switch(ae(de,s),ae(ve,t),ae(xe,null),s.nodeType){case 9:case 11:t=(t=s.documentElement)&&(t=t.namespaceURI)?df(t):0;break;default:if(t=s.tagName,s=s.namespaceURI)s=df(s),t=uf(s,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}oe(xe),ae(xe,t)}function U(){oe(xe),oe(ve),oe(de)}function ee(t){t.memoizedState!==null&&ae(G,t);var s=xe.current,a=uf(s,t.type);s!==a&&(ae(ve,t),ae(xe,a))}function Se(t){ve.current===t&&(oe(xe),oe(ve)),G.current===t&&(oe(G),Xi._currentValue=T)}var Me,tt;function Xe(t){if(Me===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);Me=s&&s[1]||"",tt=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Me+t+tt}var Ut=!1;function Bt(t,s){if(!t||Ut)return"";Ut=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(s){var he=function(){throw Error()};if(Object.defineProperty(he.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(he,[])}catch(se){var I=se}Reflect.construct(t,[],he)}else{try{he.call()}catch(se){I=se}t.call(he.prototype)}}else{try{throw Error()}catch(se){I=se}(he=t())&&typeof he.catch=="function"&&he.catch(function(){})}}catch(se){if(se&&I&&typeof se.stack=="string")return[se.stack,I.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var o=l.DetermineComponentFrameRoot(),m=o[0],g=o[1];if(m&&g){var k=m.split(`
`),J=g.split(`
`);for(i=l=0;l<k.length&&!k[l].includes("DetermineComponentFrameRoot");)l++;for(;i<J.length&&!J[i].includes("DetermineComponentFrameRoot");)i++;if(l===k.length||i===J.length)for(l=k.length-1,i=J.length-1;1<=l&&0<=i&&k[l]!==J[i];)i--;for(;1<=l&&0<=i;l--,i--)if(k[l]!==J[i]){if(l!==1||i!==1)do if(l--,i--,0>i||k[l]!==J[i]){var le=`
`+k[l].replace(" at new "," at ");return t.displayName&&le.includes("<anonymous>")&&(le=le.replace("<anonymous>",t.displayName)),le}while(1<=l&&0<=i);break}}}finally{Ut=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Xe(a):""}function re(t,s){switch(t.tag){case 26:case 27:case 5:return Xe(t.type);case 16:return Xe("Lazy");case 13:return t.child!==s&&s!==null?Xe("Suspense Fallback"):Xe("Suspense");case 19:return Xe("SuspenseList");case 0:case 15:return Bt(t.type,!1);case 11:return Bt(t.type.render,!1);case 1:return Bt(t.type,!0);case 31:return Xe("Activity");default:return""}}function ke(t){try{var s="",a=null;do s+=re(t,a),a=t,t=t.return;while(t);return s}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Pe=Object.prototype.hasOwnProperty,Fe=n.unstable_scheduleCallback,ts=n.unstable_cancelCallback,As=n.unstable_shouldYield,js=n.unstable_requestPaint,Ke=n.unstable_now,D=n.unstable_getCurrentPriorityLevel,De=n.unstable_ImmediatePriority,ze=n.unstable_UserBlockingPriority,Ve=n.unstable_NormalPriority,At=n.unstable_LowPriority,We=n.unstable_IdlePriority,ss=n.log,gt=n.unstable_setDisableYieldValue,_e=null,je=null;function yt(t){if(typeof ss=="function"&&gt(t),je&&typeof je.setStrictMode=="function")try{je.setStrictMode(_e,t)}catch{}}var Ht=Math.clz32?Math.clz32:Kt,pa=Math.log,Ts=Math.LN2;function Kt(t){return t>>>=0,t===0?32:31-(pa(t)/Ts|0)|0}var Ms=256,Ds=262144,Ha=4194304;function Fs(t){var s=t&42;if(s!==0)return s;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function qa(t,s,a){var l=t.pendingLanes;if(l===0)return 0;var i=0,o=t.suspendedLanes,m=t.pingedLanes;t=t.warmLanes;var g=l&134217727;return g!==0?(l=g&~o,l!==0?i=Fs(l):(m&=g,m!==0?i=Fs(m):a||(a=g&~t,a!==0&&(i=Fs(a))))):(g=l&~o,g!==0?i=Fs(g):m!==0?i=Fs(m):a||(a=l&~t,a!==0&&(i=Fs(a)))),i===0?0:s!==0&&s!==i&&(s&o)===0&&(o=i&-i,a=s&-s,o>=a||o===32&&(a&4194048)!==0)?s:i}function Sa(t,s){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&s)===0}function P(t,s){switch(t){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ye(){var t=Ha;return Ha<<=1,(Ha&62914560)===0&&(Ha=4194304),t}function Re(t){for(var s=[],a=0;31>a;a++)s.push(t);return s}function us(t,s){t.pendingLanes|=s,s!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function $s(t,s,a,l,i,o){var m=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var g=t.entanglements,k=t.expirationTimes,J=t.hiddenUpdates;for(a=m&~a;0<a;){var le=31-Ht(a),he=1<<le;g[le]=0,k[le]=-1;var I=J[le];if(I!==null)for(J[le]=null,le=0;le<I.length;le++){var se=I[le];se!==null&&(se.lane&=-536870913)}a&=~he}l!==0&&Os(t,l,0),o!==0&&i===0&&t.tag!==0&&(t.suspendedLanes|=o&~(m&~s))}function Os(t,s,a){t.pendingLanes|=s,t.suspendedLanes&=~s;var l=31-Ht(s);t.entangledLanes|=s,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function dl(t,s){var a=t.entangledLanes|=s;for(t=t.entanglements;a;){var l=31-Ht(a),i=1<<l;i&s|t[l]&s&&(t[l]|=s),a&=~i}}function Hl(t,s){var a=s&-s;return a=(a&42)!==0?1:un(a),(a&(t.suspendedLanes|s))!==0?0:a}function un(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function mn(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function $(){var t=X.p;return t!==0?t:(t=window.event,t===void 0?32:Of(t.type))}function ge(t,s){var a=X.p;try{return X.p=t,s()}finally{X.p=a}}var Le=Math.random().toString(36).slice(2),$e="__reactFiber$"+Le,jt="__reactProps$"+Le,ea="__reactContainer$"+Le,ta="__reactEvents$"+Le,Ca="__reactListeners$"+Le,$g="__reactHandles$"+Le,Ju="__reactResources$"+Le,ci="__reactMarker$"+Le;function co(t){delete t[$e],delete t[jt],delete t[ta],delete t[Ca],delete t[$g]}function hn(t){var s=t[$e];if(s)return s;for(var a=t.parentNode;a;){if(s=a[ea]||a[$e]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(t=jf(t);t!==null;){if(a=t[$e])return a;t=jf(t)}return s}t=a,a=t.parentNode}return null}function xn(t){if(t=t[$e]||t[ea]){var s=t.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return t}return null}function oi(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t.stateNode;throw Error(d(33))}function fn(t){var s=t[Ju];return s||(s=t[Ju]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function ps(t){t[ci]=!0}var Iu=new Set,Pu={};function ql(t,s){pn(t,s),pn(t+"Capture",s)}function pn(t,s){for(Pu[t]=s,t=0;t<s.length;t++)Iu.add(s[t])}var Qg=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Wu={},em={};function Yg(t){return Pe.call(em,t)?!0:Pe.call(Wu,t)?!1:Qg.test(t)?em[t]=!0:(Wu[t]=!0,!1)}function _r(t,s,a){if(Yg(s))if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(s);return;case"boolean":var l=s.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(s);return}}t.setAttribute(s,""+a)}}function Sr(t,s,a){if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttribute(s,""+a)}}function Ga(t,s,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(s,a,""+l)}}function sa(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function tm(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Xg(t,s,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,s);if(!t.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var i=l.get,o=l.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return i.call(this)},set:function(m){a=""+m,o.call(this,m)}}),Object.defineProperty(t,s,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(m){a=""+m},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function oo(t){if(!t._valueTracker){var s=tm(t)?"checked":"value";t._valueTracker=Xg(t,s,""+t[s])}}function sm(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var a=s.getValue(),l="";return t&&(l=tm(t)?t.checked?"true":"false":t.value),t=l,t!==a?(s.setValue(t),!0):!1}function Cr(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Kg=/[\n"\\]/g;function aa(t){return t.replace(Kg,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function uo(t,s,a,l,i,o,m,g){t.name="",m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"?t.type=m:t.removeAttribute("type"),s!=null?m==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+sa(s)):t.value!==""+sa(s)&&(t.value=""+sa(s)):m!=="submit"&&m!=="reset"||t.removeAttribute("value"),s!=null?mo(t,m,sa(s)):a!=null?mo(t,m,sa(a)):l!=null&&t.removeAttribute("value"),i==null&&o!=null&&(t.defaultChecked=!!o),i!=null&&(t.checked=i&&typeof i!="function"&&typeof i!="symbol"),g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"?t.name=""+sa(g):t.removeAttribute("name")}function am(t,s,a,l,i,o,m,g){if(o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(t.type=o),s!=null||a!=null){if(!(o!=="submit"&&o!=="reset"||s!=null)){oo(t);return}a=a!=null?""+sa(a):"",s=s!=null?""+sa(s):a,g||s===t.value||(t.value=s),t.defaultValue=s}l=l??i,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=g?t.checked:!!l,t.defaultChecked=!!l,m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.name=m),oo(t)}function mo(t,s,a){s==="number"&&Cr(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function gn(t,s,a,l){if(t=t.options,s){s={};for(var i=0;i<a.length;i++)s["$"+a[i]]=!0;for(a=0;a<t.length;a++)i=s.hasOwnProperty("$"+t[a].value),t[a].selected!==i&&(t[a].selected=i),i&&l&&(t[a].defaultSelected=!0)}else{for(a=""+sa(a),s=null,i=0;i<t.length;i++){if(t[i].value===a){t[i].selected=!0,l&&(t[i].defaultSelected=!0);return}s!==null||t[i].disabled||(s=t[i])}s!==null&&(s.selected=!0)}}function lm(t,s,a){if(s!=null&&(s=""+sa(s),s!==t.value&&(t.value=s),a==null)){t.defaultValue!==s&&(t.defaultValue=s);return}t.defaultValue=a!=null?""+sa(a):""}function nm(t,s,a,l){if(s==null){if(l!=null){if(a!=null)throw Error(d(92));if(be(l)){if(1<l.length)throw Error(d(93));l=l[0]}a=l}a==null&&(a=""),s=a}a=sa(s),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),oo(t)}function jn(t,s){if(s){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=s;return}}t.textContent=s}var Zg=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function im(t,s,a){var l=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="":l?t.setProperty(s,a):typeof a!="number"||a===0||Zg.has(s)?s==="float"?t.cssFloat=a:t[s]=(""+a).trim():t[s]=a+"px"}function rm(t,s,a){if(s!=null&&typeof s!="object")throw Error(d(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||s!=null&&s.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var i in s)l=s[i],s.hasOwnProperty(i)&&a[i]!==l&&im(t,i,l)}else for(var o in s)s.hasOwnProperty(o)&&im(t,o,s[o])}function ho(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jg=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ig=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function kr(t){return Ig.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Va(){}var xo=null;function fo(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var vn=null,bn=null;function cm(t){var s=xn(t);if(s&&(t=s.stateNode)){var a=t[jt]||null;e:switch(t=s.stateNode,s.type){case"input":if(uo(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+aa(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var l=a[s];if(l!==t&&l.form===t.form){var i=l[jt]||null;if(!i)throw Error(d(90));uo(l,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(s=0;s<a.length;s++)l=a[s],l.form===t.form&&sm(l)}break e;case"textarea":lm(t,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&gn(t,!!a.multiple,s,!1)}}}var po=!1;function om(t,s,a){if(po)return t(s,a);po=!0;try{var l=t(s);return l}finally{if(po=!1,(vn!==null||bn!==null)&&(xc(),vn&&(s=vn,t=bn,bn=vn=null,cm(s),t)))for(s=0;s<t.length;s++)cm(t[s])}}function di(t,s){var a=t.stateNode;if(a===null)return null;var l=a[jt]||null;if(l===null)return null;a=l[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(d(231,s,typeof a));return a}var Fa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),go=!1;if(Fa)try{var ui={};Object.defineProperty(ui,"passive",{get:function(){go=!0}}),window.addEventListener("test",ui,ui),window.removeEventListener("test",ui,ui)}catch{go=!1}var ul=null,jo=null,Tr=null;function dm(){if(Tr)return Tr;var t,s=jo,a=s.length,l,i="value"in ul?ul.value:ul.textContent,o=i.length;for(t=0;t<a&&s[t]===i[t];t++);var m=a-t;for(l=1;l<=m&&s[a-l]===i[o-l];l++);return Tr=i.slice(t,1<l?1-l:void 0)}function Er(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function zr(){return!0}function um(){return!1}function Rs(t){function s(a,l,i,o,m){this._reactName=a,this._targetInst=i,this.type=l,this.nativeEvent=o,this.target=m,this.currentTarget=null;for(var g in t)t.hasOwnProperty(g)&&(a=t[g],this[g]=a?a(o):o[g]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?zr:um,this.isPropagationStopped=um,this}return C(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=zr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=zr)},persist:function(){},isPersistent:zr}),s}var Gl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ar=Rs(Gl),mi=C({},Gl,{view:0,detail:0}),Pg=Rs(mi),vo,bo,hi,Mr=C({},mi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:No,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==hi&&(hi&&t.type==="mousemove"?(vo=t.screenX-hi.screenX,bo=t.screenY-hi.screenY):bo=vo=0,hi=t),vo)},movementY:function(t){return"movementY"in t?t.movementY:bo}}),mm=Rs(Mr),Wg=C({},Mr,{dataTransfer:0}),ej=Rs(Wg),tj=C({},mi,{relatedTarget:0}),yo=Rs(tj),sj=C({},Gl,{animationName:0,elapsedTime:0,pseudoElement:0}),aj=Rs(sj),lj=C({},Gl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),nj=Rs(lj),ij=C({},Gl,{data:0}),hm=Rs(ij),rj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cj={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},oj={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dj(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=oj[t])?!!s[t]:!1}function No(){return dj}var uj=C({},mi,{key:function(t){if(t.key){var s=rj[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=Er(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?cj[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:No,charCode:function(t){return t.type==="keypress"?Er(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Er(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),mj=Rs(uj),hj=C({},Mr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xm=Rs(hj),xj=C({},mi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:No}),fj=Rs(xj),pj=C({},Gl,{propertyName:0,elapsedTime:0,pseudoElement:0}),gj=Rs(pj),jj=C({},Mr,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),vj=Rs(jj),bj=C({},Gl,{newState:0,oldState:0}),yj=Rs(bj),Nj=[9,13,27,32],wo=Fa&&"CompositionEvent"in window,xi=null;Fa&&"documentMode"in document&&(xi=document.documentMode);var wj=Fa&&"TextEvent"in window&&!xi,fm=Fa&&(!wo||xi&&8<xi&&11>=xi),pm=" ",gm=!1;function jm(t,s){switch(t){case"keyup":return Nj.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vm(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var yn=!1;function _j(t,s){switch(t){case"compositionend":return vm(s);case"keypress":return s.which!==32?null:(gm=!0,pm);case"textInput":return t=s.data,t===pm&&gm?null:t;default:return null}}function Sj(t,s){if(yn)return t==="compositionend"||!wo&&jm(t,s)?(t=dm(),Tr=jo=ul=null,yn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return fm&&s.locale!=="ko"?null:s.data;default:return null}}var Cj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bm(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!Cj[t.type]:s==="textarea"}function ym(t,s,a,l){vn?bn?bn.push(l):bn=[l]:vn=l,s=yc(s,"onChange"),0<s.length&&(a=new Ar("onChange","change",null,a,l),t.push({event:a,listeners:s}))}var fi=null,pi=null;function kj(t){af(t,0)}function Dr(t){var s=oi(t);if(sm(s))return t}function Nm(t,s){if(t==="change")return s}var wm=!1;if(Fa){var _o;if(Fa){var So="oninput"in document;if(!So){var _m=document.createElement("div");_m.setAttribute("oninput","return;"),So=typeof _m.oninput=="function"}_o=So}else _o=!1;wm=_o&&(!document.documentMode||9<document.documentMode)}function Sm(){fi&&(fi.detachEvent("onpropertychange",Cm),pi=fi=null)}function Cm(t){if(t.propertyName==="value"&&Dr(pi)){var s=[];ym(s,pi,t,fo(t)),om(kj,s)}}function Tj(t,s,a){t==="focusin"?(Sm(),fi=s,pi=a,fi.attachEvent("onpropertychange",Cm)):t==="focusout"&&Sm()}function Ej(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Dr(pi)}function zj(t,s){if(t==="click")return Dr(s)}function Aj(t,s){if(t==="input"||t==="change")return Dr(s)}function Mj(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var Qs=typeof Object.is=="function"?Object.is:Mj;function gi(t,s){if(Qs(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var a=Object.keys(t),l=Object.keys(s);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var i=a[l];if(!Pe.call(s,i)||!Qs(t[i],s[i]))return!1}return!0}function km(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Tm(t,s){var a=km(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=s&&l>=s)return{node:a,offset:s-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=km(a)}}function Em(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?Em(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function zm(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var s=Cr(t.document);s instanceof t.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)t=s.contentWindow;else break;s=Cr(t.document)}return s}function Co(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}var Dj=Fa&&"documentMode"in document&&11>=document.documentMode,Nn=null,ko=null,ji=null,To=!1;function Am(t,s,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;To||Nn==null||Nn!==Cr(l)||(l=Nn,"selectionStart"in l&&Co(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),ji&&gi(ji,l)||(ji=l,l=yc(ko,"onSelect"),0<l.length&&(s=new Ar("onSelect","select",null,s,a),t.push({event:s,listeners:l}),s.target=Nn)))}function Vl(t,s){var a={};return a[t.toLowerCase()]=s.toLowerCase(),a["Webkit"+t]="webkit"+s,a["Moz"+t]="moz"+s,a}var wn={animationend:Vl("Animation","AnimationEnd"),animationiteration:Vl("Animation","AnimationIteration"),animationstart:Vl("Animation","AnimationStart"),transitionrun:Vl("Transition","TransitionRun"),transitionstart:Vl("Transition","TransitionStart"),transitioncancel:Vl("Transition","TransitionCancel"),transitionend:Vl("Transition","TransitionEnd")},Eo={},Mm={};Fa&&(Mm=document.createElement("div").style,"AnimationEvent"in window||(delete wn.animationend.animation,delete wn.animationiteration.animation,delete wn.animationstart.animation),"TransitionEvent"in window||delete wn.transitionend.transition);function Fl(t){if(Eo[t])return Eo[t];if(!wn[t])return t;var s=wn[t],a;for(a in s)if(s.hasOwnProperty(a)&&a in Mm)return Eo[t]=s[a];return t}var Dm=Fl("animationend"),Om=Fl("animationiteration"),Rm=Fl("animationstart"),Oj=Fl("transitionrun"),Rj=Fl("transitionstart"),Lj=Fl("transitioncancel"),Lm=Fl("transitionend"),Um=new Map,zo="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");zo.push("scrollEnd");function ga(t,s){Um.set(t,s),ql(s,[t])}var Or=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},la=[],_n=0,Ao=0;function Rr(){for(var t=_n,s=Ao=_n=0;s<t;){var a=la[s];la[s++]=null;var l=la[s];la[s++]=null;var i=la[s];la[s++]=null;var o=la[s];if(la[s++]=null,l!==null&&i!==null){var m=l.pending;m===null?i.next=i:(i.next=m.next,m.next=i),l.pending=i}o!==0&&Bm(a,i,o)}}function Lr(t,s,a,l){la[_n++]=t,la[_n++]=s,la[_n++]=a,la[_n++]=l,Ao|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Mo(t,s,a,l){return Lr(t,s,a,l),Ur(t)}function $l(t,s){return Lr(t,null,null,s),Ur(t)}function Bm(t,s,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var i=!1,o=t.return;o!==null;)o.childLanes|=a,l=o.alternate,l!==null&&(l.childLanes|=a),o.tag===22&&(t=o.stateNode,t===null||t._visibility&1||(i=!0)),t=o,o=o.return;return t.tag===3?(o=t.stateNode,i&&s!==null&&(i=31-Ht(a),t=o.hiddenUpdates,l=t[i],l===null?t[i]=[s]:l.push(s),s.lane=a|536870912),o):null}function Ur(t){if(50<qi)throw qi=0,Gd=null,Error(d(185));for(var s=t.return;s!==null;)t=s,s=t.return;return t.tag===3?t.stateNode:null}var Sn={};function Uj(t,s,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ys(t,s,a,l){return new Uj(t,s,a,l)}function Do(t){return t=t.prototype,!(!t||!t.isReactComponent)}function $a(t,s){var a=t.alternate;return a===null?(a=Ys(t.tag,s,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=s,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,s=t.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Hm(t,s){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=s,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,s=a.dependencies,t.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t}function Br(t,s,a,l,i,o){var m=0;if(l=t,typeof t=="function")Do(t)&&(m=1);else if(typeof t=="string")m=Vv(t,a,xe.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case ne:return t=Ys(31,a,s,i),t.elementType=ne,t.lanes=o,t;case F:return Ql(a.children,i,o,s);case B:m=8,i|=24;break;case O:return t=Ys(12,a,s,i|2),t.elementType=O,t.lanes=o,t;case V:return t=Ys(13,a,s,i),t.elementType=V,t.lanes=o,t;case Y:return t=Ys(19,a,s,i),t.elementType=Y,t.lanes=o,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case H:m=10;break e;case K:m=9;break e;case z:m=11;break e;case E:m=14;break e;case R:m=16,l=null;break e}m=29,a=Error(d(130,t===null?"null":typeof t,"")),l=null}return s=Ys(m,a,s,i),s.elementType=t,s.type=l,s.lanes=o,s}function Ql(t,s,a,l){return t=Ys(7,t,l,s),t.lanes=a,t}function Oo(t,s,a){return t=Ys(6,t,null,s),t.lanes=a,t}function qm(t){var s=Ys(18,null,null,0);return s.stateNode=t,s}function Ro(t,s,a){return s=Ys(4,t.children!==null?t.children:[],t.key,s),s.lanes=a,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}var Gm=new WeakMap;function na(t,s){if(typeof t=="object"&&t!==null){var a=Gm.get(t);return a!==void 0?a:(s={value:t,source:s,stack:ke(s)},Gm.set(t,s),s)}return{value:t,source:s,stack:ke(s)}}var Cn=[],kn=0,Hr=null,vi=0,ia=[],ra=0,ml=null,ka=1,Ta="";function Qa(t,s){Cn[kn++]=vi,Cn[kn++]=Hr,Hr=t,vi=s}function Vm(t,s,a){ia[ra++]=ka,ia[ra++]=Ta,ia[ra++]=ml,ml=t;var l=ka;t=Ta;var i=32-Ht(l)-1;l&=~(1<<i),a+=1;var o=32-Ht(s)+i;if(30<o){var m=i-i%5;o=(l&(1<<m)-1).toString(32),l>>=m,i-=m,ka=1<<32-Ht(s)+i|a<<i|l,Ta=o+t}else ka=1<<o|a<<i|l,Ta=t}function Lo(t){t.return!==null&&(Qa(t,1),Vm(t,1,0))}function Uo(t){for(;t===Hr;)Hr=Cn[--kn],Cn[kn]=null,vi=Cn[--kn],Cn[kn]=null;for(;t===ml;)ml=ia[--ra],ia[ra]=null,Ta=ia[--ra],ia[ra]=null,ka=ia[--ra],ia[ra]=null}function Fm(t,s){ia[ra++]=ka,ia[ra++]=Ta,ia[ra++]=ml,ka=s.id,Ta=s.overflow,ml=t}var vs=null,qt=null,vt=!1,hl=null,ca=!1,Bo=Error(d(519));function xl(t){var s=Error(d(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw bi(na(s,t)),Bo}function $m(t){var s=t.stateNode,a=t.type,l=t.memoizedProps;switch(s[$e]=t,s[jt]=l,a){case"dialog":nt("cancel",s),nt("close",s);break;case"iframe":case"object":case"embed":nt("load",s);break;case"video":case"audio":for(a=0;a<Vi.length;a++)nt(Vi[a],s);break;case"source":nt("error",s);break;case"img":case"image":case"link":nt("error",s),nt("load",s);break;case"details":nt("toggle",s);break;case"input":nt("invalid",s),am(s,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":nt("invalid",s);break;case"textarea":nt("invalid",s),nm(s,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||l.suppressHydrationWarning===!0||cf(s.textContent,a)?(l.popover!=null&&(nt("beforetoggle",s),nt("toggle",s)),l.onScroll!=null&&nt("scroll",s),l.onScrollEnd!=null&&nt("scrollend",s),l.onClick!=null&&(s.onclick=Va),s=!0):s=!1,s||xl(t,!0)}function Qm(t){for(vs=t.return;vs;)switch(vs.tag){case 5:case 31:case 13:ca=!1;return;case 27:case 3:ca=!0;return;default:vs=vs.return}}function Tn(t){if(t!==vs)return!1;if(!vt)return Qm(t),vt=!0,!1;var s=t.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||su(t.type,t.memoizedProps)),a=!a),a&&qt&&xl(t),Qm(t),s===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(d(317));qt=gf(t)}else if(s===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(d(317));qt=gf(t)}else s===27?(s=qt,Tl(t.type)?(t=ru,ru=null,qt=t):qt=s):qt=vs?da(t.stateNode.nextSibling):null;return!0}function Yl(){qt=vs=null,vt=!1}function Ho(){var t=hl;return t!==null&&(Hs===null?Hs=t:Hs.push.apply(Hs,t),hl=null),t}function bi(t){hl===null?hl=[t]:hl.push(t)}var qo=me(null),Xl=null,Ya=null;function fl(t,s,a){ae(qo,s._currentValue),s._currentValue=a}function Xa(t){t._currentValue=qo.current,oe(qo)}function Go(t,s,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,l!==null&&(l.childLanes|=s)):l!==null&&(l.childLanes&s)!==s&&(l.childLanes|=s),t===a)break;t=t.return}}function Vo(t,s,a,l){var i=t.child;for(i!==null&&(i.return=t);i!==null;){var o=i.dependencies;if(o!==null){var m=i.child;o=o.firstContext;e:for(;o!==null;){var g=o;o=i;for(var k=0;k<s.length;k++)if(g.context===s[k]){o.lanes|=a,g=o.alternate,g!==null&&(g.lanes|=a),Go(o.return,a,t),l||(m=null);break e}o=g.next}}else if(i.tag===18){if(m=i.return,m===null)throw Error(d(341));m.lanes|=a,o=m.alternate,o!==null&&(o.lanes|=a),Go(m,a,t),m=null}else m=i.child;if(m!==null)m.return=i;else for(m=i;m!==null;){if(m===t){m=null;break}if(i=m.sibling,i!==null){i.return=m.return,m=i;break}m=m.return}i=m}}function En(t,s,a,l){t=null;for(var i=s,o=!1;i!==null;){if(!o){if((i.flags&524288)!==0)o=!0;else if((i.flags&262144)!==0)break}if(i.tag===10){var m=i.alternate;if(m===null)throw Error(d(387));if(m=m.memoizedProps,m!==null){var g=i.type;Qs(i.pendingProps.value,m.value)||(t!==null?t.push(g):t=[g])}}else if(i===G.current){if(m=i.alternate,m===null)throw Error(d(387));m.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(t!==null?t.push(Xi):t=[Xi])}i=i.return}t!==null&&Vo(s,t,a,l),s.flags|=262144}function qr(t){for(t=t.firstContext;t!==null;){if(!Qs(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Kl(t){Xl=t,Ya=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function bs(t){return Ym(Xl,t)}function Gr(t,s){return Xl===null&&Kl(t),Ym(t,s)}function Ym(t,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},Ya===null){if(t===null)throw Error(d(308));Ya=s,t.dependencies={lanes:0,firstContext:s},t.flags|=524288}else Ya=Ya.next=s;return a}var Bj=typeof AbortController<"u"?AbortController:function(){var t=[],s=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){s.aborted=!0,t.forEach(function(a){return a()})}},Hj=n.unstable_scheduleCallback,qj=n.unstable_NormalPriority,is={$$typeof:H,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Fo(){return{controller:new Bj,data:new Map,refCount:0}}function yi(t){t.refCount--,t.refCount===0&&Hj(qj,function(){t.controller.abort()})}var Ni=null,$o=0,zn=0,An=null;function Gj(t,s){if(Ni===null){var a=Ni=[];$o=0,zn=Xd(),An={status:"pending",value:void 0,then:function(l){a.push(l)}}}return $o++,s.then(Xm,Xm),s}function Xm(){if(--$o===0&&Ni!==null){An!==null&&(An.status="fulfilled");var t=Ni;Ni=null,zn=0,An=null;for(var s=0;s<t.length;s++)(0,t[s])()}}function Vj(t,s){var a=[],l={status:"pending",value:null,reason:null,then:function(i){a.push(i)}};return t.then(function(){l.status="fulfilled",l.value=s;for(var i=0;i<a.length;i++)(0,a[i])(s)},function(i){for(l.status="rejected",l.reason=i,i=0;i<a.length;i++)(0,a[i])(void 0)}),l}var Km=A.S;A.S=function(t,s){Ax=Ke(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&Gj(t,s),Km!==null&&Km(t,s)};var Zl=me(null);function Qo(){var t=Zl.current;return t!==null?t:Lt.pooledCache}function Vr(t,s){s===null?ae(Zl,Zl.current):ae(Zl,s.pool)}function Zm(){var t=Qo();return t===null?null:{parent:is._currentValue,pool:t}}var Mn=Error(d(460)),Yo=Error(d(474)),Fr=Error(d(542)),$r={then:function(){}};function Jm(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Im(t,s,a){switch(a=t[a],a===void 0?t.push(s):a!==s&&(s.then(Va,Va),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,Wm(t),t;default:if(typeof s.status=="string")s.then(Va,Va);else{if(t=Lt,t!==null&&100<t.shellSuspendCounter)throw Error(d(482));t=s,t.status="pending",t.then(function(l){if(s.status==="pending"){var i=s;i.status="fulfilled",i.value=l}},function(l){if(s.status==="pending"){var i=s;i.status="rejected",i.reason=l}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,Wm(t),t}throw Il=s,Mn}}function Jl(t){try{var s=t._init;return s(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Il=a,Mn):a}}var Il=null;function Pm(){if(Il===null)throw Error(d(459));var t=Il;return Il=null,t}function Wm(t){if(t===Mn||t===Fr)throw Error(d(483))}var Dn=null,wi=0;function Qr(t){var s=wi;return wi+=1,Dn===null&&(Dn=[]),Im(Dn,t,s)}function _i(t,s){s=s.props.ref,t.ref=s!==void 0?s:null}function Yr(t,s){throw s.$$typeof===S?Error(d(525)):(t=Object.prototype.toString.call(s),Error(d(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)))}function eh(t){function s(q,M){if(t){var Z=q.deletions;Z===null?(q.deletions=[M],q.flags|=16):Z.push(M)}}function a(q,M){if(!t)return null;for(;M!==null;)s(q,M),M=M.sibling;return null}function l(q){for(var M=new Map;q!==null;)q.key!==null?M.set(q.key,q):M.set(q.index,q),q=q.sibling;return M}function i(q,M){return q=$a(q,M),q.index=0,q.sibling=null,q}function o(q,M,Z){return q.index=Z,t?(Z=q.alternate,Z!==null?(Z=Z.index,Z<M?(q.flags|=67108866,M):Z):(q.flags|=67108866,M)):(q.flags|=1048576,M)}function m(q){return t&&q.alternate===null&&(q.flags|=67108866),q}function g(q,M,Z,ue){return M===null||M.tag!==6?(M=Oo(Z,q.mode,ue),M.return=q,M):(M=i(M,Z),M.return=q,M)}function k(q,M,Z,ue){var Oe=Z.type;return Oe===F?le(q,M,Z.props.children,ue,Z.key):M!==null&&(M.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===R&&Jl(Oe)===M.type)?(M=i(M,Z.props),_i(M,Z),M.return=q,M):(M=Br(Z.type,Z.key,Z.props,null,q.mode,ue),_i(M,Z),M.return=q,M)}function J(q,M,Z,ue){return M===null||M.tag!==4||M.stateNode.containerInfo!==Z.containerInfo||M.stateNode.implementation!==Z.implementation?(M=Ro(Z,q.mode,ue),M.return=q,M):(M=i(M,Z.children||[]),M.return=q,M)}function le(q,M,Z,ue,Oe){return M===null||M.tag!==7?(M=Ql(Z,q.mode,ue,Oe),M.return=q,M):(M=i(M,Z),M.return=q,M)}function he(q,M,Z){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=Oo(""+M,q.mode,Z),M.return=q,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case w:return Z=Br(M.type,M.key,M.props,null,q.mode,Z),_i(Z,M),Z.return=q,Z;case L:return M=Ro(M,q.mode,Z),M.return=q,M;case R:return M=Jl(M),he(q,M,Z)}if(be(M)||we(M))return M=Ql(M,q.mode,Z,null),M.return=q,M;if(typeof M.then=="function")return he(q,Qr(M),Z);if(M.$$typeof===H)return he(q,Gr(q,M),Z);Yr(q,M)}return null}function I(q,M,Z,ue){var Oe=M!==null?M.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Oe!==null?null:g(q,M,""+Z,ue);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case w:return Z.key===Oe?k(q,M,Z,ue):null;case L:return Z.key===Oe?J(q,M,Z,ue):null;case R:return Z=Jl(Z),I(q,M,Z,ue)}if(be(Z)||we(Z))return Oe!==null?null:le(q,M,Z,ue,null);if(typeof Z.then=="function")return I(q,M,Qr(Z),ue);if(Z.$$typeof===H)return I(q,M,Gr(q,Z),ue);Yr(q,Z)}return null}function se(q,M,Z,ue,Oe){if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return q=q.get(Z)||null,g(M,q,""+ue,Oe);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case w:return q=q.get(ue.key===null?Z:ue.key)||null,k(M,q,ue,Oe);case L:return q=q.get(ue.key===null?Z:ue.key)||null,J(M,q,ue,Oe);case R:return ue=Jl(ue),se(q,M,Z,ue,Oe)}if(be(ue)||we(ue))return q=q.get(Z)||null,le(M,q,ue,Oe,null);if(typeof ue.then=="function")return se(q,M,Z,Qr(ue),Oe);if(ue.$$typeof===H)return se(q,M,Z,Gr(M,ue),Oe);Yr(M,ue)}return null}function Ee(q,M,Z,ue){for(var Oe=null,_t=null,Ae=M,et=M=0,ot=null;Ae!==null&&et<Z.length;et++){Ae.index>et?(ot=Ae,Ae=null):ot=Ae.sibling;var St=I(q,Ae,Z[et],ue);if(St===null){Ae===null&&(Ae=ot);break}t&&Ae&&St.alternate===null&&s(q,Ae),M=o(St,M,et),_t===null?Oe=St:_t.sibling=St,_t=St,Ae=ot}if(et===Z.length)return a(q,Ae),vt&&Qa(q,et),Oe;if(Ae===null){for(;et<Z.length;et++)Ae=he(q,Z[et],ue),Ae!==null&&(M=o(Ae,M,et),_t===null?Oe=Ae:_t.sibling=Ae,_t=Ae);return vt&&Qa(q,et),Oe}for(Ae=l(Ae);et<Z.length;et++)ot=se(Ae,q,et,Z[et],ue),ot!==null&&(t&&ot.alternate!==null&&Ae.delete(ot.key===null?et:ot.key),M=o(ot,M,et),_t===null?Oe=ot:_t.sibling=ot,_t=ot);return t&&Ae.forEach(function(Dl){return s(q,Dl)}),vt&&Qa(q,et),Oe}function Ue(q,M,Z,ue){if(Z==null)throw Error(d(151));for(var Oe=null,_t=null,Ae=M,et=M=0,ot=null,St=Z.next();Ae!==null&&!St.done;et++,St=Z.next()){Ae.index>et?(ot=Ae,Ae=null):ot=Ae.sibling;var Dl=I(q,Ae,St.value,ue);if(Dl===null){Ae===null&&(Ae=ot);break}t&&Ae&&Dl.alternate===null&&s(q,Ae),M=o(Dl,M,et),_t===null?Oe=Dl:_t.sibling=Dl,_t=Dl,Ae=ot}if(St.done)return a(q,Ae),vt&&Qa(q,et),Oe;if(Ae===null){for(;!St.done;et++,St=Z.next())St=he(q,St.value,ue),St!==null&&(M=o(St,M,et),_t===null?Oe=St:_t.sibling=St,_t=St);return vt&&Qa(q,et),Oe}for(Ae=l(Ae);!St.done;et++,St=Z.next())St=se(Ae,q,et,St.value,ue),St!==null&&(t&&St.alternate!==null&&Ae.delete(St.key===null?et:St.key),M=o(St,M,et),_t===null?Oe=St:_t.sibling=St,_t=St);return t&&Ae.forEach(function(Wv){return s(q,Wv)}),vt&&Qa(q,et),Oe}function Ot(q,M,Z,ue){if(typeof Z=="object"&&Z!==null&&Z.type===F&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case w:e:{for(var Oe=Z.key;M!==null;){if(M.key===Oe){if(Oe=Z.type,Oe===F){if(M.tag===7){a(q,M.sibling),ue=i(M,Z.props.children),ue.return=q,q=ue;break e}}else if(M.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===R&&Jl(Oe)===M.type){a(q,M.sibling),ue=i(M,Z.props),_i(ue,Z),ue.return=q,q=ue;break e}a(q,M);break}else s(q,M);M=M.sibling}Z.type===F?(ue=Ql(Z.props.children,q.mode,ue,Z.key),ue.return=q,q=ue):(ue=Br(Z.type,Z.key,Z.props,null,q.mode,ue),_i(ue,Z),ue.return=q,q=ue)}return m(q);case L:e:{for(Oe=Z.key;M!==null;){if(M.key===Oe)if(M.tag===4&&M.stateNode.containerInfo===Z.containerInfo&&M.stateNode.implementation===Z.implementation){a(q,M.sibling),ue=i(M,Z.children||[]),ue.return=q,q=ue;break e}else{a(q,M);break}else s(q,M);M=M.sibling}ue=Ro(Z,q.mode,ue),ue.return=q,q=ue}return m(q);case R:return Z=Jl(Z),Ot(q,M,Z,ue)}if(be(Z))return Ee(q,M,Z,ue);if(we(Z)){if(Oe=we(Z),typeof Oe!="function")throw Error(d(150));return Z=Oe.call(Z),Ue(q,M,Z,ue)}if(typeof Z.then=="function")return Ot(q,M,Qr(Z),ue);if(Z.$$typeof===H)return Ot(q,M,Gr(q,Z),ue);Yr(q,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint"?(Z=""+Z,M!==null&&M.tag===6?(a(q,M.sibling),ue=i(M,Z),ue.return=q,q=ue):(a(q,M),ue=Oo(Z,q.mode,ue),ue.return=q,q=ue),m(q)):a(q,M)}return function(q,M,Z,ue){try{wi=0;var Oe=Ot(q,M,Z,ue);return Dn=null,Oe}catch(Ae){if(Ae===Mn||Ae===Fr)throw Ae;var _t=Ys(29,Ae,null,q.mode);return _t.lanes=ue,_t.return=q,_t}finally{}}}var Pl=eh(!0),th=eh(!1),pl=!1;function Xo(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ko(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function gl(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function jl(t,s,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Ct&2)!==0){var i=l.pending;return i===null?s.next=s:(s.next=i.next,i.next=s),l.pending=s,s=Ur(t),Bm(t,null,a),s}return Lr(t,l,s,a),Ur(t)}function Si(t,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var l=s.lanes;l&=t.pendingLanes,a|=l,s.lanes=a,dl(t,a)}}function Zo(t,s){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var i=null,o=null;if(a=a.firstBaseUpdate,a!==null){do{var m={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};o===null?i=o=m:o=o.next=m,a=a.next}while(a!==null);o===null?i=o=s:o=o.next=s}else i=o=s;a={baseState:l.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=s:t.next=s,a.lastBaseUpdate=s}var Jo=!1;function Ci(){if(Jo){var t=An;if(t!==null)throw t}}function ki(t,s,a,l){Jo=!1;var i=t.updateQueue;pl=!1;var o=i.firstBaseUpdate,m=i.lastBaseUpdate,g=i.shared.pending;if(g!==null){i.shared.pending=null;var k=g,J=k.next;k.next=null,m===null?o=J:m.next=J,m=k;var le=t.alternate;le!==null&&(le=le.updateQueue,g=le.lastBaseUpdate,g!==m&&(g===null?le.firstBaseUpdate=J:g.next=J,le.lastBaseUpdate=k))}if(o!==null){var he=i.baseState;m=0,le=J=k=null,g=o;do{var I=g.lane&-536870913,se=I!==g.lane;if(se?(ct&I)===I:(l&I)===I){I!==0&&I===zn&&(Jo=!0),le!==null&&(le=le.next={lane:0,tag:g.tag,payload:g.payload,callback:null,next:null});e:{var Ee=t,Ue=g;I=s;var Ot=a;switch(Ue.tag){case 1:if(Ee=Ue.payload,typeof Ee=="function"){he=Ee.call(Ot,he,I);break e}he=Ee;break e;case 3:Ee.flags=Ee.flags&-65537|128;case 0:if(Ee=Ue.payload,I=typeof Ee=="function"?Ee.call(Ot,he,I):Ee,I==null)break e;he=C({},he,I);break e;case 2:pl=!0}}I=g.callback,I!==null&&(t.flags|=64,se&&(t.flags|=8192),se=i.callbacks,se===null?i.callbacks=[I]:se.push(I))}else se={lane:I,tag:g.tag,payload:g.payload,callback:g.callback,next:null},le===null?(J=le=se,k=he):le=le.next=se,m|=I;if(g=g.next,g===null){if(g=i.shared.pending,g===null)break;se=g,g=se.next,se.next=null,i.lastBaseUpdate=se,i.shared.pending=null}}while(!0);le===null&&(k=he),i.baseState=k,i.firstBaseUpdate=J,i.lastBaseUpdate=le,o===null&&(i.shared.lanes=0),wl|=m,t.lanes=m,t.memoizedState=he}}function sh(t,s){if(typeof t!="function")throw Error(d(191,t));t.call(s)}function ah(t,s){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)sh(a[t],s)}var On=me(null),Xr=me(0);function lh(t,s){t=sl,ae(Xr,t),ae(On,s),sl=t|s.baseLanes}function Io(){ae(Xr,sl),ae(On,On.current)}function Po(){sl=Xr.current,oe(On),oe(Xr)}var Xs=me(null),oa=null;function vl(t){var s=t.alternate;ae(as,as.current&1),ae(Xs,t),oa===null&&(s===null||On.current!==null||s.memoizedState!==null)&&(oa=t)}function Wo(t){ae(as,as.current),ae(Xs,t),oa===null&&(oa=t)}function nh(t){t.tag===22?(ae(as,as.current),ae(Xs,t),oa===null&&(oa=t)):bl()}function bl(){ae(as,as.current),ae(Xs,Xs.current)}function Ks(t){oe(Xs),oa===t&&(oa=null),oe(as)}var as=me(0);function Kr(t){for(var s=t;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||nu(a)||iu(a)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Ka=0,Ie=null,Mt=null,rs=null,Zr=!1,Rn=!1,Wl=!1,Jr=0,Ti=0,Ln=null,Fj=0;function It(){throw Error(d(321))}function ed(t,s){if(s===null)return!1;for(var a=0;a<s.length&&a<t.length;a++)if(!Qs(t[a],s[a]))return!1;return!0}function td(t,s,a,l,i,o){return Ka=o,Ie=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,A.H=t===null||t.memoizedState===null?Vh:pd,Wl=!1,o=a(l,i),Wl=!1,Rn&&(o=rh(s,a,l,i)),ih(t),o}function ih(t){A.H=Ai;var s=Mt!==null&&Mt.next!==null;if(Ka=0,rs=Mt=Ie=null,Zr=!1,Ti=0,Ln=null,s)throw Error(d(300));t===null||cs||(t=t.dependencies,t!==null&&qr(t)&&(cs=!0))}function rh(t,s,a,l){Ie=t;var i=0;do{if(Rn&&(Ln=null),Ti=0,Rn=!1,25<=i)throw Error(d(301));if(i+=1,rs=Mt=null,t.updateQueue!=null){var o=t.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,o.memoCache!=null&&(o.memoCache.index=0)}A.H=Fh,o=s(a,l)}while(Rn);return o}function $j(){var t=A.H,s=t.useState()[0];return s=typeof s.then=="function"?Ei(s):s,t=t.useState()[0],(Mt!==null?Mt.memoizedState:null)!==t&&(Ie.flags|=1024),s}function sd(){var t=Jr!==0;return Jr=0,t}function ad(t,s,a){s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~a}function ld(t){if(Zr){for(t=t.memoizedState;t!==null;){var s=t.queue;s!==null&&(s.pending=null),t=t.next}Zr=!1}Ka=0,rs=Mt=Ie=null,Rn=!1,Ti=Jr=0,Ln=null}function Es(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rs===null?Ie.memoizedState=rs=t:rs=rs.next=t,rs}function ls(){if(Mt===null){var t=Ie.alternate;t=t!==null?t.memoizedState:null}else t=Mt.next;var s=rs===null?Ie.memoizedState:rs.next;if(s!==null)rs=s,Mt=t;else{if(t===null)throw Ie.alternate===null?Error(d(467)):Error(d(310));Mt=t,t={memoizedState:Mt.memoizedState,baseState:Mt.baseState,baseQueue:Mt.baseQueue,queue:Mt.queue,next:null},rs===null?Ie.memoizedState=rs=t:rs=rs.next=t}return rs}function Ir(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ei(t){var s=Ti;return Ti+=1,Ln===null&&(Ln=[]),t=Im(Ln,t,s),s=Ie,(rs===null?s.memoizedState:rs.next)===null&&(s=s.alternate,A.H=s===null||s.memoizedState===null?Vh:pd),t}function Pr(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Ei(t);if(t.$$typeof===H)return bs(t)}throw Error(d(438,String(t)))}function nd(t){var s=null,a=Ie.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var l=Ie.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(s={data:l.data.map(function(i){return i.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=Ir(),Ie.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(t),l=0;l<t;l++)a[l]=fe;return s.index++,a}function Za(t,s){return typeof s=="function"?s(t):s}function Wr(t){var s=ls();return id(s,Mt,t)}function id(t,s,a){var l=t.queue;if(l===null)throw Error(d(311));l.lastRenderedReducer=a;var i=t.baseQueue,o=l.pending;if(o!==null){if(i!==null){var m=i.next;i.next=o.next,o.next=m}s.baseQueue=i=o,l.pending=null}if(o=t.baseState,i===null)t.memoizedState=o;else{s=i.next;var g=m=null,k=null,J=s,le=!1;do{var he=J.lane&-536870913;if(he!==J.lane?(ct&he)===he:(Ka&he)===he){var I=J.revertLane;if(I===0)k!==null&&(k=k.next={lane:0,revertLane:0,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),he===zn&&(le=!0);else if((Ka&I)===I){J=J.next,I===zn&&(le=!0);continue}else he={lane:0,revertLane:J.revertLane,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},k===null?(g=k=he,m=o):k=k.next=he,Ie.lanes|=I,wl|=I;he=J.action,Wl&&a(o,he),o=J.hasEagerState?J.eagerState:a(o,he)}else I={lane:he,revertLane:J.revertLane,gesture:J.gesture,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},k===null?(g=k=I,m=o):k=k.next=I,Ie.lanes|=he,wl|=he;J=J.next}while(J!==null&&J!==s);if(k===null?m=o:k.next=g,!Qs(o,t.memoizedState)&&(cs=!0,le&&(a=An,a!==null)))throw a;t.memoizedState=o,t.baseState=m,t.baseQueue=k,l.lastRenderedState=o}return i===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function rd(t){var s=ls(),a=s.queue;if(a===null)throw Error(d(311));a.lastRenderedReducer=t;var l=a.dispatch,i=a.pending,o=s.memoizedState;if(i!==null){a.pending=null;var m=i=i.next;do o=t(o,m.action),m=m.next;while(m!==i);Qs(o,s.memoizedState)||(cs=!0),s.memoizedState=o,s.baseQueue===null&&(s.baseState=o),a.lastRenderedState=o}return[o,l]}function ch(t,s,a){var l=Ie,i=ls(),o=vt;if(o){if(a===void 0)throw Error(d(407));a=a()}else a=s();var m=!Qs((Mt||i).memoizedState,a);if(m&&(i.memoizedState=a,cs=!0),i=i.queue,dd(uh.bind(null,l,i,t),[t]),i.getSnapshot!==s||m||rs!==null&&rs.memoizedState.tag&1){if(l.flags|=2048,Un(9,{destroy:void 0},dh.bind(null,l,i,a,s),null),Lt===null)throw Error(d(349));o||(Ka&127)!==0||oh(l,s,a)}return a}function oh(t,s,a){t.flags|=16384,t={getSnapshot:s,value:a},s=Ie.updateQueue,s===null?(s=Ir(),Ie.updateQueue=s,s.stores=[t]):(a=s.stores,a===null?s.stores=[t]:a.push(t))}function dh(t,s,a,l){s.value=a,s.getSnapshot=l,mh(s)&&hh(t)}function uh(t,s,a){return a(function(){mh(s)&&hh(t)})}function mh(t){var s=t.getSnapshot;t=t.value;try{var a=s();return!Qs(t,a)}catch{return!0}}function hh(t){var s=$l(t,2);s!==null&&qs(s,t,2)}function cd(t){var s=Es();if(typeof t=="function"){var a=t;if(t=a(),Wl){yt(!0);try{a()}finally{yt(!1)}}}return s.memoizedState=s.baseState=t,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Za,lastRenderedState:t},s}function xh(t,s,a,l){return t.baseState=a,id(t,Mt,typeof l=="function"?l:Za)}function Qj(t,s,a,l,i){if(sc(t))throw Error(d(485));if(t=s.action,t!==null){var o={payload:i,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(m){o.listeners.push(m)}};A.T!==null?a(!0):o.isTransition=!1,l(o),a=s.pending,a===null?(o.next=s.pending=o,fh(s,o)):(o.next=a.next,s.pending=a.next=o)}}function fh(t,s){var a=s.action,l=s.payload,i=t.state;if(s.isTransition){var o=A.T,m={};A.T=m;try{var g=a(i,l),k=A.S;k!==null&&k(m,g),ph(t,s,g)}catch(J){od(t,s,J)}finally{o!==null&&m.types!==null&&(o.types=m.types),A.T=o}}else try{o=a(i,l),ph(t,s,o)}catch(J){od(t,s,J)}}function ph(t,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){gh(t,s,l)},function(l){return od(t,s,l)}):gh(t,s,a)}function gh(t,s,a){s.status="fulfilled",s.value=a,jh(s),t.state=a,s=t.pending,s!==null&&(a=s.next,a===s?t.pending=null:(a=a.next,s.next=a,fh(t,a)))}function od(t,s,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do s.status="rejected",s.reason=a,jh(s),s=s.next;while(s!==l)}t.action=null}function jh(t){t=t.listeners;for(var s=0;s<t.length;s++)(0,t[s])()}function vh(t,s){return s}function bh(t,s){if(vt){var a=Lt.formState;if(a!==null){e:{var l=Ie;if(vt){if(qt){t:{for(var i=qt,o=ca;i.nodeType!==8;){if(!o){i=null;break t}if(i=da(i.nextSibling),i===null){i=null;break t}}o=i.data,i=o==="F!"||o==="F"?i:null}if(i){qt=da(i.nextSibling),l=i.data==="F!";break e}}xl(l)}l=!1}l&&(s=a[0])}}return a=Es(),a.memoizedState=a.baseState=s,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vh,lastRenderedState:s},a.queue=l,a=Hh.bind(null,Ie,l),l.dispatch=a,l=cd(!1),o=fd.bind(null,Ie,!1,l.queue),l=Es(),i={state:s,dispatch:null,action:t,pending:null},l.queue=i,a=Qj.bind(null,Ie,i,o,a),i.dispatch=a,l.memoizedState=t,[s,a,!1]}function yh(t){var s=ls();return Nh(s,Mt,t)}function Nh(t,s,a){if(s=id(t,s,vh)[0],t=Wr(Za)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var l=Ei(s)}catch(m){throw m===Mn?Fr:m}else l=s;s=ls();var i=s.queue,o=i.dispatch;return a!==s.memoizedState&&(Ie.flags|=2048,Un(9,{destroy:void 0},Yj.bind(null,i,a),null)),[l,o,t]}function Yj(t,s){t.action=s}function wh(t){var s=ls(),a=Mt;if(a!==null)return Nh(s,a,t);ls(),s=s.memoizedState,a=ls();var l=a.queue.dispatch;return a.memoizedState=t,[s,l,!1]}function Un(t,s,a,l){return t={tag:t,create:a,deps:l,inst:s,next:null},s=Ie.updateQueue,s===null&&(s=Ir(),Ie.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,s.lastEffect=t),t}function _h(){return ls().memoizedState}function ec(t,s,a,l){var i=Es();Ie.flags|=t,i.memoizedState=Un(1|s,{destroy:void 0},a,l===void 0?null:l)}function tc(t,s,a,l){var i=ls();l=l===void 0?null:l;var o=i.memoizedState.inst;Mt!==null&&l!==null&&ed(l,Mt.memoizedState.deps)?i.memoizedState=Un(s,o,a,l):(Ie.flags|=t,i.memoizedState=Un(1|s,o,a,l))}function Sh(t,s){ec(8390656,8,t,s)}function dd(t,s){tc(2048,8,t,s)}function Xj(t){Ie.flags|=4;var s=Ie.updateQueue;if(s===null)s=Ir(),Ie.updateQueue=s,s.events=[t];else{var a=s.events;a===null?s.events=[t]:a.push(t)}}function Ch(t){var s=ls().memoizedState;return Xj({ref:s,nextImpl:t}),function(){if((Ct&2)!==0)throw Error(d(440));return s.impl.apply(void 0,arguments)}}function kh(t,s){return tc(4,2,t,s)}function Th(t,s){return tc(4,4,t,s)}function Eh(t,s){if(typeof s=="function"){t=t();var a=s(t);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function zh(t,s,a){a=a!=null?a.concat([t]):null,tc(4,4,Eh.bind(null,s,t),a)}function ud(){}function Ah(t,s){var a=ls();s=s===void 0?null:s;var l=a.memoizedState;return s!==null&&ed(s,l[1])?l[0]:(a.memoizedState=[t,s],t)}function Mh(t,s){var a=ls();s=s===void 0?null:s;var l=a.memoizedState;if(s!==null&&ed(s,l[1]))return l[0];if(l=t(),Wl){yt(!0);try{t()}finally{yt(!1)}}return a.memoizedState=[l,s],l}function md(t,s,a){return a===void 0||(Ka&1073741824)!==0&&(ct&261930)===0?t.memoizedState=s:(t.memoizedState=a,t=Dx(),Ie.lanes|=t,wl|=t,a)}function Dh(t,s,a,l){return Qs(a,s)?a:On.current!==null?(t=md(t,a,l),Qs(t,s)||(cs=!0),t):(Ka&42)===0||(Ka&1073741824)!==0&&(ct&261930)===0?(cs=!0,t.memoizedState=a):(t=Dx(),Ie.lanes|=t,wl|=t,s)}function Oh(t,s,a,l,i){var o=X.p;X.p=o!==0&&8>o?o:8;var m=A.T,g={};A.T=g,fd(t,!1,s,a);try{var k=i(),J=A.S;if(J!==null&&J(g,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var le=Vj(k,l);zi(t,s,le,Is(t))}else zi(t,s,l,Is(t))}catch(he){zi(t,s,{then:function(){},status:"rejected",reason:he},Is())}finally{X.p=o,m!==null&&g.types!==null&&(m.types=g.types),A.T=m}}function Kj(){}function hd(t,s,a,l){if(t.tag!==5)throw Error(d(476));var i=Rh(t).queue;Oh(t,i,s,T,a===null?Kj:function(){return Lh(t),a(l)})}function Rh(t){var s=t.memoizedState;if(s!==null)return s;s={memoizedState:T,baseState:T,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Za,lastRenderedState:T},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Za,lastRenderedState:a},next:null},t.memoizedState=s,t=t.alternate,t!==null&&(t.memoizedState=s),s}function Lh(t){var s=Rh(t);s.next===null&&(s=t.alternate.memoizedState),zi(t,s.next.queue,{},Is())}function xd(){return bs(Xi)}function Uh(){return ls().memoizedState}function Bh(){return ls().memoizedState}function Zj(t){for(var s=t.return;s!==null;){switch(s.tag){case 24:case 3:var a=Is();t=gl(a);var l=jl(s,t,a);l!==null&&(qs(l,s,a),Si(l,s,a)),s={cache:Fo()},t.payload=s;return}s=s.return}}function Jj(t,s,a){var l=Is();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},sc(t)?qh(s,a):(a=Mo(t,s,a,l),a!==null&&(qs(a,t,l),Gh(a,s,l)))}function Hh(t,s,a){var l=Is();zi(t,s,a,l)}function zi(t,s,a,l){var i={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(sc(t))qh(s,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=s.lastRenderedReducer,o!==null))try{var m=s.lastRenderedState,g=o(m,a);if(i.hasEagerState=!0,i.eagerState=g,Qs(g,m))return Lr(t,s,i,0),Lt===null&&Rr(),!1}catch{}finally{}if(a=Mo(t,s,i,l),a!==null)return qs(a,t,l),Gh(a,s,l),!0}return!1}function fd(t,s,a,l){if(l={lane:2,revertLane:Xd(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},sc(t)){if(s)throw Error(d(479))}else s=Mo(t,a,l,2),s!==null&&qs(s,t,2)}function sc(t){var s=t.alternate;return t===Ie||s!==null&&s===Ie}function qh(t,s){Rn=Zr=!0;var a=t.pending;a===null?s.next=s:(s.next=a.next,a.next=s),t.pending=s}function Gh(t,s,a){if((a&4194048)!==0){var l=s.lanes;l&=t.pendingLanes,a|=l,s.lanes=a,dl(t,a)}}var Ai={readContext:bs,use:Pr,useCallback:It,useContext:It,useEffect:It,useImperativeHandle:It,useLayoutEffect:It,useInsertionEffect:It,useMemo:It,useReducer:It,useRef:It,useState:It,useDebugValue:It,useDeferredValue:It,useTransition:It,useSyncExternalStore:It,useId:It,useHostTransitionStatus:It,useFormState:It,useActionState:It,useOptimistic:It,useMemoCache:It,useCacheRefresh:It};Ai.useEffectEvent=It;var Vh={readContext:bs,use:Pr,useCallback:function(t,s){return Es().memoizedState=[t,s===void 0?null:s],t},useContext:bs,useEffect:Sh,useImperativeHandle:function(t,s,a){a=a!=null?a.concat([t]):null,ec(4194308,4,Eh.bind(null,s,t),a)},useLayoutEffect:function(t,s){return ec(4194308,4,t,s)},useInsertionEffect:function(t,s){ec(4,2,t,s)},useMemo:function(t,s){var a=Es();s=s===void 0?null:s;var l=t();if(Wl){yt(!0);try{t()}finally{yt(!1)}}return a.memoizedState=[l,s],l},useReducer:function(t,s,a){var l=Es();if(a!==void 0){var i=a(s);if(Wl){yt(!0);try{a(s)}finally{yt(!1)}}}else i=s;return l.memoizedState=l.baseState=i,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:i},l.queue=t,t=t.dispatch=Jj.bind(null,Ie,t),[l.memoizedState,t]},useRef:function(t){var s=Es();return t={current:t},s.memoizedState=t},useState:function(t){t=cd(t);var s=t.queue,a=Hh.bind(null,Ie,s);return s.dispatch=a,[t.memoizedState,a]},useDebugValue:ud,useDeferredValue:function(t,s){var a=Es();return md(a,t,s)},useTransition:function(){var t=cd(!1);return t=Oh.bind(null,Ie,t.queue,!0,!1),Es().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,s,a){var l=Ie,i=Es();if(vt){if(a===void 0)throw Error(d(407));a=a()}else{if(a=s(),Lt===null)throw Error(d(349));(ct&127)!==0||oh(l,s,a)}i.memoizedState=a;var o={value:a,getSnapshot:s};return i.queue=o,Sh(uh.bind(null,l,o,t),[t]),l.flags|=2048,Un(9,{destroy:void 0},dh.bind(null,l,o,a,s),null),a},useId:function(){var t=Es(),s=Lt.identifierPrefix;if(vt){var a=Ta,l=ka;a=(l&~(1<<32-Ht(l)-1)).toString(32)+a,s="_"+s+"R_"+a,a=Jr++,0<a&&(s+="H"+a.toString(32)),s+="_"}else a=Fj++,s="_"+s+"r_"+a.toString(32)+"_";return t.memoizedState=s},useHostTransitionStatus:xd,useFormState:bh,useActionState:bh,useOptimistic:function(t){var s=Es();s.memoizedState=s.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=fd.bind(null,Ie,!0,a),a.dispatch=s,[t,s]},useMemoCache:nd,useCacheRefresh:function(){return Es().memoizedState=Zj.bind(null,Ie)},useEffectEvent:function(t){var s=Es(),a={impl:t};return s.memoizedState=a,function(){if((Ct&2)!==0)throw Error(d(440));return a.impl.apply(void 0,arguments)}}},pd={readContext:bs,use:Pr,useCallback:Ah,useContext:bs,useEffect:dd,useImperativeHandle:zh,useInsertionEffect:kh,useLayoutEffect:Th,useMemo:Mh,useReducer:Wr,useRef:_h,useState:function(){return Wr(Za)},useDebugValue:ud,useDeferredValue:function(t,s){var a=ls();return Dh(a,Mt.memoizedState,t,s)},useTransition:function(){var t=Wr(Za)[0],s=ls().memoizedState;return[typeof t=="boolean"?t:Ei(t),s]},useSyncExternalStore:ch,useId:Uh,useHostTransitionStatus:xd,useFormState:yh,useActionState:yh,useOptimistic:function(t,s){var a=ls();return xh(a,Mt,t,s)},useMemoCache:nd,useCacheRefresh:Bh};pd.useEffectEvent=Ch;var Fh={readContext:bs,use:Pr,useCallback:Ah,useContext:bs,useEffect:dd,useImperativeHandle:zh,useInsertionEffect:kh,useLayoutEffect:Th,useMemo:Mh,useReducer:rd,useRef:_h,useState:function(){return rd(Za)},useDebugValue:ud,useDeferredValue:function(t,s){var a=ls();return Mt===null?md(a,t,s):Dh(a,Mt.memoizedState,t,s)},useTransition:function(){var t=rd(Za)[0],s=ls().memoizedState;return[typeof t=="boolean"?t:Ei(t),s]},useSyncExternalStore:ch,useId:Uh,useHostTransitionStatus:xd,useFormState:wh,useActionState:wh,useOptimistic:function(t,s){var a=ls();return Mt!==null?xh(a,Mt,t,s):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:nd,useCacheRefresh:Bh};Fh.useEffectEvent=Ch;function gd(t,s,a,l){s=t.memoizedState,a=a(l,s),a=a==null?s:C({},s,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var jd={enqueueSetState:function(t,s,a){t=t._reactInternals;var l=Is(),i=gl(l);i.payload=s,a!=null&&(i.callback=a),s=jl(t,i,l),s!==null&&(qs(s,t,l),Si(s,t,l))},enqueueReplaceState:function(t,s,a){t=t._reactInternals;var l=Is(),i=gl(l);i.tag=1,i.payload=s,a!=null&&(i.callback=a),s=jl(t,i,l),s!==null&&(qs(s,t,l),Si(s,t,l))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var a=Is(),l=gl(a);l.tag=2,s!=null&&(l.callback=s),s=jl(t,l,a),s!==null&&(qs(s,t,a),Si(s,t,a))}};function $h(t,s,a,l,i,o,m){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,o,m):s.prototype&&s.prototype.isPureReactComponent?!gi(a,l)||!gi(i,o):!0}function Qh(t,s,a,l){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,l),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,l),s.state!==t&&jd.enqueueReplaceState(s,s.state,null)}function en(t,s){var a=s;if("ref"in s){a={};for(var l in s)l!=="ref"&&(a[l]=s[l])}if(t=t.defaultProps){a===s&&(a=C({},a));for(var i in t)a[i]===void 0&&(a[i]=t[i])}return a}function Yh(t){Or(t)}function Xh(t){console.error(t)}function Kh(t){Or(t)}function ac(t,s){try{var a=t.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(l){setTimeout(function(){throw l})}}function Zh(t,s,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(i){setTimeout(function(){throw i})}}function vd(t,s,a){return a=gl(a),a.tag=3,a.payload={element:null},a.callback=function(){ac(t,s)},a}function Jh(t){return t=gl(t),t.tag=3,t}function Ih(t,s,a,l){var i=a.type.getDerivedStateFromError;if(typeof i=="function"){var o=l.value;t.payload=function(){return i(o)},t.callback=function(){Zh(s,a,l)}}var m=a.stateNode;m!==null&&typeof m.componentDidCatch=="function"&&(t.callback=function(){Zh(s,a,l),typeof i!="function"&&(_l===null?_l=new Set([this]):_l.add(this));var g=l.stack;this.componentDidCatch(l.value,{componentStack:g!==null?g:""})})}function Ij(t,s,a,l,i){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(s=a.alternate,s!==null&&En(s,a,i,!0),a=Xs.current,a!==null){switch(a.tag){case 31:case 13:return oa===null?fc():a.alternate===null&&Pt===0&&(Pt=3),a.flags&=-257,a.flags|=65536,a.lanes=i,l===$r?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([l]):s.add(l),$d(t,l,i)),!1;case 22:return a.flags|=65536,l===$r?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([l]):a.add(l)),$d(t,l,i)),!1}throw Error(d(435,a.tag))}return $d(t,l,i),fc(),!1}if(vt)return s=Xs.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=i,l!==Bo&&(t=Error(d(422),{cause:l}),bi(na(t,a)))):(l!==Bo&&(s=Error(d(423),{cause:l}),bi(na(s,a))),t=t.current.alternate,t.flags|=65536,i&=-i,t.lanes|=i,l=na(l,a),i=vd(t.stateNode,l,i),Zo(t,i),Pt!==4&&(Pt=2)),!1;var o=Error(d(520),{cause:l});if(o=na(o,a),Hi===null?Hi=[o]:Hi.push(o),Pt!==4&&(Pt=2),s===null)return!0;l=na(l,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,t=i&-i,a.lanes|=t,t=vd(a.stateNode,l,t),Zo(a,t),!1;case 1:if(s=a.type,o=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||o!==null&&typeof o.componentDidCatch=="function"&&(_l===null||!_l.has(o))))return a.flags|=65536,i&=-i,a.lanes|=i,i=Jh(i),Ih(i,t,a,l),Zo(a,i),!1}a=a.return}while(a!==null);return!1}var bd=Error(d(461)),cs=!1;function ys(t,s,a,l){s.child=t===null?th(s,null,a,l):Pl(s,t.child,a,l)}function Ph(t,s,a,l,i){a=a.render;var o=s.ref;if("ref"in l){var m={};for(var g in l)g!=="ref"&&(m[g]=l[g])}else m=l;return Kl(s),l=td(t,s,a,m,o,i),g=sd(),t!==null&&!cs?(ad(t,s,i),Ja(t,s,i)):(vt&&g&&Lo(s),s.flags|=1,ys(t,s,l,i),s.child)}function Wh(t,s,a,l,i){if(t===null){var o=a.type;return typeof o=="function"&&!Do(o)&&o.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=o,ex(t,s,o,l,i)):(t=Br(a.type,null,l,s,s.mode,i),t.ref=s.ref,t.return=s,s.child=t)}if(o=t.child,!Td(t,i)){var m=o.memoizedProps;if(a=a.compare,a=a!==null?a:gi,a(m,l)&&t.ref===s.ref)return Ja(t,s,i)}return s.flags|=1,t=$a(o,l),t.ref=s.ref,t.return=s,s.child=t}function ex(t,s,a,l,i){if(t!==null){var o=t.memoizedProps;if(gi(o,l)&&t.ref===s.ref)if(cs=!1,s.pendingProps=l=o,Td(t,i))(t.flags&131072)!==0&&(cs=!0);else return s.lanes=t.lanes,Ja(t,s,i)}return yd(t,s,a,l,i)}function tx(t,s,a,l){var i=l.children,o=t!==null?t.memoizedState:null;if(t===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((s.flags&128)!==0){if(o=o!==null?o.baseLanes|a:a,t!==null){for(l=s.child=t.child,i=0;l!==null;)i=i|l.lanes|l.childLanes,l=l.sibling;l=i&~o}else l=0,s.child=null;return sx(t,s,o,a,l)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},t!==null&&Vr(s,o!==null?o.cachePool:null),o!==null?lh(s,o):Io(),nh(s);else return l=s.lanes=536870912,sx(t,s,o!==null?o.baseLanes|a:a,a,l)}else o!==null?(Vr(s,o.cachePool),lh(s,o),bl(),s.memoizedState=null):(t!==null&&Vr(s,null),Io(),bl());return ys(t,s,i,a),s.child}function Mi(t,s){return t!==null&&t.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function sx(t,s,a,l,i){var o=Qo();return o=o===null?null:{parent:is._currentValue,pool:o},s.memoizedState={baseLanes:a,cachePool:o},t!==null&&Vr(s,null),Io(),nh(s),t!==null&&En(t,s,l,!0),s.childLanes=i,null}function lc(t,s){return s=ic({mode:s.mode,children:s.children},t.mode),s.ref=t.ref,t.child=s,s.return=t,s}function ax(t,s,a){return Pl(s,t.child,null,a),t=lc(s,s.pendingProps),t.flags|=2,Ks(s),s.memoizedState=null,t}function Pj(t,s,a){var l=s.pendingProps,i=(s.flags&128)!==0;if(s.flags&=-129,t===null){if(vt){if(l.mode==="hidden")return t=lc(s,l),s.lanes=536870912,Mi(null,t);if(Wo(s),(t=qt)?(t=pf(t,ca),t=t!==null&&t.data==="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:ml!==null?{id:ka,overflow:Ta}:null,retryLane:536870912,hydrationErrors:null},a=qm(t),a.return=s,s.child=a,vs=s,qt=null)):t=null,t===null)throw xl(s);return s.lanes=536870912,null}return lc(s,l)}var o=t.memoizedState;if(o!==null){var m=o.dehydrated;if(Wo(s),i)if(s.flags&256)s.flags&=-257,s=ax(t,s,a);else if(s.memoizedState!==null)s.child=t.child,s.flags|=128,s=null;else throw Error(d(558));else if(cs||En(t,s,a,!1),i=(a&t.childLanes)!==0,cs||i){if(l=Lt,l!==null&&(m=Hl(l,a),m!==0&&m!==o.retryLane))throw o.retryLane=m,$l(t,m),qs(l,t,m),bd;fc(),s=ax(t,s,a)}else t=o.treeContext,qt=da(m.nextSibling),vs=s,vt=!0,hl=null,ca=!1,t!==null&&Fm(s,t),s=lc(s,l),s.flags|=4096;return s}return t=$a(t.child,{mode:l.mode,children:l.children}),t.ref=s.ref,s.child=t,t.return=s,t}function nc(t,s){var a=s.ref;if(a===null)t!==null&&t.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(d(284));(t===null||t.ref!==a)&&(s.flags|=4194816)}}function yd(t,s,a,l,i){return Kl(s),a=td(t,s,a,l,void 0,i),l=sd(),t!==null&&!cs?(ad(t,s,i),Ja(t,s,i)):(vt&&l&&Lo(s),s.flags|=1,ys(t,s,a,i),s.child)}function lx(t,s,a,l,i,o){return Kl(s),s.updateQueue=null,a=rh(s,l,a,i),ih(t),l=sd(),t!==null&&!cs?(ad(t,s,o),Ja(t,s,o)):(vt&&l&&Lo(s),s.flags|=1,ys(t,s,a,o),s.child)}function nx(t,s,a,l,i){if(Kl(s),s.stateNode===null){var o=Sn,m=a.contextType;typeof m=="object"&&m!==null&&(o=bs(m)),o=new a(l,o),s.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=jd,s.stateNode=o,o._reactInternals=s,o=s.stateNode,o.props=l,o.state=s.memoizedState,o.refs={},Xo(s),m=a.contextType,o.context=typeof m=="object"&&m!==null?bs(m):Sn,o.state=s.memoizedState,m=a.getDerivedStateFromProps,typeof m=="function"&&(gd(s,a,m,l),o.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(m=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),m!==o.state&&jd.enqueueReplaceState(o,o.state,null),ki(s,l,o,i),Ci(),o.state=s.memoizedState),typeof o.componentDidMount=="function"&&(s.flags|=4194308),l=!0}else if(t===null){o=s.stateNode;var g=s.memoizedProps,k=en(a,g);o.props=k;var J=o.context,le=a.contextType;m=Sn,typeof le=="object"&&le!==null&&(m=bs(le));var he=a.getDerivedStateFromProps;le=typeof he=="function"||typeof o.getSnapshotBeforeUpdate=="function",g=s.pendingProps!==g,le||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(g||J!==m)&&Qh(s,o,l,m),pl=!1;var I=s.memoizedState;o.state=I,ki(s,l,o,i),Ci(),J=s.memoizedState,g||I!==J||pl?(typeof he=="function"&&(gd(s,a,he,l),J=s.memoizedState),(k=pl||$h(s,a,k,l,I,J,m))?(le||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(s.flags|=4194308)):(typeof o.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=l,s.memoizedState=J),o.props=l,o.state=J,o.context=m,l=k):(typeof o.componentDidMount=="function"&&(s.flags|=4194308),l=!1)}else{o=s.stateNode,Ko(t,s),m=s.memoizedProps,le=en(a,m),o.props=le,he=s.pendingProps,I=o.context,J=a.contextType,k=Sn,typeof J=="object"&&J!==null&&(k=bs(J)),g=a.getDerivedStateFromProps,(J=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(m!==he||I!==k)&&Qh(s,o,l,k),pl=!1,I=s.memoizedState,o.state=I,ki(s,l,o,i),Ci();var se=s.memoizedState;m!==he||I!==se||pl||t!==null&&t.dependencies!==null&&qr(t.dependencies)?(typeof g=="function"&&(gd(s,a,g,l),se=s.memoizedState),(le=pl||$h(s,a,le,l,I,se,k)||t!==null&&t.dependencies!==null&&qr(t.dependencies))?(J||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(l,se,k),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(l,se,k)),typeof o.componentDidUpdate=="function"&&(s.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof o.componentDidUpdate!="function"||m===t.memoizedProps&&I===t.memoizedState||(s.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||m===t.memoizedProps&&I===t.memoizedState||(s.flags|=1024),s.memoizedProps=l,s.memoizedState=se),o.props=l,o.state=se,o.context=k,l=le):(typeof o.componentDidUpdate!="function"||m===t.memoizedProps&&I===t.memoizedState||(s.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||m===t.memoizedProps&&I===t.memoizedState||(s.flags|=1024),l=!1)}return o=l,nc(t,s),l=(s.flags&128)!==0,o||l?(o=s.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:o.render(),s.flags|=1,t!==null&&l?(s.child=Pl(s,t.child,null,i),s.child=Pl(s,null,a,i)):ys(t,s,a,i),s.memoizedState=o.state,t=s.child):t=Ja(t,s,i),t}function ix(t,s,a,l){return Yl(),s.flags|=256,ys(t,s,a,l),s.child}var Nd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function wd(t){return{baseLanes:t,cachePool:Zm()}}function _d(t,s,a){return t=t!==null?t.childLanes&~a:0,s&&(t|=Js),t}function rx(t,s,a){var l=s.pendingProps,i=!1,o=(s.flags&128)!==0,m;if((m=o)||(m=t!==null&&t.memoizedState===null?!1:(as.current&2)!==0),m&&(i=!0,s.flags&=-129),m=(s.flags&32)!==0,s.flags&=-33,t===null){if(vt){if(i?vl(s):bl(),(t=qt)?(t=pf(t,ca),t=t!==null&&t.data!=="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:ml!==null?{id:ka,overflow:Ta}:null,retryLane:536870912,hydrationErrors:null},a=qm(t),a.return=s,s.child=a,vs=s,qt=null)):t=null,t===null)throw xl(s);return iu(t)?s.lanes=32:s.lanes=536870912,null}var g=l.children;return l=l.fallback,i?(bl(),i=s.mode,g=ic({mode:"hidden",children:g},i),l=Ql(l,i,a,null),g.return=s,l.return=s,g.sibling=l,s.child=g,l=s.child,l.memoizedState=wd(a),l.childLanes=_d(t,m,a),s.memoizedState=Nd,Mi(null,l)):(vl(s),Sd(s,g))}var k=t.memoizedState;if(k!==null&&(g=k.dehydrated,g!==null)){if(o)s.flags&256?(vl(s),s.flags&=-257,s=Cd(t,s,a)):s.memoizedState!==null?(bl(),s.child=t.child,s.flags|=128,s=null):(bl(),g=l.fallback,i=s.mode,l=ic({mode:"visible",children:l.children},i),g=Ql(g,i,a,null),g.flags|=2,l.return=s,g.return=s,l.sibling=g,s.child=l,Pl(s,t.child,null,a),l=s.child,l.memoizedState=wd(a),l.childLanes=_d(t,m,a),s.memoizedState=Nd,s=Mi(null,l));else if(vl(s),iu(g)){if(m=g.nextSibling&&g.nextSibling.dataset,m)var J=m.dgst;m=J,l=Error(d(419)),l.stack="",l.digest=m,bi({value:l,source:null,stack:null}),s=Cd(t,s,a)}else if(cs||En(t,s,a,!1),m=(a&t.childLanes)!==0,cs||m){if(m=Lt,m!==null&&(l=Hl(m,a),l!==0&&l!==k.retryLane))throw k.retryLane=l,$l(t,l),qs(m,t,l),bd;nu(g)||fc(),s=Cd(t,s,a)}else nu(g)?(s.flags|=192,s.child=t.child,s=null):(t=k.treeContext,qt=da(g.nextSibling),vs=s,vt=!0,hl=null,ca=!1,t!==null&&Fm(s,t),s=Sd(s,l.children),s.flags|=4096);return s}return i?(bl(),g=l.fallback,i=s.mode,k=t.child,J=k.sibling,l=$a(k,{mode:"hidden",children:l.children}),l.subtreeFlags=k.subtreeFlags&65011712,J!==null?g=$a(J,g):(g=Ql(g,i,a,null),g.flags|=2),g.return=s,l.return=s,l.sibling=g,s.child=l,Mi(null,l),l=s.child,g=t.child.memoizedState,g===null?g=wd(a):(i=g.cachePool,i!==null?(k=is._currentValue,i=i.parent!==k?{parent:k,pool:k}:i):i=Zm(),g={baseLanes:g.baseLanes|a,cachePool:i}),l.memoizedState=g,l.childLanes=_d(t,m,a),s.memoizedState=Nd,Mi(t.child,l)):(vl(s),a=t.child,t=a.sibling,a=$a(a,{mode:"visible",children:l.children}),a.return=s,a.sibling=null,t!==null&&(m=s.deletions,m===null?(s.deletions=[t],s.flags|=16):m.push(t)),s.child=a,s.memoizedState=null,a)}function Sd(t,s){return s=ic({mode:"visible",children:s},t.mode),s.return=t,t.child=s}function ic(t,s){return t=Ys(22,t,null,s),t.lanes=0,t}function Cd(t,s,a){return Pl(s,t.child,null,a),t=Sd(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function cx(t,s,a){t.lanes|=s;var l=t.alternate;l!==null&&(l.lanes|=s),Go(t.return,s,a)}function kd(t,s,a,l,i,o){var m=t.memoizedState;m===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:i,treeForkCount:o}:(m.isBackwards=s,m.rendering=null,m.renderingStartTime=0,m.last=l,m.tail=a,m.tailMode=i,m.treeForkCount=o)}function ox(t,s,a){var l=s.pendingProps,i=l.revealOrder,o=l.tail;l=l.children;var m=as.current,g=(m&2)!==0;if(g?(m=m&1|2,s.flags|=128):m&=1,ae(as,m),ys(t,s,l,a),l=vt?vi:0,!g&&t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&cx(t,a,s);else if(t.tag===19)cx(t,a,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(i){case"forwards":for(a=s.child,i=null;a!==null;)t=a.alternate,t!==null&&Kr(t)===null&&(i=a),a=a.sibling;a=i,a===null?(i=s.child,s.child=null):(i=a.sibling,a.sibling=null),kd(s,!1,i,a,o,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,i=s.child,s.child=null;i!==null;){if(t=i.alternate,t!==null&&Kr(t)===null){s.child=i;break}t=i.sibling,i.sibling=a,a=i,i=t}kd(s,!0,a,null,o,l);break;case"together":kd(s,!1,null,null,void 0,l);break;default:s.memoizedState=null}return s.child}function Ja(t,s,a){if(t!==null&&(s.dependencies=t.dependencies),wl|=s.lanes,(a&s.childLanes)===0)if(t!==null){if(En(t,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(t!==null&&s.child!==t.child)throw Error(d(153));if(s.child!==null){for(t=s.child,a=$a(t,t.pendingProps),s.child=a,a.return=s;t.sibling!==null;)t=t.sibling,a=a.sibling=$a(t,t.pendingProps),a.return=s;a.sibling=null}return s.child}function Td(t,s){return(t.lanes&s)!==0?!0:(t=t.dependencies,!!(t!==null&&qr(t)))}function Wj(t,s,a){switch(s.tag){case 3:W(s,s.stateNode.containerInfo),fl(s,is,t.memoizedState.cache),Yl();break;case 27:case 5:ee(s);break;case 4:W(s,s.stateNode.containerInfo);break;case 10:fl(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Wo(s),null;break;case 13:var l=s.memoizedState;if(l!==null)return l.dehydrated!==null?(vl(s),s.flags|=128,null):(a&s.child.childLanes)!==0?rx(t,s,a):(vl(s),t=Ja(t,s,a),t!==null?t.sibling:null);vl(s);break;case 19:var i=(t.flags&128)!==0;if(l=(a&s.childLanes)!==0,l||(En(t,s,a,!1),l=(a&s.childLanes)!==0),i){if(l)return ox(t,s,a);s.flags|=128}if(i=s.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ae(as,as.current),l)break;return null;case 22:return s.lanes=0,tx(t,s,a,s.pendingProps);case 24:fl(s,is,t.memoizedState.cache)}return Ja(t,s,a)}function dx(t,s,a){if(t!==null)if(t.memoizedProps!==s.pendingProps)cs=!0;else{if(!Td(t,a)&&(s.flags&128)===0)return cs=!1,Wj(t,s,a);cs=(t.flags&131072)!==0}else cs=!1,vt&&(s.flags&1048576)!==0&&Vm(s,vi,s.index);switch(s.lanes=0,s.tag){case 16:e:{var l=s.pendingProps;if(t=Jl(s.elementType),s.type=t,typeof t=="function")Do(t)?(l=en(t,l),s.tag=1,s=nx(null,s,t,l,a)):(s.tag=0,s=yd(null,s,t,l,a));else{if(t!=null){var i=t.$$typeof;if(i===z){s.tag=11,s=Ph(null,s,t,l,a);break e}else if(i===E){s.tag=14,s=Wh(null,s,t,l,a);break e}}throw s=Ne(t)||t,Error(d(306,s,""))}}return s;case 0:return yd(t,s,s.type,s.pendingProps,a);case 1:return l=s.type,i=en(l,s.pendingProps),nx(t,s,l,i,a);case 3:e:{if(W(s,s.stateNode.containerInfo),t===null)throw Error(d(387));l=s.pendingProps;var o=s.memoizedState;i=o.element,Ko(t,s),ki(s,l,null,a);var m=s.memoizedState;if(l=m.cache,fl(s,is,l),l!==o.cache&&Vo(s,[is],a,!0),Ci(),l=m.element,o.isDehydrated)if(o={element:l,isDehydrated:!1,cache:m.cache},s.updateQueue.baseState=o,s.memoizedState=o,s.flags&256){s=ix(t,s,l,a);break e}else if(l!==i){i=na(Error(d(424)),s),bi(i),s=ix(t,s,l,a);break e}else{switch(t=s.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(qt=da(t.firstChild),vs=s,vt=!0,hl=null,ca=!0,a=th(s,null,l,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Yl(),l===i){s=Ja(t,s,a);break e}ys(t,s,l,a)}s=s.child}return s;case 26:return nc(t,s),t===null?(a=Nf(s.type,null,s.pendingProps,null))?s.memoizedState=a:vt||(a=s.type,t=s.pendingProps,l=Nc(de.current).createElement(a),l[$e]=s,l[jt]=t,Ns(l,a,t),ps(l),s.stateNode=l):s.memoizedState=Nf(s.type,t.memoizedProps,s.pendingProps,t.memoizedState),null;case 27:return ee(s),t===null&&vt&&(l=s.stateNode=vf(s.type,s.pendingProps,de.current),vs=s,ca=!0,i=qt,Tl(s.type)?(ru=i,qt=da(l.firstChild)):qt=i),ys(t,s,s.pendingProps.children,a),nc(t,s),t===null&&(s.flags|=4194304),s.child;case 5:return t===null&&vt&&((i=l=qt)&&(l=Ev(l,s.type,s.pendingProps,ca),l!==null?(s.stateNode=l,vs=s,qt=da(l.firstChild),ca=!1,i=!0):i=!1),i||xl(s)),ee(s),i=s.type,o=s.pendingProps,m=t!==null?t.memoizedProps:null,l=o.children,su(i,o)?l=null:m!==null&&su(i,m)&&(s.flags|=32),s.memoizedState!==null&&(i=td(t,s,$j,null,null,a),Xi._currentValue=i),nc(t,s),ys(t,s,l,a),s.child;case 6:return t===null&&vt&&((t=a=qt)&&(a=zv(a,s.pendingProps,ca),a!==null?(s.stateNode=a,vs=s,qt=null,t=!0):t=!1),t||xl(s)),null;case 13:return rx(t,s,a);case 4:return W(s,s.stateNode.containerInfo),l=s.pendingProps,t===null?s.child=Pl(s,null,l,a):ys(t,s,l,a),s.child;case 11:return Ph(t,s,s.type,s.pendingProps,a);case 7:return ys(t,s,s.pendingProps,a),s.child;case 8:return ys(t,s,s.pendingProps.children,a),s.child;case 12:return ys(t,s,s.pendingProps.children,a),s.child;case 10:return l=s.pendingProps,fl(s,s.type,l.value),ys(t,s,l.children,a),s.child;case 9:return i=s.type._context,l=s.pendingProps.children,Kl(s),i=bs(i),l=l(i),s.flags|=1,ys(t,s,l,a),s.child;case 14:return Wh(t,s,s.type,s.pendingProps,a);case 15:return ex(t,s,s.type,s.pendingProps,a);case 19:return ox(t,s,a);case 31:return Pj(t,s,a);case 22:return tx(t,s,a,s.pendingProps);case 24:return Kl(s),l=bs(is),t===null?(i=Qo(),i===null&&(i=Lt,o=Fo(),i.pooledCache=o,o.refCount++,o!==null&&(i.pooledCacheLanes|=a),i=o),s.memoizedState={parent:l,cache:i},Xo(s),fl(s,is,i)):((t.lanes&a)!==0&&(Ko(t,s),ki(s,null,null,a),Ci()),i=t.memoizedState,o=s.memoizedState,i.parent!==l?(i={parent:l,cache:l},s.memoizedState=i,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=i),fl(s,is,l)):(l=o.cache,fl(s,is,l),l!==i.cache&&Vo(s,[is],a,!0))),ys(t,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(d(156,s.tag))}function Ia(t){t.flags|=4}function Ed(t,s,a,l,i){if((s=(t.mode&32)!==0)&&(s=!1),s){if(t.flags|=16777216,(i&335544128)===i)if(t.stateNode.complete)t.flags|=8192;else if(Ux())t.flags|=8192;else throw Il=$r,Yo}else t.flags&=-16777217}function ux(t,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!kf(s))if(Ux())t.flags|=8192;else throw Il=$r,Yo}function rc(t,s){s!==null&&(t.flags|=4),t.flags&16384&&(s=t.tag!==22?ye():536870912,t.lanes|=s,Gn|=s)}function Di(t,s){if(!vt)switch(t.tailMode){case"hidden":s=t.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function Gt(t){var s=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(s)for(var i=t.child;i!==null;)a|=i.lanes|i.childLanes,l|=i.subtreeFlags&65011712,l|=i.flags&65011712,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)a|=i.lanes|i.childLanes,l|=i.subtreeFlags,l|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=l,t.childLanes=a,s}function ev(t,s,a){var l=s.pendingProps;switch(Uo(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gt(s),null;case 1:return Gt(s),null;case 3:return a=s.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),Xa(is),U(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Tn(s)?Ia(s):t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Ho())),Gt(s),null;case 26:var i=s.type,o=s.memoizedState;return t===null?(Ia(s),o!==null?(Gt(s),ux(s,o)):(Gt(s),Ed(s,i,null,l,a))):o?o!==t.memoizedState?(Ia(s),Gt(s),ux(s,o)):(Gt(s),s.flags&=-16777217):(t=t.memoizedProps,t!==l&&Ia(s),Gt(s),Ed(s,i,t,l,a)),null;case 27:if(Se(s),a=de.current,i=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==l&&Ia(s);else{if(!l){if(s.stateNode===null)throw Error(d(166));return Gt(s),null}t=xe.current,Tn(s)?$m(s):(t=vf(i,l,a),s.stateNode=t,Ia(s))}return Gt(s),null;case 5:if(Se(s),i=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==l&&Ia(s);else{if(!l){if(s.stateNode===null)throw Error(d(166));return Gt(s),null}if(o=xe.current,Tn(s))$m(s);else{var m=Nc(de.current);switch(o){case 1:o=m.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:o=m.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":o=m.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":o=m.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":o=m.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof l.is=="string"?m.createElement("select",{is:l.is}):m.createElement("select"),l.multiple?o.multiple=!0:l.size&&(o.size=l.size);break;default:o=typeof l.is=="string"?m.createElement(i,{is:l.is}):m.createElement(i)}}o[$e]=s,o[jt]=l;e:for(m=s.child;m!==null;){if(m.tag===5||m.tag===6)o.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===s)break e;for(;m.sibling===null;){if(m.return===null||m.return===s)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}s.stateNode=o;e:switch(Ns(o,i,l),i){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Ia(s)}}return Gt(s),Ed(s,s.type,t===null?null:t.memoizedProps,s.pendingProps,a),null;case 6:if(t&&s.stateNode!=null)t.memoizedProps!==l&&Ia(s);else{if(typeof l!="string"&&s.stateNode===null)throw Error(d(166));if(t=de.current,Tn(s)){if(t=s.stateNode,a=s.memoizedProps,l=null,i=vs,i!==null)switch(i.tag){case 27:case 5:l=i.memoizedProps}t[$e]=s,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||cf(t.nodeValue,a)),t||xl(s,!0)}else t=Nc(t).createTextNode(l),t[$e]=s,s.stateNode=t}return Gt(s),null;case 31:if(a=s.memoizedState,t===null||t.memoizedState!==null){if(l=Tn(s),a!==null){if(t===null){if(!l)throw Error(d(318));if(t=s.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(d(557));t[$e]=s}else Yl(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Gt(s),t=!1}else a=Ho(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return s.flags&256?(Ks(s),s):(Ks(s),null);if((s.flags&128)!==0)throw Error(d(558))}return Gt(s),null;case 13:if(l=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(i=Tn(s),l!==null&&l.dehydrated!==null){if(t===null){if(!i)throw Error(d(318));if(i=s.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(d(317));i[$e]=s}else Yl(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Gt(s),i=!1}else i=Ho(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=i),i=!0;if(!i)return s.flags&256?(Ks(s),s):(Ks(s),null)}return Ks(s),(s.flags&128)!==0?(s.lanes=a,s):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=s.child,i=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(i=l.alternate.memoizedState.cachePool.pool),o=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(o=l.memoizedState.cachePool.pool),o!==i&&(l.flags|=2048)),a!==t&&a&&(s.child.flags|=8192),rc(s,s.updateQueue),Gt(s),null);case 4:return U(),t===null&&Id(s.stateNode.containerInfo),Gt(s),null;case 10:return Xa(s.type),Gt(s),null;case 19:if(oe(as),l=s.memoizedState,l===null)return Gt(s),null;if(i=(s.flags&128)!==0,o=l.rendering,o===null)if(i)Di(l,!1);else{if(Pt!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(o=Kr(t),o!==null){for(s.flags|=128,Di(l,!1),t=o.updateQueue,s.updateQueue=t,rc(s,t),s.subtreeFlags=0,t=a,a=s.child;a!==null;)Hm(a,t),a=a.sibling;return ae(as,as.current&1|2),vt&&Qa(s,l.treeForkCount),s.child}t=t.sibling}l.tail!==null&&Ke()>mc&&(s.flags|=128,i=!0,Di(l,!1),s.lanes=4194304)}else{if(!i)if(t=Kr(o),t!==null){if(s.flags|=128,i=!0,t=t.updateQueue,s.updateQueue=t,rc(s,t),Di(l,!0),l.tail===null&&l.tailMode==="hidden"&&!o.alternate&&!vt)return Gt(s),null}else 2*Ke()-l.renderingStartTime>mc&&a!==536870912&&(s.flags|=128,i=!0,Di(l,!1),s.lanes=4194304);l.isBackwards?(o.sibling=s.child,s.child=o):(t=l.last,t!==null?t.sibling=o:s.child=o,l.last=o)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Ke(),t.sibling=null,a=as.current,ae(as,i?a&1|2:a&1),vt&&Qa(s,l.treeForkCount),t):(Gt(s),null);case 22:case 23:return Ks(s),Po(),l=s.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(s.flags|=8192):l&&(s.flags|=8192),l?(a&536870912)!==0&&(s.flags&128)===0&&(Gt(s),s.subtreeFlags&6&&(s.flags|=8192)):Gt(s),a=s.updateQueue,a!==null&&rc(s,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),l!==a&&(s.flags|=2048),t!==null&&oe(Zl),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),Xa(is),Gt(s),null;case 25:return null;case 30:return null}throw Error(d(156,s.tag))}function tv(t,s){switch(Uo(s),s.tag){case 1:return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return Xa(is),U(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 26:case 27:case 5:return Se(s),null;case 31:if(s.memoizedState!==null){if(Ks(s),s.alternate===null)throw Error(d(340));Yl()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 13:if(Ks(s),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(d(340));Yl()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return oe(as),null;case 4:return U(),null;case 10:return Xa(s.type),null;case 22:case 23:return Ks(s),Po(),t!==null&&oe(Zl),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 24:return Xa(is),null;case 25:return null;default:return null}}function mx(t,s){switch(Uo(s),s.tag){case 3:Xa(is),U();break;case 26:case 27:case 5:Se(s);break;case 4:U();break;case 31:s.memoizedState!==null&&Ks(s);break;case 13:Ks(s);break;case 19:oe(as);break;case 10:Xa(s.type);break;case 22:case 23:Ks(s),Po(),t!==null&&oe(Zl);break;case 24:Xa(is)}}function Oi(t,s){try{var a=s.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var i=l.next;a=i;do{if((a.tag&t)===t){l=void 0;var o=a.create,m=a.inst;l=o(),m.destroy=l}a=a.next}while(a!==i)}}catch(g){Et(s,s.return,g)}}function yl(t,s,a){try{var l=s.updateQueue,i=l!==null?l.lastEffect:null;if(i!==null){var o=i.next;l=o;do{if((l.tag&t)===t){var m=l.inst,g=m.destroy;if(g!==void 0){m.destroy=void 0,i=s;var k=a,J=g;try{J()}catch(le){Et(i,k,le)}}}l=l.next}while(l!==o)}}catch(le){Et(s,s.return,le)}}function hx(t){var s=t.updateQueue;if(s!==null){var a=t.stateNode;try{ah(s,a)}catch(l){Et(t,t.return,l)}}}function xx(t,s,a){a.props=en(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){Et(t,s,l)}}function Ri(t,s){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(i){Et(t,s,i)}}function Ea(t,s){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(i){Et(t,s,i)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(i){Et(t,s,i)}else a.current=null}function fx(t){var s=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(i){Et(t,t.return,i)}}function zd(t,s,a){try{var l=t.stateNode;wv(l,t.type,a,s),l[jt]=s}catch(i){Et(t,t.return,i)}}function px(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Tl(t.type)||t.tag===4}function Ad(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||px(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Tl(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Md(t,s,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(t),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Va));else if(l!==4&&(l===27&&Tl(t.type)&&(a=t.stateNode,s=null),t=t.child,t!==null))for(Md(t,s,a),t=t.sibling;t!==null;)Md(t,s,a),t=t.sibling}function cc(t,s,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,s?a.insertBefore(t,s):a.appendChild(t);else if(l!==4&&(l===27&&Tl(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(cc(t,s,a),t=t.sibling;t!==null;)cc(t,s,a),t=t.sibling}function gx(t){var s=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,i=s.attributes;i.length;)s.removeAttributeNode(i[0]);Ns(s,l,a),s[$e]=t,s[jt]=a}catch(o){Et(t,t.return,o)}}var Pa=!1,os=!1,Dd=!1,jx=typeof WeakSet=="function"?WeakSet:Set,gs=null;function sv(t,s){if(t=t.containerInfo,eu=Ec,t=zm(t),Co(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var i=l.anchorOffset,o=l.focusNode;l=l.focusOffset;try{a.nodeType,o.nodeType}catch{a=null;break e}var m=0,g=-1,k=-1,J=0,le=0,he=t,I=null;t:for(;;){for(var se;he!==a||i!==0&&he.nodeType!==3||(g=m+i),he!==o||l!==0&&he.nodeType!==3||(k=m+l),he.nodeType===3&&(m+=he.nodeValue.length),(se=he.firstChild)!==null;)I=he,he=se;for(;;){if(he===t)break t;if(I===a&&++J===i&&(g=m),I===o&&++le===l&&(k=m),(se=he.nextSibling)!==null)break;he=I,I=he.parentNode}he=se}a=g===-1||k===-1?null:{start:g,end:k}}else a=null}a=a||{start:0,end:0}}else a=null;for(tu={focusedElem:t,selectionRange:a},Ec=!1,gs=s;gs!==null;)if(s=gs,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,gs=t;else for(;gs!==null;){switch(s=gs,o=s.alternate,t=s.flags,s.tag){case 0:if((t&4)!==0&&(t=s.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)i=t[a],i.ref.impl=i.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&o!==null){t=void 0,a=s,i=o.memoizedProps,o=o.memoizedState,l=a.stateNode;try{var Ee=en(a.type,i);t=l.getSnapshotBeforeUpdate(Ee,o),l.__reactInternalSnapshotBeforeUpdate=t}catch(Ue){Et(a,a.return,Ue)}}break;case 3:if((t&1024)!==0){if(t=s.stateNode.containerInfo,a=t.nodeType,a===9)lu(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":lu(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(d(163))}if(t=s.sibling,t!==null){t.return=s.return,gs=t;break}gs=s.return}}function vx(t,s,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:el(t,a),l&4&&Oi(5,a);break;case 1:if(el(t,a),l&4)if(t=a.stateNode,s===null)try{t.componentDidMount()}catch(m){Et(a,a.return,m)}else{var i=en(a.type,s.memoizedProps);s=s.memoizedState;try{t.componentDidUpdate(i,s,t.__reactInternalSnapshotBeforeUpdate)}catch(m){Et(a,a.return,m)}}l&64&&hx(a),l&512&&Ri(a,a.return);break;case 3:if(el(t,a),l&64&&(t=a.updateQueue,t!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{ah(t,s)}catch(m){Et(a,a.return,m)}}break;case 27:s===null&&l&4&&gx(a);case 26:case 5:el(t,a),s===null&&l&4&&fx(a),l&512&&Ri(a,a.return);break;case 12:el(t,a);break;case 31:el(t,a),l&4&&Nx(t,a);break;case 13:el(t,a),l&4&&wx(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=uv.bind(null,a),Av(t,a))));break;case 22:if(l=a.memoizedState!==null||Pa,!l){s=s!==null&&s.memoizedState!==null||os,i=Pa;var o=os;Pa=l,(os=s)&&!o?tl(t,a,(a.subtreeFlags&8772)!==0):el(t,a),Pa=i,os=o}break;case 30:break;default:el(t,a)}}function bx(t){var s=t.alternate;s!==null&&(t.alternate=null,bx(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&co(s)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Vt=null,Ls=!1;function Wa(t,s,a){for(a=a.child;a!==null;)yx(t,s,a),a=a.sibling}function yx(t,s,a){if(je&&typeof je.onCommitFiberUnmount=="function")try{je.onCommitFiberUnmount(_e,a)}catch{}switch(a.tag){case 26:os||Ea(a,s),Wa(t,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:os||Ea(a,s);var l=Vt,i=Ls;Tl(a.type)&&(Vt=a.stateNode,Ls=!1),Wa(t,s,a),$i(a.stateNode),Vt=l,Ls=i;break;case 5:os||Ea(a,s);case 6:if(l=Vt,i=Ls,Vt=null,Wa(t,s,a),Vt=l,Ls=i,Vt!==null)if(Ls)try{(Vt.nodeType===9?Vt.body:Vt.nodeName==="HTML"?Vt.ownerDocument.body:Vt).removeChild(a.stateNode)}catch(o){Et(a,s,o)}else try{Vt.removeChild(a.stateNode)}catch(o){Et(a,s,o)}break;case 18:Vt!==null&&(Ls?(t=Vt,xf(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Zn(t)):xf(Vt,a.stateNode));break;case 4:l=Vt,i=Ls,Vt=a.stateNode.containerInfo,Ls=!0,Wa(t,s,a),Vt=l,Ls=i;break;case 0:case 11:case 14:case 15:yl(2,a,s),os||yl(4,a,s),Wa(t,s,a);break;case 1:os||(Ea(a,s),l=a.stateNode,typeof l.componentWillUnmount=="function"&&xx(a,s,l)),Wa(t,s,a);break;case 21:Wa(t,s,a);break;case 22:os=(l=os)||a.memoizedState!==null,Wa(t,s,a),os=l;break;default:Wa(t,s,a)}}function Nx(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Zn(t)}catch(a){Et(s,s.return,a)}}}function wx(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Zn(t)}catch(a){Et(s,s.return,a)}}function av(t){switch(t.tag){case 31:case 13:case 19:var s=t.stateNode;return s===null&&(s=t.stateNode=new jx),s;case 22:return t=t.stateNode,s=t._retryCache,s===null&&(s=t._retryCache=new jx),s;default:throw Error(d(435,t.tag))}}function oc(t,s){var a=av(t);s.forEach(function(l){if(!a.has(l)){a.add(l);var i=mv.bind(null,t,l);l.then(i,i)}})}function Us(t,s){var a=s.deletions;if(a!==null)for(var l=0;l<a.length;l++){var i=a[l],o=t,m=s,g=m;e:for(;g!==null;){switch(g.tag){case 27:if(Tl(g.type)){Vt=g.stateNode,Ls=!1;break e}break;case 5:Vt=g.stateNode,Ls=!1;break e;case 3:case 4:Vt=g.stateNode.containerInfo,Ls=!0;break e}g=g.return}if(Vt===null)throw Error(d(160));yx(o,m,i),Vt=null,Ls=!1,o=i.alternate,o!==null&&(o.return=null),i.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)_x(s,t),s=s.sibling}var ja=null;function _x(t,s){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Us(s,t),Bs(t),l&4&&(yl(3,t,t.return),Oi(3,t),yl(5,t,t.return));break;case 1:Us(s,t),Bs(t),l&512&&(os||a===null||Ea(a,a.return)),l&64&&Pa&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var i=ja;if(Us(s,t),Bs(t),l&512&&(os||a===null||Ea(a,a.return)),l&4){var o=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,i=i.ownerDocument||i;t:switch(l){case"title":o=i.getElementsByTagName("title")[0],(!o||o[ci]||o[$e]||o.namespaceURI==="http://www.w3.org/2000/svg"||o.hasAttribute("itemprop"))&&(o=i.createElement(l),i.head.insertBefore(o,i.querySelector("head > title"))),Ns(o,l,a),o[$e]=t,ps(o),l=o;break e;case"link":var m=Sf("link","href",i).get(l+(a.href||""));if(m){for(var g=0;g<m.length;g++)if(o=m[g],o.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&o.getAttribute("rel")===(a.rel==null?null:a.rel)&&o.getAttribute("title")===(a.title==null?null:a.title)&&o.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){m.splice(g,1);break t}}o=i.createElement(l),Ns(o,l,a),i.head.appendChild(o);break;case"meta":if(m=Sf("meta","content",i).get(l+(a.content||""))){for(g=0;g<m.length;g++)if(o=m[g],o.getAttribute("content")===(a.content==null?null:""+a.content)&&o.getAttribute("name")===(a.name==null?null:a.name)&&o.getAttribute("property")===(a.property==null?null:a.property)&&o.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&o.getAttribute("charset")===(a.charSet==null?null:a.charSet)){m.splice(g,1);break t}}o=i.createElement(l),Ns(o,l,a),i.head.appendChild(o);break;default:throw Error(d(468,l))}o[$e]=t,ps(o),l=o}t.stateNode=l}else Cf(i,t.type,t.stateNode);else t.stateNode=_f(i,l,t.memoizedProps);else o!==l?(o===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):o.count--,l===null?Cf(i,t.type,t.stateNode):_f(i,l,t.memoizedProps)):l===null&&t.stateNode!==null&&zd(t,t.memoizedProps,a.memoizedProps)}break;case 27:Us(s,t),Bs(t),l&512&&(os||a===null||Ea(a,a.return)),a!==null&&l&4&&zd(t,t.memoizedProps,a.memoizedProps);break;case 5:if(Us(s,t),Bs(t),l&512&&(os||a===null||Ea(a,a.return)),t.flags&32){i=t.stateNode;try{jn(i,"")}catch(Ee){Et(t,t.return,Ee)}}l&4&&t.stateNode!=null&&(i=t.memoizedProps,zd(t,i,a!==null?a.memoizedProps:i)),l&1024&&(Dd=!0);break;case 6:if(Us(s,t),Bs(t),l&4){if(t.stateNode===null)throw Error(d(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(Ee){Et(t,t.return,Ee)}}break;case 3:if(Sc=null,i=ja,ja=wc(s.containerInfo),Us(s,t),ja=i,Bs(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Zn(s.containerInfo)}catch(Ee){Et(t,t.return,Ee)}Dd&&(Dd=!1,Sx(t));break;case 4:l=ja,ja=wc(t.stateNode.containerInfo),Us(s,t),Bs(t),ja=l;break;case 12:Us(s,t),Bs(t);break;case 31:Us(s,t),Bs(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,oc(t,l)));break;case 13:Us(s,t),Bs(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(uc=Ke()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,oc(t,l)));break;case 22:i=t.memoizedState!==null;var k=a!==null&&a.memoizedState!==null,J=Pa,le=os;if(Pa=J||i,os=le||k,Us(s,t),os=le,Pa=J,Bs(t),l&8192)e:for(s=t.stateNode,s._visibility=i?s._visibility&-2:s._visibility|1,i&&(a===null||k||Pa||os||tn(t)),a=null,s=t;;){if(s.tag===5||s.tag===26){if(a===null){k=a=s;try{if(o=k.stateNode,i)m=o.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none";else{g=k.stateNode;var he=k.memoizedProps.style,I=he!=null&&he.hasOwnProperty("display")?he.display:null;g.style.display=I==null||typeof I=="boolean"?"":(""+I).trim()}}catch(Ee){Et(k,k.return,Ee)}}}else if(s.tag===6){if(a===null){k=s;try{k.stateNode.nodeValue=i?"":k.memoizedProps}catch(Ee){Et(k,k.return,Ee)}}}else if(s.tag===18){if(a===null){k=s;try{var se=k.stateNode;i?ff(se,!0):ff(k.stateNode,!1)}catch(Ee){Et(k,k.return,Ee)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===t)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,oc(t,a))));break;case 19:Us(s,t),Bs(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,oc(t,l)));break;case 30:break;case 21:break;default:Us(s,t),Bs(t)}}function Bs(t){var s=t.flags;if(s&2){try{for(var a,l=t.return;l!==null;){if(px(l)){a=l;break}l=l.return}if(a==null)throw Error(d(160));switch(a.tag){case 27:var i=a.stateNode,o=Ad(t);cc(t,o,i);break;case 5:var m=a.stateNode;a.flags&32&&(jn(m,""),a.flags&=-33);var g=Ad(t);cc(t,g,m);break;case 3:case 4:var k=a.stateNode.containerInfo,J=Ad(t);Md(t,J,k);break;default:throw Error(d(161))}}catch(le){Et(t,t.return,le)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function Sx(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var s=t;Sx(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),t=t.sibling}}function el(t,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)vx(t,s.alternate,s),s=s.sibling}function tn(t){for(t=t.child;t!==null;){var s=t;switch(s.tag){case 0:case 11:case 14:case 15:yl(4,s,s.return),tn(s);break;case 1:Ea(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&xx(s,s.return,a),tn(s);break;case 27:$i(s.stateNode);case 26:case 5:Ea(s,s.return),tn(s);break;case 22:s.memoizedState===null&&tn(s);break;case 30:tn(s);break;default:tn(s)}t=t.sibling}}function tl(t,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var l=s.alternate,i=t,o=s,m=o.flags;switch(o.tag){case 0:case 11:case 15:tl(i,o,a),Oi(4,o);break;case 1:if(tl(i,o,a),l=o,i=l.stateNode,typeof i.componentDidMount=="function")try{i.componentDidMount()}catch(J){Et(l,l.return,J)}if(l=o,i=l.updateQueue,i!==null){var g=l.stateNode;try{var k=i.shared.hiddenCallbacks;if(k!==null)for(i.shared.hiddenCallbacks=null,i=0;i<k.length;i++)sh(k[i],g)}catch(J){Et(l,l.return,J)}}a&&m&64&&hx(o),Ri(o,o.return);break;case 27:gx(o);case 26:case 5:tl(i,o,a),a&&l===null&&m&4&&fx(o),Ri(o,o.return);break;case 12:tl(i,o,a);break;case 31:tl(i,o,a),a&&m&4&&Nx(i,o);break;case 13:tl(i,o,a),a&&m&4&&wx(i,o);break;case 22:o.memoizedState===null&&tl(i,o,a),Ri(o,o.return);break;case 30:break;default:tl(i,o,a)}s=s.sibling}}function Od(t,s){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(t=s.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&yi(a))}function Rd(t,s){t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&yi(t))}function va(t,s,a,l){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Cx(t,s,a,l),s=s.sibling}function Cx(t,s,a,l){var i=s.flags;switch(s.tag){case 0:case 11:case 15:va(t,s,a,l),i&2048&&Oi(9,s);break;case 1:va(t,s,a,l);break;case 3:va(t,s,a,l),i&2048&&(t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&yi(t)));break;case 12:if(i&2048){va(t,s,a,l),t=s.stateNode;try{var o=s.memoizedProps,m=o.id,g=o.onPostCommit;typeof g=="function"&&g(m,s.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(k){Et(s,s.return,k)}}else va(t,s,a,l);break;case 31:va(t,s,a,l);break;case 13:va(t,s,a,l);break;case 23:break;case 22:o=s.stateNode,m=s.alternate,s.memoizedState!==null?o._visibility&2?va(t,s,a,l):Li(t,s):o._visibility&2?va(t,s,a,l):(o._visibility|=2,Bn(t,s,a,l,(s.subtreeFlags&10256)!==0||!1)),i&2048&&Od(m,s);break;case 24:va(t,s,a,l),i&2048&&Rd(s.alternate,s);break;default:va(t,s,a,l)}}function Bn(t,s,a,l,i){for(i=i&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var o=t,m=s,g=a,k=l,J=m.flags;switch(m.tag){case 0:case 11:case 15:Bn(o,m,g,k,i),Oi(8,m);break;case 23:break;case 22:var le=m.stateNode;m.memoizedState!==null?le._visibility&2?Bn(o,m,g,k,i):Li(o,m):(le._visibility|=2,Bn(o,m,g,k,i)),i&&J&2048&&Od(m.alternate,m);break;case 24:Bn(o,m,g,k,i),i&&J&2048&&Rd(m.alternate,m);break;default:Bn(o,m,g,k,i)}s=s.sibling}}function Li(t,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=t,l=s,i=l.flags;switch(l.tag){case 22:Li(a,l),i&2048&&Od(l.alternate,l);break;case 24:Li(a,l),i&2048&&Rd(l.alternate,l);break;default:Li(a,l)}s=s.sibling}}var Ui=8192;function Hn(t,s,a){if(t.subtreeFlags&Ui)for(t=t.child;t!==null;)kx(t,s,a),t=t.sibling}function kx(t,s,a){switch(t.tag){case 26:Hn(t,s,a),t.flags&Ui&&t.memoizedState!==null&&Fv(a,ja,t.memoizedState,t.memoizedProps);break;case 5:Hn(t,s,a);break;case 3:case 4:var l=ja;ja=wc(t.stateNode.containerInfo),Hn(t,s,a),ja=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=Ui,Ui=16777216,Hn(t,s,a),Ui=l):Hn(t,s,a));break;default:Hn(t,s,a)}}function Tx(t){var s=t.alternate;if(s!==null&&(t=s.child,t!==null)){s.child=null;do s=t.sibling,t.sibling=null,t=s;while(t!==null)}}function Bi(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];gs=l,zx(l,t)}Tx(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Ex(t),t=t.sibling}function Ex(t){switch(t.tag){case 0:case 11:case 15:Bi(t),t.flags&2048&&yl(9,t,t.return);break;case 3:Bi(t);break;case 12:Bi(t);break;case 22:var s=t.stateNode;t.memoizedState!==null&&s._visibility&2&&(t.return===null||t.return.tag!==13)?(s._visibility&=-3,dc(t)):Bi(t);break;default:Bi(t)}}function dc(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];gs=l,zx(l,t)}Tx(t)}for(t=t.child;t!==null;){switch(s=t,s.tag){case 0:case 11:case 15:yl(8,s,s.return),dc(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,dc(s));break;default:dc(s)}t=t.sibling}}function zx(t,s){for(;gs!==null;){var a=gs;switch(a.tag){case 0:case 11:case 15:yl(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:yi(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,gs=l;else e:for(a=t;gs!==null;){l=gs;var i=l.sibling,o=l.return;if(bx(l),l===a){gs=null;break e}if(i!==null){i.return=o,gs=i;break e}gs=o}}}var lv={getCacheForType:function(t){var s=bs(is),a=s.data.get(t);return a===void 0&&(a=t(),s.data.set(t,a)),a},cacheSignal:function(){return bs(is).controller.signal}},nv=typeof WeakMap=="function"?WeakMap:Map,Ct=0,Lt=null,lt=null,ct=0,Tt=0,Zs=null,Nl=!1,qn=!1,Ld=!1,sl=0,Pt=0,wl=0,sn=0,Ud=0,Js=0,Gn=0,Hi=null,Hs=null,Bd=!1,uc=0,Ax=0,mc=1/0,hc=null,_l=null,ms=0,Sl=null,Vn=null,al=0,Hd=0,qd=null,Mx=null,qi=0,Gd=null;function Is(){return(Ct&2)!==0&&ct!==0?ct&-ct:A.T!==null?Xd():$()}function Dx(){if(Js===0)if((ct&536870912)===0||vt){var t=Ds;Ds<<=1,(Ds&3932160)===0&&(Ds=262144),Js=t}else Js=536870912;return t=Xs.current,t!==null&&(t.flags|=32),Js}function qs(t,s,a){(t===Lt&&(Tt===2||Tt===9)||t.cancelPendingCommit!==null)&&(Fn(t,0),Cl(t,ct,Js,!1)),us(t,a),((Ct&2)===0||t!==Lt)&&(t===Lt&&((Ct&2)===0&&(sn|=a),Pt===4&&Cl(t,ct,Js,!1)),za(t))}function Ox(t,s,a){if((Ct&6)!==0)throw Error(d(327));var l=!a&&(s&127)===0&&(s&t.expiredLanes)===0||Sa(t,s),i=l?cv(t,s):Fd(t,s,!0),o=l;do{if(i===0){qn&&!l&&Cl(t,s,0,!1);break}else{if(a=t.current.alternate,o&&!iv(a)){i=Fd(t,s,!1),o=!1;continue}if(i===2){if(o=s,t.errorRecoveryDisabledLanes&o)var m=0;else m=t.pendingLanes&-536870913,m=m!==0?m:m&536870912?536870912:0;if(m!==0){s=m;e:{var g=t;i=Hi;var k=g.current.memoizedState.isDehydrated;if(k&&(Fn(g,m).flags|=256),m=Fd(g,m,!1),m!==2){if(Ld&&!k){g.errorRecoveryDisabledLanes|=o,sn|=o,i=4;break e}o=Hs,Hs=i,o!==null&&(Hs===null?Hs=o:Hs.push.apply(Hs,o))}i=m}if(o=!1,i!==2)continue}}if(i===1){Fn(t,0),Cl(t,s,0,!0);break}e:{switch(l=t,o=i,o){case 0:case 1:throw Error(d(345));case 4:if((s&4194048)!==s)break;case 6:Cl(l,s,Js,!Nl);break e;case 2:Hs=null;break;case 3:case 5:break;default:throw Error(d(329))}if((s&62914560)===s&&(i=uc+300-Ke(),10<i)){if(Cl(l,s,Js,!Nl),qa(l,0,!0)!==0)break e;al=s,l.timeoutHandle=mf(Rx.bind(null,l,a,Hs,hc,Bd,s,Js,sn,Gn,Nl,o,"Throttled",-0,0),i);break e}Rx(l,a,Hs,hc,Bd,s,Js,sn,Gn,Nl,o,null,-0,0)}}break}while(!0);za(t)}function Rx(t,s,a,l,i,o,m,g,k,J,le,he,I,se){if(t.timeoutHandle=-1,he=s.subtreeFlags,he&8192||(he&16785408)===16785408){he={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Va},kx(s,o,he);var Ee=(o&62914560)===o?uc-Ke():(o&4194048)===o?Ax-Ke():0;if(Ee=$v(he,Ee),Ee!==null){al=o,t.cancelPendingCommit=Ee(Fx.bind(null,t,s,o,a,l,i,m,g,k,le,he,null,I,se)),Cl(t,o,m,!J);return}}Fx(t,s,o,a,l,i,m,g,k)}function iv(t){for(var s=t;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var i=a[l],o=i.getSnapshot;i=i.value;try{if(!Qs(o(),i))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Cl(t,s,a,l){s&=~Ud,s&=~sn,t.suspendedLanes|=s,t.pingedLanes&=~s,l&&(t.warmLanes|=s),l=t.expirationTimes;for(var i=s;0<i;){var o=31-Ht(i),m=1<<o;l[o]=-1,i&=~m}a!==0&&Os(t,a,s)}function xc(){return(Ct&6)===0?(Gi(0),!1):!0}function Vd(){if(lt!==null){if(Tt===0)var t=lt.return;else t=lt,Ya=Xl=null,ld(t),Dn=null,wi=0,t=lt;for(;t!==null;)mx(t.alternate,t),t=t.return;lt=null}}function Fn(t,s){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,Cv(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),al=0,Vd(),Lt=t,lt=a=$a(t.current,null),ct=s,Tt=0,Zs=null,Nl=!1,qn=Sa(t,s),Ld=!1,Gn=Js=Ud=sn=wl=Pt=0,Hs=Hi=null,Bd=!1,(s&8)!==0&&(s|=s&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=s;0<l;){var i=31-Ht(l),o=1<<i;s|=t[i],l&=~o}return sl=s,Rr(),a}function Lx(t,s){Ie=null,A.H=Ai,s===Mn||s===Fr?(s=Pm(),Tt=3):s===Yo?(s=Pm(),Tt=4):Tt=s===bd?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Zs=s,lt===null&&(Pt=1,ac(t,na(s,t.current)))}function Ux(){var t=Xs.current;return t===null?!0:(ct&4194048)===ct?oa===null:(ct&62914560)===ct||(ct&536870912)!==0?t===oa:!1}function Bx(){var t=A.H;return A.H=Ai,t===null?Ai:t}function Hx(){var t=A.A;return A.A=lv,t}function fc(){Pt=4,Nl||(ct&4194048)!==ct&&Xs.current!==null||(qn=!0),(wl&134217727)===0&&(sn&134217727)===0||Lt===null||Cl(Lt,ct,Js,!1)}function Fd(t,s,a){var l=Ct;Ct|=2;var i=Bx(),o=Hx();(Lt!==t||ct!==s)&&(hc=null,Fn(t,s)),s=!1;var m=Pt;e:do try{if(Tt!==0&&lt!==null){var g=lt,k=Zs;switch(Tt){case 8:Vd(),m=6;break e;case 3:case 2:case 9:case 6:Xs.current===null&&(s=!0);var J=Tt;if(Tt=0,Zs=null,$n(t,g,k,J),a&&qn){m=0;break e}break;default:J=Tt,Tt=0,Zs=null,$n(t,g,k,J)}}rv(),m=Pt;break}catch(le){Lx(t,le)}while(!0);return s&&t.shellSuspendCounter++,Ya=Xl=null,Ct=l,A.H=i,A.A=o,lt===null&&(Lt=null,ct=0,Rr()),m}function rv(){for(;lt!==null;)qx(lt)}function cv(t,s){var a=Ct;Ct|=2;var l=Bx(),i=Hx();Lt!==t||ct!==s?(hc=null,mc=Ke()+500,Fn(t,s)):qn=Sa(t,s);e:do try{if(Tt!==0&&lt!==null){s=lt;var o=Zs;t:switch(Tt){case 1:Tt=0,Zs=null,$n(t,s,o,1);break;case 2:case 9:if(Jm(o)){Tt=0,Zs=null,Gx(s);break}s=function(){Tt!==2&&Tt!==9||Lt!==t||(Tt=7),za(t)},o.then(s,s);break e;case 3:Tt=7;break e;case 4:Tt=5;break e;case 7:Jm(o)?(Tt=0,Zs=null,Gx(s)):(Tt=0,Zs=null,$n(t,s,o,7));break;case 5:var m=null;switch(lt.tag){case 26:m=lt.memoizedState;case 5:case 27:var g=lt;if(m?kf(m):g.stateNode.complete){Tt=0,Zs=null;var k=g.sibling;if(k!==null)lt=k;else{var J=g.return;J!==null?(lt=J,pc(J)):lt=null}break t}}Tt=0,Zs=null,$n(t,s,o,5);break;case 6:Tt=0,Zs=null,$n(t,s,o,6);break;case 8:Vd(),Pt=6;break e;default:throw Error(d(462))}}ov();break}catch(le){Lx(t,le)}while(!0);return Ya=Xl=null,A.H=l,A.A=i,Ct=a,lt!==null?0:(Lt=null,ct=0,Rr(),Pt)}function ov(){for(;lt!==null&&!As();)qx(lt)}function qx(t){var s=dx(t.alternate,t,sl);t.memoizedProps=t.pendingProps,s===null?pc(t):lt=s}function Gx(t){var s=t,a=s.alternate;switch(s.tag){case 15:case 0:s=lx(a,s,s.pendingProps,s.type,void 0,ct);break;case 11:s=lx(a,s,s.pendingProps,s.type.render,s.ref,ct);break;case 5:ld(s);default:mx(a,s),s=lt=Hm(s,sl),s=dx(a,s,sl)}t.memoizedProps=t.pendingProps,s===null?pc(t):lt=s}function $n(t,s,a,l){Ya=Xl=null,ld(s),Dn=null,wi=0;var i=s.return;try{if(Ij(t,i,s,a,ct)){Pt=1,ac(t,na(a,t.current)),lt=null;return}}catch(o){if(i!==null)throw lt=i,o;Pt=1,ac(t,na(a,t.current)),lt=null;return}s.flags&32768?(vt||l===1?t=!0:qn||(ct&536870912)!==0?t=!1:(Nl=t=!0,(l===2||l===9||l===3||l===6)&&(l=Xs.current,l!==null&&l.tag===13&&(l.flags|=16384))),Vx(s,t)):pc(s)}function pc(t){var s=t;do{if((s.flags&32768)!==0){Vx(s,Nl);return}t=s.return;var a=ev(s.alternate,s,sl);if(a!==null){lt=a;return}if(s=s.sibling,s!==null){lt=s;return}lt=s=t}while(s!==null);Pt===0&&(Pt=5)}function Vx(t,s){do{var a=tv(t.alternate,t);if(a!==null){a.flags&=32767,lt=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(t=t.sibling,t!==null)){lt=t;return}lt=t=a}while(t!==null);Pt=6,lt=null}function Fx(t,s,a,l,i,o,m,g,k){t.cancelPendingCommit=null;do gc();while(ms!==0);if((Ct&6)!==0)throw Error(d(327));if(s!==null){if(s===t.current)throw Error(d(177));if(o=s.lanes|s.childLanes,o|=Ao,$s(t,a,o,m,g,k),t===Lt&&(lt=Lt=null,ct=0),Vn=s,Sl=t,al=a,Hd=o,qd=i,Mx=l,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,hv(Ve,function(){return Kx(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||l){l=A.T,A.T=null,i=X.p,X.p=2,m=Ct,Ct|=4;try{sv(t,s,a)}finally{Ct=m,X.p=i,A.T=l}}ms=1,$x(),Qx(),Yx()}}function $x(){if(ms===1){ms=0;var t=Sl,s=Vn,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=A.T,A.T=null;var l=X.p;X.p=2;var i=Ct;Ct|=4;try{_x(s,t);var o=tu,m=zm(t.containerInfo),g=o.focusedElem,k=o.selectionRange;if(m!==g&&g&&g.ownerDocument&&Em(g.ownerDocument.documentElement,g)){if(k!==null&&Co(g)){var J=k.start,le=k.end;if(le===void 0&&(le=J),"selectionStart"in g)g.selectionStart=J,g.selectionEnd=Math.min(le,g.value.length);else{var he=g.ownerDocument||document,I=he&&he.defaultView||window;if(I.getSelection){var se=I.getSelection(),Ee=g.textContent.length,Ue=Math.min(k.start,Ee),Ot=k.end===void 0?Ue:Math.min(k.end,Ee);!se.extend&&Ue>Ot&&(m=Ot,Ot=Ue,Ue=m);var q=Tm(g,Ue),M=Tm(g,Ot);if(q&&M&&(se.rangeCount!==1||se.anchorNode!==q.node||se.anchorOffset!==q.offset||se.focusNode!==M.node||se.focusOffset!==M.offset)){var Z=he.createRange();Z.setStart(q.node,q.offset),se.removeAllRanges(),Ue>Ot?(se.addRange(Z),se.extend(M.node,M.offset)):(Z.setEnd(M.node,M.offset),se.addRange(Z))}}}}for(he=[],se=g;se=se.parentNode;)se.nodeType===1&&he.push({element:se,left:se.scrollLeft,top:se.scrollTop});for(typeof g.focus=="function"&&g.focus(),g=0;g<he.length;g++){var ue=he[g];ue.element.scrollLeft=ue.left,ue.element.scrollTop=ue.top}}Ec=!!eu,tu=eu=null}finally{Ct=i,X.p=l,A.T=a}}t.current=s,ms=2}}function Qx(){if(ms===2){ms=0;var t=Sl,s=Vn,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=A.T,A.T=null;var l=X.p;X.p=2;var i=Ct;Ct|=4;try{vx(t,s.alternate,s)}finally{Ct=i,X.p=l,A.T=a}}ms=3}}function Yx(){if(ms===4||ms===3){ms=0,js();var t=Sl,s=Vn,a=al,l=Mx;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?ms=5:(ms=0,Vn=Sl=null,Xx(t,t.pendingLanes));var i=t.pendingLanes;if(i===0&&(_l=null),mn(a),s=s.stateNode,je&&typeof je.onCommitFiberRoot=="function")try{je.onCommitFiberRoot(_e,s,void 0,(s.current.flags&128)===128)}catch{}if(l!==null){s=A.T,i=X.p,X.p=2,A.T=null;try{for(var o=t.onRecoverableError,m=0;m<l.length;m++){var g=l[m];o(g.value,{componentStack:g.stack})}}finally{A.T=s,X.p=i}}(al&3)!==0&&gc(),za(t),i=t.pendingLanes,(a&261930)!==0&&(i&42)!==0?t===Gd?qi++:(qi=0,Gd=t):qi=0,Gi(0)}}function Xx(t,s){(t.pooledCacheLanes&=s)===0&&(s=t.pooledCache,s!=null&&(t.pooledCache=null,yi(s)))}function gc(){return $x(),Qx(),Yx(),Kx()}function Kx(){if(ms!==5)return!1;var t=Sl,s=Hd;Hd=0;var a=mn(al),l=A.T,i=X.p;try{X.p=32>a?32:a,A.T=null,a=qd,qd=null;var o=Sl,m=al;if(ms=0,Vn=Sl=null,al=0,(Ct&6)!==0)throw Error(d(331));var g=Ct;if(Ct|=4,Ex(o.current),Cx(o,o.current,m,a),Ct=g,Gi(0,!1),je&&typeof je.onPostCommitFiberRoot=="function")try{je.onPostCommitFiberRoot(_e,o)}catch{}return!0}finally{X.p=i,A.T=l,Xx(t,s)}}function Zx(t,s,a){s=na(a,s),s=vd(t.stateNode,s,2),t=jl(t,s,2),t!==null&&(us(t,2),za(t))}function Et(t,s,a){if(t.tag===3)Zx(t,t,a);else for(;s!==null;){if(s.tag===3){Zx(s,t,a);break}else if(s.tag===1){var l=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(_l===null||!_l.has(l))){t=na(a,t),a=Jh(2),l=jl(s,a,2),l!==null&&(Ih(a,l,s,t),us(l,2),za(l));break}}s=s.return}}function $d(t,s,a){var l=t.pingCache;if(l===null){l=t.pingCache=new nv;var i=new Set;l.set(s,i)}else i=l.get(s),i===void 0&&(i=new Set,l.set(s,i));i.has(a)||(Ld=!0,i.add(a),t=dv.bind(null,t,s,a),s.then(t,t))}function dv(t,s,a){var l=t.pingCache;l!==null&&l.delete(s),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,Lt===t&&(ct&a)===a&&(Pt===4||Pt===3&&(ct&62914560)===ct&&300>Ke()-uc?(Ct&2)===0&&Fn(t,0):Ud|=a,Gn===ct&&(Gn=0)),za(t)}function Jx(t,s){s===0&&(s=ye()),t=$l(t,s),t!==null&&(us(t,s),za(t))}function uv(t){var s=t.memoizedState,a=0;s!==null&&(a=s.retryLane),Jx(t,a)}function mv(t,s){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,i=t.memoizedState;i!==null&&(a=i.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(d(314))}l!==null&&l.delete(s),Jx(t,a)}function hv(t,s){return Fe(t,s)}var jc=null,Qn=null,Qd=!1,vc=!1,Yd=!1,kl=0;function za(t){t!==Qn&&t.next===null&&(Qn===null?jc=Qn=t:Qn=Qn.next=t),vc=!0,Qd||(Qd=!0,fv())}function Gi(t,s){if(!Yd&&vc){Yd=!0;do for(var a=!1,l=jc;l!==null;){if(t!==0){var i=l.pendingLanes;if(i===0)var o=0;else{var m=l.suspendedLanes,g=l.pingedLanes;o=(1<<31-Ht(42|t)+1)-1,o&=i&~(m&~g),o=o&201326741?o&201326741|1:o?o|2:0}o!==0&&(a=!0,ef(l,o))}else o=ct,o=qa(l,l===Lt?o:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(o&3)===0||Sa(l,o)||(a=!0,ef(l,o));l=l.next}while(a);Yd=!1}}function xv(){Ix()}function Ix(){vc=Qd=!1;var t=0;kl!==0&&Sv()&&(t=kl);for(var s=Ke(),a=null,l=jc;l!==null;){var i=l.next,o=Px(l,s);o===0?(l.next=null,a===null?jc=i:a.next=i,i===null&&(Qn=a)):(a=l,(t!==0||(o&3)!==0)&&(vc=!0)),l=i}ms!==0&&ms!==5||Gi(t),kl!==0&&(kl=0)}function Px(t,s){for(var a=t.suspendedLanes,l=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes&-62914561;0<o;){var m=31-Ht(o),g=1<<m,k=i[m];k===-1?((g&a)===0||(g&l)!==0)&&(i[m]=P(g,s)):k<=s&&(t.expiredLanes|=g),o&=~g}if(s=Lt,a=ct,a=qa(t,t===s?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===s&&(Tt===2||Tt===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&ts(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||Sa(t,a)){if(s=a&-a,s===t.callbackPriority)return s;switch(l!==null&&ts(l),mn(a)){case 2:case 8:a=ze;break;case 32:a=Ve;break;case 268435456:a=We;break;default:a=Ve}return l=Wx.bind(null,t),a=Fe(a,l),t.callbackPriority=s,t.callbackNode=a,s}return l!==null&&l!==null&&ts(l),t.callbackPriority=2,t.callbackNode=null,2}function Wx(t,s){if(ms!==0&&ms!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(gc()&&t.callbackNode!==a)return null;var l=ct;return l=qa(t,t===Lt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(Ox(t,l,s),Px(t,Ke()),t.callbackNode!=null&&t.callbackNode===a?Wx.bind(null,t):null)}function ef(t,s){if(gc())return null;Ox(t,s,!0)}function fv(){kv(function(){(Ct&6)!==0?Fe(De,xv):Ix()})}function Xd(){if(kl===0){var t=zn;t===0&&(t=Ms,Ms<<=1,(Ms&261888)===0&&(Ms=256)),kl=t}return kl}function tf(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:kr(""+t)}function sf(t,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,t.id&&a.setAttribute("form",t.id),s.parentNode.insertBefore(a,s),t=new FormData(t),a.parentNode.removeChild(a),t}function pv(t,s,a,l,i){if(s==="submit"&&a&&a.stateNode===i){var o=tf((i[jt]||null).action),m=l.submitter;m&&(s=(s=m[jt]||null)?tf(s.formAction):m.getAttribute("formAction"),s!==null&&(o=s,m=null));var g=new Ar("action","action",null,l,i);t.push({event:g,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(kl!==0){var k=m?sf(i,m):new FormData(i);hd(a,{pending:!0,data:k,method:i.method,action:o},null,k)}}else typeof o=="function"&&(g.preventDefault(),k=m?sf(i,m):new FormData(i),hd(a,{pending:!0,data:k,method:i.method,action:o},o,k))},currentTarget:i}]})}}for(var Kd=0;Kd<zo.length;Kd++){var Zd=zo[Kd],gv=Zd.toLowerCase(),jv=Zd[0].toUpperCase()+Zd.slice(1);ga(gv,"on"+jv)}ga(Dm,"onAnimationEnd"),ga(Om,"onAnimationIteration"),ga(Rm,"onAnimationStart"),ga("dblclick","onDoubleClick"),ga("focusin","onFocus"),ga("focusout","onBlur"),ga(Oj,"onTransitionRun"),ga(Rj,"onTransitionStart"),ga(Lj,"onTransitionCancel"),ga(Lm,"onTransitionEnd"),pn("onMouseEnter",["mouseout","mouseover"]),pn("onMouseLeave",["mouseout","mouseover"]),pn("onPointerEnter",["pointerout","pointerover"]),pn("onPointerLeave",["pointerout","pointerover"]),ql("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ql("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ql("onBeforeInput",["compositionend","keypress","textInput","paste"]),ql("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ql("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ql("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vv=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Vi));function af(t,s){s=(s&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],i=l.event;l=l.listeners;e:{var o=void 0;if(s)for(var m=l.length-1;0<=m;m--){var g=l[m],k=g.instance,J=g.currentTarget;if(g=g.listener,k!==o&&i.isPropagationStopped())break e;o=g,i.currentTarget=J;try{o(i)}catch(le){Or(le)}i.currentTarget=null,o=k}else for(m=0;m<l.length;m++){if(g=l[m],k=g.instance,J=g.currentTarget,g=g.listener,k!==o&&i.isPropagationStopped())break e;o=g,i.currentTarget=J;try{o(i)}catch(le){Or(le)}i.currentTarget=null,o=k}}}}function nt(t,s){var a=s[ta];a===void 0&&(a=s[ta]=new Set);var l=t+"__bubble";a.has(l)||(lf(s,t,2,!1),a.add(l))}function Jd(t,s,a){var l=0;s&&(l|=4),lf(a,t,l,s)}var bc="_reactListening"+Math.random().toString(36).slice(2);function Id(t){if(!t[bc]){t[bc]=!0,Iu.forEach(function(a){a!=="selectionchange"&&(vv.has(a)||Jd(a,!1,t),Jd(a,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[bc]||(s[bc]=!0,Jd("selectionchange",!1,s))}}function lf(t,s,a,l){switch(Of(s)){case 2:var i=Xv;break;case 8:i=Kv;break;default:i=mu}a=i.bind(null,s,a,t),i=void 0,!go||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(i=!0),l?i!==void 0?t.addEventListener(s,a,{capture:!0,passive:i}):t.addEventListener(s,a,!0):i!==void 0?t.addEventListener(s,a,{passive:i}):t.addEventListener(s,a,!1)}function Pd(t,s,a,l,i){var o=l;if((s&1)===0&&(s&2)===0&&l!==null)e:for(;;){if(l===null)return;var m=l.tag;if(m===3||m===4){var g=l.stateNode.containerInfo;if(g===i)break;if(m===4)for(m=l.return;m!==null;){var k=m.tag;if((k===3||k===4)&&m.stateNode.containerInfo===i)return;m=m.return}for(;g!==null;){if(m=hn(g),m===null)return;if(k=m.tag,k===5||k===6||k===26||k===27){l=o=m;continue e}g=g.parentNode}}l=l.return}om(function(){var J=o,le=fo(a),he=[];e:{var I=Um.get(t);if(I!==void 0){var se=Ar,Ee=t;switch(t){case"keypress":if(Er(a)===0)break e;case"keydown":case"keyup":se=mj;break;case"focusin":Ee="focus",se=yo;break;case"focusout":Ee="blur",se=yo;break;case"beforeblur":case"afterblur":se=yo;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=mm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=ej;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=fj;break;case Dm:case Om:case Rm:se=aj;break;case Lm:se=gj;break;case"scroll":case"scrollend":se=Pg;break;case"wheel":se=vj;break;case"copy":case"cut":case"paste":se=nj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=xm;break;case"toggle":case"beforetoggle":se=yj}var Ue=(s&4)!==0,Ot=!Ue&&(t==="scroll"||t==="scrollend"),q=Ue?I!==null?I+"Capture":null:I;Ue=[];for(var M=J,Z;M!==null;){var ue=M;if(Z=ue.stateNode,ue=ue.tag,ue!==5&&ue!==26&&ue!==27||Z===null||q===null||(ue=di(M,q),ue!=null&&Ue.push(Fi(M,ue,Z))),Ot)break;M=M.return}0<Ue.length&&(I=new se(I,Ee,null,a,le),he.push({event:I,listeners:Ue}))}}if((s&7)===0){e:{if(I=t==="mouseover"||t==="pointerover",se=t==="mouseout"||t==="pointerout",I&&a!==xo&&(Ee=a.relatedTarget||a.fromElement)&&(hn(Ee)||Ee[ea]))break e;if((se||I)&&(I=le.window===le?le:(I=le.ownerDocument)?I.defaultView||I.parentWindow:window,se?(Ee=a.relatedTarget||a.toElement,se=J,Ee=Ee?hn(Ee):null,Ee!==null&&(Ot=x(Ee),Ue=Ee.tag,Ee!==Ot||Ue!==5&&Ue!==27&&Ue!==6)&&(Ee=null)):(se=null,Ee=J),se!==Ee)){if(Ue=mm,ue="onMouseLeave",q="onMouseEnter",M="mouse",(t==="pointerout"||t==="pointerover")&&(Ue=xm,ue="onPointerLeave",q="onPointerEnter",M="pointer"),Ot=se==null?I:oi(se),Z=Ee==null?I:oi(Ee),I=new Ue(ue,M+"leave",se,a,le),I.target=Ot,I.relatedTarget=Z,ue=null,hn(le)===J&&(Ue=new Ue(q,M+"enter",Ee,a,le),Ue.target=Z,Ue.relatedTarget=Ot,ue=Ue),Ot=ue,se&&Ee)t:{for(Ue=bv,q=se,M=Ee,Z=0,ue=q;ue;ue=Ue(ue))Z++;ue=0;for(var Oe=M;Oe;Oe=Ue(Oe))ue++;for(;0<Z-ue;)q=Ue(q),Z--;for(;0<ue-Z;)M=Ue(M),ue--;for(;Z--;){if(q===M||M!==null&&q===M.alternate){Ue=q;break t}q=Ue(q),M=Ue(M)}Ue=null}else Ue=null;se!==null&&nf(he,I,se,Ue,!1),Ee!==null&&Ot!==null&&nf(he,Ot,Ee,Ue,!0)}}e:{if(I=J?oi(J):window,se=I.nodeName&&I.nodeName.toLowerCase(),se==="select"||se==="input"&&I.type==="file")var _t=Nm;else if(bm(I))if(wm)_t=Aj;else{_t=Ej;var Ae=Tj}else se=I.nodeName,!se||se.toLowerCase()!=="input"||I.type!=="checkbox"&&I.type!=="radio"?J&&ho(J.elementType)&&(_t=Nm):_t=zj;if(_t&&(_t=_t(t,J))){ym(he,_t,a,le);break e}Ae&&Ae(t,I,J),t==="focusout"&&J&&I.type==="number"&&J.memoizedProps.value!=null&&mo(I,"number",I.value)}switch(Ae=J?oi(J):window,t){case"focusin":(bm(Ae)||Ae.contentEditable==="true")&&(Nn=Ae,ko=J,ji=null);break;case"focusout":ji=ko=Nn=null;break;case"mousedown":To=!0;break;case"contextmenu":case"mouseup":case"dragend":To=!1,Am(he,a,le);break;case"selectionchange":if(Dj)break;case"keydown":case"keyup":Am(he,a,le)}var et;if(wo)e:{switch(t){case"compositionstart":var ot="onCompositionStart";break e;case"compositionend":ot="onCompositionEnd";break e;case"compositionupdate":ot="onCompositionUpdate";break e}ot=void 0}else yn?jm(t,a)&&(ot="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(ot="onCompositionStart");ot&&(fm&&a.locale!=="ko"&&(yn||ot!=="onCompositionStart"?ot==="onCompositionEnd"&&yn&&(et=dm()):(ul=le,jo="value"in ul?ul.value:ul.textContent,yn=!0)),Ae=yc(J,ot),0<Ae.length&&(ot=new hm(ot,t,null,a,le),he.push({event:ot,listeners:Ae}),et?ot.data=et:(et=vm(a),et!==null&&(ot.data=et)))),(et=wj?_j(t,a):Sj(t,a))&&(ot=yc(J,"onBeforeInput"),0<ot.length&&(Ae=new hm("onBeforeInput","beforeinput",null,a,le),he.push({event:Ae,listeners:ot}),Ae.data=et)),pv(he,t,J,a,le)}af(he,s)})}function Fi(t,s,a){return{instance:t,listener:s,currentTarget:a}}function yc(t,s){for(var a=s+"Capture",l=[];t!==null;){var i=t,o=i.stateNode;if(i=i.tag,i!==5&&i!==26&&i!==27||o===null||(i=di(t,a),i!=null&&l.unshift(Fi(t,i,o)),i=di(t,s),i!=null&&l.push(Fi(t,i,o))),t.tag===3)return l;t=t.return}return[]}function bv(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function nf(t,s,a,l,i){for(var o=s._reactName,m=[];a!==null&&a!==l;){var g=a,k=g.alternate,J=g.stateNode;if(g=g.tag,k!==null&&k===l)break;g!==5&&g!==26&&g!==27||J===null||(k=J,i?(J=di(a,o),J!=null&&m.unshift(Fi(a,J,k))):i||(J=di(a,o),J!=null&&m.push(Fi(a,J,k)))),a=a.return}m.length!==0&&t.push({event:s,listeners:m})}var yv=/\r\n?/g,Nv=/\u0000|\uFFFD/g;function rf(t){return(typeof t=="string"?t:""+t).replace(yv,`
`).replace(Nv,"")}function cf(t,s){return s=rf(s),rf(t)===s}function Dt(t,s,a,l,i,o){switch(a){case"children":typeof l=="string"?s==="body"||s==="textarea"&&l===""||jn(t,l):(typeof l=="number"||typeof l=="bigint")&&s!=="body"&&jn(t,""+l);break;case"className":Sr(t,"class",l);break;case"tabIndex":Sr(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Sr(t,a,l);break;case"style":rm(t,l,o);break;case"data":if(s!=="object"){Sr(t,"data",l);break}case"src":case"href":if(l===""&&(s!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=kr(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof o=="function"&&(a==="formAction"?(s!=="input"&&Dt(t,s,"name",i.name,i,null),Dt(t,s,"formEncType",i.formEncType,i,null),Dt(t,s,"formMethod",i.formMethod,i,null),Dt(t,s,"formTarget",i.formTarget,i,null)):(Dt(t,s,"encType",i.encType,i,null),Dt(t,s,"method",i.method,i,null),Dt(t,s,"target",i.target,i,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=kr(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=Va);break;case"onScroll":l!=null&&nt("scroll",t);break;case"onScrollEnd":l!=null&&nt("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(d(61));if(a=l.__html,a!=null){if(i.children!=null)throw Error(d(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=kr(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":nt("beforetoggle",t),nt("toggle",t),_r(t,"popover",l);break;case"xlinkActuate":Ga(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Ga(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Ga(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Ga(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Ga(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Ga(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Ga(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Ga(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Ga(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":_r(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Jg.get(a)||a,_r(t,a,l))}}function Wd(t,s,a,l,i,o){switch(a){case"style":rm(t,l,o);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(d(61));if(a=l.__html,a!=null){if(i.children!=null)throw Error(d(60));t.innerHTML=a}}break;case"children":typeof l=="string"?jn(t,l):(typeof l=="number"||typeof l=="bigint")&&jn(t,""+l);break;case"onScroll":l!=null&&nt("scroll",t);break;case"onScrollEnd":l!=null&&nt("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Va);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Pu.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(i=a.endsWith("Capture"),s=a.slice(2,i?a.length-7:void 0),o=t[jt]||null,o=o!=null?o[a]:null,typeof o=="function"&&t.removeEventListener(s,o,i),typeof l=="function")){typeof o!="function"&&o!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(s,l,i);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):_r(t,a,l)}}}function Ns(t,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":nt("error",t),nt("load",t);var l=!1,i=!1,o;for(o in a)if(a.hasOwnProperty(o)){var m=a[o];if(m!=null)switch(o){case"src":l=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(d(137,s));default:Dt(t,s,o,m,a,null)}}i&&Dt(t,s,"srcSet",a.srcSet,a,null),l&&Dt(t,s,"src",a.src,a,null);return;case"input":nt("invalid",t);var g=o=m=i=null,k=null,J=null;for(l in a)if(a.hasOwnProperty(l)){var le=a[l];if(le!=null)switch(l){case"name":i=le;break;case"type":m=le;break;case"checked":k=le;break;case"defaultChecked":J=le;break;case"value":o=le;break;case"defaultValue":g=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(d(137,s));break;default:Dt(t,s,l,le,a,null)}}am(t,o,g,k,J,m,i,!1);return;case"select":nt("invalid",t),l=m=o=null;for(i in a)if(a.hasOwnProperty(i)&&(g=a[i],g!=null))switch(i){case"value":o=g;break;case"defaultValue":m=g;break;case"multiple":l=g;default:Dt(t,s,i,g,a,null)}s=o,a=m,t.multiple=!!l,s!=null?gn(t,!!l,s,!1):a!=null&&gn(t,!!l,a,!0);return;case"textarea":nt("invalid",t),o=i=l=null;for(m in a)if(a.hasOwnProperty(m)&&(g=a[m],g!=null))switch(m){case"value":l=g;break;case"defaultValue":i=g;break;case"children":o=g;break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(d(91));break;default:Dt(t,s,m,g,a,null)}nm(t,l,i,o);return;case"option":for(k in a)if(a.hasOwnProperty(k)&&(l=a[k],l!=null))switch(k){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Dt(t,s,k,l,a,null)}return;case"dialog":nt("beforetoggle",t),nt("toggle",t),nt("cancel",t),nt("close",t);break;case"iframe":case"object":nt("load",t);break;case"video":case"audio":for(l=0;l<Vi.length;l++)nt(Vi[l],t);break;case"image":nt("error",t),nt("load",t);break;case"details":nt("toggle",t);break;case"embed":case"source":case"link":nt("error",t),nt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in a)if(a.hasOwnProperty(J)&&(l=a[J],l!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(d(137,s));default:Dt(t,s,J,l,a,null)}return;default:if(ho(s)){for(le in a)a.hasOwnProperty(le)&&(l=a[le],l!==void 0&&Wd(t,s,le,l,a,void 0));return}}for(g in a)a.hasOwnProperty(g)&&(l=a[g],l!=null&&Dt(t,s,g,l,a,null))}function wv(t,s,a,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,o=null,m=null,g=null,k=null,J=null,le=null;for(se in a){var he=a[se];if(a.hasOwnProperty(se)&&he!=null)switch(se){case"checked":break;case"value":break;case"defaultValue":k=he;default:l.hasOwnProperty(se)||Dt(t,s,se,null,l,he)}}for(var I in l){var se=l[I];if(he=a[I],l.hasOwnProperty(I)&&(se!=null||he!=null))switch(I){case"type":o=se;break;case"name":i=se;break;case"checked":J=se;break;case"defaultChecked":le=se;break;case"value":m=se;break;case"defaultValue":g=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(d(137,s));break;default:se!==he&&Dt(t,s,I,se,l,he)}}uo(t,m,g,k,J,le,o,i);return;case"select":se=m=g=I=null;for(o in a)if(k=a[o],a.hasOwnProperty(o)&&k!=null)switch(o){case"value":break;case"multiple":se=k;default:l.hasOwnProperty(o)||Dt(t,s,o,null,l,k)}for(i in l)if(o=l[i],k=a[i],l.hasOwnProperty(i)&&(o!=null||k!=null))switch(i){case"value":I=o;break;case"defaultValue":g=o;break;case"multiple":m=o;default:o!==k&&Dt(t,s,i,o,l,k)}s=g,a=m,l=se,I!=null?gn(t,!!a,I,!1):!!l!=!!a&&(s!=null?gn(t,!!a,s,!0):gn(t,!!a,a?[]:"",!1));return;case"textarea":se=I=null;for(g in a)if(i=a[g],a.hasOwnProperty(g)&&i!=null&&!l.hasOwnProperty(g))switch(g){case"value":break;case"children":break;default:Dt(t,s,g,null,l,i)}for(m in l)if(i=l[m],o=a[m],l.hasOwnProperty(m)&&(i!=null||o!=null))switch(m){case"value":I=i;break;case"defaultValue":se=i;break;case"children":break;case"dangerouslySetInnerHTML":if(i!=null)throw Error(d(91));break;default:i!==o&&Dt(t,s,m,i,l,o)}lm(t,I,se);return;case"option":for(var Ee in a)if(I=a[Ee],a.hasOwnProperty(Ee)&&I!=null&&!l.hasOwnProperty(Ee))switch(Ee){case"selected":t.selected=!1;break;default:Dt(t,s,Ee,null,l,I)}for(k in l)if(I=l[k],se=a[k],l.hasOwnProperty(k)&&I!==se&&(I!=null||se!=null))switch(k){case"selected":t.selected=I&&typeof I!="function"&&typeof I!="symbol";break;default:Dt(t,s,k,I,l,se)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ue in a)I=a[Ue],a.hasOwnProperty(Ue)&&I!=null&&!l.hasOwnProperty(Ue)&&Dt(t,s,Ue,null,l,I);for(J in l)if(I=l[J],se=a[J],l.hasOwnProperty(J)&&I!==se&&(I!=null||se!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(I!=null)throw Error(d(137,s));break;default:Dt(t,s,J,I,l,se)}return;default:if(ho(s)){for(var Ot in a)I=a[Ot],a.hasOwnProperty(Ot)&&I!==void 0&&!l.hasOwnProperty(Ot)&&Wd(t,s,Ot,void 0,l,I);for(le in l)I=l[le],se=a[le],!l.hasOwnProperty(le)||I===se||I===void 0&&se===void 0||Wd(t,s,le,I,l,se);return}}for(var q in a)I=a[q],a.hasOwnProperty(q)&&I!=null&&!l.hasOwnProperty(q)&&Dt(t,s,q,null,l,I);for(he in l)I=l[he],se=a[he],!l.hasOwnProperty(he)||I===se||I==null&&se==null||Dt(t,s,he,I,l,se)}function of(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function _v(){if(typeof performance.getEntriesByType=="function"){for(var t=0,s=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var i=a[l],o=i.transferSize,m=i.initiatorType,g=i.duration;if(o&&g&&of(m)){for(m=0,g=i.responseEnd,l+=1;l<a.length;l++){var k=a[l],J=k.startTime;if(J>g)break;var le=k.transferSize,he=k.initiatorType;le&&of(he)&&(k=k.responseEnd,m+=le*(k<g?1:(g-J)/(k-J)))}if(--l,s+=8*(o+m)/(i.duration/1e3),t++,10<t)break}}if(0<t)return s/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var eu=null,tu=null;function Nc(t){return t.nodeType===9?t:t.ownerDocument}function df(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function uf(t,s){if(t===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&s==="foreignObject"?0:t}function su(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var au=null;function Sv(){var t=window.event;return t&&t.type==="popstate"?t===au?!1:(au=t,!0):(au=null,!1)}var mf=typeof setTimeout=="function"?setTimeout:void 0,Cv=typeof clearTimeout=="function"?clearTimeout:void 0,hf=typeof Promise=="function"?Promise:void 0,kv=typeof queueMicrotask=="function"?queueMicrotask:typeof hf<"u"?function(t){return hf.resolve(null).then(t).catch(Tv)}:mf;function Tv(t){setTimeout(function(){throw t})}function Tl(t){return t==="head"}function xf(t,s){var a=s,l=0;do{var i=a.nextSibling;if(t.removeChild(a),i&&i.nodeType===8)if(a=i.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(i),Zn(s);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")$i(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,$i(a);for(var o=a.firstChild;o;){var m=o.nextSibling,g=o.nodeName;o[ci]||g==="SCRIPT"||g==="STYLE"||g==="LINK"&&o.rel.toLowerCase()==="stylesheet"||a.removeChild(o),o=m}}else a==="body"&&$i(t.ownerDocument.body);a=i}while(a);Zn(s)}function ff(t,s){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?s?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(s?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function lu(t){var s=t.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":lu(a),co(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function Ev(t,s,a,l){for(;t.nodeType===1;){var i=a;if(t.nodeName.toLowerCase()!==s.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[ci])switch(s){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(o=t.getAttribute("rel"),o==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(o!==i.rel||t.getAttribute("href")!==(i.href==null||i.href===""?null:i.href)||t.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin)||t.getAttribute("title")!==(i.title==null?null:i.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(o=t.getAttribute("src"),(o!==(i.src==null?null:i.src)||t.getAttribute("type")!==(i.type==null?null:i.type)||t.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin))&&o&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(s==="input"&&t.type==="hidden"){var o=i.name==null?null:""+i.name;if(i.type==="hidden"&&t.getAttribute("name")===o)return t}else return t;if(t=da(t.nextSibling),t===null)break}return null}function zv(t,s,a){if(s==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=da(t.nextSibling),t===null))return null;return t}function pf(t,s){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=da(t.nextSibling),t===null))return null;return t}function nu(t){return t.data==="$?"||t.data==="$~"}function iu(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function Av(t,s){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=s;else if(t.data!=="$?"||a.readyState!=="loading")s();else{var l=function(){s(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function da(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return t}var ru=null;function gf(t){t=t.nextSibling;for(var s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(s===0)return da(t.nextSibling);s--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||s++}t=t.nextSibling}return null}function jf(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(s===0)return t;s--}else a!=="/$"&&a!=="/&"||s++}t=t.previousSibling}return null}function vf(t,s,a){switch(s=Nc(a),t){case"html":if(t=s.documentElement,!t)throw Error(d(452));return t;case"head":if(t=s.head,!t)throw Error(d(453));return t;case"body":if(t=s.body,!t)throw Error(d(454));return t;default:throw Error(d(451))}}function $i(t){for(var s=t.attributes;s.length;)t.removeAttributeNode(s[0]);co(t)}var ua=new Map,bf=new Set;function wc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var ll=X.d;X.d={f:Mv,r:Dv,D:Ov,C:Rv,L:Lv,m:Uv,X:Hv,S:Bv,M:qv};function Mv(){var t=ll.f(),s=xc();return t||s}function Dv(t){var s=xn(t);s!==null&&s.tag===5&&s.type==="form"?Lh(s):ll.r(t)}var Yn=typeof document>"u"?null:document;function yf(t,s,a){var l=Yn;if(l&&typeof s=="string"&&s){var i=aa(s);i='link[rel="'+t+'"][href="'+i+'"]',typeof a=="string"&&(i+='[crossorigin="'+a+'"]'),bf.has(i)||(bf.add(i),t={rel:t,crossOrigin:a,href:s},l.querySelector(i)===null&&(s=l.createElement("link"),Ns(s,"link",t),ps(s),l.head.appendChild(s)))}}function Ov(t){ll.D(t),yf("dns-prefetch",t,null)}function Rv(t,s){ll.C(t,s),yf("preconnect",t,s)}function Lv(t,s,a){ll.L(t,s,a);var l=Yn;if(l&&t&&s){var i='link[rel="preload"][as="'+aa(s)+'"]';s==="image"&&a&&a.imageSrcSet?(i+='[imagesrcset="'+aa(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(i+='[imagesizes="'+aa(a.imageSizes)+'"]')):i+='[href="'+aa(t)+'"]';var o=i;switch(s){case"style":o=Xn(t);break;case"script":o=Kn(t)}ua.has(o)||(t=C({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:t,as:s},a),ua.set(o,t),l.querySelector(i)!==null||s==="style"&&l.querySelector(Qi(o))||s==="script"&&l.querySelector(Yi(o))||(s=l.createElement("link"),Ns(s,"link",t),ps(s),l.head.appendChild(s)))}}function Uv(t,s){ll.m(t,s);var a=Yn;if(a&&t){var l=s&&typeof s.as=="string"?s.as:"script",i='link[rel="modulepreload"][as="'+aa(l)+'"][href="'+aa(t)+'"]',o=i;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":o=Kn(t)}if(!ua.has(o)&&(t=C({rel:"modulepreload",href:t},s),ua.set(o,t),a.querySelector(i)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Yi(o)))return}l=a.createElement("link"),Ns(l,"link",t),ps(l),a.head.appendChild(l)}}}function Bv(t,s,a){ll.S(t,s,a);var l=Yn;if(l&&t){var i=fn(l).hoistableStyles,o=Xn(t);s=s||"default";var m=i.get(o);if(!m){var g={loading:0,preload:null};if(m=l.querySelector(Qi(o)))g.loading=5;else{t=C({rel:"stylesheet",href:t,"data-precedence":s},a),(a=ua.get(o))&&cu(t,a);var k=m=l.createElement("link");ps(k),Ns(k,"link",t),k._p=new Promise(function(J,le){k.onload=J,k.onerror=le}),k.addEventListener("load",function(){g.loading|=1}),k.addEventListener("error",function(){g.loading|=2}),g.loading|=4,_c(m,s,l)}m={type:"stylesheet",instance:m,count:1,state:g},i.set(o,m)}}}function Hv(t,s){ll.X(t,s);var a=Yn;if(a&&t){var l=fn(a).hoistableScripts,i=Kn(t),o=l.get(i);o||(o=a.querySelector(Yi(i)),o||(t=C({src:t,async:!0},s),(s=ua.get(i))&&ou(t,s),o=a.createElement("script"),ps(o),Ns(o,"link",t),a.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},l.set(i,o))}}function qv(t,s){ll.M(t,s);var a=Yn;if(a&&t){var l=fn(a).hoistableScripts,i=Kn(t),o=l.get(i);o||(o=a.querySelector(Yi(i)),o||(t=C({src:t,async:!0,type:"module"},s),(s=ua.get(i))&&ou(t,s),o=a.createElement("script"),ps(o),Ns(o,"link",t),a.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},l.set(i,o))}}function Nf(t,s,a,l){var i=(i=de.current)?wc(i):null;if(!i)throw Error(d(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=Xn(a.href),a=fn(i).hoistableStyles,l=a.get(s),l||(l={type:"style",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Xn(a.href);var o=fn(i).hoistableStyles,m=o.get(t);if(m||(i=i.ownerDocument||i,m={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},o.set(t,m),(o=i.querySelector(Qi(t)))&&!o._p&&(m.instance=o,m.state.loading=5),ua.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},ua.set(t,a),o||Gv(i,t,a,m.state))),s&&l===null)throw Error(d(528,""));return m}if(s&&l!==null)throw Error(d(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Kn(a),a=fn(i).hoistableScripts,l=a.get(s),l||(l={type:"script",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(d(444,t))}}function Xn(t){return'href="'+aa(t)+'"'}function Qi(t){return'link[rel="stylesheet"]['+t+"]"}function wf(t){return C({},t,{"data-precedence":t.precedence,precedence:null})}function Gv(t,s,a,l){t.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=t.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),Ns(s,"link",a),ps(s),t.head.appendChild(s))}function Kn(t){return'[src="'+aa(t)+'"]'}function Yi(t){return"script[async]"+t}function _f(t,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var l=t.querySelector('style[data-href~="'+aa(a.href)+'"]');if(l)return s.instance=l,ps(l),l;var i=C({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),ps(l),Ns(l,"style",i),_c(l,a.precedence,t),s.instance=l;case"stylesheet":i=Xn(a.href);var o=t.querySelector(Qi(i));if(o)return s.state.loading|=4,s.instance=o,ps(o),o;l=wf(a),(i=ua.get(i))&&cu(l,i),o=(t.ownerDocument||t).createElement("link"),ps(o);var m=o;return m._p=new Promise(function(g,k){m.onload=g,m.onerror=k}),Ns(o,"link",l),s.state.loading|=4,_c(o,a.precedence,t),s.instance=o;case"script":return o=Kn(a.src),(i=t.querySelector(Yi(o)))?(s.instance=i,ps(i),i):(l=a,(i=ua.get(o))&&(l=C({},a),ou(l,i)),t=t.ownerDocument||t,i=t.createElement("script"),ps(i),Ns(i,"link",l),t.head.appendChild(i),s.instance=i);case"void":return null;default:throw Error(d(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(l=s.instance,s.state.loading|=4,_c(l,a.precedence,t));return s.instance}function _c(t,s,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=l.length?l[l.length-1]:null,o=i,m=0;m<l.length;m++){var g=l[m];if(g.dataset.precedence===s)o=g;else if(o!==i)break}o?o.parentNode.insertBefore(t,o.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(t,s.firstChild))}function cu(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.title==null&&(t.title=s.title)}function ou(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.integrity==null&&(t.integrity=s.integrity)}var Sc=null;function Sf(t,s,a){if(Sc===null){var l=new Map,i=Sc=new Map;i.set(a,l)}else i=Sc,l=i.get(a),l||(l=new Map,i.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),i=0;i<a.length;i++){var o=a[i];if(!(o[ci]||o[$e]||t==="link"&&o.getAttribute("rel")==="stylesheet")&&o.namespaceURI!=="http://www.w3.org/2000/svg"){var m=o.getAttribute(s)||"";m=t+m;var g=l.get(m);g?g.push(o):l.set(m,[o])}}return l}function Cf(t,s,a){t=t.ownerDocument||t,t.head.insertBefore(a,s==="title"?t.querySelector("head > title"):null)}function Vv(t,s,a){if(a===1||s.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return t=s.disabled,typeof s.precedence=="string"&&t==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function kf(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function Fv(t,s,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var i=Xn(l.href),o=s.querySelector(Qi(i));if(o){s=o._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(t.count++,t=Cc.bind(t),s.then(t,t)),a.state.loading|=4,a.instance=o,ps(o);return}o=s.ownerDocument||s,l=wf(l),(i=ua.get(i))&&cu(l,i),o=o.createElement("link"),ps(o);var m=o;m._p=new Promise(function(g,k){m.onload=g,m.onerror=k}),Ns(o,"link",l),a.instance=o}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=Cc.bind(t),s.addEventListener("load",a),s.addEventListener("error",a))}}var du=0;function $v(t,s){return t.stylesheets&&t.count===0&&Tc(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&Tc(t,t.stylesheets),t.unsuspend){var o=t.unsuspend;t.unsuspend=null,o()}},6e4+s);0<t.imgBytes&&du===0&&(du=62500*_v());var i=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Tc(t,t.stylesheets),t.unsuspend)){var o=t.unsuspend;t.unsuspend=null,o()}},(t.imgBytes>du?50:800)+s);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(i)}}:null}function Cc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Tc(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var kc=null;function Tc(t,s){t.stylesheets=null,t.unsuspend!==null&&(t.count++,kc=new Map,s.forEach(Qv,t),kc=null,Cc.call(t))}function Qv(t,s){if(!(s.state.loading&4)){var a=kc.get(t);if(a)var l=a.get(null);else{a=new Map,kc.set(t,a);for(var i=t.querySelectorAll("link[data-precedence],style[data-precedence]"),o=0;o<i.length;o++){var m=i[o];(m.nodeName==="LINK"||m.getAttribute("media")!=="not all")&&(a.set(m.dataset.precedence,m),l=m)}l&&a.set(null,l)}i=s.instance,m=i.getAttribute("data-precedence"),o=a.get(m)||l,o===l&&a.set(null,i),a.set(m,i),this.count++,l=Cc.bind(this),i.addEventListener("load",l),i.addEventListener("error",l),o?o.parentNode.insertBefore(i,o.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(i,t.firstChild)),s.state.loading|=4}}var Xi={$$typeof:H,Provider:null,Consumer:null,_currentValue:T,_currentValue2:T,_threadCount:0};function Yv(t,s,a,l,i,o,m,g,k){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Re(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Re(0),this.hiddenUpdates=Re(null),this.identifierPrefix=l,this.onUncaughtError=i,this.onCaughtError=o,this.onRecoverableError=m,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function Tf(t,s,a,l,i,o,m,g,k,J,le,he){return t=new Yv(t,s,a,m,k,J,le,he,g),s=1,o===!0&&(s|=24),o=Ys(3,null,null,s),t.current=o,o.stateNode=t,s=Fo(),s.refCount++,t.pooledCache=s,s.refCount++,o.memoizedState={element:l,isDehydrated:a,cache:s},Xo(o),t}function Ef(t){return t?(t=Sn,t):Sn}function zf(t,s,a,l,i,o){i=Ef(i),l.context===null?l.context=i:l.pendingContext=i,l=gl(s),l.payload={element:a},o=o===void 0?null:o,o!==null&&(l.callback=o),a=jl(t,l,s),a!==null&&(qs(a,t,s),Si(a,t,s))}function Af(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<s?a:s}}function uu(t,s){Af(t,s),(t=t.alternate)&&Af(t,s)}function Mf(t){if(t.tag===13||t.tag===31){var s=$l(t,67108864);s!==null&&qs(s,t,67108864),uu(t,67108864)}}function Df(t){if(t.tag===13||t.tag===31){var s=Is();s=un(s);var a=$l(t,s);a!==null&&qs(a,t,s),uu(t,s)}}var Ec=!0;function Xv(t,s,a,l){var i=A.T;A.T=null;var o=X.p;try{X.p=2,mu(t,s,a,l)}finally{X.p=o,A.T=i}}function Kv(t,s,a,l){var i=A.T;A.T=null;var o=X.p;try{X.p=8,mu(t,s,a,l)}finally{X.p=o,A.T=i}}function mu(t,s,a,l){if(Ec){var i=hu(l);if(i===null)Pd(t,s,l,zc,a),Rf(t,l);else if(Jv(i,t,s,a,l))l.stopPropagation();else if(Rf(t,l),s&4&&-1<Zv.indexOf(t)){for(;i!==null;){var o=xn(i);if(o!==null)switch(o.tag){case 3:if(o=o.stateNode,o.current.memoizedState.isDehydrated){var m=Fs(o.pendingLanes);if(m!==0){var g=o;for(g.pendingLanes|=2,g.entangledLanes|=2;m;){var k=1<<31-Ht(m);g.entanglements[1]|=k,m&=~k}za(o),(Ct&6)===0&&(mc=Ke()+500,Gi(0))}}break;case 31:case 13:g=$l(o,2),g!==null&&qs(g,o,2),xc(),uu(o,2)}if(o=hu(l),o===null&&Pd(t,s,l,zc,a),o===i)break;i=o}i!==null&&l.stopPropagation()}else Pd(t,s,l,null,a)}}function hu(t){return t=fo(t),xu(t)}var zc=null;function xu(t){if(zc=null,t=hn(t),t!==null){var s=x(t);if(s===null)t=null;else{var a=s.tag;if(a===13){if(t=f(s),t!==null)return t;t=null}else if(a===31){if(t=j(s),t!==null)return t;t=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null)}}return zc=t,null}function Of(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(D()){case De:return 2;case ze:return 8;case Ve:case At:return 32;case We:return 268435456;default:return 32}default:return 32}}var fu=!1,El=null,zl=null,Al=null,Ki=new Map,Zi=new Map,Ml=[],Zv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Rf(t,s){switch(t){case"focusin":case"focusout":El=null;break;case"dragenter":case"dragleave":zl=null;break;case"mouseover":case"mouseout":Al=null;break;case"pointerover":case"pointerout":Ki.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zi.delete(s.pointerId)}}function Ji(t,s,a,l,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:s,domEventName:a,eventSystemFlags:l,nativeEvent:o,targetContainers:[i]},s!==null&&(s=xn(s),s!==null&&Mf(s)),t):(t.eventSystemFlags|=l,s=t.targetContainers,i!==null&&s.indexOf(i)===-1&&s.push(i),t)}function Jv(t,s,a,l,i){switch(s){case"focusin":return El=Ji(El,t,s,a,l,i),!0;case"dragenter":return zl=Ji(zl,t,s,a,l,i),!0;case"mouseover":return Al=Ji(Al,t,s,a,l,i),!0;case"pointerover":var o=i.pointerId;return Ki.set(o,Ji(Ki.get(o)||null,t,s,a,l,i)),!0;case"gotpointercapture":return o=i.pointerId,Zi.set(o,Ji(Zi.get(o)||null,t,s,a,l,i)),!0}return!1}function Lf(t){var s=hn(t.target);if(s!==null){var a=x(s);if(a!==null){if(s=a.tag,s===13){if(s=f(a),s!==null){t.blockedOn=s,ge(t.priority,function(){Df(a)});return}}else if(s===31){if(s=j(a),s!==null){t.blockedOn=s,ge(t.priority,function(){Df(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ac(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var a=hu(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);xo=l,a.target.dispatchEvent(l),xo=null}else return s=xn(a),s!==null&&Mf(s),t.blockedOn=a,!1;s.shift()}return!0}function Uf(t,s,a){Ac(t)&&a.delete(s)}function Iv(){fu=!1,El!==null&&Ac(El)&&(El=null),zl!==null&&Ac(zl)&&(zl=null),Al!==null&&Ac(Al)&&(Al=null),Ki.forEach(Uf),Zi.forEach(Uf)}function Mc(t,s){t.blockedOn===s&&(t.blockedOn=null,fu||(fu=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Iv)))}var Dc=null;function Bf(t){Dc!==t&&(Dc=t,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Dc===t&&(Dc=null);for(var s=0;s<t.length;s+=3){var a=t[s],l=t[s+1],i=t[s+2];if(typeof l!="function"){if(xu(l||a)===null)continue;break}var o=xn(a);o!==null&&(t.splice(s,3),s-=3,hd(o,{pending:!0,data:i,method:a.method,action:l},l,i))}}))}function Zn(t){function s(k){return Mc(k,t)}El!==null&&Mc(El,t),zl!==null&&Mc(zl,t),Al!==null&&Mc(Al,t),Ki.forEach(s),Zi.forEach(s);for(var a=0;a<Ml.length;a++){var l=Ml[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Ml.length&&(a=Ml[0],a.blockedOn===null);)Lf(a),a.blockedOn===null&&Ml.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var i=a[l],o=a[l+1],m=i[jt]||null;if(typeof o=="function")m||Bf(a);else if(m){var g=null;if(o&&o.hasAttribute("formAction")){if(i=o,m=o[jt]||null)g=m.formAction;else if(xu(i)!==null)continue}else g=m.action;typeof g=="function"?a[l+1]=g:(a.splice(l,3),l-=3),Bf(a)}}}function Hf(){function t(o){o.canIntercept&&o.info==="react-transition"&&o.intercept({handler:function(){return new Promise(function(m){return i=m})},focusReset:"manual",scroll:"manual"})}function s(){i!==null&&(i(),i=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var o=navigation.currentEntry;o&&o.url!=null&&navigation.navigate(o.url,{state:o.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,i=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),i!==null&&(i(),i=null)}}}function pu(t){this._internalRoot=t}Oc.prototype.render=pu.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(d(409));var a=s.current,l=Is();zf(a,l,t,s,null,null)},Oc.prototype.unmount=pu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;zf(t.current,2,null,t,null,null),xc(),s[ea]=null}};function Oc(t){this._internalRoot=t}Oc.prototype.unstable_scheduleHydration=function(t){if(t){var s=$();t={blockedOn:null,target:t,priority:s};for(var a=0;a<Ml.length&&s!==0&&s<Ml[a].priority;a++);Ml.splice(a,0,t),a===0&&Lf(t)}};var qf=r.version;if(qf!=="19.2.0")throw Error(d(527,qf,"19.2.0"));X.findDOMNode=function(t){var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(d(188)):(t=Object.keys(t).join(","),Error(d(268,t)));return t=N(s),t=t!==null?v(t):null,t=t===null?null:t.stateNode,t};var Pv={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:A,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rc.isDisabled&&Rc.supportsFiber)try{_e=Rc.inject(Pv),je=Rc}catch{}}return er.createRoot=function(t,s){if(!h(t))throw Error(d(299));var a=!1,l="",i=Yh,o=Xh,m=Kh;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onUncaughtError!==void 0&&(i=s.onUncaughtError),s.onCaughtError!==void 0&&(o=s.onCaughtError),s.onRecoverableError!==void 0&&(m=s.onRecoverableError)),s=Tf(t,1,!1,null,null,a,l,null,i,o,m,Hf),t[ea]=s.current,Id(t),new pu(s)},er.hydrateRoot=function(t,s,a){if(!h(t))throw Error(d(299));var l=!1,i="",o=Yh,m=Xh,g=Kh,k=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(i=a.identifierPrefix),a.onUncaughtError!==void 0&&(o=a.onUncaughtError),a.onCaughtError!==void 0&&(m=a.onCaughtError),a.onRecoverableError!==void 0&&(g=a.onRecoverableError),a.formState!==void 0&&(k=a.formState)),s=Tf(t,1,!0,s,a??null,l,i,k,o,m,g,Hf),s.context=Ef(null),a=s.current,l=Is(),l=un(l),i=gl(l),i.callback=null,jl(a,i,l),a=l,s.current.lanes=a,us(s,a),za(s),t[ea]=s.current,Id(t),new Oc(s)},er.version="19.2.0",er}var Jf;function bN(){if(Jf)return Nu.exports;Jf=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(r){console.error(r)}}return n(),Nu.exports=vN(),Nu.exports}var yN=bN();function Q(...n){return db(ub(n))}const Ye=u.forwardRef(({className:n,...r},c)=>e.jsx("div",{ref:c,className:Q("rounded-xl border bg-card text-card-foreground shadow",n),...r}));Ye.displayName="Card";const Nt=u.forwardRef(({className:n,...r},c)=>e.jsx("div",{ref:c,className:Q("flex flex-col space-y-1.5 p-6",n),...r}));Nt.displayName="CardHeader";const wt=u.forwardRef(({className:n,...r},c)=>e.jsx("div",{ref:c,className:Q("font-semibold leading-none tracking-tight",n),...r}));wt.displayName="CardTitle";const ns=u.forwardRef(({className:n,...r},c)=>e.jsx("div",{ref:c,className:Q("text-sm text-muted-foreground",n),...r}));ns.displayName="CardDescription";const kt=u.forwardRef(({className:n,...r},c)=>e.jsx("div",{ref:c,className:Q("p-6 pt-0",n),...r}));kt.displayName="CardContent";const mg=u.forwardRef(({className:n,...r},c)=>e.jsx("div",{ref:c,className:Q("flex items-center p-6 pt-0",n),...r}));mg.displayName="CardFooter";const La=xb,wa=u.forwardRef(({className:n,...r},c)=>e.jsx(gp,{ref:c,className:Q("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",n),...r}));wa.displayName=gp.displayName;const it=u.forwardRef(({className:n,...r},c)=>e.jsx(jp,{ref:c,className:Q("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all duration-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",n),...r}));it.displayName=jp.displayName;const zt=u.forwardRef(({className:n,...r},c)=>e.jsx(vp,{ref:c,className:Q("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 data-[state=active]:animate-in data-[state=active]:fade-in data-[state=active]:duration-300",n),...r}));zt.displayName=vp.displayName;const st=u.forwardRef(({className:n,children:r,viewportRef:c,...d},h)=>e.jsxs(bp,{ref:h,className:Q("relative overflow-hidden",n),...d,children:[e.jsx(fb,{ref:c,className:"h-full w-full rounded-[inherit]",children:r}),e.jsx(Mu,{}),e.jsx(Mu,{orientation:"horizontal"}),e.jsx(pb,{})]}));st.displayName=bp.displayName;const Mu=u.forwardRef(({className:n,orientation:r="vertical",...c},d)=>e.jsx(yp,{ref:d,orientation:r,className:Q("flex touch-none select-none transition-colors",r==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",r==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",n),...c,children:e.jsx(gb,{className:"relative flex-1 rounded-full bg-border"})}));Mu.displayName=yp.displayName;function hg({className:n,...r}){return e.jsx("div",{className:Q("animate-pulse rounded-md bg-primary/10",n),...r})}const yr=u.forwardRef(({className:n,value:r,...c},d)=>e.jsx(Np,{ref:d,className:Q("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",n),...c,children:e.jsx(jb,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(r||0)}%)`}})}));yr.displayName=Np.displayName;const NN={light:"",dark:".dark"},xg=u.createContext(null);function fg(){const n=u.useContext(xg);if(!n)throw new Error("useChart must be used within a <ChartContainer />");return n}const Jn=u.forwardRef(({id:n,className:r,children:c,config:d,...h},x)=>{const f=u.useId(),j=`chart-${n||f.replace(/:/g,"")}`;return e.jsx(xg.Provider,{value:{config:d},children:e.jsxs("div",{"data-chart":j,ref:x,className:Q("flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none",r),...h,children:[e.jsx(wN,{id:j,config:d}),e.jsx(Mb,{children:c})]})})});Jn.displayName="Chart";const wN=({id:n,config:r})=>{const c=Object.entries(r).filter(([,d])=>d.theme||d.color);return c.length?e.jsx("style",{dangerouslySetInnerHTML:{__html:Object.entries(NN).map(([d,h])=>`
${h} [data-chart=${n}] {
${c.map(([x,f])=>{const j=f.theme?.[d]||f.color;return j?`  --color-${x}: ${j};`:null}).join(`
`)}
}
`).join(`
`)}}):null},tr=Db,In=u.forwardRef(({active:n,payload:r,className:c,indicator:d="dot",hideLabel:h=!1,hideIndicator:x=!1,label:f,labelFormatter:j,labelClassName:p,formatter:N,color:v,nameKey:C,labelKey:S},w)=>{const{config:L}=fg(),F=u.useMemo(()=>{if(h||!r?.length)return null;const[O]=r,K=`${S||O?.dataKey||O?.name||"value"}`,H=Du(L,O,K),z=!S&&typeof f=="string"?L[f]?.label||f:H?.label;return j?e.jsx("div",{className:Q("font-medium",p),children:j(z,r)}):z?e.jsx("div",{className:Q("font-medium",p),children:z}):null},[f,j,r,h,p,L,S]);if(!n||!r?.length)return null;const B=r.length===1&&d!=="dot";return e.jsxs("div",{ref:w,className:Q("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",c),children:[B?null:F,e.jsx("div",{className:"grid gap-1.5",children:r.filter(O=>O.type!=="none").map((O,K)=>{const H=`${C||O.name||O.dataKey||"value"}`,z=Du(L,O,H),V=v||O.payload.fill||O.color;return e.jsx("div",{className:Q("flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground",d==="dot"&&"items-center"),children:N&&O?.value!==void 0&&O.name?N(O.value,O.name,O,K,O.payload):e.jsxs(e.Fragment,{children:[z?.icon?e.jsx(z.icon,{}):!x&&e.jsx("div",{className:Q("shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]",{"h-2.5 w-2.5":d==="dot","w-1":d==="line","w-0 border-[1.5px] border-dashed bg-transparent":d==="dashed","my-0.5":B&&d==="dashed"}),style:{"--color-bg":V,"--color-border":V}}),e.jsxs("div",{className:Q("flex flex-1 justify-between leading-none",B?"items-end":"items-center"),children:[e.jsxs("div",{className:"grid gap-1.5",children:[B?F:null,e.jsx("span",{className:"text-muted-foreground",children:z?.label||O.name})]}),O.value&&e.jsx("span",{className:"font-mono font-medium tabular-nums text-foreground",children:O.value.toLocaleString()})]})]})},O.dataKey)})})]})});In.displayName="ChartTooltip";const _N=Ob,pg=u.forwardRef(({className:n,hideIcon:r=!1,payload:c,verticalAlign:d="bottom",nameKey:h},x)=>{const{config:f}=fg();return c?.length?e.jsx("div",{ref:x,className:Q("flex items-center justify-center gap-4",d==="top"?"pb-3":"pt-3",n),children:c.filter(j=>j.type!=="none").map(j=>{const p=`${h||j.dataKey||"value"}`,N=Du(f,j,p);return e.jsxs("div",{className:Q("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground"),children:[N?.icon&&!r?e.jsx(N.icon,{}):e.jsx("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:j.color}}),N?.label]},j.value)})}):null});pg.displayName="ChartLegend";function Du(n,r,c){if(typeof r!="object"||r===null)return;const d="payload"in r&&typeof r.payload=="object"&&r.payload!==null?r.payload:void 0;let h=c;return c in r&&typeof r[c]=="string"?h=r[c]:d&&c in d&&typeof d[c]=="string"&&(h=d[c]),h in n?n[h]:n[c]}const hr=si("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),b=u.forwardRef(({className:n,variant:r,size:c,asChild:d=!1,...h},x)=>{const f=d?qb:"button";return e.jsx(f,{className:Q(hr({variant:r,size:c,className:n})),ref:x,...h})});b.displayName="Button";const SN=si("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Je({className:n,variant:r,...c}){return e.jsx("div",{className:Q(SN({variant:r}),n),...c})}const CN=5,kN=5e3;let Su=0;function TN(){return Su=(Su+1)%Number.MAX_SAFE_INTEGER,Su.toString()}const Cu=new Map,If=n=>{if(Cu.has(n))return;const r=setTimeout(()=>{Cu.delete(n),cr({type:"REMOVE_TOAST",toastId:n})},kN);Cu.set(n,r)},EN=(n,r)=>{switch(r.type){case"ADD_TOAST":return{...n,toasts:[r.toast,...n.toasts].slice(0,CN)};case"UPDATE_TOAST":return{...n,toasts:n.toasts.map(c=>c.id===r.toast.id?{...c,...r.toast}:c)};case"DISMISS_TOAST":{const{toastId:c}=r;return c?If(c):n.toasts.forEach(d=>{If(d.id)}),{...n,toasts:n.toasts.map(d=>d.id===c||c===void 0?{...d,open:!1}:d)}}case"REMOVE_TOAST":return r.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(c=>c.id!==r.toastId)}}},Yc=[];let Xc={toasts:[]};function cr(n){Xc=EN(Xc,n),Yc.forEach(r=>{r(Xc)})}function zN({...n}){const r=TN(),c=h=>cr({type:"UPDATE_TOAST",toast:{...h,id:r}}),d=()=>cr({type:"DISMISS_TOAST",toastId:r});return cr({type:"ADD_TOAST",toast:{...n,id:r,open:!0,onOpenChange:h=>{h||d()}}}),{id:r,dismiss:d,update:c}}function Xt(){const[n,r]=u.useState(Xc);return u.useEffect(()=>(Yc.push(r),()=>{const c=Yc.indexOf(r);c>-1&&Yc.splice(c,1)}),[n]),{...n,toast:zN,dismiss:c=>cr({type:"DISMISS_TOAST",toastId:c})}}const AN=n=>{const r=[];for(let c=0;c<n;c++){const d=c*137.508%360;r.push(`hsl(${d}, 70%, 55%)`)}return r};function MN(){const[n,r]=u.useState(null),[c,d]=u.useState(!0),[h,x]=u.useState(0),[f,j]=u.useState(24),[p,N]=u.useState(!0),[v,C]=u.useState(null),[S,w]=u.useState(!0),[L,F]=u.useState(null),[B,O]=u.useState(!1),{toast:K}=Xt(),H=u.useCallback(async()=>{try{w(!0);const T=await Lc.get("https://v1.hitokoto.cn/?c=a&c=b&c=c&c=d&c=h&c=i&c=k");C({hitokoto:T.data.hitokoto,from:T.data.from||T.data.from_who||""})}catch(T){console.error(":",T),C({hitokoto:"",from:""})}finally{w(!1)}},[]),z=u.useCallback(async()=>{try{const T=localStorage.getItem("access-token"),te=await Lc.get("/api/webui/system/status",{headers:{Authorization:`Bearer ${T}`}});F(te.data)}catch(T){console.error(":",T),F(null)}},[]),V=async()=>{if(!B)try{O(!0);const T=localStorage.getItem("access-token");await Lc.post("/api/webui/system/restart",{},{headers:{Authorization:`Bearer ${T}`}}),K({title:"",description:"..."}),setTimeout(()=>{z(),O(!1)},3e3)}catch(T){console.error(":",T),K({title:"",description:"",variant:"destructive"}),O(!1)}},Y=u.useCallback(async()=>{try{const T=localStorage.getItem("access-token"),te=await Lc.get(`/api/webui/statistics/dashboard?hours=${f}`,{headers:{Authorization:`Bearer ${T}`}});r(te.data),d(!1),x(100)}catch(T){console.error("Failed to fetch dashboard data:",T),d(!1),x(100)}},[f]);if(u.useEffect(()=>{if(!c)return;x(0);const T=setTimeout(()=>x(15),200),te=setTimeout(()=>x(30),800),_=setTimeout(()=>x(45),2e3),me=setTimeout(()=>x(60),4e3),oe=setTimeout(()=>x(75),6500),ae=setTimeout(()=>x(85),9e3),xe=setTimeout(()=>x(92),11e3);return()=>{clearTimeout(T),clearTimeout(te),clearTimeout(_),clearTimeout(me),clearTimeout(oe),clearTimeout(ae),clearTimeout(xe)}},[c]),u.useEffect(()=>{Y(),H(),z()},[Y,H,z]),u.useEffect(()=>{if(!p)return;const T=setInterval(()=>{Y(),z()},3e4);return()=>clearInterval(T)},[p,Y,z]),c||!n)return e.jsx("div",{className:"flex items-center justify-center h-[calc(100vh-200px)]",children:e.jsxs("div",{className:"text-center space-y-6 w-full max-w-md px-4",children:[e.jsx(ws,{className:"h-12 w-12 animate-spin mx-auto text-primary"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-lg font-medium",children:"..."}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(yr,{value:h,className:"h-2"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[h,"%"]})]})]})});const{summary:E,model_stats:R=[],hourly_data:ne=[],daily_data:fe=[],recent_activity:Ce=[]}=n,we=E??{total_requests:0,total_cost:0,total_tokens:0,online_time:0,total_messages:0,total_replies:0,avg_response_time:0,cost_per_hour:0,tokens_per_hour:0},pe=T=>{const te=Math.floor(T/3600),_=Math.floor(T%3600/60);return`${te}${_}`},Ne=T=>new Date(T).toLocaleString("zh-CN",{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),be=AN(R.length),A=R.map((T,te)=>({name:T.model_name,value:T.request_count,fill:be[te]})),X={requests:{label:"",color:"hsl(var(--chart-1))"},cost:{label:"()",color:"hsl(var(--chart-2))"},tokens:{label:"Tokens",color:"hsl(var(--chart-3))"}};return e.jsx(st,{className:"h-full",children:e.jsxs("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:""})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(La,{value:f.toString(),onValueChange:T=>j(Number(T)),children:e.jsxs(wa,{className:"grid grid-cols-3 w-full sm:w-auto",children:[e.jsx(it,{value:"24",children:"24"}),e.jsx(it,{value:"168",children:"7"}),e.jsx(it,{value:"720",children:"30"})]})}),e.jsxs(b,{variant:p?"default":"outline",size:"sm",onClick:()=>N(!p),className:"gap-2",children:[e.jsx(ws,{className:`h-4 w-4 ${p?"animate-spin":""}`}),e.jsx("span",{className:"hidden sm:inline",children:""})]}),e.jsx(b,{variant:"outline",size:"sm",onClick:Y,children:e.jsx(ws,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"flex items-center gap-3 px-4 py-2 rounded-lg border border-dashed border-muted-foreground/30 bg-muted/20",children:[S?e.jsx(hg,{className:"h-5 flex-1"}):v?e.jsxs("p",{className:"flex-1 text-sm text-muted-foreground italic truncate",children:['"',v.hitokoto,'"  ',v.from]}):null,e.jsx(b,{variant:"ghost",size:"icon",className:"h-7 w-7 shrink-0",onClick:H,disabled:S,children:e.jsx(ws,{className:`h-3.5 w-3.5 ${S?"animate-spin":""}`})})]}),e.jsxs("div",{className:"grid gap-4 grid-cols-1 lg:grid-cols-3",children:[e.jsxs(Ye,{className:"lg:col-span-1",children:[e.jsx(Nt,{className:"pb-3",children:e.jsxs(wt,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(gr,{className:"h-4 w-4"}),""]})}),e.jsx(kt,{children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex items-center gap-2",children:L?.running?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-3 w-3 rounded-full bg-green-500 animate-pulse"}),e.jsxs(Je,{variant:"outline",className:"text-green-600 border-green-300 bg-green-50",children:[e.jsx(ha,{className:"h-3 w-3 mr-1"}),""]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-3 w-3 rounded-full bg-red-500"}),e.jsxs(Je,{variant:"outline",className:"text-red-600 border-red-300 bg-red-50",children:[e.jsx(Oa,{className:"h-3 w-3 mr-1"}),""]})]})}),L&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.jsxs("span",{children:["v",L.version]}),e.jsx("span",{className:"mx-2",children:"|"}),e.jsxs("span",{children:[" ",pe(L.uptime)]})]})]})})]}),e.jsxs(Ye,{className:"lg:col-span-2",children:[e.jsx(Nt,{className:"pb-3",children:e.jsxs(wt,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(ln,{className:"h-4 w-4"}),""]})}),e.jsx(kt,{children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(b,{variant:"outline",size:"sm",onClick:V,disabled:B,className:"gap-2",children:[e.jsx(Kc,{className:`h-4 w-4 ${B?"animate-spin":""}`}),B?"...":""]}),e.jsx(b,{variant:"outline",size:"sm",asChild:!0,className:"gap-2",children:e.jsxs($c,{to:"/logs",children:[e.jsx(Da,{className:"h-4 w-4"}),""]})}),e.jsx(b,{variant:"outline",size:"sm",asChild:!0,className:"gap-2",children:e.jsxs($c,{to:"/plugins",children:[e.jsx(ly,{className:"h-4 w-4"}),""]})}),e.jsx(b,{variant:"outline",size:"sm",asChild:!0,className:"gap-2",children:e.jsxs($c,{to:"/settings",children:[e.jsx(ai,{className:"h-4 w-4"}),""]})})]})})]})]}),e.jsxs("div",{className:"grid gap-4 grid-cols-1 xs:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(Ye,{children:[e.jsxs(Nt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(wt,{className:"text-sm font-medium",children:""}),e.jsx(ny,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(kt,{children:[e.jsx("div",{className:"text-2xl font-bold",children:we.total_requests.toLocaleString()}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["",f<48?f+"":Math.floor(f/24)+""]})]})]}),e.jsxs(Ye,{children:[e.jsxs(Nt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(wt,{className:"text-sm font-medium",children:""}),e.jsx(iy,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(kt,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["",we.total_cost.toFixed(2)]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:we.cost_per_hour>0?`${we.cost_per_hour.toFixed(2)}/`:""})]})]}),e.jsxs(Ye,{children:[e.jsxs(Nt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(wt,{className:"text-sm font-medium",children:"Token"}),e.jsx(Zc,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(kt,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[(we.total_tokens/1e3).toFixed(1),"K"]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:we.tokens_per_hour>0?`${(we.tokens_per_hour/1e3).toFixed(1)}K/`:""})]})]}),e.jsxs(Ye,{children:[e.jsxs(Nt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(wt,{className:"text-sm font-medium",children:""}),e.jsx(ln,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(kt,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[we.avg_response_time.toFixed(2),"s"]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"API"})]})]})]}),e.jsxs("div",{className:"grid gap-4 grid-cols-1 sm:grid-cols-3",children:[e.jsxs(Ye,{children:[e.jsxs(Nt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(wt,{className:"text-sm font-medium",children:""}),e.jsx(Wn,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(kt,{children:e.jsx("div",{className:"text-xl font-bold",children:pe(we.online_time)})})]}),e.jsxs(Ye,{children:[e.jsxs(Nt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(wt,{className:"text-sm font-medium",children:""}),e.jsx(cn,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(kt,{children:[e.jsx("div",{className:"text-xl font-bold",children:we.total_messages.toLocaleString()}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[" ",we.total_replies.toLocaleString()," "]})]})]}),e.jsxs(Ye,{children:[e.jsxs(Nt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(wt,{className:"text-sm font-medium",children:""}),e.jsx(ry,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(kt,{children:[e.jsx("div",{className:"text-xl font-bold",children:we.total_messages>0?`${(we.total_cost/we.total_messages*100).toFixed(2)}`:"0.00"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"100"})]})]})]}),e.jsxs(La,{defaultValue:"trends",className:"space-y-4",children:[e.jsxs(wa,{className:"grid w-full grid-cols-2 sm:grid-cols-4",children:[e.jsx(it,{value:"trends",children:""}),e.jsx(it,{value:"models",children:""}),e.jsx(it,{value:"activity",children:""}),e.jsx(it,{value:"daily",children:""})]}),e.jsxs(zt,{value:"trends",className:"space-y-4",children:[e.jsxs(Ye,{children:[e.jsxs(Nt,{children:[e.jsx(wt,{children:""}),e.jsxs(ns,{children:["",f,""]})]}),e.jsx(kt,{children:e.jsx(Jn,{config:X,className:"h-[300px] sm:h-[400px] w-full aspect-auto",children:e.jsxs(Rb,{data:ne,children:[e.jsx(Uc,{strokeDasharray:"3 3",stroke:"hsl(var(--muted-foreground) / 0.2)"}),e.jsx(Bc,{dataKey:"timestamp",tickFormatter:T=>Ne(T),angle:-45,textAnchor:"end",height:60,stroke:"hsl(var(--muted-foreground))",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(Wi,{stroke:"hsl(var(--muted-foreground))",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(tr,{content:e.jsx(In,{labelFormatter:T=>Ne(T)})}),e.jsx(Lb,{type:"monotone",dataKey:"requests",stroke:"var(--color-requests)",strokeWidth:2})]})})})]}),e.jsxs("div",{className:"grid gap-4 grid-cols-1 lg:grid-cols-2",children:[e.jsxs(Ye,{children:[e.jsxs(Nt,{children:[e.jsx(wt,{children:""}),e.jsx(ns,{children:"API"})]}),e.jsx(kt,{children:e.jsx(Jn,{config:X,className:"h-[250px] sm:h-[300px] w-full aspect-auto",children:e.jsxs(vu,{data:ne,children:[e.jsx(Uc,{strokeDasharray:"3 3",stroke:"hsl(var(--muted-foreground) / 0.2)"}),e.jsx(Bc,{dataKey:"timestamp",tickFormatter:T=>Ne(T),angle:-45,textAnchor:"end",height:60,stroke:"hsl(var(--muted-foreground))",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(Wi,{stroke:"hsl(var(--muted-foreground))",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(tr,{content:e.jsx(In,{labelFormatter:T=>Ne(T)})}),e.jsx(Hc,{dataKey:"cost",fill:"var(--color-cost)"})]})})})]}),e.jsxs(Ye,{children:[e.jsxs(Nt,{children:[e.jsx(wt,{children:"Token"}),e.jsx(ns,{children:"Token"})]}),e.jsx(kt,{children:e.jsx(Jn,{config:X,className:"h-[250px] sm:h-[300px] w-full aspect-auto",children:e.jsxs(vu,{data:ne,children:[e.jsx(Uc,{strokeDasharray:"3 3",stroke:"hsl(var(--muted-foreground) / 0.2)"}),e.jsx(Bc,{dataKey:"timestamp",tickFormatter:T=>Ne(T),angle:-45,textAnchor:"end",height:60,stroke:"hsl(var(--muted-foreground))",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(Wi,{stroke:"hsl(var(--muted-foreground))",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(tr,{content:e.jsx(In,{labelFormatter:T=>Ne(T)})}),e.jsx(Hc,{dataKey:"tokens",fill:"var(--color-tokens)"})]})})})]})]})]}),e.jsx(zt,{value:"models",className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4 grid-cols-1 lg:grid-cols-2",children:[e.jsxs(Ye,{children:[e.jsxs(Nt,{children:[e.jsx(wt,{children:""}),e.jsxs(ns,{children:[" ( ",R.length," )"]})]}),e.jsx(kt,{children:e.jsx(Jn,{config:Object.fromEntries(R.map((T,te)=>[T.model_name,{label:T.model_name,color:be[te]}])),className:"h-[300px] sm:h-[400px] w-full aspect-auto",children:e.jsxs(Ub,{children:[e.jsx(tr,{content:e.jsx(In,{})}),e.jsx(Bb,{data:A,cx:"50%",cy:"50%",labelLine:!1,label:({name:T,percent:te})=>te&&te<.05?"":`${T} ${te?(te*100).toFixed(0):0}%`,outerRadius:100,dataKey:"value",children:A.map((T,te)=>e.jsx(Hb,{fill:T.fill},`cell-${te}`))})]})})})]}),e.jsxs(Ye,{children:[e.jsxs(Nt,{children:[e.jsx(wt,{children:""}),e.jsx(ns,{children:""})]}),e.jsx(kt,{children:e.jsx(st,{className:"h-[300px] sm:h-[400px]",children:e.jsx("div",{className:"space-y-3",children:R.map((T,te)=>e.jsxs("div",{className:"p-4 rounded-lg border bg-card hover:bg-accent/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-semibold text-sm truncate flex-1 min-w-0",children:T.model_name}),e.jsx("div",{className:"w-3 h-3 rounded-full ml-2 flex-shrink-0",style:{backgroundColor:`hsl(var(--chart-${te%5+1}))`}})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:":"}),e.jsx("span",{className:"ml-1 font-medium",children:T.request_count.toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:":"}),e.jsxs("span",{className:"ml-1 font-medium",children:["",T.total_cost.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Tokens:"}),e.jsxs("span",{className:"ml-1 font-medium",children:[(T.total_tokens/1e3).toFixed(1),"K"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:":"}),e.jsxs("span",{className:"ml-1 font-medium",children:[T.avg_response_time.toFixed(2),"s"]})]})]})]},te))})})})]})]})}),e.jsx(zt,{value:"activity",children:e.jsxs(Ye,{children:[e.jsxs(Nt,{children:[e.jsx(wt,{children:""}),e.jsx(ns,{children:"API"})]}),e.jsx(kt,{children:e.jsx(st,{className:"h-[400px] sm:h-[500px]",children:e.jsx("div",{className:"space-y-2",children:Ce.map((T,te)=>e.jsxs("div",{className:"p-3 sm:p-4 rounded-lg border bg-card hover:bg-accent/50 transition-colors",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-2 mb-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-sm truncate",children:T.model}),e.jsx("div",{className:"text-xs text-muted-foreground",children:T.request_type})]}),e.jsx("div",{className:"text-xs text-muted-foreground flex-shrink-0",children:Ne(T.timestamp)})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Tokens:"}),e.jsx("span",{className:"ml-1",children:T.tokens})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:":"}),e.jsxs("span",{className:"ml-1",children:["",T.cost.toFixed(4)]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:":"}),e.jsxs("span",{className:"ml-1",children:[T.time_cost.toFixed(2),"s"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:":"}),e.jsx("span",{className:`ml-1 ${T.status==="success"?"text-green-600":"text-red-600"}`,children:T.status})]})]})]},te))})})})]})}),e.jsx(zt,{value:"daily",children:e.jsxs(Ye,{children:[e.jsxs(Nt,{children:[e.jsx(wt,{children:""}),e.jsx(ns,{children:"7"})]}),e.jsx(kt,{children:e.jsx(Jn,{config:{requests:{label:"",color:"hsl(var(--chart-1))"},cost:{label:"()",color:"hsl(var(--chart-2))"}},className:"h-[400px] sm:h-[500px] w-full aspect-auto",children:e.jsxs(vu,{data:fe,children:[e.jsx(Uc,{strokeDasharray:"3 3",stroke:"hsl(var(--muted-foreground) / 0.2)"}),e.jsx(Bc,{dataKey:"timestamp",tickFormatter:T=>{const te=new Date(T);return`${te.getMonth()+1}/${te.getDate()}`},stroke:"hsl(var(--muted-foreground))",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(Wi,{yAxisId:"left",stroke:"hsl(var(--muted-foreground))",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(Wi,{yAxisId:"right",orientation:"right",stroke:"hsl(var(--muted-foreground))",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(tr,{content:e.jsx(In,{labelFormatter:T=>new Date(T).toLocaleDateString("zh-CN")})}),e.jsx(_N,{content:e.jsx(pg,{})}),e.jsx(Hc,{yAxisId:"left",dataKey:"requests",fill:"var(--color-requests)"}),e.jsx(Hc,{yAxisId:"right",dataKey:"cost",fill:"var(--color-cost)"})]})})})]})})]})]})})}const DN={theme:"system",setTheme:()=>null},gg=u.createContext(DN),Gu=()=>{const n=u.useContext(gg);if(n===void 0)throw new Error("useTheme must be used within a ThemeProvider");return n},ON=(n,r,c)=>{const d=document.documentElement.classList.contains("no-animations");if(!document.startViewTransition||d){r(n);return}const h=c.clientX,x=c.clientY,f=Math.hypot(Math.max(h,innerWidth-h),Math.max(x,innerHeight-x));document.startViewTransition(()=>{r(n)}).ready.then(()=>{document.documentElement.animate({clipPath:[`circle(0px at ${h}px ${x}px)`,`circle(${f}px at ${h}px ${x}px)`]},{duration:500,easing:"ease-in-out",pseudoElement:"::view-transition-new(root)"})})},jg=u.createContext(void 0),vg=()=>{const n=u.useContext(jg);if(n===void 0)throw new Error("useAnimation must be used within an AnimationProvider");return n},Qe=u.forwardRef(({className:n,...r},c)=>e.jsx(wp,{className:Q("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",n),...r,ref:c,children:e.jsx(vb,{className:Q("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));Qe.displayName=wp.displayName;const RN=si("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),y=u.forwardRef(({className:n,...r},c)=>e.jsx(Lp,{ref:c,className:Q(RN(),n),...r}));y.displayName=Lp.displayName;const ce=u.forwardRef(({className:n,type:r,...c},d)=>e.jsx("input",{type:r,className:Q("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:d,...c}));ce.displayName="Input";const LN=[{id:"minLength",label:" 10 ",description:"Token  10 ",validate:n=>n.length>=10},{id:"hasUppercase",label:"",description:" (A-Z)",validate:n=>/[A-Z]/.test(n)},{id:"hasLowercase",label:"",description:" (a-z)",validate:n=>/[a-z]/.test(n)},{id:"hasSpecialChar",label:"",description:" (!@#$%^&*()_+-=[]{}|;:,.<>?/)",validate:n=>/[!@#$%^&*()_+\-=[\]{}|;:,.<>?/]/.test(n)}];function UN(n){const r=LN.map(d=>({id:d.id,label:d.label,description:d.description,passed:d.validate(n)}));return{isValid:r.every(d=>d.passed),rules:r}}const Vu="0.11.6 Beta",Fu="MaiBot Dashboard",BN=`${Fu} v${Vu}`,HN=(n="v")=>`${n}${Vu}`,Gs={THEME:"maibot-ui-theme",ACCENT_COLOR:"accent-color",ENABLE_ANIMATIONS:"maibot-animations",ENABLE_WAVES_BACKGROUND:"maibot-waves-background",LOG_CACHE_SIZE:"maibot-log-cache-size",LOG_AUTO_SCROLL:"maibot-log-auto-scroll",LOG_FONT_SIZE:"maibot-log-font-size",LOG_LINE_SPACING:"maibot-log-line-spacing",DATA_SYNC_INTERVAL:"maibot-data-sync-interval",WS_RECONNECT_INTERVAL:"maibot-ws-reconnect-interval",WS_MAX_RECONNECT_ATTEMPTS:"maibot-ws-max-reconnect-attempts",COMPLETED_TOURS:"maibot-completed-tours"},Aa={theme:"system",accentColor:"blue",enableAnimations:!0,enableWavesBackground:!0,logCacheSize:1e3,logAutoScroll:!0,logFontSize:"xs",logLineSpacing:4,dataSyncInterval:30,wsReconnectInterval:3e3,wsMaxReconnectAttempts:10};function Wt(n){const r=bg(n),c=localStorage.getItem(r);if(c===null)return Aa[n];const d=Aa[n];if(typeof d=="boolean")return c==="true";if(typeof d=="number"){const h=parseFloat(c);return isNaN(h)?d:h}return c}function Pn(n,r){const c=bg(n);localStorage.setItem(c,String(r)),window.dispatchEvent(new CustomEvent("maibot-settings-change",{detail:{key:n,value:r}}))}function qN(){return{theme:Wt("theme"),accentColor:Wt("accentColor"),enableAnimations:Wt("enableAnimations"),enableWavesBackground:Wt("enableWavesBackground"),logCacheSize:Wt("logCacheSize"),logAutoScroll:Wt("logAutoScroll"),logFontSize:Wt("logFontSize"),logLineSpacing:Wt("logLineSpacing"),dataSyncInterval:Wt("dataSyncInterval"),wsReconnectInterval:Wt("wsReconnectInterval"),wsMaxReconnectAttempts:Wt("wsMaxReconnectAttempts")}}function GN(){const n=qN(),r=localStorage.getItem(Gs.COMPLETED_TOURS),c=r?JSON.parse(r):[];return{...n,completedTours:c}}function VN(n){const r=[],c=[];for(const[d,h]of Object.entries(n)){if(d==="completedTours"){Array.isArray(h)?(localStorage.setItem(Gs.COMPLETED_TOURS,JSON.stringify(h)),r.push("completedTours")):c.push("completedTours");continue}if(d in Aa){const x=d,f=Aa[x];if(typeof h==typeof f){if(x==="theme"&&!["light","dark","system"].includes(h)){c.push(d);continue}if(x==="logFontSize"&&!["xs","sm","base"].includes(h)){c.push(d);continue}Pn(x,h),r.push(d)}else c.push(d)}else c.push(d)}return{success:r.length>0,imported:r,skipped:c}}function FN(){for(const n of Object.keys(Aa))Pn(n,Aa[n]);localStorage.removeItem(Gs.COMPLETED_TOURS),window.dispatchEvent(new CustomEvent("maibot-settings-reset"))}function $N(){const n=[],r=[],c=[];for(let d=0;d<localStorage.length;d++){const h=localStorage.key(d);h&&(h.startsWith("maibot")||h.startsWith("accent-color")||h==="access-token")&&c.push(h)}for(const d of c)localStorage.removeItem(d),n.push(d);return{clearedKeys:n,preservedKeys:r}}function Pf(){let n=0;const r=[];for(let c=0;c<localStorage.length;c++){const d=localStorage.key(c);if(d){const h=localStorage.getItem(d)||"",x=(d.length+h.length)*2;n+=x,r.push({key:d,size:x})}}return r.sort((c,d)=>d.size-c.size),{used:n,items:localStorage.length,details:r}}function QN(n){if(n===0)return"0 B";const r=1024,c=["B","KB","MB"],d=Math.floor(Math.log(n)/Math.log(r));return parseFloat((n/Math.pow(r,d)).toFixed(2))+" "+c[d]}function bg(n){return{theme:Gs.THEME,accentColor:Gs.ACCENT_COLOR,enableAnimations:Gs.ENABLE_ANIMATIONS,enableWavesBackground:Gs.ENABLE_WAVES_BACKGROUND,logCacheSize:Gs.LOG_CACHE_SIZE,logAutoScroll:Gs.LOG_AUTO_SCROLL,logFontSize:Gs.LOG_FONT_SIZE,logLineSpacing:Gs.LOG_LINE_SPACING,dataSyncInterval:Gs.DATA_SYNC_INTERVAL,wsReconnectInterval:Gs.WS_RECONNECT_INTERVAL,wsMaxReconnectAttempts:Gs.WS_MAX_RECONNECT_ATTEMPTS}[n]}const Ma=u.forwardRef(({className:n,...r},c)=>e.jsxs(_p,{ref:c,className:Q("relative flex w-full touch-none select-none items-center",n),...r,children:[e.jsx(bb,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:e.jsx(yb,{className:"absolute h-full bg-primary"})}),e.jsx(Nb,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}));Ma.displayName=_p.displayName;class YN{ws=null;reconnectTimeout=null;reconnectAttempts=0;heartbeatInterval=null;logCallbacks=new Set;connectionCallbacks=new Set;isConnected=!1;logCache=[];getMaxCacheSize(){return Wt("logCacheSize")}getMaxReconnectAttempts(){return Wt("wsMaxReconnectAttempts")}getReconnectInterval(){return Wt("wsReconnectInterval")}getWebSocketUrl(){{const r=window.location.protocol==="https:"?"wss:":"ws:",c=window.location.host;return`${r}//${c}/ws/logs`}}connect(){if(this.ws?.readyState===WebSocket.OPEN||this.ws?.readyState===WebSocket.CONNECTING)return;const r=this.getWebSocketUrl();try{this.ws=new WebSocket(r),this.ws.onopen=()=>{this.isConnected=!0,this.reconnectAttempts=0,this.notifyConnection(!0),this.startHeartbeat()},this.ws.onmessage=c=>{try{if(c.data==="pong")return;const d=JSON.parse(c.data);this.notifyLog(d)}catch(d){console.error(":",d)}},this.ws.onerror=c=>{console.error(" WebSocket :",c),this.isConnected=!1,this.notifyConnection(!1)},this.ws.onclose=()=>{this.isConnected=!1,this.notifyConnection(!1),this.stopHeartbeat(),this.attemptReconnect()}}catch(c){console.error(" WebSocket :",c),this.attemptReconnect()}}attemptReconnect(){const r=this.getMaxReconnectAttempts();if(this.reconnectAttempts>=r)return;this.reconnectAttempts+=1;const c=this.getReconnectInterval(),d=Math.min(c*this.reconnectAttempts,3e4);this.reconnectTimeout=window.setTimeout(()=>{this.connect()},d)}startHeartbeat(){this.heartbeatInterval=window.setInterval(()=>{this.ws?.readyState===WebSocket.OPEN&&this.ws.send("ping")},3e4)}stopHeartbeat(){this.heartbeatInterval!==null&&(clearInterval(this.heartbeatInterval),this.heartbeatInterval=null)}disconnect(){this.reconnectTimeout!==null&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),this.stopHeartbeat(),this.ws&&(this.ws.close(),this.ws=null),this.isConnected=!1,this.reconnectAttempts=0}onLog(r){return this.logCallbacks.add(r),()=>this.logCallbacks.delete(r)}onConnectionChange(r){return this.connectionCallbacks.add(r),r(this.isConnected),()=>this.connectionCallbacks.delete(r)}notifyLog(r){if(!this.logCache.some(d=>d.id===r.id)){this.logCache.push(r);const d=this.getMaxCacheSize();this.logCache.length>d&&(this.logCache=this.logCache.slice(-d)),this.logCallbacks.forEach(h=>{try{h(r)}catch(x){console.error(":",x)}})}}notifyConnection(r){this.connectionCallbacks.forEach(c=>{try{c(r)}catch(d){console.error(":",d)}})}getAllLogs(){return[...this.logCache]}clearLogs(){this.logCache=[]}getConnectionStatus(){return this.isConnected}}const an=new YN;typeof window<"u"&&an.connect();const Jt=Fb,$u=$b,XN=Gb,yg=u.forwardRef(({className:n,...r},c)=>e.jsx(Up,{ref:c,className:Q("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...r}));yg.displayName=Up.displayName;const $t=u.forwardRef(({className:n,children:r,preventOutsideClose:c=!1,...d},h)=>e.jsxs(XN,{children:[e.jsx(yg,{}),e.jsxs(Bp,{ref:h,className:Q("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),onPointerDownOutside:c?x=>x.preventDefault():void 0,onInteractOutside:c?x=>x.preventDefault():void 0,...d,children:[r,e.jsxs(Vb,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(on,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));$t.displayName=Bp.displayName;const Qt=({className:n,...r})=>e.jsx("div",{className:Q("flex flex-col space-y-1.5 text-center sm:text-left",n),...r});Qt.displayName="DialogHeader";const xs=({className:n,...r})=>e.jsx("div",{className:Q("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",n),...r});xs.displayName="DialogFooter";const Yt=u.forwardRef(({className:n,...r},c)=>e.jsx(Hp,{ref:c,className:Q("text-lg font-semibold leading-none tracking-tight",n),...r}));Yt.displayName=Hp.displayName;const ds=u.forwardRef(({className:n,...r},c)=>e.jsx(qp,{ref:c,className:Q("text-sm text-muted-foreground",n),...r}));ds.displayName=qp.displayName;const bt=_b,es=Sb,KN=wb,Ng=u.forwardRef(({className:n,...r},c)=>e.jsx(Sp,{className:Q("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...r,ref:c}));Ng.displayName=Sp.displayName;const dt=u.forwardRef(({className:n,...r},c)=>e.jsxs(KN,{children:[e.jsx(Ng,{}),e.jsx(Cp,{ref:c,className:Q("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...r})]}));dt.displayName=Cp.displayName;const ut=({className:n,...r})=>e.jsx("div",{className:Q("flex flex-col space-y-2 text-center sm:text-left",n),...r});ut.displayName="AlertDialogHeader";const mt=({className:n,...r})=>e.jsx("div",{className:Q("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",n),...r});mt.displayName="AlertDialogFooter";const ht=u.forwardRef(({className:n,...r},c)=>e.jsx(kp,{ref:c,className:Q("text-lg font-semibold",n),...r}));ht.displayName=kp.displayName;const xt=u.forwardRef(({className:n,...r},c)=>e.jsx(Tp,{ref:c,className:Q("text-sm text-muted-foreground",n),...r}));xt.displayName=Tp.displayName;const ft=u.forwardRef(({className:n,...r},c)=>e.jsx(Ep,{ref:c,className:Q(hr(),n),...r}));ft.displayName=Ep.displayName;const pt=u.forwardRef(({className:n,...r},c)=>e.jsx(zp,{ref:c,className:Q(hr({variant:"outline"}),"mt-2 sm:mt-0",n),...r}));pt.displayName=zp.displayName;function ZN(){return e.jsxs("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:""}),e.jsx("p",{className:"text-muted-foreground mt-1 sm:mt-2 text-sm sm:text-base",children:""})]})}),e.jsxs(La,{defaultValue:"appearance",className:"w-full",children:[e.jsxs(wa,{className:"grid w-full grid-cols-2 sm:grid-cols-4 gap-0.5 sm:gap-1 h-auto p-1",children:[e.jsxs(it,{value:"appearance",className:"gap-1 sm:gap-2 text-xs sm:text-sm px-2 sm:px-3 py-2",children:[e.jsx(cy,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4",strokeWidth:2,fill:"none"}),e.jsx("span",{children:""})]}),e.jsxs(it,{value:"security",className:"gap-1 sm:gap-2 text-xs sm:text-sm px-2 sm:px-3 py-2",children:[e.jsx(oy,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4",strokeWidth:2,fill:"none"}),e.jsx("span",{children:""})]}),e.jsxs(it,{value:"other",className:"gap-1 sm:gap-2 text-xs sm:text-sm px-2 sm:px-3 py-2",children:[e.jsx(ai,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4",strokeWidth:2,fill:"none"}),e.jsx("span",{children:""})]}),e.jsxs(it,{value:"about",className:"gap-1 sm:gap-2 text-xs sm:text-sm px-2 sm:px-3 py-2",children:[e.jsx(Ra,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4",strokeWidth:2,fill:"none"}),e.jsx("span",{children:""})]})]}),e.jsxs(st,{className:"h-[calc(100vh-240px)] sm:h-[calc(100vh-280px)] mt-4 sm:mt-6",children:[e.jsx(zt,{value:"appearance",className:"mt-0",children:e.jsx(JN,{})}),e.jsx(zt,{value:"security",className:"mt-0",children:e.jsx(IN,{})}),e.jsx(zt,{value:"other",className:"mt-0",children:e.jsx(PN,{})}),e.jsx(zt,{value:"about",className:"mt-0",children:e.jsx(WN,{})})]})]})]})}function Wf(n){const r=document.documentElement,d={blue:{hsl:"221.2 83.2% 53.3%",darkHsl:"217.2 91.2% 59.8%",gradient:null},purple:{hsl:"271 91% 65%",darkHsl:"270 95% 75%",gradient:null},green:{hsl:"142 71% 45%",darkHsl:"142 76% 36%",gradient:null},orange:{hsl:"25 95% 53%",darkHsl:"20 90% 48%",gradient:null},pink:{hsl:"330 81% 60%",darkHsl:"330 85% 70%",gradient:null},red:{hsl:"0 84% 60%",darkHsl:"0 90% 70%",gradient:null},"gradient-sunset":{hsl:"15 95% 60%",darkHsl:"15 95% 65%",gradient:"linear-gradient(135deg, hsl(25 95% 53%) 0%, hsl(330 81% 60%) 100%)"},"gradient-ocean":{hsl:"200 90% 55%",darkHsl:"200 90% 60%",gradient:"linear-gradient(135deg, hsl(221.2 83.2% 53.3%) 0%, hsl(189 94% 43%) 100%)"},"gradient-forest":{hsl:"150 70% 45%",darkHsl:"150 75% 40%",gradient:"linear-gradient(135deg, hsl(142 71% 45%) 0%, hsl(158 64% 52%) 100%)"},"gradient-aurora":{hsl:"310 85% 65%",darkHsl:"310 90% 70%",gradient:"linear-gradient(135deg, hsl(271 91% 65%) 0%, hsl(330 81% 60%) 100%)"},"gradient-fire":{hsl:"15 95% 55%",darkHsl:"15 95% 60%",gradient:"linear-gradient(135deg, hsl(0 84% 60%) 0%, hsl(25 95% 53%) 100%)"},"gradient-twilight":{hsl:"250 90% 60%",darkHsl:"250 95% 65%",gradient:"linear-gradient(135deg, hsl(239 84% 67%) 0%, hsl(271 91% 65%) 100%)"}}[n];if(d)r.style.setProperty("--primary",d.hsl),d.gradient?(r.style.setProperty("--primary-gradient",d.gradient),r.classList.add("has-gradient")):(r.style.removeProperty("--primary-gradient"),r.classList.remove("has-gradient"));else if(n.startsWith("#")){const h=x=>{x=x.replace("#","");const f=parseInt(x.substring(0,2),16)/255,j=parseInt(x.substring(2,4),16)/255,p=parseInt(x.substring(4,6),16)/255,N=Math.max(f,j,p),v=Math.min(f,j,p);let C=0,S=0;const w=(N+v)/2;if(N!==v){const L=N-v;switch(S=w>.5?L/(2-N-v):L/(N+v),N){case f:C=((j-p)/L+(j<p?6:0))/6;break;case j:C=((p-f)/L+2)/6;break;case p:C=((f-j)/L+4)/6;break}}return`${Math.round(C*360)} ${Math.round(S*100)}% ${Math.round(w*100)}%`};r.style.setProperty("--primary",h(n)),r.style.removeProperty("--primary-gradient"),r.classList.remove("has-gradient")}}function JN(){const{theme:n,setTheme:r}=Gu(),{enableAnimations:c,setEnableAnimations:d,enableWavesBackground:h,setEnableWavesBackground:x}=vg(),[f,j]=u.useState(()=>localStorage.getItem("accent-color")||"blue");u.useEffect(()=>{const N=localStorage.getItem("accent-color")||"blue";Wf(N)},[]);const p=N=>{j(N),localStorage.setItem("accent-color",N),Wf(N)};return e.jsxs("div",{className:"space-y-6 sm:space-y-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:""}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 sm:gap-4",children:[e.jsx(ku,{value:"light",current:n,onChange:r,label:"",description:""}),e.jsx(ku,{value:"dark",current:n,onChange:r,label:"",description:""}),e.jsx(ku,{value:"system",current:n,onChange:r,label:"",description:""})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:""}),e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs sm:text-sm font-medium mb-2 sm:mb-3",children:""}),e.jsxs("div",{className:"grid grid-cols-3 sm:grid-cols-6 gap-2 sm:gap-3",children:[e.jsx(ma,{value:"blue",current:f,onChange:p,label:"",colorClass:"bg-blue-500"}),e.jsx(ma,{value:"purple",current:f,onChange:p,label:"",colorClass:"bg-purple-500"}),e.jsx(ma,{value:"green",current:f,onChange:p,label:"",colorClass:"bg-green-500"}),e.jsx(ma,{value:"orange",current:f,onChange:p,label:"",colorClass:"bg-orange-500"}),e.jsx(ma,{value:"pink",current:f,onChange:p,label:"",colorClass:"bg-pink-500"}),e.jsx(ma,{value:"red",current:f,onChange:p,label:"",colorClass:"bg-red-500"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs sm:text-sm font-medium mb-2 sm:mb-3",children:""}),e.jsxs("div",{className:"grid grid-cols-3 sm:grid-cols-6 gap-2 sm:gap-3",children:[e.jsx(ma,{value:"gradient-sunset",current:f,onChange:p,label:"",colorClass:"bg-gradient-to-r from-orange-500 to-pink-500"}),e.jsx(ma,{value:"gradient-ocean",current:f,onChange:p,label:"",colorClass:"bg-gradient-to-r from-blue-500 to-cyan-500"}),e.jsx(ma,{value:"gradient-forest",current:f,onChange:p,label:"",colorClass:"bg-gradient-to-r from-green-500 to-emerald-500"}),e.jsx(ma,{value:"gradient-aurora",current:f,onChange:p,label:"",colorClass:"bg-gradient-to-r from-purple-500 to-pink-500"}),e.jsx(ma,{value:"gradient-fire",current:f,onChange:p,label:"",colorClass:"bg-gradient-to-r from-red-500 to-orange-500"}),e.jsx(ma,{value:"gradient-twilight",current:f,onChange:p,label:"",colorClass:"bg-gradient-to-r from-indigo-500 to-purple-500"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs sm:text-sm font-medium mb-2 sm:mb-3",children:""}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"color",value:f.startsWith("#")?f:"#3b82f6",onChange:N=>p(N.target.value),className:"h-10 sm:h-12 w-full rounded-lg border-2 border-border cursor-pointer",title:""})}),e.jsx("div",{className:"flex-1",children:e.jsx(ce,{type:"text",value:f,onChange:N=>p(N.target.value),placeholder:"#3b82f6",className:"font-mono text-sm"})})]}),e.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground mt-2",children:" HEX "})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:""}),e.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[e.jsx("div",{className:"rounded-lg border bg-card p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5 flex-1",children:[e.jsx(y,{htmlFor:"animations",className:"text-base font-medium cursor-pointer",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),e.jsx(Qe,{id:"animations",checked:c,onCheckedChange:d})]})}),e.jsx("div",{className:"rounded-lg border bg-card p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5 flex-1",children:[e.jsx(y,{htmlFor:"waves-background",className:"text-base font-medium cursor-pointer",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),e.jsx(Qe,{id:"waves-background",checked:h,onCheckedChange:x})]})})]})]})]})}function IN(){const n=fa(),[r,c]=u.useState(""),[d,h]=u.useState(""),[x,f]=u.useState(!1),[j,p]=u.useState(!1),[N,v]=u.useState(!1),[C,S]=u.useState(!1),[w,L]=u.useState(!1),[F,B]=u.useState(!1),[O,K]=u.useState(""),[H,z]=u.useState(!1),{toast:V}=Xt(),Y=u.useMemo(()=>UN(d),[d]),E=async pe=>{if(!r){V({title:"",description:"Token  Cookie  Token",variant:"destructive"});return}try{await navigator.clipboard.writeText(pe),L(!0),V({title:"",description:"Token "}),setTimeout(()=>L(!1),2e3)}catch{V({title:"",description:" Token",variant:"destructive"})}},R=async()=>{if(!d.trim()){V({title:"",description:" Token",variant:"destructive"});return}if(!Y.isValid){const pe=Y.rules.filter(Ne=>!Ne.passed).map(Ne=>Ne.label).join(", ");V({title:"",description:`Token : ${pe}`,variant:"destructive"});return}v(!0);try{const pe=await fetch("/api/webui/auth/update",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({new_token:d.trim()})}),Ne=await pe.json();pe.ok&&Ne.success?(h(""),c(d.trim()),V({title:"",description:"Access Token "}),setTimeout(()=>{n({to:"/auth"})},1500)):V({title:"",description:Ne.message||" Token",variant:"destructive"})}catch(pe){console.error(" Token :",pe),V({title:"",description:"",variant:"destructive"})}finally{v(!1)}},ne=async()=>{S(!0);try{const pe=await fetch("/api/webui/auth/regenerate",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"}),Ne=await pe.json();pe.ok&&Ne.success?(c(Ne.token),K(Ne.token),B(!0),z(!1),V({title:"",description:" Access Token "})):V({title:"",description:Ne.message||" Token",variant:"destructive"})}catch(pe){console.error(" Token :",pe),V({title:"",description:"",variant:"destructive"})}finally{S(!1)}},fe=async()=>{try{await navigator.clipboard.writeText(O),z(!0),V({title:"",description:"Token "})}catch{V({title:"",description:" Token",variant:"destructive"})}},Ce=()=>{B(!1),setTimeout(()=>{K(""),z(!1)},300),setTimeout(()=>{n({to:"/auth"})},500)},we=pe=>{pe||Ce()};return e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsx(Jt,{open:F,onOpenChange:we,children:e.jsxs($t,{className:"sm:max-w-md",children:[e.jsxs(Qt,{children:[e.jsxs(Yt,{className:"flex items-center gap-2",children:[e.jsx(ya,{className:"h-5 w-5 text-yellow-500"})," Access Token"]}),e.jsx(ds,{children:" Token"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"rounded-lg border-2 border-primary/20 bg-primary/5 p-4",children:[e.jsx(y,{className:"text-xs text-muted-foreground mb-2 block",children:" Token (64)"}),e.jsx("div",{className:"font-mono text-sm break-all select-all bg-background p-3 rounded border",children:O})]}),e.jsx("div",{className:"rounded-lg border border-yellow-200 dark:border-yellow-900 bg-yellow-50 dark:bg-yellow-950/30 p-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ya,{className:"h-4 w-4 text-yellow-600 dark:text-yellow-500 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-yellow-800 dark:text-yellow-300 space-y-1",children:[e.jsx("p",{className:"font-semibold",children:""}),e.jsxs("ul",{className:"list-disc list-inside space-y-0.5 text-xs",children:[e.jsx("li",{children:" Token "}),e.jsx("li",{children:""}),e.jsx("li",{children:""}),e.jsx("li",{children:" Token "})]})]})]})})]}),e.jsxs(xs,{className:"gap-2 sm:gap-0",children:[e.jsx(b,{variant:"outline",onClick:fe,className:"gap-2",children:H?e.jsxs(e.Fragment,{children:[e.jsx(Na,{className:"h-4 w-4 text-green-500"}),""]}):e.jsxs(e.Fragment,{children:[e.jsx(Jc,{className:"h-4 w-4"})," Token"]})}),e.jsx(b,{onClick:Ce,children:""})]})]})}),e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:" Access Token"}),e.jsx("div",{className:"space-y-3 sm:space-y-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"current-token",className:"text-sm",children:""}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ce,{id:"current-token",type:x?"text":"password",value:r||"",readOnly:!0,className:"pr-10 font-mono text-sm",placeholder:"Token  Cookie "}),e.jsx("button",{onClick:()=>{r?f(!x):V({title:"",description:'Token  Cookie  Token ""'})},className:"absolute right-2 top-1/2 -translate-y-1/2 p-1.5 hover:bg-accent rounded",title:x?"":"",children:x?e.jsx(or,{className:"h-4 w-4 text-muted-foreground"}):e.jsx(Ws,{className:"h-4 w-4 text-muted-foreground"})})]}),e.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[e.jsx(b,{variant:"outline",size:"icon",onClick:()=>E(r),title:"",className:"flex-shrink-0",disabled:!r,children:w?e.jsx(Na,{className:"h-4 w-4 text-green-500"}):e.jsx(Jc,{className:"h-4 w-4"})}),e.jsxs(bt,{children:[e.jsx(es,{asChild:!0,children:e.jsxs(b,{variant:"outline",disabled:C,className:"gap-2 flex-1 sm:flex-none",children:[e.jsx(ws,{className:Q("h-4 w-4",C&&"animate-spin")}),e.jsx("span",{className:"hidden sm:inline",children:""}),e.jsx("span",{className:"sm:hidden",children:""})]})}),e.jsxs(dt,{children:[e.jsxs(ut,{children:[e.jsx(ht,{children:" Token"}),e.jsx(xt,{children:" 64  Token   Token "})]}),e.jsxs(mt,{children:[e.jsx(pt,{children:""}),e.jsx(ft,{onClick:ne,children:""})]})]})]})]})]}),e.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:" Access Token"})]})})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:" Access Token"}),e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"new-token",className:"text-sm",children:""}),e.jsxs("div",{className:"relative",children:[e.jsx(ce,{id:"new-token",type:j?"text":"password",value:d,onChange:pe=>h(pe.target.value),className:"pr-10 font-mono text-sm",placeholder:" Token"}),e.jsx("button",{onClick:()=>p(!j),className:"absolute right-2 top-1/2 -translate-y-1/2 p-1.5 hover:bg-accent rounded",title:j?"":"",children:j?e.jsx(or,{className:"h-4 w-4 text-muted-foreground"}):e.jsx(Ws,{className:"h-4 w-4 text-muted-foreground"})})]}),d&&e.jsxs("div",{className:"mt-3 space-y-2 p-3 rounded-lg bg-muted/50",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:"Token :"}),e.jsx("div",{className:"space-y-1.5",children:Y.rules.map(pe=>e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[pe.passed?e.jsx(ha,{className:"h-4 w-4 text-green-500 flex-shrink-0"}):e.jsx(sg,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),e.jsx("span",{className:Q(pe.passed?"text-green-600 dark:text-green-400":"text-muted-foreground"),children:pe.label})]},pe.id))}),Y.isValid&&e.jsx("div",{className:"mt-2 pt-2 border-t border-border",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-600 dark:text-green-400",children:[e.jsx(Na,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:"Token "})]})})]})]}),e.jsx(b,{onClick:R,disabled:N||!Y.isValid||!d,className:"w-full sm:w-auto",children:N?"...":" Token"})]})]}),e.jsxs("div",{className:"rounded-lg border border-yellow-200 dark:border-yellow-900 bg-yellow-50 dark:bg-yellow-950/30 p-3 sm:p-4",children:[e.jsx("h4",{className:"text-sm sm:text-base font-semibold text-yellow-900 dark:text-yellow-200 mb-2",children:""}),e.jsxs("ul",{className:"text-xs sm:text-sm text-yellow-800 dark:text-yellow-300 space-y-1 list-disc list-inside",children:[e.jsx("li",{children:" Token  64 "}),e.jsx("li",{children:" Token "}),e.jsx("li",{children:" Token  Token "}),e.jsx("li",{children:" Token"}),e.jsx("li",{children:" Token "}),e.jsx("li",{children:" Token "})]})]})]})}function PN(){const n=fa(),{toast:r}=Xt(),[c,d]=u.useState(!1),[h,x]=u.useState(!1),[f,j]=u.useState(()=>Wt("logCacheSize")),[p,N]=u.useState(()=>Wt("wsReconnectInterval")),[v,C]=u.useState(()=>Wt("wsMaxReconnectAttempts")),[S,w]=u.useState(()=>Wt("dataSyncInterval")),[L,F]=u.useState(()=>Pf()),[B,O]=u.useState(!1),[K,H]=u.useState(!1),z=u.useRef(null);if(h)throw new Error("");const V=()=>{F(Pf())},Y=A=>{const X=A[0];j(X),Pn("logCacheSize",X)},E=A=>{const X=A[0];N(X),Pn("wsReconnectInterval",X)},R=A=>{const X=A[0];C(X),Pn("wsMaxReconnectAttempts",X)},ne=A=>{const X=A[0];w(X),Pn("dataSyncInterval",X)},fe=()=>{an.clearLogs(),r({title:"",description:""})},Ce=()=>{const A=$N();V(),r({title:"",description:` ${A.clearedKeys.length} `})},we=()=>{O(!0);try{const A=GN(),X=JSON.stringify(A,null,2),T=new Blob([X],{type:"application/json"}),te=URL.createObjectURL(T),_=document.createElement("a");_.href=te,_.download=`maibot-webui-settings-${new Date().toISOString().slice(0,10)}.json`,document.body.appendChild(_),_.click(),document.body.removeChild(_),URL.revokeObjectURL(te),r({title:"",description:" JSON "})}catch(A){console.error(":",A),r({title:"",description:"",variant:"destructive"})}finally{O(!1)}},pe=A=>{const X=A.target.files?.[0];if(!X)return;H(!0);const T=new FileReader;T.onload=te=>{try{const _=te.target?.result,me=JSON.parse(_),oe=VN(me);oe.success?(j(Wt("logCacheSize")),N(Wt("wsReconnectInterval")),C(Wt("wsMaxReconnectAttempts")),w(Wt("dataSyncInterval")),V(),r({title:"",description:` ${oe.imported.length} ${oe.skipped.length>0?` ${oe.skipped.length} `:""}`}),(oe.imported.includes("theme")||oe.imported.includes("accentColor"))&&r({title:"",description:""})):r({title:"",description:"",variant:"destructive"})}catch(_){console.error(":",_),r({title:"",description:"",variant:"destructive"})}finally{H(!1),z.current&&(z.current.value="")}},T.readAsText(X)},Ne=()=>{FN(),j(Aa.logCacheSize),N(Aa.wsReconnectInterval),C(Aa.wsMaxReconnectAttempts),w(Aa.dataSyncInterval),V(),r({title:"",description:""})},be=async()=>{d(!0);try{const A=localStorage.getItem("access-token"),X=await fetch("/api/webui/setup/reset",{method:"POST",headers:{Authorization:`Bearer ${A}`}}),T=await X.json();X.ok&&T.success?(r({title:"",description:""}),setTimeout(()=>{n({to:"/setup"})},1e3)):r({title:"",description:T.message||"",variant:"destructive"})}catch(A){console.error(":",A),r({title:"",description:"",variant:"destructive"})}finally{d(!1)}};return e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6",children:[e.jsxs("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4 flex items-center gap-2",children:[e.jsx(Zc,{className:"h-5 w-5"}),""]}),e.jsxs("div",{className:"space-y-4 sm:space-y-5",children:[e.jsxs("div",{className:"rounded-lg bg-muted/50 p-3 sm:p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(dy,{className:"h-4 w-4"}),""]}),e.jsx(b,{variant:"ghost",size:"sm",onClick:V,className:"h-7 px-2",children:e.jsx(ws,{className:"h-3 w-3"})})]}),e.jsx("div",{className:"text-2xl font-bold text-primary",children:QN(L.used)}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[L.items," "]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(y,{className:"text-sm font-medium",children:""}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[f," "]})]}),e.jsx(Ma,{value:[f],onValueChange:Y,min:100,max:5e3,step:100,className:"w-full"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(y,{className:"text-sm font-medium",children:""}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[S," "]})]}),e.jsx(Ma,{value:[S],onValueChange:ne,min:10,max:120,step:5,className:"w-full"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(y,{className:"text-sm font-medium",children:"WebSocket "}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[p/1e3," "]})]}),e.jsx(Ma,{value:[p],onValueChange:E,min:1e3,max:1e4,step:500,className:"w-full"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" WebSocket "})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(y,{className:"text-sm font-medium",children:"WebSocket "}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[v," "]})]}),e.jsx(Ma,{value:[v],onValueChange:R,min:3,max:30,step:1,className:"w-full"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 pt-2",children:[e.jsxs(b,{variant:"outline",size:"sm",onClick:fe,className:"gap-2",children:[e.jsx(at,{className:"h-4 w-4"}),""]}),e.jsxs(bt,{children:[e.jsx(es,{asChild:!0,children:e.jsxs(b,{variant:"outline",size:"sm",className:"gap-2",children:[e.jsx(at,{className:"h-4 w-4"}),""]})}),e.jsxs(dt,{children:[e.jsxs(ut,{children:[e.jsx(ht,{children:""}),e.jsx(xt,{children:" "})]}),e.jsxs(mt,{children:[e.jsx(pt,{children:""}),e.jsx(ft,{onClick:Ce,children:""})]})]})]})]})]})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6",children:[e.jsxs("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4 flex items-center gap-2",children:[e.jsx(rl,{className:"h-5 w-5"}),"/"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:""}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(b,{variant:"outline",onClick:we,disabled:B,className:"gap-2",children:[e.jsx(rl,{className:"h-4 w-4"}),B?"...":""]}),e.jsx("input",{ref:z,type:"file",accept:".json",onChange:pe,className:"hidden"}),e.jsxs(b,{variant:"outline",onClick:()=>z.current?.click(),disabled:K,className:"gap-2",children:[e.jsx(dr,{className:"h-4 w-4"}),K?"...":""]})]}),e.jsx("div",{className:"pt-2 border-t",children:e.jsxs(bt,{children:[e.jsx(es,{asChild:!0,children:e.jsxs(b,{variant:"outline",size:"sm",className:"gap-2 text-destructive hover:text-destructive",children:[e.jsx(Kc,{className:"h-4 w-4"}),""]})}),e.jsxs(dt,{children:[e.jsxs(ut,{children:[e.jsx(ht,{children:""}),e.jsx(xt,{children:" "})]}),e.jsxs(mt,{children:[e.jsx(pt,{children:""}),e.jsx(ft,{onClick:Ne,children:""})]})]})]})})]})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:""}),e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsx("div",{className:"space-y-2",children:e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:""})}),e.jsxs(bt,{children:[e.jsx(es,{asChild:!0,children:e.jsxs(b,{variant:"outline",disabled:c,className:"gap-2",children:[e.jsx(Kc,{className:Q("h-4 w-4",c&&"animate-spin")}),""]})}),e.jsxs(dt,{children:[e.jsxs(ut,{children:[e.jsx(ht,{children:""}),e.jsx(xt,{children:""})]}),e.jsxs(mt,{children:[e.jsx(pt,{children:""}),e.jsx(ft,{onClick:be,children:""})]})]})]})]})]}),e.jsxs("div",{className:"rounded-lg border border-dashed border-yellow-500/50 bg-yellow-500/5 p-4 sm:p-6",children:[e.jsxs("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4 flex items-center gap-2",children:[e.jsx(ya,{className:"h-5 w-5 text-yellow-500"}),""]}),e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsx("div",{className:"space-y-2",children:e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:""})}),e.jsxs(bt,{children:[e.jsx(es,{asChild:!0,children:e.jsxs(b,{variant:"destructive",className:"gap-2",children:[e.jsx(ya,{className:"h-4 w-4"}),""]})}),e.jsxs(dt,{children:[e.jsxs(ut,{children:[e.jsx(ht,{children:""}),e.jsx(xt,{children:" React  "})]}),e.jsxs(mt,{children:[e.jsx(pt,{children:""}),e.jsx(ft,{onClick:()=>x(!0),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:""})]})]})]})]})]})]})}function WN(){return e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsx("div",{className:"rounded-lg border-2 border-primary/30 bg-gradient-to-r from-primary/5 to-primary/10 p-4 sm:p-6",children:e.jsxs("div",{className:"flex items-start gap-3 sm:gap-4",children:[e.jsx("div",{className:"flex-shrink-0 rounded-lg bg-primary/10 p-2 sm:p-3",children:e.jsx("svg",{className:"h-6 w-6 sm:h-8 sm:w-8 text-primary",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-foreground mb-2",children:""}),e.jsx("p",{className:"text-sm sm:text-base text-muted-foreground mb-3",children:" GitHub  Star  "}),e.jsxs("a",{href:"https://github.com/Mai-with-u/MaiBot-Dashboard",target:"_blank",rel:"noopener noreferrer",className:Q("inline-flex items-center gap-2 px-4 py-2 rounded-lg","bg-primary text-primary-foreground font-medium text-sm","hover:bg-primary/90 transition-colors","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"),children:[e.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z",clipRule:"evenodd"})})," GitHub",e.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})]})]})}),e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6",children:[e.jsxs("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:[" ",Fu]}),e.jsxs("div",{className:"space-y-2 text-xs sm:text-sm text-muted-foreground",children:[e.jsxs("p",{children:[": ",Vu]}),e.jsx("p",{children:"MaiBot Web "})]})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:""}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"MaiBot "}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Mai-with-u"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"WebUI"}),e.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground",children:["Mai-with-u ",e.jsx("a",{href:"https://github.com/DrSmoothl",target:"_blank",rel:"noopener noreferrer",className:"text-primary underline",children:"@MotricSeven"})]})]})]})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:""}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-xs sm:text-sm text-muted-foreground",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("p",{className:"font-medium text-foreground",children:""}),e.jsxs("ul",{className:"space-y-0.5 list-disc list-inside",children:[e.jsx("li",{children:"React 19.2.0"}),e.jsx("li",{children:"TypeScript 5.7.2"}),e.jsx("li",{children:"Vite 6.0.7"}),e.jsx("li",{children:"TanStack Router 1.94.2"})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("p",{className:"font-medium text-foreground",children:"UI "}),e.jsxs("ul",{className:"space-y-0.5 list-disc list-inside",children:[e.jsx("li",{children:"shadcn/ui"}),e.jsx("li",{children:"Radix UI"}),e.jsx("li",{children:"Tailwind CSS 3.4.17"}),e.jsx("li",{children:"Lucide Icons"})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("p",{className:"font-medium text-foreground",children:""}),e.jsxs("ul",{className:"space-y-0.5 list-disc list-inside",children:[e.jsx("li",{children:"Python 3.12+"}),e.jsx("li",{children:"FastAPI"}),e.jsx("li",{children:"Uvicorn"}),e.jsx("li",{children:"WebSocket"})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("p",{className:"font-medium text-foreground",children:""}),e.jsxs("ul",{className:"space-y-0.5 list-disc list-inside",children:[e.jsx("li",{children:"Bun / npm"}),e.jsx("li",{children:"ESLint 9.17.0"}),e.jsx("li",{children:"PostCSS"})]})]})]})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:""}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mb-3",children:""}),e.jsx(st,{className:"h-[300px] sm:h-[400px]",children:e.jsxs("div",{className:"space-y-4 pr-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:"UI "}),e.jsxs("div",{className:"grid gap-2 text-xs sm:text-sm",children:[e.jsx(Zt,{name:"React",description:"",license:"MIT"}),e.jsx(Zt,{name:"shadcn/ui",description:" React ",license:"MIT"}),e.jsx(Zt,{name:"Radix UI",description:"",license:"MIT"}),e.jsx(Zt,{name:"Tailwind CSS",description:" CSS ",license:"MIT"}),e.jsx(Zt,{name:"Lucide React",description:"",license:"ISC"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:""}),e.jsxs("div",{className:"grid gap-2 text-xs sm:text-sm",children:[e.jsx(Zt,{name:"TanStack Router",description:"",license:"MIT"}),e.jsx(Zt,{name:"Zustand",description:"",license:"MIT"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:""}),e.jsxs("div",{className:"grid gap-2 text-xs sm:text-sm",children:[e.jsx(Zt,{name:"React Hook Form",description:"",license:"MIT"}),e.jsx(Zt,{name:"Zod",description:"TypeScript  schema ",license:"MIT"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:""}),e.jsxs("div",{className:"grid gap-2 text-xs sm:text-sm",children:[e.jsx(Zt,{name:"clsx",description:" className ",license:"MIT"}),e.jsx(Zt,{name:"tailwind-merge",description:"Tailwind ",license:"MIT"}),e.jsx(Zt,{name:"class-variance-authority",description:"",license:"Apache-2.0"}),e.jsx(Zt,{name:"date-fns",description:"",license:"MIT"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:""}),e.jsxs("div",{className:"grid gap-2 text-xs sm:text-sm",children:[e.jsx(Zt,{name:"Framer Motion",description:"React ",license:"MIT"}),e.jsx(Zt,{name:"vaul",description:"",license:"MIT"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:""}),e.jsxs("div",{className:"grid gap-2 text-xs sm:text-sm",children:[e.jsx(Zt,{name:"FastAPI",description:" Python Web ",license:"MIT"}),e.jsx(Zt,{name:"Uvicorn",description:"ASGI ",license:"BSD-3-Clause"}),e.jsx(Zt,{name:"Pydantic",description:"",license:"MIT"}),e.jsx(Zt,{name:"python-multipart",description:"",license:"Apache-2.0"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:""}),e.jsxs("div",{className:"grid gap-2 text-xs sm:text-sm",children:[e.jsx(Zt,{name:"TypeScript",description:"JavaScript ",license:"Apache-2.0"}),e.jsx(Zt,{name:"Vite",description:"",license:"MIT"}),e.jsx(Zt,{name:"ESLint",description:"JavaScript ",license:"MIT"}),e.jsx(Zt,{name:"PostCSS",description:"CSS ",license:"MIT"})]})]})]})})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:""}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"rounded-lg bg-primary/5 border border-primary/20 p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-start gap-2 sm:gap-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:e.jsx("div",{className:"rounded-md bg-primary/10 px-2 py-1",children:e.jsx("span",{className:"text-xs sm:text-sm font-bold text-primary",children:"GPLv3"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm sm:text-base font-semibold text-foreground mb-1",children:"MaiBot WebUI"}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:" GNU General Public License v3.0  "})]})]})}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"MITApache-2.0BSD  "})]})]})]})}function Zt({name:n,description:r,license:c}){return e.jsxs("div",{className:"flex items-start justify-between gap-2 rounded-lg border bg-muted/30 p-2.5 sm:p-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-foreground truncate",children:n}),e.jsx("p",{className:"text-muted-foreground text-xs mt-0.5",children:r})]}),e.jsx("span",{className:"inline-flex items-center rounded-full bg-primary/10 px-2 py-0.5 text-[10px] font-medium text-primary flex-shrink-0",children:c})]})}function ku({value:n,current:r,onChange:c,label:d,description:h}){const x=r===n;return e.jsxs("button",{onClick:()=>c(n),className:Q("relative rounded-lg border-2 p-3 sm:p-4 text-left transition-all","hover:border-primary/50 hover:bg-accent/50",x?"border-primary bg-accent":"border-border"),children:[x&&e.jsx("div",{className:"absolute top-2 right-2 sm:top-3 sm:right-3 h-2 w-2 rounded-full bg-primary"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-sm sm:text-base font-medium",children:d}),e.jsx("div",{className:"text-[10px] sm:text-xs text-muted-foreground",children:h})]}),e.jsxs("div",{className:"mt-2 sm:mt-3 flex gap-1",children:[n==="light"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-slate-200"}),e.jsx("div",{className:"h-2 w-2 rounded-full bg-slate-300"}),e.jsx("div",{className:"h-2 w-2 rounded-full bg-slate-400"})]}),n==="dark"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-slate-700"}),e.jsx("div",{className:"h-2 w-2 rounded-full bg-slate-800"}),e.jsx("div",{className:"h-2 w-2 rounded-full bg-slate-900"})]}),n==="system"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-gradient-to-r from-slate-200 to-slate-700"}),e.jsx("div",{className:"h-2 w-2 rounded-full bg-gradient-to-r from-slate-300 to-slate-800"}),e.jsx("div",{className:"h-2 w-2 rounded-full bg-gradient-to-r from-slate-400 to-slate-900"})]})]})]})}function ma({value:n,current:r,onChange:c,label:d,colorClass:h}){const x=r===n;return e.jsxs("button",{onClick:()=>c(n),className:Q("relative rounded-lg border-2 p-2 sm:p-3 text-left transition-all","hover:border-primary/50 hover:bg-accent/50",x?"border-primary bg-accent":"border-border"),children:[x&&e.jsx("div",{className:"absolute top-1.5 right-1.5 sm:top-2 sm:right-2 h-1.5 w-1.5 sm:h-2 sm:w-2 rounded-full bg-primary"}),e.jsxs("div",{className:"flex flex-col items-center gap-1.5 sm:gap-2",children:[e.jsx("div",{className:Q("h-8 w-8 sm:h-10 sm:w-10 rounded-full",h)}),e.jsx("div",{className:"text-[10px] sm:text-xs font-medium text-center",children:d})]})]})}class e0{grad3;p;perm;constructor(r=0){this.grad3=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],this.p=[];for(let c=0;c<256;c++)this.p[c]=Math.floor(Math.random()*256);this.perm=[];for(let c=0;c<512;c++)this.perm[c]=this.p[c&255]}dot(r,c,d){return r[0]*c+r[1]*d}mix(r,c,d){return(1-d)*r+d*c}fade(r){return r*r*r*(r*(r*6-15)+10)}perlin2(r,c){const d=Math.floor(r)&255,h=Math.floor(c)&255;r-=Math.floor(r),c-=Math.floor(c);const x=this.fade(r),f=this.fade(c),j=this.perm[d]+h,p=this.perm[j],N=this.perm[j+1],v=this.perm[d+1]+h,C=this.perm[v],S=this.perm[v+1];return this.mix(this.mix(this.dot(this.grad3[p%12],r,c),this.dot(this.grad3[C%12],r-1,c),x),this.mix(this.dot(this.grad3[N%12],r,c-1),this.dot(this.grad3[S%12],r-1,c-1),x),f)}}function ep(){const n=u.useRef(null),r=u.useRef(null),c=u.useRef(void 0),d=u.useRef({mouse:{x:-10,y:0,lx:0,ly:0,sx:0,sy:0,v:0,vs:0,a:0,set:!1},lines:[],paths:[],noise:new e0(Math.random()),bounding:null});return u.useEffect(()=>{const h=r.current,x=n.current;if(!h||!x)return;const f=d.current,j=()=>{const F=h.getBoundingClientRect();f.bounding=F,x.style.width=`${F.width}px`,x.style.height=`${F.height}px`},p=()=>{if(!f.bounding)return;const{width:F,height:B}=f.bounding;f.lines=[],f.paths.forEach(ne=>ne.remove()),f.paths=[];const O=10,K=32,H=F+200,z=B+30,V=Math.ceil(H/O),Y=Math.ceil(z/K),E=(F-O*V)/2,R=(B-K*Y)/2;for(let ne=0;ne<=V;ne++){const fe=[];for(let we=0;we<=Y;we++){const pe={x:E+O*ne,y:R+K*we,wave:{x:0,y:0},cursor:{x:0,y:0,vx:0,vy:0}};fe.push(pe)}const Ce=document.createElementNS("http://www.w3.org/2000/svg","path");x.appendChild(Ce),f.paths.push(Ce),f.lines.push(fe)}},N=F=>{const{lines:B,mouse:O,noise:K}=f;B.forEach(H=>{H.forEach(z=>{const V=K.perlin2((z.x+F*.0125)*.002,(z.y+F*.005)*.0015)*12;z.wave.x=Math.cos(V)*32,z.wave.y=Math.sin(V)*16;const Y=z.x-O.sx,E=z.y-O.sy,R=Math.hypot(Y,E),ne=Math.max(175,O.vs);if(R<ne){const fe=1-R/ne,Ce=Math.cos(R*.001)*fe;z.cursor.vx+=Math.cos(O.a)*Ce*ne*O.vs*65e-5,z.cursor.vy+=Math.sin(O.a)*Ce*ne*O.vs*65e-5}z.cursor.vx+=(0-z.cursor.x)*.005,z.cursor.vy+=(0-z.cursor.y)*.005,z.cursor.vx*=.925,z.cursor.vy*=.925,z.cursor.x+=z.cursor.vx*2,z.cursor.y+=z.cursor.vy*2,z.cursor.x=Math.min(100,Math.max(-100,z.cursor.x)),z.cursor.y=Math.min(100,Math.max(-100,z.cursor.y))})})},v=(F,B=!0)=>{const O={x:F.x+F.wave.x+(B?F.cursor.x:0),y:F.y+F.wave.y+(B?F.cursor.y:0)};return O.x=Math.round(O.x*10)/10,O.y=Math.round(O.y*10)/10,O},C=()=>{const{lines:F,paths:B}=f;F.forEach((O,K)=>{let H=v(O[0],!1),z=`M ${H.x} ${H.y}`;O.forEach((V,Y)=>{const E=Y===O.length-1;H=v(V,!E),z+=`L ${H.x} ${H.y}`}),B[K].setAttribute("d",z)})},S=F=>{const{mouse:B}=f;B.sx+=(B.x-B.sx)*.1,B.sy+=(B.y-B.sy)*.1;const O=B.x-B.lx,K=B.y-B.ly,H=Math.hypot(O,K);B.v=H,B.vs+=(H-B.vs)*.1,B.vs=Math.min(100,B.vs),B.lx=B.x,B.ly=B.y,B.a=Math.atan2(K,O),h&&(h.style.setProperty("--x",`${B.sx}px`),h.style.setProperty("--y",`${B.sy}px`)),N(F),C(),c.current=requestAnimationFrame(S)},w=F=>{if(!f.bounding)return;const{mouse:B}=f;B.x=F.pageX-f.bounding.left,B.y=F.pageY-f.bounding.top+window.scrollY,B.set||(B.sx=B.x,B.sy=B.y,B.lx=B.x,B.ly=B.y,B.set=!0)},L=()=>{j(),p()};return j(),p(),window.addEventListener("resize",L),window.addEventListener("mousemove",w),c.current=requestAnimationFrame(S),()=>{window.removeEventListener("resize",L),window.removeEventListener("mousemove",w),c.current&&cancelAnimationFrame(c.current)}},[]),e.jsxs("div",{ref:r,className:"waves-background",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",overflow:"hidden",pointerEvents:"none"},children:[e.jsx("div",{className:"waves-cursor",style:{position:"absolute",top:0,left:0,width:"0.5rem",height:"0.5rem",background:"hsl(var(--primary) / 0.3)",borderRadius:"50%",transform:"translate3d(calc(var(--x, -0.5rem) - 50%), calc(var(--y, 50%) - 50%), 0)",willChange:"transform",pointerEvents:"none"}}),e.jsx("svg",{ref:n,style:{display:"block",width:"100%",height:"100%"},children:e.jsx("style",{children:`
          path {
            fill: none;
            stroke: hsl(var(--primary) / 0.20);
            stroke-width: 1px;
          }
        `})})]})}async function Te(n,r){const c={...r,credentials:"include",headers:{"Content-Type":"application/json",...r?.headers}},d=await fetch(n,c);if(d.status===401)throw window.location.href="/auth",new Error("");return d}function Rt(){return{"Content-Type":"application/json"}}async function t0(){try{await fetch("/api/webui/auth/logout",{method:"POST",credentials:"include"})}catch(n){console.error(":",n)}window.location.href="/auth"}async function Qu(){try{return(await(await fetch("/api/webui/auth/check",{method:"GET",credentials:"include"})).json()).authenticated===!0}catch{return!1}}function s0(){const[n,r]=u.useState(""),[c,d]=u.useState(!1),[h,x]=u.useState(""),[f,j]=u.useState(!0),p=fa(),{enableWavesBackground:N,setEnableWavesBackground:v}=vg(),{theme:C,setTheme:S}=Gu();u.useEffect(()=>{(async()=>{try{await Qu()&&p({to:"/"})}catch{}finally{j(!1)}})()},[p]);const L=C==="system"?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":C,F=()=>{S(L==="dark"?"light":"dark")},B=async O=>{if(O.preventDefault(),x(""),!n.trim()){x(" Access Token");return}d(!0);try{const K=await fetch("/api/webui/auth/verify",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({token:n.trim()})}),H=await K.json();K.ok&&H.valid?H.is_first_setup?p({to:"/setup"}):p({to:"/"}):x(H.message||"Token ")}catch(K){console.error("Token :",K),x("")}finally{d(!1)}};return f?e.jsxs("div",{className:"relative flex min-h-screen items-center justify-center overflow-hidden bg-background p-4",children:[N&&e.jsx(ep,{}),e.jsx("div",{className:"text-muted-foreground",children:"..."})]}):e.jsxs("div",{className:"relative flex min-h-screen items-center justify-center overflow-hidden bg-background p-4",children:[N&&e.jsx(ep,{}),e.jsxs(Ye,{className:"relative z-10 w-full max-w-md shadow-2xl backdrop-blur-xl bg-card/80 border-border/50",children:[e.jsx("button",{onClick:F,className:"absolute right-4 top-4 rounded-lg p-2 hover:bg-accent transition-colors z-10 text-foreground",title:L==="dark"?"":"",children:L==="dark"?e.jsx(ag,{className:"h-5 w-5",strokeWidth:2.5,fill:"none"}):e.jsx(lg,{className:"h-5 w-5",strokeWidth:2.5,fill:"none"})}),e.jsxs(Nt,{className:"space-y-4 text-center",children:[e.jsx("div",{className:"mx-auto flex h-16 w-16 items-center justify-center rounded-2xl bg-primary/10",children:e.jsx(Gf,{className:"h-8 w-8 text-primary",strokeWidth:2,fill:"none"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(wt,{className:"text-2xl font-bold",children:" MaiBot"}),e.jsx(ns,{className:"text-base",children:" Access Token "})]})]}),e.jsx(kt,{children:e.jsxs("form",{onSubmit:B,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"token",className:"text-sm font-medium",children:"Access Token"}),e.jsxs("div",{className:"relative",children:[e.jsx(ng,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground",strokeWidth:2,fill:"none"}),e.jsx(ce,{id:"token",type:"password",placeholder:" Access Token",value:n,onChange:O=>r(O.target.value),className:Q("pl-10",h&&"border-red-500 focus-visible:ring-red-500"),disabled:c,autoFocus:!0,autoComplete:"off"})]})]}),h&&e.jsxs("div",{className:"flex items-center gap-2 rounded-md bg-red-50 p-3 text-sm text-red-600 dark:bg-red-950/50 dark:text-red-400",children:[e.jsx(Oa,{className:"h-4 w-4 flex-shrink-0",strokeWidth:2,fill:"none"}),e.jsx("span",{children:h})]}),e.jsx(b,{type:"submit",className:"w-full",disabled:c,children:c?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}),"..."]}):""}),e.jsxs(Jt,{children:[e.jsx($u,{asChild:!0,children:e.jsxs("button",{className:"w-full text-center text-sm text-primary hover:text-primary/80 transition-colors underline-offset-4 hover:underline flex items-center justify-center gap-1",children:[e.jsx(uy,{className:"h-4 w-4",strokeWidth:2,fill:"none"})," Token Token"]})}),e.jsxs($t,{className:"sm:max-w-md",children:[e.jsxs(Qt,{children:[e.jsxs(Yt,{className:"flex items-center gap-2",children:[e.jsx(Gf,{className:"h-5 w-5 text-primary",strokeWidth:2,fill:"none"})," Access Token"]}),e.jsx(ds,{children:"Access Token  MaiBot WebUI "})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"rounded-lg border bg-muted/50 p-4 space-y-2",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(my,{className:"h-5 w-5 text-primary flex-shrink-0 mt-0.5",strokeWidth:2,fill:"none"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("h4",{className:"font-semibold text-sm",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:" MaiBot  WebUI Access Token"}),e.jsxs("div",{className:"rounded bg-background p-2 font-mono text-xs",children:[e.jsx("p",{className:"text-muted-foreground",children:" WebUI Access Token: abc123..."}),e.jsx("p",{className:"text-muted-foreground",children:"  Token  WebUI"})]})]})]})}),e.jsx("div",{className:"rounded-lg border bg-muted/50 p-4 space-y-2",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Da,{className:"h-5 w-5 text-primary flex-shrink-0 mt-0.5",strokeWidth:2,fill:"none"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("h4",{className:"font-semibold text-sm",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Token "}),e.jsx("div",{className:"rounded bg-background p-2 font-mono text-xs break-all",children:e.jsx("code",{className:"text-primary",children:"data/webui.json"})}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[" ",e.jsx("code",{className:"px-1 py-0.5 bg-background rounded",children:"access_token"})," "]})]})]})}),e.jsx("div",{className:"rounded-lg border border-yellow-200 dark:border-yellow-900 bg-yellow-50 dark:bg-yellow-950/30 p-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Oa,{className:"h-4 w-4 text-yellow-600 dark:text-yellow-500 flex-shrink-0 mt-0.5",strokeWidth:2,fill:"none"}),e.jsxs("div",{className:"text-sm text-yellow-800 dark:text-yellow-300 space-y-1",children:[e.jsx("p",{className:"font-semibold",children:""}),e.jsxs("ul",{className:"list-disc list-inside space-y-0.5 text-xs",children:[e.jsx("li",{children:" Token"}),e.jsx("li",{children:" Token"})]})]})]})})]})]})]}),e.jsxs(bt,{children:[e.jsx(es,{asChild:!0,children:e.jsxs("button",{className:"w-full text-center text-sm text-muted-foreground hover:text-foreground transition-colors underline-offset-4 hover:underline flex items-center justify-center gap-1",children:[e.jsx(ln,{className:"h-4 w-4",strokeWidth:2,fill:"none"}),""]})}),e.jsxs(dt,{children:[e.jsxs(ut,{children:[e.jsxs(ht,{className:"flex items-center gap-2",children:[e.jsx(ln,{className:"h-5 w-5 text-primary",strokeWidth:2,fill:"none"}),""]}),e.jsx(xt,{children:""})]}),e.jsx("div",{className:"rounded-lg border bg-muted/50 p-4 space-y-2",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:""})}),e.jsxs(mt,{children:[e.jsx(pt,{children:""}),e.jsx(ft,{onClick:()=>v(!1),children:""})]})]})]})]})})]}),e.jsx("div",{className:"absolute bottom-4 left-0 right-0 text-center text-xs text-muted-foreground",children:e.jsx("p",{children:BN})})]})}const Ft=u.forwardRef(({className:n,...r},c)=>e.jsx("textarea",{className:Q("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:c,...r}));Ft.displayName="Textarea";const xr=u.forwardRef(({className:n,orientation:r="horizontal",decorative:c=!0,...d},h)=>e.jsx(Ap,{ref:h,decorative:c,orientation:r,className:Q("shrink-0 bg-border",r==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",n),...d}));xr.displayName=Ap.displayName;function a0({config:n,onChange:r}){const c=h=>{h.trim()&&!n.alias_names.includes(h.trim())&&r({...n,alias_names:[...n.alias_names,h.trim()]})},d=h=>{r({...n,alias_names:n.alias_names.filter((x,f)=>f!==h)})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(y,{htmlFor:"qq_account",children:"QQ *"}),e.jsx(ce,{id:"qq_account",type:"number",placeholder:"QQ",value:n.qq_account||"",onChange:h=>r({...n,qq_account:Number(h.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"QQ"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(y,{htmlFor:"nickname",children:" *"}),e.jsx(ce,{id:"nickname",placeholder:"",value:n.nickname,onChange:h=>r({...n,nickname:h.target.value})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(y,{children:""}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:n.alias_names.map((h,x)=>e.jsxs(Je,{variant:"secondary",className:"gap-1",children:[h,e.jsx("button",{type:"button",onClick:()=>d(x),className:"ml-1 hover:text-destructive",children:e.jsx(on,{className:"h-3 w-3"})})]},x))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ce,{id:"alias_input",placeholder:"",onKeyPress:h=>{h.key==="Enter"&&(c(h.target.value),h.target.value="")}}),e.jsx(b,{type:"button",variant:"outline",onClick:()=>{const h=document.getElementById("alias_input");h&&(c(h.value),h.value="")},children:""})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})]})}function l0({config:n,onChange:r}){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(y,{htmlFor:"personality",children:" *"}),e.jsx(Ft,{id:"personality",placeholder:"120",value:n.personality,onChange:c=>r({...n,personality:c.target.value}),rows:3}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(y,{htmlFor:"reply_style",children:" *"}),e.jsx(Ft,{id:"reply_style",placeholder:"",value:n.reply_style,onChange:c=>r({...n,reply_style:c.target.value}),rows:3}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(y,{htmlFor:"interest",children:" *"}),e.jsx(Ft,{id:"interest",placeholder:"",value:n.interest,onChange:c=>r({...n,interest:c.target.value}),rows:2}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsx(xr,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(y,{htmlFor:"plan_style",children:" *"}),e.jsx(Ft,{id:"plan_style",placeholder:"",value:n.plan_style,onChange:c=>r({...n,plan_style:c.target.value}),rows:4}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(y,{htmlFor:"private_plan_style",children:" *"}),e.jsx(Ft,{id:"private_plan_style",placeholder:"",value:n.private_plan_style,onChange:c=>r({...n,private_plan_style:c.target.value}),rows:3}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})]})}function n0({config:n,onChange:r}){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(y,{htmlFor:"emoji_chance",children:""}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[(n.emoji_chance*100).toFixed(0),"%"]})]}),e.jsx(ce,{id:"emoji_chance",type:"range",min:"0",max:"1",step:"0.1",value:n.emoji_chance,onChange:c=>r({...n,emoji_chance:Number(c.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(y,{htmlFor:"max_reg_num",children:""}),e.jsx(ce,{id:"max_reg_num",type:"number",min:"1",max:"200",value:n.max_reg_num,onChange:c=>r({...n,max_reg_num:Number(c.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(y,{htmlFor:"do_replace",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsx(Qe,{id:"do_replace",checked:n.do_replace,onCheckedChange:c=>r({...n,do_replace:c})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(y,{htmlFor:"check_interval",children:""}),e.jsx(ce,{id:"check_interval",type:"number",min:"1",max:"120",value:n.check_interval,onChange:c=>r({...n,check_interval:Number(c.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsx(xr,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(y,{htmlFor:"steal_emoji",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsx(Qe,{id:"steal_emoji",checked:n.steal_emoji,onCheckedChange:c=>r({...n,steal_emoji:c})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(y,{htmlFor:"content_filtration",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsx(Qe,{id:"content_filtration",checked:n.content_filtration,onCheckedChange:c=>r({...n,content_filtration:c})})]}),n.content_filtration&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(y,{htmlFor:"filtration_prompt",children:""}),e.jsx(ce,{id:"filtration_prompt",placeholder:"",value:n.filtration_prompt,onChange:c=>r({...n,filtration_prompt:c.target.value})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})]})}function i0({config:n,onChange:r}){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(y,{htmlFor:"enable_tool",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsx(Qe,{id:"enable_tool",checked:n.enable_tool,onCheckedChange:c=>r({...n,enable_tool:c})})]}),e.jsx(xr,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(y,{htmlFor:"enable_mood",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsx(Qe,{id:"enable_mood",checked:n.enable_mood,onCheckedChange:c=>r({...n,enable_mood:c})})]}),n.enable_mood&&e.jsxs("div",{className:"ml-6 space-y-6 border-l-2 border-primary/20 pl-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(y,{htmlFor:"mood_update_threshold",children:""}),e.jsx(ce,{id:"mood_update_threshold",type:"number",min:"0.1",max:"10",step:"0.1",value:n.mood_update_threshold||1,onChange:c=>r({...n,mood_update_threshold:Number(c.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(y,{htmlFor:"emotion_style",children:""}),e.jsx(Ft,{id:"emotion_style",placeholder:"",value:n.emotion_style||"",onChange:c=>r({...n,emotion_style:c.target.value}),rows:2}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})]}),e.jsx(xr,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(y,{htmlFor:"all_global",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsx(Qe,{id:"all_global",checked:n.all_global,onCheckedChange:c=>r({...n,all_global:c})})]})]})}function r0({config:n,onChange:r}){const[c,d]=u.useState(!1);return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"rounded-lg bg-blue-50 dark:bg-blue-950/30 border border-blue-200 dark:border-blue-800 p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-0.5",children:e.jsx("svg",{className:"h-5 w-5 text-blue-600 dark:text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{className:"flex-1 text-sm",children:[e.jsx("p",{className:"font-medium text-blue-900 dark:text-blue-100 mb-1",children:" (SiliconFlow)"}),e.jsx("p",{className:"text-blue-700 dark:text-blue-300 mb-2",children:" DeepSeek V3Qwen  API Key "}),e.jsxs("a",{href:"https://cloud.siliconflow.cn",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-blue-600 dark:text-blue-400 hover:underline font-medium",children:[" API Key",e.jsx(Qc,{className:"h-3 w-3"})]})]})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(y,{htmlFor:"siliconflow_api_key",children:"SiliconFlow API Key *"}),e.jsxs("div",{className:"relative",children:[e.jsx(ce,{id:"siliconflow_api_key",type:c?"text":"password",placeholder:"sk-...",value:n.api_key,onChange:h=>r({api_key:h.target.value}),className:"font-mono pr-10"}),e.jsx(b,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 hover:bg-transparent",onClick:()=>d(!c),children:c?e.jsx(or,{className:"h-4 w-4 text-muted-foreground"}):e.jsx(Ws,{className:"h-4 w-4 text-muted-foreground"})})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" API "})]}),e.jsxs("div",{className:"rounded-lg bg-muted/50 p-4 text-sm space-y-2",children:[e.jsx("p",{className:"font-medium",children:""}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-muted-foreground ml-2",children:[e.jsx("li",{children:"DeepSeek V3 - "}),e.jsx("li",{children:"Qwen3 30B - "}),e.jsx("li",{children:"Qwen3 VL 30B - "}),e.jsx("li",{children:"SenseVoice - "}),e.jsx("li",{children:"BGE-M3 - "}),e.jsx("li",{children:" (LPMM)"})]})]}),e.jsx("div",{className:"rounded-lg border border-amber-200 dark:border-amber-800 bg-amber-50 dark:bg-amber-950/30 p-4",children:e.jsxs("p",{className:"text-sm text-amber-900 dark:text-amber-100",children:[e.jsx("span",{className:"font-medium",children:" "}),'"  " API ']})})]})}async function c0(){const n=await Te("/api/webui/config/bot",{method:"GET",headers:Rt()});if(!n.ok)throw new Error("Bot");const c=(await n.json()).config.bot||{};return{qq_account:c.qq_account||0,nickname:c.nickname||"",alias_names:c.alias_names||[]}}async function o0(){const n=await Te("/api/webui/config/bot",{method:"GET",headers:Rt()});if(!n.ok)throw new Error("");const c=(await n.json()).config.personality||{};return{personality:c.personality||"",reply_style:c.reply_style||"",interest:c.interest||"",plan_style:c.plan_style||"",private_plan_style:c.private_plan_style||""}}async function d0(){const n=await Te("/api/webui/config/bot",{method:"GET",headers:Rt()});if(!n.ok)throw new Error("");const c=(await n.json()).config.emoji||{};return{emoji_chance:c.emoji_chance??.4,max_reg_num:c.max_reg_num??40,do_replace:c.do_replace??!0,check_interval:c.check_interval??10,steal_emoji:c.steal_emoji??!0,content_filtration:c.content_filtration??!1,filtration_prompt:c.filtration_prompt||""}}async function u0(){const n=await Te("/api/webui/config/bot",{method:"GET",headers:Rt()});if(!n.ok)throw new Error("");const c=(await n.json()).config,d=c.tool||{},h=c.mood||{},x=c.jargon||{};return{enable_tool:d.enable_tool??!0,enable_mood:h.enable_mood??!1,mood_update_threshold:h.mood_update_threshold,emotion_style:h.emotion_style,all_global:x.all_global??!0}}async function m0(){const n=await Te("/api/webui/config/model",{method:"GET",headers:Rt()});if(!n.ok)throw new Error("");return{api_key:((await n.json()).config.api_providers||[]).find(x=>x.name==="SiliconFlow")?.api_key||""}}async function h0(n){const r=await Te("/api/webui/config/bot/section/bot",{method:"POST",headers:Rt(),body:JSON.stringify(n)});if(!r.ok){const c=await r.json();throw new Error(c.detail||"Bot")}return await r.json()}async function x0(n){const r=await Te("/api/webui/config/bot/section/personality",{method:"POST",headers:Rt(),body:JSON.stringify(n)});if(!r.ok){const c=await r.json();throw new Error(c.detail||"")}return await r.json()}async function f0(n){const r=await Te("/api/webui/config/bot/section/emoji",{method:"POST",headers:Rt(),body:JSON.stringify(n)});if(!r.ok){const c=await r.json();throw new Error(c.detail||"")}return await r.json()}async function p0(n){const r=[];r.push(Te("/api/webui/config/bot/section/tool",{method:"POST",headers:Rt(),body:JSON.stringify({enable_tool:n.enable_tool})})),r.push(Te("/api/webui/config/bot/section/jargon",{method:"POST",headers:Rt(),body:JSON.stringify({all_global:n.all_global})}));const c={enable_mood:n.enable_mood};n.enable_mood&&(c.mood_update_threshold=n.mood_update_threshold||1,c.emotion_style=n.emotion_style||""),r.push(Te("/api/webui/config/bot/section/mood",{method:"POST",headers:Rt(),body:JSON.stringify(c)}));const d=await Promise.all(r);for(const h of d)if(!h.ok){const x=await h.json();throw new Error(x.detail||"")}return{success:!0}}async function g0(n){const r=await Te("/api/webui/config/model",{method:"GET",headers:Rt()});if(!r.ok)throw new Error("");const d=(await r.json()).config,h=d.api_providers||[],x=h.findIndex(p=>p.name==="SiliconFlow");x>=0?h[x]={...h[x],api_key:n.api_key}:h.push({name:"SiliconFlow",base_url:"https://api.siliconflow.cn/v1",api_key:n.api_key,client_type:"openai",max_retry:3,timeout:120,retry_interval:5});const f={...d,api_providers:h},j=await Te("/api/webui/config/model",{method:"POST",headers:Rt(),body:JSON.stringify(f)});if(!j.ok){const p=await j.json();throw new Error(p.detail||"")}return await j.json()}async function tp(){const n=localStorage.getItem("access-token"),r=await Te("/api/webui/setup/complete",{method:"POST",headers:{Authorization:`Bearer ${n}`}});if(!r.ok){const c=await r.json();throw new Error(c.message||"")}return await r.json()}async function so(){const n=await Te("/api/webui/system/restart",{method:"POST",headers:Rt()});if(!n.ok){const r=await n.json();throw new Error(r.detail||"")}return await n.json()}async function j0(){const n=await Te("/api/webui/system/status",{method:"GET",headers:Rt()});if(!n.ok){const r=await n.json();throw new Error(r.detail||"")}return await n.json()}function v0(){const n=fa(),{toast:r}=Xt(),[c,d]=u.useState(0),[h,x]=u.useState(!1),[f,j]=u.useState(!1),[p,N]=u.useState(!0),[v,C]=u.useState({qq_account:0,nickname:"",alias_names:[]}),[S,w]=u.useState({personality:"",reply_style:"",interest:"",plan_style:`1.****action****
2.
3.
4.
5.`,private_plan_style:`1.****action****
2.
3.`}),[L,F]=u.useState({emoji_chance:.4,max_reg_num:40,do_replace:!0,check_interval:10,steal_emoji:!0,content_filtration:!1,filtration_prompt:""}),[B,O]=u.useState({enable_tool:!0,enable_mood:!1,mood_update_threshold:1,emotion_style:"",all_global:!0}),[K,H]=u.useState({api_key:""}),[z,V]=u.useState(!1),[Y,E]=u.useState(""),R=[{id:"bot-basic",title:"Bot",description:"",icon:ar},{id:"personality",title:"",description:"",icon:Ic},{id:"emoji",title:"",description:"",icon:Bu},{id:"other",title:"",description:"",icon:ai},{id:"siliconflow",title:"API",description:"API",icon:ng}],ne=(c+1)/R.length*100;u.useEffect(()=>{(async()=>{try{N(!0);const[X,T,te,_,me]=await Promise.all([c0(),o0(),d0(),u0(),m0()]);C(X),w(T),F(te),O(_),H(me)}catch(X){r({title:"",description:X instanceof Error?X.message:"",variant:"destructive"})}finally{N(!1)}})()},[r]);const fe=async()=>{j(!0);try{switch(c){case 0:await h0(v);break;case 1:await x0(S);break;case 2:await f0(L);break;case 3:await p0(B);break;case 4:await g0(K);break}return r({title:"",description:`${R[c].title}`}),!0}catch(A){return r({title:"",description:A instanceof Error?A.message:"",variant:"destructive"}),!1}finally{j(!1)}},Ce=async()=>{await fe()&&c<R.length-1&&d(c+1)},we=()=>{c>0&&d(c-1)},pe=async()=>{x(!0),V(!0);try{if(E("API..."),!await fe()){x(!1),V(!1);return}E("..."),await tp(),E("..."),await so(),r({title:"",description:"..."}),E("...");const X=60;let T=0,te=!1;for(;T<X&&!te;){await new Promise(_=>setTimeout(_,1e3));try{(await j0()).running&&(te=!0,E("..."))}catch{T++}}if(!te)throw new Error(",");setTimeout(()=>{n({to:"/"})},1e3)}catch(A){V(!1),r({title:"",description:A instanceof Error?A.message:"",variant:"destructive"})}finally{x(!1)}},Ne=async()=>{try{await tp(),n({to:"/"})}catch(A){r({title:"",description:A instanceof Error?A.message:"",variant:"destructive"})}},be=()=>{switch(c){case 0:return e.jsx(a0,{config:v,onChange:C});case 1:return e.jsx(l0,{config:S,onChange:w});case 2:return e.jsx(n0,{config:L,onChange:F});case 3:return e.jsx(i0,{config:B,onChange:O});case 4:return e.jsx(r0,{config:K,onChange:H});default:return null}};return e.jsxs("div",{className:"relative flex min-h-screen flex-col items-center justify-center overflow-hidden bg-gradient-to-br from-primary/5 via-background to-secondary/5 p-4 md:p-6",children:[z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-background/80 backdrop-blur-sm",children:e.jsxs("div",{className:"mx-auto flex max-w-md flex-col items-center space-y-6 rounded-lg border bg-card p-8 text-center shadow-lg",children:[e.jsx("div",{className:"flex h-20 w-20 items-center justify-center rounded-full bg-primary/10",children:e.jsx(Ss,{className:"h-10 w-10 animate-spin text-primary"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-2xl font-bold",children:""}),e.jsx("p",{className:"text-muted-foreground",children:Y})]}),e.jsx("div",{className:"w-full",children:e.jsx("div",{className:"h-2 w-full overflow-hidden rounded-full bg-secondary",children:e.jsx("div",{className:"h-full w-full animate-pulse bg-primary",style:{animation:"pulse 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite"}})})}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"..."})]})}),e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute left-1/4 top-1/4 h-64 w-64 md:h-96 md:w-96 rounded-full bg-primary/5 blur-3xl"}),e.jsx("div",{className:"absolute right-1/4 bottom-1/4 h-64 w-64 md:h-96 md:w-96 rounded-full bg-secondary/5 blur-3xl"})]}),p?e.jsxs("div",{className:"relative z-10 text-center",children:[e.jsx("div",{className:"mx-auto mb-4 flex h-16 w-16 items-center justify-center",children:e.jsx("div",{className:"h-12 w-12 animate-spin rounded-full border-4 border-primary border-t-transparent"})}),e.jsx("p",{className:"text-lg font-medium",children:"..."}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:""})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative z-10 w-full max-w-4xl",children:[e.jsxs("div",{className:"mb-6 md:mb-8 text-center",children:[e.jsx("div",{className:"mx-auto mb-4 flex h-12 w-12 md:h-16 md:w-16 items-center justify-center rounded-2xl bg-primary/10",children:e.jsx(hy,{className:"h-6 w-6 md:h-8 md:w-8 text-primary",strokeWidth:2,fill:"none"})}),e.jsx("h1",{className:"mb-2 text-2xl md:text-3xl font-bold",children:""}),e.jsxs("p",{className:"text-sm md:text-base text-muted-foreground",children:[" ",Fu," "]})]}),e.jsxs("div",{className:"mb-6 md:mb-8",children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between text-xs md:text-sm",children:[e.jsxs("span",{className:"text-muted-foreground",children:[" ",c+1," / ",R.length]}),e.jsxs("span",{className:"font-medium text-primary",children:[Math.round(ne),"%"]})]}),e.jsx(yr,{value:ne,className:"h-2"})]}),e.jsx("div",{className:"mb-6 md:mb-8 flex justify-between",children:R.map((A,X)=>{const T=A.icon;return e.jsxs("div",{className:Q("flex flex-1 flex-col items-center gap-1 md:gap-2",X<R.length-1&&"relative"),children:[X<R.length-1&&e.jsx("div",{className:Q("absolute left-1/2 top-3 md:top-4 h-0.5 w-full",X<c?"bg-primary":"bg-border")}),e.jsx("div",{className:Q("relative z-10 flex h-6 w-6 md:h-8 md:w-8 items-center justify-center rounded-full border-2 transition-all",X===c||X<c?"border-primary bg-primary text-primary-foreground":"border-border bg-background text-muted-foreground"),children:X<c?e.jsx(ha,{className:"h-3 w-3 md:h-4 md:w-4",strokeWidth:2.5,fill:"none"}):e.jsx(T,{className:"h-3 w-3 md:h-4 md:w-4"})}),e.jsx("span",{className:Q("text-[10px] md:text-xs text-center max-w-[60px] md:max-w-none truncate md:whitespace-normal",X===c?"font-medium text-foreground":"text-muted-foreground"),title:A.title,children:A.title})]},A.id)})}),e.jsx(Ye,{className:"mb-6 md:mb-8 shadow-lg",children:e.jsx(kt,{className:"p-4 md:p-8",children:e.jsxs("div",{className:"min-h-[300px] md:min-h-[400px]",children:[e.jsxs("div",{className:"mb-4 md:mb-6",children:[e.jsx("h2",{className:"mb-2 text-xl md:text-2xl font-semibold",children:R[c].title}),e.jsx("p",{className:"text-sm md:text-base text-muted-foreground",children:R[c].description})]}),e.jsx(st,{className:"h-[400px] md:h-[500px]",children:e.jsx("div",{className:"pr-2",children:be()})})]})})}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-3 sm:gap-0",children:[e.jsx(b,{variant:"outline",onClick:we,disabled:c===0||f,className:"w-full sm:w-auto order-2 sm:order-1",children:""}),e.jsxs("div",{className:"flex gap-2 w-full sm:w-auto order-1 sm:order-2",children:[e.jsxs(bt,{children:[e.jsx(es,{asChild:!0,children:e.jsxs(b,{variant:"ghost",className:"flex-1 sm:flex-none gap-2",disabled:f||h,children:[e.jsx(xy,{className:"h-4 w-4",strokeWidth:2,fill:"none"}),""]})}),e.jsxs(dt,{children:[e.jsxs(ut,{children:[e.jsx(ht,{children:""}),e.jsx(xt,{children:""})]}),e.jsxs(mt,{children:[e.jsx(pt,{children:""}),e.jsx(ft,{onClick:Ne,children:""})]})]})]}),c===R.length-1?e.jsx(b,{onClick:pe,disabled:h||f,className:"flex-1 sm:flex-none",children:h||f?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}),f?"...":"..."]}):e.jsxs(e.Fragment,{children:["",e.jsx(ha,{className:"ml-2 h-4 w-4",strokeWidth:2,fill:"none"})]})}):e.jsx(b,{onClick:Ce,disabled:f,className:"flex-1 sm:flex-none",children:f?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}),"..."]}):e.jsxs(e.Fragment,{children:["",e.jsx(fy,{className:"ml-2 h-4 w-4",strokeWidth:2,fill:"none"})]})})]})]})]}),e.jsx("div",{className:"relative z-10 mt-6 md:mt-8 text-center text-xs text-muted-foreground",children:e.jsx("p",{children:""})})]})]})}function wg(){const n=fa();return e.jsx("div",{className:"flex min-h-screen items-center justify-center bg-background p-4",children:e.jsxs("div",{className:"w-full max-w-2xl text-center",children:[e.jsxs("div",{className:"relative mb-8",children:[e.jsx("h1",{className:"text-[150px] font-black leading-none text-primary/10 select-none sm:text-[200px]",children:"404"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx(zs,{className:"h-20 w-20 text-primary/30 sm:h-24 sm:w-24"})})]}),e.jsxs("div",{className:"space-y-4 mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground sm:text-3xl",children:""}),e.jsx("p",{className:"text-base text-muted-foreground sm:text-lg max-w-md mx-auto",children:" URL "})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[e.jsxs(b,{size:"lg",onClick:()=>n({to:"/"}),className:"gap-2 w-full sm:w-auto",children:[e.jsx(to,{className:"h-4 w-4"}),""]}),e.jsxs(b,{size:"lg",variant:"outline",onClick:()=>window.history.back(),className:"gap-2 w-full sm:w-auto",children:[e.jsx(ti,{className:"h-4 w-4"}),""]})]}),e.jsx("div",{className:"mt-12 pt-8 border-t border-border",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:""})})]})})}const qe=Jb,Ge=Ib,Be=u.forwardRef(({className:n,children:r,...c},d)=>e.jsxs(Gp,{ref:d,className:Q("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",n),...c,children:[r,e.jsx(Qb,{asChild:!0,children:e.jsx(Rl,{className:"h-4 w-4 opacity-50"})})]}));Be.displayName=Gp.displayName;const _g=u.forwardRef(({className:n,...r},c)=>e.jsx(Vp,{ref:c,className:Q("flex cursor-default items-center justify-center py-1",n),...r,children:e.jsx(ur,{className:"h-4 w-4"})}));_g.displayName=Vp.displayName;const Sg=u.forwardRef(({className:n,...r},c)=>e.jsx(Fp,{ref:c,className:Q("flex cursor-default items-center justify-center py-1",n),...r,children:e.jsx(Rl,{className:"h-4 w-4"})}));Sg.displayName=Fp.displayName;const He=u.forwardRef(({className:n,children:r,position:c="popper",...d},h)=>e.jsx(Yb,{children:e.jsxs($p,{ref:h,className:Q("relative z-[100] max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-hidden rounded-md border border-border bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",c==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:c,...d,children:[e.jsx(_g,{}),e.jsx(Xb,{className:Q("p-1",c==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),e.jsx(Sg,{})]})}));He.displayName=$p.displayName;const b0=u.forwardRef(({className:n,...r},c)=>e.jsx(Qp,{ref:c,className:Q("px-2 py-1.5 text-sm font-semibold",n),...r}));b0.displayName=Qp.displayName;const ie=u.forwardRef(({className:n,children:r,...c},d)=>e.jsxs(Yp,{ref:d,className:Q("relative flex w-full cursor-default select-none items-center rounded-sm py-2 pl-2 pr-8 text-sm outline-none bg-white dark:bg-gray-900 hover:bg-gray-100 dark:hover:bg-gray-800 focus:bg-gray-100 dark:focus:bg-gray-800 data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...c,children:[e.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Kb,{children:e.jsx(Na,{className:"h-4 w-4"})})}),e.jsx(Zb,{children:r})]}));ie.displayName=Yp.displayName;const y0=u.forwardRef(({className:n,...r},c)=>e.jsx(Xp,{ref:c,className:Q("-mx-1 my-1 h-px bg-muted",n),...r}));y0.displayName=Xp.displayName;const Ua=kb,Ba=Tb,_a=u.forwardRef(({className:n,align:r="center",sideOffset:c=4,...d},h)=>e.jsx(Cb,{children:e.jsx(Mp,{ref:h,align:r,sideOffset:c,className:Q("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",n),...d})}));_a.displayName=Mp.displayName;const Ul="/api/webui/config";async function sp(){const r=await(await Te(`${Ul}/bot`)).json();if(!r.success)throw new Error("");return r.config}async function ei(){const r=await(await Te(`${Ul}/model`)).json();if(!r.success)throw new Error("");return r.config}async function ap(n){const c=await(await Te(`${Ul}/bot`,{method:"POST",body:JSON.stringify(n)})).json();if(!c.success)throw new Error(c.message||"")}async function N0(){const r=await(await Te(`${Ul}/bot/raw`)).json();if(!r.success)throw new Error("");return r.content}async function w0(n){const c=await(await Te(`${Ul}/bot/raw`,{method:"POST",body:JSON.stringify({raw_content:n})})).json();if(!c.success)throw new Error(c.message||"")}async function eo(n){const c=await(await Te(`${Ul}/model`,{method:"POST",body:JSON.stringify(n)})).json();if(!c.success)throw new Error(c.message||"")}async function _0(n,r){const d=await(await Te(`${Ul}/bot/section/${n}`,{method:"POST",body:JSON.stringify(r)})).json();if(!d.success)throw new Error(d.message||` ${n} `)}async function Ou(n,r){const d=await(await Te(`${Ul}/model/section/${n}`,{method:"POST",body:JSON.stringify(r)})).json();if(!d.success)throw new Error(d.message||` ${n} `)}async function S0(n,r="openai",c="/models"){const d=new URLSearchParams({provider_name:n,parser:r,endpoint:c}),h=await Te(`/api/webui/models/list?${d}`);if(!h.ok){const f=await h.json().catch(()=>({}));throw new Error(f.detail||` (${h.status})`)}const x=await h.json();if(!x.success)throw new Error("");return x.models}async function C0(n){const r=new URLSearchParams({provider_name:n}),c=await Te(`/api/webui/models/test-connection-by-name?${r}`,{method:"POST"});if(!c.ok){const d=await c.json().catch(()=>({}));throw new Error(d.detail||` (${c.status})`)}return await c.json()}const k0=si("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),cl=u.forwardRef(({className:n,variant:r,...c},d)=>e.jsx("div",{ref:d,role:"alert",className:Q(k0({variant:r}),n),...c}));cl.displayName="Alert";const T0=u.forwardRef(({className:n,...r},c)=>e.jsx("h5",{ref:c,className:Q("mb-1 font-medium leading-none tracking-tight",n),...r}));T0.displayName="AlertTitle";const ol=u.forwardRef(({className:n,...r},c)=>e.jsx("div",{ref:c,className:Q("text-sm [&_p]:leading-relaxed",n),...r}));ol.displayName="AlertDescription";function Yu({onRestartComplete:n,onRestartFailed:r}){const[c,d]=u.useState(0),[h,x]=u.useState("restarting"),[f,j]=u.useState(0),[p,N]=u.useState(0);u.useEffect(()=>{const S=setInterval(()=>{d(F=>F>=90?F:F+1)},200),w=setInterval(()=>{j(F=>F+1)},1e3),L=setTimeout(()=>{x("checking"),v()},3e3);return()=>{clearInterval(S),clearInterval(w),clearTimeout(L)}},[]);const v=()=>{const w=async()=>{try{if(N(F=>F+1),(await fetch("/api/webui/system/status",{method:"GET",headers:{"Content-Type":"application/json"},signal:AbortSignal.timeout(3e3)})).ok)d(100),x("success"),setTimeout(()=>{n?.()},1500);else throw new Error("Status check failed")}catch{p<60?setTimeout(w,2e3):(x("failed"),r?.())}};w()},C=S=>{const w=Math.floor(S/60),L=S%60;return`${w}:${L.toString().padStart(2,"0")}`};return e.jsx("div",{className:"fixed inset-0 bg-background/95 backdrop-blur-sm z-50 flex items-center justify-center",children:e.jsxs("div",{className:"max-w-md w-full mx-4 space-y-8",children:[e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[h==="restarting"&&e.jsxs(e.Fragment,{children:[e.jsx(Ss,{className:"h-16 w-16 text-primary animate-spin"}),e.jsx("h2",{className:"text-2xl font-bold",children:""}),e.jsx("p",{className:"text-muted-foreground text-center",children:"..."})]}),h==="checking"&&e.jsxs(e.Fragment,{children:[e.jsx(Ss,{className:"h-16 w-16 text-primary animate-spin"}),e.jsx("h2",{className:"text-2xl font-bold",children:""}),e.jsxs("p",{className:"text-muted-foreground text-center",children:["... ( ",p,"/60)"]})]}),h==="success"&&e.jsxs(e.Fragment,{children:[e.jsx(ha,{className:"h-16 w-16 text-green-500"}),e.jsx("h2",{className:"text-2xl font-bold",children:""}),e.jsx("p",{className:"text-muted-foreground text-center",children:"..."})]}),h==="failed"&&e.jsxs(e.Fragment,{children:[e.jsx(Oa,{className:"h-16 w-16 text-destructive"}),e.jsx("h2",{className:"text-2xl font-bold",children:""}),e.jsx("p",{className:"text-muted-foreground text-center",children:""})]})]}),h!=="failed"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(yr,{value:c,className:"h-2"}),e.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground",children:[e.jsxs("span",{children:[c,"%"]}),e.jsxs("span",{children:[": ",C(f)]})]})]}),e.jsx("div",{className:"bg-muted/50 rounded-lg p-4 space-y-2",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:[h==="restarting"&&" ...",h==="checking"&&" ...",h==="success"&&" ",h==="failed"&&" "]})}),h==="failed"&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>window.location.reload(),className:"flex-1 px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90",children:""}),e.jsx("button",{onClick:()=>{x("checking"),N(0),v()},className:"flex-1 px-4 py-2 bg-secondary text-secondary-foreground rounded-md hover:bg-secondary/90",children:""})]})]})})}const E0={name:"toml",startState:function(){return{inString:!1,stringType:"",lhs:!0,inArray:0}},token:function(n,r){let c;if(!r.inString&&(c=n.match(/^('''|"""|'|")/))&&(r.stringType=c[0],r.inString=!0),n.sol()&&!r.inString&&r.inArray===0&&(r.lhs=!0),r.inString){for(;r.inString;)if(n.match(r.stringType))r.inString=!1;else if(n.peek()==="\\")n.next(),n.next();else{if(n.eol())break;n.match(/^.[^\\\"\']*/)}return r.lhs?"property":"string"}else{if(r.inArray&&n.peek()==="]")return n.next(),r.inArray--,"bracket";if(r.lhs&&n.peek()==="["&&n.skipTo("]"))return n.next(),n.peek()==="]"&&n.next(),"atom";if(n.peek()==="#")return n.skipToEnd(),"comment";if(n.eatSpace())return null;if(r.lhs&&n.eatWhile(function(d){return d!="="&&d!=" "}))return"property";if(r.lhs&&n.peek()==="=")return n.next(),r.lhs=!1,null;if(!r.lhs&&n.match(/^\d\d\d\d[\d\-\:\.T]*Z/))return"atom";if(!r.lhs&&(n.match("true")||n.match("false")))return"atom";if(!r.lhs&&n.peek()==="[")return r.inArray++,n.next(),"bracket";if(!r.lhs&&n.match(/^\-?\d+(?:\.\d+)?/))return"number";n.eatSpace()||n.next()}return null},languageData:{commentTokens:{line:"#"}}},z0={python:[By()],json:[Hy(),qy()],toml:[Uy.define(E0)],text:[]};function A0({value:n,onChange:r,language:c="text",readOnly:d=!1,height:h="400px",minHeight:x,maxHeight:f,placeholder:j,theme:p="dark",className:N=""}){const[v,C]=u.useState(!1);if(u.useEffect(()=>{C(!0)},[]),!v)return e.jsx("div",{className:`rounded-md border bg-muted animate-pulse ${N}`,style:{height:h,minHeight:x,maxHeight:f}});const S=[...z0[c]||[],Qf.lineWrapping];return d&&S.push(Qf.editable.of(!1)),e.jsx("div",{className:`rounded-md overflow-hidden border ${N}`,children:e.jsx(Gy,{value:n,height:h,minHeight:x,maxHeight:f,theme:p==="dark"?Vy:void 0,extensions:S,onChange:r,placeholder:j,basicSetup:{lineNumbers:!0,highlightActiveLineGutter:!0,highlightSpecialChars:!0,history:!0,foldGutter:!0,drawSelection:!0,dropCursor:!0,allowMultipleSelections:!0,indentOnInput:!0,syntaxHighlighting:!0,bracketMatching:!0,closeBrackets:!0,autocompletion:!0,rectangularSelection:!0,crosshairCursor:!0,highlightActiveLine:!0,highlightSelectionMatches:!0,closeBracketsKeymap:!0,defaultKeymap:!0,searchKeymap:!0,historyKeymap:!0,foldKeymap:!0,completionKeymap:!0,lintKeymap:!0}})})}function M0(){const[n,r]=u.useState(!0),[c,d]=u.useState(!1),[h,x]=u.useState(!1),[f,j]=u.useState(!1),[p,N]=u.useState(!1),[v,C]=u.useState(!1),[S,w]=u.useState("visual"),[L,F]=u.useState(""),[B,O]=u.useState(!1),{toast:K}=Xt(),[H,z]=u.useState(null),[V,Y]=u.useState(null),[E,R]=u.useState(null),[ne,fe]=u.useState(null),[Ce,we]=u.useState(null),[pe,Ne]=u.useState(null),[be,A]=u.useState(null),[X,T]=u.useState(null),[te,_]=u.useState(null),[me,oe]=u.useState(null),[ae,xe]=u.useState(null),[ve,de]=u.useState(null),[G,W]=u.useState(null),[U,ee]=u.useState(null),[Se,Me]=u.useState(null),[tt,Xe]=u.useState(null),[Ut,Bt]=u.useState(null),[re,ke]=u.useState(null),Pe=u.useRef(null),Fe=u.useRef(!0),ts=u.useRef({}),As=u.useCallback(async()=>{try{const _e=await N0();F(_e),O(!1)}catch(_e){K({variant:"destructive",title:"",description:_e instanceof Error?_e.message:""})}},[K]),js=u.useCallback(async()=>{try{r(!0);const _e=await sp();ts.current=_e,z(_e.bot),Y(_e.personality);const je=_e.chat;je.talk_value_rules||(je.talk_value_rules=[]),R(je),fe(_e.expression),we(_e.emoji),Ne(_e.memory),A(_e.tool),T(_e.mood),_(_e.voice),oe(_e.lpmm_knowledge),xe(_e.keyword_reaction),de(_e.response_post_process),W(_e.chinese_typo),ee(_e.response_splitter),Me(_e.log),Xe(_e.debug),Bt(_e.maim_message),ke(_e.telemetry),j(!1),Fe.current=!1,await As()}catch(_e){console.error(":",_e),K({title:"",description:"",variant:"destructive"})}finally{r(!1)}},[K,As]);u.useEffect(()=>{js()},[js]);const Ke=u.useCallback(async(_e,je)=>{if(!Fe.current)try{x(!0),await _0(_e,je),j(!1)}catch(yt){console.error(` ${_e} :`,yt),j(!0)}finally{x(!1)}},[]),D=u.useCallback((_e,je)=>{Fe.current||(j(!0),Pe.current&&clearTimeout(Pe.current),Pe.current=setTimeout(()=>{Ke(_e,je)},2e3))},[Ke]);u.useEffect(()=>{H&&!Fe.current&&D("bot",H)},[H,D]),u.useEffect(()=>{V&&!Fe.current&&D("personality",V)},[V,D]),u.useEffect(()=>{E&&!Fe.current&&D("chat",E)},[E,D]),u.useEffect(()=>{ne&&!Fe.current&&D("expression",ne)},[ne,D]),u.useEffect(()=>{Ce&&!Fe.current&&D("emoji",Ce)},[Ce,D]),u.useEffect(()=>{pe&&!Fe.current&&D("memory",pe)},[pe,D]),u.useEffect(()=>{be&&!Fe.current&&D("tool",be)},[be,D]),u.useEffect(()=>{X&&!Fe.current&&D("mood",X)},[X,D]),u.useEffect(()=>{te&&!Fe.current&&D("voice",te)},[te,D]),u.useEffect(()=>{me&&!Fe.current&&D("lpmm_knowledge",me)},[me,D]),u.useEffect(()=>{ae&&!Fe.current&&D("keyword_reaction",ae)},[ae,D]),u.useEffect(()=>{ve&&!Fe.current&&D("response_post_process",ve)},[ve,D]),u.useEffect(()=>{G&&!Fe.current&&D("chinese_typo",G)},[G,D]),u.useEffect(()=>{U&&!Fe.current&&D("response_splitter",U)},[U,D]),u.useEffect(()=>{Se&&!Fe.current&&D("log",Se)},[Se,D]),u.useEffect(()=>{tt&&!Fe.current&&D("debug",tt)},[tt,D]),u.useEffect(()=>{Ut&&!Fe.current&&D("maim_message",Ut)},[Ut,D]),u.useEffect(()=>{re&&!Fe.current&&D("telemetry",re)},[re,D]);const De=async()=>{try{d(!0),await w0(L),j(!1),O(!1),K({title:"",description:""}),await js()}catch(_e){O(!0),K({variant:"destructive",title:"",description:_e instanceof Error?_e.message:""})}finally{d(!1)}},ze=async _e=>{if(f){K({variant:"destructive",title:"",description:""});return}if(w(_e),_e==="source")await As();else try{const je=await sp();ts.current=je,z(je.bot),Y(je.personality);const yt=je.chat;yt.talk_value_rules||(yt.talk_value_rules=[]),R(yt),fe(je.expression),we(je.emoji),Ne(je.memory),A(je.tool),T(je.mood),_(je.voice),oe(je.lpmm_knowledge),xe(je.keyword_reaction),de(je.response_post_process),W(je.chinese_typo),ee(je.response_splitter),Me(je.log),Xe(je.debug),Bt(je.maim_message),ke(je.telemetry),j(!1)}catch(je){console.error(":",je),K({title:"",description:"",variant:"destructive"})}},Ve=async()=>{try{d(!0),Pe.current&&clearTimeout(Pe.current);const _e={...ts.current,bot:H,personality:V,chat:E,expression:ne,emoji:Ce,memory:pe,tool:be,mood:X,voice:te,lpmm_knowledge:me,keyword_reaction:ae,response_post_process:ve,chinese_typo:G,response_splitter:U,log:Se,debug:tt,maim_message:Ut,telemetry:re};await ap(_e),j(!1),K({title:"",description:""})}catch(_e){console.error(":",_e),K({title:"",description:_e.message,variant:"destructive"})}finally{d(!1)}},At=async()=>{try{N(!0),so().catch(()=>{}),C(!0)}catch(_e){console.error(":",_e),C(!1),K({title:"",description:"",variant:"destructive"}),N(!1)}},We=async()=>{try{d(!0),Pe.current&&clearTimeout(Pe.current);const _e={...ts.current,bot:H,personality:V,chat:E,expression:ne,emoji:Ce,memory:pe,tool:be,mood:X,voice:te,lpmm_knowledge:me,keyword_reaction:ae,response_post_process:ve,chinese_typo:G,response_splitter:U,log:Se,debug:tt,maim_message:Ut,telemetry:re};await ap(_e),j(!1),K({title:"",description:"..."}),await new Promise(je=>setTimeout(je,500)),await At()}catch(_e){console.error(":",_e),K({title:"",description:_e.message,variant:"destructive"})}finally{d(!1)}},ss=()=>{localStorage.removeItem("access-token"),window.location.href="/auth"},gt=()=>{C(!1),N(!1),K({title:"",description:"",variant:"destructive"})};return n?e.jsx(st,{className:"h-full",children:e.jsx("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("p",{className:"text-muted-foreground",children:"..."})})})}):e.jsx(st,{className:"h-full",children:e.jsxs("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col gap-3 sm:gap-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl font-bold",children:""}),e.jsx("p",{className:"text-muted-foreground mt-1 text-xs sm:text-sm",children:""})]}),e.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[e.jsxs(b,{onClick:S==="visual"?Ve:De,disabled:c||h||!f||p,size:"sm",variant:"outline",className:"w-20 sm:w-24",children:[e.jsx(jr,{className:"h-4 w-4 flex-shrink-0",strokeWidth:2,fill:"none"}),e.jsx("span",{className:"ml-1 truncate text-xs sm:text-sm",children:c?"":h?"":f?"":""})]}),e.jsxs(bt,{children:[e.jsx(es,{asChild:!0,children:e.jsxs(b,{disabled:c||h||p,size:"sm",className:"w-20 sm:w-28",children:[e.jsx(gr,{className:"h-4 w-4 flex-shrink-0"}),e.jsx("span",{className:"ml-1 truncate text-xs sm:text-sm",children:p?"":f?"":""})]})}),e.jsxs(dt,{children:[e.jsxs(ut,{children:[e.jsx(ht,{children:""}),e.jsx(xt,{asChild:!0,children:e.jsx("div",{children:e.jsx("p",{children:f?",":","})})})]}),e.jsxs(mt,{children:[e.jsx(pt,{children:""}),e.jsx(ft,{onClick:f?We:At,children:f?"":""})]})]})]})]})]}),e.jsx("div",{className:"flex",children:e.jsx(La,{value:S,onValueChange:_e=>ze(_e),className:"w-full",children:e.jsxs(wa,{className:"h-8 sm:h-9 w-full grid grid-cols-2",children:[e.jsxs(it,{value:"visual",className:"text-xs sm:text-sm",children:[e.jsx(py,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1"}),""]}),e.jsxs(it,{value:"source",className:"text-xs sm:text-sm",children:[e.jsx(gy,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1"}),""]})]})})})]}),e.jsxs(cl,{children:[e.jsx(Ra,{className:"h-4 w-4"}),e.jsxs(ol,{children:["",e.jsx("strong",{children:""}),'""']})]}),S==="source"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs(cl,{children:[e.jsx(Ra,{className:"h-4 w-4"}),e.jsxs(ol,{children:[e.jsx("strong",{children:""})," TOML  TOML ",B&&e.jsx("span",{className:"text-destructive font-semibold ml-2",children:"  TOML "})]})]}),e.jsx(A0,{value:L,onChange:_e=>{F(_e),j(!0),B&&O(!1)},language:"toml",theme:"dark",height:"calc(100vh - 280px)",minHeight:"500px",placeholder:"TOML "})]}),S==="visual"&&e.jsx(e.Fragment,{children:e.jsxs(La,{defaultValue:"bot",className:"w-full",children:[e.jsxs(wa,{className:"flex flex-wrap h-auto gap-1 p-1 sm:grid sm:grid-cols-5 lg:grid-cols-10",children:[e.jsx(it,{value:"bot",className:"text-xs px-2 py-1.5 sm:px-3 sm:py-2 data-[state=active]:shadow-sm",children:""}),e.jsx(it,{value:"personality",className:"text-xs px-2 py-1.5 sm:px-3 sm:py-2 data-[state=active]:shadow-sm",children:""}),e.jsx(it,{value:"chat",className:"text-xs px-2 py-1.5 sm:px-3 sm:py-2 data-[state=active]:shadow-sm",children:""}),e.jsx(it,{value:"expression",className:"text-xs px-2 py-1.5 sm:px-3 sm:py-2 data-[state=active]:shadow-sm",children:""}),e.jsx(it,{value:"features",className:"text-xs px-2 py-1.5 sm:px-3 sm:py-2 data-[state=active]:shadow-sm",children:""}),e.jsx(it,{value:"processing",className:"text-xs px-2 py-1.5 sm:px-3 sm:py-2 data-[state=active]:shadow-sm",children:""}),e.jsx(it,{value:"mood",className:"text-xs px-2 py-1.5 sm:px-3 sm:py-2 data-[state=active]:shadow-sm",children:""}),e.jsx(it,{value:"voice",className:"text-xs px-2 py-1.5 sm:px-3 sm:py-2 data-[state=active]:shadow-sm",children:""}),e.jsx(it,{value:"lpmm",className:"text-xs px-2 py-1.5 sm:px-3 sm:py-2 data-[state=active]:shadow-sm",children:""}),e.jsx(it,{value:"other",className:"text-xs px-2 py-1.5 sm:px-3 sm:py-2 data-[state=active]:shadow-sm",children:""})]}),e.jsx(zt,{value:"bot",className:"space-y-4",children:H&&e.jsx(D0,{config:H,onChange:z})}),e.jsx(zt,{value:"personality",className:"space-y-4",children:V&&e.jsx(O0,{config:V,onChange:Y})}),e.jsx(zt,{value:"chat",className:"space-y-4",children:E&&e.jsx(R0,{config:E,onChange:R})}),e.jsx(zt,{value:"expression",className:"space-y-4",children:ne&&e.jsx(U0,{config:ne,onChange:fe})}),e.jsx(zt,{value:"features",className:"space-y-4",children:Ce&&pe&&be&&e.jsx(B0,{emojiConfig:Ce,memoryConfig:pe,toolConfig:be,onEmojiChange:we,onMemoryChange:Ne,onToolChange:A})}),e.jsx(zt,{value:"processing",className:"space-y-4",children:ae&&ve&&G&&U&&e.jsx(H0,{keywordReactionConfig:ae,responsePostProcessConfig:ve,chineseTypoConfig:G,responseSplitterConfig:U,onKeywordReactionChange:xe,onResponsePostProcessChange:de,onChineseTypoChange:W,onResponseSplitterChange:ee})}),e.jsx(zt,{value:"mood",className:"space-y-4",children:X&&e.jsx(q0,{config:X,onChange:T})}),e.jsx(zt,{value:"voice",className:"space-y-4",children:te&&e.jsx(G0,{config:te,onChange:_})}),e.jsx(zt,{value:"lpmm",className:"space-y-4",children:me&&e.jsx(V0,{config:me,onChange:oe})}),e.jsxs(zt,{value:"other",className:"space-y-4",children:[Se&&e.jsx(F0,{config:Se,onChange:Me}),tt&&e.jsx($0,{config:tt,onChange:Xe}),Ut&&e.jsx(Q0,{config:Ut,onChange:Bt}),re&&e.jsx(Y0,{config:re,onChange:ke})]})]})}),v&&e.jsx(Yu,{onRestartComplete:ss,onRestartFailed:gt})]})})}function D0({config:n,onChange:r}){const c=()=>{r({...n,platforms:[...n.platforms,""]})},d=p=>{r({...n,platforms:n.platforms.filter((N,v)=>v!==p)})},h=(p,N)=>{const v=[...n.platforms];v[p]=N,r({...n,platforms:v})},x=()=>{r({...n,alias_names:[...n.alias_names,""]})},f=p=>{r({...n,alias_names:n.alias_names.filter((N,v)=>v!==p)})},j=(p,N)=>{const v=[...n.alias_names];v[p]=N,r({...n,alias_names:v})};return e.jsx("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:""}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{htmlFor:"platform",children:""}),e.jsx(ce,{id:"platform",value:n.platform,onChange:p=>r({...n,platform:p.target.value}),placeholder:"qq"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{htmlFor:"qq_account",children:"QQ"}),e.jsx(ce,{id:"qq_account",value:n.qq_account,onChange:p=>r({...n,qq_account:p.target.value}),placeholder:"123456789"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{htmlFor:"nickname",children:""}),e.jsx(ce,{id:"nickname",value:n.nickname,onChange:p=>r({...n,nickname:p.target.value}),placeholder:""})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(y,{children:""}),e.jsxs(b,{onClick:c,size:"sm",variant:"outline",children:[e.jsx(hs,{className:"h-4 w-4 mr-1"}),""]})]}),e.jsxs("div",{className:"space-y-2",children:[n.platforms.map((p,N)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ce,{value:p,onChange:v=>h(N,v.target.value),placeholder:"wx:114514"}),e.jsxs(bt,{children:[e.jsx(es,{asChild:!0,children:e.jsx(b,{size:"icon",variant:"outline",children:e.jsx(at,{className:"h-4 w-4"})})}),e.jsxs(dt,{children:[e.jsxs(ut,{children:[e.jsx(ht,{children:""}),e.jsxs(xt,{children:[' "',p||"()",'" ']})]}),e.jsxs(mt,{children:[e.jsx(pt,{children:""}),e.jsx(ft,{onClick:()=>d(N),children:""})]})]})]})]},N)),n.platforms.length===0&&e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(y,{children:""}),e.jsxs(b,{onClick:x,size:"sm",variant:"outline",children:[e.jsx(hs,{className:"h-4 w-4 mr-1"}),""]})]}),e.jsxs("div",{className:"space-y-2",children:[n.alias_names.map((p,N)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ce,{value:p,onChange:v=>j(N,v.target.value),placeholder:""}),e.jsxs(bt,{children:[e.jsx(es,{asChild:!0,children:e.jsx(b,{size:"icon",variant:"outline",children:e.jsx(at,{className:"h-4 w-4"})})}),e.jsxs(dt,{children:[e.jsxs(ut,{children:[e.jsx(ht,{children:""}),e.jsxs(xt,{children:[' "',p||"()",'" ']})]}),e.jsxs(mt,{children:[e.jsx(pt,{children:""}),e.jsx(ft,{onClick:()=>f(N),children:""})]})]})]})]},N)),n.alias_names.length===0&&e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]})]})]})]})})}function O0({config:n,onChange:r}){const c=()=>{r({...n,states:[...n.states,""]})},d=x=>{r({...n,states:n.states.filter((f,j)=>j!==x)})},h=(x,f)=>{const j=[...n.states];j[x]=f,r({...n,states:j})};return e.jsx("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:""}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{htmlFor:"personality",children:""}),e.jsx(Ft,{id:"personality",value:n.personality,onChange:x=>r({...n,personality:x.target.value}),placeholder:"120",rows:3}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"120"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{htmlFor:"reply_style",children:""}),e.jsx(Ft,{id:"reply_style",value:n.reply_style,onChange:x=>r({...n,reply_style:x.target.value}),placeholder:"",rows:3})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{htmlFor:"interest",children:""}),e.jsx(Ft,{id:"interest",value:n.interest,onChange:x=>r({...n,interest:x.target.value}),placeholder:"",rows:2})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{htmlFor:"plan_style",children:""}),e.jsx(Ft,{id:"plan_style",value:n.plan_style,onChange:x=>r({...n,plan_style:x.target.value}),placeholder:"",rows:5})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{htmlFor:"visual_style",children:""}),e.jsx(Ft,{id:"visual_style",value:n.visual_style,onChange:x=>r({...n,visual_style:x.target.value}),placeholder:"",rows:3})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{htmlFor:"private_plan_style",children:""}),e.jsx(Ft,{id:"private_plan_style",value:n.private_plan_style,onChange:x=>r({...n,private_plan_style:x.target.value}),placeholder:"",rows:4})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(y,{children:""}),e.jsxs(b,{onClick:c,size:"sm",variant:"outline",children:[e.jsx(hs,{className:"h-4 w-4 mr-1"}),""]})]}),e.jsx("div",{className:"space-y-2",children:n.states.map((x,f)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ft,{value:x,onChange:j=>h(f,j.target.value),placeholder:"",rows:2}),e.jsxs(bt,{children:[e.jsx(es,{asChild:!0,children:e.jsx(b,{size:"icon",variant:"outline",children:e.jsx(at,{className:"h-4 w-4"})})}),e.jsxs(dt,{children:[e.jsxs(ut,{children:[e.jsx(ht,{children:""}),e.jsx(xt,{children:""})]}),e.jsxs(mt,{children:[e.jsx(pt,{children:""}),e.jsx(ft,{onClick:()=>d(f),children:""})]})]})]})]},f))})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{htmlFor:"state_probability",children:""}),e.jsx(ce,{id:"state_probability",type:"number",step:"0.1",min:"0",max:"1",value:n.state_probability,onChange:x=>r({...n,state_probability:parseFloat(x.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" personality 0.0-1.0"})]})]})]})})}function R0({config:n,onChange:r}){const c=()=>{r({...n,talk_value_rules:[...n.talk_value_rules,{target:"",time:"00:00-23:59",value:1}]})},d=j=>{r({...n,talk_value_rules:n.talk_value_rules.filter((p,N)=>N!==j)})},h=(j,p,N)=>{const v=[...n.talk_value_rules];v[j]={...v[j],[p]:N},r({...n,talk_value_rules:v})},x=({value:j,onChange:p})=>{const[N,v]=u.useState("00"),[C,S]=u.useState("00"),[w,L]=u.useState("23"),[F,B]=u.useState("59");u.useEffect(()=>{const K=j.split("-");if(K.length===2){const[H,z]=K,[V,Y]=H.split(":"),[E,R]=z.split(":");V&&v(V.padStart(2,"0")),Y&&S(Y.padStart(2,"0")),E&&L(E.padStart(2,"0")),R&&B(R.padStart(2,"0"))}},[j]);const O=(K,H,z,V)=>{const Y=`${K}:${H}-${z}:${V}`;p(Y)};return e.jsxs(Ua,{children:[e.jsx(Ba,{asChild:!0,children:e.jsxs(b,{variant:"outline",className:"w-full justify-start font-mono text-sm",children:[e.jsx(Wn,{className:"h-4 w-4 mr-2"}),j||""]})}),e.jsx(_a,{className:"w-72 sm:w-80",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm mb-3",children:""}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:gap-3",children:[e.jsxs("div",{children:[e.jsx(y,{className:"text-xs",children:""}),e.jsxs(qe,{value:N,onValueChange:K=>{v(K),O(K,C,w,F)},children:[e.jsx(Be,{children:e.jsx(Ge,{})}),e.jsx(He,{children:Array.from({length:24},(K,H)=>H).map(K=>e.jsx(ie,{value:K.toString().padStart(2,"0"),children:K.toString().padStart(2,"0")},K))})]})]}),e.jsxs("div",{children:[e.jsx(y,{className:"text-xs",children:""}),e.jsxs(qe,{value:C,onValueChange:K=>{S(K),O(N,K,w,F)},children:[e.jsx(Be,{children:e.jsx(Ge,{})}),e.jsx(He,{children:Array.from({length:60},(K,H)=>H).map(K=>e.jsx(ie,{value:K.toString().padStart(2,"0"),children:K.toString().padStart(2,"0")},K))})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm mb-3",children:""}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:gap-3",children:[e.jsxs("div",{children:[e.jsx(y,{className:"text-xs",children:""}),e.jsxs(qe,{value:w,onValueChange:K=>{L(K),O(N,C,K,F)},children:[e.jsx(Be,{children:e.jsx(Ge,{})}),e.jsx(He,{children:Array.from({length:24},(K,H)=>H).map(K=>e.jsx(ie,{value:K.toString().padStart(2,"0"),children:K.toString().padStart(2,"0")},K))})]})]}),e.jsxs("div",{children:[e.jsx(y,{className:"text-xs",children:""}),e.jsxs(qe,{value:F,onValueChange:K=>{B(K),O(N,C,w,K)},children:[e.jsx(Be,{children:e.jsx(Ge,{})}),e.jsx(He,{children:Array.from({length:60},(K,H)=>H).map(K=>e.jsx(ie,{value:K.toString().padStart(2,"0"),children:K.toString().padStart(2,"0")},K))})]})]})]})]})]})})]})},f=({rule:j})=>{const p=`{ target = "${j.target}", time = "${j.time}", value = ${j.value.toFixed(1)} }`;return e.jsxs(Ua,{children:[e.jsx(Ba,{asChild:!0,children:e.jsxs(b,{variant:"outline",size:"sm",children:[e.jsx(Ws,{className:"h-4 w-4 mr-1"}),""]})}),e.jsx(_a,{className:"w-80 sm:w-96",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-sm",children:""}),e.jsx("div",{className:"rounded-md bg-muted p-3 font-mono text-xs break-all",children:p}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" bot_config.toml "})]})})]})};return e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:""}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{htmlFor:"talk_value",children:""}),e.jsx(ce,{id:"talk_value",type:"number",step:"0.1",min:"0",max:"1",value:n.talk_value,onChange:j=>r({...n,talk_value:parseFloat(j.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" 0-1"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Qe,{id:"mentioned_bot_reply",checked:n.mentioned_bot_reply,onCheckedChange:j=>r({...n,mentioned_bot_reply:j})}),e.jsx(y,{htmlFor:"mentioned_bot_reply",className:"cursor-pointer",children:""})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{htmlFor:"max_context_size",children:""}),e.jsx(ce,{id:"max_context_size",type:"number",min:"1",value:n.max_context_size,onChange:j=>r({...n,max_context_size:parseInt(j.target.value)})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{htmlFor:"planner_smooth",children:""}),e.jsx(ce,{id:"planner_smooth",type:"number",step:"1",min:"0",value:n.planner_smooth,onChange:j=>r({...n,planner_smooth:parseFloat(j.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" planner  1-50 "})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Qe,{id:"enable_talk_value_rules",checked:n.enable_talk_value_rules,onCheckedChange:j=>r({...n,enable_talk_value_rules:j})}),e.jsx(y,{htmlFor:"enable_talk_value_rules",className:"cursor-pointer",children:""})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Qe,{id:"include_planner_reasoning",checked:n.include_planner_reasoning,onCheckedChange:j=>r({...n,include_planner_reasoning:j})}),e.jsx(y,{htmlFor:"include_planner_reasoning",className:"cursor-pointer",children:" planner  replyer"})]})]})]}),n.enable_talk_value_rules&&e.jsxs("div",{className:"border-t pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-base font-semibold",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"ID"})]}),e.jsxs(b,{onClick:c,size:"sm",children:[e.jsx(hs,{className:"h-4 w-4 mr-1"}),""]})]}),n.talk_value_rules&&n.talk_value_rules.length>0?e.jsx("div",{className:"space-y-4",children:n.talk_value_rules.map((j,p)=>e.jsxs("div",{className:"rounded-lg border p-4 bg-muted/50 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm font-medium text-muted-foreground",children:[" #",p+1]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(f,{rule:j}),e.jsxs(bt,{children:[e.jsx(es,{asChild:!0,children:e.jsx(b,{variant:"ghost",size:"sm",children:e.jsx(at,{className:"h-4 w-4 text-destructive"})})}),e.jsxs(dt,{children:[e.jsxs(ut,{children:[e.jsx(ht,{children:""}),e.jsxs(xt,{children:[" #",p+1," "]})]}),e.jsxs(mt,{children:[e.jsx(pt,{children:""}),e.jsx(ft,{onClick:()=>d(p),children:""})]})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{className:"text-xs font-medium",children:""}),e.jsxs(qe,{value:j.target===""?"global":"specific",onValueChange:N=>{N==="global"?h(p,"target",""):h(p,"target","qq::group")},children:[e.jsx(Be,{children:e.jsx(Ge,{})}),e.jsxs(He,{children:[e.jsx(ie,{value:"global",children:""}),e.jsx(ie,{value:"specific",children:""})]})]})]}),j.target!==""&&(()=>{const N=j.target.split(":"),v=N[0]||"qq",C=N[1]||"",S=N[2]||"group";return e.jsxs("div",{className:"grid gap-4 p-3 sm:p-4 rounded-lg bg-muted/50",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{className:"text-xs font-medium",children:""}),e.jsxs(qe,{value:v,onValueChange:w=>{h(p,"target",`${w}:${C}:${S}`)},children:[e.jsx(Be,{children:e.jsx(Ge,{})}),e.jsxs(He,{children:[e.jsx(ie,{value:"qq",children:"QQ"}),e.jsx(ie,{value:"wx",children:""})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{className:"text-xs font-medium",children:" ID"}),e.jsx(ce,{value:C,onChange:w=>{h(p,"target",`${v}:${w.target.value}:${S}`)},placeholder:" ID",className:"font-mono text-sm"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{className:"text-xs font-medium",children:""}),e.jsxs(qe,{value:S,onValueChange:w=>{h(p,"target",`${v}:${C}:${w}`)},children:[e.jsx(Be,{children:e.jsx(Ge,{})}),e.jsxs(He,{children:[e.jsx(ie,{value:"group",children:"group"}),e.jsx(ie,{value:"private",children:"private"})]})]})]})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[" ID",j.target||""]})]})})(),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{className:"text-xs font-medium",children:" (Time)"}),e.jsx(x,{value:j.time,onChange:N=>h(p,"time",N)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" 23:00-02:00"})]}),e.jsxs("div",{className:"grid gap-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(y,{htmlFor:`rule-value-${p}`,className:"text-xs font-medium",children:" (Value)"}),e.jsx(ce,{id:`rule-value-${p}`,type:"number",step:"0.01",min:"0.01",max:"1",value:j.value,onChange:N=>{const v=parseFloat(N.target.value);isNaN(v)||h(p,"value",Math.max(.01,Math.min(1,v)))},className:"w-20 h-8 text-xs"})]}),e.jsx(Ma,{value:[j.value],onValueChange:N=>h(p,"value",N[0]),min:.01,max:1,step:.01,className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsx("span",{children:"0.01 ()"}),e.jsx("span",{children:"0.5"}),e.jsx("span",{children:"1.0 ()"})]})]})]})]},p))}):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:e.jsx("p",{className:"text-sm",children:'""'})}),e.jsxs("div",{className:"mt-4 p-4 bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:[e.jsx("h5",{className:"text-sm font-semibold text-blue-900 dark:text-blue-100 mb-2",children:" "}),e.jsxs("ul",{className:"text-xs text-blue-800 dark:text-blue-200 space-y-1",children:[e.jsxs("li",{children:[" ",e.jsx("strong",{children:"Target "}),""]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"Target "}),"platform:id:type"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:""}),""]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:""})," 23:00-02:00 112"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:""})," 0-10 1 "]})]})]})]})]})}function L0({member:n,groupIndex:r,memberIndex:c,availableChatIds:d,onUpdate:h,onRemove:x}){const f=d.includes(n)||n==="*",[j,p]=u.useState(!f);return e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"flex-1 flex gap-2",children:j?e.jsxs(e.Fragment,{children:[e.jsx(ce,{value:n,onChange:N=>h(r,c,N.target.value),placeholder:' "*"  "qq:123456:group"',className:"flex-1"}),d.length>0&&e.jsx(b,{size:"sm",variant:"outline",onClick:()=>p(!1),title:"",children:""})]}):e.jsxs(e.Fragment,{children:[e.jsxs(qe,{value:n,onValueChange:N=>h(r,c,N),children:[e.jsx(Be,{className:"flex-1",children:e.jsx(Ge,{placeholder:""})}),e.jsxs(He,{children:[e.jsx(ie,{value:"*",children:"* ()"}),d.map((N,v)=>e.jsx(ie,{value:N,children:N},v))]})]}),e.jsx(b,{size:"sm",variant:"outline",onClick:()=>p(!0),title:"",children:""})]})}),e.jsxs(bt,{children:[e.jsx(es,{asChild:!0,children:e.jsx(b,{size:"icon",variant:"outline",children:e.jsx(at,{className:"h-4 w-4"})})}),e.jsxs(dt,{children:[e.jsxs(ut,{children:[e.jsx(ht,{children:""}),e.jsxs(xt,{children:[' "',n||"()",'" ']})]}),e.jsxs(mt,{children:[e.jsx(pt,{children:""}),e.jsx(ft,{onClick:()=>x(r,c),children:""})]})]})]})]})}function U0({config:n,onChange:r}){const c=()=>{r({...n,learning_list:[...n.learning_list,["","enable","enable","1.0"]]})},d=C=>{r({...n,learning_list:n.learning_list.filter((S,w)=>w!==C)})},h=(C,S,w)=>{const L=[...n.learning_list];L[C][S]=w,r({...n,learning_list:L})},x=({rule:C})=>{const S=`["${C[0]}", "${C[1]}", "${C[2]}", "${C[3]}"]`;return e.jsxs(Ua,{children:[e.jsx(Ba,{asChild:!0,children:e.jsxs(b,{variant:"outline",size:"sm",children:[e.jsx(Ws,{className:"h-4 w-4 mr-1"}),""]})}),e.jsx(_a,{className:"w-80 sm:w-96",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-sm",children:""}),e.jsx("div",{className:"rounded-md bg-muted p-3 font-mono text-xs break-all",children:S}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" bot_config.toml "})]})})]})},f=()=>{r({...n,expression_groups:[...n.expression_groups,[]]})},j=C=>{r({...n,expression_groups:n.expression_groups.filter((S,w)=>w!==C)})},p=C=>{const S=[...n.expression_groups];S[C]=[...S[C],""],r({...n,expression_groups:S})},N=(C,S)=>{const w=[...n.expression_groups];w[C]=w[C].filter((L,F)=>F!==S),r({...n,expression_groups:w})},v=(C,S,w)=>{const L=[...n.expression_groups];L[C][S]=w,r({...n,expression_groups:L})};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-6",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:""})]}),e.jsxs(b,{onClick:c,size:"sm",variant:"outline",children:[e.jsx(hs,{className:"h-4 w-4 mr-1"}),""]})]}),e.jsxs("div",{className:"space-y-4",children:[n.learning_list.map((C,S)=>{const w=n.learning_list.some((H,z)=>z!==S&&H[0]===""),L=C[0]==="",F=C[0].split(":"),B=F[0]||"qq",O=F[1]||"",K=F[2]||"group";return e.jsxs("div",{className:"rounded-lg border p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm font-medium",children:[" ",S+1," ",L&&""]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x,{rule:C}),e.jsxs(bt,{children:[e.jsx(es,{asChild:!0,children:e.jsx(b,{size:"sm",variant:"ghost",children:e.jsx(at,{className:"h-4 w-4"})})}),e.jsxs(dt,{children:[e.jsxs(ut,{children:[e.jsx(ht,{children:""}),e.jsxs(xt,{children:[" ",S+1," "]})]}),e.jsxs(mt,{children:[e.jsx(pt,{children:""}),e.jsx(ft,{onClick:()=>d(S),children:""})]})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{className:"text-xs font-medium",children:""}),e.jsxs(qe,{value:L?"global":"specific",onValueChange:H=>{H==="global"?h(S,0,""):h(S,0,"qq::group")},disabled:w&&!L,children:[e.jsx(Be,{children:e.jsx(Ge,{})}),e.jsxs(He,{children:[e.jsx(ie,{value:"global",children:""}),e.jsx(ie,{value:"specific",disabled:w&&!L,children:""})]})]}),w&&!L&&e.jsx("p",{className:"text-xs text-amber-600",children:""})]}),!L&&e.jsxs("div",{className:"grid gap-4 p-3 sm:p-4 rounded-lg bg-muted/50",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{className:"text-xs font-medium",children:""}),e.jsxs(qe,{value:B,onValueChange:H=>{h(S,0,`${H}:${O}:${K}`)},children:[e.jsx(Be,{children:e.jsx(Ge,{})}),e.jsxs(He,{children:[e.jsx(ie,{value:"qq",children:"QQ"}),e.jsx(ie,{value:"wx",children:""})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{className:"text-xs font-medium",children:" ID"}),e.jsx(ce,{value:O,onChange:H=>{h(S,0,`${B}:${H.target.value}:${K}`)},placeholder:" ID",className:"font-mono text-sm"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{className:"text-xs font-medium",children:""}),e.jsxs(qe,{value:K,onValueChange:H=>{h(S,0,`${B}:${O}:${H}`)},children:[e.jsx(Be,{children:e.jsx(Ge,{})}),e.jsxs(He,{children:[e.jsx(ie,{value:"group",children:"group"}),e.jsx(ie,{value:"private",children:"private"})]})]})]})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[" ID",C[0]||""]})]}),e.jsx("div",{className:"grid gap-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(y,{className:"text-xs font-medium",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:""})]}),e.jsx(Qe,{checked:C[1]==="enable",onCheckedChange:H=>h(S,1,H?"enable":"disable")})]})}),e.jsx("div",{className:"grid gap-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(y,{className:"text-xs font-medium",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:""})]}),e.jsx(Qe,{checked:C[2]==="enable",onCheckedChange:H=>h(S,2,H?"enable":"disable")})]})}),e.jsxs("div",{className:"grid gap-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(y,{className:"text-xs font-medium",children:""}),e.jsx(ce,{type:"number",step:"0.1",min:"0",max:"5",value:C[3],onChange:H=>{const z=parseFloat(H.target.value);isNaN(z)||h(S,3,Math.max(0,Math.min(5,z)).toFixed(1))},className:"w-20 h-8 text-xs"})]}),e.jsx(Ma,{value:[parseFloat(C[3])||1],onValueChange:H=>h(S,3,H[0].toFixed(1)),min:0,max:5,step:.1,className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsx("span",{children:"0 ()"}),e.jsx("span",{children:"2.5"}),e.jsx("span",{children:"5.0 ()"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" = 300/"})]})]})]},S)}),n.learning_list.length===0&&e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:'""'})]})]})}),e.jsx("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-6",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:""})]}),e.jsx(Qe,{checked:n.reflect,onCheckedChange:C=>r({...n,reflect:C})})]}),n.reflect&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"rounded-lg border p-4 space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("span",{className:"text-sm font-medium",children:""})}),e.jsx("div",{className:"space-y-4",children:(()=>{const S=(n.reflect_operator_id||"").split(":"),w=S[0]||"qq",L=S[1]||"",F=S[2]||"private";return e.jsxs("div",{className:"grid gap-4 p-3 sm:p-4 rounded-lg bg-muted/50",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{className:"text-xs font-medium",children:""}),e.jsxs(qe,{value:w,onValueChange:B=>{r({...n,reflect_operator_id:`${B}:${L}:${F}`})},children:[e.jsx(Be,{children:e.jsx(Ge,{})}),e.jsxs(He,{children:[e.jsx(ie,{value:"qq",children:"QQ"}),e.jsx(ie,{value:"wx",children:""})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{className:"text-xs font-medium",children:"/ ID"}),e.jsx(ce,{value:L,onChange:B=>{r({...n,reflect_operator_id:`${w}:${B.target.value}:${F}`})},placeholder:" ID",className:"font-mono text-sm"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{className:"text-xs font-medium",children:""}),e.jsxs(qe,{value:F,onValueChange:B=>{r({...n,reflect_operator_id:`${w}:${L}:${B}`})},children:[e.jsx(Be,{children:e.jsx(Ge,{})}),e.jsxs(He,{children:[e.jsx(ie,{value:"private",children:"private"}),e.jsx(ie,{value:"group",children:"group"})]})]})]})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[" ID",n.reflect_operator_id||""]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})})()})]}),e.jsxs("div",{className:"rounded-lg border p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:""})]}),e.jsxs(b,{onClick:()=>{r({...n,allow_reflect:[...n.allow_reflect||[],"qq::group"]})},size:"sm",variant:"outline",children:[e.jsx(hs,{className:"h-4 w-4 mr-1"}),""]})]}),e.jsxs("div",{className:"space-y-2",children:[(n.allow_reflect||[]).map((C,S)=>{const w=C.split(":"),L=w[0]||"qq",F=w[1]||"",B=w[2]||"group";return e.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-lg bg-muted/50",children:[e.jsxs(qe,{value:L,onValueChange:O=>{const K=[...n.allow_reflect];K[S]=`${O}:${F}:${B}`,r({...n,allow_reflect:K})},children:[e.jsx(Be,{className:"w-24",children:e.jsx(Ge,{})}),e.jsxs(He,{children:[e.jsx(ie,{value:"qq",children:"QQ"}),e.jsx(ie,{value:"wx",children:""})]})]}),e.jsx(ce,{value:F,onChange:O=>{const K=[...n.allow_reflect];K[S]=`${L}:${O.target.value}:${B}`,r({...n,allow_reflect:K})},placeholder:"ID",className:"flex-1 font-mono text-sm"}),e.jsxs(qe,{value:B,onValueChange:O=>{const K=[...n.allow_reflect];K[S]=`${L}:${F}:${O}`,r({...n,allow_reflect:K})},children:[e.jsx(Be,{className:"w-32",children:e.jsx(Ge,{})}),e.jsxs(He,{children:[e.jsx(ie,{value:"group",children:""}),e.jsx(ie,{value:"private",children:""})]})]}),e.jsx(b,{onClick:()=>{r({...n,allow_reflect:n.allow_reflect.filter((O,K)=>K!==S)})},size:"sm",variant:"ghost",children:e.jsx(at,{className:"h-4 w-4"})})]},S)}),(!n.allow_reflect||n.allow_reflect.length===0)&&e.jsx("div",{className:"text-center py-4 text-muted-foreground text-sm",children:""})]})]})]})]})}),e.jsx("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-6",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:""})]}),e.jsxs(b,{onClick:f,size:"sm",variant:"outline",children:[e.jsx(hs,{className:"h-4 w-4 mr-1"}),""]})]}),e.jsxs("div",{className:"space-y-4",children:[n.expression_groups.map((C,S)=>{const w=n.learning_list.map(L=>L[0]).filter(L=>L!=="");return e.jsxs("div",{className:"rounded-lg border p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm font-medium",children:[" ",S+1,C.length===1&&C[0]==="*"&&""]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(b,{onClick:()=>p(S),size:"sm",variant:"outline",children:e.jsx(hs,{className:"h-4 w-4"})}),e.jsxs(bt,{children:[e.jsx(es,{asChild:!0,children:e.jsx(b,{size:"sm",variant:"ghost",children:e.jsx(at,{className:"h-4 w-4"})})}),e.jsxs(dt,{children:[e.jsxs(ut,{children:[e.jsx(ht,{children:""}),e.jsxs(xt,{children:[" ",S+1," "]})]}),e.jsxs(mt,{children:[e.jsx(pt,{children:""}),e.jsx(ft,{onClick:()=>j(S),children:""})]})]})]})]})]}),e.jsx("div",{className:"space-y-2",children:C.map((L,F)=>e.jsx(L0,{member:L,groupIndex:S,memberIndex:F,availableChatIds:w,onUpdate:v,onRemove:N},`${S}-${F}`))}),e.jsx("p",{className:"text-xs text-muted-foreground",children:' "*" '})]},S)}),n.expression_groups.length===0&&e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:'""'})]})]})})]})}function B0({emojiConfig:n,memoryConfig:r,toolConfig:c,onEmojiChange:d,onMemoryChange:h,onToolChange:x}){return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-4",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:""}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Qe,{id:"enable_tool",checked:c.enable_tool,onCheckedChange:f=>x({...c,enable_tool:f})}),e.jsx(y,{htmlFor:"enable_tool",className:"cursor-pointer",children:""})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:""})]})}),e.jsx("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-4",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:""}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{htmlFor:"max_agent_iterations",children:""}),e.jsx(ce,{id:"max_agent_iterations",type:"number",min:"1",value:r.max_agent_iterations,onChange:f=>h({...r,max_agent_iterations:parseInt(f.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" 1"})]})]})}),e.jsx("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-4",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:""}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{htmlFor:"emoji_chance",children:""}),e.jsx(ce,{id:"emoji_chance",type:"number",step:"0.1",min:"0",max:"1",value:n.emoji_chance,onChange:f=>d({...n,emoji_chance:parseFloat(f.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" 0-1"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{htmlFor:"max_reg_num",children:""}),e.jsx(ce,{id:"max_reg_num",type:"number",min:"1",value:n.max_reg_num,onChange:f=>d({...n,max_reg_num:parseInt(f.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{htmlFor:"check_interval",children:""}),e.jsx(ce,{id:"check_interval",type:"number",min:"1",value:n.check_interval,onChange:f=>d({...n,check_interval:parseInt(f.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Qe,{id:"do_replace",checked:n.do_replace,onCheckedChange:f=>d({...n,do_replace:f})}),e.jsx(y,{htmlFor:"do_replace",className:"cursor-pointer",children:""})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Qe,{id:"steal_emoji",checked:n.steal_emoji,onCheckedChange:f=>d({...n,steal_emoji:f})}),e.jsx(y,{htmlFor:"steal_emoji",className:"cursor-pointer",children:""})]}),e.jsx("p",{className:"text-xs text-muted-foreground -mt-2",children:""}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Qe,{id:"content_filtration",checked:n.content_filtration,onCheckedChange:f=>d({...n,content_filtration:f})}),e.jsx(y,{htmlFor:"content_filtration",className:"cursor-pointer",children:""})]}),n.content_filtration&&e.jsxs("div",{className:"grid gap-2 pl-6 border-l-2 border-primary/20",children:[e.jsx(y,{htmlFor:"filtration_prompt",children:""}),e.jsx(ce,{id:"filtration_prompt",value:n.filtration_prompt,onChange:f=>d({...n,filtration_prompt:f.target.value}),placeholder:""}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})]})]})})]})}function H0({keywordReactionConfig:n,responsePostProcessConfig:r,chineseTypoConfig:c,responseSplitterConfig:d,onKeywordReactionChange:h,onResponsePostProcessChange:x,onChineseTypoChange:f,onResponseSplitterChange:j}){const p=()=>{h({...n,regex_rules:[...n.regex_rules,{regex:[""],reaction:""}]})},N=z=>{h({...n,regex_rules:n.regex_rules.filter((V,Y)=>Y!==z)})},v=(z,V,Y)=>{const E=[...n.regex_rules];V==="regex"&&typeof Y=="string"?E[z]={...E[z],regex:[Y]}:V==="reaction"&&typeof Y=="string"&&(E[z]={...E[z],reaction:Y}),h({...n,regex_rules:E})},C=({regex:z,reaction:V,onRegexChange:Y,onReactionChange:E})=>{const[R,ne]=u.useState(!1),[fe,Ce]=u.useState(""),[we,pe]=u.useState(null),[Ne,be]=u.useState(""),[A,X]=u.useState({}),[T,te]=u.useState(""),_=u.useRef(null),[me,oe]=u.useState("build"),ae=G=>G.replace(/\(\?P<([^>]+)>/g,"(?<$1>"),xe=(G,W=0)=>{const U=_.current;if(!U)return;const ee=U.selectionStart||0,Se=U.selectionEnd||0,Me=z.substring(0,ee)+G+z.substring(Se);Y(Me),setTimeout(()=>{const tt=ee+G.length+W;U.setSelectionRange(tt,tt),U.focus()},0)};u.useEffect(()=>{if(!z||!fe){pe(null),X({}),te(V),be("");return}try{const G=ae(z),W=new RegExp(G,"g"),U=fe.match(W);pe(U),be("");const Se=new RegExp(G).exec(fe);if(Se&&Se.groups){X(Se.groups);let Me=V;Object.entries(Se.groups).forEach(([tt,Xe])=>{Me=Me.replace(new RegExp(`\\[${tt}\\]`,"g"),Xe||"")}),te(Me)}else X({}),te(V)}catch(G){be(G.message),pe(null),X({}),te(V)}},[z,fe,V]);const ve=()=>{if(!fe||!we||we.length===0)return e.jsx("span",{className:"text-muted-foreground",children:fe||""});try{const G=ae(z),W=new RegExp(G,"g");let U=0;const ee=[];let Se;for(;(Se=W.exec(fe))!==null;)Se.index>U&&ee.push(e.jsx("span",{children:fe.substring(U,Se.index)},`text-${U}`)),ee.push(e.jsx("span",{className:"bg-yellow-200 dark:bg-yellow-900 font-semibold",children:Se[0]},`match-${Se.index}`)),U=Se.index+Se[0].length;return U<fe.length&&ee.push(e.jsx("span",{children:fe.substring(U)},`text-${U}`)),e.jsx(e.Fragment,{children:ee})}catch{return e.jsx("span",{children:fe})}},de=[{category:"",items:[{label:"",pattern:".",desc:""},{label:"",pattern:"\\d",desc:" 0-9"},{label:"",pattern:"\\D",desc:""},{label:"",pattern:"\\w",desc:""},{label:"",pattern:"\\W",desc:""},{label:"",pattern:"\\s",desc:""},{label:"",pattern:"\\S",desc:""}]},{category:"",items:[{label:"",pattern:"^",desc:""},{label:"",pattern:"$",desc:""},{label:"",pattern:"\\b",desc:""}]},{category:"",items:[{label:"0",pattern:"*",desc:"0"},{label:"1",pattern:"+",desc:"1"},{label:"01",pattern:"?",desc:"01"},{label:"",pattern:"{n}",desc:"nn"},{label:"",pattern:"{m,n}",desc:"mn"}]},{category:"",items:[{label:"",pattern:"()",desc:"",moveCursor:-1},{label:"",pattern:"(?P<name>)",desc:"Python",moveCursor:-1},{label:"",pattern:"(?:)",desc:"",moveCursor:-1}]},{category:"",items:[{label:"",pattern:"[]",desc:"",moveCursor:-1},{label:"",pattern:"[^]",desc:"",moveCursor:-1},{label:"",pattern:"[a-z]",desc:"az"},{label:"",pattern:"[\\u4e00-\\u9fa5]",desc:""}]},{category:"",items:[{label:"",pattern:"(?P<word>\\S+)",desc:""},{label:"",pattern:"(?P<sentence>.+)",desc:""},{label:"",pattern:"(?P<num>\\d+)",desc:""},{label:"",pattern:"(?:1|2)",desc:""}]}];return e.jsxs(Jt,{open:R,onOpenChange:ne,children:[e.jsx($u,{asChild:!0,children:e.jsxs(b,{variant:"outline",size:"sm",children:[e.jsx(Hu,{className:"h-4 w-4 mr-1"}),""]})}),e.jsxs($t,{className:"max-w-[95vw] sm:max-w-[900px] max-h-[90vh]",children:[e.jsxs(Qt,{children:[e.jsx(Yt,{children:""}),e.jsx(ds,{className:"text-sm",children:""})]}),e.jsx(st,{className:"max-h-[calc(90vh-120px)]",children:e.jsxs(La,{value:me,onValueChange:G=>oe(G),className:"w-full",children:[e.jsxs(wa,{className:"grid w-full grid-cols-2",children:[e.jsx(it,{value:"build",children:" "}),e.jsx(it,{value:"test",children:" "})]}),e.jsxs(zt,{value:"build",className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{className:"text-sm font-medium",children:""}),e.jsx(ce,{ref:_,value:z,onChange:G=>Y(G.target.value),className:"font-mono text-sm",placeholder:"..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{className:"text-sm font-medium",children:"Reaction "}),e.jsx(Ft,{value:V,onChange:G=>E(G.target.value),placeholder:" [] ...",rows:3,className:"text-sm"})]}),e.jsxs("div",{className:"space-y-4 border-t pt-4",children:[de.map(G=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("h5",{className:"text-xs font-semibold text-primary",children:G.category}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:G.items.map(W=>e.jsx(b,{variant:"outline",size:"sm",className:"justify-start h-auto py-2 px-3",onClick:()=>xe(W.pattern,W.moveCursor||0),children:e.jsxs("div",{className:"flex flex-col items-start w-full",children:[e.jsxs("div",{className:"flex items-center gap-2 w-full",children:[e.jsx("span",{className:"text-xs font-medium",children:W.label}),e.jsx("code",{className:"ml-auto text-xs bg-muted px-1.5 py-0.5 rounded font-mono",children:W.pattern})]}),e.jsx("span",{className:"text-xs text-muted-foreground mt-0.5",children:W.desc})]})},W.label))})]},G.category)),e.jsxs("div",{className:"space-y-2 border-t pt-4",children:[e.jsx("h5",{className:"text-xs font-semibold text-primary",children:""}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{variant:"outline",size:"sm",className:"w-full justify-start h-auto py-2 px-3",onClick:()=>Y("^(?P<n>\\S{1,20})$"),children:e.jsxs("div",{className:"flex flex-col items-start w-full",children:[e.jsxs("code",{className:"text-xs font-mono bg-muted px-2 py-1 rounded w-full overflow-x-auto",children:["^(?P<n>\\S","{1,20}",")$"]}),e.jsx("span",{className:"text-xs text-muted-foreground mt-1",children:""})]})}),e.jsx(b,{variant:"outline",size:"sm",className:"w-full justify-start h-auto py-2 px-3",onClick:()=>Y("(?:[^.\\s]+\\s*)?(?:)?[]\\s*(?P<action>.+?)[.,]?$"),children:e.jsxs("div",{className:"flex flex-col items-start w-full",children:[e.jsx("code",{className:"text-xs font-mono bg-muted px-2 py-1 rounded w-full overflow-x-auto",children:"(?:[^.\\s]+\\s*)?(?:)?[]\\s*(?P<action>.+?)[.,]?$"}),e.jsx("span",{className:"text-xs text-muted-foreground mt-1",children:""})]})}),e.jsx(b,{variant:"outline",size:"sm",className:"w-full justify-start h-auto py-2 px-3",onClick:()=>Y("(?P<subject>.+?)(?:||)"),children:e.jsxs("div",{className:"flex flex-col items-start w-full",children:[e.jsx("code",{className:"text-xs font-mono bg-muted px-2 py-1 rounded w-full overflow-x-auto",children:"(?P<subject>.+?)(?:||)"}),e.jsx("span",{className:"text-xs text-muted-foreground mt-1",children:""})]})})]})]})]}),e.jsxs("div",{className:"rounded-md bg-blue-50 dark:bg-blue-950/30 border border-blue-200 dark:border-blue-800 p-3 space-y-1",children:[e.jsx("p",{className:"text-xs font-medium text-blue-900 dark:text-blue-100",children:" "}),e.jsxs("ul",{className:"text-xs text-blue-700 dark:text-blue-300 space-y-1 list-disc list-inside",children:[e.jsx("li",{children:""}),e.jsxs("li",{children:["",e.jsx("code",{className:"bg-blue-100 dark:bg-blue-900 px-1 rounded",children:"(?P<>)"})]}),e.jsxs("li",{children:[" reaction  ",e.jsx("code",{className:"bg-blue-100 dark:bg-blue-900 px-1 rounded",children:"[]"})," "]}),e.jsx("li",{children:""})]})]})]}),e.jsxs(zt,{value:"test",className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{className:"text-sm font-medium",children:""}),e.jsx("div",{className:"rounded-md bg-muted p-3 font-mono text-xs break-all",children:z||"()"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"test-text",className:"text-sm font-medium",children:""}),e.jsx(Ft,{id:"test-text",value:fe,onChange:G=>Ce(G.target.value),placeholder:`...
`,className:"min-h-[100px] text-sm"})]}),Ne&&e.jsxs("div",{className:"rounded-md bg-destructive/10 border border-destructive/20 p-3",children:[e.jsx("p",{className:"text-sm text-destructive font-medium",children:""}),e.jsx("p",{className:"text-xs text-destructive/80 mt-1",children:Ne})]}),!Ne&&fe&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex items-center gap-2",children:we&&we.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-green-500"}),e.jsxs("span",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:[" (",we.length," )"]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:""})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{className:"text-sm font-medium",children:""}),e.jsx(st,{className:"h-40 rounded-md bg-muted p-3",children:e.jsx("div",{className:"text-sm break-words",children:ve()})})]}),Object.keys(A).length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{className:"text-sm font-medium",children:""}),e.jsx(st,{className:"h-32 rounded-md border p-3",children:e.jsx("div",{className:"space-y-2",children:Object.entries(A).map(([G,W])=>e.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[e.jsxs("span",{className:"font-mono font-semibold text-primary min-w-[80px]",children:["[",G,"]"]}),e.jsx("span",{className:"text-muted-foreground",children:"="}),e.jsx("span",{className:"font-mono bg-muted px-2 py-0.5 rounded",children:W})]},G))})})]}),Object.keys(A).length>0&&V&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{className:"text-sm font-medium",children:"Reaction "}),e.jsx(st,{className:"h-48 rounded-md bg-blue-50 dark:bg-blue-950/30 border border-blue-200 dark:border-blue-800 p-3",children:e.jsx("div",{className:"text-sm break-words",children:T})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"reaction  [name] "})]})]}),e.jsxs("div",{className:"rounded-md bg-blue-50 dark:bg-blue-950/30 border border-blue-200 dark:border-blue-800 p-3 space-y-1",children:[e.jsx("p",{className:"text-xs font-medium text-blue-900 dark:text-blue-100",children:" "}),e.jsxs("ul",{className:"text-xs text-blue-700 dark:text-blue-300 space-y-1 list-disc list-inside",children:[e.jsx("li",{children:""}),e.jsx("li",{children:""}),e.jsx("li",{children:"Reaction "}),e.jsx("li",{children:""})]})]})]})]})})]})]})},S=()=>{h({...n,keyword_rules:[...n.keyword_rules,{keywords:[],reaction:""}]})},w=z=>{h({...n,keyword_rules:n.keyword_rules.filter((V,Y)=>Y!==z)})},L=(z,V,Y)=>{const E=[...n.keyword_rules];typeof Y=="string"&&(E[z]={...E[z],reaction:Y}),h({...n,keyword_rules:E})},F=z=>{const V=[...n.keyword_rules];V[z]={...V[z],keywords:[...V[z].keywords||[],""]},h({...n,keyword_rules:V})},B=(z,V)=>{const Y=[...n.keyword_rules];Y[z]={...Y[z],keywords:(Y[z].keywords||[]).filter((E,R)=>R!==V)},h({...n,keyword_rules:Y})},O=(z,V,Y)=>{const E=[...n.keyword_rules],R=[...E[z].keywords||[]];R[V]=Y,E[z]={...E[z],keywords:R},h({...n,keyword_rules:E})},K=({rule:z})=>{const V=`{ regex = [${(z.regex||[]).map(Y=>`"${Y}"`).join(", ")}], reaction = "${z.reaction}" }`;return e.jsxs(Ua,{children:[e.jsx(Ba,{asChild:!0,children:e.jsxs(b,{variant:"outline",size:"sm",children:[e.jsx(Ws,{className:"h-4 w-4 mr-1"}),""]})}),e.jsx(_a,{className:"w-[95vw] sm:w-[500px]",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-sm",children:""}),e.jsx(st,{className:"h-60 rounded-md bg-muted p-3",children:e.jsx("pre",{className:"font-mono text-xs break-all",children:V})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" bot_config.toml "})]})})]})},H=({rule:z})=>{const V=`[[keyword_reaction.keyword_rules]]
keywords = [${(z.keywords||[]).map(Y=>`"${Y}"`).join(", ")}]
reaction = "${z.reaction}"`;return e.jsxs(Ua,{children:[e.jsx(Ba,{asChild:!0,children:e.jsxs(b,{variant:"outline",size:"sm",children:[e.jsx(Ws,{className:"h-4 w-4 mr-1"}),""]})}),e.jsx(_a,{className:"w-[95vw] sm:w-[500px]",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-sm",children:""}),e.jsx(st,{className:"h-60 rounded-md bg-muted p-3",children:e.jsx("pre",{className:"font-mono text-xs whitespace-pre-wrap break-all",children:V})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" bot_config.toml "})]})})]})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-base font-semibold",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:""})]}),e.jsxs(b,{onClick:p,size:"sm",variant:"outline",children:[e.jsx(hs,{className:"h-4 w-4 mr-1"}),""]})]}),e.jsxs("div",{className:"space-y-3",children:[n.regex_rules.map((z,V)=>e.jsxs("div",{className:"rounded-lg border p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm font-medium",children:[" ",V+1]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{regex:z.regex&&z.regex[0]||"",reaction:z.reaction,onRegexChange:Y=>v(V,"regex",Y),onReactionChange:Y=>v(V,"reaction",Y)}),e.jsx(K,{rule:z}),e.jsxs(bt,{children:[e.jsx(es,{asChild:!0,children:e.jsx(b,{size:"sm",variant:"ghost",children:e.jsx(at,{className:"h-4 w-4"})})}),e.jsxs(dt,{children:[e.jsxs(ut,{children:[e.jsx(ht,{children:""}),e.jsxs(xt,{children:[" ",V+1," "]})]}),e.jsxs(mt,{children:[e.jsx(pt,{children:""}),e.jsx(ft,{onClick:()=>N(V),children:""})]})]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{className:"text-xs font-medium",children:"Python "}),e.jsx(ce,{value:z.regex&&z.regex[0]||"",onChange:Y=>v(V,"regex",Y.target.value),placeholder:"^(?P<n>\\\\S{1,20})$ ",className:"font-mono text-sm"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:' (?P<name>pattern) reaction  [name] ""'})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{className:"text-xs font-medium",children:""}),e.jsx(Ft,{value:z.reaction,onChange:Y=>v(V,"reaction",Y.target.value),placeholder:`...
 [] `,rows:3,className:"text-sm"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" []  [n] "})]})]})]},V)),n.regex_rules.length===0&&e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:'""'})]})]}),e.jsxs("div",{className:"space-y-4 border-t pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-base font-semibold",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:""})]}),e.jsxs(b,{onClick:S,size:"sm",variant:"outline",children:[e.jsx(hs,{className:"h-4 w-4 mr-1"}),""]})]}),e.jsxs("div",{className:"space-y-3",children:[n.keyword_rules.map((z,V)=>e.jsxs("div",{className:"rounded-lg border p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm font-medium",children:[" ",V+1]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(H,{rule:z}),e.jsxs(bt,{children:[e.jsx(es,{asChild:!0,children:e.jsx(b,{size:"sm",variant:"ghost",children:e.jsx(at,{className:"h-4 w-4"})})}),e.jsxs(dt,{children:[e.jsxs(ut,{children:[e.jsx(ht,{children:""}),e.jsxs(xt,{children:[" ",V+1," "]})]}),e.jsxs(mt,{children:[e.jsx(pt,{children:""}),e.jsx(ft,{onClick:()=>w(V),children:""})]})]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(y,{className:"text-xs font-medium",children:""}),e.jsxs(b,{onClick:()=>F(V),size:"sm",variant:"ghost",children:[e.jsx(hs,{className:"h-3 w-3 mr-1"}),""]})]}),e.jsxs("div",{className:"space-y-2",children:[(z.keywords||[]).map((Y,E)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ce,{value:Y,onChange:R=>O(V,E,R.target.value),placeholder:"",className:"flex-1"}),e.jsx(b,{onClick:()=>B(V,E),size:"sm",variant:"ghost",children:e.jsx(at,{className:"h-4 w-4"})})]},E)),(!z.keywords||z.keywords.length===0)&&e.jsx("p",{className:"text-xs text-muted-foreground text-center py-2",children:'""'})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{className:"text-xs font-medium",children:""}),e.jsx(Ft,{value:z.reaction,onChange:Y=>L(V,"reaction",Y.target.value),placeholder:"...",rows:3,className:"text-sm"})]})]})]},V)),n.keyword_rules.length===0&&e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:'""'})]})]})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:""}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Qe,{id:"enable_response_post_process",checked:r.enable_response_post_process,onCheckedChange:z=>x({...r,enable_response_post_process:z})}),e.jsx(y,{htmlFor:"enable_response_post_process",className:"cursor-pointer",children:""})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:""})]}),r.enable_response_post_process&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"border-t pt-6 space-y-4",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(Qe,{id:"enable_chinese_typo",checked:c.enable,onCheckedChange:z=>f({...c,enable:z})}),e.jsx(y,{htmlFor:"enable_chinese_typo",className:"cursor-pointer font-semibold",children:""})]}),e.jsx("p",{className:"text-xs text-muted-foreground mb-4",children:""}),c.enable&&e.jsxs("div",{className:"grid gap-4 pl-6 border-l-2 border-primary/20",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{htmlFor:"error_rate",className:"text-xs font-medium",children:""}),e.jsx(ce,{id:"error_rate",type:"number",step:"0.001",min:"0",max:"1",value:c.error_rate,onChange:z=>f({...c,error_rate:parseFloat(z.target.value)})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{htmlFor:"min_freq",className:"text-xs font-medium",children:""}),e.jsx(ce,{id:"min_freq",type:"number",min:"0",value:c.min_freq,onChange:z=>f({...c,min_freq:parseInt(z.target.value)})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{htmlFor:"tone_error_rate",className:"text-xs font-medium",children:""}),e.jsx(ce,{id:"tone_error_rate",type:"number",step:"0.01",min:"0",max:"1",value:c.tone_error_rate,onChange:z=>f({...c,tone_error_rate:parseFloat(z.target.value)})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{htmlFor:"word_replace_rate",className:"text-xs font-medium",children:""}),e.jsx(ce,{id:"word_replace_rate",type:"number",step:"0.001",min:"0",max:"1",value:c.word_replace_rate,onChange:z=>f({...c,word_replace_rate:parseFloat(z.target.value)})})]})]})]})}),e.jsx("div",{className:"border-t pt-6 space-y-4",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(Qe,{id:"enable_response_splitter",checked:d.enable,onCheckedChange:z=>j({...d,enable:z})}),e.jsx(y,{htmlFor:"enable_response_splitter",className:"cursor-pointer font-semibold",children:""})]}),e.jsx("p",{className:"text-xs text-muted-foreground mb-4",children:""}),d.enable&&e.jsxs("div",{className:"grid gap-4 pl-6 border-l-2 border-primary/20",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{htmlFor:"max_length",className:"text-xs font-medium",children:""}),e.jsx(ce,{id:"max_length",type:"number",min:"1",value:d.max_length,onChange:z=>j({...d,max_length:parseInt(z.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{htmlFor:"max_sentence_num",className:"text-xs font-medium",children:""}),e.jsx(ce,{id:"max_sentence_num",type:"number",min:"1",value:d.max_sentence_num,onChange:z=>j({...d,max_sentence_num:parseInt(z.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Qe,{id:"enable_kaomoji_protection",checked:d.enable_kaomoji_protection,onCheckedChange:z=>j({...d,enable_kaomoji_protection:z})}),e.jsx(y,{htmlFor:"enable_kaomoji_protection",className:"cursor-pointer",children:""})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Qe,{id:"enable_overflow_return_all",checked:d.enable_overflow_return_all,onCheckedChange:z=>j({...d,enable_overflow_return_all:z})}),e.jsx(y,{htmlFor:"enable_overflow_return_all",className:"cursor-pointer",children:""})]}),e.jsx("p",{className:"text-xs text-muted-foreground -mt-2",children:""})]})]})})]})]})]})}function q0({config:n,onChange:r}){return e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:""}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Qe,{checked:n.enable_mood,onCheckedChange:c=>r({...n,enable_mood:c})}),e.jsx(y,{className:"cursor-pointer",children:""})]}),n.enable_mood&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{children:""}),e.jsx(ce,{type:"number",min:"1",value:n.mood_update_threshold,onChange:c=>r({...n,mood_update_threshold:parseInt(c.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{children:""}),e.jsx(Ft,{value:n.emotion_style,onChange:c=>r({...n,emotion_style:c.target.value}),placeholder:"",rows:2})]})]})]})]})}function G0({config:n,onChange:r}){return e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:""}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Qe,{checked:n.enable_asr,onCheckedChange:c=>r({...n,enable_asr:c})}),e.jsx(y,{className:"cursor-pointer",children:""})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})}function V0({config:n,onChange:r}){return e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"LPMM "}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Qe,{checked:n.enable,onCheckedChange:c=>r({...n,enable:c})}),e.jsx(y,{className:"cursor-pointer",children:" LPMM "})]}),n.enable&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{children:"LPMM "}),e.jsxs(qe,{value:n.lpmm_mode,onValueChange:c=>r({...n,lpmm_mode:c}),children:[e.jsx(Be,{children:e.jsx(Ge,{placeholder:" LPMM "})}),e.jsxs(He,{children:[e.jsx(ie,{value:"classic",children:""}),e.jsx(ie,{value:"agent",children:"Agent "})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{children:" TopK"}),e.jsx(ce,{type:"number",min:"1",value:n.rag_synonym_search_top_k,onChange:c=>r({...n,rag_synonym_search_top_k:parseInt(c.target.value)})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{children:""}),e.jsx(ce,{type:"number",step:"0.1",min:"0",max:"1",value:n.rag_synonym_threshold,onChange:c=>r({...n,rag_synonym_threshold:parseFloat(c.target.value)})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{children:""}),e.jsx(ce,{type:"number",min:"1",value:n.info_extraction_workers,onChange:c=>r({...n,info_extraction_workers:parseInt(c.target.value)})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{children:""}),e.jsx(ce,{type:"number",min:"1",value:n.embedding_dimension,onChange:c=>r({...n,embedding_dimension:parseInt(c.target.value)})})]})]})]})]})]})}function F0({config:n,onChange:r}){const[c,d]=u.useState(""),[h,x]=u.useState("WARNING"),f=()=>{c&&!n.suppress_libraries.includes(c)&&(r({...n,suppress_libraries:[...n.suppress_libraries,c]}),d(""))},j=w=>{r({...n,suppress_libraries:n.suppress_libraries.filter(L=>L!==w)})},p=()=>{c&&!n.library_log_levels[c]&&(r({...n,library_log_levels:{...n.library_log_levels,[c]:h}}),d(""),x("WARNING"))},N=w=>{const L={...n.library_log_levels};delete L[w],r({...n,library_log_levels:L})},v=["DEBUG","INFO","WARNING","ERROR","CRITICAL"],C=["FULL","compact","lite"],S=["none","title","full"];return e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:""}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{children:""}),e.jsx(ce,{value:n.date_style,onChange:w=>r({...n,date_style:w.target.value}),placeholder:": m-d H:i:s"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"m=, d=, H=, i=, s="})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{children:""}),e.jsxs(qe,{value:n.log_level_style,onValueChange:w=>r({...n,log_level_style:w}),children:[e.jsx(Be,{children:e.jsx(Ge,{})}),e.jsx(He,{children:C.map(w=>e.jsx(ie,{value:w,children:w},w))})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{children:""}),e.jsxs(qe,{value:n.color_text,onValueChange:w=>r({...n,color_text:w}),children:[e.jsx(Be,{children:e.jsx(Ge,{})}),e.jsx(He,{children:S.map(w=>e.jsx(ie,{value:w,children:w},w))})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{children:""}),e.jsxs(qe,{value:n.log_level,onValueChange:w=>r({...n,log_level:w}),children:[e.jsx(Be,{children:e.jsx(Ge,{})}),e.jsx(He,{children:v.map(w=>e.jsx(ie,{value:w,children:w},w))})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{children:""}),e.jsxs(qe,{value:n.console_log_level,onValueChange:w=>r({...n,console_log_level:w}),children:[e.jsx(Be,{children:e.jsx(Ge,{})}),e.jsx(He,{children:v.map(w=>e.jsx(ie,{value:w,children:w},w))})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{children:""}),e.jsxs(qe,{value:n.file_log_level,onValueChange:w=>r({...n,file_log_level:w}),children:[e.jsx(Be,{children:e.jsx(Ge,{})}),e.jsx(He,{children:v.map(w=>e.jsx(ie,{value:w,children:w},w))})]})]})]})]}),e.jsxs("div",{children:[e.jsx(y,{className:"mb-2 block",children:""}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx(ce,{value:c,onChange:w=>d(w.target.value),placeholder:"",className:"flex-1",onKeyDown:w=>{w.key==="Enter"&&(w.preventDefault(),f())}}),e.jsx(b,{onClick:f,size:"sm",className:"flex-shrink-0",children:e.jsx(hs,{className:"h-4 w-4",strokeWidth:2,fill:"none"})})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:n.suppress_libraries.map(w=>e.jsxs("div",{className:"flex items-center gap-1 bg-secondary px-3 py-1 rounded-md",children:[e.jsx("span",{className:"text-sm",children:w}),e.jsx(b,{variant:"ghost",size:"sm",className:"h-5 w-5 p-0",onClick:()=>j(w),children:e.jsx(at,{className:"h-3 w-3",strokeWidth:2,fill:"none"})})]},w))})]}),e.jsxs("div",{children:[e.jsx(y,{className:"mb-2 block",children:""}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx(ce,{value:c,onChange:w=>d(w.target.value),placeholder:"",className:"flex-1"}),e.jsxs(qe,{value:h,onValueChange:x,children:[e.jsx(Be,{className:"w-32",children:e.jsx(Ge,{})}),e.jsx(He,{children:v.map(w=>e.jsx(ie,{value:w,children:w},w))})]}),e.jsx(b,{onClick:p,size:"sm",children:e.jsx(hs,{className:"h-4 w-4",strokeWidth:2,fill:"none"})})]}),e.jsx("div",{className:"space-y-2",children:Object.entries(n.library_log_levels).map(([w,L])=>e.jsxs("div",{className:"flex items-center justify-between bg-secondary px-3 py-2 rounded-md",children:[e.jsx("span",{className:"text-sm font-medium",children:w}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:L}),e.jsx(b,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>N(w),children:e.jsx(at,{className:"h-3 w-3",strokeWidth:2,fill:"none"})})]})]},w))})]})]})}function $0({config:n,onChange:r}){return e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:""}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(y,{children:" Prompt"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),e.jsx(Qe,{checked:n.show_prompt,onCheckedChange:c=>r({...n,show_prompt:c})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(y,{children:" Prompt"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),e.jsx(Qe,{checked:n.show_replyer_prompt,onCheckedChange:c=>r({...n,show_replyer_prompt:c})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(y,{children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),e.jsx(Qe,{checked:n.show_replyer_reasoning,onCheckedChange:c=>r({...n,show_replyer_reasoning:c})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(y,{children:" Jargon Prompt"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),e.jsx(Qe,{checked:n.show_jargon_prompt,onCheckedChange:c=>r({...n,show_jargon_prompt:c})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(y,{children:" Prompt"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),e.jsx(Qe,{checked:n.show_memory_prompt,onCheckedChange:c=>r({...n,show_memory_prompt:c})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(y,{children:" Planner Prompt"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:" Planner "})]}),e.jsx(Qe,{checked:n.show_planner_prompt,onCheckedChange:c=>r({...n,show_planner_prompt:c})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(y,{children:" LPMM "}),e.jsx("p",{className:"text-sm text-muted-foreground",children:" LPMM "})]}),e.jsx(Qe,{checked:n.show_lpmm_paragraph,onCheckedChange:c=>r({...n,show_lpmm_paragraph:c})})]})]})]})}function Q0({config:n,onChange:r}){const[c,d]=u.useState(""),h=()=>{c&&!n.auth_token.includes(c)&&(r({...n,auth_token:[...n.auth_token,c]}),d(""))},x=f=>{r({...n,auth_token:n.auth_token.filter((j,p)=>p!==f)})};return e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"MaimMessage "}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(y,{children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:" MaimMessage "})]}),e.jsx(Qe,{checked:n.use_custom,onCheckedChange:f=>r({...n,use_custom:f})})]}),n.use_custom&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{children:""}),e.jsx(ce,{value:n.host,onChange:f=>r({...n,host:f.target.value}),placeholder:"127.0.0.1"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{children:""}),e.jsx(ce,{type:"number",value:n.port,onChange:f=>r({...n,port:parseInt(f.target.value)}),placeholder:"8090"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{children:""}),e.jsxs(qe,{value:n.mode,onValueChange:f=>r({...n,mode:f}),children:[e.jsx(Be,{children:e.jsx(Ge,{})}),e.jsxs(He,{children:[e.jsx(ie,{value:"ws",children:"WebSocket (ws)"}),e.jsx(ie,{value:"tcp",children:"TCP"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Qe,{checked:n.use_wss,onCheckedChange:f=>r({...n,use_wss:f}),disabled:n.mode!=="ws"}),e.jsx(y,{children:" WSS "})]})]}),n.use_wss&&n.mode==="ws"&&e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{children:"SSL "}),e.jsx(ce,{value:n.cert_file,onChange:f=>r({...n,cert_file:f.target.value}),placeholder:"cert.pem"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{children:"SSL "}),e.jsx(ce,{value:n.key_file,onChange:f=>r({...n,key_file:f.target.value}),placeholder:"key.pem"})]})]})]})]})]}),e.jsxs("div",{children:[e.jsx(y,{className:"mb-2 block",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:" API "}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx(ce,{value:c,onChange:f=>d(f.target.value),placeholder:"",onKeyDown:f=>{f.key==="Enter"&&(f.preventDefault(),h())}}),e.jsx(b,{onClick:h,size:"sm",children:e.jsx(hs,{className:"h-4 w-4",strokeWidth:2,fill:"none"})})]}),e.jsx("div",{className:"space-y-2",children:n.auth_token.map((f,j)=>e.jsxs("div",{className:"flex items-center justify-between bg-secondary px-3 py-2 rounded-md",children:[e.jsx("span",{className:"text-sm font-mono",children:f}),e.jsx(b,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>x(j),children:e.jsx(at,{className:"h-3 w-3",strokeWidth:2,fill:"none"})})]},j))})]})]})}function Y0({config:n,onChange:r}){return e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:""}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(y,{children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),e.jsx(Qe,{checked:n.enable,onCheckedChange:c=>r({...n,enable:c})})]})]})}const li=u.forwardRef(({className:n,...r},c)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:c,className:Q("w-full caption-bottom text-sm",n),...r})}));li.displayName="Table";const ni=u.forwardRef(({className:n,...r},c)=>e.jsx("thead",{ref:c,className:Q("[&_tr]:border-b",n),...r}));ni.displayName="TableHeader";const ii=u.forwardRef(({className:n,...r},c)=>e.jsx("tbody",{ref:c,className:Q("[&_tr:last-child]:border-0",n),...r}));ii.displayName="TableBody";const X0=u.forwardRef(({className:n,...r},c)=>e.jsx("tfoot",{ref:c,className:Q("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",n),...r}));X0.displayName="TableFooter";const _s=u.forwardRef(({className:n,...r},c)=>e.jsx("tr",{ref:c,className:Q("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",n),...r}));_s.displayName="TableRow";const rt=u.forwardRef(({className:n,...r},c)=>e.jsx("th",{ref:c,className:Q("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",n),...r}));rt.displayName="TableHead";const Ze=u.forwardRef(({className:n,...r},c)=>e.jsx("td",{ref:c,className:Q("px-4 py-3 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",n),...r}));Ze.displayName="TableCell";const K0=u.forwardRef(({className:n,...r},c)=>e.jsx("caption",{ref:c,className:Q("mt-4 text-sm text-muted-foreground",n),...r}));K0.displayName="TableCaption";const ao=u.forwardRef(({className:n,...r},c)=>e.jsx(Vs,{ref:c,className:Q("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",n),...r}));ao.displayName=Vs.displayName;const lo=u.forwardRef(({className:n,...r},c)=>e.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[e.jsx(zs,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),e.jsx(Vs.Input,{ref:c,className:Q("flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",n),...r})]}));lo.displayName=Vs.Input.displayName;const no=u.forwardRef(({className:n,...r},c)=>e.jsx(Vs.List,{ref:c,className:Q("max-h-[300px] overflow-y-auto overflow-x-hidden",n),...r}));no.displayName=Vs.List.displayName;const io=u.forwardRef((n,r)=>e.jsx(Vs.Empty,{ref:r,className:"py-6 text-center text-sm",...n}));io.displayName=Vs.Empty.displayName;const fr=u.forwardRef(({className:n,...r},c)=>e.jsx(Vs.Group,{ref:c,className:Q("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",n),...r}));fr.displayName=Vs.Group.displayName;const Z0=u.forwardRef(({className:n,...r},c)=>e.jsx(Vs.Separator,{ref:c,className:Q("-mx-1 h-px bg-border",n),...r}));Z0.displayName=Vs.Separator.displayName;const pr=u.forwardRef(({className:n,...r},c)=>e.jsx(Vs.Item,{ref:c,className:Q("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",n),...r}));pr.displayName=Vs.Item.displayName;const Cs=u.forwardRef(({className:n,...r},c)=>e.jsx(Kp,{ref:c,className:Q("grid place-content-center peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",n),...r,children:e.jsx(Pb,{className:Q("grid place-content-center text-current"),children:e.jsx(Na,{className:"h-4 w-4"})})}));Cs.displayName=Kp.displayName;const Cg=u.createContext(null),kg="maibot-completed-tours";function J0(){try{const n=localStorage.getItem(kg);return n?new Set(JSON.parse(n)):new Set}catch{return new Set}}function lp(n){localStorage.setItem(kg,JSON.stringify([...n]))}function I0({children:n}){const[r,c]=u.useState({activeTourId:null,stepIndex:0,isRunning:!1}),d=u.useRef(new Map),[,h]=u.useState(0),[x,f]=u.useState(J0),j=u.useCallback((H,z)=>{d.current.set(H,z),h(V=>V+1)},[]),p=u.useCallback(H=>{d.current.delete(H),c(z=>z.activeTourId===H?{...z,activeTourId:null,isRunning:!1,stepIndex:0}:z)},[]),N=u.useCallback((H,z=0)=>{d.current.has(H)&&c({activeTourId:H,stepIndex:z,isRunning:!0})},[]),v=u.useCallback(()=>{c(H=>({...H,isRunning:!1}))},[]),C=u.useCallback(H=>{c(z=>({...z,stepIndex:H}))},[]),S=u.useCallback(()=>{c(H=>({...H,stepIndex:H.stepIndex+1}))},[]),w=u.useCallback(()=>{c(H=>({...H,stepIndex:Math.max(0,H.stepIndex-1)}))},[]),L=u.useCallback(()=>r.activeTourId?d.current.get(r.activeTourId)||[]:[],[r.activeTourId]),F=u.useCallback(H=>{f(z=>{const V=new Set(z);return V.add(H),lp(V),V})},[]),B=u.useCallback(H=>{const{action:z,index:V,status:Y,type:E}=H,R=["finished","skipped"];if(z==="close"){c(ne=>({...ne,isRunning:!1,stepIndex:0}));return}R.includes(Y)?c(ne=>(Y==="finished"&&ne.activeTourId&&setTimeout(()=>F(ne.activeTourId),0),{...ne,isRunning:!1,stepIndex:0})):E==="step:after"&&(z==="next"?c(ne=>({...ne,stepIndex:V+1})):z==="prev"&&c(ne=>({...ne,stepIndex:V-1})))},[F]),O=u.useCallback(H=>x.has(H),[x]),K=u.useCallback(H=>{f(z=>{const V=new Set(z);return V.delete(H),lp(V),V})},[]);return e.jsx(Cg.Provider,{value:{state:r,tours:d.current,registerTour:j,unregisterTour:p,startTour:N,stopTour:v,goToStep:C,nextStep:S,prevStep:w,getCurrentSteps:L,handleJoyrideCallback:B,isTourCompleted:O,markTourCompleted:F,resetTourCompleted:K},children:n})}function Xu(){const n=u.useContext(Cg);if(!n)throw new Error("useTour must be used within a TourProvider");return n}const P0={options:{zIndex:1e4,primaryColor:"hsl(var(--primary))",textColor:"hsl(var(--foreground))",backgroundColor:"hsl(var(--background))",arrowColor:"hsl(var(--background))",overlayColor:"rgba(0, 0, 0, 0.5)"},tooltip:{borderRadius:"var(--radius)",padding:"1rem"},tooltipContainer:{textAlign:"left"},tooltipTitle:{fontSize:"1rem",fontWeight:600,marginBottom:"0.5rem"},tooltipContent:{fontSize:"0.875rem",padding:"0.5rem 0"},buttonNext:{backgroundColor:"hsl(var(--primary))",color:"hsl(var(--primary-foreground))",borderRadius:"calc(var(--radius) - 2px)",fontSize:"0.875rem",padding:"0.5rem 1rem"},buttonBack:{color:"hsl(var(--muted-foreground))",fontSize:"0.875rem",marginRight:"0.5rem"},buttonSkip:{color:"hsl(var(--muted-foreground))",fontSize:"0.875rem"},buttonClose:{color:"hsl(var(--muted-foreground))"},spotlight:{borderRadius:"var(--radius)"}},W0={back:"",close:"",last:"",next:"",nextLabelWithProgress:" ({step}/{steps})",open:"",skip:""};function ew(){const{state:n,getCurrentSteps:r,handleJoyrideCallback:c}=Xu(),d=r(),[h,x]=u.useState(!1),f=u.useRef(n.stepIndex),j=u.useRef(null);u.useEffect(()=>{f.current!==n.stepIndex&&(x(!1),f.current=n.stepIndex)},[n.stepIndex]),u.useEffect(()=>{if(!n.isRunning||d.length===0){x(!1);return}const v=d[n.stepIndex];if(!v){x(!1);return}const C=v.target;if(C==="body"){x(!0);return}x(!1);const S=setTimeout(()=>{const w=()=>{const O=document.querySelector(C);if(O){const K=O.getBoundingClientRect();if(K.width>0&&K.height>0)return!0}return!1};if(w()){setTimeout(()=>x(!0),100);return}const L=setInterval(()=>{w()&&(clearInterval(L),setTimeout(()=>x(!0),100))},100),F=setTimeout(()=>{clearInterval(L),x(!0)},5e3),B=()=>{clearInterval(L),clearTimeout(F)};j.current=B},150);return()=>{clearTimeout(S),j.current&&(j.current(),j.current=null)}},[n.isRunning,n.stepIndex,d]);const p=u.useRef(null);if(u.useEffect(()=>{let v=document.getElementById("tour-portal-container");return v||(v=document.createElement("div"),v.id="tour-portal-container",v.style.cssText="position: fixed; top: 0; left: 0; z-index: 99999; pointer-events: none;",document.body.appendChild(v)),p.current=v,()=>{}},[]),!n.isRunning||d.length===0||!h)return null;const N=e.jsx(Fy,{steps:d,stepIndex:n.stepIndex,run:n.isRunning,continuous:!0,showSkipButton:!0,showProgress:!0,disableOverlayClose:!0,disableScrolling:!1,disableScrollParentFix:!1,callback:c,styles:P0,locale:W0,scrollOffset:80,scrollToFirstStep:!0,floaterProps:{styles:{floater:{zIndex:99999}},disableAnimation:!0}},`tour-step-${n.stepIndex}`);return p.current?eb.createPortal(N,p.current):N}const il="model-assignment-tour",Tg=[{target:"body",content:"",placement:"center",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="sidebar-model-provider"]',content:' DeepSeek Siliconflow""',placement:"right",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="add-provider-button"]',content:'""',placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!0,hideFooter:!0},{target:'[data-tour="provider-dialog"]',content:"",placement:"left",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="provider-name-input"]',content:"",placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="provider-apikey-input"]',content:" API  API ",placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="provider-url-input"]',content:" API API ",placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="provider-template-select"]',content:"",placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="provider-save-button"]',content:"",placement:"top",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="provider-cancel-button"]',content:"",placement:"top",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!0,hideFooter:!0},{target:'[data-tour="sidebar-model-management"]',content:'""',placement:"right",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="add-model-button"]',content:'""',placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!0,hideFooter:!0},{target:'[data-tour="model-dialog"]',content:"",placement:"left",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="model-name-input"]',content:"",placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="model-provider-select"]',content:"",placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="model-identifier-input"]',content:"",placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="model-save-button"]',content:"",placement:"top",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="model-cancel-button"]',content:"",placement:"top",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!0,hideFooter:!0},{target:'[data-tour="tasks-tab-trigger"]',content:'""',placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!0,hideFooter:!0},{target:'[data-tour="task-model-select"]',content:"",placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1}],Eg={0:"/config/model",1:"/config/model",2:"/config/modelProvider",3:"/config/modelProvider",4:"/config/modelProvider",5:"/config/modelProvider",6:"/config/modelProvider",7:"/config/modelProvider",8:"/config/modelProvider",9:"/config/modelProvider",10:"/config/modelProvider",11:"/config/model",12:"/config/model",13:"/config/model",14:"/config/model",15:"/config/model",16:"/config/model",17:"/config/model",18:"/config/model",19:"/config/model"},lr=[{id:"siliconflow",name:"SiliconFlow",base_url:"https://api.siliconflow.cn/v1",client_type:"openai",display_name:" (SiliconFlow)",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"deepseek",name:"DeepSeek",base_url:"https://api.deepseek.com",client_type:"openai",display_name:"DeepSeek",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"rinkoai",name:"RinkoAI",base_url:"https://rinkoai.com/v1",client_type:"openai",display_name:"RinkoAI",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"zhipu",name:"ZhipuAI",base_url:"https://open.bigmodel.cn/api/paas/v4",client_type:"openai",display_name:" AI (ZhipuAI / GLM)",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"moonshot",name:"Moonshot",base_url:"https://api.moonshot.cn/v1",client_type:"openai",display_name:" (Moonshot / Kimi)",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"doubao",name:"Doubao",base_url:"https://ark.cn-beijing.volces.com/api/v3",client_type:"openai",display_name:" (Doubao)",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"alibaba",name:"Alibaba",base_url:"https://dashscope.aliyuncs.com/compatible-mode/v1",client_type:"openai",display_name:" (Alibaba Qwen)",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"baichuan",name:"Baichuan",base_url:"https://api.baichuan-ai.com/v1",client_type:"openai",display_name:" (Baichuan)",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"minimax",name:"MiniMax",base_url:"https://api.minimax.chat/v1",client_type:"openai",display_name:"MiniMax ( AI)",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"stepfun",name:"StepFun",base_url:"https://api.stepfun.com/v1",client_type:"openai",display_name:" (StepFun)",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"lingyi",name:"Lingyi",base_url:"https://api.lingyiwanwu.com/v1",client_type:"openai",display_name:" (Lingyi / Yi)",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"openai",name:"OpenAI",base_url:"https://api.openai.com/v1",client_type:"openai",display_name:"OpenAI",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"xai",name:"xAI",base_url:"https://api.x.ai/v1",client_type:"openai",display_name:"xAI (Grok)",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"anthropic",name:"Anthropic",base_url:"https://api.anthropic.com/v1",client_type:"openai",display_name:"Anthropic (Claude)"},{id:"gemini",name:"Gemini",base_url:"https://generativelanguage.googleapis.com/v1beta",client_type:"gemini",display_name:"Google Gemini",modelFetcher:{endpoint:"/models",parser:"gemini"}},{id:"cohere",name:"Cohere",base_url:"https://api.cohere.ai/v1",client_type:"openai",display_name:"Cohere"},{id:"groq",name:"Groq",base_url:"https://api.groq.com/openai/v1",client_type:"openai",display_name:"Groq",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"together",name:"Together AI",base_url:"https://api.together.xyz/v1",client_type:"openai",display_name:"Together AI",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"fireworks",name:"Fireworks",base_url:"https://api.fireworks.ai/inference/v1",client_type:"openai",display_name:"Fireworks AI",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"mistral",name:"Mistral",base_url:"https://api.mistral.ai/v1",client_type:"openai",display_name:"Mistral AI",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"perplexity",name:"Perplexity",base_url:"https://api.perplexity.ai",client_type:"openai",display_name:"Perplexity AI"},{id:"custom",name:"",base_url:"",client_type:"openai",display_name:""}];function np(n){return n?n.replace(/\/+$/,"").toLowerCase():""}function tw(n){if(!n)return null;const r=np(n);return lr.find(c=>c.id!=="custom"&&np(c.base_url)===r)||null}function sw(){const[n,r]=u.useState([]),[c,d]=u.useState(!0),[h,x]=u.useState(!1),[f,j]=u.useState(!1),[p,N]=u.useState(!1),[v,C]=u.useState(!1),[S,w]=u.useState(!1),[L,F]=u.useState(!1),[B,O]=u.useState(null),[K,H]=u.useState(null),[z,V]=u.useState("custom"),[Y,E]=u.useState(!1),[R,ne]=u.useState(!1),[fe,Ce]=u.useState(null),[we,pe]=u.useState(!1),[Ne,be]=u.useState(""),[A,X]=u.useState(new Set),[T,te]=u.useState(!1),[_,me]=u.useState(1),[oe,ae]=u.useState(20),[xe,ve]=u.useState(""),[de,G]=u.useState({}),[W,U]=u.useState(new Set),[ee,Se]=u.useState(new Map),{toast:Me}=Xt(),tt=fa(),{state:Xe,goToStep:Ut,registerTour:Bt}=Xu(),re=u.useRef(null),ke=u.useRef(!0);u.useEffect(()=>{Bt(il,Tg)},[Bt]),u.useEffect(()=>{if(Xe.activeTourId===il&&Xe.isRunning){const P=Eg[Xe.stepIndex];P&&!window.location.pathname.endsWith(P.replace("/config/",""))&&tt({to:P})}},[Xe.stepIndex,Xe.activeTourId,Xe.isRunning,tt]);const Pe=u.useRef(Xe.stepIndex);u.useEffect(()=>{if(Xe.activeTourId===il&&Xe.isRunning){const P=Pe.current,ye=Xe.stepIndex;P>=3&&P<=9&&ye<3&&F(!1),P>=10&&ye>=3&&ye<=9&&(G({}),V("custom"),O({name:"",base_url:"",api_key:"",client_type:"openai",max_retry:2,timeout:30,retry_interval:10}),H(null),pe(!1),F(!0)),Pe.current=ye}},[Xe.stepIndex,Xe.activeTourId,Xe.isRunning]),u.useEffect(()=>{if(Xe.activeTourId!==il||!Xe.isRunning)return;const P=ye=>{const Re=ye.target,us=Xe.stepIndex;us===2&&Re.closest('[data-tour="add-provider-button"]')?setTimeout(()=>Ut(3),300):us===9&&Re.closest('[data-tour="provider-cancel-button"]')&&setTimeout(()=>Ut(10),300)};return document.addEventListener("click",P,!0),()=>document.removeEventListener("click",P,!0)},[Xe,Ut]),u.useEffect(()=>{Fe()},[]);const Fe=async()=>{try{d(!0);const P=await ei();r(P.api_providers||[]),N(!1),ke.current=!1}catch(P){console.error(":",P)}finally{d(!1)}},ts=async()=>{try{C(!0),so().catch(()=>{}),w(!0)}catch(P){console.error(":",P),w(!1),Me({title:"",description:"",variant:"destructive"}),C(!1)}},As=async()=>{try{x(!0),re.current&&clearTimeout(re.current);const P=await ei();P.api_providers=n,await eo(P),N(!1),Me({title:"",description:"..."}),await ts()}catch(P){console.error(":",P),Me({title:"",description:P.message,variant:"destructive"}),x(!1)}},js=()=>{localStorage.removeItem("access-token"),window.location.href="/auth"},Ke=()=>{w(!1),C(!1),Me({title:"",description:"",variant:"destructive"})},D=u.useCallback(async P=>{if(!ke.current)try{j(!0),await Ou("api_providers",P),N(!1)}catch(ye){console.error(":",ye),N(!0)}finally{j(!1)}},[]);u.useEffect(()=>{if(!ke.current)return N(!0),re.current&&clearTimeout(re.current),re.current=setTimeout(()=>{D(n)},2e3),()=>{re.current&&clearTimeout(re.current)}},[n,D]);const De=async()=>{try{x(!0),re.current&&clearTimeout(re.current);const P=await ei();P.api_providers=n,await eo(P),N(!1),Me({title:"",description:""})}catch(P){console.error(":",P),Me({title:"",description:P.message,variant:"destructive"})}finally{x(!1)}},ze=(P,ye)=>{if(G({}),P){const Re=lr.find(us=>us.base_url===P.base_url&&us.client_type===P.client_type);V(Re?.id||"custom"),O(P)}else V("custom"),O({name:"",base_url:"",api_key:"",client_type:"openai",max_retry:2,timeout:30,retry_interval:10});H(ye),pe(!1),F(!0)},Ve=P=>{V(P),E(!1);const ye=lr.find(Re=>Re.id===P);ye&&ye.id!=="custom"?O(Re=>({...Re,name:ye.name,base_url:ye.base_url,client_type:ye.client_type})):ye?.id==="custom"&&O(Re=>({...Re,name:"",base_url:"",client_type:"openai"}))},At=u.useMemo(()=>z!=="custom",[z]),We=async()=>{if(B?.api_key)try{await navigator.clipboard.writeText(B.api_key),Me({title:"",description:"API Key "})}catch{Me({title:"",description:"",variant:"destructive"})}},ss=()=>{if(!B)return;const P={};if(B.name?.trim()||(P.name=""),B.base_url?.trim()||(P.base_url=" URL"),B.api_key?.trim()||(P.api_key=" API Key"),Object.keys(P).length>0){G(P);return}G({});const ye={...B,max_retry:B.max_retry??2,timeout:B.timeout??30,retry_interval:B.retry_interval??10};if(K!==null){const Re=[...n];Re[K]=ye,r(Re)}else r([...n,ye]);F(!1),O(null),H(null)},gt=P=>{if(!P&&B){const ye={...B,max_retry:B.max_retry??2,timeout:B.timeout??30,retry_interval:B.retry_interval??10};O(ye)}F(P)},_e=P=>{Ce(P),ne(!0)},je=()=>{if(fe!==null){const P=n.filter((ye,Re)=>Re!==fe);r(P),Me({title:"",description:""})}ne(!1),Ce(null)},yt=P=>{const ye=new Set(A);ye.has(P)?ye.delete(P):ye.add(P),X(ye)},Ht=()=>{if(A.size===Kt.length)X(new Set);else{const P=Kt.map((ye,Re)=>n.findIndex(us=>us===Kt[Re]));X(new Set(P))}},pa=()=>{if(A.size===0){Me({title:"",description:"",variant:"default"});return}te(!0)},Ts=()=>{const P=n.filter((ye,Re)=>!A.has(Re));r(P),X(new Set),te(!1),Me({title:"",description:` ${A.size} `})},Kt=n.filter(P=>{if(!Ne)return!0;const ye=Ne.toLowerCase();return P.name.toLowerCase().includes(ye)||P.base_url.toLowerCase().includes(ye)||P.client_type.toLowerCase().includes(ye)}),Ms=Math.ceil(Kt.length/oe),Ds=Kt.slice((_-1)*oe,_*oe),Ha=()=>{const P=parseInt(xe);P>=1&&P<=Ms&&(me(P),ve(""))},Fs=async P=>{U(ye=>new Set(ye).add(P));try{const ye=await C0(P);Se(Re=>new Map(Re).set(P,ye)),ye.network_ok?ye.api_key_valid===!0?Me({title:"",description:`${P} API Key  (${ye.latency_ms}ms)`}):ye.api_key_valid===!1?Me({title:" Key ",description:`${P}  API Key `,variant:"destructive"}):Me({title:"",description:`${P}  (${ye.latency_ms}ms)`}):Me({title:"",description:ye.error||"",variant:"destructive"})}catch(ye){Me({title:"",description:ye.message,variant:"destructive"})}finally{U(ye=>{const Re=new Set(ye);return Re.delete(P),Re})}},qa=async()=>{for(const P of n)await Fs(P.name)},Sa=P=>{const ye=W.has(P),Re=ee.get(P);return ye?e.jsxs(Je,{variant:"secondary",className:"gap-1",children:[e.jsx(Ss,{className:"h-3 w-3 animate-spin"}),""]}):Re?Re.network_ok?Re.api_key_valid===!0?e.jsxs(Je,{className:"gap-1 bg-green-600 hover:bg-green-700",children:[e.jsx(ha,{className:"h-3 w-3"}),""]}):Re.api_key_valid===!1?e.jsxs(Je,{variant:"destructive",className:"gap-1",children:[e.jsx(Oa,{className:"h-3 w-3"}),"Key"]}):e.jsxs(Je,{className:"gap-1 bg-blue-600 hover:bg-blue-700",children:[e.jsx(ha,{className:"h-3 w-3"}),""]}):e.jsxs(Je,{variant:"destructive",className:"gap-1",children:[e.jsx(sg,{className:"h-3 w-3"}),""]}):null};return c?e.jsx("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("p",{className:"text-muted-foreground",children:"..."})})}):e.jsxs("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"AI"}),e.jsx("p",{className:"text-muted-foreground mt-1 sm:mt-2 text-sm sm:text-base",children:" AI  API "})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[A.size>0&&e.jsxs(b,{onClick:pa,size:"sm",variant:"destructive",className:"w-full sm:w-auto",children:[e.jsx(at,{className:"mr-2 h-4 w-4",strokeWidth:2,fill:"none"})," (",A.size,")"]}),e.jsxs(b,{onClick:qa,size:"sm",variant:"outline",className:"w-full sm:w-auto",disabled:n.length===0||W.size>0,children:[e.jsx(ln,{className:"mr-2 h-4 w-4"}),W.size>0?` (${W.size})`:""]}),e.jsxs(b,{onClick:()=>ze(null,null),size:"sm",className:"w-full sm:w-auto","data-tour":"add-provider-button",children:[e.jsx(hs,{className:"mr-2 h-4 w-4",strokeWidth:2,fill:"none"}),""]}),e.jsxs(b,{onClick:De,disabled:h||f||!p||v,size:"sm",variant:"outline",className:"w-full sm:w-auto sm:min-w-[120px]",children:[e.jsx(jr,{className:"mr-2 h-4 w-4",strokeWidth:2,fill:"none"}),h?"...":f?"...":p?"":""]}),e.jsxs(bt,{children:[e.jsx(es,{asChild:!0,children:e.jsxs(b,{disabled:h||f||v,size:"sm",className:"w-full sm:w-auto sm:min-w-[120px]",children:[e.jsx(gr,{className:"mr-2 h-4 w-4"}),v?"...":p?"":""]})}),e.jsxs(dt,{children:[e.jsxs(ut,{children:[e.jsx(ht,{children:""}),e.jsx(xt,{asChild:!0,children:e.jsx("div",{children:e.jsx("p",{children:p?",":","})})})]}),e.jsxs(mt,{children:[e.jsx(pt,{children:""}),e.jsx(ft,{onClick:p?As:ts,children:p?"":""})]})]})]})]})]}),e.jsxs(cl,{children:[e.jsx(Ra,{className:"h-4 w-4"}),e.jsxs(ol,{children:["",e.jsx("strong",{children:""}),'""']})]}),e.jsxs(st,{className:"h-[calc(100vh-260px)]",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2 mb-4",children:[e.jsxs("div",{className:"relative w-full sm:flex-1 sm:max-w-sm",children:[e.jsx(zs,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(ce,{placeholder:"URL ...",value:Ne,onChange:P=>be(P.target.value),className:"pl-9"})]}),Ne&&e.jsxs("p",{className:"text-sm text-muted-foreground whitespace-nowrap",children:[" ",Kt.length," "]})]}),e.jsx("div",{className:"md:hidden space-y-3",children:Kt.length===0?e.jsx("div",{className:"text-center text-muted-foreground py-8 rounded-lg border bg-card",children:Ne?"":'""'}):Ds.map((P,ye)=>{const Re=n.findIndex(us=>us===P);return e.jsxs("div",{className:"rounded-lg border bg-card p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("h3",{className:"font-semibold text-base truncate",children:P.name}),Sa(P.name)]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1 break-all",children:P.base_url})]}),e.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[e.jsx(b,{variant:"outline",size:"sm",onClick:()=>Fs(P.name),disabled:W.has(P.name),title:"",children:W.has(P.name)?e.jsx(Ss,{className:"h-4 w-4 animate-spin"}):e.jsx(ln,{className:"h-4 w-4"})}),e.jsx(b,{variant:"default",size:"sm",onClick:()=>ze(P,Re),children:e.jsx(nn,{className:"h-4 w-4",strokeWidth:2,fill:"none"})}),e.jsx(b,{size:"sm",onClick:()=>_e(Re),className:"bg-red-600 hover:bg-red-700 text-white",children:e.jsx(at,{className:"h-4 w-4",strokeWidth:2,fill:"none"})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground text-xs",children:""}),e.jsx("p",{className:"font-medium",children:P.client_type})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground text-xs",children:""}),e.jsx("p",{className:"font-medium",children:P.max_retry})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground text-xs",children:"()"}),e.jsx("p",{className:"font-medium",children:P.timeout})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground text-xs",children:"()"}),e.jsx("p",{className:"font-medium",children:P.retry_interval})]})]})]},ye)})}),e.jsx("div",{className:"hidden md:block rounded-lg border bg-card overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(li,{children:[e.jsx(ni,{children:e.jsxs(_s,{children:[e.jsx(rt,{className:"w-12",children:e.jsx(Cs,{checked:A.size===Kt.length&&Kt.length>0,onCheckedChange:Ht})}),e.jsx(rt,{children:""}),e.jsx(rt,{children:""}),e.jsx(rt,{children:"URL"}),e.jsx(rt,{children:""}),e.jsx(rt,{className:"text-right",children:""}),e.jsx(rt,{className:"text-right",children:"()"}),e.jsx(rt,{className:"text-right",children:"()"}),e.jsx(rt,{className:"text-right",children:""})]})}),e.jsx(ii,{children:Ds.length===0?e.jsx(_s,{children:e.jsx(Ze,{colSpan:9,className:"text-center text-muted-foreground py-8",children:Ne?"":'""'})}):Ds.map((P,ye)=>{const Re=n.findIndex(us=>us===P);return e.jsxs(_s,{children:[e.jsx(Ze,{children:e.jsx(Cs,{checked:A.has(Re),onCheckedChange:()=>yt(Re)})}),e.jsx(Ze,{children:Sa(P.name)||e.jsx(Je,{variant:"outline",className:"text-muted-foreground",children:""})}),e.jsx(Ze,{className:"font-medium",children:P.name}),e.jsx(Ze,{className:"max-w-xs truncate",title:P.base_url,children:P.base_url}),e.jsx(Ze,{children:P.client_type}),e.jsx(Ze,{className:"text-right",children:P.max_retry}),e.jsx(Ze,{className:"text-right",children:P.timeout}),e.jsx(Ze,{className:"text-right",children:P.retry_interval}),e.jsx(Ze,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(b,{variant:"outline",size:"sm",onClick:()=>Fs(P.name),disabled:W.has(P.name),title:"",children:W.has(P.name)?e.jsx(Ss,{className:"h-4 w-4 animate-spin"}):e.jsx(ln,{className:"h-4 w-4"})}),e.jsxs(b,{variant:"default",size:"sm",onClick:()=>ze(P,Re),children:[e.jsx(nn,{className:"h-4 w-4 mr-1",strokeWidth:2,fill:"none"}),""]}),e.jsxs(b,{size:"sm",onClick:()=>_e(Re),className:"bg-red-600 hover:bg-red-700 text-white",children:[e.jsx(at,{className:"h-4 w-4 mr-1",strokeWidth:2,fill:"none"}),""]})]})})]},ye)})})]})})}),Kt.length>0&&e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{htmlFor:"page-size-provider",className:"text-sm whitespace-nowrap",children:""}),e.jsxs(qe,{value:oe.toString(),onValueChange:P=>{ae(parseInt(P)),me(1),X(new Set)},children:[e.jsx(Be,{id:"page-size-provider",className:"w-20",children:e.jsx(Ge,{})}),e.jsxs(He,{children:[e.jsx(ie,{value:"10",children:"10"}),e.jsx(ie,{value:"20",children:"20"}),e.jsx(ie,{value:"50",children:"50"}),e.jsx(ie,{value:"100",children:"100"})]})]}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[" ",(_-1)*oe+1," "," ",Math.min(_*oe,Kt.length),"  ",Kt.length," "]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{variant:"outline",size:"sm",onClick:()=>me(1),disabled:_===1,className:"hidden sm:flex",children:e.jsx(vr,{className:"h-4 w-4"})}),e.jsxs(b,{variant:"outline",size:"sm",onClick:()=>me(P=>Math.max(1,P-1)),disabled:_===1,children:[e.jsx(dn,{className:"h-4 w-4 sm:mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ce,{type:"number",value:xe,onChange:P=>ve(P.target.value),onKeyDown:P=>P.key==="Enter"&&Ha(),placeholder:_.toString(),className:"w-16 h-8 text-center",min:1,max:Ms}),e.jsx(b,{variant:"outline",size:"sm",onClick:Ha,disabled:!xe,className:"h-8",children:""})]}),e.jsxs(b,{variant:"outline",size:"sm",onClick:()=>me(P=>P+1),disabled:_>=Ms,children:[e.jsx("span",{className:"hidden sm:inline",children:""}),e.jsx(Ll,{className:"h-4 w-4 sm:ml-1"})]}),e.jsx(b,{variant:"outline",size:"sm",onClick:()=>me(Ms),disabled:_>=Ms,className:"hidden sm:flex",children:e.jsx(br,{className:"h-4 w-4"})})]})]})]}),e.jsx(Jt,{open:L,onOpenChange:gt,children:e.jsxs($t,{className:"max-w-[95vw] sm:max-w-2xl max-h-[90vh] overflow-y-auto","data-tour":"provider-dialog",preventOutsideClose:Xe.isRunning,children:[e.jsxs(Qt,{children:[e.jsx(Yt,{children:K!==null?"":""}),e.jsx(ds,{children:" API "})]}),e.jsxs("form",{onSubmit:P=>{P.preventDefault(),ss()},autoComplete:"off",children:[e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2","data-tour":"provider-template-select",children:[e.jsx(y,{htmlFor:"template",children:""}),e.jsxs(Ua,{open:Y,onOpenChange:E,children:[e.jsx(Ba,{asChild:!0,children:e.jsxs(b,{variant:"outline",role:"combobox","aria-expanded":Y,className:"w-full justify-between",children:[z?lr.find(P=>P.id===z)?.display_name:"...",e.jsx(qu,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsx(_a,{className:"p-0",align:"start",style:{width:"var(--radix-popover-trigger-width)"},children:e.jsxs(ao,{children:[e.jsx(lo,{placeholder:"..."}),e.jsx(st,{className:"h-[300px]",children:e.jsxs(no,{className:"max-h-none overflow-visible",children:[e.jsx(io,{children:""}),e.jsx(fr,{children:lr.map(P=>e.jsxs(pr,{value:P.display_name,onSelect:()=>Ve(P.id),children:[e.jsx(Na,{className:`mr-2 h-4 w-4 ${z===P.id?"opacity-100":"opacity-0"}`}),P.display_name]},P.id))})]})})]})})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" URL ,"})]}),e.jsxs("div",{className:"grid gap-2","data-tour":"provider-name-input",children:[e.jsx(y,{htmlFor:"name",className:de.name?"text-destructive":"",children:" *"}),e.jsx(ce,{id:"name",value:B?.name||"",onChange:P=>{O(ye=>ye?{...ye,name:P.target.value}:null),de.name&&G(ye=>({...ye,name:void 0}))},placeholder:": DeepSeek, SiliconFlow",className:de.name?"border-destructive focus-visible:ring-destructive":""}),de.name&&e.jsx("p",{className:"text-xs text-destructive",children:de.name})]}),e.jsxs("div",{className:"grid gap-2","data-tour":"provider-url-input",children:[e.jsx(y,{htmlFor:"base_url",className:de.base_url?"text-destructive":"",children:" URL *"}),e.jsx(ce,{id:"base_url",value:B?.base_url||"",onChange:P=>{O(ye=>ye?{...ye,base_url:P.target.value}:null),de.base_url&&G(ye=>({...ye,base_url:void 0}))},placeholder:"https://api.example.com/v1",disabled:At,className:`${At?"bg-muted cursor-not-allowed":""} ${de.base_url?"border-destructive focus-visible:ring-destructive":""}`}),de.base_url&&e.jsx("p",{className:"text-xs text-destructive",children:de.base_url}),At&&!de.base_url&&e.jsx("p",{className:"text-xs text-muted-foreground",children:' URL ,""'})]}),e.jsxs("div",{className:"grid gap-2","data-tour":"provider-apikey-input",children:[e.jsx(y,{htmlFor:"api_key",className:de.api_key?"text-destructive":"",children:"API Key *"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ce,{id:"api_key",type:we?"text":"password",value:B?.api_key||"",onChange:P=>{O(ye=>ye?{...ye,api_key:P.target.value}:null),de.api_key&&G(ye=>({...ye,api_key:void 0}))},placeholder:"sk-...",className:`flex-1 ${de.api_key?"border-destructive focus-visible:ring-destructive":""}`}),e.jsx(b,{type:"button",variant:"outline",size:"icon",onClick:()=>pe(!we),title:we?"":"",children:we?e.jsx(or,{className:"h-4 w-4"}):e.jsx(Ws,{className:"h-4 w-4"})}),e.jsx(b,{type:"button",variant:"outline",size:"icon",onClick:We,title:"",children:e.jsx(Jc,{className:"h-4 w-4"})})]}),de.api_key&&e.jsx("p",{className:"text-xs text-destructive",children:de.api_key})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{htmlFor:"client_type",children:""}),e.jsxs(qe,{value:B?.client_type||"openai",onValueChange:P=>O(ye=>ye?{...ye,client_type:P}:null),disabled:At,children:[e.jsx(Be,{id:"client_type",className:At?"bg-muted cursor-not-allowed":"",children:e.jsx(Ge,{placeholder:""})}),e.jsxs(He,{children:[e.jsx(ie,{value:"openai",children:"OpenAI"}),e.jsx(ie,{value:"gemini",children:"Gemini"})]})]}),At&&e.jsx("p",{className:"text-xs text-muted-foreground",children:',""'})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{htmlFor:"max_retry",children:""}),e.jsx(ce,{id:"max_retry",type:"number",min:"0",value:B?.max_retry??"",onChange:P=>{const ye=P.target.value===""?null:parseInt(P.target.value);O(Re=>Re?{...Re,max_retry:ye}:null)},placeholder:": 2"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{htmlFor:"timeout",children:"()"}),e.jsx(ce,{id:"timeout",type:"number",min:"1",value:B?.timeout??"",onChange:P=>{const ye=P.target.value===""?null:parseInt(P.target.value);O(Re=>Re?{...Re,timeout:ye}:null)},placeholder:": 30"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{htmlFor:"retry_interval",children:"()"}),e.jsx(ce,{id:"retry_interval",type:"number",min:"1",value:B?.retry_interval??"",onChange:P=>{const ye=P.target.value===""?null:parseInt(P.target.value);O(Re=>Re?{...Re,retry_interval:ye}:null)},placeholder:": 10"})]})]})]}),e.jsxs(xs,{children:[e.jsx(b,{type:"button",variant:"outline",onClick:()=>F(!1),"data-tour":"provider-cancel-button",children:""}),e.jsx(b,{type:"submit","data-tour":"provider-save-button",children:""})]})]})]})}),e.jsx(bt,{open:R,onOpenChange:ne,children:e.jsxs(dt,{children:[e.jsxs(ut,{children:[e.jsx(ht,{children:""}),e.jsxs(xt,{children:[' "',fe!==null?n[fe]?.name:"",'"  ']})]}),e.jsxs(mt,{children:[e.jsx(pt,{children:""}),e.jsx(ft,{onClick:je,children:""})]})]})}),e.jsx(bt,{open:T,onOpenChange:te,children:e.jsxs(dt,{children:[e.jsxs(ut,{children:[e.jsx(ht,{children:""}),e.jsxs(xt,{children:[" ",A.size,"  "]})]}),e.jsxs(mt,{children:[e.jsx(pt,{children:""}),e.jsx(ft,{onClick:Ts,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:""})]})]})}),S&&e.jsx(Yu,{onRestartComplete:js,onRestartFailed:Ke})]})}function aw({value:n,label:r,onRemove:c}){const{attributes:d,listeners:h,setNodeRef:x,transform:f,transition:j,isDragging:p}=eN({id:n}),N={transform:tN.Transform.toString(f),transition:j,opacity:p?.5:1},v=S=>{S.preventDefault(),S.stopPropagation(),c(n)},C=S=>{S.stopPropagation()};return e.jsx("div",{ref:x,style:N,className:Q("inline-flex items-center gap-1",p&&"shadow-lg"),children:e.jsxs(Je,{variant:"secondary",className:"cursor-move hover:bg-secondary/80 flex items-center gap-1",children:[e.jsx("div",{...d,...h,className:"cursor-grab active:cursor-grabbing flex items-center",children:e.jsx(jy,{className:"h-3 w-3 text-muted-foreground"})}),e.jsx("span",{children:r}),e.jsx("button",{type:"button",className:"ml-1 rounded-sm hover:bg-destructive/20 focus:outline-none focus:ring-1 focus:ring-destructive",onClick:v,onPointerDown:C,onMouseDown:S=>S.stopPropagation(),children:e.jsx(on,{className:"h-3 w-3 cursor-pointer hover:text-destructive",strokeWidth:2,fill:"none"})})]})})}function lw({options:n,selected:r,onChange:c,placeholder:d="...",emptyText:h="",className:x}){const[f,j]=u.useState(!1),p=Qy(Yf(Wy,{activationConstraint:{distance:8}}),Yf(Py,{coordinateGetter:Iy})),N=S=>{r.includes(S)?c(r.filter(w=>w!==S)):c([...r,S])},v=S=>{c(r.filter(w=>w!==S))},C=S=>{const{active:w,over:L}=S;if(L&&w.id!==L.id){const F=r.indexOf(w.id),B=r.indexOf(L.id);c(Jy(r,F,B))}};return e.jsxs(Ua,{open:f,onOpenChange:j,children:[e.jsx(Ba,{asChild:!0,children:e.jsxs(b,{variant:"outline",role:"combobox","aria-expanded":f,className:Q("w-full justify-between min-h-10 h-auto",x),children:[e.jsx(Yy,{sensors:p,collisionDetection:Xy,onDragEnd:C,children:e.jsx(Ky,{items:r,strategy:Zy,children:e.jsx("div",{className:"flex gap-1 flex-wrap flex-1",children:r.length===0?e.jsx("span",{className:"text-muted-foreground",children:d}):r.map(S=>{const w=n.find(L=>L.value===S);return e.jsx(aw,{value:S,label:w?.label||S,onRemove:v},S)})})})}),e.jsx(qu,{className:"ml-2 h-4 w-4 shrink-0 opacity-50",strokeWidth:2,fill:"none"})]})}),e.jsx(_a,{className:"w-full p-0",align:"start",children:e.jsxs(ao,{children:[e.jsx(lo,{placeholder:"...",className:"h-9"}),e.jsxs(no,{children:[e.jsx(io,{children:h}),e.jsx(fr,{children:n.map(S=>{const w=r.includes(S.value);return e.jsxs(pr,{value:S.value,onSelect:()=>N(S.value),children:[e.jsx("div",{className:Q("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",w?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"),children:e.jsx(Na,{className:"h-3 w-3",strokeWidth:2,fill:"none"})}),e.jsx("span",{children:S.label})]},S.value)})})]})]})})]})}const ip=new Map,nw=300*1e3;function iw(){const[n,r]=u.useState([]),[c,d]=u.useState([]),[h,x]=u.useState([]),[f,j]=u.useState([]),[p,N]=u.useState(null),[v,C]=u.useState(!0),[S,w]=u.useState(!1),[L,F]=u.useState(!1),[B,O]=u.useState(!1),[K,H]=u.useState(!1),[z,V]=u.useState(!1),[Y,E]=u.useState(!1),[R,ne]=u.useState(null),[fe,Ce]=u.useState(null),[we,pe]=u.useState(!1),[Ne,be]=u.useState(null),[A,X]=u.useState(""),[T,te]=u.useState(new Set),[_,me]=u.useState(!1),[oe,ae]=u.useState(1),[xe,ve]=u.useState(20),[de,G]=u.useState(""),[W,U]=u.useState([]),[ee,Se]=u.useState(!1),[Me,tt]=u.useState(null),[Xe,Ut]=u.useState(!1),[Bt,re]=u.useState(null),[ke,Pe]=u.useState({}),{toast:Fe}=Xt(),ts=fa(),{registerTour:As,startTour:js,state:Ke,goToStep:D}=Xu(),De=u.useRef(null),ze=u.useRef(null),Ve=u.useRef(!0);u.useEffect(()=>{As(il,Tg)},[As]),u.useEffect(()=>{if(Ke.activeTourId===il&&Ke.isRunning){const $=Eg[Ke.stepIndex];$&&!window.location.pathname.endsWith($.replace("/config/",""))&&ts({to:$})}},[Ke.stepIndex,Ke.activeTourId,Ke.isRunning,ts]);const At=u.useRef(Ke.stepIndex);u.useEffect(()=>{if(Ke.activeTourId===il&&Ke.isRunning){const $=At.current,ge=Ke.stepIndex;$>=12&&$<=17&&ge<12&&E(!1),At.current=ge}},[Ke.stepIndex,Ke.activeTourId,Ke.isRunning]),u.useEffect(()=>{if(Ke.activeTourId!==il||!Ke.isRunning)return;const $=ge=>{const Le=ge.target,$e=Ke.stepIndex;$e===2&&Le.closest('[data-tour="add-provider-button"]')?setTimeout(()=>D(3),300):$e===9&&Le.closest('[data-tour="provider-cancel-button"]')?setTimeout(()=>D(10),300):$e===11&&Le.closest('[data-tour="add-model-button"]')?setTimeout(()=>D(12),300):$e===17&&Le.closest('[data-tour="model-cancel-button"]')?setTimeout(()=>D(18),300):$e===18&&Le.closest('[data-tour="tasks-tab-trigger"]')&&setTimeout(()=>D(19),300)};return document.addEventListener("click",$,!0),()=>document.removeEventListener("click",$,!0)},[Ke,D]);const We=()=>{js(il)};u.useEffect(()=>{ss()},[]);const ss=async()=>{try{C(!0);const $=await ei(),ge=$.models||[];r(ge),j(ge.map($e=>$e.name));const Le=$.api_providers||[];d(Le.map($e=>$e.name)),x(Le),N($.model_task_config||null),O(!1),Ve.current=!1}catch($){console.error(":",$)}finally{C(!1)}},gt=u.useCallback($=>h.find(ge=>ge.name===$),[h]),_e=u.useCallback(async($,ge=!1)=>{const Le=gt($);if(!Le?.base_url){U([]),re(null),tt('""');return}if(!Le.api_key){U([]),re(null),tt(' API Key""');return}const $e=tw(Le.base_url);if(re($e),!$e?.modelFetcher){U([]),tt(null);return}const jt=`${$}:${Le.base_url}`,ea=ip.get(jt);if(!ge&&ea&&Date.now()-ea.timestamp<nw){U(ea.models),tt(null);return}Se(!0),tt(null);try{const ta=await S0($,$e.modelFetcher.parser,$e.modelFetcher.endpoint);U(ta),ip.set(jt,{models:ta,timestamp:Date.now()})}catch(ta){console.error(":",ta);const Ca=ta.message||"";Ca.includes("")||Ca.includes("")||Ca.includes("API Key")?tt('API Key ""'):Ca.includes("")?tt(" API Key "):Ca.includes("timeout")||Ca.includes("")?tt(""):Ca.includes("")?tt(""):tt(Ca),U([])}finally{Se(!1)}},[gt]);u.useEffect(()=>{Y&&R?.api_provider&&_e(R.api_provider)},[Y,R?.api_provider,_e]);const je=async()=>{try{H(!0),so().catch(()=>{}),V(!0)}catch($){console.error(":",$),V(!1),Fe({title:"",description:"",variant:"destructive"}),H(!1)}},yt=async()=>{try{w(!0),De.current&&clearTimeout(De.current),ze.current&&clearTimeout(ze.current);const $=await ei();$.models=n,$.model_task_config=p,await eo($),O(!1),Fe({title:"",description:"..."}),await je()}catch($){console.error(":",$),Fe({title:"",description:$.message,variant:"destructive"}),w(!1)}},Ht=()=>{localStorage.removeItem("access-token"),window.location.href="/auth"},pa=()=>{V(!1),H(!1),Fe({title:"",description:"",variant:"destructive"})},Ts=u.useCallback(async $=>{if(!Ve.current)try{F(!0),await Ou("models",$),O(!1)}catch(ge){console.error(":",ge),O(!0)}finally{F(!1)}},[]),Kt=u.useCallback(async $=>{if(!Ve.current)try{F(!0),await Ou("model_task_config",$),O(!1)}catch(ge){console.error(":",ge),O(!0)}finally{F(!1)}},[]);u.useEffect(()=>{if(!Ve.current)return O(!0),De.current&&clearTimeout(De.current),De.current=setTimeout(()=>{Ts(n)},2e3),()=>{De.current&&clearTimeout(De.current)}},[n,Ts]),u.useEffect(()=>{if(!(Ve.current||!p))return O(!0),ze.current&&clearTimeout(ze.current),ze.current=setTimeout(()=>{Kt(p)},2e3),()=>{ze.current&&clearTimeout(ze.current)}},[p,Kt]);const Ms=async()=>{try{w(!0),De.current&&clearTimeout(De.current),ze.current&&clearTimeout(ze.current);const $=await ei();$.models=n,$.model_task_config=p,await eo($),O(!1),Fe({title:"",description:""}),await ss()}catch($){console.error(":",$),Fe({title:"",description:$.message,variant:"destructive"})}finally{w(!1)}},Ds=($,ge)=>{Pe({}),ne($||{model_identifier:"",name:"",api_provider:c[0]||"",price_in:0,price_out:0,force_stream_mode:!1,extra_params:{}}),Ce(ge),E(!0)},Ha=()=>{if(!R)return;const $={};if(R.name?.trim()||($.name=""),R.api_provider?.trim()||($.api_provider=" API "),R.model_identifier?.trim()||($.model_identifier=""),Object.keys($).length>0){Pe($);return}Pe({});const ge={...R,price_in:R.price_in??0,price_out:R.price_out??0};let Le,$e=null;if(fe!==null?($e=n[fe].name,Le=[...n],Le[fe]=ge):Le=[...n,ge],r(Le),j(Le.map(jt=>jt.name)),$e&&$e!==ge.name&&p){const jt=ea=>ea.map(ta=>ta===$e?ge.name:ta);N({...p,utils:{...p.utils,model_list:jt(p.utils?.model_list||[])},utils_small:{...p.utils_small,model_list:jt(p.utils_small?.model_list||[])},tool_use:{...p.tool_use,model_list:jt(p.tool_use?.model_list||[])},replyer:{...p.replyer,model_list:jt(p.replyer?.model_list||[])},planner:{...p.planner,model_list:jt(p.planner?.model_list||[])},vlm:{...p.vlm,model_list:jt(p.vlm?.model_list||[])},voice:{...p.voice,model_list:jt(p.voice?.model_list||[])},embedding:{...p.embedding,model_list:jt(p.embedding?.model_list||[])},lpmm_entity_extract:{...p.lpmm_entity_extract,model_list:jt(p.lpmm_entity_extract?.model_list||[])},lpmm_rdf_build:{...p.lpmm_rdf_build,model_list:jt(p.lpmm_rdf_build?.model_list||[])},lpmm_qa:{...p.lpmm_qa,model_list:jt(p.lpmm_qa?.model_list||[])}})}E(!1),ne(null),Ce(null)},Fs=$=>{if(!$&&R){const ge={...R,price_in:R.price_in??0,price_out:R.price_out??0};ne(ge)}E($)},qa=$=>{be($),pe(!0)},Sa=()=>{if(Ne!==null){const $=n.filter((ge,Le)=>Le!==Ne);r($),j($.map(ge=>ge.name)),Fe({title:"",description:""})}pe(!1),be(null)},P=$=>{const ge=new Set(T);ge.has($)?ge.delete($):ge.add($),te(ge)},ye=()=>{if(T.size===Os.length)te(new Set);else{const $=Os.map((ge,Le)=>n.findIndex($e=>$e===Os[Le]));te(new Set($))}},Re=()=>{if(T.size===0){Fe({title:"",description:"",variant:"default"});return}me(!0)},us=()=>{const $=n.filter((ge,Le)=>!T.has(Le));r($),j($.map(ge=>ge.name)),te(new Set),me(!1),Fe({title:"",description:` ${T.size} `})},$s=($,ge,Le)=>{p&&N({...p,[$]:{...p[$],[ge]:Le}})},Os=n.filter($=>{if(!A)return!0;const ge=A.toLowerCase();return $.name.toLowerCase().includes(ge)||$.model_identifier.toLowerCase().includes(ge)||$.api_provider.toLowerCase().includes(ge)}),dl=Math.ceil(Os.length/xe),Hl=Os.slice((oe-1)*xe,oe*xe),un=()=>{const $=parseInt(de);$>=1&&$<=dl&&(ae($),G(""))},mn=$=>p?[p.utils?.model_list||[],p.utils_small?.model_list||[],p.tool_use?.model_list||[],p.replyer?.model_list||[],p.planner?.model_list||[],p.vlm?.model_list||[],p.voice?.model_list||[],p.embedding?.model_list||[],p.lpmm_entity_extract?.model_list||[],p.lpmm_rdf_build?.model_list||[],p.lpmm_qa?.model_list||[]].some(Le=>Le.includes($)):!1;return v?e.jsx(st,{className:"h-full",children:e.jsx("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("p",{className:"text-muted-foreground",children:"..."})})})}):e.jsx(st,{className:"h-full",children:e.jsxs("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:""}),e.jsx("p",{className:"text-muted-foreground mt-1 sm:mt-2 text-sm sm:text-base",children:""})]}),e.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[e.jsxs(b,{onClick:Ms,disabled:S||L||!B||K,size:"sm",variant:"outline",className:"flex-1 sm:flex-none sm:min-w-[120px]",children:[e.jsx(jr,{className:"mr-2 h-4 w-4",strokeWidth:2,fill:"none"}),S?"...":L?"...":B?"":""]}),e.jsxs(bt,{children:[e.jsx(es,{asChild:!0,children:e.jsxs(b,{disabled:S||L||K,size:"sm",className:"flex-1 sm:flex-none sm:min-w-[120px]",children:[e.jsx(gr,{className:"mr-2 h-4 w-4"}),K?"...":B?"":""]})}),e.jsxs(dt,{children:[e.jsxs(ut,{children:[e.jsx(ht,{children:""}),e.jsx(xt,{asChild:!0,children:e.jsx("div",{children:e.jsx("p",{children:B?",":","})})})]}),e.jsxs(mt,{children:[e.jsx(pt,{children:""}),e.jsx(ft,{onClick:B?yt:je,children:B?"":""})]})]})]})]})]}),e.jsxs(cl,{children:[e.jsx(Ra,{className:"h-4 w-4"}),e.jsxs(ol,{children:["",e.jsx("strong",{children:""}),'""']})]}),e.jsxs(cl,{className:"hidden lg:flex border-primary/30 bg-primary/5 cursor-pointer hover:bg-primary/10 transition-colors",onClick:We,children:[e.jsx(vy,{className:"h-4 w-4 text-primary"}),e.jsxs(ol,{className:"flex items-center justify-between",children:[e.jsxs("span",{children:[e.jsx("strong",{className:"text-primary",children:""}),""]}),e.jsx(b,{variant:"outline",size:"sm",className:"ml-4 shrink-0",children:""})]})]}),e.jsxs(La,{defaultValue:"models",className:"w-full",children:[e.jsxs(wa,{className:"grid w-full max-w-full sm:max-w-md grid-cols-2",children:[e.jsx(it,{value:"models",children:""}),e.jsx(it,{value:"tasks","data-tour":"tasks-tab-trigger",children:""})]}),e.jsxs(zt,{value:"models",className:"space-y-4 mt-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:""}),e.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[T.size>0&&e.jsxs(b,{onClick:Re,size:"sm",variant:"destructive",className:"w-full sm:w-auto",children:[e.jsx(at,{className:"mr-2 h-4 w-4",strokeWidth:2,fill:"none"})," (",T.size,")"]}),e.jsxs(b,{onClick:()=>Ds(null,null),size:"sm",variant:"outline",className:"w-full sm:w-auto","data-tour":"add-model-button",children:[e.jsx(hs,{className:"mr-2 h-4 w-4",strokeWidth:2,fill:"none"}),""]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2",children:[e.jsxs("div",{className:"relative w-full sm:flex-1 sm:max-w-sm",children:[e.jsx(zs,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(ce,{placeholder:"...",value:A,onChange:$=>X($.target.value),className:"pl-9"})]}),A&&e.jsxs("p",{className:"text-sm text-muted-foreground whitespace-nowrap",children:[" ",Os.length," "]})]}),e.jsx("div",{className:"md:hidden space-y-3",children:Hl.length===0?e.jsx("div",{className:"text-center text-muted-foreground py-8 rounded-lg border bg-card",children:A?"":""}):Hl.map(($,ge)=>{const Le=n.findIndex(jt=>jt===$),$e=mn($.name);return e.jsxs("div",{className:"rounded-lg border bg-card p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"font-semibold text-base",children:$.name}),e.jsx(Je,{variant:$e?"default":"secondary",className:$e?"bg-green-600 hover:bg-green-700":"",children:$e?"":""})]}),e.jsx("p",{className:"text-xs text-muted-foreground break-all",title:$.model_identifier,children:$.model_identifier})]}),e.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[e.jsxs(b,{variant:"default",size:"sm",onClick:()=>Ds($,Le),children:[e.jsx(nn,{className:"h-4 w-4 mr-1",strokeWidth:2,fill:"none"}),""]}),e.jsxs(b,{size:"sm",onClick:()=>qa(Le),className:"bg-red-600 hover:bg-red-700 text-white",children:[e.jsx(at,{className:"h-4 w-4 mr-1",strokeWidth:2,fill:"none"}),""]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground text-xs",children:""}),e.jsx("p",{className:"font-medium",children:$.api_provider})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground text-xs",children:""}),e.jsx("p",{className:"font-medium",children:$.force_stream_mode?"":""})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground text-xs",children:""}),e.jsxs("p",{className:"font-medium",children:["",$.price_in,"/M"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground text-xs",children:""}),e.jsxs("p",{className:"font-medium",children:["",$.price_out,"/M"]})]})]})]},ge)})}),e.jsx("div",{className:"hidden md:block rounded-lg border bg-card overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(li,{children:[e.jsx(ni,{children:e.jsxs(_s,{children:[e.jsx(rt,{className:"w-12",children:e.jsx(Cs,{checked:T.size===Os.length&&Os.length>0,onCheckedChange:ye})}),e.jsx(rt,{className:"w-24",children:""}),e.jsx(rt,{children:""}),e.jsx(rt,{children:""}),e.jsx(rt,{children:""}),e.jsx(rt,{className:"text-right",children:""}),e.jsx(rt,{className:"text-right",children:""}),e.jsx(rt,{className:"text-center",children:""}),e.jsx(rt,{className:"text-right",children:""})]})}),e.jsx(ii,{children:Hl.length===0?e.jsx(_s,{children:e.jsx(Ze,{colSpan:9,className:"text-center text-muted-foreground py-8",children:A?"":""})}):Hl.map(($,ge)=>{const Le=n.findIndex(jt=>jt===$),$e=mn($.name);return e.jsxs(_s,{children:[e.jsx(Ze,{children:e.jsx(Cs,{checked:T.has(Le),onCheckedChange:()=>P(Le)})}),e.jsx(Ze,{children:e.jsx(Je,{variant:$e?"default":"secondary",className:$e?"bg-green-600 hover:bg-green-700":"",children:$e?"":""})}),e.jsx(Ze,{className:"font-medium",children:$.name}),e.jsx(Ze,{className:"max-w-xs truncate",title:$.model_identifier,children:$.model_identifier}),e.jsx(Ze,{children:$.api_provider}),e.jsxs(Ze,{className:"text-right",children:["",$.price_in,"/M"]}),e.jsxs(Ze,{className:"text-right",children:["",$.price_out,"/M"]}),e.jsx(Ze,{className:"text-center",children:$.force_stream_mode?"":""}),e.jsx(Ze,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsxs(b,{variant:"default",size:"sm",onClick:()=>Ds($,Le),children:[e.jsx(nn,{className:"h-4 w-4 mr-1",strokeWidth:2,fill:"none"}),""]}),e.jsxs(b,{size:"sm",onClick:()=>qa(Le),className:"bg-red-600 hover:bg-red-700 text-white",children:[e.jsx(at,{className:"h-4 w-4 mr-1",strokeWidth:2,fill:"none"}),""]})]})})]},ge)})})]})})}),Os.length>0&&e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{htmlFor:"page-size-model",className:"text-sm whitespace-nowrap",children:""}),e.jsxs(qe,{value:xe.toString(),onValueChange:$=>{ve(parseInt($)),ae(1),te(new Set)},children:[e.jsx(Be,{id:"page-size-model",className:"w-20",children:e.jsx(Ge,{})}),e.jsxs(He,{children:[e.jsx(ie,{value:"10",children:"10"}),e.jsx(ie,{value:"20",children:"20"}),e.jsx(ie,{value:"50",children:"50"}),e.jsx(ie,{value:"100",children:"100"})]})]}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[" ",(oe-1)*xe+1," "," ",Math.min(oe*xe,Os.length),"  ",Os.length," "]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{variant:"outline",size:"sm",onClick:()=>ae(1),disabled:oe===1,className:"hidden sm:flex",children:e.jsx(vr,{className:"h-4 w-4"})}),e.jsxs(b,{variant:"outline",size:"sm",onClick:()=>ae($=>Math.max(1,$-1)),disabled:oe===1,children:[e.jsx(dn,{className:"h-4 w-4 sm:mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ce,{type:"number",value:de,onChange:$=>G($.target.value),onKeyDown:$=>$.key==="Enter"&&un(),placeholder:oe.toString(),className:"w-16 h-8 text-center",min:1,max:dl}),e.jsx(b,{variant:"outline",size:"sm",onClick:un,disabled:!de,className:"h-8",children:""})]}),e.jsxs(b,{variant:"outline",size:"sm",onClick:()=>ae($=>$+1),disabled:oe>=dl,children:[e.jsx("span",{className:"hidden sm:inline",children:""}),e.jsx(Ll,{className:"h-4 w-4 sm:ml-1"})]}),e.jsx(b,{variant:"outline",size:"sm",onClick:()=>ae(dl),disabled:oe>=dl,className:"hidden sm:flex",children:e.jsx(br,{className:"h-4 w-4"})})]})]})]}),e.jsxs(zt,{value:"tasks",className:"space-y-6 mt-0",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:""}),p&&e.jsxs("div",{className:"grid gap-4 sm:gap-6",children:[e.jsx(ba,{title:" (utils)",description:"",taskConfig:p.utils,modelNames:f,onChange:($,ge)=>$s("utils",$,ge),dataTour:"task-model-select"}),e.jsx(ba,{title:" (utils_small)",description:"",taskConfig:p.utils_small,modelNames:f,onChange:($,ge)=>$s("utils_small",$,ge)}),e.jsx(ba,{title:" (tool_use)",description:"",taskConfig:p.tool_use,modelNames:f,onChange:($,ge)=>$s("tool_use",$,ge)}),e.jsx(ba,{title:" (replyer)",description:"",taskConfig:p.replyer,modelNames:f,onChange:($,ge)=>$s("replyer",$,ge)}),e.jsx(ba,{title:" (planner)",description:"",taskConfig:p.planner,modelNames:f,onChange:($,ge)=>$s("planner",$,ge)}),e.jsx(ba,{title:" (vlm)",description:"",taskConfig:p.vlm,modelNames:f,onChange:($,ge)=>$s("vlm",$,ge),hideTemperature:!0}),e.jsx(ba,{title:" (voice)",description:"",taskConfig:p.voice,modelNames:f,onChange:($,ge)=>$s("voice",$,ge),hideTemperature:!0,hideMaxTokens:!0}),e.jsx(ba,{title:" (embedding)",description:"",taskConfig:p.embedding,modelNames:f,onChange:($,ge)=>$s("embedding",$,ge),hideTemperature:!0,hideMaxTokens:!0}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"LPMM "}),e.jsx(ba,{title:" (lpmm_entity_extract)",description:"",taskConfig:p.lpmm_entity_extract,modelNames:f,onChange:($,ge)=>$s("lpmm_entity_extract",$,ge)}),e.jsx(ba,{title:"RDF  (lpmm_rdf_build)",description:"",taskConfig:p.lpmm_rdf_build,modelNames:f,onChange:($,ge)=>$s("lpmm_rdf_build",$,ge)}),e.jsx(ba,{title:" (lpmm_qa)",description:"",taskConfig:p.lpmm_qa,modelNames:f,onChange:($,ge)=>$s("lpmm_qa",$,ge)})]})]})]})]}),e.jsx(Jt,{open:Y,onOpenChange:Fs,children:e.jsxs($t,{className:"max-w-[95vw] sm:max-w-2xl max-h-[90vh] overflow-y-auto","data-tour":"model-dialog",preventOutsideClose:Ke.isRunning,children:[e.jsxs(Qt,{children:[e.jsx(Yt,{children:fe!==null?"":""}),e.jsx(ds,{children:""})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2","data-tour":"model-name-input",children:[e.jsx(y,{htmlFor:"model_name",className:ke.name?"text-destructive":"",children:" *"}),e.jsx(ce,{id:"model_name",value:R?.name||"",onChange:$=>{ne(ge=>ge?{...ge,name:$.target.value}:null),ke.name&&Pe(ge=>({...ge,name:void 0}))},placeholder:": qwen3-30b",className:ke.name?"border-destructive focus-visible:ring-destructive":""}),ke.name?e.jsx("p",{className:"text-xs text-destructive",children:ke.name}):e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"grid gap-2","data-tour":"model-provider-select",children:[e.jsx(y,{htmlFor:"api_provider",className:ke.api_provider?"text-destructive":"",children:"API  *"}),e.jsxs(qe,{value:R?.api_provider||"",onValueChange:$=>{ne(ge=>ge?{...ge,api_provider:$}:null),U([]),tt(null),ke.api_provider&&Pe(ge=>({...ge,api_provider:void 0}))},children:[e.jsx(Be,{id:"api_provider",className:ke.api_provider?"border-destructive focus-visible:ring-destructive":"",children:e.jsx(Ge,{placeholder:""})}),e.jsx(He,{children:c.map($=>e.jsx(ie,{value:$,children:$},$))})]}),ke.api_provider&&e.jsx("p",{className:"text-xs text-destructive",children:ke.api_provider})]}),e.jsxs("div",{className:"grid gap-2","data-tour":"model-identifier-input",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(y,{htmlFor:"model_identifier",className:ke.model_identifier?"text-destructive":"",children:" *"}),Bt?.modelFetcher&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Je,{variant:"secondary",className:"text-xs",children:Bt.display_name}),e.jsx(b,{variant:"ghost",size:"sm",className:"h-6 px-2",onClick:()=>R?.api_provider&&_e(R.api_provider,!0),disabled:ee,children:ee?e.jsx(Ss,{className:"h-3 w-3 animate-spin"}):e.jsx(ws,{className:"h-3 w-3"})})]})]}),Bt?.modelFetcher?e.jsxs(Ua,{open:Xe,onOpenChange:Ut,children:[e.jsx(Ba,{asChild:!0,children:e.jsxs(b,{variant:"outline",role:"combobox","aria-expanded":Xe,className:"w-full justify-between font-normal",disabled:ee||!!Me,children:[ee?e.jsxs("span",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(Ss,{className:"h-4 w-4 animate-spin"}),"..."]}):Me?e.jsx("span",{className:"text-muted-foreground text-sm",children:""}):R?.model_identifier?e.jsx("span",{className:"truncate",children:R.model_identifier}):e.jsx("span",{className:"text-muted-foreground",children:"..."}),e.jsx(qu,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsx(_a,{className:"p-0",align:"start",style:{width:"var(--radix-popover-trigger-width)"},children:e.jsxs(ao,{children:[e.jsx(lo,{placeholder:"..."}),e.jsx(st,{className:"h-[300px]",children:e.jsxs(no,{className:"max-h-none overflow-visible",children:[e.jsx(io,{children:Me?e.jsxs("div",{className:"py-4 px-2 text-center space-y-2",children:[e.jsx("p",{className:"text-sm text-destructive",children:Me}),!Me.includes("API Key")&&e.jsx(b,{variant:"link",size:"sm",onClick:()=>R?.api_provider&&_e(R.api_provider,!0),children:""})]}):""}),e.jsx(fr,{heading:"",children:W.map($=>e.jsxs(pr,{value:$.id,onSelect:()=>{ne(ge=>ge?{...ge,model_identifier:$.id}:null),Ut(!1)},children:[e.jsx(Na,{className:`mr-2 h-4 w-4 ${R?.model_identifier===$.id?"opacity-100":"opacity-0"}`}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{children:$.id}),$.name!==$.id&&e.jsx("span",{className:"text-xs text-muted-foreground",children:$.name})]})]},$.id))}),e.jsx(fr,{heading:"",children:e.jsxs(pr,{value:"__manual_input__",onSelect:()=>{Ut(!1)},children:[e.jsx(nn,{className:"mr-2 h-4 w-4"}),"..."]})})]})})]})})]}):e.jsx(ce,{id:"model_identifier",value:R?.model_identifier||"",onChange:$=>{ne(ge=>ge?{...ge,model_identifier:$.target.value}:null),ke.model_identifier&&Pe(ge=>({...ge,model_identifier:void 0}))},placeholder:"Qwen/Qwen3-30B-A3B-Instruct-2507",className:ke.model_identifier?"border-destructive focus-visible:ring-destructive":""}),ke.model_identifier&&e.jsx("p",{className:"text-xs text-destructive",children:ke.model_identifier}),Me&&Bt?.modelFetcher&&!ke.model_identifier&&e.jsxs(cl,{variant:"destructive",className:"mt-2 py-2",children:[e.jsx(Ra,{className:"h-4 w-4"}),e.jsx(ol,{className:"text-xs",children:Me})]}),Bt?.modelFetcher&&e.jsx(ce,{value:R?.model_identifier||"",onChange:$=>{ne(ge=>ge?{...ge,model_identifier:$.target.value}:null),ke.model_identifier&&Pe(ge=>({...ge,model_identifier:void 0}))},placeholder:"",className:`mt-2 ${ke.model_identifier?"border-destructive focus-visible:ring-destructive":""}`}),!ke.model_identifier&&e.jsx("p",{className:"text-xs text-muted-foreground",children:Me?'"" API Key':Bt?.modelFetcher?` ${Bt.display_name}`:"API  ID"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{htmlFor:"price_in",children:" (/M token)"}),e.jsx(ce,{id:"price_in",type:"number",step:"0.1",min:"0",value:R?.price_in??"",onChange:$=>{const ge=$.target.value===""?null:parseFloat($.target.value);ne(Le=>Le?{...Le,price_in:ge}:null)},placeholder:": 0"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{htmlFor:"price_out",children:" (/M token)"}),e.jsx(ce,{id:"price_out",type:"number",step:"0.1",min:"0",value:R?.price_out??"",onChange:$=>{const ge=$.target.value===""?null:parseFloat($.target.value);ne(Le=>Le?{...Le,price_out:ge}:null)},placeholder:": 0"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Qe,{id:"force_stream_mode",checked:R?.force_stream_mode||!1,onCheckedChange:$=>ne(ge=>ge?{...ge,force_stream_mode:$}:null)}),e.jsx(y,{htmlFor:"force_stream_mode",className:"cursor-pointer",children:""})]})]}),e.jsxs(xs,{children:[e.jsx(b,{variant:"outline",onClick:()=>E(!1),"data-tour":"model-cancel-button",children:""}),e.jsx(b,{onClick:Ha,"data-tour":"model-save-button",children:""})]})]})}),e.jsx(bt,{open:we,onOpenChange:pe,children:e.jsxs(dt,{children:[e.jsxs(ut,{children:[e.jsx(ht,{children:""}),e.jsxs(xt,{children:[' "',Ne!==null?n[Ne]?.name:"",'"  ']})]}),e.jsxs(mt,{children:[e.jsx(pt,{children:""}),e.jsx(ft,{onClick:Sa,children:""})]})]})}),e.jsx(bt,{open:_,onOpenChange:me,children:e.jsxs(dt,{children:[e.jsxs(ut,{children:[e.jsx(ht,{children:""}),e.jsxs(xt,{children:[" ",T.size,"  "]})]}),e.jsxs(mt,{children:[e.jsx(pt,{children:""}),e.jsx(ft,{onClick:us,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:""})]})]})}),z&&e.jsx(Yu,{onRestartComplete:Ht,onRestartFailed:pa})]})})}function ba({title:n,description:r,taskConfig:c,modelNames:d,onChange:h,hideTemperature:x=!1,hideMaxTokens:f=!1,dataTour:j}){const p=N=>{h("model_list",N)};return e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-base sm:text-lg",children:n}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mt-1",children:r})]}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-2","data-tour":j,children:[e.jsx(y,{children:""}),e.jsx(lw,{options:d.map(N=>({label:N,value:N})),selected:c.model_list||[],onChange:p,placeholder:"...",emptyText:""})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[!x&&e.jsxs("div",{className:"grid gap-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(y,{children:""}),e.jsx(ce,{type:"number",step:"0.1",min:"0",max:"1",value:c.temperature??.3,onChange:N=>{const v=parseFloat(N.target.value);!isNaN(v)&&v>=0&&v<=1&&h("temperature",v)},className:"w-20 h-8 text-sm"})]}),e.jsx(Ma,{value:[c.temperature??.3],onValueChange:N=>h("temperature",N[0]),min:0,max:1,step:.1,className:"w-full"})]}),!f&&e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{children:" Token"}),e.jsx(ce,{type:"number",step:"1",min:"1",value:c.max_tokens??1024,onChange:N=>h("max_tokens",parseInt(N.target.value))})]})]})]})]})}const ro="/api/webui/config";async function rw(){const r=await(await Te(`${ro}/adapter-config/path`)).json();return!r.success||!r.path?null:{path:r.path,lastModified:r.lastModified}}async function rp(n){const c=await(await Te(`${ro}/adapter-config/path`,{method:"POST",headers:Rt(),body:JSON.stringify({path:n})})).json();if(!c.success)throw new Error(c.message||"")}async function cp(n){const c=await(await Te(`${ro}/adapter-config?path=${encodeURIComponent(n)}`)).json();if(!c.success)throw new Error("");return c.content}async function op(n,r){const d=await(await Te(`${ro}/adapter-config`,{method:"POST",headers:Rt(),body:JSON.stringify({path:n,content:r})})).json();if(!d.success)throw new Error(d.message||"")}const Ps={inner:{version:"0.1.2"},nickname:{nickname:""},napcat_server:{host:"localhost",port:8095,token:"",heartbeat_interval:30},maibot_server:{host:"localhost",port:8e3},chat:{group_list_type:"whitelist",group_list:[],private_list_type:"whitelist",private_list:[],ban_user_id:[],ban_qq_bot:!1,enable_poke:!0},voice:{use_tts:!1},debug:{level:"INFO"}},Tu={oneclick:{name:"",description:"",path:"../MaiBot-Napcat-Adapter/config.toml",icon:rn},docker:{name:"Docker",description:"Docker Compose ",path:"/MaiMBot/adapters-config/config.toml",icon:by}};function cw(){const[n,r]=u.useState("upload"),[c,d]=u.useState(null),[h,x]=u.useState(""),[f,j]=u.useState(""),[p,N]=u.useState("oneclick"),[v,C]=u.useState(""),[S,w]=u.useState(!1),[L,F]=u.useState(!1),[B,O]=u.useState(!1),[K,H]=u.useState(!1),[z,V]=u.useState(null),Y=u.useRef(null),{toast:E}=Xt(),R=u.useRef(null),ne=G=>{if(!G.trim())return{valid:!1,error:""};if(!G.toLowerCase().endsWith(".toml"))return{valid:!1,error:" .toml "};const W=/^([a-zA-Z]:\\|\\\\[^\\]+\\[^\\]+\\).+\.toml$/i,U=/^(\/|~\/).+\.toml$/i,ee=/^(\.{1,2}[\\/]|[^:\\/]).+\.toml$/i,Se=W.test(G),Me=U.test(G),tt=ee.test(G);return!Se&&!Me&&!tt?{valid:!1,error:""}:/[<>"|?*\x00-\x1F]/.test(G)?{valid:!1,error:""}:{valid:!0,error:""}},fe=G=>{if(j(G),G.trim()){const W=ne(G);C(W.error)}else C("")},Ce=u.useCallback(async G=>{const W=Tu[G];F(!0);try{const U=await cp(W.path),ee=oe(U);d(ee),N(G),j(W.path),await rp(W.path),E({title:"",description:`${W.name}`})}catch(U){console.error(":",U),E({title:"",description:U instanceof Error?U.message:"",variant:"destructive"})}finally{F(!1)}},[E]),we=u.useCallback(async G=>{const W=ne(G);if(!W.valid){C(W.error),E({title:"",description:W.error,variant:"destructive"});return}C(""),F(!0);try{const U=await cp(G),ee=oe(U);d(ee),j(G),await rp(G),E({title:"",description:""})}catch(U){console.error(":",U),E({title:"",description:U instanceof Error?U.message:"",variant:"destructive"})}finally{F(!1)}},[E]);u.useEffect(()=>{(async()=>{try{const W=await rw();if(W&&W.path){j(W.path);const U=Object.entries(Tu).find(([,ee])=>ee.path===W.path);U?(r("preset"),N(U[0]),await Ce(U[0])):(r("path"),await we(W.path))}}catch(W){console.error(":",W)}})()},[we,Ce]);const pe=u.useCallback(G=>{n!=="path"&&n!=="preset"||!f||(R.current&&clearTimeout(R.current),R.current=setTimeout(async()=>{w(!0);try{const W=ae(G);await op(f,W),E({title:"",description:""})}catch(W){console.error(":",W),E({title:"",description:W instanceof Error?W.message:"",variant:"destructive"})}finally{w(!1)}},1e3))},[n,f,E]),Ne=async()=>{if(!c||!f)return;const G=ne(f);if(!G.valid){E({title:"",description:G.error,variant:"destructive"});return}w(!0);try{const W=ae(c);await op(f,W),E({title:"",description:""})}catch(W){console.error(":",W),E({title:"",description:W instanceof Error?W.message:"",variant:"destructive"})}finally{w(!1)}},be=async()=>{f&&await we(f)},A=G=>{if(G!==n){if(c){V(G),O(!0);return}X(G)}},X=G=>{d(null),x(""),C(""),r(G),G==="preset"&&Ce("oneclick"),E({title:"",description:{upload:"",path:"",preset:""}[G]})},T=()=>{z&&(X(z),V(null)),O(!1)},te=()=>{if(c){H(!0);return}_()},_=()=>{j(""),d(null),C(""),E({title:"",description:""})},me=()=>{_(),H(!1)},oe=G=>{const W=JSON.parse(JSON.stringify(Ps)),U=G.split(`
`);let ee="";for(const Se of U){const Me=Se.trim();if(!Me||Me.startsWith("#"))continue;const tt=Me.match(/^\[(\w+)\]/);if(tt){ee=tt[1];continue}const Xe=Me.match(/^(\w+)\s*=\s*(.+)$/);if(Xe&&ee){const[,Ut,Bt]=Xe;let re=Bt.trim();const ke=re.match(/^("[^"]*")/);if(ke)re=ke[1];else{const Fe=re.indexOf("#");Fe!==-1&&(re=re.substring(0,Fe).trim())}let Pe;if(re==="true")Pe=!0;else if(re==="false")Pe=!1;else if(re.startsWith("[")&&re.endsWith("]")){const Fe=re.slice(1,-1).trim();if(Fe){const ts=Fe.split(",").map(js=>{const Ke=js.trim();return isNaN(Number(Ke))?Ke.replace(/"/g,""):Number(Ke)}),As=typeof ts[0];Pe=ts.every(js=>typeof js===As)?ts:ts.filter(js=>typeof js=="number")}else Pe=[]}else re.startsWith('"')&&re.endsWith('"')?Pe=re.slice(1,-1):isNaN(Number(re))?Pe=re.replace(/"/g,""):Pe=Number(re);if(ee in W){const Fe=W[ee];Fe[Ut]=Pe}}}return W},ae=G=>{const W=[],U=(ee,Se)=>ee===""||ee===null||ee===void 0?Se:ee;return W.push("[inner]"),W.push(`version = "${U(G.inner.version,Ps.inner.version)}" # `),W.push("# "),W.push(""),W.push("[nickname] # "),W.push(`nickname = "${U(G.nickname.nickname,Ps.nickname.nickname)}"`),W.push(""),W.push("[napcat_server] # Napcatws"),W.push(`host = "${U(G.napcat_server.host,Ps.napcat_server.host)}"      # Napcat`),W.push(`port = ${U(G.napcat_server.port||0,Ps.napcat_server.port)}             # Napcat`),W.push(`token = "${U(G.napcat_server.token,Ps.napcat_server.token)}"              # Napcat`),W.push(`heartbeat_interval = ${U(G.napcat_server.heartbeat_interval||0,Ps.napcat_server.heartbeat_interval)} # Napcat`),W.push(""),W.push("[maibot_server] # ws"),W.push(`host = "${U(G.maibot_server.host,Ps.maibot_server.host)}" # .envHOST`),W.push(`port = ${U(G.maibot_server.port||0,Ps.maibot_server.port)}        # .envPORT`),W.push(""),W.push("[chat] # "),W.push(`group_list_type = "${U(G.chat.group_list_type,Ps.chat.group_list_type)}" # whitelist, blacklist`),W.push(`group_list = [${G.chat.group_list.join(", ")}]               # `),W.push("# group_list_typewhitelist"),W.push("# group_list_typeblacklist"),W.push(`private_list_type = "${U(G.chat.private_list_type,Ps.chat.private_list_type)}" # whitelist, blacklist`),W.push(`private_list = [${G.chat.private_list.join(", ")}]               # `),W.push("# private_list_typewhitelist"),W.push("# private_list_typeblacklist"),W.push(`ban_user_id = [${G.chat.ban_user_id.join(", ")}]   # `),W.push(`ban_qq_bot = ${G.chat.ban_qq_bot} # QQ`),W.push(`enable_poke = ${G.chat.enable_poke} # `),W.push(""),W.push("[voice] # "),W.push(`use_tts = ${G.voice.use_tts} # ttsttsadapter`),W.push(""),W.push("[debug]"),W.push(`level = "${U(G.debug.level,Ps.debug.level)}" # DEBUG, INFO, WARNING, ERROR, CRITICAL`),W.join(`
`)},xe=G=>{const W=G.target.files?.[0];if(!W)return;const U=new FileReader;U.onload=ee=>{try{const Se=ee.target?.result,Me=oe(Se);d(Me),x(W.name),E({title:"",description:`${W.name}`})}catch(Se){console.error(":",Se),E({title:"",description:"",variant:"destructive"})}},U.readAsText(W)},ve=()=>{if(!c)return;const G=ae(c),W=new Blob([G],{type:"text/plain;charset=utf-8"}),U=URL.createObjectURL(W),ee=document.createElement("a");ee.href=U,ee.download=h||"config.toml",document.body.appendChild(ee),ee.click(),document.body.removeChild(ee),URL.revokeObjectURL(U),E({title:"",description:""})},de=()=>{d(JSON.parse(JSON.stringify(Ps))),x("config.toml"),E({title:"",description:""})};return e.jsx(st,{className:"h-full",children:e.jsxs("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:""}),e.jsx("p",{className:"text-muted-foreground mt-1 sm:mt-2 text-sm sm:text-base",children:" QQ "})]})}),e.jsxs("div",{className:"flex items-start gap-2 p-3 rounded-lg border border-amber-500/50 bg-amber-500/10 text-amber-700 dark:text-amber-400",children:[e.jsx(Oa,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-sm",children:" WebUI "})]}),e.jsxs(Ye,{children:[e.jsxs(Nt,{children:[e.jsx(wt,{children:""}),e.jsx(ns,{children:""})]}),e.jsxs(kt,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 md:gap-4",children:[e.jsx("div",{className:`border-2 rounded-lg p-3 md:p-4 cursor-pointer transition-all ${n==="preset"?"border-primary bg-primary/5":"border-muted hover:border-primary/50 active:border-primary/70"}`,onClick:()=>A("preset"),children:e.jsxs("div",{className:"flex items-start gap-2 md:gap-3",children:[e.jsx(rn,{className:"h-4 w-4 md:h-5 md:w-5 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"font-semibold text-sm md:text-base",children:""}),e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground mt-1 line-clamp-2",children:""})]})]})}),e.jsx("div",{className:`border-2 rounded-lg p-3 md:p-4 cursor-pointer transition-all ${n==="upload"?"border-primary bg-primary/5":"border-muted hover:border-primary/50 active:border-primary/70"}`,onClick:()=>A("upload"),children:e.jsxs("div",{className:"flex items-start gap-2 md:gap-3",children:[e.jsx(dr,{className:"h-4 w-4 md:h-5 md:w-5 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"font-semibold text-sm md:text-base",children:""}),e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground mt-1 line-clamp-2",children:""})]})]})}),e.jsx("div",{className:`border-2 rounded-lg p-3 md:p-4 cursor-pointer transition-all ${n==="path"?"border-primary bg-primary/5":"border-muted hover:border-primary/50 active:border-primary/70"}`,onClick:()=>A("path"),children:e.jsxs("div",{className:"flex items-start gap-2 md:gap-3",children:[e.jsx(yy,{className:"h-4 w-4 md:h-5 md:w-5 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"font-semibold text-sm md:text-base",children:""}),e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground mt-1 line-clamp-2",children:""})]})]})})]}),n==="preset"&&e.jsxs("div",{className:"space-y-3 pt-2 border-t",children:[e.jsx(y,{className:"text-sm md:text-base",children:""}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:Object.entries(Tu).map(([G,W])=>{const U=W.icon,ee=p===G;return e.jsx("div",{className:`border-2 rounded-lg p-3 cursor-pointer transition-all ${ee?"border-primary bg-primary/5":"border-muted hover:border-primary/50"}`,onClick:()=>{N(G),Ce(G)},children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(U,{className:"h-5 w-5 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h4",{className:"font-semibold text-sm",children:W.name}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:W.description}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1 font-mono break-all",children:W.path})]})]})},G)})})]}),n==="path"&&e.jsxs("div",{className:"space-y-3 pt-2 border-t",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"config-path",className:"text-sm md:text-base",children:""}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsx(ce,{id:"config-path",value:f,onChange:G=>fe(G.target.value),placeholder:": C:\\Adapter\\config.toml",className:`text-sm ${v?"border-destructive":""}`}),v&&e.jsx("p",{className:"text-xs text-destructive",children:v})]}),e.jsx(b,{onClick:()=>we(f),disabled:L||!f||!!v,className:"w-full sm:w-auto",children:L?e.jsxs(e.Fragment,{children:[e.jsx(ws,{className:"h-4 w-4 animate-spin mr-2"}),e.jsx("span",{className:"sm:hidden",children:"..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"sm:hidden",children:""}),e.jsx("span",{className:"hidden sm:inline",children:""})]})})]})]}),e.jsxs("details",{className:"rounded-lg bg-muted/50 p-3 group",children:[e.jsxs("summary",{className:"text-xs font-medium cursor-pointer select-none list-none flex items-center justify-between",children:[e.jsx("span",{children:""}),e.jsx("svg",{className:"h-4 w-4 transition-transform group-open:rotate-180",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),e.jsxs("div",{className:"mt-2 space-y-2 text-xs text-muted-foreground",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"font-mono bg-background px-1.5 py-0.5 rounded text-[10px] md:text-xs whitespace-nowrap",children:"Windows"})}),e.jsxs("div",{className:"pl-2 space-y-0.5 text-[10px] md:text-xs break-all",children:[e.jsx("div",{children:"C:\\Adapter\\config.toml"}),e.jsx("div",{className:"hidden sm:block",children:"D:\\MaiBot\\adapter\\config.toml"}),e.jsx("div",{className:"hidden sm:block",children:"\\\\server\\share\\config.toml"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"font-mono bg-background px-1.5 py-0.5 rounded text-[10px] md:text-xs whitespace-nowrap",children:"Linux"})}),e.jsxs("div",{className:"pl-2 space-y-0.5 text-[10px] md:text-xs break-all",children:[e.jsx("div",{children:"/opt/adapter/config.toml"}),e.jsx("div",{className:"hidden sm:block",children:"/home/user/adapter/config.toml"}),e.jsx("div",{className:"hidden sm:block",children:"~/adapter/config.toml"})]})]}),e.jsx("p",{className:"pt-1 border-t text-[10px] md:text-xs",children:"  1 "})]})]})]})]})]}),e.jsxs(cl,{children:[e.jsx(Ra,{className:"h-4 w-4"}),e.jsx(ol,{children:n==="preset"?e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:""})," 1 ",S&&" (...)"]}):n==="upload"?e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:""}),"      "]}):e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:""})," 1 ",S&&" (...)"]})})]}),n==="upload"&&!c&&e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full",children:[e.jsx("input",{ref:Y,type:"file",accept:".toml",className:"hidden",onChange:xe}),e.jsxs(b,{onClick:()=>Y.current?.click(),size:"sm",variant:"outline",className:"w-full sm:w-auto",children:[e.jsx(dr,{className:"mr-2 h-4 w-4"}),""]}),e.jsxs(b,{onClick:de,size:"sm",className:"w-full sm:w-auto",children:[e.jsx(Da,{className:"mr-2 h-4 w-4"}),""]})]}),n==="upload"&&c&&e.jsx("div",{className:"flex gap-2",children:e.jsxs(b,{onClick:ve,size:"sm",className:"w-full sm:w-auto",children:[e.jsx(rl,{className:"mr-2 h-4 w-4"}),""]})}),(n==="preset"||n==="path")&&c&&e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs(b,{onClick:Ne,size:"sm",disabled:S||!!v,className:"w-full sm:w-auto",children:[e.jsx(jr,{className:"mr-2 h-4 w-4"}),S?"...":""]}),e.jsxs(b,{onClick:be,size:"sm",variant:"outline",disabled:L,className:"w-full sm:w-auto",children:[e.jsx(ws,{className:`mr-2 h-4 w-4 ${L?"animate-spin":""}`}),""]}),n==="path"&&e.jsxs(b,{onClick:te,size:"sm",variant:"destructive",className:"w-full sm:w-auto",children:[e.jsx(at,{className:"mr-2 h-4 w-4"}),""]})]}),c?e.jsxs(La,{defaultValue:"napcat",className:"w-full",children:[e.jsx("div",{className:"overflow-x-auto -mx-4 px-4 sm:mx-0 sm:px-0",children:e.jsxs(wa,{className:"inline-flex w-auto min-w-full sm:grid sm:w-full sm:grid-cols-5",children:[e.jsxs(it,{value:"napcat",className:"flex-shrink-0 text-xs sm:text-sm whitespace-nowrap",children:[e.jsx("span",{className:"hidden sm:inline",children:"Napcat "}),e.jsx("span",{className:"sm:hidden",children:"Napcat"})]}),e.jsxs(it,{value:"maibot",className:"flex-shrink-0 text-xs sm:text-sm whitespace-nowrap",children:[e.jsx("span",{className:"hidden sm:inline",children:""}),e.jsx("span",{className:"sm:hidden",children:""})]}),e.jsxs(it,{value:"chat",className:"flex-shrink-0 text-xs sm:text-sm whitespace-nowrap",children:[e.jsx("span",{className:"hidden sm:inline",children:""}),e.jsx("span",{className:"sm:hidden",children:""})]}),e.jsxs(it,{value:"voice",className:"flex-shrink-0 text-xs sm:text-sm whitespace-nowrap",children:[e.jsx("span",{className:"hidden sm:inline",children:""}),e.jsx("span",{className:"sm:hidden",children:""})]}),e.jsx(it,{value:"debug",className:"flex-shrink-0 text-xs sm:text-sm whitespace-nowrap",children:""})]})}),e.jsx(zt,{value:"napcat",className:"space-y-4",children:e.jsx(ow,{config:c,onChange:G=>{d(G),pe(G)}})}),e.jsx(zt,{value:"maibot",className:"space-y-4",children:e.jsx(dw,{config:c,onChange:G=>{d(G),pe(G)}})}),e.jsx(zt,{value:"chat",className:"space-y-4",children:e.jsx(uw,{config:c,onChange:G=>{d(G),pe(G)}})}),e.jsx(zt,{value:"voice",className:"space-y-4",children:e.jsx(mw,{config:c,onChange:G=>{d(G),pe(G)}})}),e.jsx(zt,{value:"debug",className:"space-y-4",children:e.jsx(hw,{config:c,onChange:G=>{d(G),pe(G)}})})]}):e.jsx("div",{className:"rounded-lg border bg-card p-6 md:p-12",children:e.jsxs("div",{className:"text-center space-y-3 md:space-y-4",children:[e.jsx(Da,{className:"h-12 w-12 md:h-16 md:w-16 mx-auto text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold",children:""}),e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground mt-2 px-4",children:n==="preset"?"":n==="upload"?"":""})]})]})}),e.jsx(bt,{open:B,onOpenChange:O,children:e.jsxs(dt,{children:[e.jsxs(ut,{children:[e.jsx(ht,{children:""}),e.jsxs(xt,{children:["",e.jsx("br",{}),e.jsx("span",{className:"text-destructive font-medium",children:""})]})]}),e.jsxs(mt,{children:[e.jsx(pt,{onClick:()=>{O(!1),V(null)},children:""}),e.jsx(ft,{onClick:T,children:""})]})]})}),e.jsx(bt,{open:K,onOpenChange:H,children:e.jsxs(dt,{children:[e.jsxs(ut,{children:[e.jsx(ht,{children:""}),e.jsxs(xt,{children:["",e.jsx("br",{}),e.jsx("span",{className:"text-muted-foreground text-sm",children:""})]})]}),e.jsxs(mt,{children:[e.jsx(pt,{onClick:()=>H(!1),children:""}),e.jsx(ft,{onClick:me,className:"bg-destructive hover:bg-destructive/90",children:""})]})]})})]})})}function ow({config:n,onChange:r}){return e.jsx("div",{className:"rounded-lg border bg-card p-4 md:p-6 space-y-4 md:space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold mb-3 md:mb-4",children:"Napcat WebSocket "}),e.jsxs("div",{className:"grid gap-3 md:gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{htmlFor:"napcat-host",className:"text-sm md:text-base",children:""}),e.jsx(ce,{id:"napcat-host",value:n.napcat_server.host,onChange:c=>r({...n,napcat_server:{...n.napcat_server,host:c.target.value}}),placeholder:"localhost",className:"text-sm md:text-base"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Napcat "})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{htmlFor:"napcat-port",className:"text-sm md:text-base",children:""}),e.jsx(ce,{id:"napcat-port",type:"number",value:n.napcat_server.port||"",onChange:c=>r({...n,napcat_server:{...n.napcat_server,port:c.target.value?parseInt(c.target.value):0}}),placeholder:"8095",className:"text-sm md:text-base"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Napcat  8095"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{htmlFor:"napcat-token",className:"text-sm md:text-base",children:"Token"}),e.jsx(ce,{id:"napcat-token",type:"password",value:n.napcat_server.token,onChange:c=>r({...n,napcat_server:{...n.napcat_server,token:c.target.value}}),placeholder:"",className:"text-sm md:text-base"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Napcat "})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{htmlFor:"napcat-heartbeat",className:"text-sm md:text-base",children:""}),e.jsx(ce,{id:"napcat-heartbeat",type:"number",value:n.napcat_server.heartbeat_interval||"",onChange:c=>r({...n,napcat_server:{...n.napcat_server,heartbeat_interval:c.target.value?parseInt(c.target.value):0}}),placeholder:"30",className:"text-sm md:text-base"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" Napcat  30"})]})]})]})})}function dw({config:n,onChange:r}){return e.jsx("div",{className:"rounded-lg border bg-card p-4 md:p-6 space-y-4 md:space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold mb-3 md:mb-4",children:" WebSocket "}),e.jsxs("div",{className:"grid gap-3 md:gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{htmlFor:"maibot-host",className:"text-sm md:text-base",children:""}),e.jsx(ce,{id:"maibot-host",value:n.maibot_server.host,onChange:c=>r({...n,maibot_server:{...n.maibot_server,host:c.target.value}}),placeholder:"localhost",className:"text-sm md:text-base"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" .env  HOST "})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{htmlFor:"maibot-port",className:"text-sm md:text-base",children:""}),e.jsx(ce,{id:"maibot-port",type:"number",value:n.maibot_server.port||"",onChange:c=>r({...n,maibot_server:{...n.maibot_server,port:c.target.value?parseInt(c.target.value):0}}),placeholder:"8000",className:"text-sm md:text-base"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" .env  PORT  8000"})]})]})]})})}function uw({config:n,onChange:r}){const c=x=>{const f={...n};x==="group"?f.chat.group_list=[...f.chat.group_list,0]:x==="private"?f.chat.private_list=[...f.chat.private_list,0]:f.chat.ban_user_id=[...f.chat.ban_user_id,0],r(f)},d=(x,f)=>{const j={...n};x==="group"?j.chat.group_list=j.chat.group_list.filter((p,N)=>N!==f):x==="private"?j.chat.private_list=j.chat.private_list.filter((p,N)=>N!==f):j.chat.ban_user_id=j.chat.ban_user_id.filter((p,N)=>N!==f),r(j)},h=(x,f,j)=>{const p={...n};x==="group"?p.chat.group_list[f]=j:x==="private"?p.chat.private_list[f]=j:p.chat.ban_user_id[f]=j,r(p)};return e.jsx("div",{className:"rounded-lg border bg-card p-4 md:p-6 space-y-4 md:space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold mb-3 md:mb-4",children:""}),e.jsxs("div",{className:"grid gap-4 md:gap-6",children:[e.jsxs("div",{className:"space-y-3 md:space-y-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{className:"text-sm md:text-base",children:""}),e.jsxs(qe,{value:n.chat.group_list_type,onValueChange:x=>r({...n,chat:{...n.chat,group_list_type:x}}),children:[e.jsx(Be,{children:e.jsx(Ge,{})}),e.jsxs(He,{children:[e.jsx(ie,{value:"whitelist",children:""}),e.jsx(ie,{value:"blacklist",children:""})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-0",children:[e.jsx(y,{className:"text-sm md:text-base",children:""}),e.jsxs(b,{onClick:()=>c("group"),size:"sm",variant:"outline",className:"w-full sm:w-auto",children:[e.jsx(Da,{className:"mr-1 h-4 w-4"}),""]})]}),n.chat.group_list.map((x,f)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ce,{type:"number",value:x,onChange:j=>h("group",f,parseInt(j.target.value)||0),placeholder:"",className:"text-sm md:text-base"}),e.jsxs(bt,{children:[e.jsx(es,{asChild:!0,children:e.jsx(b,{size:"icon",variant:"outline",children:e.jsx(at,{className:"h-4 w-4"})})}),e.jsxs(dt,{children:[e.jsxs(ut,{children:[e.jsx(ht,{children:""}),e.jsxs(xt,{children:[" ",x," "]})]}),e.jsxs(mt,{children:[e.jsx(pt,{children:""}),e.jsx(ft,{onClick:()=>d("group",f),children:""})]})]})]})]},f)),n.chat.group_list.length===0&&e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]})]}),e.jsxs("div",{className:"space-y-3 md:space-y-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{className:"text-sm md:text-base",children:""}),e.jsxs(qe,{value:n.chat.private_list_type,onValueChange:x=>r({...n,chat:{...n.chat,private_list_type:x}}),children:[e.jsx(Be,{children:e.jsx(Ge,{})}),e.jsxs(He,{children:[e.jsx(ie,{value:"whitelist",children:""}),e.jsx(ie,{value:"blacklist",children:""})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-0",children:[e.jsx(y,{className:"text-sm md:text-base",children:""}),e.jsxs(b,{onClick:()=>c("private"),size:"sm",variant:"outline",className:"w-full sm:w-auto",children:[e.jsx(Da,{className:"mr-1 h-4 w-4"}),""]})]}),n.chat.private_list.map((x,f)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ce,{type:"number",value:x,onChange:j=>h("private",f,parseInt(j.target.value)||0),placeholder:"QQ",className:"text-sm md:text-base"}),e.jsxs(bt,{children:[e.jsx(es,{asChild:!0,children:e.jsx(b,{size:"icon",variant:"outline",children:e.jsx(at,{className:"h-4 w-4"})})}),e.jsxs(dt,{children:[e.jsxs(ut,{children:[e.jsx(ht,{children:""}),e.jsxs(xt,{children:[" ",x," "]})]}),e.jsxs(mt,{children:[e.jsx(pt,{children:""}),e.jsx(ft,{onClick:()=>d("private",f),children:""})]})]})]})]},f)),n.chat.private_list.length===0&&e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-0",children:[e.jsxs("div",{children:[e.jsx(y,{className:"text-sm md:text-base",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:""})]}),e.jsxs(b,{onClick:()=>c("ban"),size:"sm",variant:"outline",className:"w-full sm:w-auto",children:[e.jsx(Da,{className:"mr-1 h-4 w-4"}),""]})]}),n.chat.ban_user_id.map((x,f)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ce,{type:"number",value:x,onChange:j=>h("ban",f,parseInt(j.target.value)||0),placeholder:"QQ",className:"text-sm md:text-base"}),e.jsxs(bt,{children:[e.jsx(es,{asChild:!0,children:e.jsx(b,{size:"icon",variant:"outline",children:e.jsx(at,{className:"h-4 w-4"})})}),e.jsxs(dt,{children:[e.jsxs(ut,{children:[e.jsx(ht,{children:""}),e.jsxs(xt,{children:[" ",x," "]})]}),e.jsxs(mt,{children:[e.jsx(pt,{children:""}),e.jsx(ft,{onClick:()=>d("ban",f),children:""})]})]})]})]},f)),n.chat.ban_user_id.length===0&&e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(y,{className:"text-sm md:text-base",children:"QQ"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"QQ"})]}),e.jsx(Qe,{checked:n.chat.ban_qq_bot,onCheckedChange:x=>r({...n,chat:{...n.chat,ban_qq_bot:x}})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(y,{className:"text-sm md:text-base",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:""})]}),e.jsx(Qe,{checked:n.chat.enable_poke,onCheckedChange:x=>r({...n,chat:{...n.chat,enable_poke:x}})})]})]})]})})}function mw({config:n,onChange:r}){return e.jsx("div",{className:"rounded-lg border bg-card p-4 md:p-6 space-y-4 md:space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold mb-3 md:mb-4",children:""}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(y,{className:"text-sm md:text-base",children:" TTS "}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:" TTS "})]}),e.jsx(Qe,{checked:n.voice.use_tts,onCheckedChange:c=>r({...n,voice:{use_tts:c}})})]})]})})}function hw({config:n,onChange:r}){return e.jsx("div",{className:"rounded-lg border bg-card p-4 md:p-6 space-y-4 md:space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold mb-3 md:mb-4",children:""}),e.jsx("div",{className:"grid gap-3 md:gap-4",children:e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{className:"text-sm md:text-base",children:""}),e.jsxs(qe,{value:n.debug.level,onValueChange:c=>r({...n,debug:{level:c}}),children:[e.jsx(Be,{children:e.jsx(Ge,{})}),e.jsxs(He,{children:[e.jsx(ie,{value:"DEBUG",children:"DEBUG"}),e.jsx(ie,{value:"INFO",children:"INFO"}),e.jsx(ie,{value:"WARNING",children:"WARNING"}),e.jsx(ie,{value:"ERROR",children:"ERROR"}),e.jsx(ie,{value:"CRITICAL",children:"CRITICAL"})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})})]})})}const xw=["defaultChecked","defaultValue","suppressContentEditableWarning","suppressHydrationWarning","dangerouslySetInnerHTML","accessKey","className","contentEditable","contextMenu","dir","draggable","hidden","id","lang","placeholder","slot","spellCheck","style","tabIndex","title","translate","radioGroup","role","about","datatype","inlist","prefix","property","resource","typeof","vocab","autoCapitalize","autoCorrect","autoSave","color","itemProp","itemScope","itemType","itemID","itemRef","results","security","unselectable","inputMode","is","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],fw=/^(aria-|data-)/,zg=n=>Object.fromEntries(Object.entries(n).filter(([r])=>fw.test(r)||xw.includes(r)));function pw(n,r){const c=zg(n);return Object.keys(n).some(d=>!Object.hasOwn(c,d)&&n[d]!==r[d])}class gw extends u.Component{container;plugin;componentDidMount(){this.installPlugin()}componentDidUpdate(r){if(r.uppy!==this.props.uppy)this.uninstallPlugin(r),this.installPlugin();else if(pw(this.props,r)){const{uppy:c,...d}={...this.props,target:this.container};this.plugin.setOptions(d)}}componentWillUnmount(){this.uninstallPlugin()}installPlugin(){const{uppy:r,...c}={id:"Dashboard",...this.props,inline:!0,target:this.container};r.use(sN,c),this.plugin=r.getPlugin(c.id)}uninstallPlugin(r=this.props){const{uppy:c}=r;c.removePlugin(this.plugin)}render(){return u.createElement("div",{className:"uppy-Container",ref:r=>{this.container=r},...zg(this.props)})}}function jw({src:n,alt:r="",className:c,maxRetries:d=5,retryInterval:h=1500}){const[x,f]=u.useState("loading"),[j,p]=u.useState(0),[N,v]=u.useState(null),C=u.useCallback(async()=>{try{const S=await fetch(n,{credentials:"include"});if(S.status===202){f("generating"),j<d?setTimeout(()=>{p(F=>F+1)},h):f("error");return}if(!S.ok){f("error");return}const w=await S.blob(),L=URL.createObjectURL(w);v(L),f("loaded")}catch(S){console.error(":",S),f("error")}},[n,j,d,h]);return u.useEffect(()=>{f("loading"),p(0),v(null)},[n]),u.useEffect(()=>{C()},[C]),u.useEffect(()=>()=>{N&&URL.revokeObjectURL(N)},[N]),x==="loading"||x==="generating"?e.jsx(hg,{className:Q("w-full h-full",c)}):x==="error"||!N?e.jsx("div",{className:Q("w-full h-full flex items-center justify-center bg-muted",c),children:e.jsx(ig,{className:"h-8 w-8 text-muted-foreground"})}):e.jsx("img",{src:N,alt:r,className:Q("w-full h-full object-contain",c)})}function vw({content:n,className:r=""}){return e.jsx("div",{className:`prose prose-sm dark:prose-invert max-w-none ${r}`,children:e.jsx(lN,{remarkPlugins:[iN,rN],rehypePlugins:[nN],components:{code({inline:c,className:d,children:h,...x}){return c?e.jsx("code",{className:"bg-muted px-1.5 py-0.5 rounded text-sm font-mono",...x,children:h}):e.jsx("code",{className:`${d} block bg-muted p-4 rounded-lg overflow-x-auto`,...x,children:h})},table({children:c,...d}){return e.jsx("div",{className:"overflow-x-auto",children:e.jsx("table",{className:"border-collapse border border-border",...d,children:c})})},th({children:c,...d}){return e.jsx("th",{className:"border border-border bg-muted px-4 py-2 text-left font-semibold",...d,children:c})},td({children:c,...d}){return e.jsx("td",{className:"border border-border px-4 py-2",...d,children:c})},a({children:c,...d}){return e.jsx("a",{className:"text-primary hover:underline",target:"_blank",rel:"noopener noreferrer",...d,children:c})},blockquote({children:c,...d}){return e.jsx("blockquote",{className:"border-l-4 border-primary pl-4 italic text-muted-foreground",...d,children:c})},h1({children:c,...d}){return e.jsx("h1",{className:"text-3xl font-bold mt-6 mb-4",...d,children:c})},h2({children:c,...d}){return e.jsx("h2",{className:"text-2xl font-bold mt-5 mb-3",...d,children:c})},h3({children:c,...d}){return e.jsx("h3",{className:"text-xl font-bold mt-4 mb-2",...d,children:c})},h4({children:c,...d}){return e.jsx("h4",{className:"text-lg font-semibold mt-3 mb-2",...d,children:c})},ul({children:c,...d}){return e.jsx("ul",{className:"list-disc list-inside space-y-1 my-2",...d,children:c})},ol({children:c,...d}){return e.jsx("ol",{className:"list-decimal list-inside space-y-1 my-2",...d,children:c})},p({children:c,...d}){return e.jsx("p",{className:"my-2 leading-relaxed",...d,children:c})},hr({...c}){return e.jsx("hr",{className:"my-4 border-border",...c})}},children:n})})}function bw({children:n,className:r}){return e.jsx(vw,{content:n,className:r})}const xa="/api/webui/emoji";async function yw(n){const r=new URLSearchParams;n.page&&r.append("page",n.page.toString()),n.page_size&&r.append("page_size",n.page_size.toString()),n.search&&r.append("search",n.search),n.is_registered!==void 0&&r.append("is_registered",n.is_registered.toString()),n.is_banned!==void 0&&r.append("is_banned",n.is_banned.toString()),n.format&&r.append("format",n.format),n.sort_by&&r.append("sort_by",n.sort_by),n.sort_order&&r.append("sort_order",n.sort_order);const c=await Te(`${xa}/list?${r}`,{});if(!c.ok)throw new Error(`: ${c.statusText}`);return c.json()}async function Nw(n){const r=await Te(`${xa}/${n}`,{});if(!r.ok)throw new Error(`: ${r.statusText}`);return r.json()}async function ww(n,r){const c=await Te(`${xa}/${n}`,{method:"PATCH",body:JSON.stringify(r)});if(!c.ok)throw new Error(`: ${c.statusText}`);return c.json()}async function _w(n){const r=await Te(`${xa}/${n}`,{method:"DELETE"});if(!r.ok)throw new Error(`: ${r.statusText}`);return r.json()}async function Sw(){const n=await Te(`${xa}/stats/summary`,{});if(!n.ok)throw new Error(`: ${n.statusText}`);return n.json()}async function Cw(n){const r=await Te(`${xa}/${n}/register`,{method:"POST"});if(!r.ok)throw new Error(`: ${r.statusText}`);return r.json()}async function kw(n){const r=await Te(`${xa}/${n}/ban`,{method:"POST"});if(!r.ok)throw new Error(`: ${r.statusText}`);return r.json()}function Tw(n,r=!1){return r?`${xa}/${n}/thumbnail?original=true`:`${xa}/${n}/thumbnail`}function Ew(n){return`${xa}/${n}/thumbnail?original=true`}async function zw(n){const r=await Te(`${xa}/batch/delete`,{method:"POST",body:JSON.stringify({emoji_ids:n})});if(!r.ok){const c=await r.json();throw new Error(c.detail||"")}return r.json()}function Aw(){return`${xa}/upload`}function Mw(){const[n,r]=u.useState([]),[c,d]=u.useState(null),[h,x]=u.useState(!1),[f,j]=u.useState(1),[p,N]=u.useState(0),[v,C]=u.useState(20),[S,w]=u.useState("all"),[L,F]=u.useState("all"),[B,O]=u.useState("all"),[K,H]=u.useState("usage_count"),[z,V]=u.useState("desc"),[Y,E]=u.useState(null),[R,ne]=u.useState(!1),[fe,Ce]=u.useState(!1),[we,pe]=u.useState(!1),[Ne,be]=u.useState(new Set),[A,X]=u.useState(!1),[T,te]=u.useState(""),[_,me]=u.useState("medium"),[oe,ae]=u.useState(!1),{toast:xe}=Xt(),ve=u.useCallback(async()=>{try{x(!0);const re=await yw({page:f,page_size:v,is_registered:S==="all"?void 0:S==="registered",is_banned:L==="all"?void 0:L==="banned",format:B==="all"?void 0:B,sort_by:K,sort_order:z});r(re.data),N(re.total)}catch(re){const ke=re instanceof Error?re.message:"";xe({title:"",description:ke,variant:"destructive"})}finally{x(!1)}},[f,v,S,L,B,K,z,xe]),de=async()=>{try{const re=await Sw();d(re.data)}catch(re){console.error(":",re)}};u.useEffect(()=>{ve()},[ve]),u.useEffect(()=>{de()},[]);const G=async re=>{try{const ke=await Nw(re.id);E(ke.data),ne(!0)}catch(ke){const Pe=ke instanceof Error?ke.message:"";xe({title:"",description:Pe,variant:"destructive"})}},W=re=>{E(re),Ce(!0)},U=re=>{E(re),pe(!0)},ee=async()=>{if(Y)try{await _w(Y.id),xe({title:"",description:""}),pe(!1),E(null),ve(),de()}catch(re){const ke=re instanceof Error?re.message:"";xe({title:"",description:ke,variant:"destructive"})}},Se=async re=>{try{await Cw(re.id),xe({title:"",description:""}),ve(),de()}catch(ke){const Pe=ke instanceof Error?ke.message:"";xe({title:"",description:Pe,variant:"destructive"})}},Me=async re=>{try{await kw(re.id),xe({title:"",description:""}),ve(),de()}catch(ke){const Pe=ke instanceof Error?ke.message:"";xe({title:"",description:Pe,variant:"destructive"})}},tt=re=>{const ke=new Set(Ne);ke.has(re)?ke.delete(re):ke.add(re),be(ke)},Xe=async()=>{try{const re=await zw(Array.from(Ne));xe({title:"",description:re.message}),be(new Set),X(!1),ve(),de()}catch(re){xe({title:"",description:re instanceof Error?re.message:"",variant:"destructive"})}},Ut=()=>{const re=parseInt(T),ke=Math.ceil(p/v);re>=1&&re<=ke?(j(re),te("")):xe({title:"",description:`1-${ke}`,variant:"destructive"})},Bt=c?.formats?Object.keys(c.formats):[];return e.jsxs("div",{className:"h-[calc(100vh-4rem)] flex flex-col p-4 sm:p-6",children:[e.jsxs("div",{className:"mb-4 sm:mb-6 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:""})]}),e.jsxs(b,{onClick:()=>ae(!0),className:"gap-2",children:[e.jsx(dr,{className:"h-4 w-4"}),""]})]}),e.jsx(st,{className:"flex-1",children:e.jsxs("div",{className:"space-y-4 sm:space-y-6 pr-4",children:[c&&e.jsxs("div",{className:"grid gap-4 grid-cols-2 lg:grid-cols-4",children:[e.jsx(Ye,{children:e.jsxs(Nt,{className:"pb-2",children:[e.jsx(ns,{children:""}),e.jsx(wt,{className:"text-2xl",children:c.total})]})}),e.jsx(Ye,{children:e.jsxs(Nt,{className:"pb-2",children:[e.jsx(ns,{children:""}),e.jsx(wt,{className:"text-2xl text-green-600",children:c.registered})]})}),e.jsx(Ye,{children:e.jsxs(Nt,{className:"pb-2",children:[e.jsx(ns,{children:""}),e.jsx(wt,{className:"text-2xl text-red-600",children:c.banned})]})}),e.jsx(Ye,{children:e.jsxs(Nt,{className:"pb-2",children:[e.jsx(ns,{children:""}),e.jsx(wt,{className:"text-2xl text-gray-600",children:c.unregistered})]})})]}),e.jsxs(Ye,{children:[e.jsx(Nt,{children:e.jsxs(wt,{className:"flex items-center gap-2",children:[e.jsx(Eu,{className:"h-5 w-5"}),""]})}),e.jsxs(kt,{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{children:""}),e.jsxs(qe,{value:`${K}-${z}`,onValueChange:re=>{const[ke,Pe]=re.split("-");H(ke),V(Pe),j(1)},children:[e.jsx(Be,{children:e.jsx(Ge,{})}),e.jsxs(He,{children:[e.jsx(ie,{value:"usage_count-desc",children:" ()"}),e.jsx(ie,{value:"usage_count-asc",children:" ()"}),e.jsx(ie,{value:"register_time-desc",children:" ()"}),e.jsx(ie,{value:"register_time-asc",children:" ()"}),e.jsx(ie,{value:"record_time-desc",children:" ()"}),e.jsx(ie,{value:"record_time-asc",children:" ()"}),e.jsx(ie,{value:"last_used_time-desc",children:" ()"}),e.jsx(ie,{value:"last_used_time-asc",children:" ()"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{children:""}),e.jsxs(qe,{value:S,onValueChange:re=>{w(re),j(1)},children:[e.jsx(Be,{children:e.jsx(Ge,{})}),e.jsxs(He,{children:[e.jsx(ie,{value:"all",children:""}),e.jsx(ie,{value:"registered",children:""}),e.jsx(ie,{value:"unregistered",children:""})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{children:""}),e.jsxs(qe,{value:L,onValueChange:re=>{F(re),j(1)},children:[e.jsx(Be,{children:e.jsx(Ge,{})}),e.jsxs(He,{children:[e.jsx(ie,{value:"all",children:""}),e.jsx(ie,{value:"banned",children:""}),e.jsx(ie,{value:"unbanned",children:""})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{children:""}),e.jsxs(qe,{value:B,onValueChange:re=>{O(re),j(1)},children:[e.jsx(Be,{children:e.jsx(Ge,{})}),e.jsxs(He,{children:[e.jsx(ie,{value:"all",children:""}),Bt.map(re=>e.jsxs(ie,{value:re,children:[re.toUpperCase()," (",c?.formats[re],")"]},re))]})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 pt-4 border-t",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[Ne.size>0&&e.jsxs("span",{className:"text-sm text-muted-foreground",children:[" ",Ne.size," "]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{className:"text-sm whitespace-nowrap",children:""}),e.jsxs(qe,{value:_,onValueChange:re=>me(re),children:[e.jsx(Be,{className:"w-24",children:e.jsx(Ge,{})}),e.jsxs(He,{children:[e.jsx(ie,{value:"small",children:""}),e.jsx(ie,{value:"medium",children:""}),e.jsx(ie,{value:"large",children:""})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{htmlFor:"emoji-page-size",className:"text-sm whitespace-nowrap",children:""}),e.jsxs(qe,{value:v.toString(),onValueChange:re=>{C(parseInt(re)),j(1),be(new Set)},children:[e.jsx(Be,{id:"emoji-page-size",className:"w-20",children:e.jsx(Ge,{})}),e.jsxs(He,{children:[e.jsx(ie,{value:"20",children:"20"}),e.jsx(ie,{value:"40",children:"40"}),e.jsx(ie,{value:"60",children:"60"}),e.jsx(ie,{value:"100",children:"100"})]})]}),Ne.size>0&&e.jsxs(e.Fragment,{children:[e.jsx(b,{variant:"outline",size:"sm",onClick:()=>be(new Set),children:""}),e.jsxs(b,{variant:"destructive",size:"sm",onClick:()=>X(!0),children:[e.jsx(at,{className:"h-4 w-4 mr-1"}),""]})]})]})]}),e.jsx("div",{className:"flex justify-end pt-4 border-t",children:e.jsxs(b,{variant:"outline",size:"sm",onClick:ve,disabled:h,children:[e.jsx(ws,{className:`h-4 w-4 mr-2 ${h?"animate-spin":""}`}),""]})})]})]}),e.jsxs(Ye,{children:[e.jsxs(Nt,{children:[e.jsx(wt,{children:""}),e.jsxs(ns,{children:[" ",p,"  ",f," "]})]}),e.jsxs(kt,{children:[n.length===0?e.jsx("div",{className:"text-center py-12 text-muted-foreground",children:""}):e.jsx("div",{className:`grid gap-3 ${_==="small"?"grid-cols-3 sm:grid-cols-4 md:grid-cols-6 lg:grid-cols-8 xl:grid-cols-10":_==="medium"?"grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 xl:grid-cols-8":"grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5"}`,children:n.map(re=>e.jsxs("div",{className:`group relative rounded-lg border bg-card overflow-hidden hover:ring-2 hover:ring-primary transition-all cursor-pointer ${Ne.has(re.id)?"ring-2 ring-primary bg-primary/5":""}`,onClick:()=>tt(re.id),children:[e.jsx("div",{className:`absolute top-1 left-1 z-10 transition-opacity ${Ne.has(re.id)?"opacity-100":"opacity-0 group-hover:opacity-100"}`,children:e.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${Ne.has(re.id)?"bg-primary border-primary text-primary-foreground":"bg-background/80 border-muted-foreground/50"}`,children:Ne.has(re.id)&&e.jsx(ha,{className:"h-3 w-3"})})}),e.jsxs("div",{className:"absolute top-1 right-1 z-10 flex flex-col gap-0.5",children:[re.is_registered&&e.jsx(Je,{variant:"default",className:"bg-green-600 text-[10px] px-1 py-0",children:""}),re.is_banned&&e.jsx(Je,{variant:"destructive",className:"text-[10px] px-1 py-0",children:""})]}),e.jsx("div",{className:`aspect-square bg-muted flex items-center justify-center overflow-hidden ${_==="small"?"p-1":_==="medium"?"p-2":"p-3"}`,children:e.jsx(jw,{src:Tw(re.id),alt:""})}),e.jsxs("div",{className:`border-t bg-card ${_==="small"?"p-1":"p-2"}`,children:[e.jsxs("div",{className:"flex items-center justify-between gap-1 text-xs text-muted-foreground mb-1",children:[e.jsx(Je,{variant:"outline",className:"text-[10px] px-1 py-0",children:re.format.toUpperCase()}),e.jsxs("span",{className:"font-mono",children:[re.usage_count,""]})]}),e.jsxs("div",{className:`flex gap-1 justify-center opacity-0 group-hover:opacity-100 transition-opacity ${_==="small"?"flex-wrap":""}`,children:[e.jsx(b,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:ke=>{ke.stopPropagation(),W(re)},title:"",children:e.jsx(mr,{className:"h-3 w-3"})}),e.jsx(b,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:ke=>{ke.stopPropagation(),G(re)},title:"",children:e.jsx(Ra,{className:"h-3 w-3"})}),!re.is_registered&&e.jsx(b,{variant:"ghost",size:"icon",className:"h-6 w-6 text-green-600 hover:text-green-700",onClick:ke=>{ke.stopPropagation(),Se(re)},title:"",children:e.jsx(ha,{className:"h-3 w-3"})}),!re.is_banned&&e.jsx(b,{variant:"ghost",size:"icon",className:"h-6 w-6 text-orange-600 hover:text-orange-700",onClick:ke=>{ke.stopPropagation(),Me(re)},title:"",children:e.jsx(Ny,{className:"h-3 w-3"})}),e.jsx(b,{variant:"ghost",size:"icon",className:"h-6 w-6 text-red-600 hover:text-red-700",onClick:ke=>{ke.stopPropagation(),U(re)},title:"",children:e.jsx(at,{className:"h-3 w-3"})})]})]})]},re.id))}),p>0&&e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 mt-4",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:[" ",(f-1)*v+1," "," ",Math.min(f*v,p),"  ",p," "]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{variant:"outline",size:"sm",onClick:()=>j(1),disabled:f===1,className:"hidden sm:flex",children:e.jsx(vr,{className:"h-4 w-4"})}),e.jsxs(b,{variant:"outline",size:"sm",onClick:()=>j(re=>Math.max(1,re-1)),disabled:f===1,children:[e.jsx(dn,{className:"h-4 w-4 sm:mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ce,{type:"number",value:T,onChange:re=>te(re.target.value),onKeyDown:re=>re.key==="Enter"&&Ut(),placeholder:f.toString(),className:"w-16 h-8 text-center",min:1,max:Math.ceil(p/v)}),e.jsx(b,{variant:"outline",size:"sm",onClick:Ut,disabled:!T,className:"h-8",children:""})]}),e.jsxs(b,{variant:"outline",size:"sm",onClick:()=>j(re=>re+1),disabled:f>=Math.ceil(p/v),children:[e.jsx("span",{className:"hidden sm:inline",children:""}),e.jsx(Ll,{className:"h-4 w-4 sm:ml-1"})]}),e.jsx(b,{variant:"outline",size:"sm",onClick:()=>j(Math.ceil(p/v)),disabled:f>=Math.ceil(p/v),className:"hidden sm:flex",children:e.jsx(br,{className:"h-4 w-4"})})]})]})]})]}),e.jsx(Dw,{emoji:Y,open:R,onOpenChange:ne}),e.jsx(Ow,{emoji:Y,open:fe,onOpenChange:Ce,onSuccess:()=>{ve(),de()}}),e.jsx(Rw,{open:oe,onOpenChange:ae,onSuccess:()=>{ve(),de()}})]})}),e.jsx(bt,{open:A,onOpenChange:X,children:e.jsxs(dt,{children:[e.jsxs(ut,{children:[e.jsx(ht,{children:""}),e.jsxs(xt,{children:[" ",Ne.size," "]})]}),e.jsxs(mt,{children:[e.jsx(pt,{children:""}),e.jsx(ft,{onClick:Xe,children:""})]})]})}),e.jsx(Jt,{open:we,onOpenChange:pe,children:e.jsxs($t,{children:[e.jsxs(Qt,{children:[e.jsx(Yt,{children:""}),e.jsx(ds,{children:""})]}),e.jsxs(xs,{children:[e.jsx(b,{variant:"outline",onClick:()=>pe(!1),children:""}),e.jsx(b,{variant:"destructive",onClick:ee,children:""})]})]})})]})}function Dw({emoji:n,open:r,onOpenChange:c}){if(!n)return null;const d=h=>h?new Date(h*1e3).toLocaleString("zh-CN"):"-";return e.jsx(Jt,{open:r,onOpenChange:c,children:e.jsxs($t,{className:"max-w-2xl max-h-[90vh]",children:[e.jsx(Qt,{children:e.jsx(Yt,{children:""})}),e.jsx(st,{className:"max-h-[calc(90vh-8rem)] pr-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"w-32 h-32 bg-muted rounded-lg flex items-center justify-center overflow-hidden",children:e.jsx("img",{src:Ew(n.id),alt:n.description||"",className:"w-full h-full object-cover",onError:h=>{const x=h.target;x.style.display="none";const f=x.parentElement;f&&(f.innerHTML='<svg class="h-16 w-16 text-muted-foreground" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg>')}})})}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(y,{className:"text-muted-foreground",children:"ID"}),e.jsx("div",{className:"mt-1 font-mono",children:n.id})]}),e.jsxs("div",{children:[e.jsx(y,{className:"text-muted-foreground",children:""}),e.jsx("div",{className:"mt-1",children:e.jsx(Je,{variant:"outline",children:n.format.toUpperCase()})})]})]}),e.jsxs("div",{children:[e.jsx(y,{className:"text-muted-foreground",children:""}),e.jsx("div",{className:"mt-1 font-mono text-sm break-all bg-muted p-2 rounded",children:n.full_path})]}),e.jsxs("div",{children:[e.jsx(y,{className:"text-muted-foreground",children:""}),e.jsx("div",{className:"mt-1 font-mono text-sm break-all bg-muted p-2 rounded",children:n.emoji_hash})]}),e.jsxs("div",{children:[e.jsx(y,{className:"text-muted-foreground",children:""}),n.description?e.jsx("div",{className:"mt-1 rounded-lg border bg-muted/50 p-3",children:e.jsx(bw,{className:"prose-sm",children:n.description})}):e.jsx("div",{className:"mt-1 text-sm text-muted-foreground",children:"-"})]}),e.jsxs("div",{children:[e.jsx(y,{className:"text-muted-foreground",children:""}),e.jsx("div",{className:"mt-1",children:n.emotion?e.jsx("span",{className:"text-sm",children:n.emotion}):e.jsx("span",{className:"text-sm text-muted-foreground",children:"-"})})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(y,{className:"text-muted-foreground",children:""}),e.jsxs("div",{className:"mt-2 flex gap-2",children:[n.is_registered&&e.jsx(Je,{variant:"default",className:"bg-green-600",children:""}),n.is_banned&&e.jsx(Je,{variant:"destructive",children:""}),!n.is_registered&&!n.is_banned&&e.jsx(Je,{variant:"outline",children:""})]})]}),e.jsxs("div",{children:[e.jsx(y,{className:"text-muted-foreground",children:""}),e.jsx("div",{className:"mt-1 font-mono text-lg",children:n.usage_count})]})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(y,{className:"text-muted-foreground",children:""}),e.jsx("div",{className:"mt-1 text-sm",children:d(n.record_time)})]}),e.jsxs("div",{children:[e.jsx(y,{className:"text-muted-foreground",children:""}),e.jsx("div",{className:"mt-1 text-sm",children:d(n.register_time)})]})]}),e.jsxs("div",{children:[e.jsx(y,{className:"text-muted-foreground",children:""}),e.jsx("div",{className:"mt-1 text-sm",children:d(n.last_used_time)})]})]})})]})})}function Ow({emoji:n,open:r,onOpenChange:c,onSuccess:d}){const[h,x]=u.useState(""),[f,j]=u.useState(!1),[p,N]=u.useState(!1),[v,C]=u.useState(!1),{toast:S}=Xt();u.useEffect(()=>{n&&(x(n.emotion||""),j(n.is_registered),N(n.is_banned))},[n]);const w=async()=>{if(n)try{C(!0);const L=h.split(/[,,]/).map(F=>F.trim()).filter(Boolean).join(",");await ww(n.id,{emotion:L||void 0,is_registered:f,is_banned:p}),S({title:"",description:""}),c(!1),d()}catch(L){const F=L instanceof Error?L.message:"";S({title:"",description:F,variant:"destructive"})}finally{C(!1)}};return n?e.jsx(Jt,{open:r,onOpenChange:c,children:e.jsxs($t,{className:"max-w-2xl",children:[e.jsxs(Qt,{children:[e.jsx(Yt,{children:""}),e.jsx(ds,{children:""})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(y,{children:""}),e.jsx(Ft,{value:h,onChange:L=>x(L.target.value),placeholder:"...",rows:2,className:"mt-1"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:""})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Cs,{id:"is_registered",checked:f,onCheckedChange:L=>{L===!0?(j(!0),N(!1)):j(!1)}}),e.jsx(y,{htmlFor:"is_registered",className:"cursor-pointer",children:""})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Cs,{id:"is_banned",checked:p,onCheckedChange:L=>{L===!0?(N(!0),j(!1)):N(!1)}}),e.jsx(y,{htmlFor:"is_banned",className:"cursor-pointer",children:""})]})]})]}),e.jsxs(xs,{children:[e.jsx(b,{variant:"outline",onClick:()=>c(!1),children:""}),e.jsx(b,{onClick:w,disabled:v,children:v?"...":""})]})]})}):null}function Rw({open:n,onOpenChange:r,onSuccess:c}){const[d,h]=u.useState("select"),[x,f]=u.useState([]),[j,p]=u.useState(null),[N,v]=u.useState(!1),{toast:C}=Xt(),S=u.useMemo(()=>new aN({id:"emoji-uploader",autoProceed:!1,restrictions:{maxFileSize:10485760,allowedFileTypes:["image/jpeg","image/png","image/gif","image/webp"],maxNumberOfFiles:20},locale:{pluralize:()=>0,strings:{addMoreFiles:"",addingMoreFiles:"",allowedFileTypes:"%{types}",cancel:"",closeModal:"",complete:"",connectedToInternet:"",copyLink:"",copyLinkToClipboardFallback:"",copyLinkToClipboardSuccess:"",dashboardTitle:"",dashboardWindowTitle:" ESC ",done:"",dropHereOr:" %{browse}",dropHint:"",dropPasteFiles:" %{browseFiles}",dropPasteFolders:" %{browseFolders}",dropPasteBoth:"%{browseFiles}  %{browseFolders}",dropPasteImportFiles:"%{browseFiles} ",dropPasteImportFolders:"%{browseFolders} ",dropPasteImportBoth:"%{browseFiles}%{browseFolders} ",editFile:"",editing:" %{file}",emptyFolderAdded:"",exceedsSize:"%{file}  %{size}",failedToUpload:" %{file} ",fileSource:"%{name}",filesUploadedOfTotal:{0:" %{complete} / %{smart_count} ",1:" %{complete} / %{smart_count} "},filter:"",finishEditingFile:"",folderAdded:{0:" %{folder}  %{smart_count} ",1:" %{folder}  %{smart_count} "},generatingThumbnails:"...",import:"",importFiles:"",importFrom:" %{name} ",loading:"...",logOut:"",myDevice:"",noFilesFound:"",noInternetConnection:"",openFolderNamed:" %{name}",pause:"",pauseUpload:"",paused:"",poweredBy:"%{uppy}",processingXFiles:{0:" %{smart_count} ",1:" %{smart_count} "},recording:"",removeFile:"",resetFilter:"",resume:"",resumeUpload:"",retry:"",retryUpload:"",save:"",saveChanges:"",selectFileNamed:" %{name}",selectX:{0:" %{smart_count}",1:" %{smart_count}"},smile:"",startRecording:"",stopRecording:"",takePicture:"",timedOut:" %{seconds} ",upload:"",uploadComplete:"",uploadFailed:"",uploadPaused:"",uploadXFiles:{0:"%{smart_count} ",1:"%{smart_count} "},uploadXNewFiles:{0:"+%{smart_count} ",1:"+%{smart_count} "},uploading:"",uploadingXFiles:{0:" %{smart_count} ",1:" %{smart_count} "},xFilesSelected:{0:" %{smart_count} ",1:" %{smart_count} "},xMoreFilesAdded:{0:" %{smart_count} ",1:" %{smart_count} "},xTimeLeft:" %{time}",youCanOnlyUploadFileTypes:"%{types}",youCanOnlyUploadX:{0:" %{smart_count} ",1:" %{smart_count} "},youHaveToAtLeastSelectX:{0:" %{smart_count} ",1:" %{smart_count} "},browseFiles:"",browseFolders:"",cancelUpload:"",addMore:"",back:"",editFileWithFilename:" %{file}"}}}),[]);u.useEffect(()=>{const Y=()=>{const E=S.getFiles();if(E.length===0)return;const R=E.map(ne=>({id:ne.id,name:ne.name,previewUrl:ne.preview||URL.createObjectURL(ne.data),emotion:"",description:"",isRegistered:!0,file:ne.data}));f(R),E.length===1?(p(R[0].id),h("edit-single")):h("edit-multiple")};return S.on("upload",Y),()=>{S.off("upload",Y)}},[S]),u.useEffect(()=>{n||(S.cancelAll(),h("select"),f([]),p(null),v(!1))},[n,S]);const w=u.useCallback((Y,E)=>{f(R=>R.map(ne=>ne.id===Y?{...ne,...E}:ne))},[]),L=u.useCallback(Y=>Y.emotion.trim().length>0,[]),F=u.useMemo(()=>x.length>0&&x.every(L),[x,L]),B=u.useMemo(()=>x.find(Y=>Y.id===j)||null,[x,j]),O=u.useCallback(()=>{(d==="edit-single"||d==="edit-multiple")&&(h("select"),f([]),p(null))},[d]),K=u.useCallback(async()=>{if(!F){C({title:"",description:"",variant:"destructive"});return}v(!0);const Y=localStorage.getItem("access-token")||"";let E=0,R=0;try{for(const ne of x){const fe=new FormData;fe.append("file",ne.file),fe.append("emotion",ne.emotion),fe.append("description",ne.description),fe.append("is_registered",ne.isRegistered.toString());try{(await fetch(Aw(),{method:"POST",headers:{Authorization:`Bearer ${Y}`},body:fe})).ok?E++:R++}catch{R++}}R===0?(C({title:"",description:` ${E} `}),r(!1),c()):(C({title:"",description:` ${E}  ${R} `,variant:"destructive"}),c())}finally{v(!1)}},[F,x,C,r,c]),H=()=>e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"border rounded-lg overflow-hidden w-full",children:e.jsx(gw,{uppy:S,proudlyDisplayPoweredByUppy:!1,hideProgressDetails:!0,height:350,width:"100%",theme:"auto",note:" JPGPNGGIFWebP  20 "})})}),z=()=>{const Y=x[0];return Y?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(b,{variant:"ghost",size:"sm",onClick:O,children:[e.jsx(ti,{className:"h-4 w-4 mr-1"}),""]}),e.jsx("span",{className:"text-sm text-muted-foreground",children:""})]}),e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("div",{className:"flex-shrink-0",children:[e.jsx("div",{className:"w-32 h-32 rounded-lg border overflow-hidden bg-muted flex items-center justify-center",children:e.jsx("img",{src:Y.previewUrl,alt:Y.name,className:"max-w-full max-h-full object-contain"})}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2 text-center truncate max-w-32",children:Y.name})]}),e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(y,{htmlFor:"single-emotion",children:[" ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(ce,{id:"single-emotion",value:Y.emotion,onChange:E=>w(Y.id,{emotion:E.target.value}),placeholder:",",className:Y.emotion.trim()?"":"border-destructive"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"single-description",children:""}),e.jsx(ce,{id:"single-description",value:Y.description,onChange:E=>w(Y.id,{description:E.target.value}),placeholder:"..."})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Cs,{id:"single-is-registered",checked:Y.isRegistered,onCheckedChange:E=>w(Y.id,{isRegistered:E===!0})}),e.jsx(y,{htmlFor:"single-is-registered",className:"cursor-pointer",children:""})]})]})]}),e.jsx(xs,{children:e.jsx(b,{onClick:K,disabled:!F||N,children:N?"...":""})})]}):null},V=()=>{const Y=x.filter(L).length,E=x.length;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(b,{variant:"ghost",size:"sm",onClick:O,children:[e.jsx(ti,{className:"h-4 w-4 mr-1"}),""]}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["",Y,"/",E," "]})]}),e.jsx(Je,{variant:F?"default":"secondary",children:F?e.jsxs(e.Fragment,{children:[e.jsx(Na,{className:"h-3 w-3 mr-1"}),""]}):e.jsxs(e.Fragment,{children:[e.jsx(on,{className:"h-3 w-3 mr-1"}),""]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(st,{className:"h-[350px] pr-2",children:e.jsx("div",{className:"space-y-2",children:x.map(R=>{const ne=L(R),fe=j===R.id;return e.jsxs("div",{onClick:()=>p(R.id),className:`
                      flex items-center gap-3 p-3 rounded-lg border-2 cursor-pointer transition-all
                      ${fe?"ring-2 ring-primary":""}
                      ${ne?"border-green-500 bg-green-50 dark:bg-green-950/20":"border-border hover:border-muted-foreground/50"}
                    `,children:[e.jsx("div",{className:"w-12 h-12 rounded border overflow-hidden bg-muted flex-shrink-0 flex items-center justify-center",children:e.jsx("img",{src:R.previewUrl,alt:R.name,className:"max-w-full max-h-full object-contain"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:R.name}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:R.emotion||""})]}),ne?e.jsx(ha,{className:"h-5 w-5 text-green-500 flex-shrink-0"}):e.jsx("div",{className:"h-5 w-5 rounded-full border-2 border-muted-foreground/30 flex-shrink-0"})]},R.id)})})}),e.jsx("div",{className:"border rounded-lg p-4",children:B?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-16 h-16 rounded border overflow-hidden bg-muted flex items-center justify-center",children:e.jsx("img",{src:B.previewUrl,alt:B.name,className:"max-w-full max-h-full object-contain"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium truncate",children:B.name}),L(B)&&e.jsxs(Je,{variant:"outline",className:"text-green-600 border-green-600",children:[e.jsx(Na,{className:"h-3 w-3 mr-1"}),""]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(y,{htmlFor:"multi-emotion",children:[" ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(ce,{id:"multi-emotion",value:B.emotion,onChange:R=>w(B.id,{emotion:R.target.value}),placeholder:",",className:B.emotion.trim()?"":"border-destructive"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"multi-description",children:""}),e.jsx(ce,{id:"multi-description",value:B.description,onChange:R=>w(B.id,{description:R.target.value}),placeholder:"..."})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Cs,{id:"multi-is-registered",checked:B.isRegistered,onCheckedChange:R=>w(B.id,{isRegistered:R===!0})}),e.jsx(y,{htmlFor:"multi-is-registered",className:"cursor-pointer text-sm",children:""})]})]}):e.jsx("div",{className:"h-full flex items-center justify-center text-muted-foreground",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ig,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:""})]})})})]}),e.jsx(xs,{children:e.jsx(b,{onClick:K,disabled:!F||N,children:N?"...":` (${E})`})})]})};return e.jsx(Jt,{open:n,onOpenChange:r,children:e.jsxs($t,{className:"max-w-3xl max-h-[90vh] overflow-hidden",children:[e.jsxs(Qt,{children:[e.jsxs(Yt,{className:"flex items-center gap-2",children:[e.jsx(dr,{className:"h-5 w-5"}),d==="select"&&" - ",d==="edit-single"&&" - ",d==="edit-multiple"&&" - "]}),e.jsxs(ds,{children:[d==="select"&&" JPGPNGGIFWebP  10MB",d==="edit-single"&&"",d==="edit-multiple"&&""]})]}),e.jsxs("div",{className:"overflow-y-auto pr-1",children:[d==="select"&&H(),d==="edit-single"&&z(),d==="edit-multiple"&&V()]})]})})}const Bl="/api/webui/expression";async function Lw(){const n=await Te(`${Bl}/chats`,{});if(!n.ok){const r=await n.json();throw new Error(r.detail||"")}return n.json()}async function Uw(n){const r=new URLSearchParams;n.page&&r.append("page",n.page.toString()),n.page_size&&r.append("page_size",n.page_size.toString()),n.search&&r.append("search",n.search),n.chat_id&&r.append("chat_id",n.chat_id);const c=await Te(`${Bl}/list?${r}`,{});if(!c.ok){const d=await c.json();throw new Error(d.detail||"")}return c.json()}async function Bw(n){const r=await Te(`${Bl}/${n}`,{});if(!r.ok){const c=await r.json();throw new Error(c.detail||"")}return r.json()}async function Hw(n){const r=await Te(`${Bl}/`,{method:"POST",body:JSON.stringify(n)});if(!r.ok){const c=await r.json();throw new Error(c.detail||"")}return r.json()}async function qw(n,r){const c=await Te(`${Bl}/${n}`,{method:"PATCH",body:JSON.stringify(r)});if(!c.ok){const d=await c.json();throw new Error(d.detail||"")}return c.json()}async function Gw(n){const r=await Te(`${Bl}/${n}`,{method:"DELETE"});if(!r.ok){const c=await r.json();throw new Error(c.detail||"")}return r.json()}async function Vw(n){const r=await Te(`${Bl}/batch/delete`,{method:"POST",body:JSON.stringify({ids:n})});if(!r.ok){const c=await r.json();throw new Error(c.detail||"")}return r.json()}async function Fw(){const n=await Te(`${Bl}/stats/summary`,{});if(!n.ok){const r=await n.json();throw new Error(r.detail||"")}return n.json()}function $w(){const[n,r]=u.useState([]),[c,d]=u.useState(!0),[h,x]=u.useState(0),[f,j]=u.useState(1),[p,N]=u.useState(20),[v,C]=u.useState(""),[S,w]=u.useState(null),[L,F]=u.useState(!1),[B,O]=u.useState(!1),[K,H]=u.useState(!1),[z,V]=u.useState(null),[Y,E]=u.useState(new Set),[R,ne]=u.useState(!1),[fe,Ce]=u.useState(""),[we,pe]=u.useState({total:0,recent_7days:0,chat_count:0,top_chats:{}}),[Ne,be]=u.useState([]),[A,X]=u.useState(new Map),{toast:T}=Xt(),te=async()=>{try{d(!0);const ee=await Uw({page:f,page_size:p,search:v||void 0});r(ee.data),x(ee.total)}catch(ee){T({title:"",description:ee instanceof Error?ee.message:"",variant:"destructive"})}finally{d(!1)}},_=async()=>{try{const ee=await Fw();ee?.data&&pe(ee.data)}catch(ee){console.error(":",ee)}},me=async()=>{try{const ee=await Lw();if(ee?.data){be(ee.data);const Se=new Map;ee.data.forEach(Me=>{Se.set(Me.chat_id,Me.chat_name)}),X(Se)}}catch(ee){console.error(":",ee)}},oe=ee=>A.get(ee)||ee;u.useEffect(()=>{te(),_(),me()},[f,p,v]);const ae=async ee=>{try{const Se=await Bw(ee.id);w(Se.data),F(!0)}catch(Se){T({title:"",description:Se instanceof Error?Se.message:"",variant:"destructive"})}},xe=ee=>{w(ee),O(!0)},ve=async ee=>{try{await Gw(ee.id),T({title:"",description:`: ${ee.situation}`}),V(null),te(),_()}catch(Se){T({title:"",description:Se instanceof Error?Se.message:"",variant:"destructive"})}},de=ee=>{const Se=new Set(Y);Se.has(ee)?Se.delete(ee):Se.add(ee),E(Se)},G=()=>{Y.size===n.length&&n.length>0?E(new Set):E(new Set(n.map(ee=>ee.id)))},W=async()=>{try{await Vw(Array.from(Y)),T({title:"",description:` ${Y.size} `}),E(new Set),ne(!1),te(),_()}catch(ee){T({title:"",description:ee instanceof Error?ee.message:"",variant:"destructive"})}},U=()=>{const ee=parseInt(fe),Se=Math.ceil(h/p);ee>=1&&ee<=Se?(j(ee),Ce("")):T({title:"",description:`1-${Se}`,variant:"destructive"})};return e.jsxs("div",{className:"h-[calc(100vh-4rem)] flex flex-col p-4 sm:p-6",children:[e.jsx("div",{className:"mb-4 sm:mb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold flex items-center gap-2",children:[e.jsx(cn,{className:"h-8 w-8",strokeWidth:2}),""]}),e.jsx("p",{className:"text-muted-foreground mt-1 text-sm sm:text-base",children:""})]}),e.jsxs(b,{onClick:()=>H(!0),className:"gap-2",children:[e.jsx(hs,{className:"h-4 w-4"}),""]})]})}),e.jsx(st,{className:"flex-1",children:e.jsxs("div",{className:"space-y-4 sm:space-y-6 pr-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"rounded-lg border bg-card p-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:""}),e.jsx("div",{className:"text-2xl font-bold mt-1",children:we.total})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"7"}),e.jsx("div",{className:"text-2xl font-bold mt-1 text-green-600",children:we.recent_7days})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:""}),e.jsx("div",{className:"text-2xl font-bold mt-1 text-blue-600",children:we.chat_count})]})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4",children:[e.jsx(y,{htmlFor:"search",children:""}),e.jsx("div",{className:"flex flex-col sm:flex-row gap-2 mt-1.5",children:e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(zs,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(ce,{id:"search",placeholder:"...",value:v,onChange:ee=>C(ee.target.value),className:"pl-9"})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 mt-4 pt-4 border-t",children:[e.jsx("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:Y.size>0&&e.jsxs("span",{children:[" ",Y.size," "]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{htmlFor:"page-size",className:"text-sm whitespace-nowrap",children:""}),e.jsxs(qe,{value:p.toString(),onValueChange:ee=>{N(parseInt(ee)),j(1),E(new Set)},children:[e.jsx(Be,{id:"page-size",className:"w-20",children:e.jsx(Ge,{})}),e.jsxs(He,{children:[e.jsx(ie,{value:"10",children:"10"}),e.jsx(ie,{value:"20",children:"20"}),e.jsx(ie,{value:"50",children:"50"}),e.jsx(ie,{value:"100",children:"100"})]})]}),Y.size>0&&e.jsxs(e.Fragment,{children:[e.jsx(b,{variant:"outline",size:"sm",onClick:()=>E(new Set),children:""}),e.jsxs(b,{variant:"destructive",size:"sm",onClick:()=>ne(!0),children:[e.jsx(at,{className:"h-4 w-4 mr-1"}),""]})]})]})]})]}),e.jsxs("div",{className:"rounded-lg border bg-card",children:[e.jsx("div",{className:"hidden md:block",children:e.jsxs(li,{children:[e.jsx(ni,{children:e.jsxs(_s,{children:[e.jsx(rt,{className:"w-12",children:e.jsx(Cs,{checked:Y.size===n.length&&n.length>0,onCheckedChange:G})}),e.jsx(rt,{children:""}),e.jsx(rt,{children:""}),e.jsx(rt,{children:""}),e.jsx(rt,{className:"text-right",children:""})]})}),e.jsx(ii,{children:c?e.jsx(_s,{children:e.jsx(Ze,{colSpan:5,className:"text-center py-8 text-muted-foreground",children:"..."})}):n.length===0?e.jsx(_s,{children:e.jsx(Ze,{colSpan:5,className:"text-center py-8 text-muted-foreground",children:""})}):n.map(ee=>e.jsxs(_s,{children:[e.jsx(Ze,{children:e.jsx(Cs,{checked:Y.has(ee.id),onCheckedChange:()=>de(ee.id)})}),e.jsx(Ze,{className:"font-medium max-w-xs truncate",children:ee.situation}),e.jsx(Ze,{className:"max-w-xs truncate",children:ee.style}),e.jsx(Ze,{className:"max-w-[200px] truncate",title:oe(ee.chat_id),style:{wordBreak:"keep-all"},children:e.jsx("span",{className:"whitespace-nowrap overflow-hidden text-ellipsis block",children:oe(ee.chat_id)})}),e.jsx(Ze,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsxs(b,{variant:"default",size:"sm",onClick:()=>xe(ee),children:[e.jsx(mr,{className:"h-4 w-4 mr-1"}),""]}),e.jsx(b,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>ae(ee),title:"",children:e.jsx(Ws,{className:"h-4 w-4"})}),e.jsxs(b,{size:"sm",onClick:()=>V(ee),className:"bg-red-600 hover:bg-red-700 text-white",children:[e.jsx(at,{className:"h-4 w-4 mr-1"}),""]})]})})]},ee.id))})]})}),e.jsx("div",{className:"md:hidden space-y-3 p-4",children:c?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"..."}):n.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:""}):n.map(ee=>e.jsxs("div",{className:"rounded-lg border bg-card p-4 space-y-3 overflow-hidden",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Cs,{checked:Y.has(ee.id),onCheckedChange:()=>de(ee.id),className:"mt-1"}),e.jsxs("div",{className:"min-w-0 flex-1 overflow-hidden space-y-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:""}),e.jsx("h3",{className:"font-semibold text-sm line-clamp-2 w-full break-all",title:ee.situation,children:ee.situation})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:""}),e.jsx("p",{className:"text-sm line-clamp-2 w-full break-all",title:ee.style,children:ee.style})]})]})]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:""}),e.jsx("p",{className:"text-sm truncate",title:oe(ee.chat_id),style:{wordBreak:"keep-all"},children:oe(ee.chat_id)})]}),e.jsxs("div",{className:"flex flex-wrap gap-1 pt-2 border-t overflow-hidden",children:[e.jsxs(b,{variant:"outline",size:"sm",onClick:()=>xe(ee),className:"text-xs px-2 py-1 h-auto flex-shrink-0",children:[e.jsx(mr,{className:"h-3 w-3 mr-1"}),""]}),e.jsx(b,{variant:"outline",size:"sm",onClick:()=>ae(ee),className:"text-xs px-2 py-1 h-auto flex-shrink-0",children:e.jsx(Ws,{className:"h-3 w-3"})}),e.jsxs(b,{variant:"outline",size:"sm",onClick:()=>V(ee),className:"text-xs px-2 py-1 h-auto flex-shrink-0 text-destructive hover:text-destructive",children:[e.jsx(at,{className:"h-3 w-3 mr-1"}),""]})]})]},ee.id))}),h>0&&e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 px-4 py-3 border-t",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:[" ",h,"  ",f," / ",Math.ceil(h/p)," "]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{variant:"outline",size:"sm",onClick:()=>j(1),disabled:f===1,className:"hidden sm:flex",children:e.jsx(vr,{className:"h-4 w-4"})}),e.jsxs(b,{variant:"outline",size:"sm",onClick:()=>j(f-1),disabled:f===1,children:[e.jsx(dn,{className:"h-4 w-4 sm:mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ce,{type:"number",value:fe,onChange:ee=>Ce(ee.target.value),onKeyDown:ee=>ee.key==="Enter"&&U(),placeholder:f.toString(),className:"w-16 h-8 text-center",min:1,max:Math.ceil(h/p)}),e.jsx(b,{variant:"outline",size:"sm",onClick:U,disabled:!fe,className:"h-8",children:""})]}),e.jsxs(b,{variant:"outline",size:"sm",onClick:()=>j(f+1),disabled:f>=Math.ceil(h/p),children:[e.jsx("span",{className:"hidden sm:inline",children:""}),e.jsx(Ll,{className:"h-4 w-4 sm:ml-1"})]}),e.jsx(b,{variant:"outline",size:"sm",onClick:()=>j(Math.ceil(h/p)),disabled:f>=Math.ceil(h/p),className:"hidden sm:flex",children:e.jsx(br,{className:"h-4 w-4"})})]})]})]})]})}),e.jsx(Qw,{expression:S,open:L,onOpenChange:F,chatNameMap:A}),e.jsx(Yw,{open:K,onOpenChange:H,chatList:Ne,onSuccess:()=>{te(),_(),H(!1)}}),e.jsx(Xw,{expression:S,open:B,onOpenChange:O,chatList:Ne,onSuccess:()=>{te(),_(),O(!1)}}),e.jsx(bt,{open:!!z,onOpenChange:()=>V(null),children:e.jsxs(dt,{children:[e.jsxs(ut,{children:[e.jsx(ht,{children:""}),e.jsxs(xt,{children:[' "',z?.situation,'"  ']})]}),e.jsxs(mt,{children:[e.jsx(pt,{children:""}),e.jsx(ft,{onClick:()=>z&&ve(z),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:""})]})]})}),e.jsx(Kw,{open:R,onOpenChange:ne,onConfirm:W,count:Y.size})]})}function Qw({expression:n,open:r,onOpenChange:c,chatNameMap:d}){if(!n)return null;const h=f=>f?new Date(f*1e3).toLocaleString("zh-CN"):"-",x=f=>d.get(f)||f;return e.jsx(Jt,{open:r,onOpenChange:c,children:e.jsxs($t,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(Qt,{children:[e.jsx(Yt,{children:""}),e.jsx(ds,{children:""})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(sr,{label:"",value:n.situation}),e.jsx(sr,{label:"",value:n.style}),e.jsx(sr,{label:"",value:x(n.chat_id)}),e.jsx(sr,{icon:zu,label:"ID",value:n.id.toString(),mono:!0})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:e.jsx(sr,{icon:Wn,label:"",value:h(n.create_date)})})]}),e.jsx(xs,{children:e.jsx(b,{onClick:()=>c(!1),children:""})})]})})}function sr({icon:n,label:r,value:c,mono:d=!1}){return e.jsxs("div",{className:"space-y-1",children:[e.jsxs(y,{className:"text-xs text-muted-foreground flex items-center gap-1",children:[n&&e.jsx(n,{className:"h-3 w-3"}),r]}),e.jsx("div",{className:Q("text-sm",d&&"font-mono",!c&&"text-muted-foreground"),children:c||"-"})]})}function Yw({open:n,onOpenChange:r,chatList:c,onSuccess:d}){const[h,x]=u.useState({situation:"",style:"",chat_id:""}),[f,j]=u.useState(!1),{toast:p}=Xt(),N=async()=>{if(!h.situation||!h.style||!h.chat_id){p({title:"",description:"",variant:"destructive"});return}try{j(!0),await Hw(h),p({title:"",description:""}),x({situation:"",style:"",chat_id:""}),d()}catch(v){p({title:"",description:v instanceof Error?v.message:"",variant:"destructive"})}finally{j(!1)}};return e.jsx(Jt,{open:n,onOpenChange:r,children:e.jsxs($t,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(Qt,{children:[e.jsx(Yt,{children:""}),e.jsx(ds,{children:""})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(y,{htmlFor:"situation",children:[" ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(ce,{id:"situation",value:h.situation,onChange:v=>x({...h,situation:v.target.value}),placeholder:""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(y,{htmlFor:"style",children:[" ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(ce,{id:"style",value:h.style,onChange:v=>x({...h,style:v.target.value}),placeholder:""})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(y,{htmlFor:"chat_id",children:[" ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs(qe,{value:h.chat_id,onValueChange:v=>x({...h,chat_id:v}),children:[e.jsx(Be,{children:e.jsx(Ge,{placeholder:""})}),e.jsx(He,{children:c.map(v=>e.jsx(ie,{value:v.chat_id,children:e.jsxs("span",{className:"truncate",style:{wordBreak:"keep-all"},children:[v.chat_name,v.is_group&&e.jsx("span",{className:"text-muted-foreground ml-1",children:"()"})]})},v.chat_id))})]})]})]}),e.jsxs(xs,{children:[e.jsx(b,{variant:"outline",onClick:()=>r(!1),children:""}),e.jsx(b,{onClick:N,disabled:f,children:f?"...":""})]})]})})}function Xw({expression:n,open:r,onOpenChange:c,chatList:d,onSuccess:h}){const[x,f]=u.useState({}),[j,p]=u.useState(!1),{toast:N}=Xt();u.useEffect(()=>{n&&f({situation:n.situation,style:n.style,chat_id:n.chat_id})},[n]);const v=async()=>{if(n)try{p(!0),await qw(n.id,x),N({title:"",description:""}),h()}catch(C){N({title:"",description:C instanceof Error?C.message:"",variant:"destructive"})}finally{p(!1)}};return n?e.jsx(Jt,{open:r,onOpenChange:c,children:e.jsxs($t,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(Qt,{children:[e.jsx(Yt,{children:""}),e.jsx(ds,{children:""})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"edit_situation",children:""}),e.jsx(ce,{id:"edit_situation",value:x.situation||"",onChange:C=>f({...x,situation:C.target.value}),placeholder:""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"edit_style",children:""}),e.jsx(ce,{id:"edit_style",value:x.style||"",onChange:C=>f({...x,style:C.target.value}),placeholder:""})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"edit_chat_id",children:""}),e.jsxs(qe,{value:x.chat_id||"",onValueChange:C=>f({...x,chat_id:C}),children:[e.jsx(Be,{children:e.jsx(Ge,{placeholder:""})}),e.jsx(He,{children:d.map(C=>e.jsx(ie,{value:C.chat_id,children:e.jsxs("span",{className:"truncate",style:{wordBreak:"keep-all"},children:[C.chat_name,C.is_group&&e.jsx("span",{className:"text-muted-foreground ml-1",children:"()"})]})},C.chat_id))})]})]})]}),e.jsxs(xs,{children:[e.jsx(b,{variant:"outline",onClick:()=>c(!1),children:""}),e.jsx(b,{onClick:v,disabled:j,children:j?"...":""})]})]})}):null}function Kw({open:n,onOpenChange:r,onConfirm:c,count:d}){return e.jsx(bt,{open:n,onOpenChange:r,children:e.jsxs(dt,{children:[e.jsxs(ut,{children:[e.jsx(ht,{children:""}),e.jsxs(xt,{children:[" ",d," "]})]}),e.jsxs(mt,{children:[e.jsx(pt,{children:""}),e.jsx(ft,{onClick:c,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:""})]})]})})}const ri="/api/webui/person";async function Zw(n){const r=new URLSearchParams;n.page&&r.append("page",n.page.toString()),n.page_size&&r.append("page_size",n.page_size.toString()),n.search&&r.append("search",n.search),n.is_known!==void 0&&r.append("is_known",n.is_known.toString()),n.platform&&r.append("platform",n.platform);const c=await Te(`${ri}/list?${r}`,{headers:Rt()});if(!c.ok){const d=await c.json();throw new Error(d.detail||"")}return c.json()}async function Jw(n){const r=await Te(`${ri}/${n}`,{headers:Rt()});if(!r.ok){const c=await r.json();throw new Error(c.detail||"")}return r.json()}async function Iw(n,r){const c=await Te(`${ri}/${n}`,{method:"PATCH",headers:Rt(),body:JSON.stringify(r)});if(!c.ok){const d=await c.json();throw new Error(d.detail||"")}return c.json()}async function Pw(n){const r=await Te(`${ri}/${n}`,{method:"DELETE",headers:Rt()});if(!r.ok){const c=await r.json();throw new Error(c.detail||"")}return r.json()}async function Ww(){const n=await Te(`${ri}/stats/summary`,{headers:Rt()});if(!n.ok){const r=await n.json();throw new Error(r.detail||"")}return n.json()}async function e1(n){const r=await Te(`${ri}/batch/delete`,{method:"POST",headers:Rt(),body:JSON.stringify({person_ids:n})});if(!r.ok){const c=await r.json();throw new Error(c.detail||"")}return r.json()}function t1(){const[n,r]=u.useState([]),[c,d]=u.useState(!0),[h,x]=u.useState(0),[f,j]=u.useState(1),[p,N]=u.useState(20),[v,C]=u.useState(""),[S,w]=u.useState(void 0),[L,F]=u.useState(void 0),[B,O]=u.useState(null),[K,H]=u.useState(!1),[z,V]=u.useState(!1),[Y,E]=u.useState(null),[R,ne]=u.useState({total:0,known:0,unknown:0,platforms:{}}),[fe,Ce]=u.useState(new Set),[we,pe]=u.useState(!1),[Ne,be]=u.useState(""),{toast:A}=Xt(),X=async()=>{try{d(!0);const U=await Zw({page:f,page_size:p,search:v||void 0,is_known:S,platform:L});r(U.data),x(U.total)}catch(U){A({title:"",description:U instanceof Error?U.message:"",variant:"destructive"})}finally{d(!1)}},T=async()=>{try{const U=await Ww();U?.data&&ne(U.data)}catch(U){console.error(":",U)}};u.useEffect(()=>{X(),T()},[f,p,v,S,L]);const te=async U=>{try{const ee=await Jw(U.person_id);O(ee.data),H(!0)}catch(ee){A({title:"",description:ee instanceof Error?ee.message:"",variant:"destructive"})}},_=U=>{O(U),V(!0)},me=async U=>{try{await Pw(U.person_id),A({title:"",description:`: ${U.person_name||U.nickname||U.user_id}`}),E(null),X(),T()}catch(ee){A({title:"",description:ee instanceof Error?ee.message:"",variant:"destructive"})}},oe=u.useMemo(()=>Object.keys(R.platforms),[R.platforms]),ae=U=>{const ee=new Set(fe);ee.has(U)?ee.delete(U):ee.add(U),Ce(ee)},xe=()=>{fe.size===n.length&&n.length>0?Ce(new Set):Ce(new Set(n.map(U=>U.person_id)))},ve=()=>{if(fe.size===0){A({title:"",description:"",variant:"destructive"});return}pe(!0)},de=async()=>{try{const U=await e1(Array.from(fe));A({title:"",description:U.message}),Ce(new Set),pe(!1),X(),T()}catch(U){A({title:"",description:U instanceof Error?U.message:"",variant:"destructive"})}},G=()=>{const U=parseInt(Ne),ee=Math.ceil(h/p);U>=1&&U<=ee?(j(U),be("")):A({title:"",description:`1-${ee}`,variant:"destructive"})},W=U=>U?new Date(U*1e3).toLocaleString("zh-CN"):"-";return e.jsxs("div",{className:"h-[calc(100vh-4rem)] flex flex-col p-4 sm:p-6",children:[e.jsx("div",{className:"mb-4 sm:mb-6",children:e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold flex items-center gap-2",children:[e.jsx(Au,{className:"h-8 w-8",strokeWidth:2}),""]}),e.jsx("p",{className:"text-muted-foreground mt-1 text-sm sm:text-base",children:""})]})})}),e.jsx(st,{className:"flex-1",children:e.jsxs("div",{className:"space-y-4 sm:space-y-6 pr-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"rounded-lg border bg-card p-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:""}),e.jsx("div",{className:"text-2xl font-bold mt-1",children:R.total})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:""}),e.jsx("div",{className:"text-2xl font-bold mt-1 text-green-600",children:R.known})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:""}),e.jsx("div",{className:"text-2xl font-bold mt-1 text-muted-foreground",children:R.unknown})]})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx(y,{htmlFor:"search",children:""}),e.jsxs("div",{className:"relative mt-1.5",children:[e.jsx(zs,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(ce,{id:"search",placeholder:"ID...",value:v,onChange:U=>C(U.target.value),className:"pl-9"})]})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"filter-known",children:""}),e.jsxs(qe,{value:S===void 0?"all":S.toString(),onValueChange:U=>{w(U==="all"?void 0:U==="true"),j(1)},children:[e.jsx(Be,{id:"filter-known",className:"mt-1.5",children:e.jsx(Ge,{})}),e.jsxs(He,{children:[e.jsx(ie,{value:"all",children:""}),e.jsx(ie,{value:"true",children:""}),e.jsx(ie,{value:"false",children:""})]})]})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"filter-platform",children:""}),e.jsxs(qe,{value:L||"all",onValueChange:U=>{F(U==="all"?void 0:U),j(1)},children:[e.jsx(Be,{id:"filter-platform",className:"mt-1.5",children:e.jsx(Ge,{})}),e.jsxs(He,{children:[e.jsx(ie,{value:"all",children:""}),oe.map(U=>e.jsxs(ie,{value:U,children:[U," (",R.platforms[U],")"]},U))]})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 mt-4 pt-4 border-t",children:[e.jsx("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:fe.size>0&&e.jsxs("span",{children:[" ",fe.size," "]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{htmlFor:"page-size",className:"text-sm whitespace-nowrap",children:""}),e.jsxs(qe,{value:p.toString(),onValueChange:U=>{N(parseInt(U)),j(1),Ce(new Set)},children:[e.jsx(Be,{id:"page-size",className:"w-20",children:e.jsx(Ge,{})}),e.jsxs(He,{children:[e.jsx(ie,{value:"10",children:"10"}),e.jsx(ie,{value:"20",children:"20"}),e.jsx(ie,{value:"50",children:"50"}),e.jsx(ie,{value:"100",children:"100"})]})]}),fe.size>0&&e.jsxs(e.Fragment,{children:[e.jsx(b,{variant:"outline",size:"sm",onClick:()=>Ce(new Set),children:""}),e.jsxs(b,{variant:"destructive",size:"sm",onClick:ve,children:[e.jsx(at,{className:"h-4 w-4 mr-1"}),""]})]})]})]})]}),e.jsxs("div",{className:"rounded-lg border bg-card",children:[e.jsx("div",{className:"hidden md:block",children:e.jsxs(li,{children:[e.jsx(ni,{children:e.jsxs(_s,{children:[e.jsx(rt,{className:"w-12",children:e.jsx(Cs,{checked:n.length>0&&fe.size===n.length,onCheckedChange:xe,"aria-label":""})}),e.jsx(rt,{children:""}),e.jsx(rt,{children:""}),e.jsx(rt,{children:""}),e.jsx(rt,{children:""}),e.jsx(rt,{children:"ID"}),e.jsx(rt,{children:""}),e.jsx(rt,{className:"text-right",children:""})]})}),e.jsx(ii,{children:c?e.jsx(_s,{children:e.jsx(Ze,{colSpan:8,className:"text-center py-8 text-muted-foreground",children:"..."})}):n.length===0?e.jsx(_s,{children:e.jsx(Ze,{colSpan:8,className:"text-center py-8 text-muted-foreground",children:""})}):n.map(U=>e.jsxs(_s,{children:[e.jsx(Ze,{children:e.jsx(Cs,{checked:fe.has(U.person_id),onCheckedChange:()=>ae(U.person_id),"aria-label":` ${U.person_name||U.nickname||U.user_id}`})}),e.jsx(Ze,{children:e.jsx("div",{className:Q("inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium",U.is_known?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-400"),children:U.is_known?"":""})}),e.jsx(Ze,{className:"font-medium",children:U.person_name||e.jsx("span",{className:"text-muted-foreground",children:"-"})}),e.jsx(Ze,{children:U.nickname||"-"}),e.jsx(Ze,{children:U.platform}),e.jsx(Ze,{className:"font-mono text-sm",children:U.user_id}),e.jsx(Ze,{className:"text-sm text-muted-foreground",children:W(U.last_know)}),e.jsx(Ze,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsxs(b,{variant:"default",size:"sm",onClick:()=>te(U),children:[e.jsx(Ws,{className:"h-4 w-4 mr-1"}),""]}),e.jsxs(b,{variant:"default",size:"sm",onClick:()=>_(U),children:[e.jsx(mr,{className:"h-4 w-4 mr-1"}),""]}),e.jsxs(b,{size:"sm",onClick:()=>E(U),className:"bg-red-600 hover:bg-red-700 text-white",children:[e.jsx(at,{className:"h-4 w-4 mr-1"}),""]})]})})]},U.id))})]})}),e.jsx("div",{className:"md:hidden space-y-3 p-4",children:c?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"..."}):n.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:""}):n.map(U=>e.jsxs("div",{className:"rounded-lg border bg-card p-4 space-y-3 overflow-hidden",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Cs,{checked:fe.has(U.person_id),onCheckedChange:()=>ae(U.person_id),className:"mt-1"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:Q("inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium mb-2",U.is_known?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-400"),children:U.is_known?"":""}),e.jsx("h3",{className:"font-semibold text-sm line-clamp-1 w-full break-all",children:U.person_name||e.jsx("span",{className:"text-muted-foreground",children:""})}),U.nickname&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1 line-clamp-1 w-full break-all",children:[": ",U.nickname]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:""}),e.jsx("p",{className:"font-medium text-xs",children:U.platform})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"ID"}),e.jsx("p",{className:"font-mono text-xs truncate",title:U.user_id,children:U.user_id})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:""}),e.jsx("p",{className:"text-xs",children:W(U.last_know)})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-1 pt-2 border-t overflow-hidden",children:[e.jsxs(b,{variant:"outline",size:"sm",onClick:()=>te(U),className:"text-xs px-2 py-1 h-auto flex-shrink-0",children:[e.jsx(Ws,{className:"h-3 w-3 mr-1"}),""]}),e.jsxs(b,{variant:"outline",size:"sm",onClick:()=>_(U),className:"text-xs px-2 py-1 h-auto flex-shrink-0",children:[e.jsx(mr,{className:"h-3 w-3 mr-1"}),""]}),e.jsxs(b,{variant:"outline",size:"sm",onClick:()=>E(U),className:"text-xs px-2 py-1 h-auto flex-shrink-0 text-destructive hover:text-destructive",children:[e.jsx(at,{className:"h-3 w-3 mr-1"}),""]})]})]},U.id))}),h>0&&e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 px-4 py-3 border-t",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:[" ",h,"  ",f," / ",Math.ceil(h/p)," "]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{variant:"outline",size:"sm",onClick:()=>j(1),disabled:f===1,className:"hidden sm:flex",children:e.jsx(vr,{className:"h-4 w-4"})}),e.jsxs(b,{variant:"outline",size:"sm",onClick:()=>j(f-1),disabled:f===1,children:[e.jsx(dn,{className:"h-4 w-4 sm:mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ce,{type:"number",value:Ne,onChange:U=>be(U.target.value),onKeyDown:U=>U.key==="Enter"&&G(),placeholder:f.toString(),className:"w-16 h-8 text-center",min:1,max:Math.ceil(h/p)}),e.jsx(b,{variant:"outline",size:"sm",onClick:G,disabled:!Ne,className:"h-8",children:""})]}),e.jsxs(b,{variant:"outline",size:"sm",onClick:()=>j(f+1),disabled:f>=Math.ceil(h/p),children:[e.jsx("span",{className:"hidden sm:inline",children:""}),e.jsx(Ll,{className:"h-4 w-4 sm:ml-1"})]}),e.jsx(b,{variant:"outline",size:"sm",onClick:()=>j(Math.ceil(h/p)),disabled:f>=Math.ceil(h/p),className:"hidden sm:flex",children:e.jsx(br,{className:"h-4 w-4"})})]})]})]})]})}),e.jsx(s1,{person:B,open:K,onOpenChange:H}),e.jsx(a1,{person:B,open:z,onOpenChange:V,onSuccess:()=>{X(),T(),V(!1)}}),e.jsx(bt,{open:!!Y,onOpenChange:()=>E(null),children:e.jsxs(dt,{children:[e.jsxs(ut,{children:[e.jsx(ht,{children:""}),e.jsxs(xt,{children:[' "',Y?.person_name||Y?.nickname||Y?.user_id,'"  ']})]}),e.jsxs(mt,{children:[e.jsx(pt,{children:""}),e.jsx(ft,{onClick:()=>Y&&me(Y),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:""})]})]})}),e.jsx(bt,{open:we,onOpenChange:pe,children:e.jsxs(dt,{children:[e.jsxs(ut,{children:[e.jsx(ht,{children:""}),e.jsxs(xt,{children:[" ",fe.size,"  "]})]}),e.jsxs(mt,{children:[e.jsx(pt,{children:""}),e.jsx(ft,{onClick:de,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:""})]})]})})]})}function s1({person:n,open:r,onOpenChange:c}){if(!n)return null;const d=h=>h?new Date(h*1e3).toLocaleString("zh-CN"):"-";return e.jsx(Jt,{open:r,onOpenChange:c,children:e.jsxs($t,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(Qt,{children:[e.jsx(Yt,{children:""}),e.jsxs(ds,{children:[" ",n.person_name||n.nickname||n.user_id," "]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(nl,{icon:Ic,label:"",value:n.person_name}),e.jsx(nl,{icon:cn,label:"",value:n.nickname}),e.jsx(nl,{icon:zu,label:"ID",value:n.user_id,mono:!0}),e.jsx(nl,{icon:zu,label:"ID",value:n.person_id,mono:!0}),e.jsx(nl,{label:"",value:n.platform}),e.jsx(nl,{label:"",value:n.is_known?"":""})]}),n.name_reason&&e.jsxs("div",{className:"rounded-lg border bg-muted/50 p-3",children:[e.jsx(y,{className:"text-xs text-muted-foreground",children:""}),e.jsx("p",{className:"mt-1 text-sm",children:n.name_reason})]}),n.memory_points&&e.jsxs("div",{className:"rounded-lg border bg-muted/50 p-3",children:[e.jsx(y,{className:"text-xs text-muted-foreground",children:""}),e.jsx("p",{className:"mt-1 text-sm whitespace-pre-wrap",children:n.memory_points})]}),n.group_nick_name&&n.group_nick_name.length>0&&e.jsxs("div",{className:"rounded-lg border bg-muted/50 p-3",children:[e.jsx(y,{className:"text-xs text-muted-foreground",children:""}),e.jsx("div",{className:"mt-2 space-y-1",children:n.group_nick_name.map((h,x)=>e.jsxs("div",{className:"text-sm flex items-center gap-2",children:[e.jsx("span",{className:"font-mono text-xs text-muted-foreground",children:h.group_id}),e.jsx("span",{children:""}),e.jsx("span",{children:h.group_nick_name})]},x))})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx(nl,{icon:Wn,label:"",value:d(n.know_times)}),e.jsx(nl,{icon:Wn,label:"",value:d(n.know_since)}),e.jsx(nl,{icon:Wn,label:"",value:d(n.last_know)})]})]}),e.jsx(xs,{children:e.jsx(b,{onClick:()=>c(!1),children:""})})]})})}function nl({icon:n,label:r,value:c,mono:d=!1}){return e.jsxs("div",{className:"space-y-1",children:[e.jsxs(y,{className:"text-xs text-muted-foreground flex items-center gap-1",children:[n&&e.jsx(n,{className:"h-3 w-3"}),r]}),e.jsx("div",{className:Q("text-sm",d&&"font-mono",!c&&"text-muted-foreground"),children:c||"-"})]})}function a1({person:n,open:r,onOpenChange:c,onSuccess:d}){const[h,x]=u.useState({}),[f,j]=u.useState(!1),{toast:p}=Xt();u.useEffect(()=>{n&&x({person_name:n.person_name||"",name_reason:n.name_reason||"",nickname:n.nickname||"",memory_points:n.memory_points||"",is_known:n.is_known})},[n]);const N=async()=>{if(n)try{j(!0),await Iw(n.person_id,h),p({title:"",description:""}),d()}catch(v){p({title:"",description:v instanceof Error?v.message:"",variant:"destructive"})}finally{j(!1)}};return n?e.jsx(Jt,{open:r,onOpenChange:c,children:e.jsxs($t,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(Qt,{children:[e.jsx(Yt,{children:""}),e.jsxs(ds,{children:[" ",n.person_name||n.nickname||n.user_id," "]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"person_name",children:""}),e.jsx(ce,{id:"person_name",value:h.person_name||"",onChange:v=>x({...h,person_name:v.target.value}),placeholder:""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"nickname",children:""}),e.jsx(ce,{id:"nickname",value:h.nickname||"",onChange:v=>x({...h,nickname:v.target.value}),placeholder:""})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"name_reason",children:""}),e.jsx(Ft,{id:"name_reason",value:h.name_reason||"",onChange:v=>x({...h,name_reason:v.target.value}),placeholder:"",rows:2})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"memory_points",children:""}),e.jsx(Ft,{id:"memory_points",value:h.memory_points||"",onChange:v=>x({...h,memory_points:v.target.value}),placeholder:"...",rows:4})]}),e.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3",children:[e.jsxs("div",{children:[e.jsx(y,{htmlFor:"is_known",className:"text-base font-medium",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),e.jsx(Qe,{id:"is_known",checked:h.is_known,onCheckedChange:v=>x({...h,is_known:v})})]})]}),e.jsxs(xs,{children:[e.jsx(b,{variant:"outline",onClick:()=>c(!1),children:""}),e.jsx(b,{onClick:N,disabled:f,children:f?"...":""})]})]})}):null}var l1=cN();const dp=ob(l1),Ku="/api/webui";async function n1(n=100,r="all"){const c=`${Ku}/knowledge/graph?limit=${n}&node_type=${r}`,d=await fetch(c);if(!d.ok)throw new Error(`: ${d.status}`);return d.json()}async function i1(){const n=await fetch(`${Ku}/knowledge/stats`);if(!n.ok)throw new Error("");return n.json()}async function r1(n){const r=await fetch(`${Ku}/knowledge/search?query=${encodeURIComponent(n)}`);if(!r.ok)throw new Error("");return r.json()}const Ag=u.memo(({data:n})=>e.jsxs("div",{className:"px-4 py-2 shadow-md rounded-lg bg-gradient-to-br from-blue-500 to-blue-600 border-2 border-blue-700 min-w-[120px]",children:[e.jsx(Pc,{type:"target",position:Wc.Top}),e.jsx("div",{className:"font-semibold text-white text-sm truncate max-w-[200px]",title:n.content,children:n.label}),e.jsx(Pc,{type:"source",position:Wc.Bottom})]}));Ag.displayName="EntityNode";const Mg=u.memo(({data:n})=>e.jsxs("div",{className:"px-3 py-2 shadow-md rounded-md bg-gradient-to-br from-green-500 to-green-600 border-2 border-green-700 min-w-[100px]",children:[e.jsx(Pc,{type:"target",position:Wc.Top}),e.jsx("div",{className:"font-medium text-white text-xs truncate max-w-[150px]",title:n.content,children:n.label}),e.jsx(Pc,{type:"source",position:Wc.Bottom})]}));Mg.displayName="ParagraphNode";const c1={entity:Ag,paragraph:Mg};function o1(n,r){const c=new dp.graphlib.Graph;c.setDefaultEdgeLabel(()=>({})),c.setGraph({rankdir:"TB",ranksep:100,nodesep:80});const d=[],h=[];return n.forEach(x=>{c.setNode(x.id,{width:150,height:50})}),r.forEach(x=>{c.setEdge(x.source,x.target)}),dp.layout(c),n.forEach(x=>{const f=c.node(x.id);d.push({id:x.id,type:x.type,position:{x:f.x-75,y:f.y-25},data:{label:x.content.slice(0,20)+(x.content.length>20?"...":""),content:x.content}})}),r.forEach((x,f)=>{const j={id:`edge-${f}`,source:x.source,target:x.target,animated:n.length<=200&&x.weight>5,style:{strokeWidth:Math.min(x.weight/2,5),opacity:.6}};x.weight>10&&n.length<100&&(j.label=`${x.weight.toFixed(0)}`),h.push(j)}),{nodes:d,edges:h}}function d1(){const n=fa(),[r,c]=u.useState(!1),[d,h]=u.useState(null),[x,f]=u.useState(""),[j,p]=u.useState("all"),[N,v]=u.useState(50),[C,S]=u.useState("50"),[w,L]=u.useState(!1),[F,B]=u.useState(!0),[O,K]=u.useState(!1),[H,z]=u.useState(!1),[V,Y,E]=oN([]),[R,ne,fe]=dN([]),[Ce,we]=u.useState(0),[pe,Ne]=u.useState(null),[be,A]=u.useState(null),{toast:X}=Xt(),T=u.useCallback(de=>de.type==="entity"?"#6366f1":de.type==="paragraph"?"#10b981":"#6b7280",[]),te=u.useCallback(async(de=!1)=>{try{if(!de&&N>200){z(!0);return}c(!0);const[G,W]=await Promise.all([n1(N,j),i1()]);if(h(W),G.nodes.length===0){X({title:"",description:""}),Y([]),ne([]);return}const{nodes:U,edges:ee}=o1(G.nodes,G.edges);Y(U),ne(ee),we(U.length),W&&W.total_nodes>N&&X({title:"",description:` ${W.total_nodes}  ${U.length} `}),X({title:"",description:` ${U.length} ${ee.length} `})}catch(G){console.error(":",G),X({title:"",description:G instanceof Error?G.message:"",variant:"destructive"})}finally{c(!1)}},[N,j,X]),_=u.useCallback(async()=>{if(!x.trim()){X({title:"",description:""});return}try{const de=await r1(x);if(de.length===0){X({title:"",description:""});return}const G=new Set(de.map(W=>W.id));Y(W=>W.map(U=>({...U,style:{...U.style,opacity:G.has(U.id)?1:.3,filter:G.has(U.id)?"brightness(1.2)":"brightness(0.8)"}}))),X({title:"",description:` ${de.length} `})}catch(de){console.error(":",de),X({title:"",description:de instanceof Error?de.message:"",variant:"destructive"})}},[x,X]),me=u.useCallback(()=>{Y(de=>de.map(G=>({...G,style:{...G.style,opacity:1,filter:"brightness(1)"}})))},[]),oe=u.useCallback(()=>{B(!1),K(!0),te()},[te]),ae=u.useCallback(()=>{z(!1),setTimeout(()=>{te(!0)},0)},[te]),xe=u.useCallback((de,G)=>{V.find(U=>U.id===G.id)&&Ne({id:G.id,type:G.type,content:G.data.content})},[V]);u.useEffect(()=>{F||O&&te()},[N,j,F,O]);const ve=u.useCallback((de,G)=>{const W=V.find(Se=>Se.id===G.source),U=V.find(Se=>Se.id===G.target),ee=R.find(Se=>Se.id===G.id);W&&U&&ee&&A({source:{id:W.id,type:W.type,content:W.data.content},target:{id:U.id,type:U.type,content:U.data.content},edge:{source:G.source,target:G.target,weight:parseFloat(G.label||"0")}})},[V,R]);return e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"flex-shrink-0 p-4 border-b bg-background",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:""}),e.jsx("p",{className:"text-muted-foreground mt-1",children:""})]}),d&&e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs(Je,{variant:"outline",className:"gap-1",children:[e.jsx(Zc,{className:"h-3 w-3"}),": ",d.total_nodes]}),e.jsxs(Je,{variant:"outline",className:"gap-1",children:[e.jsx(rg,{className:"h-3 w-3"}),": ",d.total_edges]}),e.jsxs(Je,{variant:"outline",className:"gap-1",children:[e.jsx(Ra,{className:"h-3 w-3"}),": ",d.entity_nodes]}),e.jsxs(Je,{variant:"outline",className:"gap-1",children:[e.jsx(Da,{className:"h-3 w-3"}),": ",d.paragraph_nodes]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mt-4",children:[e.jsxs("div",{className:"flex-1 flex gap-2",children:[e.jsx(ce,{placeholder:"...",value:x,onChange:de=>f(de.target.value),onKeyDown:de=>de.key==="Enter"&&_(),className:"flex-1"}),e.jsx(b,{onClick:_,size:"sm",children:e.jsx(zs,{className:"h-4 w-4"})}),e.jsx(b,{onClick:me,variant:"outline",size:"sm",children:""})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(qe,{value:j,onValueChange:de=>p(de),children:[e.jsx(Be,{className:"w-[120px]",children:e.jsx(Ge,{})}),e.jsxs(He,{children:[e.jsx(ie,{value:"all",children:""}),e.jsx(ie,{value:"entity",children:""}),e.jsx(ie,{value:"paragraph",children:""})]})]}),e.jsxs(qe,{value:N===1e4?"all":w?"custom":N.toString(),onValueChange:de=>{de==="custom"?(L(!0),S(N.toString())):de==="all"?(L(!1),v(1e4)):(L(!1),v(Number(de)))},children:[e.jsx(Be,{className:"w-[120px]",children:e.jsx(Ge,{})}),e.jsxs(He,{children:[e.jsx(ie,{value:"50",children:"50 "}),e.jsx(ie,{value:"100",children:"100 "}),e.jsx(ie,{value:"200",children:"200 "}),e.jsx(ie,{value:"500",children:"500 "}),e.jsx(ie,{value:"1000",children:"1000 "}),e.jsx(ie,{value:"all",children:" (10000)"}),e.jsx(ie,{value:"custom",children:"..."})]})]}),w&&e.jsx(ce,{type:"number",min:"50",value:C,onChange:de=>S(de.target.value),onBlur:()=>{const de=parseInt(C);!isNaN(de)&&de>=50?v(de):(S("50"),v(50))},onKeyDown:de=>{if(de.key==="Enter"){const G=parseInt(C);!isNaN(G)&&G>=50?v(G):(S("50"),v(50))}},placeholder:"50",className:"w-[120px]"}),e.jsx(b,{onClick:()=>te(),variant:"outline",size:"sm",disabled:r,children:e.jsx(ws,{className:Q("h-4 w-4",r&&"animate-spin")})})]})]})]}),e.jsx("div",{className:"flex-1 relative",children:r?e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ws,{className:"h-8 w-8 animate-spin mx-auto mb-2 text-muted-foreground"}),e.jsx("p",{className:"text-muted-foreground",children:"..."})]})}):V.length===0?e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Zc,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:""}),e.jsx("p",{className:"text-muted-foreground",children:""})]})}):e.jsxs(uN,{nodes:V,edges:R,onNodesChange:E,onEdgesChange:fe,onNodeClick:xe,onEdgeClick:ve,nodeTypes:c1,fitView:!0,minZoom:.05,maxZoom:1.5,defaultViewport:{x:0,y:0,zoom:.5},elevateNodesOnSelect:Ce<=500,nodesDraggable:Ce<=1e3,attributionPosition:"bottom-left",children:[e.jsx(mN,{variant:hN.Dots,gap:12,size:1}),e.jsx(xN,{}),Ce<=500&&e.jsx(fN,{nodeColor:T,nodeBorderRadius:8,pannable:!0,zoomable:!0}),e.jsxs(pN,{position:"top-right",className:"bg-background/95 backdrop-blur-sm rounded-lg border p-3 shadow-lg",children:[e.jsx("div",{className:"text-sm font-semibold mb-2",children:""}),e.jsxs("div",{className:"space-y-2 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded bg-gradient-to-br from-blue-500 to-blue-600 border-2 border-blue-700"}),e.jsx("span",{children:""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded bg-gradient-to-br from-green-500 to-green-600 border-2 border-green-700"}),e.jsx("span",{children:""})]}),Ce>200&&e.jsxs("div",{className:"mt-2 pt-2 border-t text-yellow-600 dark:text-yellow-500",children:[e.jsx("div",{className:"font-semibold",children:""}),e.jsx("div",{children:""}),Ce>500&&e.jsx("div",{children:""})]})]})]})]})}),e.jsx(Jt,{open:!!pe,onOpenChange:de=>!de&&Ne(null),children:e.jsxs($t,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsx(Qt,{children:e.jsx(Yt,{children:""})}),pe&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"grid grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:""}),e.jsx("div",{className:"mt-1",children:e.jsx(Je,{variant:pe.type==="entity"?"default":"secondary",children:pe.type==="entity"?" ":" "})})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"ID"}),e.jsx("code",{className:"mt-1 block p-2 bg-muted rounded text-xs break-all",children:pe.id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:""}),e.jsx(st,{className:"mt-1 h-40 p-3 bg-muted rounded",children:e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:pe.content})})]})]})]})}),e.jsx(Jt,{open:!!be,onOpenChange:de=>!de&&A(null),children:e.jsxs($t,{className:"max-w-2xl max-h-[80vh] overflow-hidden flex flex-col",children:[e.jsx(Qt,{children:e.jsx(Yt,{children:""})}),be&&e.jsx(st,{className:"flex-1 pr-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0 p-3 bg-blue-50 dark:bg-blue-950 rounded border-2 border-blue-200 dark:border-blue-800",children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:""}),e.jsx("div",{className:"font-medium text-sm mb-2 truncate",children:be.source.content}),e.jsxs("code",{className:"text-xs text-muted-foreground truncate block",children:[be.source.id.slice(0,40),"..."]})]}),e.jsx("div",{className:"text-2xl text-muted-foreground flex-shrink-0",children:""}),e.jsxs("div",{className:"flex-1 min-w-0 p-3 bg-green-50 dark:bg-green-950 rounded border-2 border-green-200 dark:border-green-800",children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:""}),e.jsx("div",{className:"font-medium text-sm mb-2 truncate",children:be.target.content}),e.jsxs("code",{className:"text-xs text-muted-foreground truncate block",children:[be.target.id.slice(0,40),"..."]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:""}),e.jsx("div",{className:"mt-1",children:e.jsx(Je,{variant:"outline",className:"text-base font-mono",children:be.edge.weight.toFixed(4)})})]})]})})]})}),e.jsx(bt,{open:F,onOpenChange:B,children:e.jsxs(dt,{children:[e.jsxs(ut,{children:[e.jsx(ht,{children:""}),e.jsxs(xt,{children:["",e.jsx("br",{}),"?"]})]}),e.jsxs(mt,{children:[e.jsx(pt,{onClick:()=>n({to:"/"}),children:" ()"}),e.jsx(ft,{onClick:oe,children:""})]})]})}),e.jsx(bt,{open:H,onOpenChange:z,children:e.jsxs(dt,{children:[e.jsxs(ut,{children:[e.jsx(ht,{children:" "}),e.jsx(xt,{asChild:!0,children:e.jsxs("div",{children:[e.jsxs("p",{children:[" ",e.jsx("strong",{className:"text-orange-600",children:N>=1e4?" (10000)":N})," "]}),e.jsx("p",{className:"mt-4",children:":"}),e.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[e.jsx("li",{children:""}),e.jsx("li",{children:""}),e.jsx("li",{children:""})]}),e.jsx("p",{className:"mt-4",children:" (50-200 )"})]})})]}),e.jsxs(mt,{children:[e.jsx(pt,{onClick:()=>{z(!1),N>200&&(v(50),L(!1))},children:""}),e.jsx(ft,{onClick:ae,className:"bg-orange-600 hover:bg-orange-700",children:""})]})]})})]})}function up({className:n,classNames:r,showOutsideDays:c=!0,captionLayout:d="label",buttonVariant:h="ghost",formatters:x,components:f,...j}){const p=ug();return e.jsx($y,{showOutsideDays:c,className:Q("bg-background group/calendar p-3 [--cell-size:2rem] [[data-slot=card-content]_&]:bg-transparent [[data-slot=popover-content]_&]:bg-transparent",String.raw`rtl:**:[.rdp-button\_next>svg]:rotate-180`,String.raw`rtl:**:[.rdp-button\_previous>svg]:rotate-180`,n),captionLayout:d,formatters:{formatMonthDropdown:N=>N.toLocaleString("default",{month:"short"}),...x},classNames:{root:Q("w-fit",p.root),months:Q("relative flex flex-col gap-4 md:flex-row",p.months),month:Q("flex w-full flex-col gap-4",p.month),nav:Q("absolute inset-x-0 top-0 flex w-full items-center justify-between gap-1",p.nav),button_previous:Q(hr({variant:h}),"h-[--cell-size] w-[--cell-size] select-none p-0 aria-disabled:opacity-50",p.button_previous),button_next:Q(hr({variant:h}),"h-[--cell-size] w-[--cell-size] select-none p-0 aria-disabled:opacity-50",p.button_next),month_caption:Q("flex h-[--cell-size] w-full items-center justify-center px-[--cell-size]",p.month_caption),dropdowns:Q("flex h-[--cell-size] w-full items-center justify-center gap-1.5 text-sm font-medium",p.dropdowns),dropdown_root:Q("has-focus:border-ring border-input shadow-xs has-focus:ring-ring/50 has-focus:ring-[3px] relative rounded-md border",p.dropdown_root),dropdown:Q("bg-popover absolute inset-0 opacity-0",p.dropdown),caption_label:Q("select-none font-medium",d==="label"?"text-sm":"[&>svg]:text-muted-foreground flex h-8 items-center gap-1 rounded-md pl-2 pr-1 text-sm [&>svg]:size-3.5",p.caption_label),table:"w-full border-collapse",weekdays:Q("flex",p.weekdays),weekday:Q("text-muted-foreground flex-1 select-none rounded-md text-[0.8rem] font-normal",p.weekday),week:Q("mt-2 flex w-full",p.week),week_number_header:Q("w-[--cell-size] select-none",p.week_number_header),week_number:Q("text-muted-foreground select-none text-[0.8rem]",p.week_number),day:Q("group/day relative aspect-square h-full w-full select-none p-0 text-center [&:first-child[data-selected=true]_button]:rounded-l-md [&:last-child[data-selected=true]_button]:rounded-r-md",p.day),range_start:Q("bg-accent rounded-l-md",p.range_start),range_middle:Q("rounded-none",p.range_middle),range_end:Q("bg-accent rounded-r-md",p.range_end),today:Q("bg-accent text-accent-foreground rounded-md data-[selected=true]:rounded-none",p.today),outside:Q("text-muted-foreground aria-selected:text-muted-foreground",p.outside),disabled:Q("text-muted-foreground opacity-50",p.disabled),hidden:Q("invisible",p.hidden),...r},components:{Root:({className:N,rootRef:v,...C})=>e.jsx("div",{"data-slot":"calendar",ref:v,className:Q(N),...C}),Chevron:({className:N,orientation:v,...C})=>v==="left"?e.jsx(dn,{className:Q("size-4",N),...C}):v==="right"?e.jsx(Ll,{className:Q("size-4",N),...C}):e.jsx(Rl,{className:Q("size-4",N),...C}),DayButton:u1,WeekNumber:({children:N,...v})=>e.jsx("td",{...v,children:e.jsx("div",{className:"flex size-[--cell-size] items-center justify-center text-center",children:N})}),...f},...j})}function u1({className:n,day:r,modifiers:c,...d}){const h=ug(),x=u.useRef(null);return u.useEffect(()=>{c.focused&&x.current?.focus()},[c.focused]),e.jsx(b,{ref:x,variant:"ghost",size:"icon","data-day":r.date.toLocaleDateString(),"data-selected-single":c.selected&&!c.range_start&&!c.range_end&&!c.range_middle,"data-range-start":c.range_start,"data-range-end":c.range_end,"data-range-middle":c.range_middle,className:Q("data-[selected-single=true]:bg-primary data-[selected-single=true]:text-primary-foreground data-[range-middle=true]:bg-accent data-[range-middle=true]:text-accent-foreground data-[range-start=true]:bg-primary data-[range-start=true]:text-primary-foreground data-[range-end=true]:bg-primary data-[range-end=true]:text-primary-foreground group-data-[focused=true]/day:border-ring group-data-[focused=true]/day:ring-ring/50 flex aspect-square h-auto w-full min-w-[--cell-size] flex-col gap-1 font-normal leading-none data-[range-end=true]:rounded-md data-[range-middle=true]:rounded-none data-[range-start=true]:rounded-md group-data-[focused=true]/day:relative group-data-[focused=true]/day:z-10 group-data-[focused=true]/day:ring-[3px] [&>span]:text-xs [&>span]:opacity-70",h.day,n),...d})}const m1={lessThanXSeconds:{one:" 1 ",other:" {{count}} "},xSeconds:{one:"1 ",other:"{{count}} "},halfAMinute:"",lessThanXMinutes:{one:" 1 ",other:" {{count}} "},xMinutes:{one:"1 ",other:"{{count}} "},xHours:{one:"1 ",other:"{{count}} "},aboutXHours:{one:" 1 ",other:" {{count}} "},xDays:{one:"1 ",other:"{{count}} "},aboutXWeeks:{one:" 1 ",other:" {{count}} "},xWeeks:{one:"1 ",other:"{{count}} "},aboutXMonths:{one:" 1 ",other:" {{count}} "},xMonths:{one:"1 ",other:"{{count}} "},aboutXYears:{one:" 1 ",other:" {{count}} "},xYears:{one:"1 ",other:"{{count}} "},overXYears:{one:" 1 ",other:" {{count}} "},almostXYears:{one:" 1 ",other:" {{count}} "}},h1=(n,r,c)=>{let d;const h=m1[n];return typeof h=="string"?d=h:r===1?d=h.one:d=h.other.replace("{{count}}",String(r)),c?.addSuffix?c.comparison&&c.comparison>0?d+"":d+"":d},x1={full:"y''M''d'' EEEE",long:"y''M''d''",medium:"yyyy-MM-dd",short:"yy-MM-dd"},f1={full:"zzzz a h:mm:ss",long:"z a h:mm:ss",medium:"a h:mm:ss",short:"a h:mm"},p1={full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},g1={date:gu({formats:x1,defaultWidth:"full"}),time:gu({formats:f1,defaultWidth:"full"}),dateTime:gu({formats:p1,defaultWidth:"full"})};function mp(n,r,c){const d="eeee p";return mb(n,r,c)?d:n.getTime()>r.getTime()?"''"+d:"''"+d}const j1={lastWeek:mp,yesterday:"'' p",today:"'' p",tomorrow:"'' p",nextWeek:mp,other:"PP p"},v1=(n,r,c,d)=>{const h=j1[n];return typeof h=="function"?h(r,c,d):h},b1={narrow:["",""],abbreviated:["",""],wide:["",""]},y1={narrow:["1","2","3","4"],abbreviated:["","","",""],wide:["","","",""]},N1={narrow:["","","","","","","","","","","",""],abbreviated:["1","2","3","4","5","6","7","8","9","10","11","12"],wide:["","","","","","","","","","","",""]},w1={narrow:["","","","","","",""],short:["","","","","","",""],abbreviated:["","","","","","",""],wide:["","","","","","",""]},_1={narrow:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},abbreviated:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},wide:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""}},S1={narrow:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},abbreviated:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},wide:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""}},C1=(n,r)=>{const c=Number(n);switch(r?.unit){case"date":return c.toString()+"";case"hour":return c.toString()+"";case"minute":return c.toString()+"";case"second":return c.toString()+"";default:return" "+c.toString()}},k1={ordinalNumber:C1,era:Ii({values:b1,defaultWidth:"wide"}),quarter:Ii({values:y1,defaultWidth:"wide",argumentCallback:n=>n-1}),month:Ii({values:N1,defaultWidth:"wide"}),day:Ii({values:w1,defaultWidth:"wide"}),dayPeriod:Ii({values:_1,defaultWidth:"wide",formattingValues:S1,defaultFormattingWidth:"wide"})},T1=/^(\s*)?\d+(|||)?/i,E1=/\d+/i,z1={narrow:/^()/i,abbreviated:/^()/i,wide:/^(|)/i},A1={any:[/^()/i,/^()/i]},M1={narrow:/^[1234]/i,abbreviated:/^[]/i,wide:/^[]/i},D1={any:[/(1|)/i,/(2|)/i,/(3|)/i,/(4|)/i]},O1={narrow:/^(|||||||||[])/i,abbreviated:/^(|||||||||[]|\d|1[12])/i,wide:/^(|||||||||[])/i},R1={narrow:[/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^(?!(|))/i,/^/i,/^/i],any:[/^|1/i,/^|2/i,/^|3/i,/^|4/i,/^|5/i,/^|6/i,/^|7/i,/^|8/i,/^|9/i,/^(?!(|))|10/i,/^|11/i,/^|12/i]},L1={narrow:/^[]/i,short:/^[]/i,abbreviated:/^[]/i,wide:/^[]/i},U1={any:[//i,//i,//i,//i,//i,//i,//i]},B1={any:/^(?|?||[]|?||?||)/i},H1={any:{am:/^?/i,pm:/^?/i,midnight:/^/i,noon:/^[]/i,morning:/^/i,afternoon:/^/i,evening:/^?/i,night:/^/i}},q1={ordinalNumber:hb({matchPattern:T1,parsePattern:E1,valueCallback:n=>parseInt(n,10)}),era:Pi({matchPatterns:z1,defaultMatchWidth:"wide",parsePatterns:A1,defaultParseWidth:"any"}),quarter:Pi({matchPatterns:M1,defaultMatchWidth:"wide",parsePatterns:D1,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Pi({matchPatterns:O1,defaultMatchWidth:"wide",parsePatterns:R1,defaultParseWidth:"any"}),day:Pi({matchPatterns:L1,defaultMatchWidth:"wide",parsePatterns:U1,defaultParseWidth:"any"}),dayPeriod:Pi({matchPatterns:B1,defaultMatchWidth:"any",parsePatterns:H1,defaultParseWidth:"any"})},qc={code:"zh-CN",formatDistance:h1,formatLong:g1,formatRelative:v1,localize:k1,match:q1,options:{weekStartsOn:1,firstWeekContainsDate:4}},Gc={xs:{label:"",rowHeight:28,class:"text-[10px] sm:text-xs"},sm:{label:"",rowHeight:36,class:"text-xs sm:text-sm"},base:{label:"",rowHeight:44,class:"text-sm sm:text-base"}};function G1(){const[n,r]=u.useState([]),[c,d]=u.useState(""),[h,x]=u.useState("all"),[f,j]=u.useState("all"),[p,N]=u.useState(void 0),[v,C]=u.useState(void 0),[S,w]=u.useState(!0),[L,F]=u.useState(!1),[B,O]=u.useState("xs"),[K,H]=u.useState(4),z=u.useRef(null);u.useEffect(()=>{const T=an.getAllLogs();r(T);const te=an.onLog(()=>{r(an.getAllLogs())}),_=an.onConnectionChange(me=>{F(me)});return()=>{te(),_()}},[]);const V=u.useMemo(()=>{const T=new Set(n.map(te=>te.module).filter(te=>te&&te.trim()!==""));return Array.from(T).sort()},[n]),Y=T=>{switch(T){case"DEBUG":return"text-muted-foreground";case"INFO":return"text-blue-500 dark:text-blue-400";case"WARNING":return"text-yellow-600 dark:text-yellow-500";case"ERROR":return"text-red-600 dark:text-red-500";case"CRITICAL":return"text-red-700 dark:text-red-400 font-bold";default:return"text-foreground"}},E=T=>{switch(T){case"DEBUG":return"bg-gray-800/30 dark:bg-gray-800/50";case"INFO":return"bg-blue-900/20 dark:bg-blue-500/20";case"WARNING":return"bg-yellow-900/20 dark:bg-yellow-500/20";case"ERROR":return"bg-red-900/20 dark:bg-red-500/20";case"CRITICAL":return"bg-red-900/30 dark:bg-red-600/30";default:return"bg-gray-800/20 dark:bg-gray-800/30"}},R=()=>{window.location.reload()},ne=()=>{an.clearLogs(),r([])},fe=()=>{const T=pe.map(oe=>`${oe.timestamp} [${oe.level.padEnd(8)}] [${oe.module}] ${oe.message}`).join(`
`),te=new Blob([T],{type:"text/plain;charset=utf-8"}),_=URL.createObjectURL(te),me=document.createElement("a");me.href=_,me.download=`logs-${ju(new Date,"yyyy-MM-dd-HHmmss")}.txt`,me.click(),URL.revokeObjectURL(_)},Ce=()=>{w(!S)},we=()=>{N(void 0),C(void 0)},pe=u.useMemo(()=>n.filter(T=>{const te=c===""||T.message.toLowerCase().includes(c.toLowerCase())||T.module.toLowerCase().includes(c.toLowerCase()),_=h==="all"||T.level===h,me=f==="all"||T.module===f;let oe=!0;if(p||v){const ae=new Date(T.timestamp);if(p){const xe=new Date(p);xe.setHours(0,0,0,0),oe=oe&&ae>=xe}if(v){const xe=new Date(v);xe.setHours(23,59,59,999),oe=oe&&ae<=xe}}return te&&_&&me&&oe}),[n,c,h,f,p,v]),Ne=Gc[B].rowHeight+K,be=tb({count:pe.length,getScrollElement:()=>z.current,estimateSize:()=>Ne,overscan:15}),A=u.useRef(!1),X=u.useRef(pe.length);return u.useEffect(()=>{const T=z.current;if(!T)return;const te=()=>{if(A.current)return;const{scrollTop:_,scrollHeight:me,clientHeight:oe}=T,ae=me-_-oe;ae>100&&S?w(!1):ae<50&&!S&&w(!0)};return T.addEventListener("scroll",te,{passive:!0}),()=>T.removeEventListener("scroll",te)},[S]),u.useEffect(()=>{const T=pe.length>X.current;X.current=pe.length,S&&pe.length>0&&T&&(A.current=!0,be.scrollToIndex(pe.length-1,{align:"end",behavior:"auto"}),requestAnimationFrame(()=>{requestAnimationFrame(()=>{A.current=!1})}))},[pe.length,S,be]),e.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"flex-shrink-0 space-y-4 p-3 sm:p-4 lg:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold",children:""}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mt-1",children:""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:Q("h-2.5 w-2.5 sm:h-3 sm:w-3 rounded-full",L?"bg-green-500 animate-pulse":"bg-red-500")}),e.jsx("span",{className:"text-xs sm:text-sm text-muted-foreground",children:L?"":""})]})]}),e.jsx(Ye,{className:"p-3 sm:p-4",children:e.jsxs("div",{className:"flex flex-col gap-3 sm:gap-4",children:[e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(zs,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(ce,{placeholder:"...",value:c,onChange:T=>d(T.target.value),className:"pl-9 h-9 text-sm"})]}),e.jsxs(qe,{value:h,onValueChange:x,children:[e.jsxs(Be,{className:"w-full sm:w-[140px] lg:w-[180px] h-9 text-sm",children:[e.jsx(Eu,{className:"h-4 w-4 mr-2"}),e.jsx(Ge,{placeholder:""})]}),e.jsxs(He,{children:[e.jsx(ie,{value:"all",children:""}),e.jsx(ie,{value:"DEBUG",children:"DEBUG"}),e.jsx(ie,{value:"INFO",children:"INFO"}),e.jsx(ie,{value:"WARNING",children:"WARNING"}),e.jsx(ie,{value:"ERROR",children:"ERROR"}),e.jsx(ie,{value:"CRITICAL",children:"CRITICAL"})]})]}),e.jsxs(qe,{value:f,onValueChange:j,children:[e.jsxs(Be,{className:"w-full sm:w-[160px] lg:w-[200px] h-9 text-sm",children:[e.jsx(Eu,{className:"h-4 w-4 mr-2"}),e.jsx(Ge,{placeholder:""})]}),e.jsxs(He,{children:[e.jsx(ie,{value:"all",children:""}),V.map(T=>e.jsx(ie,{value:T,children:T},T))]})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:gap-4",children:[e.jsxs(Ua,{children:[e.jsx(Ba,{asChild:!0,children:e.jsxs(b,{variant:"outline",size:"sm",className:Q("w-full sm:w-[200px] lg:w-[240px] justify-start text-left font-normal h-9",!p&&"text-muted-foreground"),children:[e.jsx(Vf,{className:"mr-2 h-4 w-4"}),e.jsx("span",{className:"text-xs sm:text-sm",children:p?ju(p,"PPP",{locale:qc}):""})]})}),e.jsx(_a,{className:"w-auto p-0",align:"start",children:e.jsx(up,{mode:"single",selected:p,onSelect:N,initialFocus:!0,locale:qc})})]}),e.jsxs(Ua,{children:[e.jsx(Ba,{asChild:!0,children:e.jsxs(b,{variant:"outline",size:"sm",className:Q("w-full sm:w-[200px] lg:w-[240px] justify-start text-left font-normal h-9",!v&&"text-muted-foreground"),children:[e.jsx(Vf,{className:"mr-2 h-4 w-4"}),e.jsx("span",{className:"text-xs sm:text-sm",children:v?ju(v,"PPP",{locale:qc}):""})]})}),e.jsx(_a,{className:"w-auto p-0",align:"start",children:e.jsx(up,{mode:"single",selected:v,onSelect:C,initialFocus:!0,locale:qc})})]}),(p||v)&&e.jsxs(b,{variant:"outline",size:"sm",onClick:we,className:"w-full sm:w-auto h-9",children:[e.jsx(on,{className:"h-4 w-4 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline text-sm",children:""}),e.jsx("span",{className:"sm:hidden text-sm",children:""})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:flex-wrap sm:items-center",children:[e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs(b,{variant:S?"default":"outline",size:"sm",onClick:Ce,className:"flex-1 sm:flex-none h-9",children:[S?e.jsx(wy,{className:"h-4 w-4"}):e.jsx(_y,{className:"h-4 w-4"}),e.jsx("span",{className:"ml-2 text-sm",children:S?"":""})]}),e.jsxs(b,{variant:"outline",size:"sm",onClick:R,className:"flex-1 sm:flex-none h-9",children:[e.jsx(ws,{className:"h-4 w-4"}),e.jsx("span",{className:"ml-2 text-sm",children:""})]}),e.jsxs(b,{variant:"outline",size:"sm",onClick:ne,className:"flex-1 sm:flex-none h-9",children:[e.jsx(at,{className:"h-4 w-4"}),e.jsx("span",{className:"ml-2 text-sm",children:""})]}),e.jsxs(b,{variant:"outline",size:"sm",onClick:fe,className:"flex-1 sm:flex-none h-9",children:[e.jsx(rl,{className:"h-4 w-4"}),e.jsx("span",{className:"ml-2 text-sm",children:""})]})]}),e.jsx("div",{className:"flex-1 hidden sm:block"}),e.jsxs("div",{className:"text-xs sm:text-sm text-muted-foreground flex items-center justify-center sm:justify-end",children:[e.jsxs("span",{className:"font-mono",children:[pe.length," / ",n.length]}),e.jsx("span",{className:"ml-1",children:""})]})]}),e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:gap-6 pt-2 border-t border-border/50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(Sy,{className:"h-4 w-4"}),e.jsx("span",{children:""})]}),e.jsx("div",{className:"flex gap-1",children:Object.keys(Gc).map(T=>e.jsx(b,{variant:B===T?"default":"outline",size:"sm",onClick:()=>O(T),className:"h-7 px-3 text-xs",children:Gc[T].label},T))})]}),e.jsxs("div",{className:"flex items-center gap-3 flex-1 max-w-xs",children:[e.jsx("span",{className:"text-sm text-muted-foreground whitespace-nowrap",children:""}),e.jsx(Ma,{value:[K],onValueChange:([T])=>H(T),min:0,max:12,step:2,className:"flex-1"}),e.jsxs("span",{className:"text-xs text-muted-foreground w-8",children:[K,"px"]})]})]})]})})]}),e.jsx("div",{className:"flex-1 min-h-0 px-3 sm:px-4 lg:px-6 pb-3 sm:pb-4 lg:pb-6",children:e.jsx(Ye,{className:"bg-black dark:bg-gray-950 border-gray-800 dark:border-gray-900 h-full",children:e.jsx(st,{viewportRef:z,className:"h-full",children:e.jsx("div",{className:Q("p-2 sm:p-3 font-mono relative",Gc[B].class),style:{height:`${be.getTotalSize()}px`},children:pe.length===0?e.jsx("div",{className:"text-gray-500 dark:text-gray-600 text-center py-8 text-sm",children:""}):be.getVirtualItems().map(T=>{const te=pe[T.index];return e.jsxs("div",{"data-index":T.index,ref:be.measureElement,className:Q("absolute top-0 left-0 w-full px-2 sm:px-3 rounded hover:bg-white/5 transition-colors group",E(te.level)),style:{transform:`translateY(${T.start}px)`,paddingTop:`${K/2}px`,paddingBottom:`${K/2}px`},children:[e.jsxs("div",{className:"flex flex-col gap-0.5 sm:hidden",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-600",children:te.timestamp}),e.jsxs("span",{className:Q("font-semibold",Y(te.level)),children:["[",te.level,"]"]})]}),e.jsx("div",{className:"text-cyan-400 dark:text-cyan-500 truncate",children:te.module}),e.jsx("div",{className:"text-gray-300 dark:text-gray-400 whitespace-pre-wrap break-words",children:te.message})]}),e.jsxs("div",{className:"hidden sm:flex gap-2 items-start",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-600 flex-shrink-0 w-[130px] lg:w-[160px]",children:te.timestamp}),e.jsxs("span",{className:Q("flex-shrink-0 w-[65px] lg:w-[75px] font-semibold",Y(te.level)),children:["[",te.level,"]"]}),e.jsx("span",{className:"text-cyan-400 dark:text-cyan-500 flex-shrink-0 w-[100px] lg:w-[130px] truncate",children:te.module}),e.jsx("span",{className:"text-gray-300 dark:text-gray-400 flex-1 whitespace-pre-wrap break-words",children:te.message})]})]},T.key)})})})})})]})}const V1="Mai-with-u",F1="plugin-repo",$1="main",Q1="plugin_details.json";async function Y1(){try{const n=await Te("/api/webui/plugins/fetch-raw",{method:"POST",body:JSON.stringify({owner:V1,repo:F1,branch:$1,file_path:Q1})});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const r=await n.json();if(!r.success||!r.data)throw new Error(r.error||"");return JSON.parse(r.data).filter(h=>!h?.id||!h?.manifest?(console.warn(":",h),!1):!h.manifest.name||!h.manifest.version?(console.warn(":",h.id),!1):!0).map(h=>({id:h.id,manifest:{manifest_version:h.manifest.manifest_version||1,name:h.manifest.name,version:h.manifest.version,description:h.manifest.description||"",author:h.manifest.author||{name:"Unknown"},license:h.manifest.license||"Unknown",host_application:h.manifest.host_application||{min_version:"0.0.0"},homepage_url:h.manifest.homepage_url,repository_url:h.manifest.repository_url,keywords:h.manifest.keywords||[],categories:h.manifest.categories||[],default_locale:h.manifest.default_locale||"zh-CN",locales_path:h.manifest.locales_path},downloads:0,rating:0,review_count:0,installed:!1,published_at:new Date().toISOString(),updated_at:new Date().toISOString()}))}catch(n){throw console.error("Failed to fetch plugin list:",n),n}}async function X1(){try{const n=await Te("/api/webui/plugins/git-status");if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return await n.json()}catch(n){return console.error("Failed to check Git status:",n),{installed:!1,error:" Git "}}}async function K1(){try{const n=await Te("/api/webui/plugins/version");if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return await n.json()}catch(n){return console.error("Failed to get Maimai version:",n),{version:"0.0.0",version_major:0,version_minor:0,version_patch:0}}}function Z1(n,r,c){const d=n.split(".").map(j=>parseInt(j)||0),h=d[0]||0,x=d[1]||0,f=d[2]||0;if(c.version_major<h||c.version_major===h&&c.version_minor<x||c.version_major===h&&c.version_minor===x&&c.version_patch<f)return!1;if(r){const j=r.split(".").map(C=>parseInt(C)||0),p=j[0]||0,N=j[1]||0,v=j[2]||0;if(c.version_major>p||c.version_major===p&&c.version_minor>N||c.version_major===p&&c.version_minor===N&&c.version_patch>v)return!1}return!0}function J1(n,r){const c=window.location.protocol==="https:"?"wss:":"ws:",d=window.location.host,h=new WebSocket(`${c}//${d}/api/webui/ws/plugin-progress`);return h.onopen=()=>{console.log("Plugin progress WebSocket connected");const x=setInterval(()=>{h.readyState===WebSocket.OPEN?h.send("ping"):clearInterval(x)},3e4)},h.onmessage=x=>{try{if(x.data==="pong")return;const f=JSON.parse(x.data);n(f)}catch(f){console.error("Failed to parse progress data:",f)}},h.onerror=x=>{console.error("Plugin progress WebSocket error:",x),r?.(x)},h.onclose=()=>{console.log("Plugin progress WebSocket disconnected")},h}async function nr(){try{const n=await Te("/api/webui/plugins/installed",{headers:Rt()});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const r=await n.json();if(!r.success)throw new Error(r.message||"");return r.plugins||[]}catch(n){return console.error("Failed to get installed plugins:",n),[]}}function Vc(n,r){return r.some(c=>c.id===n)}function Fc(n,r){const c=r.find(d=>d.id===n);if(c)return c.manifest?.version||c.version}async function I1(n,r,c="main"){const d=await Te("/api/webui/plugins/install",{method:"POST",body:JSON.stringify({plugin_id:n,repository_url:r,branch:c})});if(!d.ok){const h=await d.json();throw new Error(h.detail||"")}return await d.json()}async function P1(n){const r=await Te("/api/webui/plugins/uninstall",{method:"POST",body:JSON.stringify({plugin_id:n})});if(!r.ok){const c=await r.json();throw new Error(c.detail||"")}return await r.json()}async function W1(n,r,c="main"){const d=await Te("/api/webui/plugins/update",{method:"POST",body:JSON.stringify({plugin_id:n,repository_url:r,branch:c})});if(!d.ok){const h=await d.json();throw new Error(h.detail||"")}return await d.json()}async function e2(n){const r=await Te(`/api/webui/plugins/config/${n}/schema`,{headers:Rt()});if(!r.ok){const d=await r.json();throw new Error(d.detail||" Schema ")}const c=await r.json();if(!c.success)throw new Error(c.message||" Schema ");return c.schema}async function t2(n){const r=await Te(`/api/webui/plugins/config/${n}`,{headers:Rt()});if(!r.ok){const d=await r.json();throw new Error(d.detail||"")}const c=await r.json();if(!c.success)throw new Error(c.message||"");return c.config}async function s2(n,r){const c=await Te(`/api/webui/plugins/config/${n}`,{method:"PUT",body:JSON.stringify({config:r})});if(!c.ok){const d=await c.json();throw new Error(d.detail||"")}return await c.json()}async function a2(n){const r=await Te(`/api/webui/plugins/config/${n}/reset`,{method:"POST",headers:Rt()});if(!r.ok){const c=await r.json();throw new Error(c.detail||"")}return await r.json()}async function l2(n){const r=await Te(`/api/webui/plugins/config/${n}/toggle`,{method:"POST",headers:Rt()});if(!r.ok){const c=await r.json();throw new Error(c.detail||"")}return await r.json()}const Nr="https://maibot-plugin-stats.maibot-webui.workers.dev";async function Dg(n){try{const r=await fetch(`${Nr}/stats/${n}`);return r.ok?await r.json():(console.error("Failed to fetch plugin stats:",r.statusText),null)}catch(r){return console.error("Error fetching plugin stats:",r),null}}async function n2(n,r){try{const c=r||Zu(),d=await fetch(`${Nr}/stats/like`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({plugin_id:n,user_id:c})}),h=await d.json();return d.status===429?{success:!1,error:""}:d.ok?{success:!0,...h}:{success:!1,error:h.error||""}}catch(c){return console.error("Error liking plugin:",c),{success:!1,error:""}}}async function i2(n,r){try{const c=r||Zu(),d=await fetch(`${Nr}/stats/dislike`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({plugin_id:n,user_id:c})}),h=await d.json();return d.status===429?{success:!1,error:""}:d.ok?{success:!0,...h}:{success:!1,error:h.error||""}}catch(c){return console.error("Error disliking plugin:",c),{success:!1,error:""}}}async function r2(n,r,c,d){if(r<1||r>5)return{success:!1,error:" 1-5 "};try{const h=d||Zu(),x=await fetch(`${Nr}/stats/rate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({plugin_id:n,rating:r,comment:c,user_id:h})}),f=await x.json();return x.status===429?{success:!1,error:" 3 "}:x.ok?{success:!0,...f}:{success:!1,error:f.error||""}}catch(h){return console.error("Error rating plugin:",h),{success:!1,error:""}}}async function c2(n){try{const r=await fetch(`${Nr}/stats/download`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({plugin_id:n})}),c=await r.json();return r.status===429?(console.warn("Download recording rate limited"),{success:!0}):r.ok?{success:!0,...c}:(console.error("Failed to record download:",c.error),{success:!1,error:c.error})}catch(r){return console.error("Error recording download:",r),{success:!1,error:""}}}function o2(){const n=navigator,r=[navigator.userAgent,navigator.language,navigator.languages?.join(",")||"",navigator.platform,navigator.hardwareConcurrency||0,screen.width,screen.height,screen.colorDepth,screen.pixelDepth,new Date().getTimezoneOffset(),Intl.DateTimeFormat().resolvedOptions().timeZone,navigator.maxTouchPoints||0,n.deviceMemory||0].join("|");let c=0;for(let d=0;d<r.length;d++){const h=r.charCodeAt(d);c=(c<<5)-c+h,c=c&c}return`fp_${Math.abs(c).toString(36)}`}function Zu(){const n="maibot_user_id";let r=localStorage.getItem(n);if(!r){const c=o2(),d=Date.now().toString(36),h=Math.random().toString(36).substring(2,15);r=`${c}_${d}_${h}`,localStorage.setItem(n,r)}return r}function d2({pluginId:n,compact:r=!1}){const[c,d]=u.useState(null),[h,x]=u.useState(!0),[f,j]=u.useState(0),[p,N]=u.useState(""),[v,C]=u.useState(!1),{toast:S}=Xt(),w=async()=>{x(!0);const O=await Dg(n);O&&d(O),x(!1)};u.useEffect(()=>{w()},[n]);const L=async()=>{const O=await n2(n);O.success?(S({title:"",description:""}),w()):S({title:"",description:O.error||"",variant:"destructive"})},F=async()=>{const O=await i2(n);O.success?(S({title:"",description:""}),w()):S({title:"",description:O.error||"",variant:"destructive"})},B=async()=>{if(f===0){S({title:"",description:" 1 ",variant:"destructive"});return}const O=await r2(n,f,p||void 0);O.success?(S({title:"",description:""}),C(!1),j(0),N(""),w()):S({title:"",description:O.error||"",variant:"destructive"})};return h?e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(rl,{className:"h-4 w-4"}),e.jsx("span",{children:"-"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ol,{className:"h-4 w-4"}),e.jsx("span",{children:"-"})]})]}):c?r?e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",title:`: ${c.downloads.toLocaleString()}`,children:[e.jsx(rl,{className:"h-4 w-4"}),e.jsx("span",{children:c.downloads.toLocaleString()})]}),e.jsxs("div",{className:"flex items-center gap-1",title:`: ${c.rating.toFixed(1)} (${c.rating_count} )`,children:[e.jsx(Ol,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),e.jsx("span",{children:c.rating.toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-1",title:`: ${c.likes}`,children:[e.jsx(bu,{className:"h-4 w-4"}),e.jsx("span",{children:c.likes})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"flex flex-col items-center p-3 rounded-lg border bg-card",children:[e.jsx(rl,{className:"h-5 w-5 text-muted-foreground mb-1"}),e.jsx("span",{className:"text-2xl font-bold",children:c.downloads.toLocaleString()}),e.jsx("span",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"flex flex-col items-center p-3 rounded-lg border bg-card",children:[e.jsx(Ol,{className:"h-5 w-5 text-yellow-400 mb-1 fill-yellow-400"}),e.jsx("span",{className:"text-2xl font-bold",children:c.rating.toFixed(1)}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[c.rating_count," "]})]}),e.jsxs("div",{className:"flex flex-col items-center p-3 rounded-lg border bg-card",children:[e.jsx(bu,{className:"h-5 w-5 text-green-500 mb-1"}),e.jsx("span",{className:"text-2xl font-bold",children:c.likes}),e.jsx("span",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"flex flex-col items-center p-3 rounded-lg border bg-card",children:[e.jsx(Ff,{className:"h-5 w-5 text-red-500 mb-1"}),e.jsx("span",{className:"text-2xl font-bold",children:c.dislikes}),e.jsx("span",{className:"text-xs text-muted-foreground",children:""})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(b,{variant:"outline",size:"sm",onClick:L,children:[e.jsx(bu,{className:"h-4 w-4 mr-1"}),""]}),e.jsxs(b,{variant:"outline",size:"sm",onClick:F,children:[e.jsx(Ff,{className:"h-4 w-4 mr-1"}),""]}),e.jsxs(Jt,{open:v,onOpenChange:C,children:[e.jsx($u,{asChild:!0,children:e.jsxs(b,{variant:"default",size:"sm",children:[e.jsx(Ol,{className:"h-4 w-4 mr-1"}),""]})}),e.jsxs($t,{children:[e.jsxs(Qt,{children:[e.jsx(Yt,{children:""}),e.jsx(ds,{children:""})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:"flex gap-2",children:[1,2,3,4,5].map(O=>e.jsx("button",{onClick:()=>j(O),className:"focus:outline-none",children:e.jsx(Ol,{className:`h-8 w-8 transition-colors ${O<=f?"fill-yellow-400 text-yellow-400":"text-muted-foreground hover:text-yellow-300"}`})},O))}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[f===0&&"",f===1&&"",f===2&&"",f===3&&"",f===4&&"",f===5&&""]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:""}),e.jsx(Ft,{value:p,onChange:O=>N(O.target.value),placeholder:"...",rows:4,maxLength:500}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-1 text-right",children:[p.length," / 500"]})]})]}),e.jsxs(xs,{children:[e.jsx(b,{variant:"outline",onClick:()=>C(!1),children:""}),e.jsx(b,{onClick:B,disabled:f===0,children:""})]})]})]})]}),c.recent_ratings&&c.recent_ratings.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-semibold",children:""}),e.jsx("div",{className:"space-y-3",children:c.recent_ratings.map((O,K)=>e.jsxs("div",{className:"p-3 rounded-lg border bg-muted/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(H=>e.jsx(Ol,{className:`h-3 w-3 ${H<=O.rating?"fill-yellow-400 text-yellow-400":"text-muted-foreground"}`},H))}),e.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(O.created_at).toLocaleDateString()})]}),O.comment&&e.jsx("p",{className:"text-sm text-muted-foreground",children:O.comment})]},K))})]})]}):null}const hp={"Group Management":"","Entertainment & Interaction":"","Utility Tools":"","Content Generation":"",Multimedia:"","External Integration":"","Data Analysis & Insights":"",Other:""};function u2(){const n=fa(),[r,c]=u.useState(null),[d,h]=u.useState(""),[x,f]=u.useState("all"),[j,p]=u.useState("all"),[N,v]=u.useState(!0),[C,S]=u.useState([]),[w,L]=u.useState(!0),[F,B]=u.useState(null),[O,K]=u.useState(null),[H,z]=u.useState(null),[V,Y]=u.useState(null),[,E]=u.useState([]),[R,ne]=u.useState({}),{toast:fe}=Xt(),Ce=async _=>{const me=_.map(async xe=>{try{const ve=await Dg(xe.id);return{id:xe.id,stats:ve}}catch(ve){return console.warn(`Failed to load stats for ${xe.id}:`,ve),{id:xe.id,stats:null}}}),oe=await Promise.all(me),ae={};oe.forEach(({id:xe,stats:ve})=>{ve&&(ae[xe]=ve)}),ne(ae)};u.useEffect(()=>{let _=null,me=!1;return(async()=>{if(_=J1(ae=>{me||(z(ae),ae.stage==="success"?setTimeout(()=>{me||z(null)},2e3):ae.stage==="error"&&(L(!1),B(ae.error||"")))},ae=>{console.error("WebSocket error:",ae),me||fe({title:"WebSocket ",description:"",variant:"destructive"})}),await new Promise(ae=>{if(!_){ae();return}const xe=()=>{_&&_.readyState===WebSocket.OPEN?(console.log("WebSocket connected, starting to load plugins"),ae()):_&&_.readyState===WebSocket.CLOSED?(console.warn("WebSocket closed before loading plugins"),ae()):setTimeout(xe,100)};xe()}),!me){const ae=await X1();K(ae),ae.installed||fe({title:"Git ",description:ae.error||" Git ",variant:"destructive"})}if(!me){const ae=await K1();Y(ae)}if(!me)try{L(!0),B(null);const ae=await Y1();if(!me){const xe=await nr();E(xe);const ve=ae.map(de=>{const G=Vc(de.id,xe),W=Fc(de.id,xe);return{...de,installed:G,installed_version:W}});for(const de of xe)!ve.some(W=>W.id===de.id)&&de.manifest&&ve.push({id:de.id,manifest:{manifest_version:de.manifest.manifest_version||1,name:de.manifest.name,version:de.manifest.version,description:de.manifest.description||"",author:de.manifest.author,license:de.manifest.license||"Unknown",host_application:de.manifest.host_application,homepage_url:de.manifest.homepage_url,repository_url:de.manifest.repository_url,keywords:de.manifest.keywords||[],categories:de.manifest.categories||[],default_locale:de.manifest.default_locale||"zh-CN",locales_path:de.manifest.locales_path},downloads:0,rating:0,review_count:0,installed:!0,installed_version:de.manifest.version,published_at:new Date().toISOString(),updated_at:new Date().toISOString()});S(ve),Ce(ve)}}catch(ae){if(!me){const xe=ae instanceof Error?ae.message:"";B(xe),fe({title:"",description:xe,variant:"destructive"})}}finally{me||L(!1)}})(),()=>{me=!0,_&&_.close()}},[fe]);const we=_=>{if(!_.installed&&V&&!pe(_))return e.jsxs(Je,{variant:"destructive",className:"gap-1",children:[e.jsx(Oa,{className:"h-3 w-3"}),""]});if(_.installed){const me=_.installed_version?.trim(),oe=_.manifest.version?.trim();if(me!==oe){const ae=me?.split(".").map(Number)||[0,0,0],xe=oe?.split(".").map(Number)||[0,0,0];for(let ve=0;ve<3;ve++){if((xe[ve]||0)>(ae[ve]||0))return e.jsxs(Je,{variant:"outline",className:"gap-1 text-orange-600 border-orange-600",children:[e.jsx(Oa,{className:"h-3 w-3"}),""]});if((xe[ve]||0)<(ae[ve]||0))break}}return e.jsxs(Je,{variant:"default",className:"gap-1",children:[e.jsx(ha,{className:"h-3 w-3"}),""]})}return null},pe=_=>!V||!_.manifest?.host_application?!0:Z1(_.manifest.host_application.min_version,_.manifest.host_application.max_version,V),Ne=_=>{if(!_.installed||!_.installed_version||!_.manifest?.version)return!1;const me=_.installed_version.trim(),oe=_.manifest.version.trim();if(me===oe)return!1;const ae=me.split(".").map(Number),xe=oe.split(".").map(Number);for(let ve=0;ve<3;ve++){if((xe[ve]||0)>(ae[ve]||0))return!0;if((xe[ve]||0)<(ae[ve]||0))return!1}return!1},be=C.filter(_=>{if(!_.manifest)return console.warn("[]  manifest :",_.id),!1;const me=d===""||_.manifest.name?.toLowerCase().includes(d.toLowerCase())||_.manifest.description?.toLowerCase().includes(d.toLowerCase())||_.manifest.keywords&&_.manifest.keywords.some(ve=>ve.toLowerCase().includes(d.toLowerCase())),oe=x==="all"||_.manifest.categories&&_.manifest.categories.includes(x);let ae=!0;j==="installed"?ae=_.installed===!0:j==="updates"&&(ae=_.installed===!0&&Ne(_));const xe=!N||!V||pe(_);return me&&oe&&ae&&xe}),A=()=>{c(null)},X=async _=>{if(!O?.installed){fe({title:"",description:"Git ",variant:"destructive"});return}if(V&&!pe(_)){fe({title:"",description:"",variant:"destructive"});return}try{await I1(_.id,_.manifest.repository_url||"","main"),c2(_.id).catch(oe=>{console.warn("Failed to record download:",oe)}),fe({title:"",description:`${_.manifest.name} `});const me=await nr();E(me),S(oe=>oe.map(ae=>{if(ae.id===_.id){const xe=Vc(ae.id,me),ve=Fc(ae.id,me);return{...ae,installed:xe,installed_version:ve}}return ae}))}catch(me){fe({title:"",description:me instanceof Error?me.message:"",variant:"destructive"})}},T=async _=>{try{await P1(_.id),fe({title:"",description:`${_.manifest.name} `});const me=await nr();E(me),S(oe=>oe.map(ae=>{if(ae.id===_.id){const xe=Vc(ae.id,me),ve=Fc(ae.id,me);return{...ae,installed:xe,installed_version:ve}}return ae}))}catch(me){fe({title:"",description:me instanceof Error?me.message:"",variant:"destructive"})}},te=async _=>{if(!O?.installed){fe({title:"",description:"Git ",variant:"destructive"});return}try{const me=await W1(_.id,_.manifest.repository_url||"","main");fe({title:"",description:`${_.manifest.name}  ${me.old_version}  ${me.new_version}`});const oe=await nr();E(oe),S(ae=>ae.map(xe=>{if(xe.id===_.id){const ve=Vc(xe.id,oe),de=Fc(xe.id,oe);return{...xe,installed:ve,installed_version:de}}return xe}))}catch(me){fe({title:"",description:me instanceof Error?me.message:"",variant:"destructive"})}};return e.jsx(st,{className:"h-full",children:e.jsxs("div",{className:"space-y-6 p-4 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:""}),e.jsx("p",{className:"text-muted-foreground mt-2",children:""})]}),e.jsxs(b,{onClick:()=>n({to:"/plugin-mirrors"}),children:[e.jsx(Cy,{className:"h-4 w-4 mr-2"}),""]})]}),O&&!O.installed&&e.jsxs(Ye,{className:"border-orange-600 bg-orange-50 dark:bg-orange-950/20",children:[e.jsx(Nt,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ya,{className:"h-5 w-5 text-orange-600"}),e.jsxs("div",{children:[e.jsx(wt,{className:"text-lg text-orange-900 dark:text-orange-100",children:"Git "}),e.jsx(ns,{className:"text-orange-800 dark:text-orange-200",children:O.error||" Git "})]})]})}),e.jsx(kt,{children:e.jsxs("p",{className:"text-sm text-orange-800 dark:text-orange-200",children:[" ",e.jsx("a",{href:"https://git-scm.com/downloads",target:"_blank",rel:"noopener noreferrer",className:"underline font-medium",children:"git-scm.com"}),"  Git "]})})]}),e.jsx(Ye,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(zs,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(ce,{placeholder:"...",value:d,onChange:_=>h(_.target.value),className:"pl-9"})]}),e.jsxs(qe,{value:x,onValueChange:f,children:[e.jsx(Be,{className:"w-full sm:w-[200px]",children:e.jsx(Ge,{placeholder:""})}),e.jsxs(He,{children:[e.jsx(ie,{value:"all",children:""}),e.jsx(ie,{value:"Group Management",children:""}),e.jsx(ie,{value:"Entertainment & Interaction",children:""}),e.jsx(ie,{value:"Utility Tools",children:""}),e.jsx(ie,{value:"Content Generation",children:""}),e.jsx(ie,{value:"Multimedia",children:""}),e.jsx(ie,{value:"External Integration",children:""}),e.jsx(ie,{value:"Data Analysis & Insights",children:""}),e.jsx(ie,{value:"Other",children:""})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Cs,{id:"compatible-only",checked:N,onCheckedChange:_=>v(_===!0)}),e.jsx("label",{htmlFor:"compatible-only",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer",children:""})]})]})}),e.jsx(La,{value:j,onValueChange:p,className:"w-full",children:e.jsxs(wa,{className:"grid w-full grid-cols-3",children:[e.jsxs(it,{value:"all",children:[" (",C.filter(_=>{if(!_.manifest)return!1;const me=d===""||_.manifest.name?.toLowerCase().includes(d.toLowerCase())||_.manifest.description?.toLowerCase().includes(d.toLowerCase())||_.manifest.keywords&&_.manifest.keywords.some(xe=>xe.toLowerCase().includes(d.toLowerCase())),oe=x==="all"||_.manifest.categories&&_.manifest.categories.includes(x),ae=!N||!V||pe(_);return me&&oe&&ae}).length,")"]}),e.jsxs(it,{value:"installed",children:[" (",C.filter(_=>{if(!_.manifest)return!1;const me=d===""||_.manifest.name?.toLowerCase().includes(d.toLowerCase())||_.manifest.description?.toLowerCase().includes(d.toLowerCase())||_.manifest.keywords&&_.manifest.keywords.some(xe=>xe.toLowerCase().includes(d.toLowerCase())),oe=x==="all"||_.manifest.categories&&_.manifest.categories.includes(x),ae=!N||!V||pe(_);return _.installed&&me&&oe&&ae}).length,")"]}),e.jsxs(it,{value:"updates",children:[" (",C.filter(_=>{if(!_.manifest)return!1;const me=d===""||_.manifest.name?.toLowerCase().includes(d.toLowerCase())||_.manifest.description?.toLowerCase().includes(d.toLowerCase())||_.manifest.keywords&&_.manifest.keywords.some(xe=>xe.toLowerCase().includes(d.toLowerCase())),oe=x==="all"||_.manifest.categories&&_.manifest.categories.includes(x),ae=!N||!V||pe(_);return _.installed&&Ne(_)&&me&&oe&&ae}).length,")"]})]})}),H&&H.stage==="loading"&&e.jsx(Ye,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ss,{className:"h-4 w-4 animate-spin"}),e.jsxs("span",{className:"text-sm font-medium",children:[H.operation==="fetch"&&"",H.operation==="install"&&`${H.plugin_id?`: ${H.plugin_id}`:""}`,H.operation==="uninstall"&&`${H.plugin_id?`: ${H.plugin_id}`:""}`,H.operation==="update"&&`${H.plugin_id?`: ${H.plugin_id}`:""}`]})]}),e.jsxs("span",{className:"text-sm font-medium",children:[H.progress,"%"]})]}),e.jsx(yr,{value:H.progress,className:"h-2"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:H.message}),H.operation==="fetch"&&H.total_plugins>0&&e.jsxs("div",{className:"text-xs text-muted-foreground text-center",children:[" ",H.loaded_plugins," / ",H.total_plugins," "]})]})}),H&&H.stage==="error"&&H.error&&e.jsx(Ye,{className:"border-destructive bg-destructive/10",children:e.jsx(Nt,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ya,{className:"h-5 w-5 text-destructive"}),e.jsxs("div",{children:[e.jsx(wt,{className:"text-lg text-destructive",children:""}),e.jsx(ns,{className:"text-destructive/80",children:H.error})]})]})})}),w?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx(Ss,{className:"h-8 w-8 animate-spin text-muted-foreground"}),e.jsx("span",{className:"ml-3 text-muted-foreground",children:"..."})]}):F?e.jsx(Ye,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[e.jsx(ya,{className:"h-12 w-12 text-destructive mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:F}),e.jsx(b,{onClick:()=>window.location.reload(),children:""})]})}):be.length===0?e.jsx(Ye,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[e.jsx(zs,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:d||x!=="all"?"":""})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:be.map(_=>e.jsxs(Ye,{className:"flex flex-col hover:shadow-lg transition-shadow h-full",children:[e.jsxs(Nt,{children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx(wt,{className:"text-xl",children:_.manifest?.name||_.id}),e.jsxs("div",{className:"flex flex-col gap-1",children:[_.manifest?.categories&&_.manifest.categories[0]&&e.jsx(Je,{variant:"secondary",className:"text-xs whitespace-nowrap",children:hp[_.manifest.categories[0]]||_.manifest.categories[0]}),we(_)]})]}),e.jsx(ns,{className:"line-clamp-2",children:_.manifest?.description||""})]}),e.jsx(kt,{className:"flex-1",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(rl,{className:"h-4 w-4"}),e.jsx("span",{children:(R[_.id]?.downloads??_.downloads??0).toLocaleString()})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ol,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),e.jsx("span",{children:(R[_.id]?.rating??_.rating??0).toFixed(1)})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[_.manifest?.keywords&&_.manifest.keywords.slice(0,3).map(me=>e.jsx(Je,{variant:"outline",className:"text-xs",children:me},me)),_.manifest?.keywords&&_.manifest.keywords.length>3&&e.jsxs(Je,{variant:"outline",className:"text-xs",children:["+",_.manifest.keywords.length-3]})]}),e.jsxs("div",{className:"text-xs text-muted-foreground pt-2 border-t space-y-1",children:[e.jsxs("div",{children:["v",_.manifest?.version||"unknown","  ",_.manifest?.author?.name||"Unknown"]}),_.manifest?.host_application&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{children:":"}),e.jsxs("span",{className:"font-medium",children:[_.manifest.host_application.min_version,_.manifest.host_application.max_version?` - ${_.manifest.host_application.max_version}`:" - "]})]})]})]})}),e.jsx(mg,{className:"pt-4",children:e.jsxs("div",{className:"flex items-center justify-end gap-2 w-full",children:[e.jsx(b,{variant:"outline",size:"sm",onClick:()=>c(_),children:""}),_.installed?Ne(_)?e.jsxs(b,{size:"sm",disabled:!O?.installed,title:O?.installed?void 0:"Git ",onClick:()=>te(_),children:[e.jsx(ws,{className:"h-4 w-4 mr-1"}),""]}):e.jsxs(b,{variant:"destructive",size:"sm",disabled:!O?.installed,title:O?.installed?void 0:"Git ",onClick:()=>T(_),children:[e.jsx(at,{className:"h-4 w-4 mr-1"}),""]}):e.jsxs(b,{size:"sm",disabled:!O?.installed||H?.operation==="install"||V!==null&&!pe(_),title:O?.installed?V!==null&&!pe(_)?` ( ${_.manifest?.host_application?.min_version||""}${_.manifest?.host_application?.max_version?` - ${_.manifest.host_application.max_version}`:"+"} ${V?.version})`:void 0:"Git ",onClick:()=>X(_),children:[e.jsx(rl,{className:"h-4 w-4 mr-1"}),H?.operation==="install"&&H?.plugin_id===_.id?"...":""]})]})})]},_.id))}),e.jsx(Jt,{open:r!==null,onOpenChange:A,children:r&&r.manifest&&e.jsx($t,{className:"max-w-2xl max-h-[80vh] p-0 flex flex-col",children:e.jsx(st,{className:"flex-1 overflow-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsx(Qt,{children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"space-y-2 flex-1",children:[e.jsx(Yt,{className:"text-2xl",children:r.manifest.name}),e.jsxs(ds,{children:[": ",r.manifest.author?.name||"Unknown",r.manifest.author?.url&&e.jsx("a",{href:r.manifest.author.url,target:"_blank",rel:"noopener noreferrer",className:"ml-2 text-primary hover:underline",children:e.jsx(Qc,{className:"h-3 w-3 inline"})})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[r.manifest.categories&&r.manifest.categories[0]&&e.jsx(Je,{variant:"secondary",children:hp[r.manifest.categories[0]]||r.manifest.categories[0]}),we(r)]})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(d2,{pluginId:r.id}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:""}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["v",r.manifest?.version||"unknown"]}),r.installed&&r.installed_version&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:[": v",r.installed_version]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:(R[r.id]?.downloads??r.downloads??0).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:""}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ol,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[(R[r.id]?.rating??r.rating??0).toFixed(1)," (",R[r.id]?.rating_count??r.review_count??0,")"]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:r.manifest.license||"Unknown"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("p",{className:"text-sm font-medium",children:""}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[r.manifest.host_application?.min_version||"",r.manifest.host_application?.max_version?` - ${r.manifest.host_application.max_version}`:" - "]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:""}),e.jsx("div",{className:"flex flex-wrap gap-2",children:r.manifest.keywords&&r.manifest.keywords.map(_=>e.jsx(Je,{variant:"outline",children:_},_))})]}),r.detailed_description&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-line",children:r.detailed_description})]}),!r.detailed_description&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:r.manifest.description||""})]}),e.jsxs("div",{className:"space-y-2",children:[r.manifest.homepage_url&&e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:": "}),e.jsx("a",{href:r.manifest.homepage_url,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:r.manifest.homepage_url})]}),r.manifest.repository_url&&e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:": "}),e.jsx("a",{href:r.manifest.repository_url,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:r.manifest.repository_url})]})]})]}),e.jsxs(xs,{children:[r.manifest.homepage_url&&e.jsxs(b,{onClick:()=>window.open(r.manifest.homepage_url,"_blank"),children:[e.jsx(Qc,{className:"h-4 w-4 mr-2"}),""]}),r.manifest.repository_url&&e.jsxs(b,{variant:"outline",onClick:()=>window.open(r.manifest.repository_url,"_blank"),children:[e.jsx(Qc,{className:"h-4 w-4 mr-2"}),""]})]})]})})})})]})})}const Ru=Eb,Lu=zb,Uu=Ab;function m2({field:n,value:r,onChange:c}){const[d,h]=u.useState(!1);switch(n.ui_type){case"switch":return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(y,{children:n.label}),n.hint&&e.jsx("p",{className:"text-xs text-muted-foreground",children:n.hint})]}),e.jsx(Qe,{checked:!!r,onCheckedChange:c,disabled:n.disabled})]});case"number":return e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{children:n.label}),e.jsx(ce,{type:"number",value:r??n.default,onChange:x=>c(parseFloat(x.target.value)||0),min:n.min,max:n.max,step:n.step??1,placeholder:n.placeholder,disabled:n.disabled}),n.hint&&e.jsx("p",{className:"text-xs text-muted-foreground",children:n.hint})]});case"slider":return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(y,{children:n.label}),e.jsx("span",{className:"text-sm text-muted-foreground",children:r??n.default})]}),e.jsx(Ma,{value:[r??n.default],onValueChange:x=>c(x[0]),min:n.min??0,max:n.max??100,step:n.step??1,disabled:n.disabled}),n.hint&&e.jsx("p",{className:"text-xs text-muted-foreground",children:n.hint})]});case"select":return e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{children:n.label}),e.jsxs(qe,{value:String(r??n.default),onValueChange:c,disabled:n.disabled,children:[e.jsx(Be,{children:e.jsx(Ge,{placeholder:n.placeholder??""})}),e.jsx(He,{children:n.choices?.map(x=>e.jsx(ie,{value:String(x),children:String(x)},String(x)))})]}),n.hint&&e.jsx("p",{className:"text-xs text-muted-foreground",children:n.hint})]});case"textarea":return e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{children:n.label}),e.jsx(Ft,{value:r??n.default,onChange:x=>c(x.target.value),placeholder:n.placeholder,rows:n.rows??3,disabled:n.disabled}),n.hint&&e.jsx("p",{className:"text-xs text-muted-foreground",children:n.hint})]});case"password":return e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{children:n.label}),e.jsxs("div",{className:"relative",children:[e.jsx(ce,{type:d?"text":"password",value:r??"",onChange:x=>c(x.target.value),placeholder:n.placeholder,disabled:n.disabled,className:"pr-10"}),e.jsx(b,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full px-3",onClick:()=>h(!d),children:d?e.jsx(or,{className:"h-4 w-4"}):e.jsx(Ws,{className:"h-4 w-4"})})]}),n.hint&&e.jsx("p",{className:"text-xs text-muted-foreground",children:n.hint})]});case"text":default:return e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{children:n.label}),e.jsx(ce,{type:"text",value:r??n.default??"",onChange:x=>c(x.target.value),placeholder:n.placeholder,maxLength:n.max_length,disabled:n.disabled}),n.hint&&e.jsx("p",{className:"text-xs text-muted-foreground",children:n.hint})]})}}function xp({section:n,config:r,onChange:c}){const[d,h]=u.useState(!n.collapsed),x=Object.entries(n.fields).filter(([,f])=>!f.hidden).sort(([,f],[,j])=>f.order-j.order);return e.jsx(Ru,{open:d,onOpenChange:h,children:e.jsxs(Ye,{children:[e.jsx(Lu,{asChild:!0,children:e.jsxs(Nt,{className:"cursor-pointer hover:bg-muted/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[d?e.jsx(Rl,{className:"h-4 w-4 text-muted-foreground"}):e.jsx(Ll,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(wt,{className:"text-lg",children:n.title})]}),e.jsxs(Je,{variant:"secondary",className:"text-xs",children:[x.length," "]})]}),n.description&&e.jsx(ns,{className:"ml-6",children:n.description})]})}),e.jsx(Uu,{children:e.jsx(kt,{className:"space-y-4 pt-0",children:x.map(([f,j])=>e.jsx(m2,{field:j,value:r[n.name]?.[f],onChange:p=>c(n.name,f,p),sectionName:n.name},f))})})]})})}function h2({plugin:n,onBack:r}){const{toast:c}=Xt(),[d,h]=u.useState(null),[x,f]=u.useState({}),[j,p]=u.useState({}),[N,v]=u.useState(!0),[C,S]=u.useState(!1),[w,L]=u.useState(!1),[F,B]=u.useState(!1),O=u.useCallback(async()=>{v(!0);try{const[R,ne]=await Promise.all([e2(n.id),t2(n.id)]);h(R),f(ne),p(JSON.parse(JSON.stringify(ne)))}catch(R){c({title:"",description:R instanceof Error?R.message:"",variant:"destructive"})}finally{v(!1)}},[n.id,c]);u.useEffect(()=>{O()},[O]),u.useEffect(()=>{L(JSON.stringify(x)!==JSON.stringify(j))},[x,j]);const K=(R,ne,fe)=>{f(Ce=>({...Ce,[R]:{...Ce[R]||{},[ne]:fe}}))},H=async()=>{S(!0);try{await s2(n.id,x),p(JSON.parse(JSON.stringify(x))),c({title:"",description:""})}catch(R){c({title:"",description:R instanceof Error?R.message:"",variant:"destructive"})}finally{S(!1)}},z=async()=>{try{await a2(n.id),c({title:"",description:""}),B(!1),O()}catch(R){c({title:"",description:R instanceof Error?R.message:"",variant:"destructive"})}},V=async()=>{try{const R=await l2(n.id);c({title:R.message,description:R.note}),O()}catch(R){c({title:"",description:R instanceof Error?R.message:"",variant:"destructive"})}};if(N)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(Ss,{className:"h-8 w-8 animate-spin text-muted-foreground"})});if(!d)return e.jsxs("div",{className:"flex flex-col items-center justify-center h-64 space-y-4",children:[e.jsx(Oa,{className:"h-12 w-12 text-muted-foreground"}),e.jsx("p",{className:"text-muted-foreground",children:""}),e.jsxs(b,{onClick:r,variant:"outline",children:[e.jsx(ti,{className:"h-4 w-4 mr-2"}),""]})]});const Y=Object.values(d.sections).sort((R,ne)=>R.order-ne.order),E=x.plugin?.enabled!==!1;return e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(b,{variant:"ghost",size:"icon",onClick:r,children:e.jsx(ti,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:d.plugin_info.name||n.manifest.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(Je,{variant:E?"default":"secondary",children:E?"":""}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["v",d.plugin_info.version||n.manifest.version]})]})]})]}),e.jsxs("div",{className:"flex gap-2 ml-10 sm:ml-0",children:[e.jsxs(b,{variant:"outline",size:"sm",onClick:V,children:[e.jsx(gr,{className:"h-4 w-4 mr-2"}),E?"":""]}),e.jsxs(b,{variant:"outline",size:"sm",onClick:()=>B(!0),children:[e.jsx(Kc,{className:"h-4 w-4 mr-2"}),""]}),e.jsxs(b,{size:"sm",onClick:H,disabled:!w||C,children:[C?e.jsx(Ss,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(jr,{className:"h-4 w-4 mr-2"}),""]})]})]}),w&&e.jsx(Ye,{className:"border-orange-200 bg-orange-50 dark:bg-orange-950/20 dark:border-orange-900",children:e.jsx(kt,{className:"py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ra,{className:"h-4 w-4 text-orange-600"}),e.jsx("p",{className:"text-sm text-orange-800 dark:text-orange-200",children:""})]})})}),d.layout.type==="tabs"&&d.layout.tabs.length>0?e.jsxs(La,{defaultValue:d.layout.tabs[0]?.id,children:[e.jsx(wa,{children:d.layout.tabs.map(R=>e.jsxs(it,{value:R.id,children:[R.title,R.badge&&e.jsx(Je,{variant:"secondary",className:"ml-2 text-xs",children:R.badge})]},R.id))}),d.layout.tabs.map(R=>e.jsx(zt,{value:R.id,className:"space-y-4 mt-4",children:R.sections.map(ne=>{const fe=d.sections[ne];return fe?e.jsx(xp,{section:fe,config:x,onChange:K},ne):null})},R.id))]}):e.jsx("div",{className:"space-y-4",children:Y.map(R=>e.jsx(xp,{section:R,config:x,onChange:K},R.name))}),e.jsx(Jt,{open:F,onOpenChange:B,children:e.jsxs($t,{children:[e.jsxs(Qt,{children:[e.jsx(Yt,{children:""}),e.jsx(ds,{children:""})]}),e.jsxs(xs,{children:[e.jsx(b,{variant:"outline",onClick:()=>B(!1),children:""}),e.jsx(b,{variant:"destructive",onClick:z,children:""})]})]})})]})}function x2(){const{toast:n}=Xt(),[r,c]=u.useState([]),[d,h]=u.useState(!0),[x,f]=u.useState(""),[j,p]=u.useState(null),N=async()=>{h(!0);try{const w=await nr();c(w)}catch(w){n({title:"",description:w instanceof Error?w.message:"",variant:"destructive"})}finally{h(!1)}};u.useEffect(()=>{N()},[]);const v=r.filter(w=>{const L=x.toLowerCase();return w.id.toLowerCase().includes(L)||w.manifest.name.toLowerCase().includes(L)||w.manifest.description?.toLowerCase().includes(L)}),C=r.length,S=0;return j?e.jsx(st,{className:"h-full",children:e.jsx("div",{className:"p-4 sm:p-6",children:e.jsx(h2,{plugin:j,onBack:()=>p(null)})})}):e.jsx(st,{className:"h-full",children:e.jsxs("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:""}),e.jsx("p",{className:"text-muted-foreground mt-1 sm:mt-2 text-sm sm:text-base",children:""})]}),e.jsxs(b,{variant:"outline",size:"sm",onClick:N,children:[e.jsx(ws,{className:`h-4 w-4 mr-2 ${d?"animate-spin":""}`}),""]})]}),e.jsxs("div",{className:"grid gap-4 grid-cols-1 xs:grid-cols-2 lg:grid-cols-3",children:[e.jsxs(Ye,{children:[e.jsxs(Nt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(wt,{className:"text-sm font-medium",children:""}),e.jsx(rn,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(kt,{children:[e.jsx("div",{className:"text-2xl font-bold",children:r.length}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:d?"...":""})]})]}),e.jsxs(Ye,{children:[e.jsxs(Nt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(wt,{className:"text-sm font-medium",children:""}),e.jsx(ha,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(kt,{children:[e.jsx("div",{className:"text-2xl font-bold",children:C}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:""})]})]}),e.jsxs(Ye,{children:[e.jsxs(Nt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(wt,{className:"text-sm font-medium",children:""}),e.jsx(Oa,{className:"h-4 w-4 text-orange-600"})]}),e.jsxs(kt,{children:[e.jsx("div",{className:"text-2xl font-bold",children:S}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:""})]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(zs,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(ce,{placeholder:"...",value:x,onChange:w=>f(w.target.value),className:"pl-9"})]}),e.jsxs(Ye,{children:[e.jsxs(Nt,{children:[e.jsx(wt,{children:""}),e.jsx(ns,{children:""})]}),e.jsx(kt,{children:d?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(Ss,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):v.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 space-y-4",children:[e.jsx(rn,{className:"h-16 w-16 text-muted-foreground/50"}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("p",{className:"text-lg font-medium text-muted-foreground",children:x?"":""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:x?"":""})]})]}):e.jsx("div",{className:"space-y-2",children:v.map(w=>e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border hover:bg-muted/50 cursor-pointer transition-colors",onClick:()=>p(w),children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsx("div",{className:"h-10 w-10 rounded-lg bg-primary/10 flex items-center justify-center flex-shrink-0",children:e.jsx(rn,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-medium truncate",children:w.manifest.name}),e.jsxs(Je,{variant:"secondary",className:"text-xs flex-shrink-0",children:["v",w.manifest.version]})]}),e.jsx("p",{className:"text-sm text-muted-foreground truncate",children:w.manifest.description||""})]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e.jsx(b,{variant:"ghost",size:"sm",children:e.jsx(ai,{className:"h-4 w-4"})}),e.jsx(Ll,{className:"h-4 w-4 text-muted-foreground"})]})]},w.id))})})]})]})})}function f2(){const n=fa(),{toast:r}=Xt(),[c,d]=u.useState([]),[h,x]=u.useState(!0),[f,j]=u.useState(null),[p,N]=u.useState(null),[v,C]=u.useState(!1),[S,w]=u.useState(!1),[L,F]=u.useState({id:"",name:"",raw_prefix:"",clone_prefix:"",enabled:!0,priority:1}),B=u.useCallback(async()=>{try{x(!0),j(null);const E=localStorage.getItem("access-token"),R=await fetch("/api/webui/plugins/mirrors",{headers:{Authorization:`Bearer ${E}`}});if(!R.ok)throw new Error("");const ne=await R.json();d(ne.mirrors||[])}catch(E){const R=E instanceof Error?E.message:"";j(R),r({title:"",description:R,variant:"destructive"})}finally{x(!1)}},[r]);u.useEffect(()=>{B()},[B]);const O=async()=>{try{const E=localStorage.getItem("access-token"),R=await fetch("/api/webui/plugins/mirrors",{method:"POST",headers:{Authorization:`Bearer ${E}`,"Content-Type":"application/json"},body:JSON.stringify(L)});if(!R.ok){const ne=await R.json();throw new Error(ne.detail||"")}r({title:"",description:""}),C(!1),F({id:"",name:"",raw_prefix:"",clone_prefix:"",enabled:!0,priority:1}),B()}catch(E){r({title:"",description:E instanceof Error?E.message:"",variant:"destructive"})}},K=async()=>{if(p)try{const E=localStorage.getItem("access-token");if(!(await fetch(`/api/webui/plugins/mirrors/${p.id}`,{method:"PUT",headers:{Authorization:`Bearer ${E}`,"Content-Type":"application/json"},body:JSON.stringify({name:L.name,raw_prefix:L.raw_prefix,clone_prefix:L.clone_prefix,enabled:L.enabled,priority:L.priority})})).ok)throw new Error("");r({title:"",description:""}),w(!1),N(null),B()}catch(E){r({title:"",description:E instanceof Error?E.message:"",variant:"destructive"})}},H=async E=>{if(confirm(""))try{const R=localStorage.getItem("access-token");if(!(await fetch(`/api/webui/plugins/mirrors/${E}`,{method:"DELETE",headers:{Authorization:`Bearer ${R}`}})).ok)throw new Error("");r({title:"",description:""}),B()}catch(R){r({title:"",description:R instanceof Error?R.message:"",variant:"destructive"})}},z=async E=>{try{const R=localStorage.getItem("access-token");if(!(await fetch(`/api/webui/plugins/mirrors/${E.id}`,{method:"PUT",headers:{Authorization:`Bearer ${R}`,"Content-Type":"application/json"},body:JSON.stringify({enabled:!E.enabled})})).ok)throw new Error("");B()}catch(R){r({title:"",description:R instanceof Error?R.message:"",variant:"destructive"})}},V=E=>{N(E),F({id:E.id,name:E.name,raw_prefix:E.raw_prefix,clone_prefix:E.clone_prefix,enabled:E.enabled,priority:E.priority}),w(!0)},Y=async(E,R)=>{const ne=R==="up"?E.priority-1:E.priority+1;if(!(ne<1))try{const fe=localStorage.getItem("access-token");if(!(await fetch(`/api/webui/plugins/mirrors/${E.id}`,{method:"PUT",headers:{Authorization:`Bearer ${fe}`,"Content-Type":"application/json"},body:JSON.stringify({priority:ne})})).ok)throw new Error("");B()}catch(fe){r({title:"",description:fe instanceof Error?fe.message:"",variant:"destructive"})}};return e.jsx(st,{className:"h-full",children:e.jsxs("div",{className:"space-y-6 p-4 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(b,{variant:"ghost",size:"icon",onClick:()=>n({to:"/plugins"}),children:e.jsx(ti,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:" Git "})]})]}),e.jsxs(b,{onClick:()=>C(!0),children:[e.jsx(hs,{className:"h-4 w-4 mr-2"}),""]})]}),h?e.jsx(Ye,{className:"p-6",children:e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(Ss,{className:"h-8 w-8 animate-spin text-primary"})})}):f?e.jsx(Ye,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[e.jsx(ya,{className:"h-12 w-12 text-destructive mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:f}),e.jsx(b,{onClick:B,children:""})]})}):e.jsxs(Ye,{children:[e.jsx("div",{className:"hidden md:block",children:e.jsxs(li,{children:[e.jsx(ni,{children:e.jsxs(_s,{children:[e.jsx(rt,{children:""}),e.jsx(rt,{children:""}),e.jsx(rt,{children:"ID"}),e.jsx(rt,{children:""}),e.jsx(rt,{className:"text-right",children:""})]})}),e.jsx(ii,{children:c.map(E=>e.jsxs(_s,{children:[e.jsx(Ze,{children:e.jsx(Qe,{checked:E.enabled,onCheckedChange:()=>z(E)})}),e.jsx(Ze,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:E.name}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Raw: ",E.raw_prefix]})]})}),e.jsx(Ze,{children:e.jsx(Je,{variant:"outline",children:E.id})}),e.jsx(Ze,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-mono",children:E.priority}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx(b,{variant:"ghost",size:"icon",className:"h-5 w-5",onClick:()=>Y(E,"up"),disabled:E.priority===1,children:e.jsx(ur,{className:"h-3 w-3"})}),e.jsx(b,{variant:"ghost",size:"icon",className:"h-5 w-5",onClick:()=>Y(E,"down"),children:e.jsx(Rl,{className:"h-3 w-3"})})]})]})}),e.jsx(Ze,{className:"text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(b,{variant:"ghost",size:"icon",onClick:()=>V(E),children:e.jsx(nn,{className:"h-4 w-4"})}),e.jsx(b,{variant:"ghost",size:"icon",onClick:()=>H(E.id),children:e.jsx(at,{className:"h-4 w-4 text-destructive"})})]})})]},E.id))})]})}),e.jsx("div",{className:"md:hidden p-4 space-y-4",children:c.map(E=>e.jsx(Ye,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-semibold",children:E.name}),E.enabled&&e.jsx(Je,{variant:"default",className:"text-xs",children:""})]}),e.jsx(Je,{variant:"outline",className:"mt-1 text-xs",children:E.id})]}),e.jsx(Qe,{checked:E.enabled,onCheckedChange:()=>z(E)})]}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{className:"text-muted-foreground",children:[e.jsx("span",{className:"font-medium",children:"Raw: "}),e.jsx("span",{className:"break-all",children:E.raw_prefix})]}),e.jsxs("div",{className:"text-muted-foreground",children:[e.jsx("span",{className:"font-medium",children:": "}),e.jsx("span",{className:"font-mono",children:E.priority})]})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t",children:[e.jsxs(b,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>V(E),children:[e.jsx(nn,{className:"h-4 w-4 mr-1"}),""]}),e.jsx(b,{variant:"outline",size:"sm",onClick:()=>Y(E,"up"),disabled:E.priority===1,children:e.jsx(ur,{className:"h-4 w-4"})}),e.jsx(b,{variant:"outline",size:"sm",onClick:()=>Y(E,"down"),children:e.jsx(Rl,{className:"h-4 w-4"})}),e.jsx(b,{variant:"destructive",size:"sm",onClick:()=>H(E.id),children:e.jsx(at,{className:"h-4 w-4"})})]})]})},E.id))})]}),e.jsx(Jt,{open:v,onOpenChange:C,children:e.jsxs($t,{className:"max-w-lg",children:[e.jsxs(Qt,{children:[e.jsx(Yt,{children:""}),e.jsx(ds,{children:" Git "})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"add-id",children:" ID *"}),e.jsx(ce,{id:"add-id",placeholder:": my-mirror",value:L.id,onChange:E=>F({...L,id:E.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"add-name",children:" *"}),e.jsx(ce,{id:"add-name",placeholder:": ",value:L.name,onChange:E=>F({...L,name:E.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"add-raw",children:"Raw  *"}),e.jsx(ce,{id:"add-raw",placeholder:"https://example.com/raw",value:L.raw_prefix,onChange:E=>F({...L,raw_prefix:E.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"add-clone",children:" *"}),e.jsx(ce,{id:"add-clone",placeholder:"https://example.com/clone",value:L.clone_prefix,onChange:E=>F({...L,clone_prefix:E.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"add-priority",children:""}),e.jsx(ce,{id:"add-priority",type:"number",min:"1",value:L.priority,onChange:E=>F({...L,priority:parseInt(E.target.value)||1})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Qe,{id:"add-enabled",checked:L.enabled,onCheckedChange:E=>F({...L,enabled:E})}),e.jsx(y,{htmlFor:"add-enabled",children:""})]})]}),e.jsxs(xs,{children:[e.jsx(b,{variant:"outline",onClick:()=>C(!1),children:""}),e.jsx(b,{onClick:O,children:""})]})]})}),e.jsx(Jt,{open:S,onOpenChange:w,children:e.jsxs($t,{className:"max-w-lg",children:[e.jsxs(Qt,{children:[e.jsx(Yt,{children:""}),e.jsx(ds,{children:""})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{children:" ID"}),e.jsx(ce,{value:L.id,disabled:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"edit-name",children:" *"}),e.jsx(ce,{id:"edit-name",value:L.name,onChange:E=>F({...L,name:E.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"edit-raw",children:"Raw  *"}),e.jsx(ce,{id:"edit-raw",value:L.raw_prefix,onChange:E=>F({...L,raw_prefix:E.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"edit-clone",children:" *"}),e.jsx(ce,{id:"edit-clone",value:L.clone_prefix,onChange:E=>F({...L,clone_prefix:E.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"edit-priority",children:""}),e.jsx(ce,{id:"edit-priority",type:"number",min:"1",value:L.priority,onChange:E=>F({...L,priority:parseInt(E.target.value)||1})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Qe,{id:"edit-enabled",checked:L.enabled,onCheckedChange:E=>F({...L,enabled:E})}),e.jsx(y,{htmlFor:"edit-enabled",children:""})]})]}),e.jsxs(xs,{children:[e.jsx(b,{variant:"outline",onClick:()=>w(!1),children:""}),e.jsx(b,{onClick:K,children:""})]})]})})]})})}const ir=u.forwardRef(({className:n,...r},c)=>e.jsx(Dp,{ref:c,className:Q("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",n),...r}));ir.displayName=Dp.displayName;const p2=u.forwardRef(({className:n,...r},c)=>e.jsx(Op,{ref:c,className:Q("aspect-square h-full w-full",n),...r}));p2.displayName=Op.displayName;const rr=u.forwardRef(({className:n,...r},c)=>e.jsx(Rp,{ref:c,className:Q("flex h-full w-full items-center justify-center rounded-full bg-muted",n),...r}));rr.displayName=Rp.displayName;function g2(){return"webui_"+Math.random().toString(36).substr(2,9)+"_"+Date.now().toString(36)}function j2(){const n="maibot_webui_user_id";let r=localStorage.getItem(n);return r||(r=g2(),localStorage.setItem(n,r)),r}function v2(){return localStorage.getItem("maibot_webui_user_name")||"WebUI"}function b2(n){localStorage.setItem("maibot_webui_user_name",n)}const Og="maibot_webui_virtual_tabs";function y2(){try{const n=localStorage.getItem(Og);if(n)return JSON.parse(n)}catch(n){console.error("[Chat] :",n)}return[]}function fp(n){try{localStorage.setItem(Og,JSON.stringify(n))}catch(r){console.error("[Chat] :",r)}}function N2(){const n={id:"webui-default",type:"webui",label:"WebUI",messages:[],isConnected:!1,isTyping:!1,sessionInfo:{}},r=()=>{const De=y2().map(ze=>{const Ve=ze.virtualConfig;return!Ve.groupId&&Ve.platform&&Ve.userId&&(Ve.groupId=`webui_virtual_group_${Ve.platform}_${Ve.userId}`),{id:ze.id,type:"virtual",label:ze.label,virtualConfig:Ve,messages:[],isConnected:!1,isTyping:!1,sessionInfo:{}}});return[n,...De]},[c,d]=u.useState(r),[h,x]=u.useState("webui-default"),f=c.find(D=>D.id===h)||c[0],[j,p]=u.useState(""),[N,v]=u.useState(!1),[C,S]=u.useState(!0),[w,L]=u.useState(v2()),[F,B]=u.useState(!1),[O,K]=u.useState(""),[H,z]=u.useState(!1),[V,Y]=u.useState([]),[E,R]=u.useState([]),[ne,fe]=u.useState(!1),[Ce,we]=u.useState(!1),[pe,Ne]=u.useState(""),[be,A]=u.useState({platform:"",personId:"",userId:"",userName:"",groupName:"",groupId:""}),X=u.useRef(j2()),T=u.useRef(new Map),te=u.useRef(null),_=u.useRef(new Map),me=u.useRef(0),oe=u.useRef(new Map),{toast:ae}=Xt(),xe=D=>(me.current+=1,`${D}-${Date.now()}-${me.current}-${Math.random().toString(36).substr(2,9)}`),ve=u.useCallback((D,De)=>{d(ze=>ze.map(Ve=>Ve.id===D?{...Ve,...De}:Ve))},[]),de=u.useCallback((D,De)=>{d(ze=>ze.map(Ve=>Ve.id===D?{...Ve,messages:[...Ve.messages,De]}:Ve))},[]),G=u.useCallback(()=>{te.current?.scrollIntoView({behavior:"smooth"})},[]);u.useEffect(()=>{G()},[f?.messages,G]);const W=u.useCallback(async()=>{fe(!0);try{const D=await Te("/api/chat/platforms");if(console.log("[Chat] :",D.status,D.headers.get("content-type")),D.ok){const De=D.headers.get("content-type");if(De&&De.includes("application/json")){const ze=await D.json();console.log("[Chat] :",ze),Y(ze.platforms||[])}else{const ze=await D.text();console.error("[Chat] :  JSON :",ze.substring(0,200)),ae({title:"",description:" MaiBot ",variant:"destructive"})}}else console.error("[Chat] : HTTP",D.status),ae({title:"",description:`: ${D.status}`,variant:"destructive"})}catch(D){console.error("[Chat] :",D),ae({title:"",description:"",variant:"destructive"})}finally{fe(!1)}},[ae]),U=u.useCallback(async(D,De)=>{we(!0);try{const ze=new URLSearchParams;D&&ze.append("platform",D),De&&ze.append("search",De),ze.append("limit","50");const Ve=await Te(`/api/chat/persons?${ze.toString()}`);if(Ve.ok){const At=Ve.headers.get("content-type");if(At&&At.includes("application/json")){const We=await Ve.json();R(We.persons||[])}else console.error("[Chat] :  JSON ")}}catch(ze){console.error("[Chat] :",ze)}finally{we(!1)}},[]);u.useEffect(()=>{be.platform&&U(be.platform,pe)},[be.platform,pe,U]);const ee=u.useCallback(async(D,De)=>{S(!0);try{const ze=new URLSearchParams;ze.append("user_id",X.current),ze.append("limit","50"),De&&ze.append("group_id",De);const Ve=`/api/chat/history?${ze.toString()}`;console.log("[Chat] :",Ve);const At=await Te(Ve);if(At.ok){const We=await At.text();try{const ss=JSON.parse(We);if(ss.messages&&ss.messages.length>0){const gt=ss.messages.map(je=>({id:je.id,type:je.type,content:je.content,timestamp:je.timestamp,sender:{name:je.sender_name||(je.is_bot?"":"WebUI"),user_id:je.user_id,is_bot:je.is_bot}}));ve(D,{messages:gt});const _e=oe.current.get(D)||new Set;gt.forEach(je=>{if(je.type==="bot"){const yt=`bot-${je.content}-${Math.floor(je.timestamp*1e3)}`;_e.add(yt)}}),oe.current.set(D,_e)}}catch(ss){console.error("[Chat] JSON :",ss)}}}catch(ze){console.error("[Chat] :",ze)}finally{S(!1)}},[ve]),Se=u.useCallback((D,De,ze)=>{const Ve=T.current.get(D);if(Ve?.readyState===WebSocket.OPEN||Ve?.readyState===WebSocket.CONNECTING){console.log(`[Tab ${D}] WebSocket `);return}v(!0);const At=window.location.protocol==="https:"?"wss:":"ws:",We=new URLSearchParams;De==="virtual"&&ze?(We.append("user_id",ze.userId),We.append("user_name",ze.userName),We.append("platform",ze.platform),We.append("person_id",ze.personId),We.append("group_name",ze.groupName||"WebUI"),ze.groupId&&We.append("group_id",ze.groupId)):(We.append("user_id",X.current),We.append("user_name",w));const ss=`${At}//${window.location.host}/api/chat/ws?${We.toString()}`;console.log(`[Tab ${D}]  WebSocket:`,ss);try{const gt=new WebSocket(ss);T.current.set(D,gt),gt.onopen=()=>{ve(D,{isConnected:!0}),v(!1),console.log(`[Tab ${D}] WebSocket `)},gt.onmessage=_e=>{try{const je=JSON.parse(_e.data);switch(je.type){case"session_info":ve(D,{sessionInfo:{session_id:je.session_id,user_id:je.user_id,user_name:je.user_name,bot_name:je.bot_name}});break;case"system":de(D,{id:xe("sys"),type:"system",content:je.content||"",timestamp:je.timestamp||Date.now()/1e3});break;case"user_message":de(D,{id:je.message_id||xe("user"),type:"user",content:je.content||"",timestamp:je.timestamp||Date.now()/1e3,sender:je.sender});break;case"bot_message":{ve(D,{isTyping:!1});const yt=oe.current.get(D)||new Set,Ht=`bot-${je.content}-${Math.floor((je.timestamp||0)*1e3)}`;if(yt.has(Ht))break;if(yt.add(Ht),oe.current.set(D,yt),yt.size>100){const pa=yt.values().next().value;pa&&yt.delete(pa)}de(D,{id:xe("bot"),type:"bot",content:je.content||"",timestamp:je.timestamp||Date.now()/1e3,sender:je.sender});break}case"typing":ve(D,{isTyping:je.is_typing||!1});break;case"error":de(D,{id:xe("error"),type:"error",content:je.content||"",timestamp:je.timestamp||Date.now()/1e3}),ae({title:"",description:je.content,variant:"destructive"});break;case"pong":break;case"history":{const yt=je.messages||[];if(yt.length>0){const Ht=oe.current.get(D)||new Set,pa=yt.map(Ts=>{const Kt=Ts.is_bot||!1,Ms=Ts.id||xe(Kt?"bot":"user"),Ds=`${Kt?"bot":"user"}-${Ts.content}-${Math.floor(Ts.timestamp*1e3)}`;return Ht.add(Ds),{id:Ms,type:Kt?"bot":"user",content:Ts.content,timestamp:Ts.timestamp,sender:{name:Ts.sender_name||(Kt?"":""),user_id:Ts.sender_id,is_bot:Kt}}});oe.current.set(D,Ht),ve(D,{messages:pa}),console.log(`[Tab ${D}]  ${pa.length} `)}break}default:console.log(":",je.type)}}catch(je){console.error(":",je)}},gt.onclose=()=>{ve(D,{isConnected:!1}),v(!1),T.current.delete(D),console.log(`[Tab ${D}] WebSocket `);const _e=_.current.get(D);_e&&clearTimeout(_e);const je=window.setTimeout(()=>{if(!Me.current){const yt=c.find(Ht=>Ht.id===D);yt&&Se(D,yt.type,yt.virtualConfig)}},5e3);_.current.set(D,je)},gt.onerror=_e=>{console.error(`[Tab ${D}] WebSocket :`,_e),v(!1)}}catch(gt){console.error(`[Tab ${D}]  WebSocket :`,gt),v(!1)}},[w,ve,de,ae,c]),Me=u.useRef(!1);u.useEffect(()=>{Me.current=!1;const D=T.current,De=_.current,ze=oe.current;ee("webui-default");const Ve=setTimeout(()=>{Me.current||(Se("webui-default","webui"),c.forEach(We=>{We.type==="virtual"&&We.virtualConfig&&(ze.set(We.id,new Set),setTimeout(()=>{Me.current||Se(We.id,"virtual",We.virtualConfig)},200))}))},100),At=setInterval(()=>{D.forEach(We=>{We.readyState===WebSocket.OPEN&&We.send(JSON.stringify({type:"ping"}))})},3e4);return()=>{Me.current=!0,clearTimeout(Ve),clearInterval(At),De.forEach(We=>{clearTimeout(We)}),De.clear(),D.forEach(We=>{We.close()}),D.clear()}},[]);const tt=u.useCallback(()=>{const D=T.current.get(h);if(!j.trim()||!D||D.readyState!==WebSocket.OPEN)return;const De=f?.type==="virtual"&&f.virtualConfig?.userName||w;D.send(JSON.stringify({type:"message",content:j.trim(),user_name:De})),p("")},[j,w,h,f]),Xe=D=>{D.key==="Enter"&&!D.shiftKey&&(D.preventDefault(),tt())},Ut=()=>{K(w),B(!0)},Bt=()=>{const D=O.trim()||"WebUI";L(D),b2(D),B(!1);const De=T.current.get(h);De?.readyState===WebSocket.OPEN&&De.send(JSON.stringify({type:"update_nickname",user_name:D}))},re=()=>{K(""),B(!1)},ke=D=>new Date(D*1e3).toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"}),Pe=()=>{const D=T.current.get(h);D&&(D.close(),T.current.delete(h)),Se(h,f?.type||"webui",f?.virtualConfig)},Fe=()=>{A({platform:"",personId:"",userId:"",userName:"",groupName:"",groupId:""}),Ne(""),W(),z(!0)},ts=()=>{if(!be.platform||!be.personId){ae({title:"",description:"",variant:"destructive"});return}const D=`webui_virtual_group_${be.platform}_${be.userId}`,De=`virtual-${be.platform}-${be.userId}-${Date.now()}`,ze=be.userName||be.userId,Ve={id:De,type:"virtual",label:ze,virtualConfig:{...be,groupId:D},messages:[],isConnected:!1,isTyping:!1,sessionInfo:{}};d(At=>{const We=[...At,Ve],ss=We.filter(gt=>gt.type==="virtual"&&gt.virtualConfig).map(gt=>({id:gt.id,label:gt.label,virtualConfig:gt.virtualConfig,createdAt:Date.now()}));return fp(ss),We}),x(De),z(!1),oe.current.set(De,new Set),setTimeout(()=>{Se(De,"virtual",be)},100),ae({title:"",description:` ${ze} `})},As=(D,De)=>{if(De?.stopPropagation(),D==="webui-default")return;const ze=T.current.get(D);ze&&(ze.close(),T.current.delete(D));const Ve=_.current.get(D);Ve&&(clearTimeout(Ve),_.current.delete(D)),oe.current.delete(D),d(At=>{const We=At.filter(gt=>gt.id!==D),ss=We.filter(gt=>gt.type==="virtual"&&gt.virtualConfig).map(gt=>({id:gt.id,label:gt.label,virtualConfig:gt.virtualConfig,createdAt:Date.now()}));return fp(ss),We}),h===D&&x("webui-default")},js=D=>{x(D)},Ke=D=>{A(De=>({...De,personId:D.person_id,userId:D.user_id,userName:D.nickname||D.person_name}))};return e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsx(Jt,{open:H,onOpenChange:z,children:e.jsxs($t,{className:"sm:max-w-[500px] max-h-[85vh] overflow-hidden flex flex-col",children:[e.jsxs(Qt,{children:[e.jsxs(Yt,{className:"flex items-center gap-2",children:[e.jsx(yu,{className:"h-5 w-5"}),""]}),e.jsx(ds,{children:""})]}),e.jsxs("div",{className:"space-y-4 flex-1 overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx(ky,{className:"h-4 w-4"}),""]}),e.jsxs(qe,{value:be.platform,onValueChange:D=>{A(De=>({...De,platform:D,personId:"",userId:"",userName:""})),R([])},children:[e.jsx(Be,{disabled:ne,children:e.jsx(Ge,{placeholder:ne?"...":""})}),e.jsx(He,{children:V.map(D=>e.jsxs(ie,{value:D.platform,children:[D.platform," (",D.count," )"]},D.platform))})]})]}),be.platform&&e.jsxs("div",{className:"space-y-2 flex-1 overflow-hidden flex flex-col",children:[e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx(Au,{className:"h-4 w-4"}),""]}),e.jsxs("div",{className:"relative",children:[e.jsx(zs,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(ce,{placeholder:"...",value:pe,onChange:D=>Ne(D.target.value),className:"pl-9"})]}),e.jsx(st,{className:"h-[250px] border rounded-md",children:e.jsx("div",{className:"p-2",children:Ce?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(Ss,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):E.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-muted-foreground",children:[e.jsx(Au,{className:"h-8 w-8 mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:""})]}):e.jsx("div",{className:"space-y-1",children:E.map(D=>e.jsxs("button",{onClick:()=>Ke(D),className:Q("w-full flex items-center gap-3 p-2 rounded-md text-left transition-colors",be.personId===D.person_id?"bg-primary text-primary-foreground":"hover:bg-muted"),children:[e.jsx(ir,{className:"h-8 w-8 shrink-0",children:e.jsx(rr,{className:Q("text-xs",be.personId===D.person_id?"bg-primary-foreground/20":"bg-muted"),children:(D.nickname||D.person_name||"?").charAt(0)})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"font-medium truncate",children:D.nickname||D.person_name}),e.jsxs("div",{className:Q("text-xs truncate",be.personId===D.person_id?"text-primary-foreground/70":"text-muted-foreground"),children:["ID: ",D.user_id,D.is_known&&"  "]})]})]},D.person_id))})})})]}),be.personId&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{children:""}),e.jsx(ce,{placeholder:"WebUI",value:be.groupName,onChange:D=>A(De=>({...De,groupName:D.target.value}))}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})]}),e.jsxs(xs,{className:"gap-2 sm:gap-0",children:[e.jsx(b,{variant:"outline",onClick:()=>z(!1),children:""}),e.jsx(b,{onClick:ts,disabled:!be.platform||!be.personId,children:""})]})]})}),e.jsx("div",{className:"shrink-0 border-b bg-muted/30",children:e.jsx("div",{className:"max-w-4xl mx-auto px-2 sm:px-4",children:e.jsxs("div",{className:"flex items-center gap-1 overflow-x-auto py-1.5 scrollbar-thin",children:[c.map(D=>e.jsxs("button",{onClick:()=>js(D.id),className:Q("flex items-center gap-1.5 px-3 py-1.5 rounded-md text-sm whitespace-nowrap transition-colors","hover:bg-muted",h===D.id?"bg-background shadow-sm border":"text-muted-foreground"),children:[D.type==="webui"?e.jsx(cn,{className:"h-3.5 w-3.5"}):e.jsx(yu,{className:"h-3.5 w-3.5"}),e.jsx("span",{className:"max-w-[100px] truncate",children:D.label}),e.jsx("span",{className:Q("w-1.5 h-1.5 rounded-full",D.isConnected?"bg-green-500":"bg-muted-foreground/50")}),D.id!=="webui-default"&&e.jsx("button",{onClick:De=>As(D.id,De),className:"ml-0.5 p-0.5 rounded hover:bg-muted-foreground/20",children:e.jsx(on,{className:"h-3 w-3"})})]},D.id)),e.jsx("button",{onClick:Fe,className:"flex items-center gap-1 px-2 py-1.5 rounded-md text-sm text-muted-foreground hover:bg-muted hover:text-foreground transition-colors",title:"",children:e.jsx(hs,{className:"h-3.5 w-3.5"})})]})})}),e.jsx("div",{className:"shrink-0 border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:e.jsxs("div",{className:"p-3 sm:p-4 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0",children:[e.jsx(ir,{className:"h-8 w-8 sm:h-10 sm:w-10 shrink-0",children:e.jsx(rr,{className:"bg-primary/10 text-primary",children:e.jsx(ar,{className:"h-4 w-4 sm:h-5 sm:w-5"})})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-base sm:text-lg font-semibold truncate",children:f?.sessionInfo.bot_name||""}),e.jsx("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground",children:f?.isConnected?e.jsxs(e.Fragment,{children:[e.jsx(Ty,{className:"h-3 w-3 text-green-500"}),e.jsx("span",{className:"text-green-600 dark:text-green-400",children:""})]}):N?e.jsxs(e.Fragment,{children:[e.jsx(Ss,{className:"h-3 w-3 animate-spin"}),e.jsx("span",{children:"..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Ey,{className:"h-3 w-3 text-red-500"}),e.jsx("span",{className:"text-red-600 dark:text-red-400",children:""})]})})]})]}),e.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[C&&e.jsx(Ss,{className:"h-4 w-4 animate-spin text-muted-foreground"}),e.jsx(b,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:Pe,disabled:N,title:"",children:e.jsx(ws,{className:Q("h-4 w-4",N&&"animate-spin")})})]})]}),e.jsx("div",{className:"hidden sm:flex items-center gap-2 mt-2 text-sm text-muted-foreground",children:f?.type==="virtual"&&f.virtualConfig?e.jsxs(e.Fragment,{children:[e.jsx(yu,{className:"h-3 w-3 text-primary"}),e.jsx("span",{children:""}),e.jsx("span",{className:"font-medium text-primary",children:f.virtualConfig.userName}),e.jsxs("span",{className:"text-xs",children:["(",f.virtualConfig.platform,")"]}),f.virtualConfig.groupName&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"mx-1",children:""}),e.jsxs("span",{className:"text-xs",children:["",f.virtualConfig.groupName]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(Ic,{className:"h-3 w-3"}),e.jsx("span",{children:""}),F?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ce,{value:O,onChange:D=>K(D.target.value),onKeyDown:D=>{D.key==="Enter"&&Bt(),D.key==="Escape"&&re()},className:"h-7 w-32",placeholder:"",autoFocus:!0}),e.jsx(b,{size:"sm",variant:"ghost",className:"h-7 px-2",onClick:Bt,children:""}),e.jsx(b,{size:"sm",variant:"ghost",className:"h-7 px-2",onClick:re,children:""})]}):e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"font-medium text-foreground",children:w}),e.jsx(b,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0",onClick:Ut,title:"",children:e.jsx(zy,{className:"h-3 w-3"})})]})]})})]})}),e.jsx("div",{className:"flex-1 overflow-hidden",children:e.jsx(st,{className:"h-full",children:e.jsxs("div",{className:"p-3 sm:p-4 max-w-4xl mx-auto space-y-3 sm:space-y-4",children:[f?.messages.length===0&&!C&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-muted-foreground",children:[e.jsx(ar,{className:"h-12 w-12 mb-4 opacity-50"}),e.jsxs("p",{className:"text-sm",children:[" ",f?.sessionInfo.bot_name||""," "]})]}),f?.messages.map(D=>e.jsxs("div",{className:Q("flex gap-2 sm:gap-3",D.type==="user"&&"flex-row-reverse",D.type==="system"&&"justify-center",D.type==="error"&&"justify-center"),children:[D.type==="system"&&e.jsx("div",{className:"text-xs text-muted-foreground bg-muted/50 px-3 py-1 rounded-full max-w-[90%]",children:D.content}),D.type==="error"&&e.jsx("div",{className:"text-xs text-red-600 dark:text-red-400 bg-red-100 dark:bg-red-900/30 px-3 py-1 rounded-full max-w-[90%]",children:D.content}),(D.type==="user"||D.type==="bot")&&e.jsxs(e.Fragment,{children:[e.jsx(ir,{className:"h-7 w-7 sm:h-8 sm:w-8 shrink-0",children:e.jsx(rr,{className:Q("text-xs",D.type==="bot"?"bg-primary/10 text-primary":"bg-secondary text-secondary-foreground"),children:D.type==="bot"?e.jsx(ar,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}):e.jsx(Ic,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})})}),e.jsxs("div",{className:Q("flex flex-col gap-1 max-w-[75%] sm:max-w-[70%]",D.type==="user"&&"items-end"),children:[e.jsxs("div",{className:"flex items-center gap-2 text-[10px] sm:text-xs text-muted-foreground",children:[e.jsx("span",{className:"hidden sm:inline",children:D.sender?.name||(D.type==="bot"?f?.sessionInfo.bot_name:w)}),e.jsx("span",{children:ke(D.timestamp)})]}),e.jsx("div",{className:Q("rounded-2xl px-3 py-2 text-sm whitespace-pre-wrap break-words",D.type==="bot"?"bg-muted rounded-tl-sm":"bg-primary text-primary-foreground rounded-tr-sm"),children:D.content})]})]})]},D.id)),f?.isTyping&&e.jsxs("div",{className:"flex gap-2 sm:gap-3",children:[e.jsx(ir,{className:"h-7 w-7 sm:h-8 sm:w-8 shrink-0",children:e.jsx(rr,{className:"bg-primary/10 text-primary",children:e.jsx(ar,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})})}),e.jsx("div",{className:"bg-muted rounded-2xl rounded-tl-sm px-4 py-3",children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx("span",{className:"w-2 h-2 bg-muted-foreground/50 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),e.jsx("span",{className:"w-2 h-2 bg-muted-foreground/50 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),e.jsx("span",{className:"w-2 h-2 bg-muted-foreground/50 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})]}),e.jsx("div",{ref:te})]})})}),e.jsx("div",{className:"shrink-0 border-t bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:e.jsx("div",{className:"p-3 sm:p-4 max-w-4xl mx-auto",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ce,{value:j,onChange:D=>p(D.target.value),onKeyDown:Xe,placeholder:f?.isConnected?"...":"...",disabled:!f?.isConnected,className:"flex-1 h-10 sm:h-10"}),e.jsx(b,{onClick:tt,disabled:!f?.isConnected||!j.trim(),size:"icon",className:"h-10 w-10 shrink-0",children:e.jsx(Ay,{className:"h-4 w-4"})})]})})})]})}function w2(){const n=fa(),[r,c]=u.useState(!0);return u.useEffect(()=>{let d=!1;return(async()=>{try{const x=await Qu();!d&&!x&&n({to:"/auth"})}catch{d||n({to:"/auth"})}finally{d||c(!1)}})(),()=>{d=!0}},[n]),{checking:r}}async function _2(){return await Qu()}const S2=si("pointer-events-none inline-flex select-none items-center gap-1 rounded border bg-muted px-1.5 font-mono font-medium opacity-100",{variants:{size:{sm:"h-5 text-[10px]",default:"h-6 text-xs",lg:"h-7 text-sm"}},defaultVariants:{size:"default"}}),Rg=u.forwardRef(({className:n,size:r,abbrTitle:c,children:d,...h},x)=>e.jsx("kbd",{className:Q(S2({size:r,className:n})),ref:x,...h,children:c?e.jsx("abbr",{title:c,children:d}):d}));Rg.displayName="Kbd";const C2=[{icon:to,title:"",description:"",path:"/",category:""},{icon:Da,title:"",description:"",path:"/config/bot",category:""},{icon:cg,title:"",description:"",path:"/config/modelProvider",category:""},{icon:og,title:"",description:"",path:"/config/model",category:""},{icon:Bu,title:"",description:"",path:"/resource/emoji",category:""},{icon:cn,title:"",description:"",path:"/resource/expression",category:""},{icon:dg,title:"",description:"",path:"/resource/person",category:""},{icon:My,title:"",description:"",path:"/statistics",category:""},{icon:rn,title:"",description:"",path:"/plugins",category:""},{icon:Hu,title:"",description:"",path:"/logs",category:""},{icon:ai,title:"",description:"",path:"/settings",category:""}];function k2({open:n,onOpenChange:r}){const[c,d]=u.useState(""),[h,x]=u.useState(0),f=fa(),j=C2.filter(v=>v.title.toLowerCase().includes(c.toLowerCase())||v.description.toLowerCase().includes(c.toLowerCase())||v.category.toLowerCase().includes(c.toLowerCase()));u.useEffect(()=>{n&&(d(""),x(0))},[n]);const p=u.useCallback(v=>{f({to:v}),r(!1)},[f,r]),N=u.useCallback(v=>{v.key==="ArrowDown"?(v.preventDefault(),x(C=>(C+1)%j.length)):v.key==="ArrowUp"?(v.preventDefault(),x(C=>(C-1+j.length)%j.length)):v.key==="Enter"&&j[h]&&(v.preventDefault(),p(j[h].path))},[j,h,p]);return e.jsx(Jt,{open:n,onOpenChange:r,children:e.jsxs($t,{className:"max-w-2xl p-0 gap-0",children:[e.jsxs(Qt,{className:"px-4 pt-4 pb-0",children:[e.jsx(Yt,{className:"sr-only",children:""}),e.jsxs("div",{className:"relative",children:[e.jsx(zs,{className:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 text-muted-foreground"}),e.jsx(ce,{value:c,onChange:v=>{d(v.target.value),x(0)},onKeyDown:N,placeholder:"...",className:"h-12 pl-11 text-base border-0 focus-visible:ring-0 shadow-none",autoFocus:!0})]})]}),e.jsx("div",{className:"border-t",children:e.jsx(st,{className:"h-[400px]",children:j.length>0?e.jsx("div",{className:"p-2",children:j.map((v,C)=>{const S=v.icon;return e.jsxs("button",{onClick:()=>p(v.path),onMouseEnter:()=>x(C),className:Q("w-full flex items-center gap-3 px-3 py-2.5 rounded-md text-left transition-colors",C===h?"bg-accent text-accent-foreground":"hover:bg-accent/50"),children:[e.jsx(S,{className:"h-5 w-5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-sm",children:v.title}),e.jsx("div",{className:"text-xs text-muted-foreground truncate",children:v.description})]}),e.jsx("div",{className:"text-xs text-muted-foreground px-2 py-1 bg-muted rounded",children:v.category})]},v.path)})}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx(zs,{className:"h-12 w-12 text-muted-foreground/50 mb-4"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:c?"":""})]})})}),e.jsx("div",{className:"border-t px-4 py-3 flex items-center justify-between text-xs text-muted-foreground",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("kbd",{className:"px-1.5 py-0.5 bg-muted rounded border",children:""}),e.jsx("kbd",{className:"px-1.5 py-0.5 bg-muted rounded border",children:""}),""]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("kbd",{className:"px-1.5 py-0.5 bg-muted rounded border",children:"Enter"}),""]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("kbd",{className:"px-1.5 py-0.5 bg-muted rounded border",children:"Esc"}),""]})]})})]})})}const T2=ey,E2=ty,z2=sy,Lg=u.forwardRef(({className:n,sideOffset:r=4,...c},d)=>e.jsx(Wb,{children:e.jsx(Zp,{ref:d,sideOffset:r,className:Q("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",n),...c})}));Lg.displayName=Zp.displayName;function A2({children:n}){const{checking:r}=w2(),[c,d]=u.useState(!0),[h,x]=u.useState(!1),[f,j]=u.useState(!1),{theme:p,setTheme:N}=Gu(),v=sb();if(u.useEffect(()=>{const F=B=>{(B.metaKey||B.ctrlKey)&&B.key==="k"&&(B.preventDefault(),j(!0))};return window.addEventListener("keydown",F),()=>window.removeEventListener("keydown",F)},[]),r)return e.jsx("div",{className:"flex h-screen items-center justify-center bg-background",children:e.jsx("div",{className:"text-muted-foreground",children:"..."})});const C=[{title:"",items:[{icon:to,label:"",path:"/"}]},{title:"",items:[{icon:Da,label:"",path:"/config/bot"},{icon:cg,label:"AI",path:"/config/modelProvider",tourId:"sidebar-model-provider"},{icon:og,label:"",path:"/config/model",tourId:"sidebar-model-management"},{icon:$f,label:"",path:"/config/adapter"}]},{title:"",items:[{icon:Bu,label:"",path:"/resource/emoji"},{icon:cn,label:"",path:"/resource/expression"},{icon:dg,label:"",path:"/resource/person"},{icon:rg,label:"",path:"/resource/knowledge-graph"}]},{title:"",items:[{icon:rn,label:"",path:"/plugins"},{icon:$f,label:"",path:"/plugin-config"},{icon:Hu,label:"",path:"/logs"},{icon:cn,label:"",path:"/chat"}]},{title:"",items:[{icon:ai,label:"",path:"/settings"}]}],w=p==="system"?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":p,L=async()=>{await t0()};return e.jsx(T2,{delayDuration:300,children:e.jsxs("div",{className:"flex h-screen overflow-hidden",children:[e.jsxs("aside",{className:Q("fixed inset-y-0 left-0 z-50 flex flex-col border-r bg-card transition-all duration-300 lg:relative lg:z-0","w-64 lg:w-auto",c?"lg:w-64":"lg:w-16",h?"translate-x-0":"-translate-x-full lg:translate-x-0"),children:[e.jsx("div",{className:"flex h-16 items-center border-b px-4",children:e.jsxs("div",{className:Q("relative flex items-center justify-center flex-1 transition-all overflow-hidden","lg:flex-1",!c&&"lg:flex-none lg:w-8"),children:[e.jsxs("div",{className:Q("flex items-baseline gap-2",!c&&"lg:hidden"),children:[e.jsx("span",{className:"font-bold text-xl text-primary-gradient whitespace-nowrap",children:"MaiBot WebUI"}),e.jsx("span",{className:"text-xs text-primary/60 whitespace-nowrap",children:HN()})]}),!c&&e.jsx("span",{className:"hidden lg:block font-bold text-primary-gradient text-2xl",children:"M"})]})}),e.jsx(st,{className:Q("flex-1 overflow-x-hidden",!c&&"lg:w-16"),children:e.jsx("nav",{className:Q("p-4",!c&&"lg:p-2 lg:w-16"),children:e.jsx("ul",{className:Q("space-y-6",!c&&"lg:space-y-3 lg:w-full"),children:C.map((F,B)=>e.jsxs("li",{children:[e.jsx("div",{className:Q("px-3 h-[1.25rem]","mb-2",!c&&"lg:mb-1 lg:invisible"),children:e.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground/60 whitespace-nowrap",children:F.title})}),!c&&B>0&&e.jsx("div",{className:"hidden lg:block mb-2 border-t border-border"}),e.jsx("ul",{className:"space-y-1",children:F.items.map(O=>{const K=v({to:O.path}),H=O.icon,z=e.jsxs(e.Fragment,{children:[K&&e.jsx("div",{className:"absolute left-0 top-1/2 h-8 w-1 -translate-y-1/2 rounded-r-full bg-primary transition-opacity duration-300"}),e.jsxs("div",{className:Q("flex items-center transition-all duration-300",c?"gap-3":"gap-3 lg:gap-0"),children:[e.jsx(H,{className:Q("h-5 w-5 flex-shrink-0",K&&"text-primary"),strokeWidth:2,fill:"none"}),e.jsx("span",{className:Q("text-sm font-medium whitespace-nowrap transition-all duration-300",K&&"font-semibold",c?"opacity-100 max-w-[200px]":"opacity-100 max-w-[200px] lg:opacity-0 lg:max-w-0 lg:overflow-hidden"),children:O.label})]})]});return e.jsx("li",{className:"relative",children:e.jsxs(E2,{children:[e.jsx(z2,{asChild:!0,children:e.jsx($c,{to:O.path,"data-tour":O.tourId,className:Q("relative flex items-center rounded-lg py-2 transition-all duration-300","hover:bg-accent hover:text-accent-foreground",K?"bg-accent text-foreground":"text-muted-foreground hover:text-foreground",c?"px-3":"px-3 lg:px-0 lg:justify-center lg:w-12 lg:mx-auto"),onClick:()=>x(!1),children:z})}),!c&&e.jsx(Lg,{side:"right",className:"hidden lg:block",children:e.jsx("p",{children:O.label})})]})},O.path)})})]},F.title))})})})]}),h&&e.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 lg:hidden",onClick:()=>x(!1)}),e.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[e.jsxs("header",{className:"flex h-16 items-center justify-between border-b bg-card/80 backdrop-blur-md px-4 sticky top-0 z-10",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>x(!h),className:"rounded-lg p-2 hover:bg-accent lg:hidden",children:e.jsx(Dy,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>d(!c),className:"hidden rounded-lg p-2 hover:bg-accent lg:block",title:c?"":"",children:e.jsx(dn,{className:Q("h-5 w-5 transition-transform",!c&&"rotate-180")})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>j(!0),className:"relative hidden md:flex items-center w-64 h-9 pl-9 pr-16 bg-background/50 border rounded-md hover:bg-accent/50 transition-colors text-left",children:[e.jsx(zs,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"..."}),e.jsxs(Rg,{size:"sm",className:"absolute right-2 top-1/2 -translate-y-1/2",children:[e.jsx("span",{className:"text-xs",children:""}),"K"]})]}),e.jsx(k2,{open:f,onOpenChange:j}),e.jsxs(b,{variant:"ghost",size:"sm",onClick:()=>window.open("https://docs.mai-mai.org","_blank"),className:"gap-2",title:"",children:[e.jsx(Oy,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:""})]}),e.jsx("button",{onClick:F=>{ON(w==="dark"?"light":"dark",N,F)},className:"rounded-lg p-2 hover:bg-accent",title:w==="dark"?"":"",children:w==="dark"?e.jsx(ag,{className:"h-5 w-5"}):e.jsx(lg,{className:"h-5 w-5"})}),e.jsx("div",{className:"h-6 w-px bg-border"}),e.jsxs(b,{variant:"ghost",size:"sm",onClick:L,className:"gap-2",title:"",children:[e.jsx(Ry,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:""})]})]})]}),e.jsx("main",{className:"flex-1 overflow-hidden bg-background",children:n})]})]})})}function M2(n){const r=n.split(`
`).slice(1),c=[];for(const d of r){const h=d.trim();if(!h.startsWith("at "))continue;const x=h.match(/at\s+(?:(.+?)\s+\()?(.+?):(\d+):(\d+)\)?$/);x?c.push({functionName:x[1]||"<anonymous>",fileName:x[2],lineNumber:x[3],columnNumber:x[4],raw:h}):c.push({functionName:"<unknown>",fileName:"",lineNumber:"",columnNumber:"",raw:h})}return c}function D2({error:n,errorInfo:r}){const[c,d]=u.useState(!0),[h,x]=u.useState(!1),[f,j]=u.useState(!1),p=n.stack?M2(n.stack):[],N=async()=>{const v=`
Error: ${n.name}
Message: ${n.message}

Stack Trace:
${n.stack||"No stack trace available"}

Component Stack:
${r?.componentStack||"No component stack available"}

URL: ${window.location.href}
User Agent: ${navigator.userAgent}
Time: ${new Date().toISOString()}
    `.trim();try{await navigator.clipboard.writeText(v),j(!0),setTimeout(()=>j(!1),2e3)}catch(C){console.error("Failed to copy:",C)}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs(cl,{variant:"destructive",className:"border-red-500/50 bg-red-500/10",children:[e.jsx(ya,{className:"h-4 w-4"}),e.jsxs(ol,{className:"font-mono text-sm",children:[e.jsxs("span",{className:"font-semibold",children:[n.name,":"]})," ",n.message]})]}),p.length>0&&e.jsxs(Ru,{open:c,onOpenChange:d,children:[e.jsx(Lu,{asChild:!0,children:e.jsxs(b,{variant:"ghost",className:"w-full justify-between p-3 h-auto",children:[e.jsxs("span",{className:"font-semibold text-sm flex items-center gap-2",children:[e.jsx(Ly,{className:"h-4 w-4"}),"Stack Trace (",p.length," frames)"]}),c?e.jsx(ur,{className:"h-4 w-4"}):e.jsx(Rl,{className:"h-4 w-4"})]})}),e.jsx(Uu,{children:e.jsx(st,{className:"h-[280px] rounded-md border bg-muted/30",children:e.jsx("div",{className:"p-3 space-y-1",children:p.map((v,C)=>e.jsx("div",{className:"font-mono text-xs p-2 rounded hover:bg-muted/50 transition-colors",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsxs("span",{className:"text-muted-foreground w-6 text-right flex-shrink-0",children:[C+1,"."]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("span",{className:"text-primary font-medium",children:v.functionName}),v.fileName&&e.jsxs("div",{className:"text-muted-foreground mt-0.5 break-all",children:[v.fileName,v.lineNumber&&e.jsxs("span",{className:"text-yellow-600 dark:text-yellow-400",children:[":",v.lineNumber,":",v.columnNumber]})]})]})]})},C))})})})]}),r?.componentStack&&e.jsxs(Ru,{open:h,onOpenChange:x,children:[e.jsx(Lu,{asChild:!0,children:e.jsxs(b,{variant:"ghost",className:"w-full justify-between p-3 h-auto",children:[e.jsxs("span",{className:"font-semibold text-sm flex items-center gap-2",children:[e.jsx(ya,{className:"h-4 w-4"}),"Component Stack"]}),h?e.jsx(ur,{className:"h-4 w-4"}):e.jsx(Rl,{className:"h-4 w-4"})]})}),e.jsx(Uu,{children:e.jsx(st,{className:"h-[200px] rounded-md border bg-muted/30",children:e.jsx("pre",{className:"p-3 font-mono text-xs whitespace-pre-wrap text-muted-foreground",children:r.componentStack})})})]}),e.jsx(b,{variant:"outline",size:"sm",onClick:N,className:"w-full",children:f?e.jsxs(e.Fragment,{children:[e.jsx(Na,{className:"mr-2 h-4 w-4 text-green-500"}),""]}):e.jsxs(e.Fragment,{children:[e.jsx(Jc,{className:"mr-2 h-4 w-4"}),""]})})]})}function Ug({error:n,errorInfo:r}){const c=()=>{window.location.href="/"},d=()=>{window.location.reload()};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:e.jsxs(Ye,{className:"w-full max-w-2xl shadow-lg",children:[e.jsxs(Nt,{className:"text-center pb-2",children:[e.jsx("div",{className:"mx-auto flex h-16 w-16 items-center justify-center rounded-full bg-red-100 dark:bg-red-900/30 mb-4",children:e.jsx(ya,{className:"h-8 w-8 text-red-600 dark:text-red-400"})}),e.jsx(wt,{className:"text-2xl font-bold",children:""}),e.jsx(ns,{className:"text-base mt-2",children:""})]}),e.jsxs(kt,{className:"space-y-4",children:[e.jsx(D2,{error:n,errorInfo:r}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 pt-2",children:[e.jsxs(b,{onClick:d,className:"flex-1",children:[e.jsx(ws,{className:"mr-2 h-4 w-4"}),""]}),e.jsxs(b,{onClick:c,variant:"outline",className:"flex-1",children:[e.jsx(to,{className:"mr-2 h-4 w-4"}),""]})]}),e.jsx("p",{className:"text-xs text-center text-muted-foreground pt-2",children:""})]})]})})}class O2 extends u.Component{constructor(r){super(r),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,c){console.error("ErrorBoundary caught an error:",r,c),this.setState({errorInfo:c})}handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};render(){return this.state.hasError&&this.state.error?this.props.fallback?this.props.fallback:e.jsx(Ug,{error:this.state.error,errorInfo:this.state.errorInfo}):this.props.children}}function Bg({error:n}){return e.jsx(Ug,{error:n,errorInfo:null})}const wr=ab({component:()=>e.jsxs(e.Fragment,{children:[e.jsx(pp,{}),!1]}),beforeLoad:()=>{if(window.location.pathname==="/"&&!_2())throw nb({to:"/auth"})}}),R2=fs({getParentRoute:()=>wr,path:"/auth",component:s0}),L2=fs({getParentRoute:()=>wr,path:"/setup",component:v0}),ks=fs({getParentRoute:()=>wr,id:"protected",component:()=>e.jsx(A2,{children:e.jsx(pp,{})}),errorComponent:({error:n})=>e.jsx(Bg,{error:n})}),U2=fs({getParentRoute:()=>ks,path:"/",component:MN}),B2=fs({getParentRoute:()=>ks,path:"/config/bot",component:M0}),H2=fs({getParentRoute:()=>ks,path:"/config/modelProvider",component:sw}),q2=fs({getParentRoute:()=>ks,path:"/config/model",component:iw}),G2=fs({getParentRoute:()=>ks,path:"/config/adapter",component:cw}),V2=fs({getParentRoute:()=>ks,path:"/resource/emoji",component:Mw}),F2=fs({getParentRoute:()=>ks,path:"/resource/expression",component:$w}),$2=fs({getParentRoute:()=>ks,path:"/resource/person",component:t1}),Q2=fs({getParentRoute:()=>ks,path:"/resource/knowledge-graph",component:d1}),Y2=fs({getParentRoute:()=>ks,path:"/logs",component:G1}),X2=fs({getParentRoute:()=>ks,path:"/chat",component:N2}),K2=fs({getParentRoute:()=>ks,path:"/plugins",component:u2}),Z2=fs({getParentRoute:()=>ks,path:"/plugin-config",component:x2}),J2=fs({getParentRoute:()=>ks,path:"/plugin-mirrors",component:f2}),I2=fs({getParentRoute:()=>ks,path:"/settings",component:ZN}),P2=fs({getParentRoute:()=>wr,path:"*",component:wg}),W2=wr.addChildren([R2,L2,ks.addChildren([U2,B2,H2,q2,G2,V2,F2,$2,Q2,K2,Z2,J2,Y2,X2,I2]),P2]),e_=lb({routeTree:W2,defaultNotFoundComponent:wg,defaultErrorComponent:({error:n})=>e.jsx(Bg,{error:n})});function t_({children:n,defaultTheme:r="system",storageKey:c="ui-theme",...d}){const[h,x]=u.useState(()=>localStorage.getItem(c)||r);u.useEffect(()=>{const j=window.document.documentElement;if(j.classList.remove("light","dark"),h==="system"){const p=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";j.classList.add(p);return}j.classList.add(h)},[h]),u.useEffect(()=>{const j=localStorage.getItem("accent-color");if(j){const p=document.documentElement,v={blue:{hsl:"221.2 83.2% 53.3%",darkHsl:"217.2 91.2% 59.8%",gradient:null},purple:{hsl:"271 91% 65%",darkHsl:"270 95% 75%",gradient:null},green:{hsl:"142 71% 45%",darkHsl:"142 76% 36%",gradient:null},orange:{hsl:"25 95% 53%",darkHsl:"20 90% 48%",gradient:null},pink:{hsl:"330 81% 60%",darkHsl:"330 85% 70%",gradient:null},red:{hsl:"0 84% 60%",darkHsl:"0 90% 70%",gradient:null},"gradient-sunset":{hsl:"15 95% 60%",darkHsl:"15 95% 65%",gradient:"linear-gradient(135deg, hsl(25 95% 53%) 0%, hsl(330 81% 60%) 100%)"},"gradient-ocean":{hsl:"200 90% 55%",darkHsl:"200 90% 60%",gradient:"linear-gradient(135deg, hsl(221.2 83.2% 53.3%) 0%, hsl(189 94% 43%) 100%)"},"gradient-forest":{hsl:"150 70% 45%",darkHsl:"150 75% 40%",gradient:"linear-gradient(135deg, hsl(142 71% 45%) 0%, hsl(158 64% 52%) 100%)"},"gradient-aurora":{hsl:"310 85% 65%",darkHsl:"310 90% 70%",gradient:"linear-gradient(135deg, hsl(271 91% 65%) 0%, hsl(330 81% 60%) 100%)"},"gradient-fire":{hsl:"15 95% 55%",darkHsl:"15 95% 60%",gradient:"linear-gradient(135deg, hsl(0 84% 60%) 0%, hsl(25 95% 53%) 100%)"},"gradient-twilight":{hsl:"250 90% 60%",darkHsl:"250 95% 65%",gradient:"linear-gradient(135deg, hsl(239 84% 67%) 0%, hsl(271 91% 65%) 100%)"}}[j];v&&(p.style.setProperty("--primary",v.hsl),v.gradient?(p.style.setProperty("--primary-gradient",v.gradient),p.classList.add("has-gradient")):(p.style.removeProperty("--primary-gradient"),p.classList.remove("has-gradient")))}},[]);const f={theme:h,setTheme:j=>{localStorage.setItem(c,j),x(j)}};return e.jsx(gg.Provider,{...d,value:f,children:n})}function s_({children:n,defaultEnabled:r=!0,defaultWavesEnabled:c=!0,storageKey:d="enable-animations",wavesStorageKey:h="enable-waves-background"}){const[x,f]=u.useState(()=>{const v=localStorage.getItem(d);return v!==null?v==="true":r}),[j,p]=u.useState(()=>{const v=localStorage.getItem(h);return v!==null?v==="true":c});u.useEffect(()=>{const v=document.documentElement;x?v.classList.remove("no-animations"):v.classList.add("no-animations"),localStorage.setItem(d,String(x))},[x,d]),u.useEffect(()=>{localStorage.setItem(h,String(j))},[j,h]);const N={enableAnimations:x,setEnableAnimations:f,enableWavesBackground:j,setEnableWavesBackground:p};return e.jsx(jg.Provider,{value:N,children:n})}const a_=ay,Hg=u.forwardRef(({className:n,...r},c)=>e.jsx(Jp,{ref:c,className:Q("fixed bottom-0 right-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:max-w-[420px] gap-2",n),...r}));Hg.displayName=Jp.displayName;const l_=si("group pointer-events-auto relative flex w-full items-center justify-between space-x-2 overflow-hidden rounded-md border p-4 pr-6 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-slide-in-from-right data-[state=open]:animate-fade-in data-[state=closed]:animate-slide-out-to-right data-[state=closed]:animate-fade-out data-[swipe=end]:animate-slide-out-to-right",{variants:{variant:{default:"border bg-primary/5 text-foreground backdrop-blur-sm",destructive:"destructive group border-destructive bg-destructive/10 text-destructive-foreground backdrop-blur-sm"}},defaultVariants:{variant:"default"}}),qg=u.forwardRef(({className:n,variant:r,...c},d)=>e.jsx(Ip,{ref:d,className:Q(l_({variant:r}),n),...c}));qg.displayName=Ip.displayName;const n_=u.forwardRef(({className:n,...r},c)=>e.jsx(Pp,{ref:c,className:Q("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium transition-colors hover:bg-secondary focus:outline-none focus:ring-1 focus:ring-ring disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...r}));n_.displayName=Pp.displayName;const Gg=u.forwardRef(({className:n,...r},c)=>e.jsx(Wp,{ref:c,className:Q("absolute right-1 top-1 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-1 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...r,children:e.jsx(on,{className:"h-4 w-4"})}));Gg.displayName=Wp.displayName;const Vg=u.forwardRef(({className:n,...r},c)=>e.jsx(eg,{ref:c,className:Q("text-sm font-semibold [&+div]:text-xs",n),...r}));Vg.displayName=eg.displayName;const Fg=u.forwardRef(({className:n,...r},c)=>e.jsx(tg,{ref:c,className:Q("text-sm opacity-90",n),...r}));Fg.displayName=tg.displayName;function i_(){const{toasts:n}=Xt();return e.jsxs(a_,{children:[n.map(function({id:r,title:c,description:d,action:h,...x}){return e.jsxs(qg,{...x,children:[e.jsxs("div",{className:"grid gap-1",children:[c&&e.jsx(Vg,{children:c}),d&&e.jsx(Fg,{children:d})]}),h,e.jsx(Gg,{})]},r)}),e.jsx(Hg,{})]})}yN.createRoot(document.getElementById("root")).render(e.jsx(u.StrictMode,{children:e.jsx(O2,{children:e.jsx(t_,{defaultTheme:"system",children:e.jsx(s_,{children:e.jsxs(I0,{children:[e.jsx(ib,{router:e_}),e.jsx(ew,{}),e.jsx(i_,{})]})})})})}));
