import{r as u,j as e,L as tr,e as Ta,R as Tt,b as Bb,f as Hb,g as qb,h as Gb,k as lt,l as $b,m as Fb,O as Sp,n as Vb}from"./router-Bz250laD.js";import{a as Qb,b as Ib,g as Yb}from"./react-vendor-BmxF9s7Q.js";import{N as Kb,c as Xb,O as dr,P as Uc,g as Cu}from"./utils-BXc2jIuz.js";import{L as Cp,T as kp,C as Tp,R as Jb,a as Ep,V as Pb,b as Zb,S as zp,c as Wb,d as Mp,I as eN,e as Ap,f as sN,g as Dp,h as tN,i as aN,j as lN,O as Op,P as nN,k as Rp,l as Lp,D as Up,A as Bp,m as Hp,n as rN,o as iN,p as qp,q as cN,r as Gp,s as oN,t as dN,u as uN,v as mN,w as xN,x as $p,y as Fp,F as Vp,z as Qp,B as hN,E as fN}from"./radix-extra-DDK-u9dm.js";import{R as pN,T as gN,L as jN,g as vN,C as Bc,X as Hc,Y as ni,h as bN,B as ku,j as qc,P as NN,k as yN,l as wN}from"./charts-DbiuC1q1.js";import{S as _N,G as Ip,O as Yp,o as SN,C as Kp,p as CN,T as Xp,D as Jp,R as kN,q as TN,H as Pp,I as EN,J as Zp,K as Wp,L as zN,M as eg,V as MN,N as sg,Q as tg,U as AN,X as DN,Y as ag,Z as ON,_ as RN,$ as lg,a0 as LN,e as UN,f as BN,c as ng,P as no,d as Yu,b as Gu,h as HN,l as qN,m as GN,a1 as $N,a2 as rg,a3 as FN,a4 as VN,a5 as QN,a6 as ig,a7 as cg,a8 as og,a9 as dg,aa as ug,ab as mg,ac as IN}from"./radix-core-9dEfQl-6.js";import{R as Ht,P as Ni,C as ua,a as qt,Z as xn,b as Jc,F as Oa,c as YN,S as ur,d as KN,M as Ql,A as XN,D as JN,e as Pc,f as rr,T as PN,X as hl,g as ZN,h as WN,I as Va,i as Ra,j as Wt,k as Zc,E as pi,l as Vt,m as xg,H as ey,n as ss,o as La,U as gi,p as hg,q as fg,L as Pf,K as pg,r as gg,s as sy,t as Ic,u as ut,v as ty,B as oi,w as Wc,x as Ku,y as ay,z as ly,G as Gt,J as ro,N as ir,O as ht,Q as fl,V as cr,W as Xu,Y as yi,_ as ny,$ as ry,a0 as hn,a1 as mr,a2 as pl,a3 as Ya,a4 as xr,a5 as Ju,a6 as iy,a7 as cy,a8 as oy,a9 as Vl,aa as dy,ab as jg,ac as Yc,ad as fn,ae as uy,af as or,ag as my,ah as $u,ai as Fu,aj as vg,ak as xy,al as hy,am as Zf,an as fy,ao as xl,ap as Tu,aq as Wf,ar as py,as as bg,at as Eu,au as gy,av as jy,aw as vy,ax as by,ay as Ny,az as Ng,aA as yg,aB as wg,aC as _g,aD as yy,aE as ep,aF as wy,aG as _y,aH as Sy,aI as Cy}from"./icons-LXi74TG3.js";import{S as ky,p as Ty,j as Ey,a as zy,E as sp,R as My,o as Ay}from"./codemirror-BEE0n9kQ.js";import{_ as ta,c as Dy,g as Sg,D as Oy,z as Gc}from"./misc-CKjrIrIJ.js";import{u as Ry,a as tp,D as Ly,c as Uy,S as By,h as Hy,b as qy,s as Gy,K as $y,P as Fy,d as Vy,C as Qy}from"./dnd-CHfCzWUK.js";import{D as Iy,U as Yy}from"./uppy-BMZiFQyG.js";import{M as Ky,r as Xy,a as Jy,b as Py}from"./markdown-kUhwkcQP.js";import{c as Zy,H as eo,P as so,u as Wy,d as e0,R as s0,B as t0,e as a0,C as l0,M as n0,f as r0}from"./reactflow-DLoXAt4c.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const m of document.querySelectorAll('link[rel="modulepreload"]'))d(m);new MutationObserver(m=>{for(const x of m)if(x.type==="childList")for(const f of x.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&d(f)}).observe(document,{childList:!0,subtree:!0});function i(m){const x={};return m.integrity&&(x.integrity=m.integrity),m.referrerPolicy&&(x.referrerPolicy=m.referrerPolicy),m.crossOrigin==="use-credentials"?x.credentials="include":m.crossOrigin==="anonymous"?x.credentials="omit":x.credentials="same-origin",x}function d(m){if(m.ep)return;m.ep=!0;const x=i(m);fetch(m.href,x)}})();var zu={exports:{}},ri={},Mu={exports:{}},Au={};var ap;function i0(){return ap||(ap=1,(function(n){function r(D,X){var J=D.length;D.push(X);e:for(;0<J;){var ce=J-1>>>1,T=D[ce];if(0<m(T,X))D[ce]=X,D[J]=T,J=ce;else break e}}function i(D){return D.length===0?null:D[0]}function d(D){if(D.length===0)return null;var X=D[0],J=D.pop();if(J!==X){D[0]=J;e:for(var ce=0,T=D.length,re=T>>>1;ce<re;){var he=2*(ce+1)-1,ke=D[he],Ce=he+1,ze=D[Ce];if(0>m(ke,J))Ce<T&&0>m(ze,ke)?(D[ce]=ze,D[Ce]=J,ce=Ce):(D[ce]=ke,D[he]=J,ce=he);else if(Ce<T&&0>m(ze,J))D[ce]=ze,D[Ce]=J,ce=Ce;else break e}}return X}function m(D,X){var J=D.sortIndex-X.sortIndex;return J!==0?J:D.id-X.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var x=performance;n.unstable_now=function(){return x.now()}}else{var f=Date,p=f.now();n.unstable_now=function(){return f.now()-p}}var g=[],b=[],j=1,y=null,N=3,C=!1,w=!1,L=!1,O=!1,U=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function z(D){for(var X=i(b);X!==null;){if(X.callback===null)d(b);else if(X.startTime<=D)d(b),X.sortIndex=X.expirationTime,r(g,X);else break;X=i(b)}}function V(D){if(L=!1,z(D),!w)if(i(g)!==null)w=!0,$||($=!0,je());else{var X=i(b);X!==null&&Ne(V,X.startTime-D)}}var $=!1,k=-1,M=5,ee=-1;function ge(){return O?!0:!(n.unstable_now()-ee<M)}function ve(){if(O=!1,$){var D=n.unstable_now();ee=D;var X=!0;try{e:{w=!1,L&&(L=!1,F(k),k=-1),C=!0;var J=N;try{s:{for(z(D),y=i(g);y!==null&&!(y.expirationTime>D&&ge());){var ce=y.callback;if(typeof ce=="function"){y.callback=null,N=y.priorityLevel;var T=ce(y.expirationTime<=D);if(D=n.unstable_now(),typeof T=="function"){y.callback=T,z(D),X=!0;break s}y===i(g)&&d(g),z(D)}else d(g);y=i(g)}if(y!==null)X=!0;else{var re=i(b);re!==null&&Ne(V,re.startTime-D),X=!1}}break e}finally{y=null,N=J,C=!1}X=void 0}}finally{X?je():$=!1}}}var je;if(typeof R=="function")je=function(){R(ve)};else if(typeof MessageChannel<"u"){var be=new MessageChannel,ye=be.port2;be.port1.onmessage=ve,je=function(){ye.postMessage(null)}}else je=function(){U(ve,0)};function Ne(D,X){k=U(function(){D(n.unstable_now())},X)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(D){D.callback=null},n.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<D?Math.floor(1e3/D):5},n.unstable_getCurrentPriorityLevel=function(){return N},n.unstable_next=function(D){switch(N){case 1:case 2:case 3:var X=3;break;default:X=N}var J=N;N=X;try{return D()}finally{N=J}},n.unstable_requestPaint=function(){O=!0},n.unstable_runWithPriority=function(D,X){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var J=N;N=D;try{return X()}finally{N=J}},n.unstable_scheduleCallback=function(D,X,J){var ce=n.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?ce+J:ce):J=ce,D){case 1:var T=-1;break;case 2:T=250;break;case 5:T=1073741823;break;case 4:T=1e4;break;default:T=5e3}return T=J+T,D={id:j++,callback:X,priorityLevel:D,startTime:J,expirationTime:T,sortIndex:-1},J>ce?(D.sortIndex=J,r(b,D),i(g)===null&&D===i(b)&&(L?(F(k),k=-1):L=!0,Ne(V,J-ce))):(D.sortIndex=T,r(g,D),w||C||(w=!0,$||($=!0,je()))),D},n.unstable_shouldYield=ge,n.unstable_wrapCallback=function(D){var X=N;return function(){var J=N;N=X;try{return D.apply(this,arguments)}finally{N=J}}}})(Au)),Au}var lp;function c0(){return lp||(lp=1,Mu.exports=i0()),Mu.exports}var np;function o0(){if(np)return ri;np=1;var n=c0(),r=Qb(),i=Ib();function d(s){var t="https://react.dev/errors/"+s;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+s+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function m(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function x(s){var t=s,a=s;if(s.alternate)for(;t.return;)t=t.return;else{s=t;do t=s,(t.flags&4098)!==0&&(a=t.return),s=t.return;while(s)}return t.tag===3?a:null}function f(s){if(s.tag===13){var t=s.memoizedState;if(t===null&&(s=s.alternate,s!==null&&(t=s.memoizedState)),t!==null)return t.dehydrated}return null}function p(s){if(s.tag===31){var t=s.memoizedState;if(t===null&&(s=s.alternate,s!==null&&(t=s.memoizedState)),t!==null)return t.dehydrated}return null}function g(s){if(x(s)!==s)throw Error(d(188))}function b(s){var t=s.alternate;if(!t){if(t=x(s),t===null)throw Error(d(188));return t!==s?null:s}for(var a=s,l=t;;){var c=a.return;if(c===null)break;var o=c.alternate;if(o===null){if(l=c.return,l!==null){a=l;continue}break}if(c.child===o.child){for(o=c.child;o;){if(o===a)return g(c),s;if(o===l)return g(c),t;o=o.sibling}throw Error(d(188))}if(a.return!==l.return)a=c,l=o;else{for(var h=!1,v=c.child;v;){if(v===a){h=!0,a=c,l=o;break}if(v===l){h=!0,l=c,a=o;break}v=v.sibling}if(!h){for(v=o.child;v;){if(v===a){h=!0,a=o,l=c;break}if(v===l){h=!0,l=o,a=c;break}v=v.sibling}if(!h)throw Error(d(189))}}if(a.alternate!==l)throw Error(d(190))}if(a.tag!==3)throw Error(d(188));return a.stateNode.current===a?s:t}function j(s){var t=s.tag;if(t===5||t===26||t===27||t===6)return s;for(s=s.child;s!==null;){if(t=j(s),t!==null)return t;s=s.sibling}return null}var y=Object.assign,N=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),F=Symbol.for("react.consumer"),R=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),ee=Symbol.for("react.activity"),ge=Symbol.for("react.memo_cache_sentinel"),ve=Symbol.iterator;function je(s){return s===null||typeof s!="object"?null:(s=ve&&s[ve]||s["@@iterator"],typeof s=="function"?s:null)}var be=Symbol.for("react.client.reference");function ye(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===be?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case L:return"Fragment";case U:return"Profiler";case O:return"StrictMode";case V:return"Suspense";case $:return"SuspenseList";case ee:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case w:return"Portal";case R:return s.displayName||"Context";case F:return(s._context.displayName||"Context")+".Consumer";case z:var t=s.render;return s=s.displayName,s||(s=t.displayName||t.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case k:return t=s.displayName||null,t!==null?t:ye(s.type)||"Memo";case M:t=s._payload,s=s._init;try{return ye(s(t))}catch{}}return null}var Ne=Array.isArray,D=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J={pending:!1,data:null,method:null,action:null},ce=[],T=-1;function re(s){return{current:s}}function he(s){0>T||(s.current=ce[T],ce[T]=null,T--)}function ke(s,t){T++,ce[T]=s.current,s.current=t}var Ce=re(null),ze=re(null),fe=re(null),te=re(null);function ae(s,t){switch(ke(fe,t),ke(ze,s),ke(Ce,null),t.nodeType){case 9:case 11:s=(s=t.documentElement)&&(s=s.namespaceURI)?bf(s):0;break;default:if(s=t.tagName,t=t.namespaceURI)t=bf(t),s=Nf(t,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}he(Ce),ke(Ce,s)}function q(){he(Ce),he(ze),he(fe)}function K(s){s.memoizedState!==null&&ke(te,s);var t=Ce.current,a=Nf(t,s.type);t!==a&&(ke(ze,s),ke(Ce,a))}function Me(s){ze.current===s&&(he(Ce),he(ze)),te.current===s&&(he(te),si._currentValue=J)}var We,E;function xe(s){if(We===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);We=t&&t[1]||"",E=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+We+s+E}var Ke=!1;function we(s,t){if(!s||Ke)return"";Ke=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(t){var me=function(){throw Error()};if(Object.defineProperty(me.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(me,[])}catch(ne){var W=ne}Reflect.construct(s,[],me)}else{try{me.call()}catch(ne){W=ne}s.call(me.prototype)}}else{try{throw Error()}catch(ne){W=ne}(me=s())&&typeof me.catch=="function"&&me.catch(function(){})}}catch(ne){if(ne&&W&&typeof ne.stack=="string")return[ne.stack,W.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var o=l.DetermineComponentFrameRoot(),h=o[0],v=o[1];if(h&&v){var A=h.split(`
`),Z=v.split(`
`);for(c=l=0;l<A.length&&!A[l].includes("DetermineComponentFrameRoot");)l++;for(;c<Z.length&&!Z[c].includes("DetermineComponentFrameRoot");)c++;if(l===A.length||c===Z.length)for(l=A.length-1,c=Z.length-1;1<=l&&0<=c&&A[l]!==Z[c];)c--;for(;1<=l&&0<=c;l--,c--)if(A[l]!==Z[c]){if(l!==1||c!==1)do if(l--,c--,0>c||A[l]!==Z[c]){var oe=`
`+A[l].replace(" at new "," at ");return s.displayName&&oe.includes("<anonymous>")&&(oe=oe.replace("<anonymous>",s.displayName)),oe}while(1<=l&&0<=c);break}}}finally{Ke=!1,Error.prepareStackTrace=a}return(a=s?s.displayName||s.name:"")?xe(a):""}function Q(s,t){switch(s.tag){case 26:case 27:case 5:return xe(s.type);case 16:return xe("Lazy");case 13:return s.child!==t&&t!==null?xe("Suspense Fallback"):xe("Suspense");case 19:return xe("SuspenseList");case 0:case 15:return we(s.type,!1);case 11:return we(s.type.render,!1);case 1:return we(s.type,!0);case 31:return xe("Activity");default:return""}}function _e(s){try{var t="",a=null;do t+=Q(s,a),a=s,s=s.return;while(s);return t}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Re=Object.prototype.hasOwnProperty,Os=n.unstable_scheduleCallback,Ts=n.unstable_cancelCallback,gt=n.unstable_shouldYield,gs=n.unstable_requestPaint,Is=n.unstable_now,Y=n.unstable_getCurrentPriorityLevel,Ge=n.unstable_ImmediatePriority,Oe=n.unstable_UserBlockingPriority,Xe=n.unstable_NormalPriority,Gs=n.unstable_LowPriority,Je=n.unstable_IdlePriority,Zs=n.log,Se=n.unstable_setDisableYieldValue,Es=null,Ae=null;function ws(s){if(typeof Zs=="function"&&Se(s),Ae&&typeof Ae.setStrictMode=="function")try{Ae.setStrictMode(Es,s)}catch{}}var _s=Math.clz32?Math.clz32:jt,Et=Math.log,Ks=Math.LN2;function jt(s){return s>>>=0,s===0?32:31-(Et(s)/Ks|0)|0}var Xs=256,nt=262144,jl=4194304;function xa(s){var t=s&42;if(t!==0)return t;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function vt(s,t,a){var l=s.pendingLanes;if(l===0)return 0;var c=0,o=s.suspendedLanes,h=s.pingedLanes;s=s.warmLanes;var v=l&134217727;return v!==0?(l=v&~o,l!==0?c=xa(l):(h&=v,h!==0?c=xa(h):a||(a=v&~s,a!==0&&(c=xa(a))))):(v=l&~o,v!==0?c=xa(v):h!==0?c=xa(h):a||(a=l&~s,a!==0&&(c=xa(a)))),c===0?0:t!==0&&t!==c&&(t&o)===0&&(o=c&-c,a=t&-t,o>=a||o===32&&(a&4194048)!==0)?t:c}function $t(s,t){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&t)===0}function le(s,t){switch(s){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ue(){var s=jl;return jl<<=1,(jl&62914560)===0&&(jl=4194304),s}function bs(s){for(var t=[],a=0;31>a;a++)t.push(s);return t}function zt(s,t){s.pendingLanes|=t,t!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Mt(s,t,a,l,c,o){var h=s.pendingLanes;s.pendingLanes=a,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=a,s.entangledLanes&=a,s.errorRecoveryDisabledLanes&=a,s.shellSuspendCounter=0;var v=s.entanglements,A=s.expirationTimes,Z=s.hiddenUpdates;for(a=h&~a;0<a;){var oe=31-_s(a),me=1<<oe;v[oe]=0,A[oe]=-1;var W=Z[oe];if(W!==null)for(Z[oe]=null,oe=0;oe<W.length;oe++){var ne=W[oe];ne!==null&&(ne.lane&=-536870913)}a&=~me}l!==0&&I(s,l,0),o!==0&&c===0&&s.tag!==0&&(s.suspendedLanes|=o&~(h&~t))}function I(s,t,a){s.pendingLanes|=t,s.suspendedLanes&=~t;var l=31-_s(t);s.entangledLanes|=t,s.entanglements[l]=s.entanglements[l]|1073741824|a&261930}function pe(s,t){var a=s.entangledLanes|=t;for(s=s.entanglements;a;){var l=31-_s(a),c=1<<l;c&t|s[l]&t&&(s[l]|=t),a&=~c}}function Ee(s,t){var a=t&-t;return a=(a&42)!==0?1:zs(a),(a&(s.suspendedLanes|t))!==0?0:a}function zs(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Ea(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Qt(){var s=X.p;return s!==0?s:(s=window.event,s===void 0?32:Vf(s.type))}function rt(s,t){var a=X.p;try{return X.p=s,t()}finally{X.p=a}}var St=Math.random().toString(36).slice(2),Ns="__reactFiber$"+St,Ct="__reactProps$"+St,vl="__reactContainer$"+St,go="__reactEvents$"+St,kj="__reactListeners$"+St,Tj="__reactHandles$"+St,rm="__reactResources$"+St,pr="__reactMarker$"+St;function jo(s){delete s[Ns],delete s[Ct],delete s[go],delete s[kj],delete s[Tj]}function vn(s){var t=s[Ns];if(t)return t;for(var a=s.parentNode;a;){if(t=a[vl]||a[Ns]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(s=Tf(s);s!==null;){if(a=s[Ns])return a;s=Tf(s)}return t}s=a,a=s.parentNode}return null}function bn(s){if(s=s[Ns]||s[vl]){var t=s.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return s}return null}function gr(s){var t=s.tag;if(t===5||t===26||t===27||t===6)return s.stateNode;throw Error(d(33))}function Nn(s){var t=s[rm];return t||(t=s[rm]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function At(s){s[pr]=!0}var im=new Set,cm={};function Kl(s,t){yn(s,t),yn(s+"Capture",t)}function yn(s,t){for(cm[s]=t,s=0;s<t.length;s++)im.add(t[s])}var Ej=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),om={},dm={};function zj(s){return Re.call(dm,s)?!0:Re.call(om,s)?!1:Ej.test(s)?dm[s]=!0:(om[s]=!0,!1)}function Si(s,t,a){if(zj(t))if(a===null)s.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":s.removeAttribute(t);return;case"boolean":var l=t.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){s.removeAttribute(t);return}}s.setAttribute(t,""+a)}}function Ci(s,t,a){if(a===null)s.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(t);return}s.setAttribute(t,""+a)}}function Ka(s,t,a,l){if(l===null)s.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttributeNS(t,a,""+l)}}function ha(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function um(s){var t=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Mj(s,t,a){var l=Object.getOwnPropertyDescriptor(s.constructor.prototype,t);if(!s.hasOwnProperty(t)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var c=l.get,o=l.set;return Object.defineProperty(s,t,{configurable:!0,get:function(){return c.call(this)},set:function(h){a=""+h,o.call(this,h)}}),Object.defineProperty(s,t,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(h){a=""+h},stopTracking:function(){s._valueTracker=null,delete s[t]}}}}function vo(s){if(!s._valueTracker){var t=um(s)?"checked":"value";s._valueTracker=Mj(s,t,""+s[t])}}function mm(s){if(!s)return!1;var t=s._valueTracker;if(!t)return!0;var a=t.getValue(),l="";return s&&(l=um(s)?s.checked?"true":"false":s.value),s=l,s!==a?(t.setValue(s),!0):!1}function ki(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Aj=/[\n"\\]/g;function fa(s){return s.replace(Aj,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function bo(s,t,a,l,c,o,h,v){s.name="",h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"?s.type=h:s.removeAttribute("type"),t!=null?h==="number"?(t===0&&s.value===""||s.value!=t)&&(s.value=""+ha(t)):s.value!==""+ha(t)&&(s.value=""+ha(t)):h!=="submit"&&h!=="reset"||s.removeAttribute("value"),t!=null?No(s,h,ha(t)):a!=null?No(s,h,ha(a)):l!=null&&s.removeAttribute("value"),c==null&&o!=null&&(s.defaultChecked=!!o),c!=null&&(s.checked=c&&typeof c!="function"&&typeof c!="symbol"),v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?s.name=""+ha(v):s.removeAttribute("name")}function xm(s,t,a,l,c,o,h,v){if(o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(s.type=o),t!=null||a!=null){if(!(o!=="submit"&&o!=="reset"||t!=null)){vo(s);return}a=a!=null?""+ha(a):"",t=t!=null?""+ha(t):a,v||t===s.value||(s.value=t),s.defaultValue=t}l=l??c,l=typeof l!="function"&&typeof l!="symbol"&&!!l,s.checked=v?s.checked:!!l,s.defaultChecked=!!l,h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(s.name=h),vo(s)}function No(s,t,a){t==="number"&&ki(s.ownerDocument)===s||s.defaultValue===""+a||(s.defaultValue=""+a)}function wn(s,t,a,l){if(s=s.options,t){t={};for(var c=0;c<a.length;c++)t["$"+a[c]]=!0;for(a=0;a<s.length;a++)c=t.hasOwnProperty("$"+s[a].value),s[a].selected!==c&&(s[a].selected=c),c&&l&&(s[a].defaultSelected=!0)}else{for(a=""+ha(a),t=null,c=0;c<s.length;c++){if(s[c].value===a){s[c].selected=!0,l&&(s[c].defaultSelected=!0);return}t!==null||s[c].disabled||(t=s[c])}t!==null&&(t.selected=!0)}}function hm(s,t,a){if(t!=null&&(t=""+ha(t),t!==s.value&&(s.value=t),a==null)){s.defaultValue!==t&&(s.defaultValue=t);return}s.defaultValue=a!=null?""+ha(a):""}function fm(s,t,a,l){if(t==null){if(l!=null){if(a!=null)throw Error(d(92));if(Ne(l)){if(1<l.length)throw Error(d(93));l=l[0]}a=l}a==null&&(a=""),t=a}a=ha(t),s.defaultValue=a,l=s.textContent,l===a&&l!==""&&l!==null&&(s.value=l),vo(s)}function _n(s,t){if(t){var a=s.firstChild;if(a&&a===s.lastChild&&a.nodeType===3){a.nodeValue=t;return}}s.textContent=t}var Dj=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function pm(s,t,a){var l=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?s.setProperty(t,""):t==="float"?s.cssFloat="":s[t]="":l?s.setProperty(t,a):typeof a!="number"||a===0||Dj.has(t)?t==="float"?s.cssFloat=a:s[t]=(""+a).trim():s[t]=a+"px"}function gm(s,t,a){if(t!=null&&typeof t!="object")throw Error(d(62));if(s=s.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||t!=null&&t.hasOwnProperty(l)||(l.indexOf("--")===0?s.setProperty(l,""):l==="float"?s.cssFloat="":s[l]="");for(var c in t)l=t[c],t.hasOwnProperty(c)&&a[c]!==l&&pm(s,c,l)}else for(var o in t)t.hasOwnProperty(o)&&pm(s,o,t[o])}function yo(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Oj=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Rj=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ti(s){return Rj.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Xa(){}var wo=null;function _o(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Sn=null,Cn=null;function jm(s){var t=bn(s);if(t&&(s=t.stateNode)){var a=s[Ct]||null;e:switch(s=t.stateNode,t.type){case"input":if(bo(s,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=s;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+fa(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var l=a[t];if(l!==s&&l.form===s.form){var c=l[Ct]||null;if(!c)throw Error(d(90));bo(l,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(t=0;t<a.length;t++)l=a[t],l.form===s.form&&mm(l)}break e;case"textarea":hm(s,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&wn(s,!!a.multiple,t,!1)}}}var So=!1;function vm(s,t,a){if(So)return s(t,a);So=!0;try{var l=s(t);return l}finally{if(So=!1,(Sn!==null||Cn!==null)&&(fc(),Sn&&(t=Sn,s=Cn,Cn=Sn=null,jm(t),s)))for(t=0;t<s.length;t++)jm(s[t])}}function jr(s,t){var a=s.stateNode;if(a===null)return null;var l=a[Ct]||null;if(l===null)return null;a=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(s=s.type,l=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!l;break e;default:s=!1}if(s)return null;if(a&&typeof a!="function")throw Error(d(231,t,typeof a));return a}var Ja=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Co=!1;if(Ja)try{var vr={};Object.defineProperty(vr,"passive",{get:function(){Co=!0}}),window.addEventListener("test",vr,vr),window.removeEventListener("test",vr,vr)}catch{Co=!1}var bl=null,ko=null,Ei=null;function bm(){if(Ei)return Ei;var s,t=ko,a=t.length,l,c="value"in bl?bl.value:bl.textContent,o=c.length;for(s=0;s<a&&t[s]===c[s];s++);var h=a-s;for(l=1;l<=h&&t[a-l]===c[o-l];l++);return Ei=c.slice(s,1<l?1-l:void 0)}function zi(s){var t=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&t===13&&(s=13)):s=t,s===10&&(s=13),32<=s||s===13?s:0}function Mi(){return!0}function Nm(){return!1}function It(s){function t(a,l,c,o,h){this._reactName=a,this._targetInst=c,this.type=l,this.nativeEvent=o,this.target=h,this.currentTarget=null;for(var v in s)s.hasOwnProperty(v)&&(a=s[v],this[v]=a?a(o):o[v]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Mi:Nm,this.isPropagationStopped=Nm,this}return y(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Mi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Mi)},persist:function(){},isPersistent:Mi}),t}var Xl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ai=It(Xl),br=y({},Xl,{view:0,detail:0}),Lj=It(br),To,Eo,Nr,Di=y({},br,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mo,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Nr&&(Nr&&s.type==="mousemove"?(To=s.screenX-Nr.screenX,Eo=s.screenY-Nr.screenY):Eo=To=0,Nr=s),To)},movementY:function(s){return"movementY"in s?s.movementY:Eo}}),ym=It(Di),Uj=y({},Di,{dataTransfer:0}),Bj=It(Uj),Hj=y({},br,{relatedTarget:0}),zo=It(Hj),qj=y({},Xl,{animationName:0,elapsedTime:0,pseudoElement:0}),Gj=It(qj),$j=y({},Xl,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Fj=It($j),Vj=y({},Xl,{data:0}),wm=It(Vj),Qj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ij={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yj={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Kj(s){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(s):(s=Yj[s])?!!t[s]:!1}function Mo(){return Kj}var Xj=y({},br,{key:function(s){if(s.key){var t=Qj[s.key]||s.key;if(t!=="Unidentified")return t}return s.type==="keypress"?(s=zi(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Ij[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mo,charCode:function(s){return s.type==="keypress"?zi(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?zi(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Jj=It(Xj),Pj=y({},Di,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_m=It(Pj),Zj=y({},br,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mo}),Wj=It(Zj),ev=y({},Xl,{propertyName:0,elapsedTime:0,pseudoElement:0}),sv=It(ev),tv=y({},Di,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),av=It(tv),lv=y({},Xl,{newState:0,oldState:0}),nv=It(lv),rv=[9,13,27,32],Ao=Ja&&"CompositionEvent"in window,yr=null;Ja&&"documentMode"in document&&(yr=document.documentMode);var iv=Ja&&"TextEvent"in window&&!yr,Sm=Ja&&(!Ao||yr&&8<yr&&11>=yr),Cm=" ",km=!1;function Tm(s,t){switch(s){case"keyup":return rv.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Em(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var kn=!1;function cv(s,t){switch(s){case"compositionend":return Em(t);case"keypress":return t.which!==32?null:(km=!0,Cm);case"textInput":return s=t.data,s===Cm&&km?null:s;default:return null}}function ov(s,t){if(kn)return s==="compositionend"||!Ao&&Tm(s,t)?(s=bm(),Ei=ko=bl=null,kn=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Sm&&t.locale!=="ko"?null:t.data;default:return null}}var dv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zm(s){var t=s&&s.nodeName&&s.nodeName.toLowerCase();return t==="input"?!!dv[s.type]:t==="textarea"}function Mm(s,t,a,l){Sn?Cn?Cn.push(l):Cn=[l]:Sn=l,t=yc(t,"onChange"),0<t.length&&(a=new Ai("onChange","change",null,a,l),s.push({event:a,listeners:t}))}var wr=null,_r=null;function uv(s){hf(s,0)}function Oi(s){var t=gr(s);if(mm(t))return s}function Am(s,t){if(s==="change")return t}var Dm=!1;if(Ja){var Do;if(Ja){var Oo="oninput"in document;if(!Oo){var Om=document.createElement("div");Om.setAttribute("oninput","return;"),Oo=typeof Om.oninput=="function"}Do=Oo}else Do=!1;Dm=Do&&(!document.documentMode||9<document.documentMode)}function Rm(){wr&&(wr.detachEvent("onpropertychange",Lm),_r=wr=null)}function Lm(s){if(s.propertyName==="value"&&Oi(_r)){var t=[];Mm(t,_r,s,_o(s)),vm(uv,t)}}function mv(s,t,a){s==="focusin"?(Rm(),wr=t,_r=a,wr.attachEvent("onpropertychange",Lm)):s==="focusout"&&Rm()}function xv(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Oi(_r)}function hv(s,t){if(s==="click")return Oi(t)}function fv(s,t){if(s==="input"||s==="change")return Oi(t)}function pv(s,t){return s===t&&(s!==0||1/s===1/t)||s!==s&&t!==t}var aa=typeof Object.is=="function"?Object.is:pv;function Sr(s,t){if(aa(s,t))return!0;if(typeof s!="object"||s===null||typeof t!="object"||t===null)return!1;var a=Object.keys(s),l=Object.keys(t);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var c=a[l];if(!Re.call(t,c)||!aa(s[c],t[c]))return!1}return!0}function Um(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Bm(s,t){var a=Um(s);s=0;for(var l;a;){if(a.nodeType===3){if(l=s+a.textContent.length,s<=t&&l>=t)return{node:a,offset:t-s};s=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Um(a)}}function Hm(s,t){return s&&t?s===t?!0:s&&s.nodeType===3?!1:t&&t.nodeType===3?Hm(s,t.parentNode):"contains"in s?s.contains(t):s.compareDocumentPosition?!!(s.compareDocumentPosition(t)&16):!1:!1}function qm(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var t=ki(s.document);t instanceof s.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)s=t.contentWindow;else break;t=ki(s.document)}return t}function Ro(s){var t=s&&s.nodeName&&s.nodeName.toLowerCase();return t&&(t==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||t==="textarea"||s.contentEditable==="true")}var gv=Ja&&"documentMode"in document&&11>=document.documentMode,Tn=null,Lo=null,Cr=null,Uo=!1;function Gm(s,t,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Uo||Tn==null||Tn!==ki(l)||(l=Tn,"selectionStart"in l&&Ro(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Cr&&Sr(Cr,l)||(Cr=l,l=yc(Lo,"onSelect"),0<l.length&&(t=new Ai("onSelect","select",null,t,a),s.push({event:t,listeners:l}),t.target=Tn)))}function Jl(s,t){var a={};return a[s.toLowerCase()]=t.toLowerCase(),a["Webkit"+s]="webkit"+t,a["Moz"+s]="moz"+t,a}var En={animationend:Jl("Animation","AnimationEnd"),animationiteration:Jl("Animation","AnimationIteration"),animationstart:Jl("Animation","AnimationStart"),transitionrun:Jl("Transition","TransitionRun"),transitionstart:Jl("Transition","TransitionStart"),transitioncancel:Jl("Transition","TransitionCancel"),transitionend:Jl("Transition","TransitionEnd")},Bo={},$m={};Ja&&($m=document.createElement("div").style,"AnimationEvent"in window||(delete En.animationend.animation,delete En.animationiteration.animation,delete En.animationstart.animation),"TransitionEvent"in window||delete En.transitionend.transition);function Pl(s){if(Bo[s])return Bo[s];if(!En[s])return s;var t=En[s],a;for(a in t)if(t.hasOwnProperty(a)&&a in $m)return Bo[s]=t[a];return s}var Fm=Pl("animationend"),Vm=Pl("animationiteration"),Qm=Pl("animationstart"),jv=Pl("transitionrun"),vv=Pl("transitionstart"),bv=Pl("transitioncancel"),Im=Pl("transitionend"),Ym=new Map,Ho="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ho.push("scrollEnd");function za(s,t){Ym.set(s,t),Kl(t,[s])}var Ri=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},pa=[],zn=0,qo=0;function Li(){for(var s=zn,t=qo=zn=0;t<s;){var a=pa[t];pa[t++]=null;var l=pa[t];pa[t++]=null;var c=pa[t];pa[t++]=null;var o=pa[t];if(pa[t++]=null,l!==null&&c!==null){var h=l.pending;h===null?c.next=c:(c.next=h.next,h.next=c),l.pending=c}o!==0&&Km(a,c,o)}}function Ui(s,t,a,l){pa[zn++]=s,pa[zn++]=t,pa[zn++]=a,pa[zn++]=l,qo|=l,s.lanes|=l,s=s.alternate,s!==null&&(s.lanes|=l)}function Go(s,t,a,l){return Ui(s,t,a,l),Bi(s)}function Zl(s,t){return Ui(s,null,null,t),Bi(s)}function Km(s,t,a){s.lanes|=a;var l=s.alternate;l!==null&&(l.lanes|=a);for(var c=!1,o=s.return;o!==null;)o.childLanes|=a,l=o.alternate,l!==null&&(l.childLanes|=a),o.tag===22&&(s=o.stateNode,s===null||s._visibility&1||(c=!0)),s=o,o=o.return;return s.tag===3?(o=s.stateNode,c&&t!==null&&(c=31-_s(a),s=o.hiddenUpdates,l=s[c],l===null?s[c]=[t]:l.push(t),t.lane=a|536870912),o):null}function Bi(s){if(50<Kr)throw Kr=0,Jd=null,Error(d(185));for(var t=s.return;t!==null;)s=t,t=s.return;return s.tag===3?s.stateNode:null}var Mn={};function Nv(s,t,a,l){this.tag=s,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function la(s,t,a,l){return new Nv(s,t,a,l)}function $o(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Pa(s,t){var a=s.alternate;return a===null?(a=la(s.tag,t,s.key,s.mode),a.elementType=s.elementType,a.type=s.type,a.stateNode=s.stateNode,a.alternate=s,s.alternate=a):(a.pendingProps=t,a.type=s.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=s.flags&65011712,a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,t=s.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=s.sibling,a.index=s.index,a.ref=s.ref,a.refCleanup=s.refCleanup,a}function Xm(s,t){s.flags&=65011714;var a=s.alternate;return a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),s}function Hi(s,t,a,l,c,o){var h=0;if(l=s,typeof s=="function")$o(s)&&(h=1);else if(typeof s=="string")h=Cb(s,a,Ce.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case ee:return s=la(31,a,t,c),s.elementType=ee,s.lanes=o,s;case L:return Wl(a.children,c,o,t);case O:h=8,c|=24;break;case U:return s=la(12,a,t,c|2),s.elementType=U,s.lanes=o,s;case V:return s=la(13,a,t,c),s.elementType=V,s.lanes=o,s;case $:return s=la(19,a,t,c),s.elementType=$,s.lanes=o,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case R:h=10;break e;case F:h=9;break e;case z:h=11;break e;case k:h=14;break e;case M:h=16,l=null;break e}h=29,a=Error(d(130,s===null?"null":typeof s,"")),l=null}return t=la(h,a,t,c),t.elementType=s,t.type=l,t.lanes=o,t}function Wl(s,t,a,l){return s=la(7,s,l,t),s.lanes=a,s}function Fo(s,t,a){return s=la(6,s,null,t),s.lanes=a,s}function Jm(s){var t=la(18,null,null,0);return t.stateNode=s,t}function Vo(s,t,a){return t=la(4,s.children!==null?s.children:[],s.key,t),t.lanes=a,t.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},t}var Pm=new WeakMap;function ga(s,t){if(typeof s=="object"&&s!==null){var a=Pm.get(s);return a!==void 0?a:(t={value:s,source:t,stack:_e(t)},Pm.set(s,t),t)}return{value:s,source:t,stack:_e(t)}}var An=[],Dn=0,qi=null,kr=0,ja=[],va=0,Nl=null,Ba=1,Ha="";function Za(s,t){An[Dn++]=kr,An[Dn++]=qi,qi=s,kr=t}function Zm(s,t,a){ja[va++]=Ba,ja[va++]=Ha,ja[va++]=Nl,Nl=s;var l=Ba;s=Ha;var c=32-_s(l)-1;l&=~(1<<c),a+=1;var o=32-_s(t)+c;if(30<o){var h=c-c%5;o=(l&(1<<h)-1).toString(32),l>>=h,c-=h,Ba=1<<32-_s(t)+c|a<<c|l,Ha=o+s}else Ba=1<<o|a<<c|l,Ha=s}function Qo(s){s.return!==null&&(Za(s,1),Zm(s,1,0))}function Io(s){for(;s===qi;)qi=An[--Dn],An[Dn]=null,kr=An[--Dn],An[Dn]=null;for(;s===Nl;)Nl=ja[--va],ja[va]=null,Ha=ja[--va],ja[va]=null,Ba=ja[--va],ja[va]=null}function Wm(s,t){ja[va++]=Ba,ja[va++]=Ha,ja[va++]=Nl,Ba=t.id,Ha=t.overflow,Nl=s}var Ot=null,Js=null,ys=!1,yl=null,ba=!1,Yo=Error(d(519));function wl(s){var t=Error(d(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Tr(ga(t,s)),Yo}function ex(s){var t=s.stateNode,a=s.type,l=s.memoizedProps;switch(t[Ns]=s,t[Ct]=l,a){case"dialog":fs("cancel",t),fs("close",t);break;case"iframe":case"object":case"embed":fs("load",t);break;case"video":case"audio":for(a=0;a<Jr.length;a++)fs(Jr[a],t);break;case"source":fs("error",t);break;case"img":case"image":case"link":fs("error",t),fs("load",t);break;case"details":fs("toggle",t);break;case"input":fs("invalid",t),xm(t,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":fs("invalid",t);break;case"textarea":fs("invalid",t),fm(t,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||l.suppressHydrationWarning===!0||jf(t.textContent,a)?(l.popover!=null&&(fs("beforetoggle",t),fs("toggle",t)),l.onScroll!=null&&fs("scroll",t),l.onScrollEnd!=null&&fs("scrollend",t),l.onClick!=null&&(t.onclick=Xa),t=!0):t=!1,t||wl(s,!0)}function sx(s){for(Ot=s.return;Ot;)switch(Ot.tag){case 5:case 31:case 13:ba=!1;return;case 27:case 3:ba=!0;return;default:Ot=Ot.return}}function On(s){if(s!==Ot)return!1;if(!ys)return sx(s),ys=!0,!1;var t=s.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=s.type,a=!(a!=="form"&&a!=="button")||uu(s.type,s.memoizedProps)),a=!a),a&&Js&&wl(s),sx(s),t===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(d(317));Js=kf(s)}else if(t===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(d(317));Js=kf(s)}else t===27?(t=Js,Ul(s.type)?(s=pu,pu=null,Js=s):Js=t):Js=Ot?ya(s.stateNode.nextSibling):null;return!0}function en(){Js=Ot=null,ys=!1}function Ko(){var s=yl;return s!==null&&(Jt===null?Jt=s:Jt.push.apply(Jt,s),yl=null),s}function Tr(s){yl===null?yl=[s]:yl.push(s)}var Xo=re(null),sn=null,Wa=null;function _l(s,t,a){ke(Xo,t._currentValue),t._currentValue=a}function el(s){s._currentValue=Xo.current,he(Xo)}function Jo(s,t,a){for(;s!==null;){var l=s.alternate;if((s.childLanes&t)!==t?(s.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),s===a)break;s=s.return}}function Po(s,t,a,l){var c=s.child;for(c!==null&&(c.return=s);c!==null;){var o=c.dependencies;if(o!==null){var h=c.child;o=o.firstContext;e:for(;o!==null;){var v=o;o=c;for(var A=0;A<t.length;A++)if(v.context===t[A]){o.lanes|=a,v=o.alternate,v!==null&&(v.lanes|=a),Jo(o.return,a,s),l||(h=null);break e}o=v.next}}else if(c.tag===18){if(h=c.return,h===null)throw Error(d(341));h.lanes|=a,o=h.alternate,o!==null&&(o.lanes|=a),Jo(h,a,s),h=null}else h=c.child;if(h!==null)h.return=c;else for(h=c;h!==null;){if(h===s){h=null;break}if(c=h.sibling,c!==null){c.return=h.return,h=c;break}h=h.return}c=h}}function Rn(s,t,a,l){s=null;for(var c=t,o=!1;c!==null;){if(!o){if((c.flags&524288)!==0)o=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var h=c.alternate;if(h===null)throw Error(d(387));if(h=h.memoizedProps,h!==null){var v=c.type;aa(c.pendingProps.value,h.value)||(s!==null?s.push(v):s=[v])}}else if(c===te.current){if(h=c.alternate,h===null)throw Error(d(387));h.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(s!==null?s.push(si):s=[si])}c=c.return}s!==null&&Po(t,s,a,l),t.flags|=262144}function Gi(s){for(s=s.firstContext;s!==null;){if(!aa(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function tn(s){sn=s,Wa=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Rt(s){return tx(sn,s)}function $i(s,t){return sn===null&&tn(s),tx(s,t)}function tx(s,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},Wa===null){if(s===null)throw Error(d(308));Wa=t,s.dependencies={lanes:0,firstContext:t},s.flags|=524288}else Wa=Wa.next=t;return a}var yv=typeof AbortController<"u"?AbortController:function(){var s=[],t=this.signal={aborted:!1,addEventListener:function(a,l){s.push(l)}};this.abort=function(){t.aborted=!0,s.forEach(function(a){return a()})}},wv=n.unstable_scheduleCallback,_v=n.unstable_NormalPriority,bt={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Zo(){return{controller:new yv,data:new Map,refCount:0}}function Er(s){s.refCount--,s.refCount===0&&wv(_v,function(){s.controller.abort()})}var zr=null,Wo=0,Ln=0,Un=null;function Sv(s,t){if(zr===null){var a=zr=[];Wo=0,Ln=tu(),Un={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Wo++,t.then(ax,ax),t}function ax(){if(--Wo===0&&zr!==null){Un!==null&&(Un.status="fulfilled");var s=zr;zr=null,Ln=0,Un=null;for(var t=0;t<s.length;t++)(0,s[t])()}}function Cv(s,t){var a=[],l={status:"pending",value:null,reason:null,then:function(c){a.push(c)}};return s.then(function(){l.status="fulfilled",l.value=t;for(var c=0;c<a.length;c++)(0,a[c])(t)},function(c){for(l.status="rejected",l.reason=c,c=0;c<a.length;c++)(0,a[c])(void 0)}),l}var lx=D.S;D.S=function(s,t){Gh=Is(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&Sv(s,t),lx!==null&&lx(s,t)};var an=re(null);function ed(){var s=an.current;return s!==null?s:$s.pooledCache}function Fi(s,t){t===null?ke(an,an.current):ke(an,t.pool)}function nx(){var s=ed();return s===null?null:{parent:bt._currentValue,pool:s}}var Bn=Error(d(460)),sd=Error(d(474)),Vi=Error(d(542)),Qi={then:function(){}};function rx(s){return s=s.status,s==="fulfilled"||s==="rejected"}function ix(s,t,a){switch(a=s[a],a===void 0?s.push(t):a!==t&&(t.then(Xa,Xa),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw s=t.reason,ox(s),s;default:if(typeof t.status=="string")t.then(Xa,Xa);else{if(s=$s,s!==null&&100<s.shellSuspendCounter)throw Error(d(482));s=t,s.status="pending",s.then(function(l){if(t.status==="pending"){var c=t;c.status="fulfilled",c.value=l}},function(l){if(t.status==="pending"){var c=t;c.status="rejected",c.reason=l}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw s=t.reason,ox(s),s}throw nn=t,Bn}}function ln(s){try{var t=s._init;return t(s._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(nn=a,Bn):a}}var nn=null;function cx(){if(nn===null)throw Error(d(459));var s=nn;return nn=null,s}function ox(s){if(s===Bn||s===Vi)throw Error(d(483))}var Hn=null,Mr=0;function Ii(s){var t=Mr;return Mr+=1,Hn===null&&(Hn=[]),ix(Hn,s,t)}function Ar(s,t){t=t.props.ref,s.ref=t!==void 0?t:null}function Yi(s,t){throw t.$$typeof===N?Error(d(525)):(s=Object.prototype.toString.call(t),Error(d(31,s==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":s)))}function dx(s){function t(G,B){if(s){var P=G.deletions;P===null?(G.deletions=[B],G.flags|=16):P.push(B)}}function a(G,B){if(!s)return null;for(;B!==null;)t(G,B),B=B.sibling;return null}function l(G){for(var B=new Map;G!==null;)G.key!==null?B.set(G.key,G):B.set(G.index,G),G=G.sibling;return B}function c(G,B){return G=Pa(G,B),G.index=0,G.sibling=null,G}function o(G,B,P){return G.index=P,s?(P=G.alternate,P!==null?(P=P.index,P<B?(G.flags|=67108866,B):P):(G.flags|=67108866,B)):(G.flags|=1048576,B)}function h(G){return s&&G.alternate===null&&(G.flags|=67108866),G}function v(G,B,P,de){return B===null||B.tag!==6?(B=Fo(P,G.mode,de),B.return=G,B):(B=c(B,P),B.return=G,B)}function A(G,B,P,de){var $e=P.type;return $e===L?oe(G,B,P.props.children,de,P.key):B!==null&&(B.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===M&&ln($e)===B.type)?(B=c(B,P.props),Ar(B,P),B.return=G,B):(B=Hi(P.type,P.key,P.props,null,G.mode,de),Ar(B,P),B.return=G,B)}function Z(G,B,P,de){return B===null||B.tag!==4||B.stateNode.containerInfo!==P.containerInfo||B.stateNode.implementation!==P.implementation?(B=Vo(P,G.mode,de),B.return=G,B):(B=c(B,P.children||[]),B.return=G,B)}function oe(G,B,P,de,$e){return B===null||B.tag!==7?(B=Wl(P,G.mode,de,$e),B.return=G,B):(B=c(B,P),B.return=G,B)}function me(G,B,P){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=Fo(""+B,G.mode,P),B.return=G,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case C:return P=Hi(B.type,B.key,B.props,null,G.mode,P),Ar(P,B),P.return=G,P;case w:return B=Vo(B,G.mode,P),B.return=G,B;case M:return B=ln(B),me(G,B,P)}if(Ne(B)||je(B))return B=Wl(B,G.mode,P,null),B.return=G,B;if(typeof B.then=="function")return me(G,Ii(B),P);if(B.$$typeof===R)return me(G,$i(G,B),P);Yi(G,B)}return null}function W(G,B,P,de){var $e=B!==null?B.key:null;if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return $e!==null?null:v(G,B,""+P,de);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case C:return P.key===$e?A(G,B,P,de):null;case w:return P.key===$e?Z(G,B,P,de):null;case M:return P=ln(P),W(G,B,P,de)}if(Ne(P)||je(P))return $e!==null?null:oe(G,B,P,de,null);if(typeof P.then=="function")return W(G,B,Ii(P),de);if(P.$$typeof===R)return W(G,B,$i(G,P),de);Yi(G,P)}return null}function ne(G,B,P,de,$e){if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return G=G.get(P)||null,v(B,G,""+de,$e);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case C:return G=G.get(de.key===null?P:de.key)||null,A(B,G,de,$e);case w:return G=G.get(de.key===null?P:de.key)||null,Z(B,G,de,$e);case M:return de=ln(de),ne(G,B,P,de,$e)}if(Ne(de)||je(de))return G=G.get(P)||null,oe(B,G,de,$e,null);if(typeof de.then=="function")return ne(G,B,P,Ii(de),$e);if(de.$$typeof===R)return ne(G,B,P,$i(B,de),$e);Yi(B,de)}return null}function De(G,B,P,de){for(var $e=null,Ss=null,Le=B,ts=B=0,vs=null;Le!==null&&ts<P.length;ts++){Le.index>ts?(vs=Le,Le=null):vs=Le.sibling;var Cs=W(G,Le,P[ts],de);if(Cs===null){Le===null&&(Le=vs);break}s&&Le&&Cs.alternate===null&&t(G,Le),B=o(Cs,B,ts),Ss===null?$e=Cs:Ss.sibling=Cs,Ss=Cs,Le=vs}if(ts===P.length)return a(G,Le),ys&&Za(G,ts),$e;if(Le===null){for(;ts<P.length;ts++)Le=me(G,P[ts],de),Le!==null&&(B=o(Le,B,ts),Ss===null?$e=Le:Ss.sibling=Le,Ss=Le);return ys&&Za(G,ts),$e}for(Le=l(Le);ts<P.length;ts++)vs=ne(Le,G,ts,P[ts],de),vs!==null&&(s&&vs.alternate!==null&&Le.delete(vs.key===null?ts:vs.key),B=o(vs,B,ts),Ss===null?$e=vs:Ss.sibling=vs,Ss=vs);return s&&Le.forEach(function($l){return t(G,$l)}),ys&&Za(G,ts),$e}function Ye(G,B,P,de){if(P==null)throw Error(d(151));for(var $e=null,Ss=null,Le=B,ts=B=0,vs=null,Cs=P.next();Le!==null&&!Cs.done;ts++,Cs=P.next()){Le.index>ts?(vs=Le,Le=null):vs=Le.sibling;var $l=W(G,Le,Cs.value,de);if($l===null){Le===null&&(Le=vs);break}s&&Le&&$l.alternate===null&&t(G,Le),B=o($l,B,ts),Ss===null?$e=$l:Ss.sibling=$l,Ss=$l,Le=vs}if(Cs.done)return a(G,Le),ys&&Za(G,ts),$e;if(Le===null){for(;!Cs.done;ts++,Cs=P.next())Cs=me(G,Cs.value,de),Cs!==null&&(B=o(Cs,B,ts),Ss===null?$e=Cs:Ss.sibling=Cs,Ss=Cs);return ys&&Za(G,ts),$e}for(Le=l(Le);!Cs.done;ts++,Cs=P.next())Cs=ne(Le,G,ts,Cs.value,de),Cs!==null&&(s&&Cs.alternate!==null&&Le.delete(Cs.key===null?ts:Cs.key),B=o(Cs,B,ts),Ss===null?$e=Cs:Ss.sibling=Cs,Ss=Cs);return s&&Le.forEach(function(Ub){return t(G,Ub)}),ys&&Za(G,ts),$e}function Us(G,B,P,de){if(typeof P=="object"&&P!==null&&P.type===L&&P.key===null&&(P=P.props.children),typeof P=="object"&&P!==null){switch(P.$$typeof){case C:e:{for(var $e=P.key;B!==null;){if(B.key===$e){if($e=P.type,$e===L){if(B.tag===7){a(G,B.sibling),de=c(B,P.props.children),de.return=G,G=de;break e}}else if(B.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===M&&ln($e)===B.type){a(G,B.sibling),de=c(B,P.props),Ar(de,P),de.return=G,G=de;break e}a(G,B);break}else t(G,B);B=B.sibling}P.type===L?(de=Wl(P.props.children,G.mode,de,P.key),de.return=G,G=de):(de=Hi(P.type,P.key,P.props,null,G.mode,de),Ar(de,P),de.return=G,G=de)}return h(G);case w:e:{for($e=P.key;B!==null;){if(B.key===$e)if(B.tag===4&&B.stateNode.containerInfo===P.containerInfo&&B.stateNode.implementation===P.implementation){a(G,B.sibling),de=c(B,P.children||[]),de.return=G,G=de;break e}else{a(G,B);break}else t(G,B);B=B.sibling}de=Vo(P,G.mode,de),de.return=G,G=de}return h(G);case M:return P=ln(P),Us(G,B,P,de)}if(Ne(P))return De(G,B,P,de);if(je(P)){if($e=je(P),typeof $e!="function")throw Error(d(150));return P=$e.call(P),Ye(G,B,P,de)}if(typeof P.then=="function")return Us(G,B,Ii(P),de);if(P.$$typeof===R)return Us(G,B,$i(G,P),de);Yi(G,P)}return typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint"?(P=""+P,B!==null&&B.tag===6?(a(G,B.sibling),de=c(B,P),de.return=G,G=de):(a(G,B),de=Fo(P,G.mode,de),de.return=G,G=de),h(G)):a(G,B)}return function(G,B,P,de){try{Mr=0;var $e=Us(G,B,P,de);return Hn=null,$e}catch(Le){if(Le===Bn||Le===Vi)throw Le;var Ss=la(29,Le,null,G.mode);return Ss.lanes=de,Ss.return=G,Ss}finally{}}}var rn=dx(!0),ux=dx(!1),Sl=!1;function td(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ad(s,t){s=s.updateQueue,t.updateQueue===s&&(t.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Cl(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function kl(s,t,a){var l=s.updateQueue;if(l===null)return null;if(l=l.shared,(ks&2)!==0){var c=l.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),l.pending=t,t=Bi(s),Km(s,null,a),t}return Ui(s,l,t,a),Bi(s)}function Dr(s,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var l=t.lanes;l&=s.pendingLanes,a|=l,t.lanes=a,pe(s,a)}}function ld(s,t){var a=s.updateQueue,l=s.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var c=null,o=null;if(a=a.firstBaseUpdate,a!==null){do{var h={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};o===null?c=o=h:o=o.next=h,a=a.next}while(a!==null);o===null?c=o=t:o=o.next=t}else c=o=t;a={baseState:l.baseState,firstBaseUpdate:c,lastBaseUpdate:o,shared:l.shared,callbacks:l.callbacks},s.updateQueue=a;return}s=a.lastBaseUpdate,s===null?a.firstBaseUpdate=t:s.next=t,a.lastBaseUpdate=t}var nd=!1;function Or(){if(nd){var s=Un;if(s!==null)throw s}}function Rr(s,t,a,l){nd=!1;var c=s.updateQueue;Sl=!1;var o=c.firstBaseUpdate,h=c.lastBaseUpdate,v=c.shared.pending;if(v!==null){c.shared.pending=null;var A=v,Z=A.next;A.next=null,h===null?o=Z:h.next=Z,h=A;var oe=s.alternate;oe!==null&&(oe=oe.updateQueue,v=oe.lastBaseUpdate,v!==h&&(v===null?oe.firstBaseUpdate=Z:v.next=Z,oe.lastBaseUpdate=A))}if(o!==null){var me=c.baseState;h=0,oe=Z=A=null,v=o;do{var W=v.lane&-536870913,ne=W!==v.lane;if(ne?(js&W)===W:(l&W)===W){W!==0&&W===Ln&&(nd=!0),oe!==null&&(oe=oe.next={lane:0,tag:v.tag,payload:v.payload,callback:null,next:null});e:{var De=s,Ye=v;W=t;var Us=a;switch(Ye.tag){case 1:if(De=Ye.payload,typeof De=="function"){me=De.call(Us,me,W);break e}me=De;break e;case 3:De.flags=De.flags&-65537|128;case 0:if(De=Ye.payload,W=typeof De=="function"?De.call(Us,me,W):De,W==null)break e;me=y({},me,W);break e;case 2:Sl=!0}}W=v.callback,W!==null&&(s.flags|=64,ne&&(s.flags|=8192),ne=c.callbacks,ne===null?c.callbacks=[W]:ne.push(W))}else ne={lane:W,tag:v.tag,payload:v.payload,callback:v.callback,next:null},oe===null?(Z=oe=ne,A=me):oe=oe.next=ne,h|=W;if(v=v.next,v===null){if(v=c.shared.pending,v===null)break;ne=v,v=ne.next,ne.next=null,c.lastBaseUpdate=ne,c.shared.pending=null}}while(!0);oe===null&&(A=me),c.baseState=A,c.firstBaseUpdate=Z,c.lastBaseUpdate=oe,o===null&&(c.shared.lanes=0),Al|=h,s.lanes=h,s.memoizedState=me}}function mx(s,t){if(typeof s!="function")throw Error(d(191,s));s.call(t)}function xx(s,t){var a=s.callbacks;if(a!==null)for(s.callbacks=null,s=0;s<a.length;s++)mx(a[s],t)}var qn=re(null),Ki=re(0);function hx(s,t){s=ol,ke(Ki,s),ke(qn,t),ol=s|t.baseLanes}function rd(){ke(Ki,ol),ke(qn,qn.current)}function id(){ol=Ki.current,he(qn),he(Ki)}var na=re(null),Na=null;function Tl(s){var t=s.alternate;ke(mt,mt.current&1),ke(na,s),Na===null&&(t===null||qn.current!==null||t.memoizedState!==null)&&(Na=s)}function cd(s){ke(mt,mt.current),ke(na,s),Na===null&&(Na=s)}function fx(s){s.tag===22?(ke(mt,mt.current),ke(na,s),Na===null&&(Na=s)):El()}function El(){ke(mt,mt.current),ke(na,na.current)}function ra(s){he(na),Na===s&&(Na=null),he(mt)}var mt=re(0);function Xi(s){for(var t=s;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||hu(a)||fu(a)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break;for(;t.sibling===null;){if(t.return===null||t.return===s)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var sl=0,es=null,Rs=null,Nt=null,Ji=!1,Gn=!1,cn=!1,Pi=0,Lr=0,$n=null,kv=0;function it(){throw Error(d(321))}function od(s,t){if(t===null)return!1;for(var a=0;a<t.length&&a<s.length;a++)if(!aa(s[a],t[a]))return!1;return!0}function dd(s,t,a,l,c,o){return sl=o,es=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,D.H=s===null||s.memoizedState===null?Zx:Sd,cn=!1,o=a(l,c),cn=!1,Gn&&(o=gx(t,a,l,c)),px(s),o}function px(s){D.H=Hr;var t=Rs!==null&&Rs.next!==null;if(sl=0,Nt=Rs=es=null,Ji=!1,Lr=0,$n=null,t)throw Error(d(300));s===null||yt||(s=s.dependencies,s!==null&&Gi(s)&&(yt=!0))}function gx(s,t,a,l){es=s;var c=0;do{if(Gn&&($n=null),Lr=0,Gn=!1,25<=c)throw Error(d(301));if(c+=1,Nt=Rs=null,s.updateQueue!=null){var o=s.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,o.memoCache!=null&&(o.memoCache.index=0)}D.H=Wx,o=t(a,l)}while(Gn);return o}function Tv(){var s=D.H,t=s.useState()[0];return t=typeof t.then=="function"?Ur(t):t,s=s.useState()[0],(Rs!==null?Rs.memoizedState:null)!==s&&(es.flags|=1024),t}function ud(){var s=Pi!==0;return Pi=0,s}function md(s,t,a){t.updateQueue=s.updateQueue,t.flags&=-2053,s.lanes&=~a}function xd(s){if(Ji){for(s=s.memoizedState;s!==null;){var t=s.queue;t!==null&&(t.pending=null),s=s.next}Ji=!1}sl=0,Nt=Rs=es=null,Gn=!1,Lr=Pi=0,$n=null}function Ft(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nt===null?es.memoizedState=Nt=s:Nt=Nt.next=s,Nt}function xt(){if(Rs===null){var s=es.alternate;s=s!==null?s.memoizedState:null}else s=Rs.next;var t=Nt===null?es.memoizedState:Nt.next;if(t!==null)Nt=t,Rs=s;else{if(s===null)throw es.alternate===null?Error(d(467)):Error(d(310));Rs=s,s={memoizedState:Rs.memoizedState,baseState:Rs.baseState,baseQueue:Rs.baseQueue,queue:Rs.queue,next:null},Nt===null?es.memoizedState=Nt=s:Nt=Nt.next=s}return Nt}function Zi(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ur(s){var t=Lr;return Lr+=1,$n===null&&($n=[]),s=ix($n,s,t),t=es,(Nt===null?t.memoizedState:Nt.next)===null&&(t=t.alternate,D.H=t===null||t.memoizedState===null?Zx:Sd),s}function Wi(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Ur(s);if(s.$$typeof===R)return Rt(s)}throw Error(d(438,String(s)))}function hd(s){var t=null,a=es.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var l=es.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(t={data:l.data.map(function(c){return c.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=Zi(),es.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(s),l=0;l<s;l++)a[l]=ge;return t.index++,a}function tl(s,t){return typeof t=="function"?t(s):t}function ec(s){var t=xt();return fd(t,Rs,s)}function fd(s,t,a){var l=s.queue;if(l===null)throw Error(d(311));l.lastRenderedReducer=a;var c=s.baseQueue,o=l.pending;if(o!==null){if(c!==null){var h=c.next;c.next=o.next,o.next=h}t.baseQueue=c=o,l.pending=null}if(o=s.baseState,c===null)s.memoizedState=o;else{t=c.next;var v=h=null,A=null,Z=t,oe=!1;do{var me=Z.lane&-536870913;if(me!==Z.lane?(js&me)===me:(sl&me)===me){var W=Z.revertLane;if(W===0)A!==null&&(A=A.next={lane:0,revertLane:0,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),me===Ln&&(oe=!0);else if((sl&W)===W){Z=Z.next,W===Ln&&(oe=!0);continue}else me={lane:0,revertLane:Z.revertLane,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},A===null?(v=A=me,h=o):A=A.next=me,es.lanes|=W,Al|=W;me=Z.action,cn&&a(o,me),o=Z.hasEagerState?Z.eagerState:a(o,me)}else W={lane:me,revertLane:Z.revertLane,gesture:Z.gesture,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},A===null?(v=A=W,h=o):A=A.next=W,es.lanes|=me,Al|=me;Z=Z.next}while(Z!==null&&Z!==t);if(A===null?h=o:A.next=v,!aa(o,s.memoizedState)&&(yt=!0,oe&&(a=Un,a!==null)))throw a;s.memoizedState=o,s.baseState=h,s.baseQueue=A,l.lastRenderedState=o}return c===null&&(l.lanes=0),[s.memoizedState,l.dispatch]}function pd(s){var t=xt(),a=t.queue;if(a===null)throw Error(d(311));a.lastRenderedReducer=s;var l=a.dispatch,c=a.pending,o=t.memoizedState;if(c!==null){a.pending=null;var h=c=c.next;do o=s(o,h.action),h=h.next;while(h!==c);aa(o,t.memoizedState)||(yt=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),a.lastRenderedState=o}return[o,l]}function jx(s,t,a){var l=es,c=xt(),o=ys;if(o){if(a===void 0)throw Error(d(407));a=a()}else a=t();var h=!aa((Rs||c).memoizedState,a);if(h&&(c.memoizedState=a,yt=!0),c=c.queue,vd(Nx.bind(null,l,c,s),[s]),c.getSnapshot!==t||h||Nt!==null&&Nt.memoizedState.tag&1){if(l.flags|=2048,Fn(9,{destroy:void 0},bx.bind(null,l,c,a,t),null),$s===null)throw Error(d(349));o||(sl&127)!==0||vx(l,t,a)}return a}function vx(s,t,a){s.flags|=16384,s={getSnapshot:t,value:a},t=es.updateQueue,t===null?(t=Zi(),es.updateQueue=t,t.stores=[s]):(a=t.stores,a===null?t.stores=[s]:a.push(s))}function bx(s,t,a,l){t.value=a,t.getSnapshot=l,yx(t)&&wx(s)}function Nx(s,t,a){return a(function(){yx(t)&&wx(s)})}function yx(s){var t=s.getSnapshot;s=s.value;try{var a=t();return!aa(s,a)}catch{return!0}}function wx(s){var t=Zl(s,2);t!==null&&Pt(t,s,2)}function gd(s){var t=Ft();if(typeof s=="function"){var a=s;if(s=a(),cn){ws(!0);try{a()}finally{ws(!1)}}}return t.memoizedState=t.baseState=s,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:tl,lastRenderedState:s},t}function _x(s,t,a,l){return s.baseState=a,fd(s,Rs,typeof l=="function"?l:tl)}function Ev(s,t,a,l,c){if(ac(s))throw Error(d(485));if(s=t.action,s!==null){var o={payload:c,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(h){o.listeners.push(h)}};D.T!==null?a(!0):o.isTransition=!1,l(o),a=t.pending,a===null?(o.next=t.pending=o,Sx(t,o)):(o.next=a.next,t.pending=a.next=o)}}function Sx(s,t){var a=t.action,l=t.payload,c=s.state;if(t.isTransition){var o=D.T,h={};D.T=h;try{var v=a(c,l),A=D.S;A!==null&&A(h,v),Cx(s,t,v)}catch(Z){jd(s,t,Z)}finally{o!==null&&h.types!==null&&(o.types=h.types),D.T=o}}else try{o=a(c,l),Cx(s,t,o)}catch(Z){jd(s,t,Z)}}function Cx(s,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){kx(s,t,l)},function(l){return jd(s,t,l)}):kx(s,t,a)}function kx(s,t,a){t.status="fulfilled",t.value=a,Tx(t),s.state=a,t=s.pending,t!==null&&(a=t.next,a===t?s.pending=null:(a=a.next,t.next=a,Sx(s,a)))}function jd(s,t,a){var l=s.pending;if(s.pending=null,l!==null){l=l.next;do t.status="rejected",t.reason=a,Tx(t),t=t.next;while(t!==l)}s.action=null}function Tx(s){s=s.listeners;for(var t=0;t<s.length;t++)(0,s[t])()}function Ex(s,t){return t}function zx(s,t){if(ys){var a=$s.formState;if(a!==null){e:{var l=es;if(ys){if(Js){s:{for(var c=Js,o=ba;c.nodeType!==8;){if(!o){c=null;break s}if(c=ya(c.nextSibling),c===null){c=null;break s}}o=c.data,c=o==="F!"||o==="F"?c:null}if(c){Js=ya(c.nextSibling),l=c.data==="F!";break e}}wl(l)}l=!1}l&&(t=a[0])}}return a=Ft(),a.memoizedState=a.baseState=t,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ex,lastRenderedState:t},a.queue=l,a=Xx.bind(null,es,l),l.dispatch=a,l=gd(!1),o=_d.bind(null,es,!1,l.queue),l=Ft(),c={state:t,dispatch:null,action:s,pending:null},l.queue=c,a=Ev.bind(null,es,c,o,a),c.dispatch=a,l.memoizedState=s,[t,a,!1]}function Mx(s){var t=xt();return Ax(t,Rs,s)}function Ax(s,t,a){if(t=fd(s,t,Ex)[0],s=ec(tl)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var l=Ur(t)}catch(h){throw h===Bn?Vi:h}else l=t;t=xt();var c=t.queue,o=c.dispatch;return a!==t.memoizedState&&(es.flags|=2048,Fn(9,{destroy:void 0},zv.bind(null,c,a),null)),[l,o,s]}function zv(s,t){s.action=t}function Dx(s){var t=xt(),a=Rs;if(a!==null)return Ax(t,a,s);xt(),t=t.memoizedState,a=xt();var l=a.queue.dispatch;return a.memoizedState=s,[t,l,!1]}function Fn(s,t,a,l){return s={tag:s,create:a,deps:l,inst:t,next:null},t=es.updateQueue,t===null&&(t=Zi(),es.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=s.next=s:(l=a.next,a.next=s,s.next=l,t.lastEffect=s),s}function Ox(){return xt().memoizedState}function sc(s,t,a,l){var c=Ft();es.flags|=s,c.memoizedState=Fn(1|t,{destroy:void 0},a,l===void 0?null:l)}function tc(s,t,a,l){var c=xt();l=l===void 0?null:l;var o=c.memoizedState.inst;Rs!==null&&l!==null&&od(l,Rs.memoizedState.deps)?c.memoizedState=Fn(t,o,a,l):(es.flags|=s,c.memoizedState=Fn(1|t,o,a,l))}function Rx(s,t){sc(8390656,8,s,t)}function vd(s,t){tc(2048,8,s,t)}function Mv(s){es.flags|=4;var t=es.updateQueue;if(t===null)t=Zi(),es.updateQueue=t,t.events=[s];else{var a=t.events;a===null?t.events=[s]:a.push(s)}}function Lx(s){var t=xt().memoizedState;return Mv({ref:t,nextImpl:s}),function(){if((ks&2)!==0)throw Error(d(440));return t.impl.apply(void 0,arguments)}}function Ux(s,t){return tc(4,2,s,t)}function Bx(s,t){return tc(4,4,s,t)}function Hx(s,t){if(typeof t=="function"){s=s();var a=t(s);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return s=s(),t.current=s,function(){t.current=null}}function qx(s,t,a){a=a!=null?a.concat([s]):null,tc(4,4,Hx.bind(null,t,s),a)}function bd(){}function Gx(s,t){var a=xt();t=t===void 0?null:t;var l=a.memoizedState;return t!==null&&od(t,l[1])?l[0]:(a.memoizedState=[s,t],s)}function $x(s,t){var a=xt();t=t===void 0?null:t;var l=a.memoizedState;if(t!==null&&od(t,l[1]))return l[0];if(l=s(),cn){ws(!0);try{s()}finally{ws(!1)}}return a.memoizedState=[l,t],l}function Nd(s,t,a){return a===void 0||(sl&1073741824)!==0&&(js&261930)===0?s.memoizedState=t:(s.memoizedState=a,s=Fh(),es.lanes|=s,Al|=s,a)}function Fx(s,t,a,l){return aa(a,t)?a:qn.current!==null?(s=Nd(s,a,l),aa(s,t)||(yt=!0),s):(sl&42)===0||(sl&1073741824)!==0&&(js&261930)===0?(yt=!0,s.memoizedState=a):(s=Fh(),es.lanes|=s,Al|=s,t)}function Vx(s,t,a,l,c){var o=X.p;X.p=o!==0&&8>o?o:8;var h=D.T,v={};D.T=v,_d(s,!1,t,a);try{var A=c(),Z=D.S;if(Z!==null&&Z(v,A),A!==null&&typeof A=="object"&&typeof A.then=="function"){var oe=Cv(A,l);Br(s,t,oe,oa(s))}else Br(s,t,l,oa(s))}catch(me){Br(s,t,{then:function(){},status:"rejected",reason:me},oa())}finally{X.p=o,h!==null&&v.types!==null&&(h.types=v.types),D.T=h}}function Av(){}function yd(s,t,a,l){if(s.tag!==5)throw Error(d(476));var c=Qx(s).queue;Vx(s,c,t,J,a===null?Av:function(){return Ix(s),a(l)})}function Qx(s){var t=s.memoizedState;if(t!==null)return t;t={memoizedState:J,baseState:J,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:tl,lastRenderedState:J},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:tl,lastRenderedState:a},next:null},s.memoizedState=t,s=s.alternate,s!==null&&(s.memoizedState=t),t}function Ix(s){var t=Qx(s);t.next===null&&(t=s.alternate.memoizedState),Br(s,t.next.queue,{},oa())}function wd(){return Rt(si)}function Yx(){return xt().memoizedState}function Kx(){return xt().memoizedState}function Dv(s){for(var t=s.return;t!==null;){switch(t.tag){case 24:case 3:var a=oa();s=Cl(a);var l=kl(t,s,a);l!==null&&(Pt(l,t,a),Dr(l,t,a)),t={cache:Zo()},s.payload=t;return}t=t.return}}function Ov(s,t,a){var l=oa();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},ac(s)?Jx(t,a):(a=Go(s,t,a,l),a!==null&&(Pt(a,s,l),Px(a,t,l)))}function Xx(s,t,a){var l=oa();Br(s,t,a,l)}function Br(s,t,a,l){var c={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(ac(s))Jx(t,c);else{var o=s.alternate;if(s.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var h=t.lastRenderedState,v=o(h,a);if(c.hasEagerState=!0,c.eagerState=v,aa(v,h))return Ui(s,t,c,0),$s===null&&Li(),!1}catch{}finally{}if(a=Go(s,t,c,l),a!==null)return Pt(a,s,l),Px(a,t,l),!0}return!1}function _d(s,t,a,l){if(l={lane:2,revertLane:tu(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},ac(s)){if(t)throw Error(d(479))}else t=Go(s,a,l,2),t!==null&&Pt(t,s,2)}function ac(s){var t=s.alternate;return s===es||t!==null&&t===es}function Jx(s,t){Gn=Ji=!0;var a=s.pending;a===null?t.next=t:(t.next=a.next,a.next=t),s.pending=t}function Px(s,t,a){if((a&4194048)!==0){var l=t.lanes;l&=s.pendingLanes,a|=l,t.lanes=a,pe(s,a)}}var Hr={readContext:Rt,use:Wi,useCallback:it,useContext:it,useEffect:it,useImperativeHandle:it,useLayoutEffect:it,useInsertionEffect:it,useMemo:it,useReducer:it,useRef:it,useState:it,useDebugValue:it,useDeferredValue:it,useTransition:it,useSyncExternalStore:it,useId:it,useHostTransitionStatus:it,useFormState:it,useActionState:it,useOptimistic:it,useMemoCache:it,useCacheRefresh:it};Hr.useEffectEvent=it;var Zx={readContext:Rt,use:Wi,useCallback:function(s,t){return Ft().memoizedState=[s,t===void 0?null:t],s},useContext:Rt,useEffect:Rx,useImperativeHandle:function(s,t,a){a=a!=null?a.concat([s]):null,sc(4194308,4,Hx.bind(null,t,s),a)},useLayoutEffect:function(s,t){return sc(4194308,4,s,t)},useInsertionEffect:function(s,t){sc(4,2,s,t)},useMemo:function(s,t){var a=Ft();t=t===void 0?null:t;var l=s();if(cn){ws(!0);try{s()}finally{ws(!1)}}return a.memoizedState=[l,t],l},useReducer:function(s,t,a){var l=Ft();if(a!==void 0){var c=a(t);if(cn){ws(!0);try{a(t)}finally{ws(!1)}}}else c=t;return l.memoizedState=l.baseState=c,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:c},l.queue=s,s=s.dispatch=Ov.bind(null,es,s),[l.memoizedState,s]},useRef:function(s){var t=Ft();return s={current:s},t.memoizedState=s},useState:function(s){s=gd(s);var t=s.queue,a=Xx.bind(null,es,t);return t.dispatch=a,[s.memoizedState,a]},useDebugValue:bd,useDeferredValue:function(s,t){var a=Ft();return Nd(a,s,t)},useTransition:function(){var s=gd(!1);return s=Vx.bind(null,es,s.queue,!0,!1),Ft().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,t,a){var l=es,c=Ft();if(ys){if(a===void 0)throw Error(d(407));a=a()}else{if(a=t(),$s===null)throw Error(d(349));(js&127)!==0||vx(l,t,a)}c.memoizedState=a;var o={value:a,getSnapshot:t};return c.queue=o,Rx(Nx.bind(null,l,o,s),[s]),l.flags|=2048,Fn(9,{destroy:void 0},bx.bind(null,l,o,a,t),null),a},useId:function(){var s=Ft(),t=$s.identifierPrefix;if(ys){var a=Ha,l=Ba;a=(l&~(1<<32-_s(l)-1)).toString(32)+a,t="_"+t+"R_"+a,a=Pi++,0<a&&(t+="H"+a.toString(32)),t+="_"}else a=kv++,t="_"+t+"r_"+a.toString(32)+"_";return s.memoizedState=t},useHostTransitionStatus:wd,useFormState:zx,useActionState:zx,useOptimistic:function(s){var t=Ft();t.memoizedState=t.baseState=s;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=_d.bind(null,es,!0,a),a.dispatch=t,[s,t]},useMemoCache:hd,useCacheRefresh:function(){return Ft().memoizedState=Dv.bind(null,es)},useEffectEvent:function(s){var t=Ft(),a={impl:s};return t.memoizedState=a,function(){if((ks&2)!==0)throw Error(d(440));return a.impl.apply(void 0,arguments)}}},Sd={readContext:Rt,use:Wi,useCallback:Gx,useContext:Rt,useEffect:vd,useImperativeHandle:qx,useInsertionEffect:Ux,useLayoutEffect:Bx,useMemo:$x,useReducer:ec,useRef:Ox,useState:function(){return ec(tl)},useDebugValue:bd,useDeferredValue:function(s,t){var a=xt();return Fx(a,Rs.memoizedState,s,t)},useTransition:function(){var s=ec(tl)[0],t=xt().memoizedState;return[typeof s=="boolean"?s:Ur(s),t]},useSyncExternalStore:jx,useId:Yx,useHostTransitionStatus:wd,useFormState:Mx,useActionState:Mx,useOptimistic:function(s,t){var a=xt();return _x(a,Rs,s,t)},useMemoCache:hd,useCacheRefresh:Kx};Sd.useEffectEvent=Lx;var Wx={readContext:Rt,use:Wi,useCallback:Gx,useContext:Rt,useEffect:vd,useImperativeHandle:qx,useInsertionEffect:Ux,useLayoutEffect:Bx,useMemo:$x,useReducer:pd,useRef:Ox,useState:function(){return pd(tl)},useDebugValue:bd,useDeferredValue:function(s,t){var a=xt();return Rs===null?Nd(a,s,t):Fx(a,Rs.memoizedState,s,t)},useTransition:function(){var s=pd(tl)[0],t=xt().memoizedState;return[typeof s=="boolean"?s:Ur(s),t]},useSyncExternalStore:jx,useId:Yx,useHostTransitionStatus:wd,useFormState:Dx,useActionState:Dx,useOptimistic:function(s,t){var a=xt();return Rs!==null?_x(a,Rs,s,t):(a.baseState=s,[s,a.queue.dispatch])},useMemoCache:hd,useCacheRefresh:Kx};Wx.useEffectEvent=Lx;function Cd(s,t,a,l){t=s.memoizedState,a=a(l,t),a=a==null?t:y({},t,a),s.memoizedState=a,s.lanes===0&&(s.updateQueue.baseState=a)}var kd={enqueueSetState:function(s,t,a){s=s._reactInternals;var l=oa(),c=Cl(l);c.payload=t,a!=null&&(c.callback=a),t=kl(s,c,l),t!==null&&(Pt(t,s,l),Dr(t,s,l))},enqueueReplaceState:function(s,t,a){s=s._reactInternals;var l=oa(),c=Cl(l);c.tag=1,c.payload=t,a!=null&&(c.callback=a),t=kl(s,c,l),t!==null&&(Pt(t,s,l),Dr(t,s,l))},enqueueForceUpdate:function(s,t){s=s._reactInternals;var a=oa(),l=Cl(a);l.tag=2,t!=null&&(l.callback=t),t=kl(s,l,a),t!==null&&(Pt(t,s,a),Dr(t,s,a))}};function eh(s,t,a,l,c,o,h){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(l,o,h):t.prototype&&t.prototype.isPureReactComponent?!Sr(a,l)||!Sr(c,o):!0}function sh(s,t,a,l){s=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,l),t.state!==s&&kd.enqueueReplaceState(t,t.state,null)}function on(s,t){var a=t;if("ref"in t){a={};for(var l in t)l!=="ref"&&(a[l]=t[l])}if(s=s.defaultProps){a===t&&(a=y({},a));for(var c in s)a[c]===void 0&&(a[c]=s[c])}return a}function th(s){Ri(s)}function ah(s){console.error(s)}function lh(s){Ri(s)}function lc(s,t){try{var a=s.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(l){setTimeout(function(){throw l})}}function nh(s,t,a){try{var l=s.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function Td(s,t,a){return a=Cl(a),a.tag=3,a.payload={element:null},a.callback=function(){lc(s,t)},a}function rh(s){return s=Cl(s),s.tag=3,s}function ih(s,t,a,l){var c=a.type.getDerivedStateFromError;if(typeof c=="function"){var o=l.value;s.payload=function(){return c(o)},s.callback=function(){nh(t,a,l)}}var h=a.stateNode;h!==null&&typeof h.componentDidCatch=="function"&&(s.callback=function(){nh(t,a,l),typeof c!="function"&&(Dl===null?Dl=new Set([this]):Dl.add(this));var v=l.stack;this.componentDidCatch(l.value,{componentStack:v!==null?v:""})})}function Rv(s,t,a,l,c){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(t=a.alternate,t!==null&&Rn(t,a,c,!0),a=na.current,a!==null){switch(a.tag){case 31:case 13:return Na===null?pc():a.alternate===null&&ct===0&&(ct=3),a.flags&=-257,a.flags|=65536,a.lanes=c,l===Qi?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([l]):t.add(l),Wd(s,l,c)),!1;case 22:return a.flags|=65536,l===Qi?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([l]):a.add(l)),Wd(s,l,c)),!1}throw Error(d(435,a.tag))}return Wd(s,l,c),pc(),!1}if(ys)return t=na.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=c,l!==Yo&&(s=Error(d(422),{cause:l}),Tr(ga(s,a)))):(l!==Yo&&(t=Error(d(423),{cause:l}),Tr(ga(t,a))),s=s.current.alternate,s.flags|=65536,c&=-c,s.lanes|=c,l=ga(l,a),c=Td(s.stateNode,l,c),ld(s,c),ct!==4&&(ct=2)),!1;var o=Error(d(520),{cause:l});if(o=ga(o,a),Yr===null?Yr=[o]:Yr.push(o),ct!==4&&(ct=2),t===null)return!0;l=ga(l,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,s=c&-c,a.lanes|=s,s=Td(a.stateNode,l,s),ld(a,s),!1;case 1:if(t=a.type,o=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||o!==null&&typeof o.componentDidCatch=="function"&&(Dl===null||!Dl.has(o))))return a.flags|=65536,c&=-c,a.lanes|=c,c=rh(c),ih(c,s,a,l),ld(a,c),!1}a=a.return}while(a!==null);return!1}var Ed=Error(d(461)),yt=!1;function Lt(s,t,a,l){t.child=s===null?ux(t,null,a,l):rn(t,s.child,a,l)}function ch(s,t,a,l,c){a=a.render;var o=t.ref;if("ref"in l){var h={};for(var v in l)v!=="ref"&&(h[v]=l[v])}else h=l;return tn(t),l=dd(s,t,a,h,o,c),v=ud(),s!==null&&!yt?(md(s,t,c),al(s,t,c)):(ys&&v&&Qo(t),t.flags|=1,Lt(s,t,l,c),t.child)}function oh(s,t,a,l,c){if(s===null){var o=a.type;return typeof o=="function"&&!$o(o)&&o.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=o,dh(s,t,o,l,c)):(s=Hi(a.type,null,l,t,t.mode,c),s.ref=t.ref,s.return=t,t.child=s)}if(o=s.child,!Ud(s,c)){var h=o.memoizedProps;if(a=a.compare,a=a!==null?a:Sr,a(h,l)&&s.ref===t.ref)return al(s,t,c)}return t.flags|=1,s=Pa(o,l),s.ref=t.ref,s.return=t,t.child=s}function dh(s,t,a,l,c){if(s!==null){var o=s.memoizedProps;if(Sr(o,l)&&s.ref===t.ref)if(yt=!1,t.pendingProps=l=o,Ud(s,c))(s.flags&131072)!==0&&(yt=!0);else return t.lanes=s.lanes,al(s,t,c)}return zd(s,t,a,l,c)}function uh(s,t,a,l){var c=l.children,o=s!==null?s.memoizedState:null;if(s===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((t.flags&128)!==0){if(o=o!==null?o.baseLanes|a:a,s!==null){for(l=t.child=s.child,c=0;l!==null;)c=c|l.lanes|l.childLanes,l=l.sibling;l=c&~o}else l=0,t.child=null;return mh(s,t,o,a,l)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},s!==null&&Fi(t,o!==null?o.cachePool:null),o!==null?hx(t,o):rd(),fx(t);else return l=t.lanes=536870912,mh(s,t,o!==null?o.baseLanes|a:a,a,l)}else o!==null?(Fi(t,o.cachePool),hx(t,o),El(),t.memoizedState=null):(s!==null&&Fi(t,null),rd(),El());return Lt(s,t,c,a),t.child}function qr(s,t){return s!==null&&s.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function mh(s,t,a,l,c){var o=ed();return o=o===null?null:{parent:bt._currentValue,pool:o},t.memoizedState={baseLanes:a,cachePool:o},s!==null&&Fi(t,null),rd(),fx(t),s!==null&&Rn(s,t,l,!0),t.childLanes=c,null}function nc(s,t){return t=ic({mode:t.mode,children:t.children},s.mode),t.ref=s.ref,s.child=t,t.return=s,t}function xh(s,t,a){return rn(t,s.child,null,a),s=nc(t,t.pendingProps),s.flags|=2,ra(t),t.memoizedState=null,s}function Lv(s,t,a){var l=t.pendingProps,c=(t.flags&128)!==0;if(t.flags&=-129,s===null){if(ys){if(l.mode==="hidden")return s=nc(t,l),t.lanes=536870912,qr(null,s);if(cd(t),(s=Js)?(s=Cf(s,ba),s=s!==null&&s.data==="&"?s:null,s!==null&&(t.memoizedState={dehydrated:s,treeContext:Nl!==null?{id:Ba,overflow:Ha}:null,retryLane:536870912,hydrationErrors:null},a=Jm(s),a.return=t,t.child=a,Ot=t,Js=null)):s=null,s===null)throw wl(t);return t.lanes=536870912,null}return nc(t,l)}var o=s.memoizedState;if(o!==null){var h=o.dehydrated;if(cd(t),c)if(t.flags&256)t.flags&=-257,t=xh(s,t,a);else if(t.memoizedState!==null)t.child=s.child,t.flags|=128,t=null;else throw Error(d(558));else if(yt||Rn(s,t,a,!1),c=(a&s.childLanes)!==0,yt||c){if(l=$s,l!==null&&(h=Ee(l,a),h!==0&&h!==o.retryLane))throw o.retryLane=h,Zl(s,h),Pt(l,s,h),Ed;pc(),t=xh(s,t,a)}else s=o.treeContext,Js=ya(h.nextSibling),Ot=t,ys=!0,yl=null,ba=!1,s!==null&&Wm(t,s),t=nc(t,l),t.flags|=4096;return t}return s=Pa(s.child,{mode:l.mode,children:l.children}),s.ref=t.ref,t.child=s,s.return=t,s}function rc(s,t){var a=t.ref;if(a===null)s!==null&&s.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(d(284));(s===null||s.ref!==a)&&(t.flags|=4194816)}}function zd(s,t,a,l,c){return tn(t),a=dd(s,t,a,l,void 0,c),l=ud(),s!==null&&!yt?(md(s,t,c),al(s,t,c)):(ys&&l&&Qo(t),t.flags|=1,Lt(s,t,a,c),t.child)}function hh(s,t,a,l,c,o){return tn(t),t.updateQueue=null,a=gx(t,l,a,c),px(s),l=ud(),s!==null&&!yt?(md(s,t,o),al(s,t,o)):(ys&&l&&Qo(t),t.flags|=1,Lt(s,t,a,o),t.child)}function fh(s,t,a,l,c){if(tn(t),t.stateNode===null){var o=Mn,h=a.contextType;typeof h=="object"&&h!==null&&(o=Rt(h)),o=new a(l,o),t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=kd,t.stateNode=o,o._reactInternals=t,o=t.stateNode,o.props=l,o.state=t.memoizedState,o.refs={},td(t),h=a.contextType,o.context=typeof h=="object"&&h!==null?Rt(h):Mn,o.state=t.memoizedState,h=a.getDerivedStateFromProps,typeof h=="function"&&(Cd(t,a,h,l),o.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(h=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),h!==o.state&&kd.enqueueReplaceState(o,o.state,null),Rr(t,l,o,c),Or(),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308),l=!0}else if(s===null){o=t.stateNode;var v=t.memoizedProps,A=on(a,v);o.props=A;var Z=o.context,oe=a.contextType;h=Mn,typeof oe=="object"&&oe!==null&&(h=Rt(oe));var me=a.getDerivedStateFromProps;oe=typeof me=="function"||typeof o.getSnapshotBeforeUpdate=="function",v=t.pendingProps!==v,oe||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(v||Z!==h)&&sh(t,o,l,h),Sl=!1;var W=t.memoizedState;o.state=W,Rr(t,l,o,c),Or(),Z=t.memoizedState,v||W!==Z||Sl?(typeof me=="function"&&(Cd(t,a,me,l),Z=t.memoizedState),(A=Sl||eh(t,a,A,l,W,Z,h))?(oe||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=Z),o.props=l,o.state=Z,o.context=h,l=A):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{o=t.stateNode,ad(s,t),h=t.memoizedProps,oe=on(a,h),o.props=oe,me=t.pendingProps,W=o.context,Z=a.contextType,A=Mn,typeof Z=="object"&&Z!==null&&(A=Rt(Z)),v=a.getDerivedStateFromProps,(Z=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(h!==me||W!==A)&&sh(t,o,l,A),Sl=!1,W=t.memoizedState,o.state=W,Rr(t,l,o,c),Or();var ne=t.memoizedState;h!==me||W!==ne||Sl||s!==null&&s.dependencies!==null&&Gi(s.dependencies)?(typeof v=="function"&&(Cd(t,a,v,l),ne=t.memoizedState),(oe=Sl||eh(t,a,oe,l,W,ne,A)||s!==null&&s.dependencies!==null&&Gi(s.dependencies))?(Z||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(l,ne,A),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(l,ne,A)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||h===s.memoizedProps&&W===s.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||h===s.memoizedProps&&W===s.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=ne),o.props=l,o.state=ne,o.context=A,l=oe):(typeof o.componentDidUpdate!="function"||h===s.memoizedProps&&W===s.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||h===s.memoizedProps&&W===s.memoizedState||(t.flags|=1024),l=!1)}return o=l,rc(s,t),l=(t.flags&128)!==0,o||l?(o=t.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:o.render(),t.flags|=1,s!==null&&l?(t.child=rn(t,s.child,null,c),t.child=rn(t,null,a,c)):Lt(s,t,a,c),t.memoizedState=o.state,s=t.child):s=al(s,t,c),s}function ph(s,t,a,l){return en(),t.flags|=256,Lt(s,t,a,l),t.child}var Md={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ad(s){return{baseLanes:s,cachePool:nx()}}function Dd(s,t,a){return s=s!==null?s.childLanes&~a:0,t&&(s|=ca),s}function gh(s,t,a){var l=t.pendingProps,c=!1,o=(t.flags&128)!==0,h;if((h=o)||(h=s!==null&&s.memoizedState===null?!1:(mt.current&2)!==0),h&&(c=!0,t.flags&=-129),h=(t.flags&32)!==0,t.flags&=-33,s===null){if(ys){if(c?Tl(t):El(),(s=Js)?(s=Cf(s,ba),s=s!==null&&s.data!=="&"?s:null,s!==null&&(t.memoizedState={dehydrated:s,treeContext:Nl!==null?{id:Ba,overflow:Ha}:null,retryLane:536870912,hydrationErrors:null},a=Jm(s),a.return=t,t.child=a,Ot=t,Js=null)):s=null,s===null)throw wl(t);return fu(s)?t.lanes=32:t.lanes=536870912,null}var v=l.children;return l=l.fallback,c?(El(),c=t.mode,v=ic({mode:"hidden",children:v},c),l=Wl(l,c,a,null),v.return=t,l.return=t,v.sibling=l,t.child=v,l=t.child,l.memoizedState=Ad(a),l.childLanes=Dd(s,h,a),t.memoizedState=Md,qr(null,l)):(Tl(t),Od(t,v))}var A=s.memoizedState;if(A!==null&&(v=A.dehydrated,v!==null)){if(o)t.flags&256?(Tl(t),t.flags&=-257,t=Rd(s,t,a)):t.memoizedState!==null?(El(),t.child=s.child,t.flags|=128,t=null):(El(),v=l.fallback,c=t.mode,l=ic({mode:"visible",children:l.children},c),v=Wl(v,c,a,null),v.flags|=2,l.return=t,v.return=t,l.sibling=v,t.child=l,rn(t,s.child,null,a),l=t.child,l.memoizedState=Ad(a),l.childLanes=Dd(s,h,a),t.memoizedState=Md,t=qr(null,l));else if(Tl(t),fu(v)){if(h=v.nextSibling&&v.nextSibling.dataset,h)var Z=h.dgst;h=Z,l=Error(d(419)),l.stack="",l.digest=h,Tr({value:l,source:null,stack:null}),t=Rd(s,t,a)}else if(yt||Rn(s,t,a,!1),h=(a&s.childLanes)!==0,yt||h){if(h=$s,h!==null&&(l=Ee(h,a),l!==0&&l!==A.retryLane))throw A.retryLane=l,Zl(s,l),Pt(h,s,l),Ed;hu(v)||pc(),t=Rd(s,t,a)}else hu(v)?(t.flags|=192,t.child=s.child,t=null):(s=A.treeContext,Js=ya(v.nextSibling),Ot=t,ys=!0,yl=null,ba=!1,s!==null&&Wm(t,s),t=Od(t,l.children),t.flags|=4096);return t}return c?(El(),v=l.fallback,c=t.mode,A=s.child,Z=A.sibling,l=Pa(A,{mode:"hidden",children:l.children}),l.subtreeFlags=A.subtreeFlags&65011712,Z!==null?v=Pa(Z,v):(v=Wl(v,c,a,null),v.flags|=2),v.return=t,l.return=t,l.sibling=v,t.child=l,qr(null,l),l=t.child,v=s.child.memoizedState,v===null?v=Ad(a):(c=v.cachePool,c!==null?(A=bt._currentValue,c=c.parent!==A?{parent:A,pool:A}:c):c=nx(),v={baseLanes:v.baseLanes|a,cachePool:c}),l.memoizedState=v,l.childLanes=Dd(s,h,a),t.memoizedState=Md,qr(s.child,l)):(Tl(t),a=s.child,s=a.sibling,a=Pa(a,{mode:"visible",children:l.children}),a.return=t,a.sibling=null,s!==null&&(h=t.deletions,h===null?(t.deletions=[s],t.flags|=16):h.push(s)),t.child=a,t.memoizedState=null,a)}function Od(s,t){return t=ic({mode:"visible",children:t},s.mode),t.return=s,s.child=t}function ic(s,t){return s=la(22,s,null,t),s.lanes=0,s}function Rd(s,t,a){return rn(t,s.child,null,a),s=Od(t,t.pendingProps.children),s.flags|=2,t.memoizedState=null,s}function jh(s,t,a){s.lanes|=t;var l=s.alternate;l!==null&&(l.lanes|=t),Jo(s.return,t,a)}function Ld(s,t,a,l,c,o){var h=s.memoizedState;h===null?s.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:c,treeForkCount:o}:(h.isBackwards=t,h.rendering=null,h.renderingStartTime=0,h.last=l,h.tail=a,h.tailMode=c,h.treeForkCount=o)}function vh(s,t,a){var l=t.pendingProps,c=l.revealOrder,o=l.tail;l=l.children;var h=mt.current,v=(h&2)!==0;if(v?(h=h&1|2,t.flags|=128):h&=1,ke(mt,h),Lt(s,t,l,a),l=ys?kr:0,!v&&s!==null&&(s.flags&128)!==0)e:for(s=t.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&jh(s,a,t);else if(s.tag===19)jh(s,a,t);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(c){case"forwards":for(a=t.child,c=null;a!==null;)s=a.alternate,s!==null&&Xi(s)===null&&(c=a),a=a.sibling;a=c,a===null?(c=t.child,t.child=null):(c=a.sibling,a.sibling=null),Ld(t,!1,c,a,o,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,c=t.child,t.child=null;c!==null;){if(s=c.alternate,s!==null&&Xi(s)===null){t.child=c;break}s=c.sibling,c.sibling=a,a=c,c=s}Ld(t,!0,a,null,o,l);break;case"together":Ld(t,!1,null,null,void 0,l);break;default:t.memoizedState=null}return t.child}function al(s,t,a){if(s!==null&&(t.dependencies=s.dependencies),Al|=t.lanes,(a&t.childLanes)===0)if(s!==null){if(Rn(s,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(s!==null&&t.child!==s.child)throw Error(d(153));if(t.child!==null){for(s=t.child,a=Pa(s,s.pendingProps),t.child=a,a.return=t;s.sibling!==null;)s=s.sibling,a=a.sibling=Pa(s,s.pendingProps),a.return=t;a.sibling=null}return t.child}function Ud(s,t){return(s.lanes&t)!==0?!0:(s=s.dependencies,!!(s!==null&&Gi(s)))}function Uv(s,t,a){switch(t.tag){case 3:ae(t,t.stateNode.containerInfo),_l(t,bt,s.memoizedState.cache),en();break;case 27:case 5:K(t);break;case 4:ae(t,t.stateNode.containerInfo);break;case 10:_l(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,cd(t),null;break;case 13:var l=t.memoizedState;if(l!==null)return l.dehydrated!==null?(Tl(t),t.flags|=128,null):(a&t.child.childLanes)!==0?gh(s,t,a):(Tl(t),s=al(s,t,a),s!==null?s.sibling:null);Tl(t);break;case 19:var c=(s.flags&128)!==0;if(l=(a&t.childLanes)!==0,l||(Rn(s,t,a,!1),l=(a&t.childLanes)!==0),c){if(l)return vh(s,t,a);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),ke(mt,mt.current),l)break;return null;case 22:return t.lanes=0,uh(s,t,a,t.pendingProps);case 24:_l(t,bt,s.memoizedState.cache)}return al(s,t,a)}function bh(s,t,a){if(s!==null)if(s.memoizedProps!==t.pendingProps)yt=!0;else{if(!Ud(s,a)&&(t.flags&128)===0)return yt=!1,Uv(s,t,a);yt=(s.flags&131072)!==0}else yt=!1,ys&&(t.flags&1048576)!==0&&Zm(t,kr,t.index);switch(t.lanes=0,t.tag){case 16:e:{var l=t.pendingProps;if(s=ln(t.elementType),t.type=s,typeof s=="function")$o(s)?(l=on(s,l),t.tag=1,t=fh(null,t,s,l,a)):(t.tag=0,t=zd(null,t,s,l,a));else{if(s!=null){var c=s.$$typeof;if(c===z){t.tag=11,t=ch(null,t,s,l,a);break e}else if(c===k){t.tag=14,t=oh(null,t,s,l,a);break e}}throw t=ye(s)||s,Error(d(306,t,""))}}return t;case 0:return zd(s,t,t.type,t.pendingProps,a);case 1:return l=t.type,c=on(l,t.pendingProps),fh(s,t,l,c,a);case 3:e:{if(ae(t,t.stateNode.containerInfo),s===null)throw Error(d(387));l=t.pendingProps;var o=t.memoizedState;c=o.element,ad(s,t),Rr(t,l,null,a);var h=t.memoizedState;if(l=h.cache,_l(t,bt,l),l!==o.cache&&Po(t,[bt],a,!0),Or(),l=h.element,o.isDehydrated)if(o={element:l,isDehydrated:!1,cache:h.cache},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){t=ph(s,t,l,a);break e}else if(l!==c){c=ga(Error(d(424)),t),Tr(c),t=ph(s,t,l,a);break e}else{switch(s=t.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Js=ya(s.firstChild),Ot=t,ys=!0,yl=null,ba=!0,a=ux(t,null,l,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(en(),l===c){t=al(s,t,a);break e}Lt(s,t,l,a)}t=t.child}return t;case 26:return rc(s,t),s===null?(a=Af(t.type,null,t.pendingProps,null))?t.memoizedState=a:ys||(a=t.type,s=t.pendingProps,l=wc(fe.current).createElement(a),l[Ns]=t,l[Ct]=s,Ut(l,a,s),At(l),t.stateNode=l):t.memoizedState=Af(t.type,s.memoizedProps,t.pendingProps,s.memoizedState),null;case 27:return K(t),s===null&&ys&&(l=t.stateNode=Ef(t.type,t.pendingProps,fe.current),Ot=t,ba=!0,c=Js,Ul(t.type)?(pu=c,Js=ya(l.firstChild)):Js=c),Lt(s,t,t.pendingProps.children,a),rc(s,t),s===null&&(t.flags|=4194304),t.child;case 5:return s===null&&ys&&((c=l=Js)&&(l=xb(l,t.type,t.pendingProps,ba),l!==null?(t.stateNode=l,Ot=t,Js=ya(l.firstChild),ba=!1,c=!0):c=!1),c||wl(t)),K(t),c=t.type,o=t.pendingProps,h=s!==null?s.memoizedProps:null,l=o.children,uu(c,o)?l=null:h!==null&&uu(c,h)&&(t.flags|=32),t.memoizedState!==null&&(c=dd(s,t,Tv,null,null,a),si._currentValue=c),rc(s,t),Lt(s,t,l,a),t.child;case 6:return s===null&&ys&&((s=a=Js)&&(a=hb(a,t.pendingProps,ba),a!==null?(t.stateNode=a,Ot=t,Js=null,s=!0):s=!1),s||wl(t)),null;case 13:return gh(s,t,a);case 4:return ae(t,t.stateNode.containerInfo),l=t.pendingProps,s===null?t.child=rn(t,null,l,a):Lt(s,t,l,a),t.child;case 11:return ch(s,t,t.type,t.pendingProps,a);case 7:return Lt(s,t,t.pendingProps,a),t.child;case 8:return Lt(s,t,t.pendingProps.children,a),t.child;case 12:return Lt(s,t,t.pendingProps.children,a),t.child;case 10:return l=t.pendingProps,_l(t,t.type,l.value),Lt(s,t,l.children,a),t.child;case 9:return c=t.type._context,l=t.pendingProps.children,tn(t),c=Rt(c),l=l(c),t.flags|=1,Lt(s,t,l,a),t.child;case 14:return oh(s,t,t.type,t.pendingProps,a);case 15:return dh(s,t,t.type,t.pendingProps,a);case 19:return vh(s,t,a);case 31:return Lv(s,t,a);case 22:return uh(s,t,a,t.pendingProps);case 24:return tn(t),l=Rt(bt),s===null?(c=ed(),c===null&&(c=$s,o=Zo(),c.pooledCache=o,o.refCount++,o!==null&&(c.pooledCacheLanes|=a),c=o),t.memoizedState={parent:l,cache:c},td(t),_l(t,bt,c)):((s.lanes&a)!==0&&(ad(s,t),Rr(t,null,null,a),Or()),c=s.memoizedState,o=t.memoizedState,c.parent!==l?(c={parent:l,cache:l},t.memoizedState=c,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=c),_l(t,bt,l)):(l=o.cache,_l(t,bt,l),l!==c.cache&&Po(t,[bt],a,!0))),Lt(s,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(d(156,t.tag))}function ll(s){s.flags|=4}function Bd(s,t,a,l,c){if((t=(s.mode&32)!==0)&&(t=!1),t){if(s.flags|=16777216,(c&335544128)===c)if(s.stateNode.complete)s.flags|=8192;else if(Yh())s.flags|=8192;else throw nn=Qi,sd}else s.flags&=-16777217}function Nh(s,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!Uf(t))if(Yh())s.flags|=8192;else throw nn=Qi,sd}function cc(s,t){t!==null&&(s.flags|=4),s.flags&16384&&(t=s.tag!==22?ue():536870912,s.lanes|=t,Yn|=t)}function Gr(s,t){if(!ys)switch(s.tailMode){case"hidden":t=s.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?s.tail=null:a.sibling=null;break;case"collapsed":a=s.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?t||s.tail===null?s.tail=null:s.tail.sibling=null:l.sibling=null}}function Ps(s){var t=s.alternate!==null&&s.alternate.child===s.child,a=0,l=0;if(t)for(var c=s.child;c!==null;)a|=c.lanes|c.childLanes,l|=c.subtreeFlags&65011712,l|=c.flags&65011712,c.return=s,c=c.sibling;else for(c=s.child;c!==null;)a|=c.lanes|c.childLanes,l|=c.subtreeFlags,l|=c.flags,c.return=s,c=c.sibling;return s.subtreeFlags|=l,s.childLanes=a,t}function Bv(s,t,a){var l=t.pendingProps;switch(Io(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ps(t),null;case 1:return Ps(t),null;case 3:return a=t.stateNode,l=null,s!==null&&(l=s.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),el(bt),q(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(s===null||s.child===null)&&(On(t)?ll(t):s===null||s.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Ko())),Ps(t),null;case 26:var c=t.type,o=t.memoizedState;return s===null?(ll(t),o!==null?(Ps(t),Nh(t,o)):(Ps(t),Bd(t,c,null,l,a))):o?o!==s.memoizedState?(ll(t),Ps(t),Nh(t,o)):(Ps(t),t.flags&=-16777217):(s=s.memoizedProps,s!==l&&ll(t),Ps(t),Bd(t,c,s,l,a)),null;case 27:if(Me(t),a=fe.current,c=t.type,s!==null&&t.stateNode!=null)s.memoizedProps!==l&&ll(t);else{if(!l){if(t.stateNode===null)throw Error(d(166));return Ps(t),null}s=Ce.current,On(t)?ex(t):(s=Ef(c,l,a),t.stateNode=s,ll(t))}return Ps(t),null;case 5:if(Me(t),c=t.type,s!==null&&t.stateNode!=null)s.memoizedProps!==l&&ll(t);else{if(!l){if(t.stateNode===null)throw Error(d(166));return Ps(t),null}if(o=Ce.current,On(t))ex(t);else{var h=wc(fe.current);switch(o){case 1:o=h.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:o=h.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":o=h.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":o=h.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":o=h.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?o.multiple=!0:l.size&&(o.size=l.size);break;default:o=typeof l.is=="string"?h.createElement(c,{is:l.is}):h.createElement(c)}}o[Ns]=t,o[Ct]=l;e:for(h=t.child;h!==null;){if(h.tag===5||h.tag===6)o.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}t.stateNode=o;e:switch(Ut(o,c,l),c){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&ll(t)}}return Ps(t),Bd(t,t.type,s===null?null:s.memoizedProps,t.pendingProps,a),null;case 6:if(s&&t.stateNode!=null)s.memoizedProps!==l&&ll(t);else{if(typeof l!="string"&&t.stateNode===null)throw Error(d(166));if(s=fe.current,On(t)){if(s=t.stateNode,a=t.memoizedProps,l=null,c=Ot,c!==null)switch(c.tag){case 27:case 5:l=c.memoizedProps}s[Ns]=t,s=!!(s.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||jf(s.nodeValue,a)),s||wl(t,!0)}else s=wc(s).createTextNode(l),s[Ns]=t,t.stateNode=s}return Ps(t),null;case 31:if(a=t.memoizedState,s===null||s.memoizedState!==null){if(l=On(t),a!==null){if(s===null){if(!l)throw Error(d(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(d(557));s[Ns]=t}else en(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ps(t),s=!1}else a=Ko(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=a),s=!0;if(!s)return t.flags&256?(ra(t),t):(ra(t),null);if((t.flags&128)!==0)throw Error(d(558))}return Ps(t),null;case 13:if(l=t.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(c=On(t),l!==null&&l.dehydrated!==null){if(s===null){if(!c)throw Error(d(318));if(c=t.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(d(317));c[Ns]=t}else en(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ps(t),c=!1}else c=Ko(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=c),c=!0;if(!c)return t.flags&256?(ra(t),t):(ra(t),null)}return ra(t),(t.flags&128)!==0?(t.lanes=a,t):(a=l!==null,s=s!==null&&s.memoizedState!==null,a&&(l=t.child,c=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(c=l.alternate.memoizedState.cachePool.pool),o=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(o=l.memoizedState.cachePool.pool),o!==c&&(l.flags|=2048)),a!==s&&a&&(t.child.flags|=8192),cc(t,t.updateQueue),Ps(t),null);case 4:return q(),s===null&&ru(t.stateNode.containerInfo),Ps(t),null;case 10:return el(t.type),Ps(t),null;case 19:if(he(mt),l=t.memoizedState,l===null)return Ps(t),null;if(c=(t.flags&128)!==0,o=l.rendering,o===null)if(c)Gr(l,!1);else{if(ct!==0||s!==null&&(s.flags&128)!==0)for(s=t.child;s!==null;){if(o=Xi(s),o!==null){for(t.flags|=128,Gr(l,!1),s=o.updateQueue,t.updateQueue=s,cc(t,s),t.subtreeFlags=0,s=a,a=t.child;a!==null;)Xm(a,s),a=a.sibling;return ke(mt,mt.current&1|2),ys&&Za(t,l.treeForkCount),t.child}s=s.sibling}l.tail!==null&&Is()>xc&&(t.flags|=128,c=!0,Gr(l,!1),t.lanes=4194304)}else{if(!c)if(s=Xi(o),s!==null){if(t.flags|=128,c=!0,s=s.updateQueue,t.updateQueue=s,cc(t,s),Gr(l,!0),l.tail===null&&l.tailMode==="hidden"&&!o.alternate&&!ys)return Ps(t),null}else 2*Is()-l.renderingStartTime>xc&&a!==536870912&&(t.flags|=128,c=!0,Gr(l,!1),t.lanes=4194304);l.isBackwards?(o.sibling=t.child,t.child=o):(s=l.last,s!==null?s.sibling=o:t.child=o,l.last=o)}return l.tail!==null?(s=l.tail,l.rendering=s,l.tail=s.sibling,l.renderingStartTime=Is(),s.sibling=null,a=mt.current,ke(mt,c?a&1|2:a&1),ys&&Za(t,l.treeForkCount),s):(Ps(t),null);case 22:case 23:return ra(t),id(),l=t.memoizedState!==null,s!==null?s.memoizedState!==null!==l&&(t.flags|=8192):l&&(t.flags|=8192),l?(a&536870912)!==0&&(t.flags&128)===0&&(Ps(t),t.subtreeFlags&6&&(t.flags|=8192)):Ps(t),a=t.updateQueue,a!==null&&cc(t,a.retryQueue),a=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(a=s.memoizedState.cachePool.pool),l=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),l!==a&&(t.flags|=2048),s!==null&&he(an),null;case 24:return a=null,s!==null&&(a=s.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),el(bt),Ps(t),null;case 25:return null;case 30:return null}throw Error(d(156,t.tag))}function Hv(s,t){switch(Io(t),t.tag){case 1:return s=t.flags,s&65536?(t.flags=s&-65537|128,t):null;case 3:return el(bt),q(),s=t.flags,(s&65536)!==0&&(s&128)===0?(t.flags=s&-65537|128,t):null;case 26:case 27:case 5:return Me(t),null;case 31:if(t.memoizedState!==null){if(ra(t),t.alternate===null)throw Error(d(340));en()}return s=t.flags,s&65536?(t.flags=s&-65537|128,t):null;case 13:if(ra(t),s=t.memoizedState,s!==null&&s.dehydrated!==null){if(t.alternate===null)throw Error(d(340));en()}return s=t.flags,s&65536?(t.flags=s&-65537|128,t):null;case 19:return he(mt),null;case 4:return q(),null;case 10:return el(t.type),null;case 22:case 23:return ra(t),id(),s!==null&&he(an),s=t.flags,s&65536?(t.flags=s&-65537|128,t):null;case 24:return el(bt),null;case 25:return null;default:return null}}function yh(s,t){switch(Io(t),t.tag){case 3:el(bt),q();break;case 26:case 27:case 5:Me(t);break;case 4:q();break;case 31:t.memoizedState!==null&&ra(t);break;case 13:ra(t);break;case 19:he(mt);break;case 10:el(t.type);break;case 22:case 23:ra(t),id(),s!==null&&he(an);break;case 24:el(bt)}}function $r(s,t){try{var a=t.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var c=l.next;a=c;do{if((a.tag&s)===s){l=void 0;var o=a.create,h=a.inst;l=o(),h.destroy=l}a=a.next}while(a!==c)}}catch(v){Ds(t,t.return,v)}}function zl(s,t,a){try{var l=t.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var o=c.next;l=o;do{if((l.tag&s)===s){var h=l.inst,v=h.destroy;if(v!==void 0){h.destroy=void 0,c=t;var A=a,Z=v;try{Z()}catch(oe){Ds(c,A,oe)}}}l=l.next}while(l!==o)}}catch(oe){Ds(t,t.return,oe)}}function wh(s){var t=s.updateQueue;if(t!==null){var a=s.stateNode;try{xx(t,a)}catch(l){Ds(s,s.return,l)}}}function _h(s,t,a){a.props=on(s.type,s.memoizedProps),a.state=s.memoizedState;try{a.componentWillUnmount()}catch(l){Ds(s,t,l)}}function Fr(s,t){try{var a=s.ref;if(a!==null){switch(s.tag){case 26:case 27:case 5:var l=s.stateNode;break;case 30:l=s.stateNode;break;default:l=s.stateNode}typeof a=="function"?s.refCleanup=a(l):a.current=l}}catch(c){Ds(s,t,c)}}function qa(s,t){var a=s.ref,l=s.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(c){Ds(s,t,c)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(c){Ds(s,t,c)}else a.current=null}function Sh(s){var t=s.type,a=s.memoizedProps,l=s.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(c){Ds(s,s.return,c)}}function Hd(s,t,a){try{var l=s.stateNode;ib(l,s.type,a,t),l[Ct]=t}catch(c){Ds(s,s.return,c)}}function Ch(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Ul(s.type)||s.tag===4}function qd(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Ch(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Ul(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Gd(s,t,a){var l=s.tag;if(l===5||l===6)s=s.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(s,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(s),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=Xa));else if(l!==4&&(l===27&&Ul(s.type)&&(a=s.stateNode,t=null),s=s.child,s!==null))for(Gd(s,t,a),s=s.sibling;s!==null;)Gd(s,t,a),s=s.sibling}function oc(s,t,a){var l=s.tag;if(l===5||l===6)s=s.stateNode,t?a.insertBefore(s,t):a.appendChild(s);else if(l!==4&&(l===27&&Ul(s.type)&&(a=s.stateNode),s=s.child,s!==null))for(oc(s,t,a),s=s.sibling;s!==null;)oc(s,t,a),s=s.sibling}function kh(s){var t=s.stateNode,a=s.memoizedProps;try{for(var l=s.type,c=t.attributes;c.length;)t.removeAttributeNode(c[0]);Ut(t,l,a),t[Ns]=s,t[Ct]=a}catch(o){Ds(s,s.return,o)}}var nl=!1,wt=!1,$d=!1,Th=typeof WeakSet=="function"?WeakSet:Set,Dt=null;function qv(s,t){if(s=s.containerInfo,ou=zc,s=qm(s),Ro(s)){if("selectionStart"in s)var a={start:s.selectionStart,end:s.selectionEnd};else e:{a=(a=s.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var c=l.anchorOffset,o=l.focusNode;l=l.focusOffset;try{a.nodeType,o.nodeType}catch{a=null;break e}var h=0,v=-1,A=-1,Z=0,oe=0,me=s,W=null;s:for(;;){for(var ne;me!==a||c!==0&&me.nodeType!==3||(v=h+c),me!==o||l!==0&&me.nodeType!==3||(A=h+l),me.nodeType===3&&(h+=me.nodeValue.length),(ne=me.firstChild)!==null;)W=me,me=ne;for(;;){if(me===s)break s;if(W===a&&++Z===c&&(v=h),W===o&&++oe===l&&(A=h),(ne=me.nextSibling)!==null)break;me=W,W=me.parentNode}me=ne}a=v===-1||A===-1?null:{start:v,end:A}}else a=null}a=a||{start:0,end:0}}else a=null;for(du={focusedElem:s,selectionRange:a},zc=!1,Dt=t;Dt!==null;)if(t=Dt,s=t.child,(t.subtreeFlags&1028)!==0&&s!==null)s.return=t,Dt=s;else for(;Dt!==null;){switch(t=Dt,o=t.alternate,s=t.flags,t.tag){case 0:if((s&4)!==0&&(s=t.updateQueue,s=s!==null?s.events:null,s!==null))for(a=0;a<s.length;a++)c=s[a],c.ref.impl=c.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&o!==null){s=void 0,a=t,c=o.memoizedProps,o=o.memoizedState,l=a.stateNode;try{var De=on(a.type,c);s=l.getSnapshotBeforeUpdate(De,o),l.__reactInternalSnapshotBeforeUpdate=s}catch(Ye){Ds(a,a.return,Ye)}}break;case 3:if((s&1024)!==0){if(s=t.stateNode.containerInfo,a=s.nodeType,a===9)xu(s);else if(a===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":xu(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(d(163))}if(s=t.sibling,s!==null){s.return=t.return,Dt=s;break}Dt=t.return}}function Eh(s,t,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:il(s,a),l&4&&$r(5,a);break;case 1:if(il(s,a),l&4)if(s=a.stateNode,t===null)try{s.componentDidMount()}catch(h){Ds(a,a.return,h)}else{var c=on(a.type,t.memoizedProps);t=t.memoizedState;try{s.componentDidUpdate(c,t,s.__reactInternalSnapshotBeforeUpdate)}catch(h){Ds(a,a.return,h)}}l&64&&wh(a),l&512&&Fr(a,a.return);break;case 3:if(il(s,a),l&64&&(s=a.updateQueue,s!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{xx(s,t)}catch(h){Ds(a,a.return,h)}}break;case 27:t===null&&l&4&&kh(a);case 26:case 5:il(s,a),t===null&&l&4&&Sh(a),l&512&&Fr(a,a.return);break;case 12:il(s,a);break;case 31:il(s,a),l&4&&Ah(s,a);break;case 13:il(s,a),l&4&&Dh(s,a),l&64&&(s=a.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(a=Xv.bind(null,a),fb(s,a))));break;case 22:if(l=a.memoizedState!==null||nl,!l){t=t!==null&&t.memoizedState!==null||wt,c=nl;var o=wt;nl=l,(wt=t)&&!o?cl(s,a,(a.subtreeFlags&8772)!==0):il(s,a),nl=c,wt=o}break;case 30:break;default:il(s,a)}}function zh(s){var t=s.alternate;t!==null&&(s.alternate=null,zh(t)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(t=s.stateNode,t!==null&&jo(t)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Ws=null,Yt=!1;function rl(s,t,a){for(a=a.child;a!==null;)Mh(s,t,a),a=a.sibling}function Mh(s,t,a){if(Ae&&typeof Ae.onCommitFiberUnmount=="function")try{Ae.onCommitFiberUnmount(Es,a)}catch{}switch(a.tag){case 26:wt||qa(a,t),rl(s,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:wt||qa(a,t);var l=Ws,c=Yt;Ul(a.type)&&(Ws=a.stateNode,Yt=!1),rl(s,t,a),Zr(a.stateNode),Ws=l,Yt=c;break;case 5:wt||qa(a,t);case 6:if(l=Ws,c=Yt,Ws=null,rl(s,t,a),Ws=l,Yt=c,Ws!==null)if(Yt)try{(Ws.nodeType===9?Ws.body:Ws.nodeName==="HTML"?Ws.ownerDocument.body:Ws).removeChild(a.stateNode)}catch(o){Ds(a,t,o)}else try{Ws.removeChild(a.stateNode)}catch(o){Ds(a,t,o)}break;case 18:Ws!==null&&(Yt?(s=Ws,_f(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,a.stateNode),sr(s)):_f(Ws,a.stateNode));break;case 4:l=Ws,c=Yt,Ws=a.stateNode.containerInfo,Yt=!0,rl(s,t,a),Ws=l,Yt=c;break;case 0:case 11:case 14:case 15:zl(2,a,t),wt||zl(4,a,t),rl(s,t,a);break;case 1:wt||(qa(a,t),l=a.stateNode,typeof l.componentWillUnmount=="function"&&_h(a,t,l)),rl(s,t,a);break;case 21:rl(s,t,a);break;case 22:wt=(l=wt)||a.memoizedState!==null,rl(s,t,a),wt=l;break;default:rl(s,t,a)}}function Ah(s,t){if(t.memoizedState===null&&(s=t.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{sr(s)}catch(a){Ds(t,t.return,a)}}}function Dh(s,t){if(t.memoizedState===null&&(s=t.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{sr(s)}catch(a){Ds(t,t.return,a)}}function Gv(s){switch(s.tag){case 31:case 13:case 19:var t=s.stateNode;return t===null&&(t=s.stateNode=new Th),t;case 22:return s=s.stateNode,t=s._retryCache,t===null&&(t=s._retryCache=new Th),t;default:throw Error(d(435,s.tag))}}function dc(s,t){var a=Gv(s);t.forEach(function(l){if(!a.has(l)){a.add(l);var c=Jv.bind(null,s,l);l.then(c,c)}})}function Kt(s,t){var a=t.deletions;if(a!==null)for(var l=0;l<a.length;l++){var c=a[l],o=s,h=t,v=h;e:for(;v!==null;){switch(v.tag){case 27:if(Ul(v.type)){Ws=v.stateNode,Yt=!1;break e}break;case 5:Ws=v.stateNode,Yt=!1;break e;case 3:case 4:Ws=v.stateNode.containerInfo,Yt=!0;break e}v=v.return}if(Ws===null)throw Error(d(160));Mh(o,h,c),Ws=null,Yt=!1,o=c.alternate,o!==null&&(o.return=null),c.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Oh(t,s),t=t.sibling}var Ma=null;function Oh(s,t){var a=s.alternate,l=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Kt(t,s),Xt(s),l&4&&(zl(3,s,s.return),$r(3,s),zl(5,s,s.return));break;case 1:Kt(t,s),Xt(s),l&512&&(wt||a===null||qa(a,a.return)),l&64&&nl&&(s=s.updateQueue,s!==null&&(l=s.callbacks,l!==null&&(a=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var c=Ma;if(Kt(t,s),Xt(s),l&512&&(wt||a===null||qa(a,a.return)),l&4){var o=a!==null?a.memoizedState:null;if(l=s.memoizedState,a===null)if(l===null)if(s.stateNode===null){e:{l=s.type,a=s.memoizedProps,c=c.ownerDocument||c;s:switch(l){case"title":o=c.getElementsByTagName("title")[0],(!o||o[pr]||o[Ns]||o.namespaceURI==="http://www.w3.org/2000/svg"||o.hasAttribute("itemprop"))&&(o=c.createElement(l),c.head.insertBefore(o,c.querySelector("head > title"))),Ut(o,l,a),o[Ns]=s,At(o),l=o;break e;case"link":var h=Rf("link","href",c).get(l+(a.href||""));if(h){for(var v=0;v<h.length;v++)if(o=h[v],o.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&o.getAttribute("rel")===(a.rel==null?null:a.rel)&&o.getAttribute("title")===(a.title==null?null:a.title)&&o.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){h.splice(v,1);break s}}o=c.createElement(l),Ut(o,l,a),c.head.appendChild(o);break;case"meta":if(h=Rf("meta","content",c).get(l+(a.content||""))){for(v=0;v<h.length;v++)if(o=h[v],o.getAttribute("content")===(a.content==null?null:""+a.content)&&o.getAttribute("name")===(a.name==null?null:a.name)&&o.getAttribute("property")===(a.property==null?null:a.property)&&o.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&o.getAttribute("charset")===(a.charSet==null?null:a.charSet)){h.splice(v,1);break s}}o=c.createElement(l),Ut(o,l,a),c.head.appendChild(o);break;default:throw Error(d(468,l))}o[Ns]=s,At(o),l=o}s.stateNode=l}else Lf(c,s.type,s.stateNode);else s.stateNode=Of(c,l,s.memoizedProps);else o!==l?(o===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):o.count--,l===null?Lf(c,s.type,s.stateNode):Of(c,l,s.memoizedProps)):l===null&&s.stateNode!==null&&Hd(s,s.memoizedProps,a.memoizedProps)}break;case 27:Kt(t,s),Xt(s),l&512&&(wt||a===null||qa(a,a.return)),a!==null&&l&4&&Hd(s,s.memoizedProps,a.memoizedProps);break;case 5:if(Kt(t,s),Xt(s),l&512&&(wt||a===null||qa(a,a.return)),s.flags&32){c=s.stateNode;try{_n(c,"")}catch(De){Ds(s,s.return,De)}}l&4&&s.stateNode!=null&&(c=s.memoizedProps,Hd(s,c,a!==null?a.memoizedProps:c)),l&1024&&($d=!0);break;case 6:if(Kt(t,s),Xt(s),l&4){if(s.stateNode===null)throw Error(d(162));l=s.memoizedProps,a=s.stateNode;try{a.nodeValue=l}catch(De){Ds(s,s.return,De)}}break;case 3:if(Cc=null,c=Ma,Ma=_c(t.containerInfo),Kt(t,s),Ma=c,Xt(s),l&4&&a!==null&&a.memoizedState.isDehydrated)try{sr(t.containerInfo)}catch(De){Ds(s,s.return,De)}$d&&($d=!1,Rh(s));break;case 4:l=Ma,Ma=_c(s.stateNode.containerInfo),Kt(t,s),Xt(s),Ma=l;break;case 12:Kt(t,s),Xt(s);break;case 31:Kt(t,s),Xt(s),l&4&&(l=s.updateQueue,l!==null&&(s.updateQueue=null,dc(s,l)));break;case 13:Kt(t,s),Xt(s),s.child.flags&8192&&s.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(mc=Is()),l&4&&(l=s.updateQueue,l!==null&&(s.updateQueue=null,dc(s,l)));break;case 22:c=s.memoizedState!==null;var A=a!==null&&a.memoizedState!==null,Z=nl,oe=wt;if(nl=Z||c,wt=oe||A,Kt(t,s),wt=oe,nl=Z,Xt(s),l&8192)e:for(t=s.stateNode,t._visibility=c?t._visibility&-2:t._visibility|1,c&&(a===null||A||nl||wt||dn(s)),a=null,t=s;;){if(t.tag===5||t.tag===26){if(a===null){A=a=t;try{if(o=A.stateNode,c)h=o.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none";else{v=A.stateNode;var me=A.memoizedProps.style,W=me!=null&&me.hasOwnProperty("display")?me.display:null;v.style.display=W==null||typeof W=="boolean"?"":(""+W).trim()}}catch(De){Ds(A,A.return,De)}}}else if(t.tag===6){if(a===null){A=t;try{A.stateNode.nodeValue=c?"":A.memoizedProps}catch(De){Ds(A,A.return,De)}}}else if(t.tag===18){if(a===null){A=t;try{var ne=A.stateNode;c?Sf(ne,!0):Sf(A.stateNode,!1)}catch(De){Ds(A,A.return,De)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===s)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}l&4&&(l=s.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,dc(s,a))));break;case 19:Kt(t,s),Xt(s),l&4&&(l=s.updateQueue,l!==null&&(s.updateQueue=null,dc(s,l)));break;case 30:break;case 21:break;default:Kt(t,s),Xt(s)}}function Xt(s){var t=s.flags;if(t&2){try{for(var a,l=s.return;l!==null;){if(Ch(l)){a=l;break}l=l.return}if(a==null)throw Error(d(160));switch(a.tag){case 27:var c=a.stateNode,o=qd(s);oc(s,o,c);break;case 5:var h=a.stateNode;a.flags&32&&(_n(h,""),a.flags&=-33);var v=qd(s);oc(s,v,h);break;case 3:case 4:var A=a.stateNode.containerInfo,Z=qd(s);Gd(s,Z,A);break;default:throw Error(d(161))}}catch(oe){Ds(s,s.return,oe)}s.flags&=-3}t&4096&&(s.flags&=-4097)}function Rh(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var t=s;Rh(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),s=s.sibling}}function il(s,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Eh(s,t.alternate,t),t=t.sibling}function dn(s){for(s=s.child;s!==null;){var t=s;switch(t.tag){case 0:case 11:case 14:case 15:zl(4,t,t.return),dn(t);break;case 1:qa(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&_h(t,t.return,a),dn(t);break;case 27:Zr(t.stateNode);case 26:case 5:qa(t,t.return),dn(t);break;case 22:t.memoizedState===null&&dn(t);break;case 30:dn(t);break;default:dn(t)}s=s.sibling}}function cl(s,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var l=t.alternate,c=s,o=t,h=o.flags;switch(o.tag){case 0:case 11:case 15:cl(c,o,a),$r(4,o);break;case 1:if(cl(c,o,a),l=o,c=l.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(Z){Ds(l,l.return,Z)}if(l=o,c=l.updateQueue,c!==null){var v=l.stateNode;try{var A=c.shared.hiddenCallbacks;if(A!==null)for(c.shared.hiddenCallbacks=null,c=0;c<A.length;c++)mx(A[c],v)}catch(Z){Ds(l,l.return,Z)}}a&&h&64&&wh(o),Fr(o,o.return);break;case 27:kh(o);case 26:case 5:cl(c,o,a),a&&l===null&&h&4&&Sh(o),Fr(o,o.return);break;case 12:cl(c,o,a);break;case 31:cl(c,o,a),a&&h&4&&Ah(c,o);break;case 13:cl(c,o,a),a&&h&4&&Dh(c,o);break;case 22:o.memoizedState===null&&cl(c,o,a),Fr(o,o.return);break;case 30:break;default:cl(c,o,a)}t=t.sibling}}function Fd(s,t){var a=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(a=s.memoizedState.cachePool.pool),s=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),s!==a&&(s!=null&&s.refCount++,a!=null&&Er(a))}function Vd(s,t){s=null,t.alternate!==null&&(s=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==s&&(t.refCount++,s!=null&&Er(s))}function Aa(s,t,a,l){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Lh(s,t,a,l),t=t.sibling}function Lh(s,t,a,l){var c=t.flags;switch(t.tag){case 0:case 11:case 15:Aa(s,t,a,l),c&2048&&$r(9,t);break;case 1:Aa(s,t,a,l);break;case 3:Aa(s,t,a,l),c&2048&&(s=null,t.alternate!==null&&(s=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==s&&(t.refCount++,s!=null&&Er(s)));break;case 12:if(c&2048){Aa(s,t,a,l),s=t.stateNode;try{var o=t.memoizedProps,h=o.id,v=o.onPostCommit;typeof v=="function"&&v(h,t.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(A){Ds(t,t.return,A)}}else Aa(s,t,a,l);break;case 31:Aa(s,t,a,l);break;case 13:Aa(s,t,a,l);break;case 23:break;case 22:o=t.stateNode,h=t.alternate,t.memoizedState!==null?o._visibility&2?Aa(s,t,a,l):Vr(s,t):o._visibility&2?Aa(s,t,a,l):(o._visibility|=2,Vn(s,t,a,l,(t.subtreeFlags&10256)!==0||!1)),c&2048&&Fd(h,t);break;case 24:Aa(s,t,a,l),c&2048&&Vd(t.alternate,t);break;default:Aa(s,t,a,l)}}function Vn(s,t,a,l,c){for(c=c&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var o=s,h=t,v=a,A=l,Z=h.flags;switch(h.tag){case 0:case 11:case 15:Vn(o,h,v,A,c),$r(8,h);break;case 23:break;case 22:var oe=h.stateNode;h.memoizedState!==null?oe._visibility&2?Vn(o,h,v,A,c):Vr(o,h):(oe._visibility|=2,Vn(o,h,v,A,c)),c&&Z&2048&&Fd(h.alternate,h);break;case 24:Vn(o,h,v,A,c),c&&Z&2048&&Vd(h.alternate,h);break;default:Vn(o,h,v,A,c)}t=t.sibling}}function Vr(s,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=s,l=t,c=l.flags;switch(l.tag){case 22:Vr(a,l),c&2048&&Fd(l.alternate,l);break;case 24:Vr(a,l),c&2048&&Vd(l.alternate,l);break;default:Vr(a,l)}t=t.sibling}}var Qr=8192;function Qn(s,t,a){if(s.subtreeFlags&Qr)for(s=s.child;s!==null;)Uh(s,t,a),s=s.sibling}function Uh(s,t,a){switch(s.tag){case 26:Qn(s,t,a),s.flags&Qr&&s.memoizedState!==null&&kb(a,Ma,s.memoizedState,s.memoizedProps);break;case 5:Qn(s,t,a);break;case 3:case 4:var l=Ma;Ma=_c(s.stateNode.containerInfo),Qn(s,t,a),Ma=l;break;case 22:s.memoizedState===null&&(l=s.alternate,l!==null&&l.memoizedState!==null?(l=Qr,Qr=16777216,Qn(s,t,a),Qr=l):Qn(s,t,a));break;default:Qn(s,t,a)}}function Bh(s){var t=s.alternate;if(t!==null&&(s=t.child,s!==null)){t.child=null;do t=s.sibling,s.sibling=null,s=t;while(s!==null)}}function Ir(s){var t=s.deletions;if((s.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var l=t[a];Dt=l,qh(l,s)}Bh(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Hh(s),s=s.sibling}function Hh(s){switch(s.tag){case 0:case 11:case 15:Ir(s),s.flags&2048&&zl(9,s,s.return);break;case 3:Ir(s);break;case 12:Ir(s);break;case 22:var t=s.stateNode;s.memoizedState!==null&&t._visibility&2&&(s.return===null||s.return.tag!==13)?(t._visibility&=-3,uc(s)):Ir(s);break;default:Ir(s)}}function uc(s){var t=s.deletions;if((s.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var l=t[a];Dt=l,qh(l,s)}Bh(s)}for(s=s.child;s!==null;){switch(t=s,t.tag){case 0:case 11:case 15:zl(8,t,t.return),uc(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,uc(t));break;default:uc(t)}s=s.sibling}}function qh(s,t){for(;Dt!==null;){var a=Dt;switch(a.tag){case 0:case 11:case 15:zl(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Er(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Dt=l;else e:for(a=s;Dt!==null;){l=Dt;var c=l.sibling,o=l.return;if(zh(l),l===a){Dt=null;break e}if(c!==null){c.return=o,Dt=c;break e}Dt=o}}}var $v={getCacheForType:function(s){var t=Rt(bt),a=t.data.get(s);return a===void 0&&(a=s(),t.data.set(s,a)),a},cacheSignal:function(){return Rt(bt).controller.signal}},Fv=typeof WeakMap=="function"?WeakMap:Map,ks=0,$s=null,hs=null,js=0,As=0,ia=null,Ml=!1,In=!1,Qd=!1,ol=0,ct=0,Al=0,un=0,Id=0,ca=0,Yn=0,Yr=null,Jt=null,Yd=!1,mc=0,Gh=0,xc=1/0,hc=null,Dl=null,kt=0,Ol=null,Kn=null,dl=0,Kd=0,Xd=null,$h=null,Kr=0,Jd=null;function oa(){return(ks&2)!==0&&js!==0?js&-js:D.T!==null?tu():Qt()}function Fh(){if(ca===0)if((js&536870912)===0||ys){var s=nt;nt<<=1,(nt&3932160)===0&&(nt=262144),ca=s}else ca=536870912;return s=na.current,s!==null&&(s.flags|=32),ca}function Pt(s,t,a){(s===$s&&(As===2||As===9)||s.cancelPendingCommit!==null)&&(Xn(s,0),Rl(s,js,ca,!1)),zt(s,a),((ks&2)===0||s!==$s)&&(s===$s&&((ks&2)===0&&(un|=a),ct===4&&Rl(s,js,ca,!1)),Ga(s))}function Vh(s,t,a){if((ks&6)!==0)throw Error(d(327));var l=!a&&(t&127)===0&&(t&s.expiredLanes)===0||$t(s,t),c=l?Iv(s,t):Zd(s,t,!0),o=l;do{if(c===0){In&&!l&&Rl(s,t,0,!1);break}else{if(a=s.current.alternate,o&&!Vv(a)){c=Zd(s,t,!1),o=!1;continue}if(c===2){if(o=t,s.errorRecoveryDisabledLanes&o)var h=0;else h=s.pendingLanes&-536870913,h=h!==0?h:h&536870912?536870912:0;if(h!==0){t=h;e:{var v=s;c=Yr;var A=v.current.memoizedState.isDehydrated;if(A&&(Xn(v,h).flags|=256),h=Zd(v,h,!1),h!==2){if(Qd&&!A){v.errorRecoveryDisabledLanes|=o,un|=o,c=4;break e}o=Jt,Jt=c,o!==null&&(Jt===null?Jt=o:Jt.push.apply(Jt,o))}c=h}if(o=!1,c!==2)continue}}if(c===1){Xn(s,0),Rl(s,t,0,!0);break}e:{switch(l=s,o=c,o){case 0:case 1:throw Error(d(345));case 4:if((t&4194048)!==t)break;case 6:Rl(l,t,ca,!Ml);break e;case 2:Jt=null;break;case 3:case 5:break;default:throw Error(d(329))}if((t&62914560)===t&&(c=mc+300-Is(),10<c)){if(Rl(l,t,ca,!Ml),vt(l,0,!0)!==0)break e;dl=t,l.timeoutHandle=yf(Qh.bind(null,l,a,Jt,hc,Yd,t,ca,un,Yn,Ml,o,"Throttled",-0,0),c);break e}Qh(l,a,Jt,hc,Yd,t,ca,un,Yn,Ml,o,null,-0,0)}}break}while(!0);Ga(s)}function Qh(s,t,a,l,c,o,h,v,A,Z,oe,me,W,ne){if(s.timeoutHandle=-1,me=t.subtreeFlags,me&8192||(me&16785408)===16785408){me={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Xa},Uh(t,o,me);var De=(o&62914560)===o?mc-Is():(o&4194048)===o?Gh-Is():0;if(De=Tb(me,De),De!==null){dl=o,s.cancelPendingCommit=De(Wh.bind(null,s,t,o,a,l,c,h,v,A,oe,me,null,W,ne)),Rl(s,o,h,!Z);return}}Wh(s,t,o,a,l,c,h,v,A)}function Vv(s){for(var t=s;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var c=a[l],o=c.getSnapshot;c=c.value;try{if(!aa(o(),c))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===s)break;for(;t.sibling===null;){if(t.return===null||t.return===s)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Rl(s,t,a,l){t&=~Id,t&=~un,s.suspendedLanes|=t,s.pingedLanes&=~t,l&&(s.warmLanes|=t),l=s.expirationTimes;for(var c=t;0<c;){var o=31-_s(c),h=1<<o;l[o]=-1,c&=~h}a!==0&&I(s,a,t)}function fc(){return(ks&6)===0?(Xr(0),!1):!0}function Pd(){if(hs!==null){if(As===0)var s=hs.return;else s=hs,Wa=sn=null,xd(s),Hn=null,Mr=0,s=hs;for(;s!==null;)yh(s.alternate,s),s=s.return;hs=null}}function Xn(s,t){var a=s.timeoutHandle;a!==-1&&(s.timeoutHandle=-1,db(a)),a=s.cancelPendingCommit,a!==null&&(s.cancelPendingCommit=null,a()),dl=0,Pd(),$s=s,hs=a=Pa(s.current,null),js=t,As=0,ia=null,Ml=!1,In=$t(s,t),Qd=!1,Yn=ca=Id=un=Al=ct=0,Jt=Yr=null,Yd=!1,(t&8)!==0&&(t|=t&32);var l=s.entangledLanes;if(l!==0)for(s=s.entanglements,l&=t;0<l;){var c=31-_s(l),o=1<<c;t|=s[c],l&=~o}return ol=t,Li(),a}function Ih(s,t){es=null,D.H=Hr,t===Bn||t===Vi?(t=cx(),As=3):t===sd?(t=cx(),As=4):As=t===Ed?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,ia=t,hs===null&&(ct=1,lc(s,ga(t,s.current)))}function Yh(){var s=na.current;return s===null?!0:(js&4194048)===js?Na===null:(js&62914560)===js||(js&536870912)!==0?s===Na:!1}function Kh(){var s=D.H;return D.H=Hr,s===null?Hr:s}function Xh(){var s=D.A;return D.A=$v,s}function pc(){ct=4,Ml||(js&4194048)!==js&&na.current!==null||(In=!0),(Al&134217727)===0&&(un&134217727)===0||$s===null||Rl($s,js,ca,!1)}function Zd(s,t,a){var l=ks;ks|=2;var c=Kh(),o=Xh();($s!==s||js!==t)&&(hc=null,Xn(s,t)),t=!1;var h=ct;e:do try{if(As!==0&&hs!==null){var v=hs,A=ia;switch(As){case 8:Pd(),h=6;break e;case 3:case 2:case 9:case 6:na.current===null&&(t=!0);var Z=As;if(As=0,ia=null,Jn(s,v,A,Z),a&&In){h=0;break e}break;default:Z=As,As=0,ia=null,Jn(s,v,A,Z)}}Qv(),h=ct;break}catch(oe){Ih(s,oe)}while(!0);return t&&s.shellSuspendCounter++,Wa=sn=null,ks=l,D.H=c,D.A=o,hs===null&&($s=null,js=0,Li()),h}function Qv(){for(;hs!==null;)Jh(hs)}function Iv(s,t){var a=ks;ks|=2;var l=Kh(),c=Xh();$s!==s||js!==t?(hc=null,xc=Is()+500,Xn(s,t)):In=$t(s,t);e:do try{if(As!==0&&hs!==null){t=hs;var o=ia;s:switch(As){case 1:As=0,ia=null,Jn(s,t,o,1);break;case 2:case 9:if(rx(o)){As=0,ia=null,Ph(t);break}t=function(){As!==2&&As!==9||$s!==s||(As=7),Ga(s)},o.then(t,t);break e;case 3:As=7;break e;case 4:As=5;break e;case 7:rx(o)?(As=0,ia=null,Ph(t)):(As=0,ia=null,Jn(s,t,o,7));break;case 5:var h=null;switch(hs.tag){case 26:h=hs.memoizedState;case 5:case 27:var v=hs;if(h?Uf(h):v.stateNode.complete){As=0,ia=null;var A=v.sibling;if(A!==null)hs=A;else{var Z=v.return;Z!==null?(hs=Z,gc(Z)):hs=null}break s}}As=0,ia=null,Jn(s,t,o,5);break;case 6:As=0,ia=null,Jn(s,t,o,6);break;case 8:Pd(),ct=6;break e;default:throw Error(d(462))}}Yv();break}catch(oe){Ih(s,oe)}while(!0);return Wa=sn=null,D.H=l,D.A=c,ks=a,hs!==null?0:($s=null,js=0,Li(),ct)}function Yv(){for(;hs!==null&&!gt();)Jh(hs)}function Jh(s){var t=bh(s.alternate,s,ol);s.memoizedProps=s.pendingProps,t===null?gc(s):hs=t}function Ph(s){var t=s,a=t.alternate;switch(t.tag){case 15:case 0:t=hh(a,t,t.pendingProps,t.type,void 0,js);break;case 11:t=hh(a,t,t.pendingProps,t.type.render,t.ref,js);break;case 5:xd(t);default:yh(a,t),t=hs=Xm(t,ol),t=bh(a,t,ol)}s.memoizedProps=s.pendingProps,t===null?gc(s):hs=t}function Jn(s,t,a,l){Wa=sn=null,xd(t),Hn=null,Mr=0;var c=t.return;try{if(Rv(s,c,t,a,js)){ct=1,lc(s,ga(a,s.current)),hs=null;return}}catch(o){if(c!==null)throw hs=c,o;ct=1,lc(s,ga(a,s.current)),hs=null;return}t.flags&32768?(ys||l===1?s=!0:In||(js&536870912)!==0?s=!1:(Ml=s=!0,(l===2||l===9||l===3||l===6)&&(l=na.current,l!==null&&l.tag===13&&(l.flags|=16384))),Zh(t,s)):gc(t)}function gc(s){var t=s;do{if((t.flags&32768)!==0){Zh(t,Ml);return}s=t.return;var a=Bv(t.alternate,t,ol);if(a!==null){hs=a;return}if(t=t.sibling,t!==null){hs=t;return}hs=t=s}while(t!==null);ct===0&&(ct=5)}function Zh(s,t){do{var a=Hv(s.alternate,s);if(a!==null){a.flags&=32767,hs=a;return}if(a=s.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(s=s.sibling,s!==null)){hs=s;return}hs=s=a}while(s!==null);ct=6,hs=null}function Wh(s,t,a,l,c,o,h,v,A){s.cancelPendingCommit=null;do jc();while(kt!==0);if((ks&6)!==0)throw Error(d(327));if(t!==null){if(t===s.current)throw Error(d(177));if(o=t.lanes|t.childLanes,o|=qo,Mt(s,a,o,h,v,A),s===$s&&(hs=$s=null,js=0),Kn=t,Ol=s,dl=a,Kd=o,Xd=c,$h=l,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,Pv(Xe,function(){return lf(),null})):(s.callbackNode=null,s.callbackPriority=0),l=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||l){l=D.T,D.T=null,c=X.p,X.p=2,h=ks,ks|=4;try{qv(s,t,a)}finally{ks=h,X.p=c,D.T=l}}kt=1,ef(),sf(),tf()}}function ef(){if(kt===1){kt=0;var s=Ol,t=Kn,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=D.T,D.T=null;var l=X.p;X.p=2;var c=ks;ks|=4;try{Oh(t,s);var o=du,h=qm(s.containerInfo),v=o.focusedElem,A=o.selectionRange;if(h!==v&&v&&v.ownerDocument&&Hm(v.ownerDocument.documentElement,v)){if(A!==null&&Ro(v)){var Z=A.start,oe=A.end;if(oe===void 0&&(oe=Z),"selectionStart"in v)v.selectionStart=Z,v.selectionEnd=Math.min(oe,v.value.length);else{var me=v.ownerDocument||document,W=me&&me.defaultView||window;if(W.getSelection){var ne=W.getSelection(),De=v.textContent.length,Ye=Math.min(A.start,De),Us=A.end===void 0?Ye:Math.min(A.end,De);!ne.extend&&Ye>Us&&(h=Us,Us=Ye,Ye=h);var G=Bm(v,Ye),B=Bm(v,Us);if(G&&B&&(ne.rangeCount!==1||ne.anchorNode!==G.node||ne.anchorOffset!==G.offset||ne.focusNode!==B.node||ne.focusOffset!==B.offset)){var P=me.createRange();P.setStart(G.node,G.offset),ne.removeAllRanges(),Ye>Us?(ne.addRange(P),ne.extend(B.node,B.offset)):(P.setEnd(B.node,B.offset),ne.addRange(P))}}}}for(me=[],ne=v;ne=ne.parentNode;)ne.nodeType===1&&me.push({element:ne,left:ne.scrollLeft,top:ne.scrollTop});for(typeof v.focus=="function"&&v.focus(),v=0;v<me.length;v++){var de=me[v];de.element.scrollLeft=de.left,de.element.scrollTop=de.top}}zc=!!ou,du=ou=null}finally{ks=c,X.p=l,D.T=a}}s.current=t,kt=2}}function sf(){if(kt===2){kt=0;var s=Ol,t=Kn,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=D.T,D.T=null;var l=X.p;X.p=2;var c=ks;ks|=4;try{Eh(s,t.alternate,t)}finally{ks=c,X.p=l,D.T=a}}kt=3}}function tf(){if(kt===4||kt===3){kt=0,gs();var s=Ol,t=Kn,a=dl,l=$h;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?kt=5:(kt=0,Kn=Ol=null,af(s,s.pendingLanes));var c=s.pendingLanes;if(c===0&&(Dl=null),Ea(a),t=t.stateNode,Ae&&typeof Ae.onCommitFiberRoot=="function")try{Ae.onCommitFiberRoot(Es,t,void 0,(t.current.flags&128)===128)}catch{}if(l!==null){t=D.T,c=X.p,X.p=2,D.T=null;try{for(var o=s.onRecoverableError,h=0;h<l.length;h++){var v=l[h];o(v.value,{componentStack:v.stack})}}finally{D.T=t,X.p=c}}(dl&3)!==0&&jc(),Ga(s),c=s.pendingLanes,(a&261930)!==0&&(c&42)!==0?s===Jd?Kr++:(Kr=0,Jd=s):Kr=0,Xr(0)}}function af(s,t){(s.pooledCacheLanes&=t)===0&&(t=s.pooledCache,t!=null&&(s.pooledCache=null,Er(t)))}function jc(){return ef(),sf(),tf(),lf()}function lf(){if(kt!==5)return!1;var s=Ol,t=Kd;Kd=0;var a=Ea(dl),l=D.T,c=X.p;try{X.p=32>a?32:a,D.T=null,a=Xd,Xd=null;var o=Ol,h=dl;if(kt=0,Kn=Ol=null,dl=0,(ks&6)!==0)throw Error(d(331));var v=ks;if(ks|=4,Hh(o.current),Lh(o,o.current,h,a),ks=v,Xr(0,!1),Ae&&typeof Ae.onPostCommitFiberRoot=="function")try{Ae.onPostCommitFiberRoot(Es,o)}catch{}return!0}finally{X.p=c,D.T=l,af(s,t)}}function nf(s,t,a){t=ga(a,t),t=Td(s.stateNode,t,2),s=kl(s,t,2),s!==null&&(zt(s,2),Ga(s))}function Ds(s,t,a){if(s.tag===3)nf(s,s,a);else for(;t!==null;){if(t.tag===3){nf(t,s,a);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Dl===null||!Dl.has(l))){s=ga(a,s),a=rh(2),l=kl(t,a,2),l!==null&&(ih(a,l,t,s),zt(l,2),Ga(l));break}}t=t.return}}function Wd(s,t,a){var l=s.pingCache;if(l===null){l=s.pingCache=new Fv;var c=new Set;l.set(t,c)}else c=l.get(t),c===void 0&&(c=new Set,l.set(t,c));c.has(a)||(Qd=!0,c.add(a),s=Kv.bind(null,s,t,a),t.then(s,s))}function Kv(s,t,a){var l=s.pingCache;l!==null&&l.delete(t),s.pingedLanes|=s.suspendedLanes&a,s.warmLanes&=~a,$s===s&&(js&a)===a&&(ct===4||ct===3&&(js&62914560)===js&&300>Is()-mc?(ks&2)===0&&Xn(s,0):Id|=a,Yn===js&&(Yn=0)),Ga(s)}function rf(s,t){t===0&&(t=ue()),s=Zl(s,t),s!==null&&(zt(s,t),Ga(s))}function Xv(s){var t=s.memoizedState,a=0;t!==null&&(a=t.retryLane),rf(s,a)}function Jv(s,t){var a=0;switch(s.tag){case 31:case 13:var l=s.stateNode,c=s.memoizedState;c!==null&&(a=c.retryLane);break;case 19:l=s.stateNode;break;case 22:l=s.stateNode._retryCache;break;default:throw Error(d(314))}l!==null&&l.delete(t),rf(s,a)}function Pv(s,t){return Os(s,t)}var vc=null,Pn=null,eu=!1,bc=!1,su=!1,Ll=0;function Ga(s){s!==Pn&&s.next===null&&(Pn===null?vc=Pn=s:Pn=Pn.next=s),bc=!0,eu||(eu=!0,Wv())}function Xr(s,t){if(!su&&bc){su=!0;do for(var a=!1,l=vc;l!==null;){if(s!==0){var c=l.pendingLanes;if(c===0)var o=0;else{var h=l.suspendedLanes,v=l.pingedLanes;o=(1<<31-_s(42|s)+1)-1,o&=c&~(h&~v),o=o&201326741?o&201326741|1:o?o|2:0}o!==0&&(a=!0,uf(l,o))}else o=js,o=vt(l,l===$s?o:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(o&3)===0||$t(l,o)||(a=!0,uf(l,o));l=l.next}while(a);su=!1}}function Zv(){cf()}function cf(){bc=eu=!1;var s=0;Ll!==0&&ob()&&(s=Ll);for(var t=Is(),a=null,l=vc;l!==null;){var c=l.next,o=of(l,t);o===0?(l.next=null,a===null?vc=c:a.next=c,c===null&&(Pn=a)):(a=l,(s!==0||(o&3)!==0)&&(bc=!0)),l=c}kt!==0&&kt!==5||Xr(s),Ll!==0&&(Ll=0)}function of(s,t){for(var a=s.suspendedLanes,l=s.pingedLanes,c=s.expirationTimes,o=s.pendingLanes&-62914561;0<o;){var h=31-_s(o),v=1<<h,A=c[h];A===-1?((v&a)===0||(v&l)!==0)&&(c[h]=le(v,t)):A<=t&&(s.expiredLanes|=v),o&=~v}if(t=$s,a=js,a=vt(s,s===t?a:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),l=s.callbackNode,a===0||s===t&&(As===2||As===9)||s.cancelPendingCommit!==null)return l!==null&&l!==null&&Ts(l),s.callbackNode=null,s.callbackPriority=0;if((a&3)===0||$t(s,a)){if(t=a&-a,t===s.callbackPriority)return t;switch(l!==null&&Ts(l),Ea(a)){case 2:case 8:a=Oe;break;case 32:a=Xe;break;case 268435456:a=Je;break;default:a=Xe}return l=df.bind(null,s),a=Os(a,l),s.callbackPriority=t,s.callbackNode=a,t}return l!==null&&l!==null&&Ts(l),s.callbackPriority=2,s.callbackNode=null,2}function df(s,t){if(kt!==0&&kt!==5)return s.callbackNode=null,s.callbackPriority=0,null;var a=s.callbackNode;if(jc()&&s.callbackNode!==a)return null;var l=js;return l=vt(s,s===$s?l:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),l===0?null:(Vh(s,l,t),of(s,Is()),s.callbackNode!=null&&s.callbackNode===a?df.bind(null,s):null)}function uf(s,t){if(jc())return null;Vh(s,t,!0)}function Wv(){ub(function(){(ks&6)!==0?Os(Ge,Zv):cf()})}function tu(){if(Ll===0){var s=Ln;s===0&&(s=Xs,Xs<<=1,(Xs&261888)===0&&(Xs=256)),Ll=s}return Ll}function mf(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Ti(""+s)}function xf(s,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,s.id&&a.setAttribute("form",s.id),t.parentNode.insertBefore(a,t),s=new FormData(s),a.parentNode.removeChild(a),s}function eb(s,t,a,l,c){if(t==="submit"&&a&&a.stateNode===c){var o=mf((c[Ct]||null).action),h=l.submitter;h&&(t=(t=h[Ct]||null)?mf(t.formAction):h.getAttribute("formAction"),t!==null&&(o=t,h=null));var v=new Ai("action","action",null,l,c);s.push({event:v,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Ll!==0){var A=h?xf(c,h):new FormData(c);yd(a,{pending:!0,data:A,method:c.method,action:o},null,A)}}else typeof o=="function"&&(v.preventDefault(),A=h?xf(c,h):new FormData(c),yd(a,{pending:!0,data:A,method:c.method,action:o},o,A))},currentTarget:c}]})}}for(var au=0;au<Ho.length;au++){var lu=Ho[au],sb=lu.toLowerCase(),tb=lu[0].toUpperCase()+lu.slice(1);za(sb,"on"+tb)}za(Fm,"onAnimationEnd"),za(Vm,"onAnimationIteration"),za(Qm,"onAnimationStart"),za("dblclick","onDoubleClick"),za("focusin","onFocus"),za("focusout","onBlur"),za(jv,"onTransitionRun"),za(vv,"onTransitionStart"),za(bv,"onTransitionCancel"),za(Im,"onTransitionEnd"),yn("onMouseEnter",["mouseout","mouseover"]),yn("onMouseLeave",["mouseout","mouseover"]),yn("onPointerEnter",["pointerout","pointerover"]),yn("onPointerLeave",["pointerout","pointerover"]),Kl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Kl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Kl("onBeforeInput",["compositionend","keypress","textInput","paste"]),Kl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Kl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Kl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Jr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ab=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Jr));function hf(s,t){t=(t&4)!==0;for(var a=0;a<s.length;a++){var l=s[a],c=l.event;l=l.listeners;e:{var o=void 0;if(t)for(var h=l.length-1;0<=h;h--){var v=l[h],A=v.instance,Z=v.currentTarget;if(v=v.listener,A!==o&&c.isPropagationStopped())break e;o=v,c.currentTarget=Z;try{o(c)}catch(oe){Ri(oe)}c.currentTarget=null,o=A}else for(h=0;h<l.length;h++){if(v=l[h],A=v.instance,Z=v.currentTarget,v=v.listener,A!==o&&c.isPropagationStopped())break e;o=v,c.currentTarget=Z;try{o(c)}catch(oe){Ri(oe)}c.currentTarget=null,o=A}}}}function fs(s,t){var a=t[go];a===void 0&&(a=t[go]=new Set);var l=s+"__bubble";a.has(l)||(ff(t,s,2,!1),a.add(l))}function nu(s,t,a){var l=0;t&&(l|=4),ff(a,s,l,t)}var Nc="_reactListening"+Math.random().toString(36).slice(2);function ru(s){if(!s[Nc]){s[Nc]=!0,im.forEach(function(a){a!=="selectionchange"&&(ab.has(a)||nu(a,!1,s),nu(a,!0,s))});var t=s.nodeType===9?s:s.ownerDocument;t===null||t[Nc]||(t[Nc]=!0,nu("selectionchange",!1,t))}}function ff(s,t,a,l){switch(Vf(t)){case 2:var c=Mb;break;case 8:c=Ab;break;default:c=Nu}a=c.bind(null,t,a,s),c=void 0,!Co||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),l?c!==void 0?s.addEventListener(t,a,{capture:!0,passive:c}):s.addEventListener(t,a,!0):c!==void 0?s.addEventListener(t,a,{passive:c}):s.addEventListener(t,a,!1)}function iu(s,t,a,l,c){var o=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var h=l.tag;if(h===3||h===4){var v=l.stateNode.containerInfo;if(v===c)break;if(h===4)for(h=l.return;h!==null;){var A=h.tag;if((A===3||A===4)&&h.stateNode.containerInfo===c)return;h=h.return}for(;v!==null;){if(h=vn(v),h===null)return;if(A=h.tag,A===5||A===6||A===26||A===27){l=o=h;continue e}v=v.parentNode}}l=l.return}vm(function(){var Z=o,oe=_o(a),me=[];e:{var W=Ym.get(s);if(W!==void 0){var ne=Ai,De=s;switch(s){case"keypress":if(zi(a)===0)break e;case"keydown":case"keyup":ne=Jj;break;case"focusin":De="focus",ne=zo;break;case"focusout":De="blur",ne=zo;break;case"beforeblur":case"afterblur":ne=zo;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=ym;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=Bj;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=Wj;break;case Fm:case Vm:case Qm:ne=Gj;break;case Im:ne=sv;break;case"scroll":case"scrollend":ne=Lj;break;case"wheel":ne=av;break;case"copy":case"cut":case"paste":ne=Fj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=_m;break;case"toggle":case"beforetoggle":ne=nv}var Ye=(t&4)!==0,Us=!Ye&&(s==="scroll"||s==="scrollend"),G=Ye?W!==null?W+"Capture":null:W;Ye=[];for(var B=Z,P;B!==null;){var de=B;if(P=de.stateNode,de=de.tag,de!==5&&de!==26&&de!==27||P===null||G===null||(de=jr(B,G),de!=null&&Ye.push(Pr(B,de,P))),Us)break;B=B.return}0<Ye.length&&(W=new ne(W,De,null,a,oe),me.push({event:W,listeners:Ye}))}}if((t&7)===0){e:{if(W=s==="mouseover"||s==="pointerover",ne=s==="mouseout"||s==="pointerout",W&&a!==wo&&(De=a.relatedTarget||a.fromElement)&&(vn(De)||De[vl]))break e;if((ne||W)&&(W=oe.window===oe?oe:(W=oe.ownerDocument)?W.defaultView||W.parentWindow:window,ne?(De=a.relatedTarget||a.toElement,ne=Z,De=De?vn(De):null,De!==null&&(Us=x(De),Ye=De.tag,De!==Us||Ye!==5&&Ye!==27&&Ye!==6)&&(De=null)):(ne=null,De=Z),ne!==De)){if(Ye=ym,de="onMouseLeave",G="onMouseEnter",B="mouse",(s==="pointerout"||s==="pointerover")&&(Ye=_m,de="onPointerLeave",G="onPointerEnter",B="pointer"),Us=ne==null?W:gr(ne),P=De==null?W:gr(De),W=new Ye(de,B+"leave",ne,a,oe),W.target=Us,W.relatedTarget=P,de=null,vn(oe)===Z&&(Ye=new Ye(G,B+"enter",De,a,oe),Ye.target=P,Ye.relatedTarget=Us,de=Ye),Us=de,ne&&De)s:{for(Ye=lb,G=ne,B=De,P=0,de=G;de;de=Ye(de))P++;de=0;for(var $e=B;$e;$e=Ye($e))de++;for(;0<P-de;)G=Ye(G),P--;for(;0<de-P;)B=Ye(B),de--;for(;P--;){if(G===B||B!==null&&G===B.alternate){Ye=G;break s}G=Ye(G),B=Ye(B)}Ye=null}else Ye=null;ne!==null&&pf(me,W,ne,Ye,!1),De!==null&&Us!==null&&pf(me,Us,De,Ye,!0)}}e:{if(W=Z?gr(Z):window,ne=W.nodeName&&W.nodeName.toLowerCase(),ne==="select"||ne==="input"&&W.type==="file")var Ss=Am;else if(zm(W))if(Dm)Ss=fv;else{Ss=xv;var Le=mv}else ne=W.nodeName,!ne||ne.toLowerCase()!=="input"||W.type!=="checkbox"&&W.type!=="radio"?Z&&yo(Z.elementType)&&(Ss=Am):Ss=hv;if(Ss&&(Ss=Ss(s,Z))){Mm(me,Ss,a,oe);break e}Le&&Le(s,W,Z),s==="focusout"&&Z&&W.type==="number"&&Z.memoizedProps.value!=null&&No(W,"number",W.value)}switch(Le=Z?gr(Z):window,s){case"focusin":(zm(Le)||Le.contentEditable==="true")&&(Tn=Le,Lo=Z,Cr=null);break;case"focusout":Cr=Lo=Tn=null;break;case"mousedown":Uo=!0;break;case"contextmenu":case"mouseup":case"dragend":Uo=!1,Gm(me,a,oe);break;case"selectionchange":if(gv)break;case"keydown":case"keyup":Gm(me,a,oe)}var ts;if(Ao)e:{switch(s){case"compositionstart":var vs="onCompositionStart";break e;case"compositionend":vs="onCompositionEnd";break e;case"compositionupdate":vs="onCompositionUpdate";break e}vs=void 0}else kn?Tm(s,a)&&(vs="onCompositionEnd"):s==="keydown"&&a.keyCode===229&&(vs="onCompositionStart");vs&&(Sm&&a.locale!=="ko"&&(kn||vs!=="onCompositionStart"?vs==="onCompositionEnd"&&kn&&(ts=bm()):(bl=oe,ko="value"in bl?bl.value:bl.textContent,kn=!0)),Le=yc(Z,vs),0<Le.length&&(vs=new wm(vs,s,null,a,oe),me.push({event:vs,listeners:Le}),ts?vs.data=ts:(ts=Em(a),ts!==null&&(vs.data=ts)))),(ts=iv?cv(s,a):ov(s,a))&&(vs=yc(Z,"onBeforeInput"),0<vs.length&&(Le=new wm("onBeforeInput","beforeinput",null,a,oe),me.push({event:Le,listeners:vs}),Le.data=ts)),eb(me,s,Z,a,oe)}hf(me,t)})}function Pr(s,t,a){return{instance:s,listener:t,currentTarget:a}}function yc(s,t){for(var a=t+"Capture",l=[];s!==null;){var c=s,o=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||o===null||(c=jr(s,a),c!=null&&l.unshift(Pr(s,c,o)),c=jr(s,t),c!=null&&l.push(Pr(s,c,o))),s.tag===3)return l;s=s.return}return[]}function lb(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function pf(s,t,a,l,c){for(var o=t._reactName,h=[];a!==null&&a!==l;){var v=a,A=v.alternate,Z=v.stateNode;if(v=v.tag,A!==null&&A===l)break;v!==5&&v!==26&&v!==27||Z===null||(A=Z,c?(Z=jr(a,o),Z!=null&&h.unshift(Pr(a,Z,A))):c||(Z=jr(a,o),Z!=null&&h.push(Pr(a,Z,A)))),a=a.return}h.length!==0&&s.push({event:t,listeners:h})}var nb=/\r\n?/g,rb=/\u0000|\uFFFD/g;function gf(s){return(typeof s=="string"?s:""+s).replace(nb,`
`).replace(rb,"")}function jf(s,t){return t=gf(t),gf(s)===t}function Ls(s,t,a,l,c,o){switch(a){case"children":typeof l=="string"?t==="body"||t==="textarea"&&l===""||_n(s,l):(typeof l=="number"||typeof l=="bigint")&&t!=="body"&&_n(s,""+l);break;case"className":Ci(s,"class",l);break;case"tabIndex":Ci(s,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Ci(s,a,l);break;case"style":gm(s,l,o);break;case"data":if(t!=="object"){Ci(s,"data",l);break}case"src":case"href":if(l===""&&(t!=="a"||a!=="href")){s.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){s.removeAttribute(a);break}l=Ti(""+l),s.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){s.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof o=="function"&&(a==="formAction"?(t!=="input"&&Ls(s,t,"name",c.name,c,null),Ls(s,t,"formEncType",c.formEncType,c,null),Ls(s,t,"formMethod",c.formMethod,c,null),Ls(s,t,"formTarget",c.formTarget,c,null)):(Ls(s,t,"encType",c.encType,c,null),Ls(s,t,"method",c.method,c,null),Ls(s,t,"target",c.target,c,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){s.removeAttribute(a);break}l=Ti(""+l),s.setAttribute(a,l);break;case"onClick":l!=null&&(s.onclick=Xa);break;case"onScroll":l!=null&&fs("scroll",s);break;case"onScrollEnd":l!=null&&fs("scrollend",s);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(d(61));if(a=l.__html,a!=null){if(c.children!=null)throw Error(d(60));s.innerHTML=a}}break;case"multiple":s.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":s.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){s.removeAttribute("xlink:href");break}a=Ti(""+l),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?s.setAttribute(a,""+l):s.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?s.setAttribute(a,""):s.removeAttribute(a);break;case"capture":case"download":l===!0?s.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?s.setAttribute(a,l):s.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?s.setAttribute(a,l):s.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?s.removeAttribute(a):s.setAttribute(a,l);break;case"popover":fs("beforetoggle",s),fs("toggle",s),Si(s,"popover",l);break;case"xlinkActuate":Ka(s,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Ka(s,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Ka(s,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Ka(s,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Ka(s,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Ka(s,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Ka(s,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Ka(s,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Ka(s,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Si(s,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Oj.get(a)||a,Si(s,a,l))}}function cu(s,t,a,l,c,o){switch(a){case"style":gm(s,l,o);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(d(61));if(a=l.__html,a!=null){if(c.children!=null)throw Error(d(60));s.innerHTML=a}}break;case"children":typeof l=="string"?_n(s,l):(typeof l=="number"||typeof l=="bigint")&&_n(s,""+l);break;case"onScroll":l!=null&&fs("scroll",s);break;case"onScrollEnd":l!=null&&fs("scrollend",s);break;case"onClick":l!=null&&(s.onclick=Xa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!cm.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(c=a.endsWith("Capture"),t=a.slice(2,c?a.length-7:void 0),o=s[Ct]||null,o=o!=null?o[a]:null,typeof o=="function"&&s.removeEventListener(t,o,c),typeof l=="function")){typeof o!="function"&&o!==null&&(a in s?s[a]=null:s.hasAttribute(a)&&s.removeAttribute(a)),s.addEventListener(t,l,c);break e}a in s?s[a]=l:l===!0?s.setAttribute(a,""):Si(s,a,l)}}}function Ut(s,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":fs("error",s),fs("load",s);var l=!1,c=!1,o;for(o in a)if(a.hasOwnProperty(o)){var h=a[o];if(h!=null)switch(o){case"src":l=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(d(137,t));default:Ls(s,t,o,h,a,null)}}c&&Ls(s,t,"srcSet",a.srcSet,a,null),l&&Ls(s,t,"src",a.src,a,null);return;case"input":fs("invalid",s);var v=o=h=c=null,A=null,Z=null;for(l in a)if(a.hasOwnProperty(l)){var oe=a[l];if(oe!=null)switch(l){case"name":c=oe;break;case"type":h=oe;break;case"checked":A=oe;break;case"defaultChecked":Z=oe;break;case"value":o=oe;break;case"defaultValue":v=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(d(137,t));break;default:Ls(s,t,l,oe,a,null)}}xm(s,o,v,A,Z,h,c,!1);return;case"select":fs("invalid",s),l=h=o=null;for(c in a)if(a.hasOwnProperty(c)&&(v=a[c],v!=null))switch(c){case"value":o=v;break;case"defaultValue":h=v;break;case"multiple":l=v;default:Ls(s,t,c,v,a,null)}t=o,a=h,s.multiple=!!l,t!=null?wn(s,!!l,t,!1):a!=null&&wn(s,!!l,a,!0);return;case"textarea":fs("invalid",s),o=c=l=null;for(h in a)if(a.hasOwnProperty(h)&&(v=a[h],v!=null))switch(h){case"value":l=v;break;case"defaultValue":c=v;break;case"children":o=v;break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(d(91));break;default:Ls(s,t,h,v,a,null)}fm(s,l,c,o);return;case"option":for(A in a)if(a.hasOwnProperty(A)&&(l=a[A],l!=null))switch(A){case"selected":s.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Ls(s,t,A,l,a,null)}return;case"dialog":fs("beforetoggle",s),fs("toggle",s),fs("cancel",s),fs("close",s);break;case"iframe":case"object":fs("load",s);break;case"video":case"audio":for(l=0;l<Jr.length;l++)fs(Jr[l],s);break;case"image":fs("error",s),fs("load",s);break;case"details":fs("toggle",s);break;case"embed":case"source":case"link":fs("error",s),fs("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Z in a)if(a.hasOwnProperty(Z)&&(l=a[Z],l!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":throw Error(d(137,t));default:Ls(s,t,Z,l,a,null)}return;default:if(yo(t)){for(oe in a)a.hasOwnProperty(oe)&&(l=a[oe],l!==void 0&&cu(s,t,oe,l,a,void 0));return}}for(v in a)a.hasOwnProperty(v)&&(l=a[v],l!=null&&Ls(s,t,v,l,a,null))}function ib(s,t,a,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,o=null,h=null,v=null,A=null,Z=null,oe=null;for(ne in a){var me=a[ne];if(a.hasOwnProperty(ne)&&me!=null)switch(ne){case"checked":break;case"value":break;case"defaultValue":A=me;default:l.hasOwnProperty(ne)||Ls(s,t,ne,null,l,me)}}for(var W in l){var ne=l[W];if(me=a[W],l.hasOwnProperty(W)&&(ne!=null||me!=null))switch(W){case"type":o=ne;break;case"name":c=ne;break;case"checked":Z=ne;break;case"defaultChecked":oe=ne;break;case"value":h=ne;break;case"defaultValue":v=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(d(137,t));break;default:ne!==me&&Ls(s,t,W,ne,l,me)}}bo(s,h,v,A,Z,oe,o,c);return;case"select":ne=h=v=W=null;for(o in a)if(A=a[o],a.hasOwnProperty(o)&&A!=null)switch(o){case"value":break;case"multiple":ne=A;default:l.hasOwnProperty(o)||Ls(s,t,o,null,l,A)}for(c in l)if(o=l[c],A=a[c],l.hasOwnProperty(c)&&(o!=null||A!=null))switch(c){case"value":W=o;break;case"defaultValue":v=o;break;case"multiple":h=o;default:o!==A&&Ls(s,t,c,o,l,A)}t=v,a=h,l=ne,W!=null?wn(s,!!a,W,!1):!!l!=!!a&&(t!=null?wn(s,!!a,t,!0):wn(s,!!a,a?[]:"",!1));return;case"textarea":ne=W=null;for(v in a)if(c=a[v],a.hasOwnProperty(v)&&c!=null&&!l.hasOwnProperty(v))switch(v){case"value":break;case"children":break;default:Ls(s,t,v,null,l,c)}for(h in l)if(c=l[h],o=a[h],l.hasOwnProperty(h)&&(c!=null||o!=null))switch(h){case"value":W=c;break;case"defaultValue":ne=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(d(91));break;default:c!==o&&Ls(s,t,h,c,l,o)}hm(s,W,ne);return;case"option":for(var De in a)if(W=a[De],a.hasOwnProperty(De)&&W!=null&&!l.hasOwnProperty(De))switch(De){case"selected":s.selected=!1;break;default:Ls(s,t,De,null,l,W)}for(A in l)if(W=l[A],ne=a[A],l.hasOwnProperty(A)&&W!==ne&&(W!=null||ne!=null))switch(A){case"selected":s.selected=W&&typeof W!="function"&&typeof W!="symbol";break;default:Ls(s,t,A,W,l,ne)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ye in a)W=a[Ye],a.hasOwnProperty(Ye)&&W!=null&&!l.hasOwnProperty(Ye)&&Ls(s,t,Ye,null,l,W);for(Z in l)if(W=l[Z],ne=a[Z],l.hasOwnProperty(Z)&&W!==ne&&(W!=null||ne!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(d(137,t));break;default:Ls(s,t,Z,W,l,ne)}return;default:if(yo(t)){for(var Us in a)W=a[Us],a.hasOwnProperty(Us)&&W!==void 0&&!l.hasOwnProperty(Us)&&cu(s,t,Us,void 0,l,W);for(oe in l)W=l[oe],ne=a[oe],!l.hasOwnProperty(oe)||W===ne||W===void 0&&ne===void 0||cu(s,t,oe,W,l,ne);return}}for(var G in a)W=a[G],a.hasOwnProperty(G)&&W!=null&&!l.hasOwnProperty(G)&&Ls(s,t,G,null,l,W);for(me in l)W=l[me],ne=a[me],!l.hasOwnProperty(me)||W===ne||W==null&&ne==null||Ls(s,t,me,W,l,ne)}function vf(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function cb(){if(typeof performance.getEntriesByType=="function"){for(var s=0,t=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var c=a[l],o=c.transferSize,h=c.initiatorType,v=c.duration;if(o&&v&&vf(h)){for(h=0,v=c.responseEnd,l+=1;l<a.length;l++){var A=a[l],Z=A.startTime;if(Z>v)break;var oe=A.transferSize,me=A.initiatorType;oe&&vf(me)&&(A=A.responseEnd,h+=oe*(A<v?1:(v-Z)/(A-Z)))}if(--l,t+=8*(o+h)/(c.duration/1e3),s++,10<s)break}}if(0<s)return t/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var ou=null,du=null;function wc(s){return s.nodeType===9?s:s.ownerDocument}function bf(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Nf(s,t){if(s===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&t==="foreignObject"?0:s}function uu(s,t){return s==="textarea"||s==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var mu=null;function ob(){var s=window.event;return s&&s.type==="popstate"?s===mu?!1:(mu=s,!0):(mu=null,!1)}var yf=typeof setTimeout=="function"?setTimeout:void 0,db=typeof clearTimeout=="function"?clearTimeout:void 0,wf=typeof Promise=="function"?Promise:void 0,ub=typeof queueMicrotask=="function"?queueMicrotask:typeof wf<"u"?function(s){return wf.resolve(null).then(s).catch(mb)}:yf;function mb(s){setTimeout(function(){throw s})}function Ul(s){return s==="head"}function _f(s,t){var a=t,l=0;do{var c=a.nextSibling;if(s.removeChild(a),c&&c.nodeType===8)if(a=c.data,a==="/$"||a==="/&"){if(l===0){s.removeChild(c),sr(t);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Zr(s.ownerDocument.documentElement);else if(a==="head"){a=s.ownerDocument.head,Zr(a);for(var o=a.firstChild;o;){var h=o.nextSibling,v=o.nodeName;o[pr]||v==="SCRIPT"||v==="STYLE"||v==="LINK"&&o.rel.toLowerCase()==="stylesheet"||a.removeChild(o),o=h}}else a==="body"&&Zr(s.ownerDocument.body);a=c}while(a);sr(t)}function Sf(s,t){var a=s;s=0;do{var l=a.nextSibling;if(a.nodeType===1?t?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(t?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(s===0)break;s--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||s++;a=l}while(a)}function xu(s){var t=s.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":xu(a),jo(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}s.removeChild(a)}}function xb(s,t,a,l){for(;s.nodeType===1;){var c=a;if(s.nodeName.toLowerCase()!==t.toLowerCase()){if(!l&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(l){if(!s[pr])switch(t){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(o=s.getAttribute("rel"),o==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(o!==c.rel||s.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||s.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||s.getAttribute("title")!==(c.title==null?null:c.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(o=s.getAttribute("src"),(o!==(c.src==null?null:c.src)||s.getAttribute("type")!==(c.type==null?null:c.type)||s.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&o&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(t==="input"&&s.type==="hidden"){var o=c.name==null?null:""+c.name;if(c.type==="hidden"&&s.getAttribute("name")===o)return s}else return s;if(s=ya(s.nextSibling),s===null)break}return null}function hb(s,t,a){if(t==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!a||(s=ya(s.nextSibling),s===null))return null;return s}function Cf(s,t){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!t||(s=ya(s.nextSibling),s===null))return null;return s}function hu(s){return s.data==="$?"||s.data==="$~"}function fu(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function fb(s,t){var a=s.ownerDocument;if(s.data==="$~")s._reactRetry=t;else if(s.data!=="$?"||a.readyState!=="loading")t();else{var l=function(){t(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),s._reactRetry=l}}function ya(s){for(;s!=null;s=s.nextSibling){var t=s.nodeType;if(t===1||t===3)break;if(t===8){if(t=s.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return s}var pu=null;function kf(s){s=s.nextSibling;for(var t=0;s;){if(s.nodeType===8){var a=s.data;if(a==="/$"||a==="/&"){if(t===0)return ya(s.nextSibling);t--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||t++}s=s.nextSibling}return null}function Tf(s){s=s.previousSibling;for(var t=0;s;){if(s.nodeType===8){var a=s.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(t===0)return s;t--}else a!=="/$"&&a!=="/&"||t++}s=s.previousSibling}return null}function Ef(s,t,a){switch(t=wc(a),s){case"html":if(s=t.documentElement,!s)throw Error(d(452));return s;case"head":if(s=t.head,!s)throw Error(d(453));return s;case"body":if(s=t.body,!s)throw Error(d(454));return s;default:throw Error(d(451))}}function Zr(s){for(var t=s.attributes;t.length;)s.removeAttributeNode(t[0]);jo(s)}var wa=new Map,zf=new Set;function _c(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var ul=X.d;X.d={f:pb,r:gb,D:jb,C:vb,L:bb,m:Nb,X:wb,S:yb,M:_b};function pb(){var s=ul.f(),t=fc();return s||t}function gb(s){var t=bn(s);t!==null&&t.tag===5&&t.type==="form"?Ix(t):ul.r(s)}var Zn=typeof document>"u"?null:document;function Mf(s,t,a){var l=Zn;if(l&&typeof t=="string"&&t){var c=fa(t);c='link[rel="'+s+'"][href="'+c+'"]',typeof a=="string"&&(c+='[crossorigin="'+a+'"]'),zf.has(c)||(zf.add(c),s={rel:s,crossOrigin:a,href:t},l.querySelector(c)===null&&(t=l.createElement("link"),Ut(t,"link",s),At(t),l.head.appendChild(t)))}}function jb(s){ul.D(s),Mf("dns-prefetch",s,null)}function vb(s,t){ul.C(s,t),Mf("preconnect",s,t)}function bb(s,t,a){ul.L(s,t,a);var l=Zn;if(l&&s&&t){var c='link[rel="preload"][as="'+fa(t)+'"]';t==="image"&&a&&a.imageSrcSet?(c+='[imagesrcset="'+fa(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(c+='[imagesizes="'+fa(a.imageSizes)+'"]')):c+='[href="'+fa(s)+'"]';var o=c;switch(t){case"style":o=Wn(s);break;case"script":o=er(s)}wa.has(o)||(s=y({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:s,as:t},a),wa.set(o,s),l.querySelector(c)!==null||t==="style"&&l.querySelector(Wr(o))||t==="script"&&l.querySelector(ei(o))||(t=l.createElement("link"),Ut(t,"link",s),At(t),l.head.appendChild(t)))}}function Nb(s,t){ul.m(s,t);var a=Zn;if(a&&s){var l=t&&typeof t.as=="string"?t.as:"script",c='link[rel="modulepreload"][as="'+fa(l)+'"][href="'+fa(s)+'"]',o=c;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":o=er(s)}if(!wa.has(o)&&(s=y({rel:"modulepreload",href:s},t),wa.set(o,s),a.querySelector(c)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(ei(o)))return}l=a.createElement("link"),Ut(l,"link",s),At(l),a.head.appendChild(l)}}}function yb(s,t,a){ul.S(s,t,a);var l=Zn;if(l&&s){var c=Nn(l).hoistableStyles,o=Wn(s);t=t||"default";var h=c.get(o);if(!h){var v={loading:0,preload:null};if(h=l.querySelector(Wr(o)))v.loading=5;else{s=y({rel:"stylesheet",href:s,"data-precedence":t},a),(a=wa.get(o))&&gu(s,a);var A=h=l.createElement("link");At(A),Ut(A,"link",s),A._p=new Promise(function(Z,oe){A.onload=Z,A.onerror=oe}),A.addEventListener("load",function(){v.loading|=1}),A.addEventListener("error",function(){v.loading|=2}),v.loading|=4,Sc(h,t,l)}h={type:"stylesheet",instance:h,count:1,state:v},c.set(o,h)}}}function wb(s,t){ul.X(s,t);var a=Zn;if(a&&s){var l=Nn(a).hoistableScripts,c=er(s),o=l.get(c);o||(o=a.querySelector(ei(c)),o||(s=y({src:s,async:!0},t),(t=wa.get(c))&&ju(s,t),o=a.createElement("script"),At(o),Ut(o,"link",s),a.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},l.set(c,o))}}function _b(s,t){ul.M(s,t);var a=Zn;if(a&&s){var l=Nn(a).hoistableScripts,c=er(s),o=l.get(c);o||(o=a.querySelector(ei(c)),o||(s=y({src:s,async:!0,type:"module"},t),(t=wa.get(c))&&ju(s,t),o=a.createElement("script"),At(o),Ut(o,"link",s),a.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},l.set(c,o))}}function Af(s,t,a,l){var c=(c=fe.current)?_c(c):null;if(!c)throw Error(d(446));switch(s){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=Wn(a.href),a=Nn(c).hoistableStyles,l=a.get(t),l||(l={type:"style",instance:null,count:0,state:null},a.set(t,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){s=Wn(a.href);var o=Nn(c).hoistableStyles,h=o.get(s);if(h||(c=c.ownerDocument||c,h={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},o.set(s,h),(o=c.querySelector(Wr(s)))&&!o._p&&(h.instance=o,h.state.loading=5),wa.has(s)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},wa.set(s,a),o||Sb(c,s,a,h.state))),t&&l===null)throw Error(d(528,""));return h}if(t&&l!==null)throw Error(d(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=er(a),a=Nn(c).hoistableScripts,l=a.get(t),l||(l={type:"script",instance:null,count:0,state:null},a.set(t,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(d(444,s))}}function Wn(s){return'href="'+fa(s)+'"'}function Wr(s){return'link[rel="stylesheet"]['+s+"]"}function Df(s){return y({},s,{"data-precedence":s.precedence,precedence:null})}function Sb(s,t,a,l){s.querySelector('link[rel="preload"][as="style"]['+t+"]")?l.loading=1:(t=s.createElement("link"),l.preload=t,t.addEventListener("load",function(){return l.loading|=1}),t.addEventListener("error",function(){return l.loading|=2}),Ut(t,"link",a),At(t),s.head.appendChild(t))}function er(s){return'[src="'+fa(s)+'"]'}function ei(s){return"script[async]"+s}function Of(s,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var l=s.querySelector('style[data-href~="'+fa(a.href)+'"]');if(l)return t.instance=l,At(l),l;var c=y({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(s.ownerDocument||s).createElement("style"),At(l),Ut(l,"style",c),Sc(l,a.precedence,s),t.instance=l;case"stylesheet":c=Wn(a.href);var o=s.querySelector(Wr(c));if(o)return t.state.loading|=4,t.instance=o,At(o),o;l=Df(a),(c=wa.get(c))&&gu(l,c),o=(s.ownerDocument||s).createElement("link"),At(o);var h=o;return h._p=new Promise(function(v,A){h.onload=v,h.onerror=A}),Ut(o,"link",l),t.state.loading|=4,Sc(o,a.precedence,s),t.instance=o;case"script":return o=er(a.src),(c=s.querySelector(ei(o)))?(t.instance=c,At(c),c):(l=a,(c=wa.get(o))&&(l=y({},a),ju(l,c)),s=s.ownerDocument||s,c=s.createElement("script"),At(c),Ut(c,"link",l),s.head.appendChild(c),t.instance=c);case"void":return null;default:throw Error(d(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(l=t.instance,t.state.loading|=4,Sc(l,a.precedence,s));return t.instance}function Sc(s,t,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=l.length?l[l.length-1]:null,o=c,h=0;h<l.length;h++){var v=l[h];if(v.dataset.precedence===t)o=v;else if(o!==c)break}o?o.parentNode.insertBefore(s,o.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(s,t.firstChild))}function gu(s,t){s.crossOrigin==null&&(s.crossOrigin=t.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=t.referrerPolicy),s.title==null&&(s.title=t.title)}function ju(s,t){s.crossOrigin==null&&(s.crossOrigin=t.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=t.referrerPolicy),s.integrity==null&&(s.integrity=t.integrity)}var Cc=null;function Rf(s,t,a){if(Cc===null){var l=new Map,c=Cc=new Map;c.set(a,l)}else c=Cc,l=c.get(a),l||(l=new Map,c.set(a,l));if(l.has(s))return l;for(l.set(s,null),a=a.getElementsByTagName(s),c=0;c<a.length;c++){var o=a[c];if(!(o[pr]||o[Ns]||s==="link"&&o.getAttribute("rel")==="stylesheet")&&o.namespaceURI!=="http://www.w3.org/2000/svg"){var h=o.getAttribute(t)||"";h=s+h;var v=l.get(h);v?v.push(o):l.set(h,[o])}}return l}function Lf(s,t,a){s=s.ownerDocument||s,s.head.insertBefore(a,t==="title"?s.querySelector("head > title"):null)}function Cb(s,t,a){if(a===1||t.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return s=t.disabled,typeof t.precedence=="string"&&s==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Uf(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function kb(s,t,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var c=Wn(l.href),o=t.querySelector(Wr(c));if(o){t=o._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(s.count++,s=kc.bind(s),t.then(s,s)),a.state.loading|=4,a.instance=o,At(o);return}o=t.ownerDocument||t,l=Df(l),(c=wa.get(c))&&gu(l,c),o=o.createElement("link"),At(o);var h=o;h._p=new Promise(function(v,A){h.onload=v,h.onerror=A}),Ut(o,"link",l),a.instance=o}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(a,t),(t=a.state.preload)&&(a.state.loading&3)===0&&(s.count++,a=kc.bind(s),t.addEventListener("load",a),t.addEventListener("error",a))}}var vu=0;function Tb(s,t){return s.stylesheets&&s.count===0&&Ec(s,s.stylesheets),0<s.count||0<s.imgCount?function(a){var l=setTimeout(function(){if(s.stylesheets&&Ec(s,s.stylesheets),s.unsuspend){var o=s.unsuspend;s.unsuspend=null,o()}},6e4+t);0<s.imgBytes&&vu===0&&(vu=62500*cb());var c=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&Ec(s,s.stylesheets),s.unsuspend)){var o=s.unsuspend;s.unsuspend=null,o()}},(s.imgBytes>vu?50:800)+t);return s.unsuspend=a,function(){s.unsuspend=null,clearTimeout(l),clearTimeout(c)}}:null}function kc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ec(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Tc=null;function Ec(s,t){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Tc=new Map,t.forEach(Eb,s),Tc=null,kc.call(s))}function Eb(s,t){if(!(t.state.loading&4)){var a=Tc.get(s);if(a)var l=a.get(null);else{a=new Map,Tc.set(s,a);for(var c=s.querySelectorAll("link[data-precedence],style[data-precedence]"),o=0;o<c.length;o++){var h=c[o];(h.nodeName==="LINK"||h.getAttribute("media")!=="not all")&&(a.set(h.dataset.precedence,h),l=h)}l&&a.set(null,l)}c=t.instance,h=c.getAttribute("data-precedence"),o=a.get(h)||l,o===l&&a.set(null,c),a.set(h,c),this.count++,l=kc.bind(this),c.addEventListener("load",l),c.addEventListener("error",l),o?o.parentNode.insertBefore(c,o.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(c,s.firstChild)),t.state.loading|=4}}var si={$$typeof:R,Provider:null,Consumer:null,_currentValue:J,_currentValue2:J,_threadCount:0};function zb(s,t,a,l,c,o,h,v,A){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=bs(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bs(0),this.hiddenUpdates=bs(null),this.identifierPrefix=l,this.onUncaughtError=c,this.onCaughtError=o,this.onRecoverableError=h,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function Bf(s,t,a,l,c,o,h,v,A,Z,oe,me){return s=new zb(s,t,a,h,A,Z,oe,me,v),t=1,o===!0&&(t|=24),o=la(3,null,null,t),s.current=o,o.stateNode=s,t=Zo(),t.refCount++,s.pooledCache=t,t.refCount++,o.memoizedState={element:l,isDehydrated:a,cache:t},td(o),s}function Hf(s){return s?(s=Mn,s):Mn}function qf(s,t,a,l,c,o){c=Hf(c),l.context===null?l.context=c:l.pendingContext=c,l=Cl(t),l.payload={element:a},o=o===void 0?null:o,o!==null&&(l.callback=o),a=kl(s,l,t),a!==null&&(Pt(a,s,t),Dr(a,s,t))}function Gf(s,t){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var a=s.retryLane;s.retryLane=a!==0&&a<t?a:t}}function bu(s,t){Gf(s,t),(s=s.alternate)&&Gf(s,t)}function $f(s){if(s.tag===13||s.tag===31){var t=Zl(s,67108864);t!==null&&Pt(t,s,67108864),bu(s,67108864)}}function Ff(s){if(s.tag===13||s.tag===31){var t=oa();t=zs(t);var a=Zl(s,t);a!==null&&Pt(a,s,t),bu(s,t)}}var zc=!0;function Mb(s,t,a,l){var c=D.T;D.T=null;var o=X.p;try{X.p=2,Nu(s,t,a,l)}finally{X.p=o,D.T=c}}function Ab(s,t,a,l){var c=D.T;D.T=null;var o=X.p;try{X.p=8,Nu(s,t,a,l)}finally{X.p=o,D.T=c}}function Nu(s,t,a,l){if(zc){var c=yu(l);if(c===null)iu(s,t,l,Mc,a),Qf(s,l);else if(Ob(c,s,t,a,l))l.stopPropagation();else if(Qf(s,l),t&4&&-1<Db.indexOf(s)){for(;c!==null;){var o=bn(c);if(o!==null)switch(o.tag){case 3:if(o=o.stateNode,o.current.memoizedState.isDehydrated){var h=xa(o.pendingLanes);if(h!==0){var v=o;for(v.pendingLanes|=2,v.entangledLanes|=2;h;){var A=1<<31-_s(h);v.entanglements[1]|=A,h&=~A}Ga(o),(ks&6)===0&&(xc=Is()+500,Xr(0))}}break;case 31:case 13:v=Zl(o,2),v!==null&&Pt(v,o,2),fc(),bu(o,2)}if(o=yu(l),o===null&&iu(s,t,l,Mc,a),o===c)break;c=o}c!==null&&l.stopPropagation()}else iu(s,t,l,null,a)}}function yu(s){return s=_o(s),wu(s)}var Mc=null;function wu(s){if(Mc=null,s=vn(s),s!==null){var t=x(s);if(t===null)s=null;else{var a=t.tag;if(a===13){if(s=f(t),s!==null)return s;s=null}else if(a===31){if(s=p(t),s!==null)return s;s=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;s=null}else t!==s&&(s=null)}}return Mc=s,null}function Vf(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Y()){case Ge:return 2;case Oe:return 8;case Xe:case Gs:return 32;case Je:return 268435456;default:return 32}default:return 32}}var _u=!1,Bl=null,Hl=null,ql=null,ti=new Map,ai=new Map,Gl=[],Db="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Qf(s,t){switch(s){case"focusin":case"focusout":Bl=null;break;case"dragenter":case"dragleave":Hl=null;break;case"mouseover":case"mouseout":ql=null;break;case"pointerover":case"pointerout":ti.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ai.delete(t.pointerId)}}function li(s,t,a,l,c,o){return s===null||s.nativeEvent!==o?(s={blockedOn:t,domEventName:a,eventSystemFlags:l,nativeEvent:o,targetContainers:[c]},t!==null&&(t=bn(t),t!==null&&$f(t)),s):(s.eventSystemFlags|=l,t=s.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),s)}function Ob(s,t,a,l,c){switch(t){case"focusin":return Bl=li(Bl,s,t,a,l,c),!0;case"dragenter":return Hl=li(Hl,s,t,a,l,c),!0;case"mouseover":return ql=li(ql,s,t,a,l,c),!0;case"pointerover":var o=c.pointerId;return ti.set(o,li(ti.get(o)||null,s,t,a,l,c)),!0;case"gotpointercapture":return o=c.pointerId,ai.set(o,li(ai.get(o)||null,s,t,a,l,c)),!0}return!1}function If(s){var t=vn(s.target);if(t!==null){var a=x(t);if(a!==null){if(t=a.tag,t===13){if(t=f(a),t!==null){s.blockedOn=t,rt(s.priority,function(){Ff(a)});return}}else if(t===31){if(t=p(a),t!==null){s.blockedOn=t,rt(s.priority,function(){Ff(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){s.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Ac(s){if(s.blockedOn!==null)return!1;for(var t=s.targetContainers;0<t.length;){var a=yu(s.nativeEvent);if(a===null){a=s.nativeEvent;var l=new a.constructor(a.type,a);wo=l,a.target.dispatchEvent(l),wo=null}else return t=bn(a),t!==null&&$f(t),s.blockedOn=a,!1;t.shift()}return!0}function Yf(s,t,a){Ac(s)&&a.delete(t)}function Rb(){_u=!1,Bl!==null&&Ac(Bl)&&(Bl=null),Hl!==null&&Ac(Hl)&&(Hl=null),ql!==null&&Ac(ql)&&(ql=null),ti.forEach(Yf),ai.forEach(Yf)}function Dc(s,t){s.blockedOn===t&&(s.blockedOn=null,_u||(_u=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Rb)))}var Oc=null;function Kf(s){Oc!==s&&(Oc=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Oc===s&&(Oc=null);for(var t=0;t<s.length;t+=3){var a=s[t],l=s[t+1],c=s[t+2];if(typeof l!="function"){if(wu(l||a)===null)continue;break}var o=bn(a);o!==null&&(s.splice(t,3),t-=3,yd(o,{pending:!0,data:c,method:a.method,action:l},l,c))}}))}function sr(s){function t(A){return Dc(A,s)}Bl!==null&&Dc(Bl,s),Hl!==null&&Dc(Hl,s),ql!==null&&Dc(ql,s),ti.forEach(t),ai.forEach(t);for(var a=0;a<Gl.length;a++){var l=Gl[a];l.blockedOn===s&&(l.blockedOn=null)}for(;0<Gl.length&&(a=Gl[0],a.blockedOn===null);)If(a),a.blockedOn===null&&Gl.shift();if(a=(s.ownerDocument||s).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var c=a[l],o=a[l+1],h=c[Ct]||null;if(typeof o=="function")h||Kf(a);else if(h){var v=null;if(o&&o.hasAttribute("formAction")){if(c=o,h=o[Ct]||null)v=h.formAction;else if(wu(c)!==null)continue}else v=h.action;typeof v=="function"?a[l+1]=v:(a.splice(l,3),l-=3),Kf(a)}}}function Xf(){function s(o){o.canIntercept&&o.info==="react-transition"&&o.intercept({handler:function(){return new Promise(function(h){return c=h})},focusReset:"manual",scroll:"manual"})}function t(){c!==null&&(c(),c=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var o=navigation.currentEntry;o&&o.url!=null&&navigation.navigate(o.url,{state:o.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,c=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),c!==null&&(c(),c=null)}}}function Su(s){this._internalRoot=s}Rc.prototype.render=Su.prototype.render=function(s){var t=this._internalRoot;if(t===null)throw Error(d(409));var a=t.current,l=oa();qf(a,l,s,t,null,null)},Rc.prototype.unmount=Su.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var t=s.containerInfo;qf(s.current,2,null,s,null,null),fc(),t[vl]=null}};function Rc(s){this._internalRoot=s}Rc.prototype.unstable_scheduleHydration=function(s){if(s){var t=Qt();s={blockedOn:null,target:s,priority:t};for(var a=0;a<Gl.length&&t!==0&&t<Gl[a].priority;a++);Gl.splice(a,0,s),a===0&&If(s)}};var Jf=r.version;if(Jf!=="19.2.1")throw Error(d(527,Jf,"19.2.1"));X.findDOMNode=function(s){var t=s._reactInternals;if(t===void 0)throw typeof s.render=="function"?Error(d(188)):(s=Object.keys(s).join(","),Error(d(268,s)));return s=b(t),s=s!==null?j(s):null,s=s===null?null:s.stateNode,s};var Lb={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:D,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Lc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lc.isDisabled&&Lc.supportsFiber)try{Es=Lc.inject(Lb),Ae=Lc}catch{}}return ri.createRoot=function(s,t){if(!m(s))throw Error(d(299));var a=!1,l="",c=th,o=ah,h=lh;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onUncaughtError!==void 0&&(c=t.onUncaughtError),t.onCaughtError!==void 0&&(o=t.onCaughtError),t.onRecoverableError!==void 0&&(h=t.onRecoverableError)),t=Bf(s,1,!1,null,null,a,l,null,c,o,h,Xf),s[vl]=t.current,ru(s),new Su(t)},ri.hydrateRoot=function(s,t,a){if(!m(s))throw Error(d(299));var l=!1,c="",o=th,h=ah,v=lh,A=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(c=a.identifierPrefix),a.onUncaughtError!==void 0&&(o=a.onUncaughtError),a.onCaughtError!==void 0&&(h=a.onCaughtError),a.onRecoverableError!==void 0&&(v=a.onRecoverableError),a.formState!==void 0&&(A=a.formState)),t=Bf(s,1,!0,t,a??null,l,c,A,o,h,v,Xf),t.context=Hf(null),a=t.current,l=oa(),l=zs(l),c=Cl(l),c.callback=null,kl(a,c,l),a=l,t.current.lanes=a,zt(t,a),Ga(t),s[vl]=t.current,ru(s),new Rc(t)},ri.version="19.2.1",ri}var rp;function d0(){if(rp)return zu.exports;rp=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(r){console.error(r)}}return n(),zu.exports=o0(),zu.exports}var u0=d0();function H(...n){return Kb(Xb(n))}const Ve=u.forwardRef(({className:n,...r},i)=>e.jsx("div",{ref:i,className:H("rounded-xl border bg-card text-card-foreground shadow",n),...r}));Ve.displayName="Card";const ls=u.forwardRef(({className:n,...r},i)=>e.jsx("div",{ref:i,className:H("flex flex-col space-y-1.5 p-6",n),...r}));ls.displayName="CardHeader";const ns=u.forwardRef(({className:n,...r},i)=>e.jsx("div",{ref:i,className:H("font-semibold leading-none tracking-tight",n),...r}));ns.displayName="CardTitle";const tt=u.forwardRef(({className:n,...r},i)=>e.jsx("div",{ref:i,className:H("text-sm text-muted-foreground",n),...r}));tt.displayName="CardDescription";const ps=u.forwardRef(({className:n,...r},i)=>e.jsx("div",{ref:i,className:H("p-6 pt-0",n),...r}));ps.displayName="CardContent";const Cg=u.forwardRef(({className:n,...r},i)=>e.jsx("div",{ref:i,className:H("flex items-center p-6 pt-0",n),...r}));Cg.displayName="CardFooter";const Ca=Jb,ma=u.forwardRef(({className:n,...r},i)=>e.jsx(Cp,{ref:i,className:H("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",n),...r}));ma.displayName=Cp.displayName;const as=u.forwardRef(({className:n,...r},i)=>e.jsx(kp,{ref:i,className:H("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all duration-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",n),...r}));as.displayName=kp.displayName;const Ms=u.forwardRef(({className:n,...r},i)=>e.jsx(Tp,{ref:i,className:H("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 data-[state=active]:animate-in data-[state=active]:fade-in data-[state=active]:duration-300",n),...r}));Ms.displayName=Tp.displayName;const Ze=u.forwardRef(({className:n,children:r,viewportRef:i,...d},m)=>e.jsxs(Ep,{ref:m,className:H("relative overflow-hidden",n),...d,children:[e.jsx(Pb,{ref:i,className:"h-full w-full rounded-[inherit]",children:r}),e.jsx(Vu,{}),e.jsx(Vu,{orientation:"horizontal"}),e.jsx(Zb,{})]}));Ze.displayName=Ep.displayName;const Vu=u.forwardRef(({className:n,orientation:r="vertical",...i},d)=>e.jsx(zp,{ref:d,orientation:r,className:H("flex touch-none select-none transition-colors",r==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",r==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",n),...i,children:e.jsx(Wb,{className:"relative flex-1 rounded-full bg-border"})}));Vu.displayName=zp.displayName;function kg({className:n,...r}){return e.jsx("div",{className:H("animate-pulse rounded-md bg-primary/10",n),...r})}const hr=u.forwardRef(({className:n,value:r,...i},d)=>e.jsx(Mp,{ref:d,className:H("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",n),...i,children:e.jsx(eN,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(r||0)}%)`}})}));hr.displayName=Mp.displayName;const m0={light:"",dark:".dark"},Tg=u.createContext(null);function Eg(){const n=u.useContext(Tg);if(!n)throw new Error("useChart must be used within a <ChartContainer />");return n}const ar=u.forwardRef(({id:n,className:r,children:i,config:d,...m},x)=>{const f=u.useId(),p=`chart-${n||f.replace(/:/g,"")}`;return e.jsx(Tg.Provider,{value:{config:d},children:e.jsxs("div",{"data-chart":p,ref:x,className:H("flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none",r),...m,children:[e.jsx(x0,{id:p,config:d}),e.jsx(pN,{children:i})]})})});ar.displayName="Chart";const x0=({id:n,config:r})=>{const i=Object.entries(r).filter(([,d])=>d.theme||d.color);return i.length?e.jsx("style",{dangerouslySetInnerHTML:{__html:Object.entries(m0).map(([d,m])=>`
${m} [data-chart=${n}] {
${i.map(([x,f])=>{const p=f.theme?.[d]||f.color;return p?`  --color-${x}: ${p};`:null}).join(`
`)}
}
`).join(`
`)}}):null},ii=gN,lr=u.forwardRef(({active:n,payload:r,className:i,indicator:d="dot",hideLabel:m=!1,hideIndicator:x=!1,label:f,labelFormatter:p,labelClassName:g,formatter:b,color:j,nameKey:y,labelKey:N},C)=>{const{config:w}=Eg(),L=u.useMemo(()=>{if(m||!r?.length)return null;const[U]=r,F=`${N||U?.dataKey||U?.name||"value"}`,R=Qu(w,U,F),z=!N&&typeof f=="string"?w[f]?.label||f:R?.label;return p?e.jsx("div",{className:H("font-medium",g),children:p(z,r)}):z?e.jsx("div",{className:H("font-medium",g),children:z}):null},[f,p,r,m,g,w,N]);if(!n||!r?.length)return null;const O=r.length===1&&d!=="dot";return e.jsxs("div",{ref:C,className:H("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",i),children:[O?null:L,e.jsx("div",{className:"grid gap-1.5",children:r.filter(U=>U.type!=="none").map((U,F)=>{const R=`${y||U.name||U.dataKey||"value"}`,z=Qu(w,U,R),V=j||U.payload.fill||U.color;return e.jsx("div",{className:H("flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground",d==="dot"&&"items-center"),children:b&&U?.value!==void 0&&U.name?b(U.value,U.name,U,F,U.payload):e.jsxs(e.Fragment,{children:[z?.icon?e.jsx(z.icon,{}):!x&&e.jsx("div",{className:H("shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]",{"h-2.5 w-2.5":d==="dot","w-1":d==="line","w-0 border-[1.5px] border-dashed bg-transparent":d==="dashed","my-0.5":O&&d==="dashed"}),style:{"--color-bg":V,"--color-border":V}}),e.jsxs("div",{className:H("flex flex-1 justify-between leading-none",O?"items-end":"items-center"),children:[e.jsxs("div",{className:"grid gap-1.5",children:[O?L:null,e.jsx("span",{className:"text-muted-foreground",children:z?.label||U.name})]}),U.value&&e.jsx("span",{className:"font-mono font-medium tabular-nums text-foreground",children:U.value.toLocaleString()})]})]})},U.dataKey)})})]})});lr.displayName="ChartTooltip";const h0=jN,zg=u.forwardRef(({className:n,hideIcon:r=!1,payload:i,verticalAlign:d="bottom",nameKey:m},x)=>{const{config:f}=Eg();return i?.length?e.jsx("div",{ref:x,className:H("flex items-center justify-center gap-4",d==="top"?"pb-3":"pt-3",n),children:i.filter(p=>p.type!=="none").map(p=>{const g=`${m||p.dataKey||"value"}`,b=Qu(f,p,g);return e.jsxs("div",{className:H("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground"),children:[b?.icon&&!r?e.jsx(b.icon,{}):e.jsx("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:p.color}}),b?.label]},p.value)})}):null});zg.displayName="ChartLegend";function Qu(n,r,i){if(typeof r!="object"||r===null)return;const d="payload"in r&&typeof r.payload=="object"&&r.payload!==null?r.payload:void 0;let m=i;return i in r&&typeof r[i]=="string"?m=r[i]:d&&i in d&&typeof d[i]=="string"&&(m=d[i]),m in n?n[m]:n[i]}const ji=dr("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),_=u.forwardRef(({className:n,variant:r,size:i,asChild:d=!1,...m},x)=>{const f=d?_N:"button";return e.jsx(f,{className:H(ji({variant:r,size:i,className:n})),ref:x,...m})});_.displayName="Button";const f0=dr("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Ie({className:n,variant:r,...i}){return e.jsx("div",{className:H(f0({variant:r}),n),...i})}const p0=5,g0=5e3;let Du=0;function j0(){return Du=(Du+1)%Number.MAX_SAFE_INTEGER,Du.toString()}const Ou=new Map,ip=n=>{if(Ou.has(n))return;const r=setTimeout(()=>{Ou.delete(n),hi({type:"REMOVE_TOAST",toastId:n})},g0);Ou.set(n,r)},v0=(n,r)=>{switch(r.type){case"ADD_TOAST":return{...n,toasts:[r.toast,...n.toasts].slice(0,p0)};case"UPDATE_TOAST":return{...n,toasts:n.toasts.map(i=>i.id===r.toast.id?{...i,...r.toast}:i)};case"DISMISS_TOAST":{const{toastId:i}=r;return i?ip(i):n.toasts.forEach(d=>{ip(d.id)}),{...n,toasts:n.toasts.map(d=>d.id===i||i===void 0?{...d,open:!1}:d)}}case"REMOVE_TOAST":return r.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(i=>i.id!==r.toastId)}}},Kc=[];let Xc={toasts:[]};function hi(n){Xc=v0(Xc,n),Kc.forEach(r=>{r(Xc)})}function b0({...n}){const r=j0(),i=m=>hi({type:"UPDATE_TOAST",toast:{...m,id:r}}),d=()=>hi({type:"DISMISS_TOAST",toastId:r});return hi({type:"ADD_TOAST",toast:{...n,id:r,open:!0,onOpenChange:m=>{m||d()}}}),{id:r,dismiss:d,update:i}}function Qs(){const[n,r]=u.useState(Xc);return u.useEffect(()=>(Kc.push(r),()=>{const i=Kc.indexOf(r);i>-1&&Kc.splice(i,1)}),[n]),{...n,toast:b0,dismiss:i=>hi({type:"DISMISS_TOAST",toastId:i})}}const N0=n=>{const r=[];for(let i=0;i<n;i++){const d=i*137.508%360;r.push(`hsl(${d}, 70%, 55%)`)}return r};function y0(){const[n,r]=u.useState(null),[i,d]=u.useState(!0),[m,x]=u.useState(0),[f,p]=u.useState(24),[g,b]=u.useState(!0),[j,y]=u.useState(null),[N,C]=u.useState(!0),[w,L]=u.useState(null),[O,U]=u.useState(!1),{toast:F}=Qs(),R=u.useCallback(async()=>{try{C(!0);const T=await Uc.get("https://v1.hitokoto.cn/?c=a&c=b&c=c&c=d&c=h&c=i&c=k");y({hitokoto:T.data.hitokoto,from:T.data.from||T.data.from_who||""})}catch(T){console.error(":",T),y({hitokoto:"",from:""})}finally{C(!1)}},[]),z=u.useCallback(async()=>{try{const T=localStorage.getItem("access-token"),re=await Uc.get("/api/webui/system/status",{headers:{Authorization:`Bearer ${T}`}});L(re.data)}catch(T){console.error(":",T),L(null)}},[]),V=async()=>{if(!O)try{U(!0);const T=localStorage.getItem("access-token");await Uc.post("/api/webui/system/restart",{},{headers:{Authorization:`Bearer ${T}`}}),F({title:"",description:"..."}),setTimeout(()=>{z(),U(!1)},3e3)}catch(T){console.error(":",T),F({title:"",description:"",variant:"destructive"}),U(!1)}},$=u.useCallback(async()=>{try{const T=localStorage.getItem("access-token"),re=await Uc.get(`/api/webui/statistics/dashboard?hours=${f}`,{headers:{Authorization:`Bearer ${T}`}});r(re.data),d(!1),x(100)}catch(T){console.error("Failed to fetch dashboard data:",T),d(!1),x(100)}},[f]);if(u.useEffect(()=>{if(!i)return;x(0);const T=setTimeout(()=>x(15),200),re=setTimeout(()=>x(30),800),he=setTimeout(()=>x(45),2e3),ke=setTimeout(()=>x(60),4e3),Ce=setTimeout(()=>x(75),6500),ze=setTimeout(()=>x(85),9e3),fe=setTimeout(()=>x(92),11e3);return()=>{clearTimeout(T),clearTimeout(re),clearTimeout(he),clearTimeout(ke),clearTimeout(Ce),clearTimeout(ze),clearTimeout(fe)}},[i]),u.useEffect(()=>{$(),R(),z()},[$,R,z]),u.useEffect(()=>{if(!g)return;const T=setInterval(()=>{$(),z()},3e4);return()=>clearInterval(T)},[g,$,z]),i||!n)return e.jsx("div",{className:"flex items-center justify-center h-[calc(100vh-200px)]",children:e.jsxs("div",{className:"text-center space-y-6 w-full max-w-md px-4",children:[e.jsx(Ht,{className:"h-12 w-12 animate-spin mx-auto text-primary"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-lg font-medium",children:"..."}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(hr,{value:m,className:"h-2"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[m,"%"]})]})]})});const{summary:k,model_stats:M=[],hourly_data:ee=[],daily_data:ge=[],recent_activity:ve=[]}=n,je=k??{total_requests:0,total_cost:0,total_tokens:0,online_time:0,total_messages:0,total_replies:0,avg_response_time:0,cost_per_hour:0,tokens_per_hour:0},be=T=>{const re=Math.floor(T/3600),he=Math.floor(T%3600/60);return`${re}${he}`},ye=T=>{const re=T.toLocaleString("zh-CN");return T>=1e9?{display:`${(T/1e9).toFixed(2)}B`,exact:re,needsExact:!0}:T>=1e6?{display:`${(T/1e6).toFixed(2)}M`,exact:re,needsExact:!0}:T>=1e4?{display:`${(T/1e3).toFixed(1)}K`,exact:re,needsExact:!0}:T>=1e3?{display:`${(T/1e3).toFixed(2)}K`,exact:re,needsExact:!0}:{display:re,exact:re,needsExact:!1}},Ne=T=>{const re=`${T.toLocaleString("zh-CN",{minimumFractionDigits:2,maximumFractionDigits:2})}`;return T>=1e6?{display:`${(T/1e6).toFixed(2)}M`,exact:re,needsExact:!0}:T>=1e4?{display:`${(T/1e3).toFixed(1)}K`,exact:re,needsExact:!0}:T>=1e3?{display:`${(T/1e3).toFixed(2)}K`,exact:re,needsExact:!0}:{display:re,exact:re,needsExact:!1}},D=T=>new Date(T).toLocaleString("zh-CN",{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),X=N0(M.length),J=M.map((T,re)=>({name:T.model_name,value:T.request_count,fill:X[re]})),ce={requests:{label:"",color:"hsl(var(--chart-1))"},cost:{label:"()",color:"hsl(var(--chart-2))"},tokens:{label:"Tokens",color:"hsl(var(--chart-3))"}};return e.jsx(Ze,{className:"h-full",children:e.jsxs("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:""})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(Ca,{value:f.toString(),onValueChange:T=>p(Number(T)),children:e.jsxs(ma,{className:"grid grid-cols-3 w-full sm:w-auto",children:[e.jsx(as,{value:"24",children:"24"}),e.jsx(as,{value:"168",children:"7"}),e.jsx(as,{value:"720",children:"30"})]})}),e.jsxs(_,{variant:g?"default":"outline",size:"sm",onClick:()=>b(!g),className:"gap-2",children:[e.jsx(Ht,{className:`h-4 w-4 ${g?"animate-spin":""}`}),e.jsx("span",{className:"hidden sm:inline",children:""})]}),e.jsx(_,{variant:"outline",size:"sm",onClick:$,children:e.jsx(Ht,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"flex items-center gap-3 px-4 py-2 rounded-lg border border-dashed border-muted-foreground/30 bg-muted/20",children:[N?e.jsx(kg,{className:"h-5 flex-1"}):j?e.jsxs("p",{className:"flex-1 text-sm text-muted-foreground italic truncate",children:['"',j.hitokoto,'"  ',j.from]}):null,e.jsx(_,{variant:"ghost",size:"icon",className:"h-7 w-7 shrink-0",onClick:R,disabled:N,children:e.jsx(Ht,{className:`h-3.5 w-3.5 ${N?"animate-spin":""}`})})]}),e.jsxs("div",{className:"grid gap-4 grid-cols-1 lg:grid-cols-3",children:[e.jsxs(Ve,{className:"lg:col-span-1",children:[e.jsx(ls,{className:"pb-3",children:e.jsxs(ns,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(Ni,{className:"h-4 w-4"}),""]})}),e.jsx(ps,{children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex items-center gap-2",children:w?.running?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-3 w-3 rounded-full bg-green-500 animate-pulse"}),e.jsxs(Ie,{variant:"outline",className:"text-green-600 border-green-300 bg-green-50",children:[e.jsx(ua,{className:"h-3 w-3 mr-1"}),""]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-3 w-3 rounded-full bg-red-500"}),e.jsxs(Ie,{variant:"outline",className:"text-red-600 border-red-300 bg-red-50",children:[e.jsx(qt,{className:"h-3 w-3 mr-1"}),""]})]})}),w&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.jsxs("span",{children:["v",w.version]}),e.jsx("span",{className:"mx-2",children:"|"}),e.jsxs("span",{children:[" ",be(w.uptime)]})]})]})})]}),e.jsxs(Ve,{children:[e.jsx(ls,{className:"pb-3",children:e.jsxs(ns,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(xn,{className:"h-4 w-4"}),""]})}),e.jsx(ps,{children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(_,{variant:"outline",size:"sm",onClick:V,disabled:O,className:"gap-2",children:[e.jsx(Jc,{className:`h-4 w-4 ${O?"animate-spin":""}`}),O?"...":""]}),e.jsx(_,{variant:"outline",size:"sm",asChild:!0,className:"gap-2",children:e.jsxs(tr,{to:"/logs",children:[e.jsx(Oa,{className:"h-4 w-4"}),""]})}),e.jsx(_,{variant:"outline",size:"sm",asChild:!0,className:"gap-2",children:e.jsxs(tr,{to:"/plugins",children:[e.jsx(YN,{className:"h-4 w-4"}),""]})}),e.jsx(_,{variant:"outline",size:"sm",asChild:!0,className:"gap-2",children:e.jsxs(tr,{to:"/settings",children:[e.jsx(ur,{className:"h-4 w-4"}),""]})})]})})]}),e.jsxs(Ve,{children:[e.jsxs(ls,{className:"pb-3",children:[e.jsxs(ns,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(KN,{className:"h-4 w-4"}),""]}),e.jsx(tt,{className:"text-xs",children:""})]}),e.jsx(ps,{children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(_,{variant:"outline",size:"sm",asChild:!0,className:"gap-2",children:e.jsxs(tr,{to:"/survey/webui-feedback",children:[e.jsx(Oa,{className:"h-4 w-4"}),"WebUI "]})}),e.jsx(_,{variant:"outline",size:"sm",asChild:!0,className:"gap-2",children:e.jsxs(tr,{to:"/survey/maibot-feedback",children:[e.jsx(Ql,{className:"h-4 w-4"}),""]})})]})})]})]}),e.jsxs("div",{className:"grid gap-4 grid-cols-1 xs:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(Ve,{children:[e.jsxs(ls,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ns,{className:"text-sm font-medium",children:""}),e.jsx(XN,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ps,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[ye(je.total_requests).display,ye(je.total_requests).needsExact&&e.jsxs("span",{className:"text-xs font-normal text-muted-foreground ml-1",children:["(",ye(je.total_requests).exact,")"]})]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["",f<48?f+"":Math.floor(f/24)+""]})]})]}),e.jsxs(Ve,{children:[e.jsxs(ls,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ns,{className:"text-sm font-medium",children:""}),e.jsx(JN,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ps,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[Ne(je.total_cost).display,Ne(je.total_cost).needsExact&&e.jsxs("span",{className:"text-xs font-normal text-muted-foreground ml-1",children:["(",Ne(je.total_cost).exact,")"]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:je.cost_per_hour>0?`${je.cost_per_hour.toFixed(2)}/`:""})]})]}),e.jsxs(Ve,{children:[e.jsxs(ls,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ns,{className:"text-sm font-medium",children:"Token"}),e.jsx(Pc,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ps,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[ye(je.total_tokens).display,ye(je.total_tokens).needsExact&&e.jsxs("span",{className:"text-xs font-normal text-muted-foreground ml-1",children:["(",ye(je.total_tokens).exact,")"]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:je.tokens_per_hour>0?`${ye(je.tokens_per_hour).display}/`:""})]})]}),e.jsxs(Ve,{children:[e.jsxs(ls,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ns,{className:"text-sm font-medium",children:""}),e.jsx(xn,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ps,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[je.avg_response_time.toFixed(2),"s"]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"API"})]})]})]}),e.jsxs("div",{className:"grid gap-4 grid-cols-1 sm:grid-cols-3",children:[e.jsxs(Ve,{children:[e.jsxs(ls,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ns,{className:"text-sm font-medium",children:""}),e.jsx(rr,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(ps,{children:e.jsxs("div",{className:"text-xl font-bold",children:[be(je.online_time),e.jsxs("span",{className:"text-xs font-normal text-muted-foreground ml-1",children:["(",je.online_time.toLocaleString(),")"]})]})})]}),e.jsxs(Ve,{children:[e.jsxs(ls,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ns,{className:"text-sm font-medium",children:""}),e.jsx(Ql,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ps,{children:[e.jsxs("div",{className:"text-xl font-bold",children:[ye(je.total_messages).display,ye(je.total_messages).needsExact&&e.jsxs("span",{className:"text-xs font-normal text-muted-foreground ml-1",children:["(",ye(je.total_messages).exact,")"]})]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[" ",ye(je.total_replies).display,ye(je.total_replies).needsExact&&e.jsxs("span",{children:["(",ye(je.total_replies).exact,")"]})," "]})]})]}),e.jsxs(Ve,{children:[e.jsxs(ls,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ns,{className:"text-sm font-medium",children:""}),e.jsx(PN,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ps,{children:[e.jsx("div",{className:"text-xl font-bold",children:je.total_messages>0?`${(je.total_cost/je.total_messages*100).toFixed(2)}`:"0.00"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"100"})]})]})]}),e.jsxs(Ca,{defaultValue:"trends",className:"space-y-4",children:[e.jsxs(ma,{className:"grid w-full grid-cols-2 sm:grid-cols-4",children:[e.jsx(as,{value:"trends",children:""}),e.jsx(as,{value:"models",children:""}),e.jsx(as,{value:"activity",children:""}),e.jsx(as,{value:"daily",children:""})]}),e.jsxs(Ms,{value:"trends",className:"space-y-4",children:[e.jsxs(Ve,{children:[e.jsxs(ls,{children:[e.jsx(ns,{children:""}),e.jsxs(tt,{children:["",f,""]})]}),e.jsx(ps,{children:e.jsx(ar,{config:ce,className:"h-[300px] sm:h-[400px] w-full aspect-auto",children:e.jsxs(vN,{data:ee,children:[e.jsx(Bc,{strokeDasharray:"3 3",stroke:"hsl(var(--muted-foreground) / 0.2)"}),e.jsx(Hc,{dataKey:"timestamp",tickFormatter:T=>D(T),angle:-45,textAnchor:"end",height:60,stroke:"hsl(var(--muted-foreground))",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(ni,{stroke:"hsl(var(--muted-foreground))",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(ii,{content:e.jsx(lr,{labelFormatter:T=>D(T)})}),e.jsx(bN,{type:"monotone",dataKey:"requests",stroke:"var(--color-requests)",strokeWidth:2})]})})})]}),e.jsxs("div",{className:"grid gap-4 grid-cols-1 lg:grid-cols-2",children:[e.jsxs(Ve,{children:[e.jsxs(ls,{children:[e.jsx(ns,{children:""}),e.jsx(tt,{children:"API"})]}),e.jsx(ps,{children:e.jsx(ar,{config:ce,className:"h-[250px] sm:h-[300px] w-full aspect-auto",children:e.jsxs(ku,{data:ee,children:[e.jsx(Bc,{strokeDasharray:"3 3",stroke:"hsl(var(--muted-foreground) / 0.2)"}),e.jsx(Hc,{dataKey:"timestamp",tickFormatter:T=>D(T),angle:-45,textAnchor:"end",height:60,stroke:"hsl(var(--muted-foreground))",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(ni,{stroke:"hsl(var(--muted-foreground))",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(ii,{content:e.jsx(lr,{labelFormatter:T=>D(T)})}),e.jsx(qc,{dataKey:"cost",fill:"var(--color-cost)"})]})})})]}),e.jsxs(Ve,{children:[e.jsxs(ls,{children:[e.jsx(ns,{children:"Token"}),e.jsx(tt,{children:"Token"})]}),e.jsx(ps,{children:e.jsx(ar,{config:ce,className:"h-[250px] sm:h-[300px] w-full aspect-auto",children:e.jsxs(ku,{data:ee,children:[e.jsx(Bc,{strokeDasharray:"3 3",stroke:"hsl(var(--muted-foreground) / 0.2)"}),e.jsx(Hc,{dataKey:"timestamp",tickFormatter:T=>D(T),angle:-45,textAnchor:"end",height:60,stroke:"hsl(var(--muted-foreground))",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(ni,{stroke:"hsl(var(--muted-foreground))",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(ii,{content:e.jsx(lr,{labelFormatter:T=>D(T)})}),e.jsx(qc,{dataKey:"tokens",fill:"var(--color-tokens)"})]})})})]})]})]}),e.jsx(Ms,{value:"models",className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4 grid-cols-1 lg:grid-cols-2",children:[e.jsxs(Ve,{children:[e.jsxs(ls,{children:[e.jsx(ns,{children:""}),e.jsxs(tt,{children:[" ( ",M.length," )"]})]}),e.jsx(ps,{children:e.jsx(ar,{config:Object.fromEntries(M.map((T,re)=>[T.model_name,{label:T.model_name,color:X[re]}])),className:"h-[300px] sm:h-[400px] w-full aspect-auto",children:e.jsxs(NN,{children:[e.jsx(ii,{content:e.jsx(lr,{})}),e.jsx(yN,{data:J,cx:"50%",cy:"50%",labelLine:!1,label:({name:T,percent:re})=>re&&re<.05?"":`${T} ${re?(re*100).toFixed(0):0}%`,outerRadius:100,dataKey:"value",children:J.map((T,re)=>e.jsx(wN,{fill:T.fill},`cell-${re}`))})]})})})]}),e.jsxs(Ve,{children:[e.jsxs(ls,{children:[e.jsx(ns,{children:""}),e.jsx(tt,{children:""})]}),e.jsx(ps,{children:e.jsx(Ze,{className:"h-[300px] sm:h-[400px]",children:e.jsx("div",{className:"space-y-3",children:M.map((T,re)=>e.jsxs("div",{className:"p-4 rounded-lg border bg-card hover:bg-accent/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-semibold text-sm truncate flex-1 min-w-0",children:T.model_name}),e.jsx("div",{className:"w-3 h-3 rounded-full ml-2 flex-shrink-0",style:{backgroundColor:`hsl(var(--chart-${re%5+1}))`}})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:":"}),e.jsx("span",{className:"ml-1 font-medium",children:T.request_count.toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:":"}),e.jsxs("span",{className:"ml-1 font-medium",children:["",T.total_cost.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Tokens:"}),e.jsxs("span",{className:"ml-1 font-medium",children:[(T.total_tokens/1e3).toFixed(1),"K"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:":"}),e.jsxs("span",{className:"ml-1 font-medium",children:[T.avg_response_time.toFixed(2),"s"]})]})]})]},re))})})})]})]})}),e.jsx(Ms,{value:"activity",children:e.jsxs(Ve,{children:[e.jsxs(ls,{children:[e.jsx(ns,{children:""}),e.jsx(tt,{children:"API"})]}),e.jsx(ps,{children:e.jsx(Ze,{className:"h-[400px] sm:h-[500px]",children:e.jsx("div",{className:"space-y-2",children:ve.map((T,re)=>e.jsxs("div",{className:"p-3 sm:p-4 rounded-lg border bg-card hover:bg-accent/50 transition-colors",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-2 mb-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-sm truncate",children:T.model}),e.jsx("div",{className:"text-xs text-muted-foreground",children:T.request_type})]}),e.jsx("div",{className:"text-xs text-muted-foreground flex-shrink-0",children:D(T.timestamp)})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Tokens:"}),e.jsx("span",{className:"ml-1",children:T.tokens})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:":"}),e.jsxs("span",{className:"ml-1",children:["",T.cost.toFixed(4)]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:":"}),e.jsxs("span",{className:"ml-1",children:[T.time_cost.toFixed(2),"s"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:":"}),e.jsx("span",{className:`ml-1 ${T.status==="success"?"text-green-600":"text-red-600"}`,children:T.status})]})]})]},re))})})})]})}),e.jsx(Ms,{value:"daily",children:e.jsxs(Ve,{children:[e.jsxs(ls,{children:[e.jsx(ns,{children:""}),e.jsx(tt,{children:"7"})]}),e.jsx(ps,{children:e.jsx(ar,{config:{requests:{label:"",color:"hsl(var(--chart-1))"},cost:{label:"()",color:"hsl(var(--chart-2))"}},className:"h-[400px] sm:h-[500px] w-full aspect-auto",children:e.jsxs(ku,{data:ge,children:[e.jsx(Bc,{strokeDasharray:"3 3",stroke:"hsl(var(--muted-foreground) / 0.2)"}),e.jsx(Hc,{dataKey:"timestamp",tickFormatter:T=>{const re=new Date(T);return`${re.getMonth()+1}/${re.getDate()}`},stroke:"hsl(var(--muted-foreground))",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(ni,{yAxisId:"left",stroke:"hsl(var(--muted-foreground))",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(ni,{yAxisId:"right",orientation:"right",stroke:"hsl(var(--muted-foreground))",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(ii,{content:e.jsx(lr,{labelFormatter:T=>new Date(T).toLocaleDateString("zh-CN")})}),e.jsx(h0,{content:e.jsx(zg,{})}),e.jsx(qc,{yAxisId:"left",dataKey:"requests",fill:"var(--color-requests)"}),e.jsx(qc,{yAxisId:"right",dataKey:"cost",fill:"var(--color-cost)"})]})})})]})})]})]})})}const w0={theme:"system",setTheme:()=>null},Mg=u.createContext(w0),Pu=()=>{const n=u.useContext(Mg);if(n===void 0)throw new Error("useTheme must be used within a ThemeProvider");return n},_0=(n,r,i)=>{const d=document.documentElement.classList.contains("no-animations");if(!document.startViewTransition||d){r(n);return}const m=i.clientX,x=i.clientY,f=Math.hypot(Math.max(m,innerWidth-m),Math.max(x,innerHeight-x));document.startViewTransition(()=>{r(n)}).ready.then(()=>{document.documentElement.animate({clipPath:[`circle(0px at ${m}px ${x}px)`,`circle(${f}px at ${m}px ${x}px)`]},{duration:500,easing:"ease-in-out",pseudoElement:"::view-transition-new(root)"})})},Ag=u.createContext(void 0),Dg=()=>{const n=u.useContext(Ag);if(n===void 0)throw new Error("useAnimation must be used within an AnimationProvider");return n},Fe=u.forwardRef(({className:n,...r},i)=>e.jsx(Ap,{className:H("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",n),...r,ref:i,children:e.jsx(sN,{className:H("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));Fe.displayName=Ap.displayName;const S0=dr("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),S=u.forwardRef(({className:n,...r},i)=>e.jsx(Ip,{ref:i,className:H(S0(),n),...r}));S.displayName=Ip.displayName;const ie=u.forwardRef(({className:n,type:r,...i},d)=>e.jsx("input",{type:r,className:H("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:d,...i}));ie.displayName="Input";const C0=[{id:"minLength",label:" 10 ",description:"Token  10 ",validate:n=>n.length>=10},{id:"hasUppercase",label:"",description:" (A-Z)",validate:n=>/[A-Z]/.test(n)},{id:"hasLowercase",label:"",description:" (a-z)",validate:n=>/[a-z]/.test(n)},{id:"hasSpecialChar",label:"",description:" (!@#$%^&*()_+-=[]{}|;:,.<>?/)",validate:n=>/[!@#$%^&*()_+\-=[\]{}|;:,.<>?/]/.test(n)}];function k0(n){const r=C0.map(d=>({id:d.id,label:d.label,description:d.description,passed:d.validate(n)}));return{isValid:r.every(d=>d.passed),rules:r}}const io="0.12.0 Beta",Zu="MaiBot Dashboard",T0=`${Zu} v${io}`,E0=(n="v")=>`${n}${io}`,Zt={THEME:"maibot-ui-theme",ACCENT_COLOR:"accent-color",ENABLE_ANIMATIONS:"maibot-animations",ENABLE_WAVES_BACKGROUND:"maibot-waves-background",LOG_CACHE_SIZE:"maibot-log-cache-size",LOG_AUTO_SCROLL:"maibot-log-auto-scroll",LOG_FONT_SIZE:"maibot-log-font-size",LOG_LINE_SPACING:"maibot-log-line-spacing",DATA_SYNC_INTERVAL:"maibot-data-sync-interval",WS_RECONNECT_INTERVAL:"maibot-ws-reconnect-interval",WS_MAX_RECONNECT_ATTEMPTS:"maibot-ws-max-reconnect-attempts",COMPLETED_TOURS:"maibot-completed-tours"},Fa={theme:"system",accentColor:"blue",enableAnimations:!0,enableWavesBackground:!0,logCacheSize:1e3,logAutoScroll:!0,logFontSize:"xs",logLineSpacing:4,dataSyncInterval:30,wsReconnectInterval:3e3,wsMaxReconnectAttempts:10};function ot(n){const r=Og(n),i=localStorage.getItem(r);if(i===null)return Fa[n];const d=Fa[n];if(typeof d=="boolean")return i==="true";if(typeof d=="number"){const m=parseFloat(i);return isNaN(m)?d:m}return i}function nr(n,r){const i=Og(n);localStorage.setItem(i,String(r)),window.dispatchEvent(new CustomEvent("maibot-settings-change",{detail:{key:n,value:r}}))}function z0(){return{theme:ot("theme"),accentColor:ot("accentColor"),enableAnimations:ot("enableAnimations"),enableWavesBackground:ot("enableWavesBackground"),logCacheSize:ot("logCacheSize"),logAutoScroll:ot("logAutoScroll"),logFontSize:ot("logFontSize"),logLineSpacing:ot("logLineSpacing"),dataSyncInterval:ot("dataSyncInterval"),wsReconnectInterval:ot("wsReconnectInterval"),wsMaxReconnectAttempts:ot("wsMaxReconnectAttempts")}}function M0(){const n=z0(),r=localStorage.getItem(Zt.COMPLETED_TOURS),i=r?JSON.parse(r):[];return{...n,completedTours:i}}function A0(n){const r=[],i=[];for(const[d,m]of Object.entries(n)){if(d==="completedTours"){Array.isArray(m)?(localStorage.setItem(Zt.COMPLETED_TOURS,JSON.stringify(m)),r.push("completedTours")):i.push("completedTours");continue}if(d in Fa){const x=d,f=Fa[x];if(typeof m==typeof f){if(x==="theme"&&!["light","dark","system"].includes(m)){i.push(d);continue}if(x==="logFontSize"&&!["xs","sm","base"].includes(m)){i.push(d);continue}nr(x,m),r.push(d)}else i.push(d)}else i.push(d)}return{success:r.length>0,imported:r,skipped:i}}function D0(){for(const n of Object.keys(Fa))nr(n,Fa[n]);localStorage.removeItem(Zt.COMPLETED_TOURS),window.dispatchEvent(new CustomEvent("maibot-settings-reset"))}function O0(){const n=[],r=[],i=[];for(let d=0;d<localStorage.length;d++){const m=localStorage.key(d);m&&(m.startsWith("maibot")||m.startsWith("accent-color")||m==="access-token")&&i.push(m)}for(const d of i)localStorage.removeItem(d),n.push(d);return{clearedKeys:n,preservedKeys:r}}function cp(){let n=0;const r=[];for(let i=0;i<localStorage.length;i++){const d=localStorage.key(i);if(d){const m=localStorage.getItem(d)||"",x=(d.length+m.length)*2;n+=x,r.push({key:d,size:x})}}return r.sort((i,d)=>d.size-i.size),{used:n,items:localStorage.length,details:r}}function R0(n){if(n===0)return"0 B";const r=1024,i=["B","KB","MB"],d=Math.floor(Math.log(n)/Math.log(r));return parseFloat((n/Math.pow(r,d)).toFixed(2))+" "+i[d]}function Og(n){return{theme:Zt.THEME,accentColor:Zt.ACCENT_COLOR,enableAnimations:Zt.ENABLE_ANIMATIONS,enableWavesBackground:Zt.ENABLE_WAVES_BACKGROUND,logCacheSize:Zt.LOG_CACHE_SIZE,logAutoScroll:Zt.LOG_AUTO_SCROLL,logFontSize:Zt.LOG_FONT_SIZE,logLineSpacing:Zt.LOG_LINE_SPACING,dataSyncInterval:Zt.DATA_SYNC_INTERVAL,wsReconnectInterval:Zt.WS_RECONNECT_INTERVAL,wsMaxReconnectAttempts:Zt.WS_MAX_RECONNECT_ATTEMPTS}[n]}const Sa=u.forwardRef(({className:n,...r},i)=>e.jsxs(Dp,{ref:i,className:H("relative flex w-full touch-none select-none items-center",n),...r,children:[e.jsx(tN,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:e.jsx(aN,{className:"absolute h-full bg-primary"})}),e.jsx(lN,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}));Sa.displayName=Dp.displayName;class L0{ws=null;reconnectTimeout=null;reconnectAttempts=0;heartbeatInterval=null;logCallbacks=new Set;connectionCallbacks=new Set;isConnected=!1;logCache=[];getMaxCacheSize(){return ot("logCacheSize")}getMaxReconnectAttempts(){return ot("wsMaxReconnectAttempts")}getReconnectInterval(){return ot("wsReconnectInterval")}getWebSocketUrl(){{const r=window.location.protocol==="https:"?"wss:":"ws:",i=window.location.host;return`${r}//${i}/ws/logs`}}connect(){if(this.ws?.readyState===WebSocket.OPEN||this.ws?.readyState===WebSocket.CONNECTING)return;const r=this.getWebSocketUrl();try{this.ws=new WebSocket(r),this.ws.onopen=()=>{this.isConnected=!0,this.reconnectAttempts=0,this.notifyConnection(!0),this.startHeartbeat()},this.ws.onmessage=i=>{try{if(i.data==="pong")return;const d=JSON.parse(i.data);this.notifyLog(d)}catch(d){console.error(":",d)}},this.ws.onerror=i=>{console.error(" WebSocket :",i),this.isConnected=!1,this.notifyConnection(!1)},this.ws.onclose=()=>{this.isConnected=!1,this.notifyConnection(!1),this.stopHeartbeat(),this.attemptReconnect()}}catch(i){console.error(" WebSocket :",i),this.attemptReconnect()}}attemptReconnect(){const r=this.getMaxReconnectAttempts();if(this.reconnectAttempts>=r)return;this.reconnectAttempts+=1;const i=this.getReconnectInterval(),d=Math.min(i*this.reconnectAttempts,3e4);this.reconnectTimeout=window.setTimeout(()=>{this.connect()},d)}startHeartbeat(){this.heartbeatInterval=window.setInterval(()=>{this.ws?.readyState===WebSocket.OPEN&&this.ws.send("ping")},3e4)}stopHeartbeat(){this.heartbeatInterval!==null&&(clearInterval(this.heartbeatInterval),this.heartbeatInterval=null)}disconnect(){this.reconnectTimeout!==null&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),this.stopHeartbeat(),this.ws&&(this.ws.close(),this.ws=null),this.isConnected=!1,this.reconnectAttempts=0}onLog(r){return this.logCallbacks.add(r),()=>this.logCallbacks.delete(r)}onConnectionChange(r){return this.connectionCallbacks.add(r),r(this.isConnected),()=>this.connectionCallbacks.delete(r)}notifyLog(r){if(!this.logCache.some(d=>d.id===r.id)){this.logCache.push(r);const d=this.getMaxCacheSize();this.logCache.length>d&&(this.logCache=this.logCache.slice(-d)),this.logCallbacks.forEach(m=>{try{m(r)}catch(x){console.error(":",x)}})}}notifyConnection(r){this.connectionCallbacks.forEach(i=>{try{i(r)}catch(d){console.error(":",d)}})}getAllLogs(){return[...this.logCache]}clearLogs(){this.logCache=[]}getConnectionStatus(){return this.isConnected}}const mn=new L0;typeof window<"u"&&mn.connect();const Fs=kN,Wu=TN,U0=SN,Rg=u.forwardRef(({className:n,...r},i)=>e.jsx(Yp,{ref:i,className:H("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...r}));Rg.displayName=Yp.displayName;const Bs=u.forwardRef(({className:n,children:r,preventOutsideClose:i=!1,...d},m)=>e.jsxs(U0,{children:[e.jsx(Rg,{}),e.jsxs(Kp,{ref:m,className:H("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),onPointerDownOutside:i?x=>x.preventDefault():void 0,onInteractOutside:i?x=>x.preventDefault():void 0,...d,children:[r,e.jsxs(CN,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(hl,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Bs.displayName=Kp.displayName;const Hs=({className:n,...r})=>e.jsx("div",{className:H("flex flex-col space-y-1.5 text-center sm:text-left",n),...r});Hs.displayName="DialogHeader";const at=({className:n,...r})=>e.jsx("div",{className:H("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",n),...r});at.displayName="DialogFooter";const qs=u.forwardRef(({className:n,...r},i)=>e.jsx(Xp,{ref:i,className:H("text-lg font-semibold leading-none tracking-tight",n),...r}));qs.displayName=Xp.displayName;const et=u.forwardRef(({className:n,...r},i)=>e.jsx(Jp,{ref:i,className:H("text-sm text-muted-foreground",n),...r}));et.displayName=Jp.displayName;const xs=rN,dt=iN,B0=nN,Lg=u.forwardRef(({className:n,...r},i)=>e.jsx(Op,{className:H("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...r,ref:i}));Lg.displayName=Op.displayName;const rs=u.forwardRef(({className:n,...r},i)=>e.jsxs(B0,{children:[e.jsx(Lg,{}),e.jsx(Rp,{ref:i,className:H("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...r})]}));rs.displayName=Rp.displayName;const is=({className:n,...r})=>e.jsx("div",{className:H("flex flex-col space-y-2 text-center sm:text-left",n),...r});is.displayName="AlertDialogHeader";const cs=({className:n,...r})=>e.jsx("div",{className:H("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",n),...r});cs.displayName="AlertDialogFooter";const os=u.forwardRef(({className:n,...r},i)=>e.jsx(Lp,{ref:i,className:H("text-lg font-semibold",n),...r}));os.displayName=Lp.displayName;const ds=u.forwardRef(({className:n,...r},i)=>e.jsx(Up,{ref:i,className:H("text-sm text-muted-foreground",n),...r}));ds.displayName=Up.displayName;const us=u.forwardRef(({className:n,...r},i)=>e.jsx(Bp,{ref:i,className:H(ji(),n),...r}));us.displayName=Bp.displayName;const ms=u.forwardRef(({className:n,...r},i)=>e.jsx(Hp,{ref:i,className:H(ji({variant:"outline"}),"mt-2 sm:mt-0",n),...r}));ms.displayName=Hp.displayName;function H0(){return e.jsxs("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:""}),e.jsx("p",{className:"text-muted-foreground mt-1 sm:mt-2 text-sm sm:text-base",children:""})]})}),e.jsxs(Ca,{defaultValue:"appearance",className:"w-full",children:[e.jsxs(ma,{className:"grid w-full grid-cols-2 sm:grid-cols-4 gap-0.5 sm:gap-1 h-auto p-1",children:[e.jsxs(as,{value:"appearance",className:"gap-1 sm:gap-2 text-xs sm:text-sm px-2 sm:px-3 py-2",children:[e.jsx(ZN,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4",strokeWidth:2,fill:"none"}),e.jsx("span",{children:""})]}),e.jsxs(as,{value:"security",className:"gap-1 sm:gap-2 text-xs sm:text-sm px-2 sm:px-3 py-2",children:[e.jsx(WN,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4",strokeWidth:2,fill:"none"}),e.jsx("span",{children:""})]}),e.jsxs(as,{value:"other",className:"gap-1 sm:gap-2 text-xs sm:text-sm px-2 sm:px-3 py-2",children:[e.jsx(ur,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4",strokeWidth:2,fill:"none"}),e.jsx("span",{children:""})]}),e.jsxs(as,{value:"about",className:"gap-1 sm:gap-2 text-xs sm:text-sm px-2 sm:px-3 py-2",children:[e.jsx(Va,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4",strokeWidth:2,fill:"none"}),e.jsx("span",{children:""})]})]}),e.jsxs(Ze,{className:"h-[calc(100vh-240px)] sm:h-[calc(100vh-280px)] mt-4 sm:mt-6",children:[e.jsx(Ms,{value:"appearance",className:"mt-0",children:e.jsx(q0,{})}),e.jsx(Ms,{value:"security",className:"mt-0",children:e.jsx(G0,{})}),e.jsx(Ms,{value:"other",className:"mt-0",children:e.jsx($0,{})}),e.jsx(Ms,{value:"about",className:"mt-0",children:e.jsx(F0,{})})]})]})]})}function op(n){const r=document.documentElement,d={blue:{hsl:"221.2 83.2% 53.3%",darkHsl:"217.2 91.2% 59.8%",gradient:null},purple:{hsl:"271 91% 65%",darkHsl:"270 95% 75%",gradient:null},green:{hsl:"142 71% 45%",darkHsl:"142 76% 36%",gradient:null},orange:{hsl:"25 95% 53%",darkHsl:"20 90% 48%",gradient:null},pink:{hsl:"330 81% 60%",darkHsl:"330 85% 70%",gradient:null},red:{hsl:"0 84% 60%",darkHsl:"0 90% 70%",gradient:null},"gradient-sunset":{hsl:"15 95% 60%",darkHsl:"15 95% 65%",gradient:"linear-gradient(135deg, hsl(25 95% 53%) 0%, hsl(330 81% 60%) 100%)"},"gradient-ocean":{hsl:"200 90% 55%",darkHsl:"200 90% 60%",gradient:"linear-gradient(135deg, hsl(221.2 83.2% 53.3%) 0%, hsl(189 94% 43%) 100%)"},"gradient-forest":{hsl:"150 70% 45%",darkHsl:"150 75% 40%",gradient:"linear-gradient(135deg, hsl(142 71% 45%) 0%, hsl(158 64% 52%) 100%)"},"gradient-aurora":{hsl:"310 85% 65%",darkHsl:"310 90% 70%",gradient:"linear-gradient(135deg, hsl(271 91% 65%) 0%, hsl(330 81% 60%) 100%)"},"gradient-fire":{hsl:"15 95% 55%",darkHsl:"15 95% 60%",gradient:"linear-gradient(135deg, hsl(0 84% 60%) 0%, hsl(25 95% 53%) 100%)"},"gradient-twilight":{hsl:"250 90% 60%",darkHsl:"250 95% 65%",gradient:"linear-gradient(135deg, hsl(239 84% 67%) 0%, hsl(271 91% 65%) 100%)"}}[n];if(d)r.style.setProperty("--primary",d.hsl),d.gradient?(r.style.setProperty("--primary-gradient",d.gradient),r.classList.add("has-gradient")):(r.style.removeProperty("--primary-gradient"),r.classList.remove("has-gradient"));else if(n.startsWith("#")){const m=x=>{x=x.replace("#","");const f=parseInt(x.substring(0,2),16)/255,p=parseInt(x.substring(2,4),16)/255,g=parseInt(x.substring(4,6),16)/255,b=Math.max(f,p,g),j=Math.min(f,p,g);let y=0,N=0;const C=(b+j)/2;if(b!==j){const w=b-j;switch(N=C>.5?w/(2-b-j):w/(b+j),b){case f:y=((p-g)/w+(p<g?6:0))/6;break;case p:y=((g-f)/w+2)/6;break;case g:y=((f-p)/w+4)/6;break}}return`${Math.round(y*360)} ${Math.round(N*100)}% ${Math.round(C*100)}%`};r.style.setProperty("--primary",m(n)),r.style.removeProperty("--primary-gradient"),r.classList.remove("has-gradient")}}function q0(){const{theme:n,setTheme:r}=Pu(),{enableAnimations:i,setEnableAnimations:d,enableWavesBackground:m,setEnableWavesBackground:x}=Dg(),[f,p]=u.useState(()=>localStorage.getItem("accent-color")||"blue");u.useEffect(()=>{const b=localStorage.getItem("accent-color")||"blue";op(b)},[]);const g=b=>{p(b),localStorage.setItem("accent-color",b),op(b)};return e.jsxs("div",{className:"space-y-6 sm:space-y-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:""}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 sm:gap-4",children:[e.jsx(Ru,{value:"light",current:n,onChange:r,label:"",description:""}),e.jsx(Ru,{value:"dark",current:n,onChange:r,label:"",description:""}),e.jsx(Ru,{value:"system",current:n,onChange:r,label:"",description:""})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:""}),e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs sm:text-sm font-medium mb-2 sm:mb-3",children:""}),e.jsxs("div",{className:"grid grid-cols-3 sm:grid-cols-6 gap-2 sm:gap-3",children:[e.jsx(_a,{value:"blue",current:f,onChange:g,label:"",colorClass:"bg-blue-500"}),e.jsx(_a,{value:"purple",current:f,onChange:g,label:"",colorClass:"bg-purple-500"}),e.jsx(_a,{value:"green",current:f,onChange:g,label:"",colorClass:"bg-green-500"}),e.jsx(_a,{value:"orange",current:f,onChange:g,label:"",colorClass:"bg-orange-500"}),e.jsx(_a,{value:"pink",current:f,onChange:g,label:"",colorClass:"bg-pink-500"}),e.jsx(_a,{value:"red",current:f,onChange:g,label:"",colorClass:"bg-red-500"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs sm:text-sm font-medium mb-2 sm:mb-3",children:""}),e.jsxs("div",{className:"grid grid-cols-3 sm:grid-cols-6 gap-2 sm:gap-3",children:[e.jsx(_a,{value:"gradient-sunset",current:f,onChange:g,label:"",colorClass:"bg-gradient-to-r from-orange-500 to-pink-500"}),e.jsx(_a,{value:"gradient-ocean",current:f,onChange:g,label:"",colorClass:"bg-gradient-to-r from-blue-500 to-cyan-500"}),e.jsx(_a,{value:"gradient-forest",current:f,onChange:g,label:"",colorClass:"bg-gradient-to-r from-green-500 to-emerald-500"}),e.jsx(_a,{value:"gradient-aurora",current:f,onChange:g,label:"",colorClass:"bg-gradient-to-r from-purple-500 to-pink-500"}),e.jsx(_a,{value:"gradient-fire",current:f,onChange:g,label:"",colorClass:"bg-gradient-to-r from-red-500 to-orange-500"}),e.jsx(_a,{value:"gradient-twilight",current:f,onChange:g,label:"",colorClass:"bg-gradient-to-r from-indigo-500 to-purple-500"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs sm:text-sm font-medium mb-2 sm:mb-3",children:""}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"color",value:f.startsWith("#")?f:"#3b82f6",onChange:b=>g(b.target.value),className:"h-10 sm:h-12 w-full rounded-lg border-2 border-border cursor-pointer",title:""})}),e.jsx("div",{className:"flex-1",children:e.jsx(ie,{type:"text",value:f,onChange:b=>g(b.target.value),placeholder:"#3b82f6",className:"font-mono text-sm"})})]}),e.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground mt-2",children:" HEX "})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:""}),e.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[e.jsx("div",{className:"rounded-lg border bg-card p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5 flex-1",children:[e.jsx(S,{htmlFor:"animations",className:"text-base font-medium cursor-pointer",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),e.jsx(Fe,{id:"animations",checked:i,onCheckedChange:d})]})}),e.jsx("div",{className:"rounded-lg border bg-card p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5 flex-1",children:[e.jsx(S,{htmlFor:"waves-background",className:"text-base font-medium cursor-pointer",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),e.jsx(Fe,{id:"waves-background",checked:m,onCheckedChange:x})]})})]})]})]})}function G0(){const n=Ta(),[r,i]=u.useState(""),[d,m]=u.useState(""),[x,f]=u.useState(!1),[p,g]=u.useState(!1),[b,j]=u.useState(!1),[y,N]=u.useState(!1),[C,w]=u.useState(!1),[L,O]=u.useState(!1),[U,F]=u.useState(""),[R,z]=u.useState(!1),{toast:V}=Qs(),$=u.useMemo(()=>k0(d),[d]),k=async be=>{if(!r){V({title:"",description:"Token  Cookie  Token",variant:"destructive"});return}try{await navigator.clipboard.writeText(be),w(!0),V({title:"",description:"Token "}),setTimeout(()=>w(!1),2e3)}catch{V({title:"",description:" Token",variant:"destructive"})}},M=async()=>{if(!d.trim()){V({title:"",description:" Token",variant:"destructive"});return}if(!$.isValid){const be=$.rules.filter(ye=>!ye.passed).map(ye=>ye.label).join(", ");V({title:"",description:`Token : ${be}`,variant:"destructive"});return}j(!0);try{const be=await fetch("/api/webui/auth/update",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({new_token:d.trim()})}),ye=await be.json();be.ok&&ye.success?(m(""),i(d.trim()),V({title:"",description:"Access Token "}),setTimeout(()=>{n({to:"/auth"})},1500)):V({title:"",description:ye.message||" Token",variant:"destructive"})}catch(be){console.error(" Token :",be),V({title:"",description:"",variant:"destructive"})}finally{j(!1)}},ee=async()=>{N(!0);try{const be=await fetch("/api/webui/auth/regenerate",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"}),ye=await be.json();be.ok&&ye.success?(i(ye.token),F(ye.token),O(!0),z(!1),V({title:"",description:" Access Token "})):V({title:"",description:ye.message||" Token",variant:"destructive"})}catch(be){console.error(" Token :",be),V({title:"",description:"",variant:"destructive"})}finally{N(!1)}},ge=async()=>{try{await navigator.clipboard.writeText(U),z(!0),V({title:"",description:"Token "})}catch{V({title:"",description:" Token",variant:"destructive"})}},ve=()=>{O(!1),setTimeout(()=>{F(""),z(!1)},300),setTimeout(()=>{n({to:"/auth"})},500)},je=be=>{be||ve()};return e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsx(Fs,{open:L,onOpenChange:je,children:e.jsxs(Bs,{className:"sm:max-w-md",children:[e.jsxs(Hs,{children:[e.jsxs(qs,{className:"flex items-center gap-2",children:[e.jsx(Ra,{className:"h-5 w-5 text-yellow-500"})," Access Token"]}),e.jsx(et,{children:" Token"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"rounded-lg border-2 border-primary/20 bg-primary/5 p-4",children:[e.jsx(S,{className:"text-xs text-muted-foreground mb-2 block",children:" Token (64)"}),e.jsx("div",{className:"font-mono text-sm break-all select-all bg-background p-3 rounded border",children:U})]}),e.jsx("div",{className:"rounded-lg border border-yellow-200 dark:border-yellow-900 bg-yellow-50 dark:bg-yellow-950/30 p-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ra,{className:"h-4 w-4 text-yellow-600 dark:text-yellow-500 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-yellow-800 dark:text-yellow-300 space-y-1",children:[e.jsx("p",{className:"font-semibold",children:""}),e.jsxs("ul",{className:"list-disc list-inside space-y-0.5 text-xs",children:[e.jsx("li",{children:" Token "}),e.jsx("li",{children:""}),e.jsx("li",{children:""}),e.jsx("li",{children:" Token "})]})]})]})})]}),e.jsxs(at,{className:"gap-2 sm:gap-0",children:[e.jsx(_,{variant:"outline",onClick:ge,className:"gap-2",children:R?e.jsxs(e.Fragment,{children:[e.jsx(Wt,{className:"h-4 w-4 text-green-500"}),""]}):e.jsxs(e.Fragment,{children:[e.jsx(Zc,{className:"h-4 w-4"})," Token"]})}),e.jsx(_,{onClick:ve,children:""})]})]})}),e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:" Access Token"}),e.jsx("div",{className:"space-y-3 sm:space-y-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"current-token",className:"text-sm",children:""}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ie,{id:"current-token",type:x?"text":"password",value:r||"",readOnly:!0,className:"pr-10 font-mono text-sm",placeholder:"Token  Cookie "}),e.jsx("button",{onClick:()=>{r?f(!x):V({title:"",description:'Token  Cookie  Token ""'})},className:"absolute right-2 top-1/2 -translate-y-1/2 p-1.5 hover:bg-accent rounded",title:x?"":"",children:x?e.jsx(pi,{className:"h-4 w-4 text-muted-foreground"}):e.jsx(Vt,{className:"h-4 w-4 text-muted-foreground"})})]}),e.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[e.jsx(_,{variant:"outline",size:"icon",onClick:()=>k(r),title:"",className:"flex-shrink-0",disabled:!r,children:C?e.jsx(Wt,{className:"h-4 w-4 text-green-500"}):e.jsx(Zc,{className:"h-4 w-4"})}),e.jsxs(xs,{children:[e.jsx(dt,{asChild:!0,children:e.jsxs(_,{variant:"outline",disabled:y,className:"gap-2 flex-1 sm:flex-none",children:[e.jsx(Ht,{className:H("h-4 w-4",y&&"animate-spin")}),e.jsx("span",{className:"hidden sm:inline",children:""}),e.jsx("span",{className:"sm:hidden",children:""})]})}),e.jsxs(rs,{children:[e.jsxs(is,{children:[e.jsx(os,{children:" Token"}),e.jsx(ds,{children:" 64  Token   Token "})]}),e.jsxs(cs,{children:[e.jsx(ms,{children:""}),e.jsx(us,{onClick:ee,children:""})]})]})]})]})]}),e.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:" Access Token"})]})})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:" Access Token"}),e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"new-token",className:"text-sm",children:""}),e.jsxs("div",{className:"relative",children:[e.jsx(ie,{id:"new-token",type:p?"text":"password",value:d,onChange:be=>m(be.target.value),className:"pr-10 font-mono text-sm",placeholder:" Token"}),e.jsx("button",{onClick:()=>g(!p),className:"absolute right-2 top-1/2 -translate-y-1/2 p-1.5 hover:bg-accent rounded",title:p?"":"",children:p?e.jsx(pi,{className:"h-4 w-4 text-muted-foreground"}):e.jsx(Vt,{className:"h-4 w-4 text-muted-foreground"})})]}),d&&e.jsxs("div",{className:"mt-3 space-y-2 p-3 rounded-lg bg-muted/50",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:"Token :"}),e.jsx("div",{className:"space-y-1.5",children:$.rules.map(be=>e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[be.passed?e.jsx(ua,{className:"h-4 w-4 text-green-500 flex-shrink-0"}):e.jsx(xg,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),e.jsx("span",{className:H(be.passed?"text-green-600 dark:text-green-400":"text-muted-foreground"),children:be.label})]},be.id))}),$.isValid&&e.jsx("div",{className:"mt-2 pt-2 border-t border-border",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-600 dark:text-green-400",children:[e.jsx(Wt,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:"Token "})]})})]})]}),e.jsx(_,{onClick:M,disabled:b||!$.isValid||!d,className:"w-full sm:w-auto",children:b?"...":" Token"})]})]}),e.jsxs("div",{className:"rounded-lg border border-yellow-200 dark:border-yellow-900 bg-yellow-50 dark:bg-yellow-950/30 p-3 sm:p-4",children:[e.jsx("h4",{className:"text-sm sm:text-base font-semibold text-yellow-900 dark:text-yellow-200 mb-2",children:""}),e.jsxs("ul",{className:"text-xs sm:text-sm text-yellow-800 dark:text-yellow-300 space-y-1 list-disc list-inside",children:[e.jsx("li",{children:" Token  64 "}),e.jsx("li",{children:" Token "}),e.jsx("li",{children:" Token  Token "}),e.jsx("li",{children:" Token"}),e.jsx("li",{children:" Token "}),e.jsx("li",{children:" Token "})]})]})]})}function $0(){const n=Ta(),{toast:r}=Qs(),[i,d]=u.useState(!1),[m,x]=u.useState(!1),[f,p]=u.useState(()=>ot("logCacheSize")),[g,b]=u.useState(()=>ot("wsReconnectInterval")),[j,y]=u.useState(()=>ot("wsMaxReconnectAttempts")),[N,C]=u.useState(()=>ot("dataSyncInterval")),[w,L]=u.useState(()=>cp()),[O,U]=u.useState(!1),[F,R]=u.useState(!1),z=u.useRef(null);if(m)throw new Error("");const V=()=>{L(cp())},$=D=>{const X=D[0];p(X),nr("logCacheSize",X)},k=D=>{const X=D[0];b(X),nr("wsReconnectInterval",X)},M=D=>{const X=D[0];y(X),nr("wsMaxReconnectAttempts",X)},ee=D=>{const X=D[0];C(X),nr("dataSyncInterval",X)},ge=()=>{mn.clearLogs(),r({title:"",description:""})},ve=()=>{const D=O0();V(),r({title:"",description:` ${D.clearedKeys.length} `})},je=()=>{U(!0);try{const D=M0(),X=JSON.stringify(D,null,2),J=new Blob([X],{type:"application/json"}),ce=URL.createObjectURL(J),T=document.createElement("a");T.href=ce,T.download=`maibot-webui-settings-${new Date().toISOString().slice(0,10)}.json`,document.body.appendChild(T),T.click(),document.body.removeChild(T),URL.revokeObjectURL(ce),r({title:"",description:" JSON "})}catch(D){console.error(":",D),r({title:"",description:"",variant:"destructive"})}finally{U(!1)}},be=D=>{const X=D.target.files?.[0];if(!X)return;R(!0);const J=new FileReader;J.onload=ce=>{try{const T=ce.target?.result,re=JSON.parse(T),he=A0(re);he.success?(p(ot("logCacheSize")),b(ot("wsReconnectInterval")),y(ot("wsMaxReconnectAttempts")),C(ot("dataSyncInterval")),V(),r({title:"",description:` ${he.imported.length} ${he.skipped.length>0?` ${he.skipped.length} `:""}`}),(he.imported.includes("theme")||he.imported.includes("accentColor"))&&r({title:"",description:""})):r({title:"",description:"",variant:"destructive"})}catch(T){console.error(":",T),r({title:"",description:"",variant:"destructive"})}finally{R(!1),z.current&&(z.current.value="")}},J.readAsText(X)},ye=()=>{D0(),p(Fa.logCacheSize),b(Fa.wsReconnectInterval),y(Fa.wsMaxReconnectAttempts),C(Fa.dataSyncInterval),V(),r({title:"",description:""})},Ne=async()=>{d(!0);try{const D=localStorage.getItem("access-token"),X=await fetch("/api/webui/setup/reset",{method:"POST",headers:{Authorization:`Bearer ${D}`}}),J=await X.json();X.ok&&J.success?(r({title:"",description:""}),setTimeout(()=>{n({to:"/setup"})},1e3)):r({title:"",description:J.message||"",variant:"destructive"})}catch(D){console.error(":",D),r({title:"",description:"",variant:"destructive"})}finally{d(!1)}};return e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6",children:[e.jsxs("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4 flex items-center gap-2",children:[e.jsx(Pc,{className:"h-5 w-5"}),""]}),e.jsxs("div",{className:"space-y-4 sm:space-y-5",children:[e.jsxs("div",{className:"rounded-lg bg-muted/50 p-3 sm:p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(ey,{className:"h-4 w-4"}),""]}),e.jsx(_,{variant:"ghost",size:"sm",onClick:V,className:"h-7 px-2",children:e.jsx(Ht,{className:"h-3 w-3"})})]}),e.jsx("div",{className:"text-2xl font-bold text-primary",children:R0(w.used)}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[w.items," "]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(S,{className:"text-sm font-medium",children:""}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[f," "]})]}),e.jsx(Sa,{value:[f],onValueChange:$,min:100,max:5e3,step:100,className:"w-full"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(S,{className:"text-sm font-medium",children:""}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[N," "]})]}),e.jsx(Sa,{value:[N],onValueChange:ee,min:10,max:120,step:5,className:"w-full"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(S,{className:"text-sm font-medium",children:"WebSocket "}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[g/1e3," "]})]}),e.jsx(Sa,{value:[g],onValueChange:k,min:1e3,max:1e4,step:500,className:"w-full"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" WebSocket "})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(S,{className:"text-sm font-medium",children:"WebSocket "}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[j," "]})]}),e.jsx(Sa,{value:[j],onValueChange:M,min:3,max:30,step:1,className:"w-full"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 pt-2",children:[e.jsxs(_,{variant:"outline",size:"sm",onClick:ge,className:"gap-2",children:[e.jsx(ss,{className:"h-4 w-4"}),""]}),e.jsxs(xs,{children:[e.jsx(dt,{asChild:!0,children:e.jsxs(_,{variant:"outline",size:"sm",className:"gap-2",children:[e.jsx(ss,{className:"h-4 w-4"}),""]})}),e.jsxs(rs,{children:[e.jsxs(is,{children:[e.jsx(os,{children:""}),e.jsx(ds,{children:" "})]}),e.jsxs(cs,{children:[e.jsx(ms,{children:""}),e.jsx(us,{onClick:ve,children:""})]})]})]})]})]})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6",children:[e.jsxs("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4 flex items-center gap-2",children:[e.jsx(La,{className:"h-5 w-5"}),"/"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:""}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(_,{variant:"outline",onClick:je,disabled:O,className:"gap-2",children:[e.jsx(La,{className:"h-4 w-4"}),O?"...":""]}),e.jsx("input",{ref:z,type:"file",accept:".json",onChange:be,className:"hidden"}),e.jsxs(_,{variant:"outline",onClick:()=>z.current?.click(),disabled:F,className:"gap-2",children:[e.jsx(gi,{className:"h-4 w-4"}),F?"...":""]})]}),e.jsx("div",{className:"pt-2 border-t",children:e.jsxs(xs,{children:[e.jsx(dt,{asChild:!0,children:e.jsxs(_,{variant:"outline",size:"sm",className:"gap-2 text-destructive hover:text-destructive",children:[e.jsx(Jc,{className:"h-4 w-4"}),""]})}),e.jsxs(rs,{children:[e.jsxs(is,{children:[e.jsx(os,{children:""}),e.jsx(ds,{children:" "})]}),e.jsxs(cs,{children:[e.jsx(ms,{children:""}),e.jsx(us,{onClick:ye,children:""})]})]})]})})]})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:""}),e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsx("div",{className:"space-y-2",children:e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:""})}),e.jsxs(xs,{children:[e.jsx(dt,{asChild:!0,children:e.jsxs(_,{variant:"outline",disabled:i,className:"gap-2",children:[e.jsx(Jc,{className:H("h-4 w-4",i&&"animate-spin")}),""]})}),e.jsxs(rs,{children:[e.jsxs(is,{children:[e.jsx(os,{children:""}),e.jsx(ds,{children:""})]}),e.jsxs(cs,{children:[e.jsx(ms,{children:""}),e.jsx(us,{onClick:Ne,children:""})]})]})]})]})]}),e.jsxs("div",{className:"rounded-lg border border-dashed border-yellow-500/50 bg-yellow-500/5 p-4 sm:p-6",children:[e.jsxs("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4 flex items-center gap-2",children:[e.jsx(Ra,{className:"h-5 w-5 text-yellow-500"}),""]}),e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsx("div",{className:"space-y-2",children:e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:""})}),e.jsxs(xs,{children:[e.jsx(dt,{asChild:!0,children:e.jsxs(_,{variant:"destructive",className:"gap-2",children:[e.jsx(Ra,{className:"h-4 w-4"}),""]})}),e.jsxs(rs,{children:[e.jsxs(is,{children:[e.jsx(os,{children:""}),e.jsx(ds,{children:" React  "})]}),e.jsxs(cs,{children:[e.jsx(ms,{children:""}),e.jsx(us,{onClick:()=>x(!0),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:""})]})]})]})]})]})]})}function F0(){return e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsx("div",{className:"rounded-lg border-2 border-primary/30 bg-gradient-to-r from-primary/5 to-primary/10 p-4 sm:p-6",children:e.jsxs("div",{className:"flex items-start gap-3 sm:gap-4",children:[e.jsx("div",{className:"flex-shrink-0 rounded-lg bg-primary/10 p-2 sm:p-3",children:e.jsx("svg",{className:"h-6 w-6 sm:h-8 sm:w-8 text-primary",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-foreground mb-2",children:""}),e.jsx("p",{className:"text-sm sm:text-base text-muted-foreground mb-3",children:" GitHub  Star  "}),e.jsxs("a",{href:"https://github.com/Mai-with-u/MaiBot-Dashboard",target:"_blank",rel:"noopener noreferrer",className:H("inline-flex items-center gap-2 px-4 py-2 rounded-lg","bg-primary text-primary-foreground font-medium text-sm","hover:bg-primary/90 transition-colors","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"),children:[e.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z",clipRule:"evenodd"})})," GitHub",e.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})]})]})}),e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6",children:[e.jsxs("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:[" ",Zu]}),e.jsxs("div",{className:"space-y-2 text-xs sm:text-sm text-muted-foreground",children:[e.jsxs("p",{children:[": ",io]}),e.jsx("p",{children:"MaiBot Web "})]})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:""}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"MaiBot "}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Mai-with-u"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"WebUI"}),e.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground",children:["Mai-with-u ",e.jsx("a",{href:"https://github.com/DrSmoothl",target:"_blank",rel:"noopener noreferrer",className:"text-primary underline",children:"@MotricSeven"})]})]})]})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:""}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-xs sm:text-sm text-muted-foreground",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("p",{className:"font-medium text-foreground",children:""}),e.jsxs("ul",{className:"space-y-0.5 list-disc list-inside",children:[e.jsx("li",{children:"React 19.2.0"}),e.jsx("li",{children:"TypeScript 5.7.2"}),e.jsx("li",{children:"Vite 6.0.7"}),e.jsx("li",{children:"TanStack Router 1.94.2"})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("p",{className:"font-medium text-foreground",children:"UI "}),e.jsxs("ul",{className:"space-y-0.5 list-disc list-inside",children:[e.jsx("li",{children:"shadcn/ui"}),e.jsx("li",{children:"Radix UI"}),e.jsx("li",{children:"Tailwind CSS 3.4.17"}),e.jsx("li",{children:"Lucide Icons"})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("p",{className:"font-medium text-foreground",children:""}),e.jsxs("ul",{className:"space-y-0.5 list-disc list-inside",children:[e.jsx("li",{children:"Python 3.12+"}),e.jsx("li",{children:"FastAPI"}),e.jsx("li",{children:"Uvicorn"}),e.jsx("li",{children:"WebSocket"})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("p",{className:"font-medium text-foreground",children:""}),e.jsxs("ul",{className:"space-y-0.5 list-disc list-inside",children:[e.jsx("li",{children:"Bun / npm"}),e.jsx("li",{children:"ESLint 9.17.0"}),e.jsx("li",{children:"PostCSS"})]})]})]})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:""}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mb-3",children:""}),e.jsx(Ze,{className:"h-[300px] sm:h-[400px]",children:e.jsxs("div",{className:"space-y-4 pr-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:"UI "}),e.jsxs("div",{className:"grid gap-2 text-xs sm:text-sm",children:[e.jsx(st,{name:"React",description:"",license:"MIT"}),e.jsx(st,{name:"shadcn/ui",description:" React ",license:"MIT"}),e.jsx(st,{name:"Radix UI",description:"",license:"MIT"}),e.jsx(st,{name:"Tailwind CSS",description:" CSS ",license:"MIT"}),e.jsx(st,{name:"Lucide React",description:"",license:"ISC"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:""}),e.jsxs("div",{className:"grid gap-2 text-xs sm:text-sm",children:[e.jsx(st,{name:"TanStack Router",description:"",license:"MIT"}),e.jsx(st,{name:"Zustand",description:"",license:"MIT"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:""}),e.jsxs("div",{className:"grid gap-2 text-xs sm:text-sm",children:[e.jsx(st,{name:"React Hook Form",description:"",license:"MIT"}),e.jsx(st,{name:"Zod",description:"TypeScript  schema ",license:"MIT"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:""}),e.jsxs("div",{className:"grid gap-2 text-xs sm:text-sm",children:[e.jsx(st,{name:"clsx",description:" className ",license:"MIT"}),e.jsx(st,{name:"tailwind-merge",description:"Tailwind ",license:"MIT"}),e.jsx(st,{name:"class-variance-authority",description:"",license:"Apache-2.0"}),e.jsx(st,{name:"date-fns",description:"",license:"MIT"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:""}),e.jsxs("div",{className:"grid gap-2 text-xs sm:text-sm",children:[e.jsx(st,{name:"Framer Motion",description:"React ",license:"MIT"}),e.jsx(st,{name:"vaul",description:"",license:"MIT"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:""}),e.jsxs("div",{className:"grid gap-2 text-xs sm:text-sm",children:[e.jsx(st,{name:"FastAPI",description:" Python Web ",license:"MIT"}),e.jsx(st,{name:"Uvicorn",description:"ASGI ",license:"BSD-3-Clause"}),e.jsx(st,{name:"Pydantic",description:"",license:"MIT"}),e.jsx(st,{name:"python-multipart",description:"",license:"Apache-2.0"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:""}),e.jsxs("div",{className:"grid gap-2 text-xs sm:text-sm",children:[e.jsx(st,{name:"TypeScript",description:"JavaScript ",license:"Apache-2.0"}),e.jsx(st,{name:"Vite",description:"",license:"MIT"}),e.jsx(st,{name:"ESLint",description:"JavaScript ",license:"MIT"}),e.jsx(st,{name:"PostCSS",description:"CSS ",license:"MIT"})]})]})]})})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:""}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"rounded-lg bg-primary/5 border border-primary/20 p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-start gap-2 sm:gap-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:e.jsx("div",{className:"rounded-md bg-primary/10 px-2 py-1",children:e.jsx("span",{className:"text-xs sm:text-sm font-bold text-primary",children:"GPLv3"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm sm:text-base font-semibold text-foreground mb-1",children:"MaiBot WebUI"}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:" GNU General Public License v3.0  "})]})]})}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"MITApache-2.0BSD  "})]})]})]})}function st({name:n,description:r,license:i}){return e.jsxs("div",{className:"flex items-start justify-between gap-2 rounded-lg border bg-muted/30 p-2.5 sm:p-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-foreground truncate",children:n}),e.jsx("p",{className:"text-muted-foreground text-xs mt-0.5",children:r})]}),e.jsx("span",{className:"inline-flex items-center rounded-full bg-primary/10 px-2 py-0.5 text-[10px] font-medium text-primary flex-shrink-0",children:i})]})}function Ru({value:n,current:r,onChange:i,label:d,description:m}){const x=r===n;return e.jsxs("button",{onClick:()=>i(n),className:H("relative rounded-lg border-2 p-3 sm:p-4 text-left transition-all","hover:border-primary/50 hover:bg-accent/50",x?"border-primary bg-accent":"border-border"),children:[x&&e.jsx("div",{className:"absolute top-2 right-2 sm:top-3 sm:right-3 h-2 w-2 rounded-full bg-primary"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-sm sm:text-base font-medium",children:d}),e.jsx("div",{className:"text-[10px] sm:text-xs text-muted-foreground",children:m})]}),e.jsxs("div",{className:"mt-2 sm:mt-3 flex gap-1",children:[n==="light"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-slate-200"}),e.jsx("div",{className:"h-2 w-2 rounded-full bg-slate-300"}),e.jsx("div",{className:"h-2 w-2 rounded-full bg-slate-400"})]}),n==="dark"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-slate-700"}),e.jsx("div",{className:"h-2 w-2 rounded-full bg-slate-800"}),e.jsx("div",{className:"h-2 w-2 rounded-full bg-slate-900"})]}),n==="system"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-gradient-to-r from-slate-200 to-slate-700"}),e.jsx("div",{className:"h-2 w-2 rounded-full bg-gradient-to-r from-slate-300 to-slate-800"}),e.jsx("div",{className:"h-2 w-2 rounded-full bg-gradient-to-r from-slate-400 to-slate-900"})]})]})]})}function _a({value:n,current:r,onChange:i,label:d,colorClass:m}){const x=r===n;return e.jsxs("button",{onClick:()=>i(n),className:H("relative rounded-lg border-2 p-2 sm:p-3 text-left transition-all","hover:border-primary/50 hover:bg-accent/50",x?"border-primary bg-accent":"border-border"),children:[x&&e.jsx("div",{className:"absolute top-1.5 right-1.5 sm:top-2 sm:right-2 h-1.5 w-1.5 sm:h-2 sm:w-2 rounded-full bg-primary"}),e.jsxs("div",{className:"flex flex-col items-center gap-1.5 sm:gap-2",children:[e.jsx("div",{className:H("h-8 w-8 sm:h-10 sm:w-10 rounded-full",m)}),e.jsx("div",{className:"text-[10px] sm:text-xs font-medium text-center",children:d})]})]})}class V0{grad3;p;perm;constructor(r=0){this.grad3=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],this.p=[];for(let i=0;i<256;i++)this.p[i]=Math.floor(Math.random()*256);this.perm=[];for(let i=0;i<512;i++)this.perm[i]=this.p[i&255]}dot(r,i,d){return r[0]*i+r[1]*d}mix(r,i,d){return(1-d)*r+d*i}fade(r){return r*r*r*(r*(r*6-15)+10)}perlin2(r,i){const d=Math.floor(r)&255,m=Math.floor(i)&255;r-=Math.floor(r),i-=Math.floor(i);const x=this.fade(r),f=this.fade(i),p=this.perm[d]+m,g=this.perm[p],b=this.perm[p+1],j=this.perm[d+1]+m,y=this.perm[j],N=this.perm[j+1];return this.mix(this.mix(this.dot(this.grad3[g%12],r,i),this.dot(this.grad3[y%12],r-1,i),x),this.mix(this.dot(this.grad3[b%12],r,i-1),this.dot(this.grad3[N%12],r-1,i-1),x),f)}}function dp(){const n=u.useRef(null),r=u.useRef(null),i=u.useRef(void 0),d=u.useRef({mouse:{x:-10,y:0,lx:0,ly:0,sx:0,sy:0,v:0,vs:0,a:0,set:!1},lines:[],paths:[],noise:new V0(Math.random()),bounding:null});return u.useEffect(()=>{const m=r.current,x=n.current;if(!m||!x)return;const f=d.current,p=()=>{const L=m.getBoundingClientRect();f.bounding=L,x.style.width=`${L.width}px`,x.style.height=`${L.height}px`},g=()=>{if(!f.bounding)return;const{width:L,height:O}=f.bounding;f.lines=[],f.paths.forEach(ee=>ee.remove()),f.paths=[];const U=10,F=32,R=L+200,z=O+30,V=Math.ceil(R/U),$=Math.ceil(z/F),k=(L-U*V)/2,M=(O-F*$)/2;for(let ee=0;ee<=V;ee++){const ge=[];for(let je=0;je<=$;je++){const be={x:k+U*ee,y:M+F*je,wave:{x:0,y:0},cursor:{x:0,y:0,vx:0,vy:0}};ge.push(be)}const ve=document.createElementNS("http://www.w3.org/2000/svg","path");x.appendChild(ve),f.paths.push(ve),f.lines.push(ge)}},b=L=>{const{lines:O,mouse:U,noise:F}=f;O.forEach(R=>{R.forEach(z=>{const V=F.perlin2((z.x+L*.0125)*.002,(z.y+L*.005)*.0015)*12;z.wave.x=Math.cos(V)*32,z.wave.y=Math.sin(V)*16;const $=z.x-U.sx,k=z.y-U.sy,M=Math.hypot($,k),ee=Math.max(175,U.vs);if(M<ee){const ge=1-M/ee,ve=Math.cos(M*.001)*ge;z.cursor.vx+=Math.cos(U.a)*ve*ee*U.vs*65e-5,z.cursor.vy+=Math.sin(U.a)*ve*ee*U.vs*65e-5}z.cursor.vx+=(0-z.cursor.x)*.005,z.cursor.vy+=(0-z.cursor.y)*.005,z.cursor.vx*=.925,z.cursor.vy*=.925,z.cursor.x+=z.cursor.vx*2,z.cursor.y+=z.cursor.vy*2,z.cursor.x=Math.min(100,Math.max(-100,z.cursor.x)),z.cursor.y=Math.min(100,Math.max(-100,z.cursor.y))})})},j=(L,O=!0)=>{const U={x:L.x+L.wave.x+(O?L.cursor.x:0),y:L.y+L.wave.y+(O?L.cursor.y:0)};return U.x=Math.round(U.x*10)/10,U.y=Math.round(U.y*10)/10,U},y=()=>{const{lines:L,paths:O}=f;L.forEach((U,F)=>{let R=j(U[0],!1),z=`M ${R.x} ${R.y}`;U.forEach((V,$)=>{const k=$===U.length-1;R=j(V,!k),z+=`L ${R.x} ${R.y}`}),O[F].setAttribute("d",z)})},N=L=>{const{mouse:O}=f;O.sx+=(O.x-O.sx)*.1,O.sy+=(O.y-O.sy)*.1;const U=O.x-O.lx,F=O.y-O.ly,R=Math.hypot(U,F);O.v=R,O.vs+=(R-O.vs)*.1,O.vs=Math.min(100,O.vs),O.lx=O.x,O.ly=O.y,O.a=Math.atan2(F,U),m&&(m.style.setProperty("--x",`${O.sx}px`),m.style.setProperty("--y",`${O.sy}px`)),b(L),y(),i.current=requestAnimationFrame(N)},C=L=>{if(!f.bounding)return;const{mouse:O}=f;O.x=L.pageX-f.bounding.left,O.y=L.pageY-f.bounding.top+window.scrollY,O.set||(O.sx=O.x,O.sy=O.y,O.lx=O.x,O.ly=O.y,O.set=!0)},w=()=>{p(),g()};return p(),g(),window.addEventListener("resize",w),window.addEventListener("mousemove",C),i.current=requestAnimationFrame(N),()=>{window.removeEventListener("resize",w),window.removeEventListener("mousemove",C),i.current&&cancelAnimationFrame(i.current)}},[]),e.jsxs("div",{ref:r,className:"waves-background",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",overflow:"hidden",pointerEvents:"none"},children:[e.jsx("div",{className:"waves-cursor",style:{position:"absolute",top:0,left:0,width:"0.5rem",height:"0.5rem",background:"hsl(var(--primary) / 0.3)",borderRadius:"50%",transform:"translate3d(calc(var(--x, -0.5rem) - 50%), calc(var(--y, 50%) - 50%), 0)",willChange:"transform",pointerEvents:"none"}}),e.jsx("svg",{ref:n,style:{display:"block",width:"100%",height:"100%"},children:e.jsx("style",{children:`
          path {
            fill: none;
            stroke: hsl(var(--primary) / 0.20);
            stroke-width: 1px;
          }
        `})})]})}async function Te(n,r){const i={...r,credentials:"include",headers:{"Content-Type":"application/json",...r?.headers}},d=await fetch(n,i);if(d.status===401)throw window.location.href="/auth",new Error("");return d}function Vs(){return{"Content-Type":"application/json"}}async function Q0(){try{await fetch("/api/webui/auth/logout",{method:"POST",credentials:"include"})}catch(n){console.error(":",n)}window.location.href="/auth"}async function em(){try{return(await(await fetch("/api/webui/auth/check",{method:"GET",credentials:"include"})).json()).authenticated===!0}catch{return!1}}function I0(){const[n,r]=u.useState(""),[i,d]=u.useState(!1),[m,x]=u.useState(""),[f,p]=u.useState(!0),g=Ta(),{enableWavesBackground:b,setEnableWavesBackground:j}=Dg(),{theme:y,setTheme:N}=Pu();u.useEffect(()=>{(async()=>{try{await em()&&g({to:"/"})}catch{}finally{p(!1)}})()},[g]);const w=y==="system"?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":y,L=()=>{N(w==="dark"?"light":"dark")},O=async U=>{if(U.preventDefault(),x(""),!n.trim()){x(" Access Token");return}d(!0);try{const F=await fetch("/api/webui/auth/verify",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({token:n.trim()})}),R=await F.json();F.ok&&R.valid?R.is_first_setup?g({to:"/setup"}):g({to:"/"}):x(R.message||"Token ")}catch(F){console.error("Token :",F),x("")}finally{d(!1)}};return f?e.jsxs("div",{className:"relative flex min-h-screen items-center justify-center overflow-hidden bg-background p-4",children:[b&&e.jsx(dp,{}),e.jsx("div",{className:"text-muted-foreground",children:"..."})]}):e.jsxs("div",{className:"relative flex min-h-screen items-center justify-center overflow-hidden bg-background p-4",children:[b&&e.jsx(dp,{}),e.jsxs(Ve,{className:"relative z-10 w-full max-w-md shadow-2xl backdrop-blur-xl bg-card/80 border-border/50",children:[e.jsx("button",{onClick:L,className:"absolute right-4 top-4 rounded-lg p-2 hover:bg-accent transition-colors z-10 text-foreground",title:w==="dark"?"":"",children:w==="dark"?e.jsx(hg,{className:"h-5 w-5",strokeWidth:2.5,fill:"none"}):e.jsx(fg,{className:"h-5 w-5",strokeWidth:2.5,fill:"none"})}),e.jsxs(ls,{className:"space-y-4 text-center",children:[e.jsx("div",{className:"mx-auto flex h-16 w-16 items-center justify-center rounded-2xl bg-primary/10",children:e.jsx(Pf,{className:"h-8 w-8 text-primary",strokeWidth:2,fill:"none"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ns,{className:"text-2xl font-bold",children:" MaiBot"}),e.jsx(tt,{className:"text-base",children:" Access Token "})]})]}),e.jsx(ps,{children:e.jsxs("form",{onSubmit:O,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"token",className:"text-sm font-medium",children:"Access Token"}),e.jsxs("div",{className:"relative",children:[e.jsx(pg,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground",strokeWidth:2,fill:"none"}),e.jsx(ie,{id:"token",type:"password",placeholder:" Access Token",value:n,onChange:U=>r(U.target.value),className:H("pl-10",m&&"border-red-500 focus-visible:ring-red-500"),disabled:i,autoFocus:!0,autoComplete:"off"})]})]}),m&&e.jsxs("div",{className:"flex items-center gap-2 rounded-md bg-red-50 p-3 text-sm text-red-600 dark:bg-red-950/50 dark:text-red-400",children:[e.jsx(qt,{className:"h-4 w-4 flex-shrink-0",strokeWidth:2,fill:"none"}),e.jsx("span",{children:m})]}),e.jsx(_,{type:"submit",className:"w-full",disabled:i,children:i?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}),"..."]}):""}),e.jsxs(Fs,{children:[e.jsx(Wu,{asChild:!0,children:e.jsxs("button",{className:"w-full text-center text-sm text-primary hover:text-primary/80 transition-colors underline-offset-4 hover:underline flex items-center justify-center gap-1",children:[e.jsx(gg,{className:"h-4 w-4",strokeWidth:2,fill:"none"})," Token Token"]})}),e.jsxs(Bs,{className:"sm:max-w-md",children:[e.jsxs(Hs,{children:[e.jsxs(qs,{className:"flex items-center gap-2",children:[e.jsx(Pf,{className:"h-5 w-5 text-primary",strokeWidth:2,fill:"none"})," Access Token"]}),e.jsx(et,{children:"Access Token  MaiBot WebUI "})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"rounded-lg border bg-muted/50 p-4 space-y-2",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(sy,{className:"h-5 w-5 text-primary flex-shrink-0 mt-0.5",strokeWidth:2,fill:"none"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("h4",{className:"font-semibold text-sm",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:" MaiBot  WebUI Access Token"}),e.jsxs("div",{className:"rounded bg-background p-2 font-mono text-xs",children:[e.jsx("p",{className:"text-muted-foreground",children:" WebUI Access Token: abc123..."}),e.jsx("p",{className:"text-muted-foreground",children:"  Token  WebUI"})]})]})]})}),e.jsx("div",{className:"rounded-lg border bg-muted/50 p-4 space-y-2",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Oa,{className:"h-5 w-5 text-primary flex-shrink-0 mt-0.5",strokeWidth:2,fill:"none"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("h4",{className:"font-semibold text-sm",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Token "}),e.jsx("div",{className:"rounded bg-background p-2 font-mono text-xs break-all",children:e.jsx("code",{className:"text-primary",children:"data/webui.json"})}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[" ",e.jsx("code",{className:"px-1 py-0.5 bg-background rounded",children:"access_token"})," "]})]})]})}),e.jsx("div",{className:"rounded-lg border border-yellow-200 dark:border-yellow-900 bg-yellow-50 dark:bg-yellow-950/30 p-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(qt,{className:"h-4 w-4 text-yellow-600 dark:text-yellow-500 flex-shrink-0 mt-0.5",strokeWidth:2,fill:"none"}),e.jsxs("div",{className:"text-sm text-yellow-800 dark:text-yellow-300 space-y-1",children:[e.jsx("p",{className:"font-semibold",children:""}),e.jsxs("ul",{className:"list-disc list-inside space-y-0.5 text-xs",children:[e.jsx("li",{children:" Token"}),e.jsx("li",{children:" Token"})]})]})]})})]})]})]}),e.jsxs(xs,{children:[e.jsx(dt,{asChild:!0,children:e.jsxs("button",{className:"w-full text-center text-sm text-muted-foreground hover:text-foreground transition-colors underline-offset-4 hover:underline flex items-center justify-center gap-1",children:[e.jsx(xn,{className:"h-4 w-4",strokeWidth:2,fill:"none"}),""]})}),e.jsxs(rs,{children:[e.jsxs(is,{children:[e.jsxs(os,{className:"flex items-center gap-2",children:[e.jsx(xn,{className:"h-5 w-5 text-primary",strokeWidth:2,fill:"none"}),""]}),e.jsx(ds,{children:""})]}),e.jsx("div",{className:"rounded-lg border bg-muted/50 p-4 space-y-2",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:""})}),e.jsxs(cs,{children:[e.jsx(ms,{children:""}),e.jsx(us,{onClick:()=>j(!1),children:""})]})]})]})]})})]}),e.jsx("div",{className:"absolute bottom-4 left-0 right-0 text-center text-xs text-muted-foreground",children:e.jsx("p",{children:T0})})]})}const Ys=u.forwardRef(({className:n,...r},i)=>e.jsx("textarea",{className:H("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:i,...r}));Ys.displayName="Textarea";const co=u.forwardRef(({className:n,orientation:r="horizontal",decorative:i=!0,...d},m)=>e.jsx(qp,{ref:m,decorative:i,orientation:r,className:H("shrink-0 bg-border",r==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",n),...d}));co.displayName=qp.displayName;function Y0({config:n,onChange:r}){const i=m=>{m.trim()&&!n.alias_names.includes(m.trim())&&r({...n,alias_names:[...n.alias_names,m.trim()]})},d=m=>{r({...n,alias_names:n.alias_names.filter((x,f)=>f!==m)})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(S,{htmlFor:"qq_account",children:"QQ *"}),e.jsx(ie,{id:"qq_account",type:"number",placeholder:"QQ",value:n.qq_account||"",onChange:m=>r({...n,qq_account:Number(m.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"QQ"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(S,{htmlFor:"nickname",children:" *"}),e.jsx(ie,{id:"nickname",placeholder:"",value:n.nickname,onChange:m=>r({...n,nickname:m.target.value})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(S,{children:""}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:n.alias_names.map((m,x)=>e.jsxs(Ie,{variant:"secondary",className:"gap-1",children:[m,e.jsx("button",{type:"button",onClick:()=>d(x),className:"ml-1 hover:text-destructive",children:e.jsx(hl,{className:"h-3 w-3"})})]},x))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ie,{id:"alias_input",placeholder:"",onKeyPress:m=>{m.key==="Enter"&&(i(m.target.value),m.target.value="")}}),e.jsx(_,{type:"button",variant:"outline",onClick:()=>{const m=document.getElementById("alias_input");m&&(i(m.value),m.value="")},children:""})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})]})}function K0({config:n,onChange:r}){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(S,{htmlFor:"personality",children:" *"}),e.jsx(Ys,{id:"personality",placeholder:"120",value:n.personality,onChange:i=>r({...n,personality:i.target.value}),rows:3}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(S,{htmlFor:"reply_style",children:" *"}),e.jsx(Ys,{id:"reply_style",placeholder:"",value:n.reply_style,onChange:i=>r({...n,reply_style:i.target.value}),rows:3}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(S,{htmlFor:"interest",children:" *"}),e.jsx(Ys,{id:"interest",placeholder:"",value:n.interest,onChange:i=>r({...n,interest:i.target.value}),rows:2}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsx(co,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(S,{htmlFor:"plan_style",children:" *"}),e.jsx(Ys,{id:"plan_style",placeholder:"",value:n.plan_style,onChange:i=>r({...n,plan_style:i.target.value}),rows:4}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(S,{htmlFor:"private_plan_style",children:" *"}),e.jsx(Ys,{id:"private_plan_style",placeholder:"",value:n.private_plan_style,onChange:i=>r({...n,private_plan_style:i.target.value}),rows:3}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})]})}function X0({config:n,onChange:r}){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(S,{htmlFor:"emoji_chance",children:""}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[(n.emoji_chance*100).toFixed(0),"%"]})]}),e.jsx(ie,{id:"emoji_chance",type:"range",min:"0",max:"1",step:"0.1",value:n.emoji_chance,onChange:i=>r({...n,emoji_chance:Number(i.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(S,{htmlFor:"max_reg_num",children:""}),e.jsx(ie,{id:"max_reg_num",type:"number",min:"1",max:"200",value:n.max_reg_num,onChange:i=>r({...n,max_reg_num:Number(i.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(S,{htmlFor:"do_replace",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsx(Fe,{id:"do_replace",checked:n.do_replace,onCheckedChange:i=>r({...n,do_replace:i})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(S,{htmlFor:"check_interval",children:""}),e.jsx(ie,{id:"check_interval",type:"number",min:"1",max:"120",value:n.check_interval,onChange:i=>r({...n,check_interval:Number(i.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsx(co,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(S,{htmlFor:"steal_emoji",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsx(Fe,{id:"steal_emoji",checked:n.steal_emoji,onCheckedChange:i=>r({...n,steal_emoji:i})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(S,{htmlFor:"content_filtration",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsx(Fe,{id:"content_filtration",checked:n.content_filtration,onCheckedChange:i=>r({...n,content_filtration:i})})]}),n.content_filtration&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(S,{htmlFor:"filtration_prompt",children:""}),e.jsx(ie,{id:"filtration_prompt",placeholder:"",value:n.filtration_prompt,onChange:i=>r({...n,filtration_prompt:i.target.value})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})]})}function J0({config:n,onChange:r}){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(S,{htmlFor:"enable_tool",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsx(Fe,{id:"enable_tool",checked:n.enable_tool,onCheckedChange:i=>r({...n,enable_tool:i})})]}),e.jsx(co,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(S,{htmlFor:"all_global",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsx(Fe,{id:"all_global",checked:n.all_global,onCheckedChange:i=>r({...n,all_global:i})})]})]})}function P0({config:n,onChange:r}){const[i,d]=u.useState(!1);return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"rounded-lg bg-blue-50 dark:bg-blue-950/30 border border-blue-200 dark:border-blue-800 p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-0.5",children:e.jsx("svg",{className:"h-5 w-5 text-blue-600 dark:text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{className:"flex-1 text-sm",children:[e.jsx("p",{className:"font-medium text-blue-900 dark:text-blue-100 mb-1",children:" (SiliconFlow)"}),e.jsx("p",{className:"text-blue-700 dark:text-blue-300 mb-2",children:" DeepSeek V3Qwen  API Key "}),e.jsxs("a",{href:"https://cloud.siliconflow.cn",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-blue-600 dark:text-blue-400 hover:underline font-medium",children:[" API Key",e.jsx(Ic,{className:"h-3 w-3"})]})]})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(S,{htmlFor:"siliconflow_api_key",children:"SiliconFlow API Key *"}),e.jsxs("div",{className:"relative",children:[e.jsx(ie,{id:"siliconflow_api_key",type:i?"text":"password",placeholder:"sk-...",value:n.api_key,onChange:m=>r({api_key:m.target.value}),className:"font-mono pr-10"}),e.jsx(_,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 hover:bg-transparent",onClick:()=>d(!i),children:i?e.jsx(pi,{className:"h-4 w-4 text-muted-foreground"}):e.jsx(Vt,{className:"h-4 w-4 text-muted-foreground"})})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" API "})]}),e.jsxs("div",{className:"rounded-lg bg-muted/50 p-4 text-sm space-y-2",children:[e.jsx("p",{className:"font-medium",children:""}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-muted-foreground ml-2",children:[e.jsx("li",{children:"DeepSeek V3 - "}),e.jsx("li",{children:"Qwen3 30B - "}),e.jsx("li",{children:"Qwen3 VL 30B - "}),e.jsx("li",{children:"SenseVoice - "}),e.jsx("li",{children:"BGE-M3 - "}),e.jsx("li",{children:" (LPMM)"})]})]}),e.jsx("div",{className:"rounded-lg border border-amber-200 dark:border-amber-800 bg-amber-50 dark:bg-amber-950/30 p-4",children:e.jsxs("p",{className:"text-sm text-amber-900 dark:text-amber-100",children:[e.jsx("span",{className:"font-medium",children:" "}),'"  " API ']})})]})}async function Z0(){const n=await Te("/api/webui/config/bot",{method:"GET",headers:Vs()});if(!n.ok)throw new Error("Bot");const i=(await n.json()).config.bot||{};return{qq_account:i.qq_account||0,nickname:i.nickname||"",alias_names:i.alias_names||[]}}async function W0(){const n=await Te("/api/webui/config/bot",{method:"GET",headers:Vs()});if(!n.ok)throw new Error("");const i=(await n.json()).config.personality||{};return{personality:i.personality||"",reply_style:i.reply_style||"",interest:i.interest||"",plan_style:i.plan_style||"",private_plan_style:i.private_plan_style||""}}async function ew(){const n=await Te("/api/webui/config/bot",{method:"GET",headers:Vs()});if(!n.ok)throw new Error("");const i=(await n.json()).config.emoji||{};return{emoji_chance:i.emoji_chance??.4,max_reg_num:i.max_reg_num??40,do_replace:i.do_replace??!0,check_interval:i.check_interval??10,steal_emoji:i.steal_emoji??!0,content_filtration:i.content_filtration??!1,filtration_prompt:i.filtration_prompt||""}}async function sw(){const n=await Te("/api/webui/config/bot",{method:"GET",headers:Vs()});if(!n.ok)throw new Error("");const i=(await n.json()).config,d=i.tool||{},m=i.expression||{};return{enable_tool:d.enable_tool??!0,all_global:m.all_global_jargon??!0}}async function tw(){const n=await Te("/api/webui/config/model",{method:"GET",headers:Vs()});if(!n.ok)throw new Error("");return{api_key:((await n.json()).config.api_providers||[]).find(x=>x.name==="SiliconFlow")?.api_key||""}}async function aw(n){const r=await Te("/api/webui/config/bot/section/bot",{method:"POST",headers:Vs(),body:JSON.stringify(n)});if(!r.ok){const i=await r.json();throw new Error(i.detail||"Bot")}return await r.json()}async function lw(n){const r=await Te("/api/webui/config/bot/section/personality",{method:"POST",headers:Vs(),body:JSON.stringify(n)});if(!r.ok){const i=await r.json();throw new Error(i.detail||"")}return await r.json()}async function nw(n){const r=await Te("/api/webui/config/bot/section/emoji",{method:"POST",headers:Vs(),body:JSON.stringify(n)});if(!r.ok){const i=await r.json();throw new Error(i.detail||"")}return await r.json()}async function rw(n){const r=[];r.push(Te("/api/webui/config/bot/section/tool",{method:"POST",headers:Vs(),body:JSON.stringify({enable_tool:n.enable_tool})})),r.push(Te("/api/webui/config/bot/section/expression",{method:"POST",headers:Vs(),body:JSON.stringify({all_global_jargon:n.all_global})}));const i=await Promise.all(r);for(const d of i)if(!d.ok){const m=await d.json();throw new Error(m.detail||"")}return{success:!0}}async function iw(n){const r=await Te("/api/webui/config/model",{method:"GET",headers:Vs()});if(!r.ok)throw new Error("");const d=(await r.json()).config,m=d.api_providers||[],x=m.findIndex(g=>g.name==="SiliconFlow");x>=0?m[x]={...m[x],api_key:n.api_key}:m.push({name:"SiliconFlow",base_url:"https://api.siliconflow.cn/v1",api_key:n.api_key,client_type:"openai",max_retry:3,timeout:120,retry_interval:5});const f={...d,api_providers:m},p=await Te("/api/webui/config/model",{method:"POST",headers:Vs(),body:JSON.stringify(f)});if(!p.ok){const g=await p.json();throw new Error(g.detail||"")}return await p.json()}async function up(){const n=localStorage.getItem("access-token"),r=await Te("/api/webui/setup/complete",{method:"POST",headers:{Authorization:`Bearer ${n}`}});if(!r.ok){const i=await r.json();throw new Error(i.message||"")}return await r.json()}async function oo(){const n=await Te("/api/webui/system/restart",{method:"POST",headers:Vs()});if(!n.ok){const r=await n.json();throw new Error(r.detail||"")}return await n.json()}async function Ug(){const n=await Te("/api/webui/system/status",{method:"GET",headers:Vs()});if(!n.ok){const r=await n.json();throw new Error(r.detail||"")}return await n.json()}function cw(){const n=Ta(),{toast:r}=Qs(),[i,d]=u.useState(0),[m,x]=u.useState(!1),[f,p]=u.useState(!1),[g,b]=u.useState(!0),[j,y]=u.useState({qq_account:0,nickname:"",alias_names:[]}),[N,C]=u.useState({personality:"",reply_style:"",interest:"",plan_style:`1.****action****
2.
3.
4.
5.`,private_plan_style:`1.****action****
2.
3.`}),[w,L]=u.useState({emoji_chance:.4,max_reg_num:40,do_replace:!0,check_interval:10,steal_emoji:!0,content_filtration:!1,filtration_prompt:""}),[O,U]=u.useState({enable_tool:!0,all_global:!0}),[F,R]=u.useState({api_key:""}),[z,V]=u.useState(!1),[$,k]=u.useState(""),M=[{id:"bot-basic",title:"Bot",description:"",icon:oi},{id:"personality",title:"",description:"",icon:Wc},{id:"emoji",title:"",description:"",icon:Ku},{id:"other",title:"",description:"",icon:ur},{id:"siliconflow",title:"API",description:"API",icon:pg}],ee=(i+1)/M.length*100;u.useEffect(()=>{(async()=>{try{b(!0);const[X,J,ce,T,re]=await Promise.all([Z0(),W0(),ew(),sw(),tw()]);y(X),C(J),L(ce),U(T),R(re)}catch(X){r({title:"",description:X instanceof Error?X.message:"",variant:"destructive"})}finally{b(!1)}})()},[r]);const ge=async()=>{p(!0);try{switch(i){case 0:await aw(j);break;case 1:await lw(N);break;case 2:await nw(w);break;case 3:await rw(O);break;case 4:await iw(F);break}return r({title:"",description:`${M[i].title}`}),!0}catch(D){return r({title:"",description:D instanceof Error?D.message:"",variant:"destructive"}),!1}finally{p(!1)}},ve=async()=>{await ge()&&i<M.length-1&&d(i+1)},je=()=>{i>0&&d(i-1)},be=async()=>{x(!0),V(!0);try{if(k("API..."),!await ge()){x(!1),V(!1);return}k("..."),await up(),k("..."),await oo(),r({title:"",description:"..."}),k("...");const X=60;let J=0,ce=!1;for(;J<X&&!ce;){await new Promise(T=>setTimeout(T,1e3));try{(await Ug()).running&&(ce=!0,k("..."))}catch{J++}}if(!ce)throw new Error(",");setTimeout(()=>{n({to:"/"})},1e3)}catch(D){V(!1),r({title:"",description:D instanceof Error?D.message:"",variant:"destructive"})}finally{x(!1)}},ye=async()=>{try{await up(),n({to:"/"})}catch(D){r({title:"",description:D instanceof Error?D.message:"",variant:"destructive"})}},Ne=()=>{switch(i){case 0:return e.jsx(Y0,{config:j,onChange:y});case 1:return e.jsx(K0,{config:N,onChange:C});case 2:return e.jsx(X0,{config:w,onChange:L});case 3:return e.jsx(J0,{config:O,onChange:U});case 4:return e.jsx(P0,{config:F,onChange:R});default:return null}};return e.jsxs("div",{className:"relative flex min-h-screen flex-col items-center justify-center overflow-hidden bg-gradient-to-br from-primary/5 via-background to-secondary/5 p-4 md:p-6",children:[z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-background/80 backdrop-blur-sm",children:e.jsxs("div",{className:"mx-auto flex max-w-md flex-col items-center space-y-6 rounded-lg border bg-card p-8 text-center shadow-lg",children:[e.jsx("div",{className:"flex h-20 w-20 items-center justify-center rounded-full bg-primary/10",children:e.jsx(ut,{className:"h-10 w-10 animate-spin text-primary"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-2xl font-bold",children:""}),e.jsx("p",{className:"text-muted-foreground",children:$})]}),e.jsx("div",{className:"w-full",children:e.jsx("div",{className:"h-2 w-full overflow-hidden rounded-full bg-secondary",children:e.jsx("div",{className:"h-full w-full animate-pulse bg-primary",style:{animation:"pulse 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite"}})})}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"..."})]})}),e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute left-1/4 top-1/4 h-64 w-64 md:h-96 md:w-96 rounded-full bg-primary/5 blur-3xl"}),e.jsx("div",{className:"absolute right-1/4 bottom-1/4 h-64 w-64 md:h-96 md:w-96 rounded-full bg-secondary/5 blur-3xl"})]}),g?e.jsxs("div",{className:"relative z-10 text-center",children:[e.jsx("div",{className:"mx-auto mb-4 flex h-16 w-16 items-center justify-center",children:e.jsx("div",{className:"h-12 w-12 animate-spin rounded-full border-4 border-primary border-t-transparent"})}),e.jsx("p",{className:"text-lg font-medium",children:"..."}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:""})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative z-10 w-full max-w-4xl",children:[e.jsxs("div",{className:"mb-6 md:mb-8 text-center",children:[e.jsx("div",{className:"mx-auto mb-4 flex h-12 w-12 md:h-16 md:w-16 items-center justify-center rounded-2xl bg-primary/10",children:e.jsx(ty,{className:"h-6 w-6 md:h-8 md:w-8 text-primary",strokeWidth:2,fill:"none"})}),e.jsx("h1",{className:"mb-2 text-2xl md:text-3xl font-bold",children:""}),e.jsxs("p",{className:"text-sm md:text-base text-muted-foreground",children:[" ",Zu," "]})]}),e.jsxs("div",{className:"mb-6 md:mb-8",children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between text-xs md:text-sm",children:[e.jsxs("span",{className:"text-muted-foreground",children:[" ",i+1," / ",M.length]}),e.jsxs("span",{className:"font-medium text-primary",children:[Math.round(ee),"%"]})]}),e.jsx(hr,{value:ee,className:"h-2"})]}),e.jsx("div",{className:"mb-6 md:mb-8 flex justify-between",children:M.map((D,X)=>{const J=D.icon;return e.jsxs("div",{className:H("flex flex-1 flex-col items-center gap-1 md:gap-2",X<M.length-1&&"relative"),children:[X<M.length-1&&e.jsx("div",{className:H("absolute left-1/2 top-3 md:top-4 h-0.5 w-full",X<i?"bg-primary":"bg-border")}),e.jsx("div",{className:H("relative z-10 flex h-6 w-6 md:h-8 md:w-8 items-center justify-center rounded-full border-2 transition-all",X===i||X<i?"border-primary bg-primary text-primary-foreground":"border-border bg-background text-muted-foreground"),children:X<i?e.jsx(ua,{className:"h-3 w-3 md:h-4 md:w-4",strokeWidth:2.5,fill:"none"}):e.jsx(J,{className:"h-3 w-3 md:h-4 md:w-4"})}),e.jsx("span",{className:H("text-[10px] md:text-xs text-center max-w-[60px] md:max-w-none truncate md:whitespace-normal",X===i?"font-medium text-foreground":"text-muted-foreground"),title:D.title,children:D.title})]},D.id)})}),e.jsx(Ve,{className:"mb-6 md:mb-8 shadow-lg",children:e.jsx(ps,{className:"p-4 md:p-8",children:e.jsxs("div",{className:"min-h-[300px] md:min-h-[400px]",children:[e.jsxs("div",{className:"mb-4 md:mb-6",children:[e.jsx("h2",{className:"mb-2 text-xl md:text-2xl font-semibold",children:M[i].title}),e.jsx("p",{className:"text-sm md:text-base text-muted-foreground",children:M[i].description})]}),e.jsx(Ze,{className:"h-[400px] md:h-[500px]",children:e.jsx("div",{className:"pr-2",children:Ne()})})]})})}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-3 sm:gap-0",children:[e.jsx(_,{variant:"outline",onClick:je,disabled:i===0||f,className:"w-full sm:w-auto order-2 sm:order-1",children:""}),e.jsxs("div",{className:"flex gap-2 w-full sm:w-auto order-1 sm:order-2",children:[e.jsxs(xs,{children:[e.jsx(dt,{asChild:!0,children:e.jsxs(_,{variant:"ghost",className:"flex-1 sm:flex-none gap-2",disabled:f||m,children:[e.jsx(ay,{className:"h-4 w-4",strokeWidth:2,fill:"none"}),""]})}),e.jsxs(rs,{children:[e.jsxs(is,{children:[e.jsx(os,{children:""}),e.jsx(ds,{children:""})]}),e.jsxs(cs,{children:[e.jsx(ms,{children:""}),e.jsx(us,{onClick:ye,children:""})]})]})]}),i===M.length-1?e.jsx(_,{onClick:be,disabled:m||f,className:"flex-1 sm:flex-none",children:m||f?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}),f?"...":"..."]}):e.jsxs(e.Fragment,{children:["",e.jsx(ua,{className:"ml-2 h-4 w-4",strokeWidth:2,fill:"none"})]})}):e.jsx(_,{onClick:ve,disabled:f,className:"flex-1 sm:flex-none",children:f?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}),"..."]}):e.jsxs(e.Fragment,{children:["",e.jsx(ly,{className:"ml-2 h-4 w-4",strokeWidth:2,fill:"none"})]})})]})]})]}),e.jsx("div",{className:"relative z-10 mt-6 md:mt-8 text-center text-xs text-muted-foreground",children:e.jsx("p",{children:""})})]})]})}function Bg(){const n=Ta();return e.jsx("div",{className:"flex min-h-screen items-center justify-center bg-background p-4",children:e.jsxs("div",{className:"w-full max-w-2xl text-center",children:[e.jsxs("div",{className:"relative mb-8",children:[e.jsx("h1",{className:"text-[150px] font-black leading-none text-primary/10 select-none sm:text-[200px]",children:"404"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx(Gt,{className:"h-20 w-20 text-primary/30 sm:h-24 sm:w-24"})})]}),e.jsxs("div",{className:"space-y-4 mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground sm:text-3xl",children:""}),e.jsx("p",{className:"text-base text-muted-foreground sm:text-lg max-w-md mx-auto",children:" URL "})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[e.jsxs(_,{size:"lg",onClick:()=>n({to:"/"}),className:"gap-2 w-full sm:w-auto",children:[e.jsx(ro,{className:"h-4 w-4"}),""]}),e.jsxs(_,{size:"lg",variant:"outline",onClick:()=>window.history.back(),className:"gap-2 w-full sm:w-auto",children:[e.jsx(ir,{className:"h-4 w-4"}),""]})]}),e.jsx("div",{className:"mt-12 pt-8 border-t border-border",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:""})})]})})}const ow=Tt.memo(function({config:r,onChange:i}){const d=()=>{i({...r,platforms:[...r.platforms,""]})},m=b=>{i({...r,platforms:r.platforms.filter((j,y)=>y!==b)})},x=(b,j)=>{const y=[...r.platforms];y[b]=j,i({...r,platforms:y})},f=()=>{i({...r,alias_names:[...r.alias_names,""]})},p=b=>{i({...r,alias_names:r.alias_names.filter((j,y)=>y!==b)})},g=(b,j)=>{const y=[...r.alias_names];y[b]=j,i({...r,alias_names:y})};return e.jsx("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:""}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"platform",children:""}),e.jsx(ie,{id:"platform",value:r.platform,onChange:b=>i({...r,platform:b.target.value}),placeholder:"qq"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"qq_account",children:"QQ"}),e.jsx(ie,{id:"qq_account",value:r.qq_account,onChange:b=>i({...r,qq_account:b.target.value}),placeholder:"123456789"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"nickname",children:""}),e.jsx(ie,{id:"nickname",value:r.nickname,onChange:b=>i({...r,nickname:b.target.value}),placeholder:""})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(S,{children:""}),e.jsxs(_,{onClick:d,size:"sm",variant:"outline",children:[e.jsx(ht,{className:"h-4 w-4 mr-1"}),""]})]}),e.jsxs("div",{className:"space-y-2",children:[r.platforms.map((b,j)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ie,{value:b,onChange:y=>x(j,y.target.value),placeholder:"wx:114514"}),e.jsxs(xs,{children:[e.jsx(dt,{asChild:!0,children:e.jsx(_,{size:"icon",variant:"outline",children:e.jsx(ss,{className:"h-4 w-4"})})}),e.jsxs(rs,{children:[e.jsxs(is,{children:[e.jsx(os,{children:""}),e.jsxs(ds,{children:[' "',b||"()",'" ']})]}),e.jsxs(cs,{children:[e.jsx(ms,{children:""}),e.jsx(us,{onClick:()=>m(j),children:""})]})]})]})]},j)),r.platforms.length===0&&e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(S,{children:""}),e.jsxs(_,{onClick:f,size:"sm",variant:"outline",children:[e.jsx(ht,{className:"h-4 w-4 mr-1"}),""]})]}),e.jsxs("div",{className:"space-y-2",children:[r.alias_names.map((b,j)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ie,{value:b,onChange:y=>g(j,y.target.value),placeholder:""}),e.jsxs(xs,{children:[e.jsx(dt,{asChild:!0,children:e.jsx(_,{size:"icon",variant:"outline",children:e.jsx(ss,{className:"h-4 w-4"})})}),e.jsxs(rs,{children:[e.jsxs(is,{children:[e.jsx(os,{children:""}),e.jsxs(ds,{children:[' "',b||"()",'" ']})]}),e.jsxs(cs,{children:[e.jsx(ms,{children:""}),e.jsx(us,{onClick:()=>p(j),children:""})]})]})]})]},j)),r.alias_names.length===0&&e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]})]})]})]})})}),dw=Tt.memo(function({config:r,onChange:i}){const d=()=>{i({...r,states:[...r.states,""]})},m=f=>{i({...r,states:r.states.filter((p,g)=>g!==f)})},x=(f,p)=>{const g=[...r.states];g[f]=p,i({...r,states:g})};return e.jsx("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:""}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"personality",children:""}),e.jsx(Ys,{id:"personality",value:r.personality,onChange:f=>i({...r,personality:f.target.value}),placeholder:"120",rows:3}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"120"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"reply_style",children:""}),e.jsx(Ys,{id:"reply_style",value:r.reply_style,onChange:f=>i({...r,reply_style:f.target.value}),placeholder:"",rows:3})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"interest",children:""}),e.jsx(Ys,{id:"interest",value:r.interest,onChange:f=>i({...r,interest:f.target.value}),placeholder:"",rows:2})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"plan_style",children:""}),e.jsx(Ys,{id:"plan_style",value:r.plan_style,onChange:f=>i({...r,plan_style:f.target.value}),placeholder:"",rows:5})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"visual_style",children:""}),e.jsx(Ys,{id:"visual_style",value:r.visual_style,onChange:f=>i({...r,visual_style:f.target.value}),placeholder:"",rows:3})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"private_plan_style",children:""}),e.jsx(Ys,{id:"private_plan_style",value:r.private_plan_style,onChange:f=>i({...r,private_plan_style:f.target.value}),placeholder:"",rows:4})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(S,{children:""}),e.jsxs(_,{onClick:d,size:"sm",variant:"outline",children:[e.jsx(ht,{className:"h-4 w-4 mr-1"}),""]})]}),e.jsx("div",{className:"space-y-2",children:r.states.map((f,p)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ys,{value:f,onChange:g=>x(p,g.target.value),placeholder:"",rows:2}),e.jsxs(xs,{children:[e.jsx(dt,{asChild:!0,children:e.jsx(_,{size:"icon",variant:"outline",children:e.jsx(ss,{className:"h-4 w-4"})})}),e.jsxs(rs,{children:[e.jsxs(is,{children:[e.jsx(os,{children:""}),e.jsx(ds,{children:""})]}),e.jsxs(cs,{children:[e.jsx(ms,{children:""}),e.jsx(us,{onClick:()=>m(p),children:""})]})]})]})]},p))})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"state_probability",children:""}),e.jsx(ie,{id:"state_probability",type:"number",step:"0.1",min:"0",max:"1",value:r.state_probability,onChange:f=>i({...r,state_probability:parseFloat(f.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" personality 0.0-1.0"})]})]})]})})}),He=ON,qe=RN,Ue=u.forwardRef(({className:n,children:r,...i},d)=>e.jsxs(Pp,{ref:d,className:H("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",n),...i,children:[r,e.jsx(EN,{asChild:!0,children:e.jsx(fl,{className:"h-4 w-4 opacity-50"})})]}));Ue.displayName=Pp.displayName;const Hg=u.forwardRef(({className:n,...r},i)=>e.jsx(Zp,{ref:i,className:H("flex cursor-default items-center justify-center py-1",n),...r,children:e.jsx(cr,{className:"h-4 w-4"})}));Hg.displayName=Zp.displayName;const qg=u.forwardRef(({className:n,...r},i)=>e.jsx(Wp,{ref:i,className:H("flex cursor-default items-center justify-center py-1",n),...r,children:e.jsx(fl,{className:"h-4 w-4"})}));qg.displayName=Wp.displayName;const Be=u.forwardRef(({className:n,children:r,position:i="popper",...d},m)=>e.jsx(zN,{children:e.jsxs(eg,{ref:m,className:H("relative z-[100] max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-hidden rounded-md border border-border bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",i==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:i,...d,children:[e.jsx(Hg,{}),e.jsx(MN,{className:H("p-1",i==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),e.jsx(qg,{})]})}));Be.displayName=eg.displayName;const uw=u.forwardRef(({className:n,...r},i)=>e.jsx(sg,{ref:i,className:H("px-2 py-1.5 text-sm font-semibold",n),...r}));uw.displayName=sg.displayName;const se=u.forwardRef(({className:n,children:r,...i},d)=>e.jsxs(tg,{ref:d,className:H("relative flex w-full cursor-default select-none items-center rounded-sm py-2 pl-2 pr-8 text-sm outline-none bg-white dark:bg-gray-900 hover:bg-gray-100 dark:hover:bg-gray-800 focus:bg-gray-100 dark:focus:bg-gray-800 data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...i,children:[e.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(AN,{children:e.jsx(Wt,{className:"h-4 w-4"})})}),e.jsx(DN,{children:r})]}));se.displayName=tg.displayName;const mw=u.forwardRef(({className:n,...r},i)=>e.jsx(ag,{ref:i,className:H("-mx-1 my-1 h-px bg-muted",n),...r}));mw.displayName=ag.displayName;const Qa=oN,Ia=dN,Ua=u.forwardRef(({className:n,align:r="center",sideOffset:i=4,...d},m)=>e.jsx(cN,{children:e.jsx(Gp,{ref:m,align:r,sideOffset:i,className:H("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",n),...d})}));Ua.displayName=Gp.displayName;const xw=Tt.memo(function({value:r,onChange:i}){const[d,m]=u.useState("00"),[x,f]=u.useState("00"),[p,g]=u.useState("23"),[b,j]=u.useState("59");u.useEffect(()=>{const N=r.split("-");if(N.length===2){const[C,w]=N,[L,O]=C.split(":"),[U,F]=w.split(":");L&&m(L.padStart(2,"0")),O&&f(O.padStart(2,"0")),U&&g(U.padStart(2,"0")),F&&j(F.padStart(2,"0"))}},[r]);const y=(N,C,w,L)=>{const O=`${N}:${C}-${w}:${L}`;i(O)};return e.jsxs(Qa,{children:[e.jsx(Ia,{asChild:!0,children:e.jsxs(_,{variant:"outline",className:"w-full justify-start font-mono text-sm",children:[e.jsx(rr,{className:"h-4 w-4 mr-2"}),r||""]})}),e.jsx(Ua,{className:"w-72 sm:w-80",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm mb-3",children:""}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:gap-3",children:[e.jsxs("div",{children:[e.jsx(S,{className:"text-xs",children:""}),e.jsxs(He,{value:d,onValueChange:N=>{m(N),y(N,x,p,b)},children:[e.jsx(Ue,{children:e.jsx(qe,{})}),e.jsx(Be,{children:Array.from({length:24},(N,C)=>C).map(N=>e.jsx(se,{value:N.toString().padStart(2,"0"),children:N.toString().padStart(2,"0")},N))})]})]}),e.jsxs("div",{children:[e.jsx(S,{className:"text-xs",children:""}),e.jsxs(He,{value:x,onValueChange:N=>{f(N),y(d,N,p,b)},children:[e.jsx(Ue,{children:e.jsx(qe,{})}),e.jsx(Be,{children:Array.from({length:60},(N,C)=>C).map(N=>e.jsx(se,{value:N.toString().padStart(2,"0"),children:N.toString().padStart(2,"0")},N))})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm mb-3",children:""}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:gap-3",children:[e.jsxs("div",{children:[e.jsx(S,{className:"text-xs",children:""}),e.jsxs(He,{value:p,onValueChange:N=>{g(N),y(d,x,N,b)},children:[e.jsx(Ue,{children:e.jsx(qe,{})}),e.jsx(Be,{children:Array.from({length:24},(N,C)=>C).map(N=>e.jsx(se,{value:N.toString().padStart(2,"0"),children:N.toString().padStart(2,"0")},N))})]})]}),e.jsxs("div",{children:[e.jsx(S,{className:"text-xs",children:""}),e.jsxs(He,{value:b,onValueChange:N=>{j(N),y(d,x,p,N)},children:[e.jsx(Ue,{children:e.jsx(qe,{})}),e.jsx(Be,{children:Array.from({length:60},(N,C)=>C).map(N=>e.jsx(se,{value:N.toString().padStart(2,"0"),children:N.toString().padStart(2,"0")},N))})]})]})]})]})]})})]})}),hw=Tt.memo(function({rule:r}){const i=`{ target = "${r.target}", time = "${r.time}", value = ${r.value.toFixed(1)} }`;return e.jsxs(Qa,{children:[e.jsx(Ia,{asChild:!0,children:e.jsxs(_,{variant:"outline",size:"sm",children:[e.jsx(Vt,{className:"h-4 w-4 mr-1"}),""]})}),e.jsx(Ua,{className:"w-80 sm:w-96",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-sm",children:""}),e.jsx("div",{className:"rounded-md bg-muted p-3 font-mono text-xs break-all",children:i}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" bot_config.toml "})]})})]})}),fw=Tt.memo(function({config:r,onChange:i}){const d=()=>{i({...r,talk_value_rules:[...r.talk_value_rules,{target:"",time:"00:00-23:59",value:1}]})},m=f=>{i({...r,talk_value_rules:r.talk_value_rules.filter((p,g)=>g!==f)})},x=(f,p,g)=>{const b=[...r.talk_value_rules];b[f]={...b[f],[p]:g},i({...r,talk_value_rules:b})};return e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:""}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"talk_value",children:""}),e.jsx(ie,{id:"talk_value",type:"number",step:"0.1",min:"0",max:"1",value:r.talk_value,onChange:f=>i({...r,talk_value:parseFloat(f.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" 0-1"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{id:"mentioned_bot_reply",checked:r.mentioned_bot_reply,onCheckedChange:f=>i({...r,mentioned_bot_reply:f})}),e.jsx(S,{htmlFor:"mentioned_bot_reply",className:"cursor-pointer",children:""})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"max_context_size",children:""}),e.jsx(ie,{id:"max_context_size",type:"number",min:"1",value:r.max_context_size,onChange:f=>i({...r,max_context_size:parseInt(f.target.value)})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"planner_smooth",children:""}),e.jsx(ie,{id:"planner_smooth",type:"number",step:"1",min:"0",value:r.planner_smooth,onChange:f=>i({...r,planner_smooth:parseFloat(f.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" planner  1-50 "})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{id:"enable_talk_value_rules",checked:r.enable_talk_value_rules,onCheckedChange:f=>i({...r,enable_talk_value_rules:f})}),e.jsx(S,{htmlFor:"enable_talk_value_rules",className:"cursor-pointer",children:""})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{id:"include_planner_reasoning",checked:r.include_planner_reasoning,onCheckedChange:f=>i({...r,include_planner_reasoning:f})}),e.jsx(S,{htmlFor:"include_planner_reasoning",className:"cursor-pointer",children:" planner  replyer"})]})]})]}),r.enable_talk_value_rules&&e.jsxs("div",{className:"border-t pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-base font-semibold",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"ID"})]}),e.jsxs(_,{onClick:d,size:"sm",children:[e.jsx(ht,{className:"h-4 w-4 mr-1"}),""]})]}),r.talk_value_rules&&r.talk_value_rules.length>0?e.jsx("div",{className:"space-y-4",children:r.talk_value_rules.map((f,p)=>e.jsxs("div",{className:"rounded-lg border p-4 bg-muted/50 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm font-medium text-muted-foreground",children:[" #",p+1]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(hw,{rule:f}),e.jsxs(xs,{children:[e.jsx(dt,{asChild:!0,children:e.jsx(_,{variant:"ghost",size:"sm",children:e.jsx(ss,{className:"h-4 w-4 text-destructive"})})}),e.jsxs(rs,{children:[e.jsxs(is,{children:[e.jsx(os,{children:""}),e.jsxs(ds,{children:[" #",p+1," "]})]}),e.jsxs(cs,{children:[e.jsx(ms,{children:""}),e.jsx(us,{onClick:()=>m(p),children:""})]})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{className:"text-xs font-medium",children:""}),e.jsxs(He,{value:f.target===""?"global":"specific",onValueChange:g=>{g==="global"?x(p,"target",""):x(p,"target","qq::group")},children:[e.jsx(Ue,{children:e.jsx(qe,{})}),e.jsxs(Be,{children:[e.jsx(se,{value:"global",children:""}),e.jsx(se,{value:"specific",children:""})]})]})]}),f.target!==""&&(()=>{const g=f.target.split(":"),b=g[0]||"qq",j=g[1]||"",y=g[2]||"group";return e.jsxs("div",{className:"grid gap-4 p-3 sm:p-4 rounded-lg bg-muted/50",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{className:"text-xs font-medium",children:""}),e.jsxs(He,{value:b,onValueChange:N=>{x(p,"target",`${N}:${j}:${y}`)},children:[e.jsx(Ue,{children:e.jsx(qe,{})}),e.jsxs(Be,{children:[e.jsx(se,{value:"qq",children:"QQ"}),e.jsx(se,{value:"wx",children:""})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{className:"text-xs font-medium",children:" ID"}),e.jsx(ie,{value:j,onChange:N=>{x(p,"target",`${b}:${N.target.value}:${y}`)},placeholder:" ID",className:"font-mono text-sm"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{className:"text-xs font-medium",children:""}),e.jsxs(He,{value:y,onValueChange:N=>{x(p,"target",`${b}:${j}:${N}`)},children:[e.jsx(Ue,{children:e.jsx(qe,{})}),e.jsxs(Be,{children:[e.jsx(se,{value:"group",children:"group"}),e.jsx(se,{value:"private",children:"private"})]})]})]})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[" ID",f.target||""]})]})})(),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{className:"text-xs font-medium",children:" (Time)"}),e.jsx(xw,{value:f.time,onChange:g=>x(p,"time",g)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" 23:00-02:00"})]}),e.jsxs("div",{className:"grid gap-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(S,{htmlFor:`rule-value-${p}`,className:"text-xs font-medium",children:" (Value)"}),e.jsx(ie,{id:`rule-value-${p}`,type:"number",step:"0.01",min:"0.01",max:"1",value:f.value,onChange:g=>{const b=parseFloat(g.target.value);isNaN(b)||x(p,"value",Math.max(.01,Math.min(1,b)))},className:"w-20 h-8 text-xs"})]}),e.jsx(Sa,{value:[f.value],onValueChange:g=>x(p,"value",g[0]),min:.01,max:1,step:.01,className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsx("span",{children:"0.01 ()"}),e.jsx("span",{children:"0.5"}),e.jsx("span",{children:"1.0 ()"})]})]})]})]},p))}):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:e.jsx("p",{className:"text-sm",children:'""'})}),e.jsxs("div",{className:"mt-4 p-4 bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:[e.jsx("h5",{className:"text-sm font-semibold text-blue-900 dark:text-blue-100 mb-2",children:" "}),e.jsxs("ul",{className:"text-xs text-blue-800 dark:text-blue-200 space-y-1",children:[e.jsxs("li",{children:[" ",e.jsx("strong",{children:"Target "}),""]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"Target "}),"platform:id:type"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:""}),""]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:""})," 23:00-02:00 112"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:""})," 0-10 1 "]})]})]})]})]})}),pw=Tt.memo(function({config:r,onChange:i}){return e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:""}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{checked:r.enable_asr,onCheckedChange:d=>i({...r,enable_asr:d})}),e.jsx(S,{className:"cursor-pointer",children:""})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})}),gw=Tt.memo(function({config:r,onChange:i}){return e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"LPMM "}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{checked:r.enable,onCheckedChange:d=>i({...r,enable:d})}),e.jsx(S,{className:"cursor-pointer",children:" LPMM "})]}),r.enable&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{children:"LPMM "}),e.jsxs(He,{value:r.lpmm_mode,onValueChange:d=>i({...r,lpmm_mode:d}),children:[e.jsx(Ue,{children:e.jsx(qe,{placeholder:" LPMM "})}),e.jsxs(Be,{children:[e.jsx(se,{value:"classic",children:""}),e.jsx(se,{value:"agent",children:"Agent "})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{children:" TopK"}),e.jsx(ie,{type:"number",min:"1",value:r.rag_synonym_search_top_k,onChange:d=>i({...r,rag_synonym_search_top_k:parseInt(d.target.value)})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{children:""}),e.jsx(ie,{type:"number",step:"0.1",min:"0",max:"1",value:r.rag_synonym_threshold,onChange:d=>i({...r,rag_synonym_threshold:parseFloat(d.target.value)})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{children:""}),e.jsx(ie,{type:"number",min:"1",value:r.info_extraction_workers,onChange:d=>i({...r,info_extraction_workers:parseInt(d.target.value)})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{children:""}),e.jsx(ie,{type:"number",min:"1",value:r.embedding_dimension,onChange:d=>i({...r,embedding_dimension:parseInt(d.target.value)})})]})]})]})]})]})}),jw=Tt.memo(function({config:r,onChange:i}){const[d,m]=u.useState(""),[x,f]=u.useState("WARNING"),p=()=>{d&&!r.suppress_libraries.includes(d)&&(i({...r,suppress_libraries:[...r.suppress_libraries,d]}),m(""))},g=w=>{i({...r,suppress_libraries:r.suppress_libraries.filter(L=>L!==w)})},b=()=>{d&&!r.library_log_levels[d]&&(i({...r,library_log_levels:{...r.library_log_levels,[d]:x}}),m(""),f("WARNING"))},j=w=>{const L={...r.library_log_levels};delete L[w],i({...r,library_log_levels:L})},y=["DEBUG","INFO","WARNING","ERROR","CRITICAL"],N=["FULL","compact","lite"],C=["none","title","full"];return e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:""}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{children:""}),e.jsx(ie,{value:r.date_style,onChange:w=>i({...r,date_style:w.target.value}),placeholder:": m-d H:i:s"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"m=, d=, H=, i=, s="})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{children:""}),e.jsxs(He,{value:r.log_level_style,onValueChange:w=>i({...r,log_level_style:w}),children:[e.jsx(Ue,{children:e.jsx(qe,{})}),e.jsx(Be,{children:N.map(w=>e.jsx(se,{value:w,children:w},w))})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{children:""}),e.jsxs(He,{value:r.color_text,onValueChange:w=>i({...r,color_text:w}),children:[e.jsx(Ue,{children:e.jsx(qe,{})}),e.jsx(Be,{children:C.map(w=>e.jsx(se,{value:w,children:w},w))})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{children:""}),e.jsxs(He,{value:r.log_level,onValueChange:w=>i({...r,log_level:w}),children:[e.jsx(Ue,{children:e.jsx(qe,{})}),e.jsx(Be,{children:y.map(w=>e.jsx(se,{value:w,children:w},w))})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{children:""}),e.jsxs(He,{value:r.console_log_level,onValueChange:w=>i({...r,console_log_level:w}),children:[e.jsx(Ue,{children:e.jsx(qe,{})}),e.jsx(Be,{children:y.map(w=>e.jsx(se,{value:w,children:w},w))})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{children:""}),e.jsxs(He,{value:r.file_log_level,onValueChange:w=>i({...r,file_log_level:w}),children:[e.jsx(Ue,{children:e.jsx(qe,{})}),e.jsx(Be,{children:y.map(w=>e.jsx(se,{value:w,children:w},w))})]})]})]})]}),e.jsxs("div",{children:[e.jsx(S,{className:"mb-2 block",children:""}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx(ie,{value:d,onChange:w=>m(w.target.value),placeholder:"",className:"flex-1",onKeyDown:w=>{w.key==="Enter"&&(w.preventDefault(),p())}}),e.jsx(_,{onClick:p,size:"sm",className:"flex-shrink-0",children:e.jsx(ht,{className:"h-4 w-4",strokeWidth:2,fill:"none"})})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:r.suppress_libraries.map(w=>e.jsxs("div",{className:"flex items-center gap-1 bg-secondary px-3 py-1 rounded-md",children:[e.jsx("span",{className:"text-sm",children:w}),e.jsx(_,{variant:"ghost",size:"sm",className:"h-5 w-5 p-0",onClick:()=>g(w),children:e.jsx(ss,{className:"h-3 w-3",strokeWidth:2,fill:"none"})})]},w))})]}),e.jsxs("div",{children:[e.jsx(S,{className:"mb-2 block",children:""}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx(ie,{value:d,onChange:w=>m(w.target.value),placeholder:"",className:"flex-1"}),e.jsxs(He,{value:x,onValueChange:f,children:[e.jsx(Ue,{className:"w-32",children:e.jsx(qe,{})}),e.jsx(Be,{children:y.map(w=>e.jsx(se,{value:w,children:w},w))})]}),e.jsx(_,{onClick:b,size:"sm",children:e.jsx(ht,{className:"h-4 w-4",strokeWidth:2,fill:"none"})})]}),e.jsx("div",{className:"space-y-2",children:Object.entries(r.library_log_levels).map(([w,L])=>e.jsxs("div",{className:"flex items-center justify-between bg-secondary px-3 py-2 rounded-md",children:[e.jsx("span",{className:"text-sm font-medium",children:w}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:L}),e.jsx(_,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>j(w),children:e.jsx(ss,{className:"h-3 w-3",strokeWidth:2,fill:"none"})})]})]},w))})]})]})}),vw=Tt.memo(function({config:r,onChange:i}){return e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:""}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(S,{children:" Prompt"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),e.jsx(Fe,{checked:r.show_prompt,onCheckedChange:d=>i({...r,show_prompt:d})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(S,{children:" Prompt"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),e.jsx(Fe,{checked:r.show_replyer_prompt,onCheckedChange:d=>i({...r,show_replyer_prompt:d})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(S,{children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),e.jsx(Fe,{checked:r.show_replyer_reasoning,onCheckedChange:d=>i({...r,show_replyer_reasoning:d})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(S,{children:" Jargon Prompt"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),e.jsx(Fe,{checked:r.show_jargon_prompt,onCheckedChange:d=>i({...r,show_jargon_prompt:d})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(S,{children:" Prompt"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),e.jsx(Fe,{checked:r.show_memory_prompt,onCheckedChange:d=>i({...r,show_memory_prompt:d})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(S,{children:" Planner Prompt"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:" Planner "})]}),e.jsx(Fe,{checked:r.show_planner_prompt,onCheckedChange:d=>i({...r,show_planner_prompt:d})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(S,{children:" LPMM "}),e.jsx("p",{className:"text-sm text-muted-foreground",children:" LPMM "})]}),e.jsx(Fe,{checked:r.show_lpmm_paragraph,onCheckedChange:d=>i({...r,show_lpmm_paragraph:d})})]})]})]})}),bw=Tt.memo(function({config:r,onChange:i}){const[d,m]=u.useState(""),x=()=>{d&&!r.auth_token.includes(d)&&(i({...r,auth_token:[...r.auth_token,d]}),m(""))},f=p=>{i({...r,auth_token:r.auth_token.filter((g,b)=>b!==p)})};return e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"MaimMessage "}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(S,{children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:" MaimMessage "})]}),e.jsx(Fe,{checked:r.use_custom,onCheckedChange:p=>i({...r,use_custom:p})})]}),r.use_custom&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{children:""}),e.jsx(ie,{value:r.host,onChange:p=>i({...r,host:p.target.value}),placeholder:"127.0.0.1"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{children:""}),e.jsx(ie,{type:"number",value:r.port,onChange:p=>i({...r,port:parseInt(p.target.value)}),placeholder:"8090"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{children:""}),e.jsxs(He,{value:r.mode,onValueChange:p=>i({...r,mode:p}),children:[e.jsx(Ue,{children:e.jsx(qe,{})}),e.jsxs(Be,{children:[e.jsx(se,{value:"ws",children:"WebSocket (ws)"}),e.jsx(se,{value:"tcp",children:"TCP"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{checked:r.use_wss,onCheckedChange:p=>i({...r,use_wss:p}),disabled:r.mode!=="ws"}),e.jsx(S,{children:" WSS "})]})]}),r.use_wss&&r.mode==="ws"&&e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{children:"SSL "}),e.jsx(ie,{value:r.cert_file,onChange:p=>i({...r,cert_file:p.target.value}),placeholder:"cert.pem"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{children:"SSL "}),e.jsx(ie,{value:r.key_file,onChange:p=>i({...r,key_file:p.target.value}),placeholder:"key.pem"})]})]})]})]})]}),e.jsxs("div",{children:[e.jsx(S,{className:"mb-2 block",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:" API "}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx(ie,{value:d,onChange:p=>m(p.target.value),placeholder:"",onKeyDown:p=>{p.key==="Enter"&&(p.preventDefault(),x())}}),e.jsx(_,{onClick:x,size:"sm",children:e.jsx(ht,{className:"h-4 w-4",strokeWidth:2,fill:"none"})})]}),e.jsx("div",{className:"space-y-2",children:r.auth_token.map((p,g)=>e.jsxs("div",{className:"flex items-center justify-between bg-secondary px-3 py-2 rounded-md",children:[e.jsx("span",{className:"text-sm font-mono",children:p}),e.jsx(_,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>f(g),children:e.jsx(ss,{className:"h-3 w-3",strokeWidth:2,fill:"none"})})]},g))})]})]})}),Nw=Tt.memo(function({config:r,onChange:i}){return e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:""}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(S,{children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),e.jsx(Fe,{checked:r.enable,onCheckedChange:d=>i({...r,enable:d})})]})]})}),yw=Tt.memo(function({emojiConfig:r,memoryConfig:i,toolConfig:d,onEmojiChange:m,onMemoryChange:x,onToolChange:f}){return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-4",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:""}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{id:"enable_tool",checked:d.enable_tool,onCheckedChange:p=>f({...d,enable_tool:p})}),e.jsx(S,{htmlFor:"enable_tool",className:"cursor-pointer",children:""})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:""})]})}),e.jsx("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-4",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:""}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"max_agent_iterations",children:""}),e.jsx(ie,{id:"max_agent_iterations",type:"number",min:"1",value:i.max_agent_iterations,onChange:p=>x({...i,max_agent_iterations:parseInt(p.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" 1"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"agent_timeout_seconds",children:""}),e.jsx(ie,{id:"agent_timeout_seconds",type:"number",min:"1",step:"0.1",value:i.agent_timeout_seconds??120,onChange:p=>x({...i,agent_timeout_seconds:parseFloat(p.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{id:"enable_jargon_detection",checked:i.enable_jargon_detection??!0,onCheckedChange:p=>x({...i,enable_jargon_detection:p})}),e.jsx(S,{htmlFor:"enable_jargon_detection",className:"cursor-pointer",children:""})]}),e.jsx("p",{className:"text-xs text-muted-foreground -mt-2",children:""}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{id:"global_memory",checked:i.global_memory??!1,onCheckedChange:p=>x({...i,global_memory:p})}),e.jsx(S,{htmlFor:"global_memory",className:"cursor-pointer",children:""})]}),e.jsx("p",{className:"text-xs text-muted-foreground -mt-2",children:""})]})]})}),e.jsx("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-4",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:""}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"emoji_chance",children:""}),e.jsx(ie,{id:"emoji_chance",type:"number",step:"0.1",min:"0",max:"1",value:r.emoji_chance,onChange:p=>m({...r,emoji_chance:parseFloat(p.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" 0-1"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"max_reg_num",children:""}),e.jsx(ie,{id:"max_reg_num",type:"number",min:"1",value:r.max_reg_num,onChange:p=>m({...r,max_reg_num:parseInt(p.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"check_interval",children:""}),e.jsx(ie,{id:"check_interval",type:"number",min:"1",value:r.check_interval,onChange:p=>m({...r,check_interval:parseInt(p.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{id:"do_replace",checked:r.do_replace,onCheckedChange:p=>m({...r,do_replace:p})}),e.jsx(S,{htmlFor:"do_replace",className:"cursor-pointer",children:""})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{id:"steal_emoji",checked:r.steal_emoji,onCheckedChange:p=>m({...r,steal_emoji:p})}),e.jsx(S,{htmlFor:"steal_emoji",className:"cursor-pointer",children:""})]}),e.jsx("p",{className:"text-xs text-muted-foreground -mt-2",children:""}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{id:"content_filtration",checked:r.content_filtration,onCheckedChange:p=>m({...r,content_filtration:p})}),e.jsx(S,{htmlFor:"content_filtration",className:"cursor-pointer",children:""})]}),r.content_filtration&&e.jsxs("div",{className:"grid gap-2 pl-6 border-l-2 border-primary/20",children:[e.jsx(S,{htmlFor:"filtration_prompt",children:""}),e.jsx(ie,{id:"filtration_prompt",value:r.filtration_prompt,onChange:p=>m({...r,filtration_prompt:p.target.value}),placeholder:""}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})]})]})})]})}),ww=Tt.memo(function({member:r,groupIndex:i,memberIndex:d,availableChatIds:m,onUpdate:x,onRemove:f}){const p=m.includes(r)||r==="*",[g,b]=u.useState(!p);return e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"flex-1 flex gap-2",children:g?e.jsxs(e.Fragment,{children:[e.jsx(ie,{value:r,onChange:j=>x(i,d,j.target.value),placeholder:' "*"  "qq:123456:group"',className:"flex-1"}),m.length>0&&e.jsx(_,{size:"sm",variant:"outline",onClick:()=>b(!1),title:"",children:""})]}):e.jsxs(e.Fragment,{children:[e.jsxs(He,{value:r,onValueChange:j=>x(i,d,j),children:[e.jsx(Ue,{className:"flex-1",children:e.jsx(qe,{placeholder:""})}),e.jsxs(Be,{children:[e.jsx(se,{value:"*",children:"* ()"}),m.map((j,y)=>e.jsx(se,{value:j,children:j},y))]})]}),e.jsx(_,{size:"sm",variant:"outline",onClick:()=>b(!0),title:"",children:""})]})}),e.jsxs(xs,{children:[e.jsx(dt,{asChild:!0,children:e.jsx(_,{size:"icon",variant:"outline",children:e.jsx(ss,{className:"h-4 w-4"})})}),e.jsxs(rs,{children:[e.jsxs(is,{children:[e.jsx(os,{children:""}),e.jsxs(ds,{children:[' "',r||"()",'" ']})]}),e.jsxs(cs,{children:[e.jsx(ms,{children:""}),e.jsx(us,{onClick:()=>f(i,d),children:""})]})]})]})]})}),_w=Tt.memo(function({config:r,onChange:i}){const d=()=>{i({...r,learning_list:[...r.learning_list,["","enable","enable","1.0"]]})},m=N=>{i({...r,learning_list:r.learning_list.filter((C,w)=>w!==N)})},x=(N,C,w)=>{const L=[...r.learning_list];L[N][C]=w,i({...r,learning_list:L})},f=({rule:N})=>{const C=`["${N[0]}", "${N[1]}", "${N[2]}", "${N[3]}"]`;return e.jsxs(Qa,{children:[e.jsx(Ia,{asChild:!0,children:e.jsxs(_,{variant:"outline",size:"sm",children:[e.jsx(Vt,{className:"h-4 w-4 mr-1"}),""]})}),e.jsx(Ua,{className:"w-80 sm:w-96",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-sm",children:""}),e.jsx("div",{className:"rounded-md bg-muted p-3 font-mono text-xs break-all",children:C}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" bot_config.toml "})]})})]})},p=()=>{i({...r,expression_groups:[...r.expression_groups,[]]})},g=N=>{i({...r,expression_groups:r.expression_groups.filter((C,w)=>w!==N)})},b=N=>{const C=[...r.expression_groups];C[N]=[...C[N],""],i({...r,expression_groups:C})},j=(N,C)=>{const w=[...r.expression_groups];w[N]=w[N].filter((L,O)=>O!==C),i({...r,expression_groups:w})},y=(N,C,w)=>{const L=[...r.expression_groups];L[N][C]=w,i({...r,expression_groups:L})};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-6",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:""})]}),e.jsxs(_,{onClick:d,size:"sm",variant:"outline",children:[e.jsx(ht,{className:"h-4 w-4 mr-1"}),""]})]}),e.jsxs("div",{className:"space-y-4",children:[r.learning_list.map((N,C)=>{const w=r.learning_list.some((z,V)=>V!==C&&z[0]===""),L=N[0]==="",O=N[0].split(":"),U=O[0]||"qq",F=O[1]||"",R=O[2]||"group";return e.jsxs("div",{className:"rounded-lg border p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm font-medium",children:[" ",C+1," ",L&&""]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(f,{rule:N}),e.jsxs(xs,{children:[e.jsx(dt,{asChild:!0,children:e.jsx(_,{size:"sm",variant:"ghost",children:e.jsx(ss,{className:"h-4 w-4"})})}),e.jsxs(rs,{children:[e.jsxs(is,{children:[e.jsx(os,{children:""}),e.jsxs(ds,{children:[" ",C+1," "]})]}),e.jsxs(cs,{children:[e.jsx(ms,{children:""}),e.jsx(us,{onClick:()=>m(C),children:""})]})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{className:"text-xs font-medium",children:""}),e.jsxs(He,{value:L?"global":"specific",onValueChange:z=>{z==="global"?x(C,0,""):x(C,0,"qq::group")},disabled:w&&!L,children:[e.jsx(Ue,{children:e.jsx(qe,{})}),e.jsxs(Be,{children:[e.jsx(se,{value:"global",children:""}),e.jsx(se,{value:"specific",disabled:w&&!L,children:""})]})]}),w&&!L&&e.jsx("p",{className:"text-xs text-amber-600",children:""})]}),!L&&e.jsxs("div",{className:"grid gap-4 p-3 sm:p-4 rounded-lg bg-muted/50",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{className:"text-xs font-medium",children:""}),e.jsxs(He,{value:U,onValueChange:z=>{x(C,0,`${z}:${F}:${R}`)},children:[e.jsx(Ue,{children:e.jsx(qe,{})}),e.jsxs(Be,{children:[e.jsx(se,{value:"qq",children:"QQ"}),e.jsx(se,{value:"wx",children:""})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{className:"text-xs font-medium",children:" ID"}),e.jsx(ie,{value:F,onChange:z=>{x(C,0,`${U}:${z.target.value}:${R}`)},placeholder:" ID",className:"font-mono text-sm"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{className:"text-xs font-medium",children:""}),e.jsxs(He,{value:R,onValueChange:z=>{x(C,0,`${U}:${F}:${z}`)},children:[e.jsx(Ue,{children:e.jsx(qe,{})}),e.jsxs(Be,{children:[e.jsx(se,{value:"group",children:"group"}),e.jsx(se,{value:"private",children:"private"})]})]})]})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[" ID",N[0]||""]})]}),e.jsx("div",{className:"grid gap-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(S,{className:"text-xs font-medium",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:""})]}),e.jsx(Fe,{checked:N[1]==="enable",onCheckedChange:z=>x(C,1,z?"enable":"disable")})]})}),e.jsx("div",{className:"grid gap-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(S,{className:"text-xs font-medium",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:""})]}),e.jsx(Fe,{checked:N[2]==="enable",onCheckedChange:z=>x(C,2,z?"enable":"disable")})]})}),e.jsxs("div",{className:"grid gap-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(S,{className:"text-xs font-medium",children:""}),e.jsx(ie,{type:"number",step:"0.1",min:"0",max:"5",value:N[3],onChange:z=>{const V=parseFloat(z.target.value);isNaN(V)||x(C,3,Math.max(0,Math.min(5,V)).toFixed(1))},className:"w-20 h-8 text-xs"})]}),e.jsx(Sa,{value:[parseFloat(N[3])||1],onValueChange:z=>x(C,3,z[0].toFixed(1)),min:0,max:5,step:.1,className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsx("span",{children:"0 ()"}),e.jsx("span",{children:"2.5"}),e.jsx("span",{children:"5.0 ()"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" = 300/"})]})]})]},C)}),r.learning_list.length===0&&e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:'""'})]})]})}),e.jsx("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-6",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:""})]}),e.jsx(Fe,{checked:r.reflect,onCheckedChange:N=>i({...r,reflect:N})})]}),r.reflect&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"rounded-lg border p-4 space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("span",{className:"text-sm font-medium",children:""})}),e.jsx("div",{className:"space-y-4",children:(()=>{const C=(r.reflect_operator_id||"").split(":"),w=C[0]||"qq",L=C[1]||"",O=C[2]||"private";return e.jsxs("div",{className:"grid gap-4 p-3 sm:p-4 rounded-lg bg-muted/50",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{className:"text-xs font-medium",children:""}),e.jsxs(He,{value:w,onValueChange:U=>{i({...r,reflect_operator_id:`${U}:${L}:${O}`})},children:[e.jsx(Ue,{children:e.jsx(qe,{})}),e.jsxs(Be,{children:[e.jsx(se,{value:"qq",children:"QQ"}),e.jsx(se,{value:"wx",children:""})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{className:"text-xs font-medium",children:"/ ID"}),e.jsx(ie,{value:L,onChange:U=>{i({...r,reflect_operator_id:`${w}:${U.target.value}:${O}`})},placeholder:" ID",className:"font-mono text-sm"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{className:"text-xs font-medium",children:""}),e.jsxs(He,{value:O,onValueChange:U=>{i({...r,reflect_operator_id:`${w}:${L}:${U}`})},children:[e.jsx(Ue,{children:e.jsx(qe,{})}),e.jsxs(Be,{children:[e.jsx(se,{value:"private",children:"private"}),e.jsx(se,{value:"group",children:"group"})]})]})]})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[" ID",r.reflect_operator_id||""]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})})()})]}),e.jsxs("div",{className:"rounded-lg border p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:""})]}),e.jsxs(_,{onClick:()=>{i({...r,allow_reflect:[...r.allow_reflect||[],"qq::group"]})},size:"sm",variant:"outline",children:[e.jsx(ht,{className:"h-4 w-4 mr-1"}),""]})]}),e.jsxs("div",{className:"space-y-2",children:[(r.allow_reflect||[]).map((N,C)=>{const w=N.split(":"),L=w[0]||"qq",O=w[1]||"",U=w[2]||"group";return e.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-lg bg-muted/50",children:[e.jsxs(He,{value:L,onValueChange:F=>{const R=[...r.allow_reflect];R[C]=`${F}:${O}:${U}`,i({...r,allow_reflect:R})},children:[e.jsx(Ue,{className:"w-24",children:e.jsx(qe,{})}),e.jsxs(Be,{children:[e.jsx(se,{value:"qq",children:"QQ"}),e.jsx(se,{value:"wx",children:""})]})]}),e.jsx(ie,{value:O,onChange:F=>{const R=[...r.allow_reflect];R[C]=`${L}:${F.target.value}:${U}`,i({...r,allow_reflect:R})},placeholder:"ID",className:"flex-1 font-mono text-sm"}),e.jsxs(He,{value:U,onValueChange:F=>{const R=[...r.allow_reflect];R[C]=`${L}:${O}:${F}`,i({...r,allow_reflect:R})},children:[e.jsx(Ue,{className:"w-32",children:e.jsx(qe,{})}),e.jsxs(Be,{children:[e.jsx(se,{value:"group",children:""}),e.jsx(se,{value:"private",children:""})]})]}),e.jsx(_,{onClick:()=>{i({...r,allow_reflect:r.allow_reflect.filter((F,R)=>R!==C)})},size:"sm",variant:"ghost",children:e.jsx(ss,{className:"h-4 w-4"})})]},C)}),(!r.allow_reflect||r.allow_reflect.length===0)&&e.jsx("div",{className:"text-center py-4 text-muted-foreground text-sm",children:""})]})]})]})]})}),e.jsx("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-6",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:""})]}),e.jsxs(_,{onClick:p,size:"sm",variant:"outline",children:[e.jsx(ht,{className:"h-4 w-4 mr-1"}),""]})]}),e.jsxs("div",{className:"space-y-4",children:[r.expression_groups.map((N,C)=>{const w=r.learning_list.map(L=>L[0]).filter(L=>L!=="");return e.jsxs("div",{className:"rounded-lg border p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm font-medium",children:[" ",C+1,N.length===1&&N[0]==="*"&&""]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(_,{onClick:()=>b(C),size:"sm",variant:"outline",children:e.jsx(ht,{className:"h-4 w-4"})}),e.jsxs(xs,{children:[e.jsx(dt,{asChild:!0,children:e.jsx(_,{size:"sm",variant:"ghost",children:e.jsx(ss,{className:"h-4 w-4"})})}),e.jsxs(rs,{children:[e.jsxs(is,{children:[e.jsx(os,{children:""}),e.jsxs(ds,{children:[" ",C+1," "]})]}),e.jsxs(cs,{children:[e.jsx(ms,{children:""}),e.jsx(us,{onClick:()=>g(C),children:""})]})]})]})]})]}),e.jsx("div",{className:"space-y-2",children:N.map((L,O)=>e.jsx(ww,{member:L,groupIndex:C,memberIndex:O,availableChatIds:w,onUpdate:y,onRemove:j},`${C}-${O}`))}),e.jsx("p",{className:"text-xs text-muted-foreground",children:' "*" '})]},C)}),r.expression_groups.length===0&&e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:'""'})]})]})}),e.jsx("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-4",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:""}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{id:"all_global_jargon",checked:r.all_global_jargon??!1,onCheckedChange:N=>i({...r,all_global_jargon:N})}),e.jsx(S,{htmlFor:"all_global_jargon",className:"cursor-pointer",children:""})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:""})]})})]})});function Sw({regex:n,reaction:r,onRegexChange:i,onReactionChange:d}){const[m,x]=u.useState(!1),[f,p]=u.useState(""),[g,b]=u.useState(null),[j,y]=u.useState(""),[N,C]=u.useState({}),[w,L]=u.useState(""),O=u.useRef(null),[U,F]=u.useState("build"),R=k=>k.replace(/\(\?P<([^>]+)>/g,"(?<$1>"),z=(k,M=0)=>{const ee=O.current;if(!ee)return;const ge=ee.selectionStart||0,ve=ee.selectionEnd||0,je=n.substring(0,ge)+k+n.substring(ve);i(je),setTimeout(()=>{const be=ge+k.length+M;ee.setSelectionRange(be,be),ee.focus()},0)};u.useEffect(()=>{if(!n||!f){b(null),C({}),L(r),y("");return}try{const k=R(n),M=new RegExp(k,"g"),ee=f.match(M);b(ee),y("");const ve=new RegExp(k).exec(f);if(ve&&ve.groups){C(ve.groups);let je=r;Object.entries(ve.groups).forEach(([be,ye])=>{je=je.replace(new RegExp(`\\[${be}\\]`,"g"),ye||"")}),L(je)}else C({}),L(r)}catch(k){y(k.message),b(null),C({}),L(r)}},[n,f,r]);const V=()=>{if(!f||!g||g.length===0)return e.jsx("span",{className:"text-muted-foreground",children:f||""});try{const k=R(n),M=new RegExp(k,"g");let ee=0;const ge=[];let ve;for(;(ve=M.exec(f))!==null;)ve.index>ee&&ge.push(e.jsx("span",{children:f.substring(ee,ve.index)},`text-${ee}`)),ge.push(e.jsx("span",{className:"bg-yellow-200 dark:bg-yellow-900 font-semibold",children:ve[0]},`match-${ve.index}`)),ee=ve.index+ve[0].length;return ee<f.length&&ge.push(e.jsx("span",{children:f.substring(ee)},`text-${ee}`)),e.jsx(e.Fragment,{children:ge})}catch{return e.jsx("span",{children:f})}},$=[{category:"",items:[{label:"",pattern:".",desc:""},{label:"",pattern:"\\d",desc:" 0-9"},{label:"",pattern:"\\D",desc:""},{label:"",pattern:"\\w",desc:""},{label:"",pattern:"\\W",desc:""},{label:"",pattern:"\\s",desc:""},{label:"",pattern:"\\S",desc:""}]},{category:"",items:[{label:"",pattern:"^",desc:""},{label:"",pattern:"$",desc:""},{label:"",pattern:"\\b",desc:""}]},{category:"",items:[{label:"0",pattern:"*",desc:"0"},{label:"1",pattern:"+",desc:"1"},{label:"01",pattern:"?",desc:"01"},{label:"",pattern:"{n}",desc:"nn"},{label:"",pattern:"{m,n}",desc:"mn"}]},{category:"",items:[{label:"",pattern:"()",desc:"",moveCursor:-1},{label:"",pattern:"(?P<name>)",desc:"Python",moveCursor:-1},{label:"",pattern:"(?:)",desc:"",moveCursor:-1}]},{category:"",items:[{label:"",pattern:"[]",desc:"",moveCursor:-1},{label:"",pattern:"[^]",desc:"",moveCursor:-1},{label:"",pattern:"[a-z]",desc:"az"},{label:"",pattern:"[\\u4e00-\\u9fa5]",desc:""}]},{category:"",items:[{label:"",pattern:"(?P<word>\\S+)",desc:""},{label:"",pattern:"(?P<sentence>.+)",desc:""},{label:"",pattern:"(?P<num>\\d+)",desc:""},{label:"",pattern:"(?:1|2)",desc:""}]}];return e.jsxs(Fs,{open:m,onOpenChange:x,children:[e.jsx(Wu,{asChild:!0,children:e.jsxs(_,{variant:"outline",size:"sm",children:[e.jsx(Xu,{className:"h-4 w-4 mr-1"}),""]})}),e.jsxs(Bs,{className:"max-w-[95vw] sm:max-w-[900px] max-h-[90vh]",children:[e.jsxs(Hs,{children:[e.jsx(qs,{children:""}),e.jsx(et,{className:"text-sm",children:""})]}),e.jsx(Ze,{className:"max-h-[calc(90vh-120px)]",children:e.jsxs(Ca,{value:U,onValueChange:k=>F(k),className:"w-full",children:[e.jsxs(ma,{className:"grid w-full grid-cols-2",children:[e.jsx(as,{value:"build",children:" "}),e.jsx(as,{value:"test",children:" "})]}),e.jsxs(Ms,{value:"build",className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{className:"text-sm font-medium",children:""}),e.jsx(ie,{ref:O,value:n,onChange:k=>i(k.target.value),className:"font-mono text-sm",placeholder:"..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{className:"text-sm font-medium",children:"Reaction "}),e.jsx(Ys,{value:r,onChange:k=>d(k.target.value),placeholder:" [] ...",rows:3,className:"text-sm"})]}),e.jsxs("div",{className:"space-y-4 border-t pt-4",children:[$.map(k=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("h5",{className:"text-xs font-semibold text-primary",children:k.category}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:k.items.map(M=>e.jsx(_,{variant:"outline",size:"sm",className:"justify-start h-auto py-2 px-3",onClick:()=>z(M.pattern,M.moveCursor||0),children:e.jsxs("div",{className:"flex flex-col items-start w-full",children:[e.jsxs("div",{className:"flex items-center gap-2 w-full",children:[e.jsx("span",{className:"text-xs font-medium",children:M.label}),e.jsx("code",{className:"ml-auto text-xs bg-muted px-1.5 py-0.5 rounded font-mono",children:M.pattern})]}),e.jsx("span",{className:"text-xs text-muted-foreground mt-0.5",children:M.desc})]})},M.label))})]},k.category)),e.jsxs("div",{className:"space-y-2 border-t pt-4",children:[e.jsx("h5",{className:"text-xs font-semibold text-primary",children:""}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{variant:"outline",size:"sm",className:"w-full justify-start h-auto py-2 px-3",onClick:()=>i("^(?P<n>\\S{1,20})$"),children:e.jsxs("div",{className:"flex flex-col items-start w-full",children:[e.jsxs("code",{className:"text-xs font-mono bg-muted px-2 py-1 rounded w-full overflow-x-auto",children:["^(?P<n>\\S","{1,20}",")$"]}),e.jsx("span",{className:"text-xs text-muted-foreground mt-1",children:""})]})}),e.jsx(_,{variant:"outline",size:"sm",className:"w-full justify-start h-auto py-2 px-3",onClick:()=>i("(?:[^.\\s]+\\s*)?(?:)?[]\\s*(?P<action>.+?)[.,]?$"),children:e.jsxs("div",{className:"flex flex-col items-start w-full",children:[e.jsx("code",{className:"text-xs font-mono bg-muted px-2 py-1 rounded w-full overflow-x-auto",children:"(?:[^.\\s]+\\s*)?(?:)?[]\\s*(?P<action>.+?)[.,]?$"}),e.jsx("span",{className:"text-xs text-muted-foreground mt-1",children:""})]})}),e.jsx(_,{variant:"outline",size:"sm",className:"w-full justify-start h-auto py-2 px-3",onClick:()=>i("(?P<subject>.+?)(?:||)"),children:e.jsxs("div",{className:"flex flex-col items-start w-full",children:[e.jsx("code",{className:"text-xs font-mono bg-muted px-2 py-1 rounded w-full overflow-x-auto",children:"(?P<subject>.+?)(?:||)"}),e.jsx("span",{className:"text-xs text-muted-foreground mt-1",children:""})]})})]})]})]}),e.jsxs("div",{className:"rounded-md bg-blue-50 dark:bg-blue-950/30 border border-blue-200 dark:border-blue-800 p-3 space-y-1",children:[e.jsx("p",{className:"text-xs font-medium text-blue-900 dark:text-blue-100",children:" "}),e.jsxs("ul",{className:"text-xs text-blue-700 dark:text-blue-300 space-y-1 list-disc list-inside",children:[e.jsx("li",{children:""}),e.jsxs("li",{children:["",e.jsx("code",{className:"bg-blue-100 dark:bg-blue-900 px-1 rounded",children:"(?P<>)"})]}),e.jsxs("li",{children:[" reaction  ",e.jsx("code",{className:"bg-blue-100 dark:bg-blue-900 px-1 rounded",children:"[]"})," "]}),e.jsx("li",{children:""})]})]})]}),e.jsxs(Ms,{value:"test",className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{className:"text-sm font-medium",children:""}),e.jsx("div",{className:"rounded-md bg-muted p-3 font-mono text-xs break-all",children:n||"()"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"test-text",className:"text-sm font-medium",children:""}),e.jsx(Ys,{id:"test-text",value:f,onChange:k=>p(k.target.value),placeholder:`...
`,className:"min-h-[100px] text-sm"})]}),j&&e.jsxs("div",{className:"rounded-md bg-destructive/10 border border-destructive/20 p-3",children:[e.jsx("p",{className:"text-sm text-destructive font-medium",children:""}),e.jsx("p",{className:"text-xs text-destructive/80 mt-1",children:j})]}),!j&&f&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex items-center gap-2",children:g&&g.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-green-500"}),e.jsxs("span",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:[" (",g.length," )"]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:""})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{className:"text-sm font-medium",children:""}),e.jsx(Ze,{className:"h-40 rounded-md bg-muted p-3",children:e.jsx("div",{className:"text-sm break-words",children:V()})})]}),Object.keys(N).length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{className:"text-sm font-medium",children:""}),e.jsx(Ze,{className:"h-32 rounded-md border p-3",children:e.jsx("div",{className:"space-y-2",children:Object.entries(N).map(([k,M])=>e.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[e.jsxs("span",{className:"font-mono font-semibold text-primary min-w-[80px]",children:["[",k,"]"]}),e.jsx("span",{className:"text-muted-foreground",children:"="}),e.jsx("span",{className:"font-mono bg-muted px-2 py-0.5 rounded",children:M})]},k))})})]}),Object.keys(N).length>0&&r&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{className:"text-sm font-medium",children:"Reaction "}),e.jsx(Ze,{className:"h-48 rounded-md bg-blue-50 dark:bg-blue-950/30 border border-blue-200 dark:border-blue-800 p-3",children:e.jsx("div",{className:"text-sm break-words",children:w})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"reaction  [name] "})]})]}),e.jsxs("div",{className:"rounded-md bg-blue-50 dark:bg-blue-950/30 border border-blue-200 dark:border-blue-800 p-3 space-y-1",children:[e.jsx("p",{className:"text-xs font-medium text-blue-900 dark:text-blue-100",children:" "}),e.jsxs("ul",{className:"text-xs text-blue-700 dark:text-blue-300 space-y-1 list-disc list-inside",children:[e.jsx("li",{children:""}),e.jsx("li",{children:""}),e.jsx("li",{children:"Reaction "}),e.jsx("li",{children:""})]})]})]})]})})]})]})}const Cw=Tt.memo(function({keywordReactionConfig:r,responsePostProcessConfig:i,chineseTypoConfig:d,responseSplitterConfig:m,onKeywordReactionChange:x,onResponsePostProcessChange:f,onChineseTypoChange:p,onResponseSplitterChange:g}){const b=()=>{x({...r,regex_rules:[...r.regex_rules,{regex:[""],reaction:""}]})},j=z=>{x({...r,regex_rules:r.regex_rules.filter((V,$)=>$!==z)})},y=(z,V,$)=>{const k=[...r.regex_rules];V==="regex"&&typeof $=="string"?k[z]={...k[z],regex:[$]}:V==="reaction"&&typeof $=="string"&&(k[z]={...k[z],reaction:$}),x({...r,regex_rules:k})},N=()=>{x({...r,keyword_rules:[...r.keyword_rules,{keywords:[],reaction:""}]})},C=z=>{x({...r,keyword_rules:r.keyword_rules.filter((V,$)=>$!==z)})},w=(z,V,$)=>{const k=[...r.keyword_rules];typeof $=="string"&&(k[z]={...k[z],reaction:$}),x({...r,keyword_rules:k})},L=z=>{const V=[...r.keyword_rules];V[z]={...V[z],keywords:[...V[z].keywords||[],""]},x({...r,keyword_rules:V})},O=(z,V)=>{const $=[...r.keyword_rules];$[z]={...$[z],keywords:($[z].keywords||[]).filter((k,M)=>M!==V)},x({...r,keyword_rules:$})},U=(z,V,$)=>{const k=[...r.keyword_rules],M=[...k[z].keywords||[]];M[V]=$,k[z]={...k[z],keywords:M},x({...r,keyword_rules:k})},F=({rule:z})=>{const V=`{ regex = [${(z.regex||[]).map($=>`"${$}"`).join(", ")}], reaction = "${z.reaction}" }`;return e.jsxs(Qa,{children:[e.jsx(Ia,{asChild:!0,children:e.jsxs(_,{variant:"outline",size:"sm",children:[e.jsx(Vt,{className:"h-4 w-4 mr-1"}),""]})}),e.jsx(Ua,{className:"w-[95vw] sm:w-[500px]",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-sm",children:""}),e.jsx(Ze,{className:"h-60 rounded-md bg-muted p-3",children:e.jsx("pre",{className:"font-mono text-xs break-all",children:V})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" bot_config.toml "})]})})]})},R=({rule:z})=>{const V=`[[keyword_reaction.keyword_rules]]
keywords = [${(z.keywords||[]).map($=>`"${$}"`).join(", ")}]
reaction = "${z.reaction}"`;return e.jsxs(Qa,{children:[e.jsx(Ia,{asChild:!0,children:e.jsxs(_,{variant:"outline",size:"sm",children:[e.jsx(Vt,{className:"h-4 w-4 mr-1"}),""]})}),e.jsx(Ua,{className:"w-[95vw] sm:w-[500px]",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-sm",children:""}),e.jsx(Ze,{className:"h-60 rounded-md bg-muted p-3",children:e.jsx("pre",{className:"font-mono text-xs whitespace-pre-wrap break-all",children:V})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" bot_config.toml "})]})})]})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-base font-semibold",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:""})]}),e.jsxs(_,{onClick:b,size:"sm",variant:"outline",children:[e.jsx(ht,{className:"h-4 w-4 mr-1"}),""]})]}),e.jsxs("div",{className:"space-y-3",children:[r.regex_rules.map((z,V)=>e.jsxs("div",{className:"rounded-lg border p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm font-medium",children:[" ",V+1]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Sw,{regex:z.regex&&z.regex[0]||"",reaction:z.reaction,onRegexChange:$=>y(V,"regex",$),onReactionChange:$=>y(V,"reaction",$)}),e.jsx(F,{rule:z}),e.jsxs(xs,{children:[e.jsx(dt,{asChild:!0,children:e.jsx(_,{size:"sm",variant:"ghost",children:e.jsx(ss,{className:"h-4 w-4"})})}),e.jsxs(rs,{children:[e.jsxs(is,{children:[e.jsx(os,{children:""}),e.jsxs(ds,{children:[" ",V+1," "]})]}),e.jsxs(cs,{children:[e.jsx(ms,{children:""}),e.jsx(us,{onClick:()=>j(V),children:""})]})]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{className:"text-xs font-medium",children:"Python "}),e.jsx(ie,{value:z.regex&&z.regex[0]||"",onChange:$=>y(V,"regex",$.target.value),placeholder:"^(?P<n>\\\\S{1,20})$ ",className:"font-mono text-sm"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:' (?P<name>pattern) reaction  [name] ""'})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{className:"text-xs font-medium",children:""}),e.jsx(Ys,{value:z.reaction,onChange:$=>y(V,"reaction",$.target.value),placeholder:`...
 [] `,rows:3,className:"text-sm"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" []  [n] "})]})]})]},V)),r.regex_rules.length===0&&e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:'""'})]})]}),e.jsxs("div",{className:"space-y-4 border-t pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-base font-semibold",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:""})]}),e.jsxs(_,{onClick:N,size:"sm",variant:"outline",children:[e.jsx(ht,{className:"h-4 w-4 mr-1"}),""]})]}),e.jsxs("div",{className:"space-y-3",children:[r.keyword_rules.map((z,V)=>e.jsxs("div",{className:"rounded-lg border p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm font-medium",children:[" ",V+1]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{rule:z}),e.jsxs(xs,{children:[e.jsx(dt,{asChild:!0,children:e.jsx(_,{size:"sm",variant:"ghost",children:e.jsx(ss,{className:"h-4 w-4"})})}),e.jsxs(rs,{children:[e.jsxs(is,{children:[e.jsx(os,{children:""}),e.jsxs(ds,{children:[" ",V+1," "]})]}),e.jsxs(cs,{children:[e.jsx(ms,{children:""}),e.jsx(us,{onClick:()=>C(V),children:""})]})]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(S,{className:"text-xs font-medium",children:""}),e.jsxs(_,{onClick:()=>L(V),size:"sm",variant:"ghost",children:[e.jsx(ht,{className:"h-3 w-3 mr-1"}),""]})]}),e.jsxs("div",{className:"space-y-2",children:[(z.keywords||[]).map(($,k)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{value:$,onChange:M=>U(V,k,M.target.value),placeholder:"",className:"flex-1"}),e.jsx(_,{onClick:()=>O(V,k),size:"sm",variant:"ghost",children:e.jsx(ss,{className:"h-4 w-4"})})]},k)),(!z.keywords||z.keywords.length===0)&&e.jsx("p",{className:"text-xs text-muted-foreground text-center py-2",children:'""'})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{className:"text-xs font-medium",children:""}),e.jsx(Ys,{value:z.reaction,onChange:$=>w(V,"reaction",$.target.value),placeholder:"...",rows:3,className:"text-sm"})]})]})]},V)),r.keyword_rules.length===0&&e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:'""'})]})]})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:""}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{id:"enable_response_post_process",checked:i.enable_response_post_process,onCheckedChange:z=>f({...i,enable_response_post_process:z})}),e.jsx(S,{htmlFor:"enable_response_post_process",className:"cursor-pointer",children:""})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:""})]}),i.enable_response_post_process&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"border-t pt-6 space-y-4",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(Fe,{id:"enable_chinese_typo",checked:d.enable,onCheckedChange:z=>p({...d,enable:z})}),e.jsx(S,{htmlFor:"enable_chinese_typo",className:"cursor-pointer font-semibold",children:""})]}),e.jsx("p",{className:"text-xs text-muted-foreground mb-4",children:""}),d.enable&&e.jsxs("div",{className:"grid gap-4 pl-6 border-l-2 border-primary/20",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"error_rate",className:"text-xs font-medium",children:""}),e.jsx(ie,{id:"error_rate",type:"number",step:"0.001",min:"0",max:"1",value:d.error_rate,onChange:z=>p({...d,error_rate:parseFloat(z.target.value)})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"min_freq",className:"text-xs font-medium",children:""}),e.jsx(ie,{id:"min_freq",type:"number",min:"0",value:d.min_freq,onChange:z=>p({...d,min_freq:parseInt(z.target.value)})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"tone_error_rate",className:"text-xs font-medium",children:""}),e.jsx(ie,{id:"tone_error_rate",type:"number",step:"0.01",min:"0",max:"1",value:d.tone_error_rate,onChange:z=>p({...d,tone_error_rate:parseFloat(z.target.value)})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"word_replace_rate",className:"text-xs font-medium",children:""}),e.jsx(ie,{id:"word_replace_rate",type:"number",step:"0.001",min:"0",max:"1",value:d.word_replace_rate,onChange:z=>p({...d,word_replace_rate:parseFloat(z.target.value)})})]})]})]})}),e.jsx("div",{className:"border-t pt-6 space-y-4",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(Fe,{id:"enable_response_splitter",checked:m.enable,onCheckedChange:z=>g({...m,enable:z})}),e.jsx(S,{htmlFor:"enable_response_splitter",className:"cursor-pointer font-semibold",children:""})]}),e.jsx("p",{className:"text-xs text-muted-foreground mb-4",children:""}),m.enable&&e.jsxs("div",{className:"grid gap-4 pl-6 border-l-2 border-primary/20",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"max_length",className:"text-xs font-medium",children:""}),e.jsx(ie,{id:"max_length",type:"number",min:"1",value:m.max_length,onChange:z=>g({...m,max_length:parseInt(z.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"max_sentence_num",className:"text-xs font-medium",children:""}),e.jsx(ie,{id:"max_sentence_num",type:"number",min:"1",value:m.max_sentence_num,onChange:z=>g({...m,max_sentence_num:parseInt(z.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{id:"enable_kaomoji_protection",checked:m.enable_kaomoji_protection,onCheckedChange:z=>g({...m,enable_kaomoji_protection:z})}),e.jsx(S,{htmlFor:"enable_kaomoji_protection",className:"cursor-pointer",children:""})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{id:"enable_overflow_return_all",checked:m.enable_overflow_return_all,onCheckedChange:z=>g({...m,enable_overflow_return_all:z})}),e.jsx(S,{htmlFor:"enable_overflow_return_all",className:"cursor-pointer",children:""})]}),e.jsx("p",{className:"text-xs text-muted-foreground -mt-2",children:""})]})]})})]})]})]})}),Il="/api/webui/config";async function mp(){const r=await(await Te(`${Il}/bot`)).json();if(!r.success)throw new Error("");return r.config}async function Fl(){const r=await(await Te(`${Il}/model`)).json();if(!r.success)throw new Error("");return r.config}async function xp(n){const i=await(await Te(`${Il}/bot`,{method:"POST",body:JSON.stringify(n)})).json();if(!i.success)throw new Error(i.message||"")}async function kw(){const r=await(await Te(`${Il}/bot/raw`)).json();if(!r.success)throw new Error("");return r.content}async function Tw(n){const i=await(await Te(`${Il}/bot/raw`,{method:"POST",body:JSON.stringify({raw_content:n})})).json();if(!i.success)throw new Error(i.message||"")}async function fi(n){const i=await(await Te(`${Il}/model`,{method:"POST",body:JSON.stringify(n)})).json();if(!i.success)throw new Error(i.message||"")}async function Ew(n,r){const d=await(await Te(`${Il}/bot/section/${n}`,{method:"POST",body:JSON.stringify(r)})).json();if(!d.success)throw new Error(d.message||` ${n} `)}async function Iu(n,r){const d=await(await Te(`${Il}/model/section/${n}`,{method:"POST",body:JSON.stringify(r)})).json();if(!d.success)throw new Error(d.message||` ${n} `)}async function zw(n,r="openai",i="/models"){const d=new URLSearchParams({provider_name:n,parser:r,endpoint:i}),m=await Te(`/api/webui/models/list?${d}`);if(!m.ok){const f=await m.json().catch(()=>({}));throw new Error(f.detail||` (${m.status})`)}const x=await m.json();if(!x.success)throw new Error("");return x.models}async function Mw(n){const r=new URLSearchParams({provider_name:n}),i=await Te(`/api/webui/models/test-connection-by-name?${r}`,{method:"POST"});if(!i.ok){const d=await i.json().catch(()=>({}));throw new Error(d.detail||` (${i.status})`)}return await i.json()}const Aw=dr("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),ea=u.forwardRef(({className:n,variant:r,...i},d)=>e.jsx("div",{ref:d,role:"alert",className:H(Aw({variant:r}),n),...i}));ea.displayName="Alert";const Dw=u.forwardRef(({className:n,...r},i)=>e.jsx("h5",{ref:i,className:H("mb-1 font-medium leading-none tracking-tight",n),...r}));Dw.displayName="AlertTitle";const sa=u.forwardRef(({className:n,...r},i)=>e.jsx("div",{ref:i,className:H("text-sm [&_p]:leading-relaxed",n),...r}));sa.displayName="AlertDescription";function sm({onRestartComplete:n,onRestartFailed:r}){const[i,d]=u.useState(0),[m,x]=u.useState("restarting"),[f,p]=u.useState(0),[g,b]=u.useState(0);u.useEffect(()=>{const N=setInterval(()=>{d(L=>L>=90?L:L+1)},200),C=setInterval(()=>{p(L=>L+1)},1e3),w=setTimeout(()=>{x("checking"),j()},3e3);return()=>{clearInterval(N),clearInterval(C),clearTimeout(w)}},[]);const j=()=>{const C=async()=>{try{if(b(L=>L+1),(await fetch("/api/webui/system/status",{method:"GET",headers:{"Content-Type":"application/json"},signal:AbortSignal.timeout(3e3)})).ok)d(100),x("success"),setTimeout(()=>{n?.()},1500);else throw new Error("Status check failed")}catch{g<60?setTimeout(C,2e3):(x("failed"),r?.())}};C()},y=N=>{const C=Math.floor(N/60),w=N%60;return`${C}:${w.toString().padStart(2,"0")}`};return e.jsx("div",{className:"fixed inset-0 bg-background/95 backdrop-blur-sm z-50 flex items-center justify-center",children:e.jsxs("div",{className:"max-w-md w-full mx-4 space-y-8",children:[e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[m==="restarting"&&e.jsxs(e.Fragment,{children:[e.jsx(ut,{className:"h-16 w-16 text-primary animate-spin"}),e.jsx("h2",{className:"text-2xl font-bold",children:""}),e.jsx("p",{className:"text-muted-foreground text-center",children:"..."})]}),m==="checking"&&e.jsxs(e.Fragment,{children:[e.jsx(ut,{className:"h-16 w-16 text-primary animate-spin"}),e.jsx("h2",{className:"text-2xl font-bold",children:""}),e.jsxs("p",{className:"text-muted-foreground text-center",children:["... ( ",g,"/60)"]})]}),m==="success"&&e.jsxs(e.Fragment,{children:[e.jsx(ua,{className:"h-16 w-16 text-green-500"}),e.jsx("h2",{className:"text-2xl font-bold",children:""}),e.jsx("p",{className:"text-muted-foreground text-center",children:"..."})]}),m==="failed"&&e.jsxs(e.Fragment,{children:[e.jsx(qt,{className:"h-16 w-16 text-destructive"}),e.jsx("h2",{className:"text-2xl font-bold",children:""}),e.jsx("p",{className:"text-muted-foreground text-center",children:""})]})]}),m!=="failed"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(hr,{value:i,className:"h-2"}),e.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground",children:[e.jsxs("span",{children:[i,"%"]}),e.jsxs("span",{children:[": ",y(f)]})]})]}),e.jsx("div",{className:"bg-muted/50 rounded-lg p-4 space-y-2",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:[m==="restarting"&&" ...",m==="checking"&&" ...",m==="success"&&" ",m==="failed"&&" "]})}),m==="failed"&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>window.location.reload(),className:"flex-1 px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90",children:""}),e.jsx("button",{onClick:()=>{x("checking"),b(0),j()},className:"flex-1 px-4 py-2 bg-secondary text-secondary-foreground rounded-md hover:bg-secondary/90",children:""})]})]})})}const Ow={name:"toml",startState:function(){return{inString:!1,stringType:"",lhs:!0,inArray:0}},token:function(n,r){let i;if(!r.inString&&(i=n.match(/^('''|"""|'|")/))&&(r.stringType=i[0],r.inString=!0),n.sol()&&!r.inString&&r.inArray===0&&(r.lhs=!0),r.inString){for(;r.inString;)if(n.match(r.stringType))r.inString=!1;else if(n.peek()==="\\")n.next(),n.next();else{if(n.eol())break;n.match(/^.[^\\\"\']*/)}return r.lhs?"property":"string"}else{if(r.inArray&&n.peek()==="]")return n.next(),r.inArray--,"bracket";if(r.lhs&&n.peek()==="["&&n.skipTo("]"))return n.next(),n.peek()==="]"&&n.next(),"atom";if(n.peek()==="#")return n.skipToEnd(),"comment";if(n.eatSpace())return null;if(r.lhs&&n.eatWhile(function(d){return d!="="&&d!=" "}))return"property";if(r.lhs&&n.peek()==="=")return n.next(),r.lhs=!1,null;if(!r.lhs&&n.match(/^\d\d\d\d[\d\-\:\.T]*Z/))return"atom";if(!r.lhs&&(n.match("true")||n.match("false")))return"atom";if(!r.lhs&&n.peek()==="[")return r.inArray++,n.next(),"bracket";if(!r.lhs&&n.match(/^\-?\d+(?:\.\d+)?/))return"number";n.eatSpace()||n.next()}return null},languageData:{commentTokens:{line:"#"}}},Rw={python:[Ty()],json:[Ey(),zy()],toml:[ky.define(Ow)],text:[]};function Lw({value:n,onChange:r,language:i="text",readOnly:d=!1,height:m="400px",minHeight:x,maxHeight:f,placeholder:p,theme:g="dark",className:b=""}){const[j,y]=u.useState(!1);if(u.useEffect(()=>{y(!0)},[]),!j)return e.jsx("div",{className:`rounded-md border bg-muted animate-pulse ${b}`,style:{height:m,minHeight:x,maxHeight:f}});const N=[...Rw[i]||[],sp.lineWrapping];return d&&N.push(sp.editable.of(!1)),e.jsx("div",{className:`rounded-md overflow-hidden border ${b}`,children:e.jsx(My,{value:n,height:m,minHeight:x,maxHeight:f,theme:g==="dark"?Ay:void 0,extensions:N,onChange:r,placeholder:p,basicSetup:{lineNumbers:!0,highlightActiveLineGutter:!0,highlightSpecialChars:!0,history:!0,foldGutter:!0,drawSelection:!0,dropCursor:!0,allowMultipleSelections:!0,indentOnInput:!0,syntaxHighlighting:!0,bracketMatching:!0,closeBrackets:!0,autocompletion:!0,rectangularSelection:!0,crosshairCursor:!0,highlightActiveLine:!0,highlightSelectionMatches:!0,closeBracketsKeymap:!0,defaultKeymap:!0,searchKeymap:!0,historyKeymap:!0,foldKeymap:!0,completionKeymap:!0,lintKeymap:!0}})})}function Uw(n,r,i,d={}){const{debounceMs:m=2e3,onSaveSuccess:x,onSaveError:f}=d,p=u.useRef(null),g=u.useCallback(async(N,C)=>{try{r(!0),await Ew(N,C),i(!1),x?.()}catch(w){console.error(` ${N} :`,w),i(!0),f?.(w instanceof Error?w:new Error(String(w)))}finally{r(!1)}},[r,i,x,f]),b=u.useCallback((N,C)=>{n||(i(!0),p.current&&clearTimeout(p.current),p.current=setTimeout(()=>{g(N,C)},m))},[n,i,g,m]),j=u.useCallback(async(N,C)=>{p.current&&(clearTimeout(p.current),p.current=null),await g(N,C)},[g]),y=u.useCallback(()=>{p.current&&(clearTimeout(p.current),p.current=null)},[]);return u.useEffect(()=>()=>{p.current&&clearTimeout(p.current)},[]),{triggerAutoSave:b,saveNow:j,cancelPendingAutoSave:y}}function Bt(n,r,i,d){u.useEffect(()=>{n&&!i&&d(r,n)},[n])}const Bw=500;function Hw(){const[n,r]=u.useState(!0),[i,d]=u.useState(!1),[m,x]=u.useState(!1),[f,p]=u.useState(!1),[g,b]=u.useState(!1),[j,y]=u.useState(!1),[N,C]=u.useState("visual"),[w,L]=u.useState(""),[O,U]=u.useState(!1),{toast:F}=Qs(),[R,z]=u.useState(null),[V,$]=u.useState(null),[k,M]=u.useState(null),[ee,ge]=u.useState(null),[ve,je]=u.useState(null),[be,ye]=u.useState(null),[Ne,D]=u.useState(null),[X,J]=u.useState(null),[ce,T]=u.useState(null),[re,he]=u.useState(null),[ke,Ce]=u.useState(null),[ze,fe]=u.useState(null),[te,ae]=u.useState(null),[q,K]=u.useState(null),[Me,We]=u.useState(null),[E,xe]=u.useState(null),[Ke,we]=u.useState(null),Q=u.useRef(!0),_e=u.useRef({}),Re=u.useCallback(Se=>{_e.current=Se,z(Se.bot),$(Se.personality);const Es=Se.chat;Es.talk_value_rules||(Es.talk_value_rules=[]),M(Es),ge(Se.expression),je(Se.emoji),ye(Se.memory),D(Se.tool),J(Se.voice),T(Se.lpmm_knowledge),he(Se.keyword_reaction),Ce(Se.response_post_process),fe(Se.chinese_typo),ae(Se.response_splitter),K(Se.log),We(Se.debug),xe(Se.maim_message),we(Se.telemetry)},[]),Os=u.useCallback(()=>({..._e.current,bot:R,personality:V,chat:k,expression:ee,emoji:ve,memory:be,tool:Ne,voice:X,lpmm_knowledge:ce,keyword_reaction:re,response_post_process:ke,chinese_typo:ze,response_splitter:te,log:q,debug:Me,maim_message:E,telemetry:Ke}),[R,V,k,ee,ve,be,Ne,X,ce,re,ke,ze,te,q,Me,E,Ke]),Ts=u.useCallback(async()=>{try{const Se=await kw();L(Se),U(!1)}catch(Se){F({variant:"destructive",title:"",description:Se instanceof Error?Se.message:""})}},[F]),gt=u.useCallback(async()=>{try{r(!0);const Se=await mp();Re(Se),p(!1),Q.current=!1,await Ts()}catch(Se){console.error(":",Se),F({title:"",description:"",variant:"destructive"})}finally{r(!1)}},[F,Ts,Re]);u.useEffect(()=>{gt()},[gt]);const{triggerAutoSave:gs,cancelPendingAutoSave:Is}=Uw(Q.current,x,p);Bt(R,"bot",Q.current,gs),Bt(V,"personality",Q.current,gs),Bt(k,"chat",Q.current,gs),Bt(ee,"expression",Q.current,gs),Bt(ve,"emoji",Q.current,gs),Bt(be,"memory",Q.current,gs),Bt(Ne,"tool",Q.current,gs),Bt(X,"voice",Q.current,gs),Bt(ce,"lpmm_knowledge",Q.current,gs),Bt(re,"keyword_reaction",Q.current,gs),Bt(ke,"response_post_process",Q.current,gs),Bt(ze,"chinese_typo",Q.current,gs),Bt(te,"response_splitter",Q.current,gs),Bt(q,"log",Q.current,gs),Bt(Me,"debug",Q.current,gs),Bt(E,"maim_message",Q.current,gs),Bt(Ke,"telemetry",Q.current,gs);const Y=async()=>{try{d(!0),await Tw(w),p(!1),U(!1),F({title:"",description:""}),await gt()}catch(Se){U(!0),F({variant:"destructive",title:"",description:Se instanceof Error?Se.message:""})}finally{d(!1)}},Ge=async Se=>{if(f){F({variant:"destructive",title:"",description:""});return}if(C(Se),Se==="source")await Ts();else try{const Es=await mp();Re(Es),p(!1)}catch(Es){console.error(":",Es),F({title:"",description:"",variant:"destructive"})}},Oe=async()=>{try{d(!0),Is(),await xp(Os()),p(!1),F({title:"",description:""})}catch(Se){console.error(":",Se),F({title:"",description:Se.message,variant:"destructive"})}finally{d(!1)}},Xe=async()=>{try{b(!0),oo().catch(()=>{}),y(!0)}catch(Se){console.error(":",Se),y(!1),F({title:"",description:"",variant:"destructive"}),b(!1)}},Gs=async()=>{try{d(!0),Is(),await xp(Os()),p(!1),F({title:"",description:"..."}),await new Promise(Se=>setTimeout(Se,Bw)),await Xe()}catch(Se){console.error(":",Se),F({title:"",description:Se.message,variant:"destructive"})}finally{d(!1)}},Je=()=>{localStorage.removeItem("access-token"),window.location.href="/auth"},Zs=()=>{y(!1),b(!1),F({title:"",description:"",variant:"destructive"})};return n?e.jsx(Ze,{className:"h-full",children:e.jsx("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("p",{className:"text-muted-foreground",children:"..."})})})}):e.jsx(Ze,{className:"h-full",children:e.jsxs("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col gap-3 sm:gap-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl font-bold",children:""}),e.jsx("p",{className:"text-muted-foreground mt-1 text-xs sm:text-sm",children:""})]}),e.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[e.jsxs(_,{onClick:N==="visual"?Oe:Y,disabled:i||m||!f||g,size:"sm",variant:"outline",className:"w-20 sm:w-24",children:[e.jsx(yi,{className:"h-4 w-4 flex-shrink-0",strokeWidth:2,fill:"none"}),e.jsx("span",{className:"ml-1 truncate text-xs sm:text-sm",children:i?"":m?"":f?"":""})]}),e.jsxs(xs,{children:[e.jsx(dt,{asChild:!0,children:e.jsxs(_,{disabled:i||m||g,size:"sm",className:"w-20 sm:w-28",children:[e.jsx(Ni,{className:"h-4 w-4 flex-shrink-0"}),e.jsx("span",{className:"ml-1 truncate text-xs sm:text-sm",children:g?"":f?"":""})]})}),e.jsxs(rs,{children:[e.jsxs(is,{children:[e.jsx(os,{children:""}),e.jsx(ds,{asChild:!0,children:e.jsx("div",{children:e.jsx("p",{children:f?",":","})})})]}),e.jsxs(cs,{children:[e.jsx(ms,{children:""}),e.jsx(us,{onClick:f?Gs:Xe,children:f?"":""})]})]})]})]})]}),e.jsx("div",{className:"flex",children:e.jsx(Ca,{value:N,onValueChange:Se=>Ge(Se),className:"w-full",children:e.jsxs(ma,{className:"h-8 sm:h-9 w-full grid grid-cols-2",children:[e.jsxs(as,{value:"visual",className:"text-xs sm:text-sm",children:[e.jsx(ny,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1"}),""]}),e.jsxs(as,{value:"source",className:"text-xs sm:text-sm",children:[e.jsx(ry,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1"}),""]})]})})})]}),e.jsxs(ea,{children:[e.jsx(Va,{className:"h-4 w-4"}),e.jsxs(sa,{children:["",e.jsx("strong",{children:""}),'""']})]}),N==="source"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs(ea,{children:[e.jsx(Va,{className:"h-4 w-4"}),e.jsxs(sa,{children:[e.jsx("strong",{children:""})," TOML  TOML ",O&&e.jsx("span",{className:"text-destructive font-semibold ml-2",children:"  TOML "})]})]}),e.jsx(Lw,{value:w,onChange:Se=>{L(Se),p(!0),O&&U(!1)},language:"toml",theme:"dark",height:"calc(100vh - 280px)",minHeight:"500px",placeholder:"TOML "})]}),N==="visual"&&e.jsx(e.Fragment,{children:e.jsxs(Ca,{defaultValue:"bot",className:"w-full",children:[e.jsxs(ma,{className:"flex flex-wrap h-auto gap-1 p-1 sm:grid sm:grid-cols-5 lg:grid-cols-9",children:[e.jsx(as,{value:"bot",className:"text-xs px-2 py-1.5 sm:px-3 sm:py-2 data-[state=active]:shadow-sm",children:""}),e.jsx(as,{value:"personality",className:"text-xs px-2 py-1.5 sm:px-3 sm:py-2 data-[state=active]:shadow-sm",children:""}),e.jsx(as,{value:"chat",className:"text-xs px-2 py-1.5 sm:px-3 sm:py-2 data-[state=active]:shadow-sm",children:""}),e.jsx(as,{value:"expression",className:"text-xs px-2 py-1.5 sm:px-3 sm:py-2 data-[state=active]:shadow-sm",children:""}),e.jsx(as,{value:"features",className:"text-xs px-2 py-1.5 sm:px-3 sm:py-2 data-[state=active]:shadow-sm",children:""}),e.jsx(as,{value:"processing",className:"text-xs px-2 py-1.5 sm:px-3 sm:py-2 data-[state=active]:shadow-sm",children:""}),e.jsx(as,{value:"voice",className:"text-xs px-2 py-1.5 sm:px-3 sm:py-2 data-[state=active]:shadow-sm",children:""}),e.jsx(as,{value:"lpmm",className:"text-xs px-2 py-1.5 sm:px-3 sm:py-2 data-[state=active]:shadow-sm",children:""}),e.jsx(as,{value:"other",className:"text-xs px-2 py-1.5 sm:px-3 sm:py-2 data-[state=active]:shadow-sm",children:""})]}),e.jsx(Ms,{value:"bot",className:"space-y-4",children:R&&e.jsx(ow,{config:R,onChange:z})}),e.jsx(Ms,{value:"personality",className:"space-y-4",children:V&&e.jsx(dw,{config:V,onChange:$})}),e.jsx(Ms,{value:"chat",className:"space-y-4",children:k&&e.jsx(fw,{config:k,onChange:M})}),e.jsx(Ms,{value:"expression",className:"space-y-4",children:ee&&e.jsx(_w,{config:ee,onChange:ge})}),e.jsx(Ms,{value:"features",className:"space-y-4",children:ve&&be&&Ne&&e.jsx(yw,{emojiConfig:ve,memoryConfig:be,toolConfig:Ne,onEmojiChange:je,onMemoryChange:ye,onToolChange:D})}),e.jsx(Ms,{value:"processing",className:"space-y-4",children:re&&ke&&ze&&te&&e.jsx(Cw,{keywordReactionConfig:re,responsePostProcessConfig:ke,chineseTypoConfig:ze,responseSplitterConfig:te,onKeywordReactionChange:he,onResponsePostProcessChange:Ce,onChineseTypoChange:fe,onResponseSplitterChange:ae})}),e.jsx(Ms,{value:"voice",className:"space-y-4",children:X&&e.jsx(pw,{config:X,onChange:J})}),e.jsx(Ms,{value:"lpmm",className:"space-y-4",children:ce&&e.jsx(gw,{config:ce,onChange:T})}),e.jsxs(Ms,{value:"other",className:"space-y-4",children:[q&&e.jsx(jw,{config:q,onChange:K}),Me&&e.jsx(vw,{config:Me,onChange:We}),E&&e.jsx(bw,{config:E,onChange:xe}),Ke&&e.jsx(Nw,{config:Ke,onChange:we})]})]})}),j&&e.jsx(sm,{onRestartComplete:Je,onRestartFailed:Zs})]})})}const pn=u.forwardRef(({className:n,...r},i)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:i,className:H("w-full caption-bottom text-sm",n),...r})}));pn.displayName="Table";const gn=u.forwardRef(({className:n,...r},i)=>e.jsx("thead",{ref:i,className:H("[&_tr]:border-b",n),...r}));gn.displayName="TableHeader";const jn=u.forwardRef(({className:n,...r},i)=>e.jsx("tbody",{ref:i,className:H("[&_tr:last-child]:border-0",n),...r}));jn.displayName="TableBody";const qw=u.forwardRef(({className:n,...r},i)=>e.jsx("tfoot",{ref:i,className:H("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",n),...r}));qw.displayName="TableFooter";const ft=u.forwardRef(({className:n,...r},i)=>e.jsx("tr",{ref:i,className:H("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",n),...r}));ft.displayName="TableRow";const Pe=u.forwardRef(({className:n,...r},i)=>e.jsx("th",{ref:i,className:H("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",n),...r}));Pe.displayName="TableHead";const Qe=u.forwardRef(({className:n,...r},i)=>e.jsx("td",{ref:i,className:H("px-4 py-3 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",n),...r}));Qe.displayName="TableCell";const Gw=u.forwardRef(({className:n,...r},i)=>e.jsx("caption",{ref:i,className:H("mt-4 text-sm text-muted-foreground",n),...r}));Gw.displayName="TableCaption";const uo=u.forwardRef(({className:n,...r},i)=>e.jsx(ta,{ref:i,className:H("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",n),...r}));uo.displayName=ta.displayName;const mo=u.forwardRef(({className:n,...r},i)=>e.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[e.jsx(Gt,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),e.jsx(ta.Input,{ref:i,className:H("flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",n),...r})]}));mo.displayName=ta.Input.displayName;const xo=u.forwardRef(({className:n,...r},i)=>e.jsx(ta.List,{ref:i,className:H("max-h-[300px] overflow-y-auto overflow-x-hidden",n),...r}));xo.displayName=ta.List.displayName;const ho=u.forwardRef((n,r)=>e.jsx(ta.Empty,{ref:r,className:"py-6 text-center text-sm",...n}));ho.displayName=ta.Empty.displayName;const vi=u.forwardRef(({className:n,...r},i)=>e.jsx(ta.Group,{ref:i,className:H("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",n),...r}));vi.displayName=ta.Group.displayName;const $w=u.forwardRef(({className:n,...r},i)=>e.jsx(ta.Separator,{ref:i,className:H("-mx-1 h-px bg-border",n),...r}));$w.displayName=ta.Separator.displayName;const bi=u.forwardRef(({className:n,...r},i)=>e.jsx(ta.Item,{ref:i,className:H("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",n),...r}));bi.displayName=ta.Item.displayName;const pt=u.forwardRef(({className:n,...r},i)=>e.jsx(lg,{ref:i,className:H("grid place-content-center peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",n),...r,children:e.jsx(LN,{className:H("grid place-content-center text-current"),children:e.jsx(Wt,{className:"h-4 w-4"})})}));pt.displayName=lg.displayName;const Gg=u.createContext(null),$g="maibot-completed-tours";function Fw(){try{const n=localStorage.getItem($g);return n?new Set(JSON.parse(n)):new Set}catch{return new Set}}function hp(n){localStorage.setItem($g,JSON.stringify([...n]))}function Vw({children:n}){const[r,i]=u.useState({activeTourId:null,stepIndex:0,isRunning:!1}),d=u.useRef(new Map),[,m]=u.useState(0),[x,f]=u.useState(Fw),p=u.useCallback((R,z)=>{d.current.set(R,z),m(V=>V+1)},[]),g=u.useCallback(R=>{d.current.delete(R),i(z=>z.activeTourId===R?{...z,activeTourId:null,isRunning:!1,stepIndex:0}:z)},[]),b=u.useCallback((R,z=0)=>{d.current.has(R)&&i({activeTourId:R,stepIndex:z,isRunning:!0})},[]),j=u.useCallback(()=>{i(R=>({...R,isRunning:!1}))},[]),y=u.useCallback(R=>{i(z=>({...z,stepIndex:R}))},[]),N=u.useCallback(()=>{i(R=>({...R,stepIndex:R.stepIndex+1}))},[]),C=u.useCallback(()=>{i(R=>({...R,stepIndex:Math.max(0,R.stepIndex-1)}))},[]),w=u.useCallback(()=>r.activeTourId?d.current.get(r.activeTourId)||[]:[],[r.activeTourId]),L=u.useCallback(R=>{f(z=>{const V=new Set(z);return V.add(R),hp(V),V})},[]),O=u.useCallback(R=>{const{action:z,index:V,status:$,type:k}=R,M=["finished","skipped"];if(z==="close"){i(ee=>({...ee,isRunning:!1,stepIndex:0}));return}M.includes($)?i(ee=>($==="finished"&&ee.activeTourId&&setTimeout(()=>L(ee.activeTourId),0),{...ee,isRunning:!1,stepIndex:0})):k==="step:after"&&(z==="next"?i(ee=>({...ee,stepIndex:V+1})):z==="prev"&&i(ee=>({...ee,stepIndex:V-1})))},[L]),U=u.useCallback(R=>x.has(R),[x]),F=u.useCallback(R=>{f(z=>{const V=new Set(z);return V.delete(R),hp(V),V})},[]);return e.jsx(Gg.Provider,{value:{state:r,tours:d.current,registerTour:p,unregisterTour:g,startTour:b,stopTour:j,goToStep:y,nextStep:N,prevStep:C,getCurrentSteps:w,handleJoyrideCallback:O,isTourCompleted:U,markTourCompleted:L,resetTourCompleted:F},children:n})}function tm(){const n=u.useContext(Gg);if(!n)throw new Error("useTour must be used within a TourProvider");return n}const Qw={options:{zIndex:1e4,primaryColor:"hsl(var(--primary))",textColor:"hsl(var(--foreground))",backgroundColor:"hsl(var(--background))",arrowColor:"hsl(var(--background))",overlayColor:"rgba(0, 0, 0, 0.5)"},tooltip:{borderRadius:"var(--radius)",padding:"1rem"},tooltipContainer:{textAlign:"left"},tooltipTitle:{fontSize:"1rem",fontWeight:600,marginBottom:"0.5rem"},tooltipContent:{fontSize:"0.875rem",padding:"0.5rem 0"},buttonNext:{backgroundColor:"hsl(var(--primary))",color:"hsl(var(--primary-foreground))",borderRadius:"calc(var(--radius) - 2px)",fontSize:"0.875rem",padding:"0.5rem 1rem"},buttonBack:{color:"hsl(var(--muted-foreground))",fontSize:"0.875rem",marginRight:"0.5rem"},buttonSkip:{color:"hsl(var(--muted-foreground))",fontSize:"0.875rem"},buttonClose:{color:"hsl(var(--muted-foreground))"},spotlight:{borderRadius:"var(--radius)"}},Iw={back:"",close:"",last:"",next:"",nextLabelWithProgress:" ({step}/{steps})",open:"",skip:""};function Yw(){const{state:n,getCurrentSteps:r,handleJoyrideCallback:i}=tm(),d=r(),[m,x]=u.useState(!1),f=u.useRef(n.stepIndex),p=u.useRef(null);u.useEffect(()=>{f.current!==n.stepIndex&&(x(!1),f.current=n.stepIndex)},[n.stepIndex]),u.useEffect(()=>{if(!n.isRunning||d.length===0){x(!1);return}const j=d[n.stepIndex];if(!j){x(!1);return}const y=j.target;if(y==="body"){x(!0);return}x(!1);const N=setTimeout(()=>{const C=()=>{const U=document.querySelector(y);if(U){const F=U.getBoundingClientRect();if(F.width>0&&F.height>0)return!0}return!1};if(C()){setTimeout(()=>x(!0),100);return}const w=setInterval(()=>{C()&&(clearInterval(w),setTimeout(()=>x(!0),100))},100),L=setTimeout(()=>{clearInterval(w),x(!0)},5e3),O=()=>{clearInterval(w),clearTimeout(L)};p.current=O},150);return()=>{clearTimeout(N),p.current&&(p.current(),p.current=null)}},[n.isRunning,n.stepIndex,d]);const g=u.useRef(null);if(u.useEffect(()=>{let j=document.getElementById("tour-portal-container");return j||(j=document.createElement("div"),j.id="tour-portal-container",j.style.cssText="position: fixed; top: 0; left: 0; z-index: 99999; pointer-events: none;",document.body.appendChild(j)),g.current=j,()=>{}},[]),!n.isRunning||d.length===0||!m)return null;const b=e.jsx(Dy,{steps:d,stepIndex:n.stepIndex,run:n.isRunning,continuous:!0,showSkipButton:!0,showProgress:!0,disableOverlayClose:!0,disableScrolling:!1,disableScrollParentFix:!1,callback:i,styles:Qw,locale:Iw,scrollOffset:80,scrollToFirstStep:!0,floaterProps:{styles:{floater:{zIndex:99999}},disableAnimation:!0}},`tour-step-${n.stepIndex}`);return g.current?Bb.createPortal(b,g.current):b}const $a="model-assignment-tour",Fg=[{target:"body",content:"",placement:"center",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="sidebar-model-provider"]',content:' DeepSeek Siliconflow""',placement:"right",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="add-provider-button"]',content:'""',placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!0,hideFooter:!0},{target:'[data-tour="provider-dialog"]',content:"",placement:"left",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="provider-name-input"]',content:"",placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="provider-apikey-input"]',content:" API  API ",placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="provider-url-input"]',content:" API API ",placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="provider-template-select"]',content:"",placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="provider-save-button"]',content:"",placement:"top",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="provider-cancel-button"]',content:"",placement:"top",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!0,hideFooter:!0},{target:'[data-tour="sidebar-model-management"]',content:'""',placement:"right",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="add-model-button"]',content:'""',placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!0,hideFooter:!0},{target:'[data-tour="model-dialog"]',content:"",placement:"left",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="model-name-input"]',content:"",placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="model-provider-select"]',content:"",placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="model-identifier-input"]',content:"",placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="model-save-button"]',content:"",placement:"top",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="model-cancel-button"]',content:"",placement:"top",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!0,hideFooter:!0},{target:'[data-tour="tasks-tab-trigger"]',content:'""',placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!0,hideFooter:!0},{target:'[data-tour="task-model-select"]',content:"",placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1}],Vg={0:"/config/model",1:"/config/model",2:"/config/modelProvider",3:"/config/modelProvider",4:"/config/modelProvider",5:"/config/modelProvider",6:"/config/modelProvider",7:"/config/modelProvider",8:"/config/modelProvider",9:"/config/modelProvider",10:"/config/modelProvider",11:"/config/model",12:"/config/model",13:"/config/model",14:"/config/model",15:"/config/model",16:"/config/model",17:"/config/model",18:"/config/model",19:"/config/model"},di=[{id:"siliconflow",name:"SiliconFlow",base_url:"https://api.siliconflow.cn/v1",client_type:"openai",display_name:" (SiliconFlow)",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"deepseek",name:"DeepSeek",base_url:"https://api.deepseek.com",client_type:"openai",display_name:"DeepSeek",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"rinkoai",name:"RinkoAI",base_url:"https://rinkoai.com/v1",client_type:"openai",display_name:"RinkoAI",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"zhipu",name:"ZhipuAI",base_url:"https://open.bigmodel.cn/api/paas/v4",client_type:"openai",display_name:" AI (ZhipuAI / GLM)",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"moonshot",name:"Moonshot",base_url:"https://api.moonshot.cn/v1",client_type:"openai",display_name:" (Moonshot / Kimi)",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"doubao",name:"Doubao",base_url:"https://ark.cn-beijing.volces.com/api/v3",client_type:"openai",display_name:" (Doubao)",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"alibaba",name:"Alibaba",base_url:"https://dashscope.aliyuncs.com/compatible-mode/v1",client_type:"openai",display_name:" (Alibaba Qwen)",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"baichuan",name:"Baichuan",base_url:"https://api.baichuan-ai.com/v1",client_type:"openai",display_name:" (Baichuan)",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"minimax",name:"MiniMax",base_url:"https://api.minimax.chat/v1",client_type:"openai",display_name:"MiniMax ( AI)",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"stepfun",name:"StepFun",base_url:"https://api.stepfun.com/v1",client_type:"openai",display_name:" (StepFun)",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"lingyi",name:"Lingyi",base_url:"https://api.lingyiwanwu.com/v1",client_type:"openai",display_name:" (Lingyi / Yi)",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"openai",name:"OpenAI",base_url:"https://api.openai.com/v1",client_type:"openai",display_name:"OpenAI",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"xai",name:"xAI",base_url:"https://api.x.ai/v1",client_type:"openai",display_name:"xAI (Grok)",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"anthropic",name:"Anthropic",base_url:"https://api.anthropic.com/v1",client_type:"openai",display_name:"Anthropic (Claude)"},{id:"gemini",name:"Gemini",base_url:"https://generativelanguage.googleapis.com/v1beta",client_type:"gemini",display_name:"Google Gemini",modelFetcher:{endpoint:"/models",parser:"gemini"}},{id:"cohere",name:"Cohere",base_url:"https://api.cohere.ai/v1",client_type:"openai",display_name:"Cohere"},{id:"groq",name:"Groq",base_url:"https://api.groq.com/openai/v1",client_type:"openai",display_name:"Groq",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"together",name:"Together AI",base_url:"https://api.together.xyz/v1",client_type:"openai",display_name:"Together AI",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"fireworks",name:"Fireworks",base_url:"https://api.fireworks.ai/inference/v1",client_type:"openai",display_name:"Fireworks AI",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"mistral",name:"Mistral",base_url:"https://api.mistral.ai/v1",client_type:"openai",display_name:"Mistral AI",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"perplexity",name:"Perplexity",base_url:"https://api.perplexity.ai",client_type:"openai",display_name:"Perplexity AI"},{id:"custom",name:"",base_url:"",client_type:"openai",display_name:""}];function fp(n){return n?n.replace(/\/+$/,"").toLowerCase():""}function Kw(n){if(!n)return null;const r=fp(n);return di.find(i=>i.id!=="custom"&&fp(i.base_url)===r)||null}const $c=n=>({...n,max_retry:n.max_retry??2,timeout:n.timeout??30,retry_interval:n.retry_interval??10}),Xw=n=>{const r={};return n?(n.name?.trim()||(r.name=""),n.base_url?.trim()||(r.base_url=" URL"),n.api_key?.trim()||(r.api_key=" API Key"),{isValid:Object.keys(r).length===0,errors:r}):{isValid:!1,errors:{name:""}}};function Jw(){const[n,r]=u.useState([]),[i,d]=u.useState(!0),[m,x]=u.useState(!1),[f,p]=u.useState(!1),[g,b]=u.useState(!1),[j,y]=u.useState(!1),[N,C]=u.useState(!1),[w,L]=u.useState(!1),[O,U]=u.useState(null),[F,R]=u.useState(null),[z,V]=u.useState("custom"),[$,k]=u.useState(!1),[M,ee]=u.useState(!1),[ge,ve]=u.useState(null),[je,be]=u.useState(!1),[ye,Ne]=u.useState(""),[D,X]=u.useState(new Set),[J,ce]=u.useState(!1),[T,re]=u.useState(1),[he,ke]=u.useState(20),[Ce,ze]=u.useState(""),[fe,te]=u.useState({isOpen:!1,providersToDelete:[],affectedModels:[],pendingProviders:[],context:"auto",oldProviders:[]}),[ae,q]=u.useState({}),[K,Me]=u.useState(new Set),[We,E]=u.useState(new Map),{toast:xe}=Qs(),Ke=Ta(),{state:we,goToStep:Q,registerTour:_e}=tm(),Re=u.useRef(null),Os=u.useRef(!0);u.useEffect(()=>{_e($a,Fg)},[_e]),u.useEffect(()=>{if(we.activeTourId===$a&&we.isRunning){const I=Vg[we.stepIndex];I&&!window.location.pathname.endsWith(I.replace("/config/",""))&&Ke({to:I})}},[we.stepIndex,we.activeTourId,we.isRunning,Ke]);const Ts=u.useRef(we.stepIndex);u.useEffect(()=>{if(we.activeTourId===$a&&we.isRunning){const I=Ts.current,pe=we.stepIndex;I>=3&&I<=9&&pe<3&&L(!1),I>=10&&pe>=3&&pe<=9&&(q({}),V("custom"),U({name:"",base_url:"",api_key:"",client_type:"openai",max_retry:2,timeout:30,retry_interval:10}),R(null),be(!1),L(!0)),Ts.current=pe}},[we.stepIndex,we.activeTourId,we.isRunning]),u.useEffect(()=>{if(we.activeTourId!==$a||!we.isRunning)return;const I=pe=>{const Ee=pe.target,zs=we.stepIndex;zs===2&&Ee.closest('[data-tour="add-provider-button"]')?setTimeout(()=>Q(3),300):zs===9&&Ee.closest('[data-tour="provider-cancel-button"]')&&setTimeout(()=>Q(10),300)};return document.addEventListener("click",I,!0),()=>document.removeEventListener("click",I,!0)},[we,Q]),u.useEffect(()=>{gt()},[]);const gt=async()=>{try{d(!0);const I=await Fl();r(I.api_providers||[]),b(!1),Os.current=!1}catch(I){console.error(":",I)}finally{d(!1)}},gs=async()=>{try{y(!0),oo().catch(()=>{}),C(!0)}catch(I){console.error(":",I),C(!1),xe({title:"",description:"",variant:"destructive"}),y(!1)}},Is=async()=>{try{x(!0),Re.current&&clearTimeout(Re.current);const I=n.map(rt=>({...rt,max_retry:rt.max_retry??2,timeout:rt.timeout??30,retry_interval:rt.retry_interval??10})),{shouldProceed:pe}=await Oe(I,"restart");if(!pe){x(!1);return}const Ee=await Fl(),zs=new Set(I.map(rt=>rt.name)),Qt=(Ee.models||[]).filter(rt=>zs.has(rt.api_provider));Ee.api_providers=I,Ee.models=Qt,await fi(Ee),b(!1),xe({title:"",description:"..."}),await gs()}catch(I){console.error(":",I),xe({title:"",description:I.message,variant:"destructive"}),x(!1)}},Y=()=>{localStorage.removeItem("access-token"),window.location.href="/auth"},Ge=()=>{C(!1),y(!1),xe({title:"",description:"",variant:"destructive"})},Oe=u.useCallback(async(I,pe="auto")=>{try{const Ee=await Fl(),zs=new Set(n.map(Ns=>Ns.name)),Ea=new Set(I.map(Ns=>Ns.name)),Qt=Array.from(zs).filter(Ns=>!Ea.has(Ns));if(Qt.length===0)return{shouldProceed:!0,providers:I};const St=(Ee.models||[]).filter(Ns=>Qt.includes(Ns.api_provider));return St.length===0?{shouldProceed:!0,providers:I}:(te({isOpen:!0,providersToDelete:Qt,affectedModels:St,pendingProviders:I,context:pe,oldProviders:[...n]}),{shouldProceed:!1,providers:I})}catch(Ee){return console.error(":",Ee),{shouldProceed:!0,providers:I}}},[n]),Xe=async()=>{try{(fe.context==="auto"?p:x)(!0),te(Ns=>({...Ns,isOpen:!1}));const pe=await Fl(),Ee=fe.pendingProviders.map($c),zs=new Set(Ee.map(Ns=>Ns.name)),Qt=(pe.models||[]).filter(Ns=>zs.has(Ns.api_provider)),rt=new Set(fe.affectedModels.map(Ns=>Ns.name)),St=pe.model_task_config;St&&Object.keys(St).forEach(Ns=>{const Ct=St[Ns];Ct&&Array.isArray(Ct.model_list)&&(Ct.model_list=Ct.model_list.filter(vl=>!rt.has(vl)))}),pe.api_providers=Ee,pe.models=Qt,pe.model_task_config=St,await fi(pe),r(fe.pendingProviders),b(!1),xe({title:"",description:` ${fe.providersToDelete.length}  ${fe.affectedModels.length} `}),te({isOpen:!1,providersToDelete:[],affectedModels:[],pendingProviders:[],context:"auto",oldProviders:[]}),X(new Set),fe.context==="restart"&&await gs()}catch(I){console.error(":",I),xe({title:"",description:I.message,variant:"destructive"})}finally{fe.context==="auto"?p(!1):x(!1)}},Gs=()=>{fe.oldProviders.length>0&&r(fe.oldProviders),te({isOpen:!1,providersToDelete:[],affectedModels:[],pendingProviders:[],context:"auto",oldProviders:[]}),b(!1)},Je=u.useCallback(async I=>{if(Os.current)return;const{shouldProceed:pe}=await Oe(I,"auto");if(!pe){b(!0);return}try{p(!0);const Ee=I.map($c);await Iu("api_providers",Ee),b(!1)}catch(Ee){console.error(":",Ee),xe({title:"",description:Ee.message,variant:"destructive"}),b(!0)}finally{p(!1)}},[n,Oe]);u.useEffect(()=>{if(!Os.current)return b(!0),Re.current&&clearTimeout(Re.current),Re.current=setTimeout(()=>{Je(n)},2e3),()=>{Re.current&&clearTimeout(Re.current)}},[n,Je]);const Zs=async()=>{try{x(!0),Re.current&&clearTimeout(Re.current);const I=n.map($c),{shouldProceed:pe}=await Oe(I,"manual");if(!pe){x(!1);return}const Ee=await Fl(),zs=new Set(I.map(rt=>rt.name)),Ea=Ee.models||[],Qt=Ea.filter(rt=>{const St=zs.has(rt.api_provider);return St||console.warn(` "${rt.name}"  "${rt.api_provider}"`),St});if(Ea.length!==Qt.length){const rt=Ea.length-Qt.length;xe({title:"",description:` ${rt} `,variant:"default"})}console.log(" providers :",I),Ee.api_providers=I,Ee.models=Qt,console.log(":",Ee),await fi(Ee),b(!1),xe({title:"",description:""})}catch(I){console.error(":",I),xe({title:"",description:I.message,variant:"destructive"})}finally{x(!1)}},Se=(I,pe)=>{if(q({}),I){const Ee=di.find(zs=>zs.base_url===I.base_url&&zs.client_type===I.client_type);V(Ee?.id||"custom"),U(I)}else V("custom"),U({name:"",base_url:"",api_key:"",client_type:"openai",max_retry:2,timeout:30,retry_interval:10});R(pe),be(!1),L(!0)},Es=u.useCallback(I=>{V(I),k(!1);const pe=di.find(Ee=>Ee.id===I);pe&&pe.id!=="custom"?U(Ee=>({...Ee,name:pe.name,base_url:pe.base_url,client_type:pe.client_type})):pe?.id==="custom"&&U(Ee=>({...Ee,name:"",base_url:"",client_type:"openai"}))},[]),Ae=u.useMemo(()=>z!=="custom",[z]),ws=u.useCallback(async()=>{if(O?.api_key)try{await navigator.clipboard.writeText(O.api_key),xe({title:"",description:"API Key "})}catch{xe({title:"",description:"",variant:"destructive"})}},[O?.api_key,xe]),_s=()=>{if(!O)return;const{isValid:I,errors:pe}=Xw(O);if(!I){q(pe);return}q({});const Ee=$c(O);if(F!==null){const zs=[...n];zs[F]=Ee,r(zs)}else r([...n,Ee]);L(!1),U(null),R(null)},Et=I=>{if(!I&&O){const pe={...O,max_retry:O.max_retry??2,timeout:O.timeout??30,retry_interval:O.retry_interval??10};U(pe)}L(I)},Ks=I=>{ve(I),ee(!0)},jt=async()=>{if(ge!==null){const I=n.filter((Ee,zs)=>zs!==ge),{shouldProceed:pe}=await Oe(I,"manual");pe&&(r(I),xe({title:"",description:""}))}ee(!1),ve(null)},Xs=I=>{const pe=new Set(D);pe.has(I)?pe.delete(I):pe.add(I),X(pe)},nt=()=>{if(D.size===vt.length)X(new Set);else{const I=vt.map((pe,Ee)=>n.findIndex(zs=>zs===vt[Ee]));X(new Set(I))}},jl=()=>{if(D.size===0){xe({title:"",description:"",variant:"default"});return}ce(!0)},xa=async()=>{const I=n.filter((Ee,zs)=>!D.has(zs)),{shouldProceed:pe}=await Oe(I,"manual");pe&&(r(I),X(new Set),xe({title:"",description:` ${D.size} `})),ce(!1)},vt=u.useMemo(()=>{if(!ye)return n;const I=ye.toLowerCase();return n.filter(pe=>pe.name.toLowerCase().includes(I)||pe.base_url.toLowerCase().includes(I)||pe.client_type.toLowerCase().includes(I))},[n,ye]),{totalPages:$t,paginatedProviders:le}=u.useMemo(()=>{const I=Math.ceil(vt.length/he),pe=vt.slice((T-1)*he,T*he);return{totalPages:I,paginatedProviders:pe}},[vt,T,he]),ue=u.useCallback(()=>{const I=parseInt(Ce);I>=1&&I<=$t&&(re(I),ze(""))},[Ce,$t]),bs=async I=>{Me(pe=>new Set(pe).add(I));try{const pe=await Mw(I);E(Ee=>new Map(Ee).set(I,pe)),pe.network_ok?pe.api_key_valid===!0?xe({title:"",description:`${I} API Key  (${pe.latency_ms}ms)`}):pe.api_key_valid===!1?xe({title:" Key ",description:`${I}  API Key `,variant:"destructive"}):xe({title:"",description:`${I}  (${pe.latency_ms}ms)`}):xe({title:"",description:pe.error||"",variant:"destructive"})}catch(pe){xe({title:"",description:pe.message,variant:"destructive"})}finally{Me(pe=>{const Ee=new Set(pe);return Ee.delete(I),Ee})}},zt=async()=>{for(const I of n)await bs(I.name)},Mt=I=>{const pe=K.has(I),Ee=We.get(I);return pe?e.jsxs(Ie,{variant:"secondary",className:"gap-1",children:[e.jsx(ut,{className:"h-3 w-3 animate-spin"}),""]}):Ee?Ee.network_ok?Ee.api_key_valid===!0?e.jsxs(Ie,{className:"gap-1 bg-green-600 hover:bg-green-700",children:[e.jsx(ua,{className:"h-3 w-3"}),""]}):Ee.api_key_valid===!1?e.jsxs(Ie,{variant:"destructive",className:"gap-1",children:[e.jsx(qt,{className:"h-3 w-3"}),"Key"]}):e.jsxs(Ie,{className:"gap-1 bg-blue-600 hover:bg-blue-700",children:[e.jsx(ua,{className:"h-3 w-3"}),""]}):e.jsxs(Ie,{variant:"destructive",className:"gap-1",children:[e.jsx(xg,{className:"h-3 w-3"}),""]}):null};return i?e.jsx("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("p",{className:"text-muted-foreground",children:"..."})})}):e.jsxs("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"AI"}),e.jsx("p",{className:"text-muted-foreground mt-1 sm:mt-2 text-sm sm:text-base",children:" AI  API "})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[D.size>0&&e.jsxs(_,{onClick:jl,size:"sm",variant:"destructive",className:"w-full sm:w-auto",children:[e.jsx(ss,{className:"mr-2 h-4 w-4",strokeWidth:2,fill:"none"})," (",D.size,")"]}),e.jsxs(_,{onClick:zt,size:"sm",variant:"outline",className:"w-full sm:w-auto",disabled:n.length===0||K.size>0,children:[e.jsx(xn,{className:"mr-2 h-4 w-4"}),K.size>0?` (${K.size})`:""]}),e.jsxs(_,{onClick:()=>Se(null,null),size:"sm",className:"w-full sm:w-auto","data-tour":"add-provider-button",children:[e.jsx(ht,{className:"mr-2 h-4 w-4",strokeWidth:2,fill:"none"}),""]}),e.jsxs(_,{onClick:Zs,disabled:m||f||!g||j,size:"sm",variant:"outline",className:"w-full sm:w-auto sm:min-w-[120px]",children:[e.jsx(yi,{className:"mr-2 h-4 w-4",strokeWidth:2,fill:"none"}),m?"...":f?"...":g?"":""]}),e.jsxs(xs,{children:[e.jsx(dt,{asChild:!0,children:e.jsxs(_,{disabled:m||f||j,size:"sm",className:"w-full sm:w-auto sm:min-w-[120px]",children:[e.jsx(Ni,{className:"mr-2 h-4 w-4"}),j?"...":g?"":""]})}),e.jsxs(rs,{children:[e.jsxs(is,{children:[e.jsx(os,{children:""}),e.jsx(ds,{asChild:!0,children:e.jsx("div",{children:e.jsx("p",{children:g?",":","})})})]}),e.jsxs(cs,{children:[e.jsx(ms,{children:""}),e.jsx(us,{onClick:g?Is:gs,children:g?"":""})]})]})]})]})]}),e.jsxs(ea,{children:[e.jsx(Va,{className:"h-4 w-4"}),e.jsxs(sa,{children:["",e.jsx("strong",{children:""}),'""']})]}),e.jsxs(Ze,{className:"h-[calc(100vh-260px)]",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2 mb-4",children:[e.jsxs("div",{className:"relative w-full sm:flex-1 sm:max-w-sm",children:[e.jsx(Gt,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(ie,{placeholder:"URL ...",value:ye,onChange:I=>Ne(I.target.value),className:"pl-9"})]}),ye&&e.jsxs("p",{className:"text-sm text-muted-foreground whitespace-nowrap",children:[" ",vt.length," "]})]}),e.jsx("div",{className:"md:hidden space-y-3",children:vt.length===0?e.jsx("div",{className:"text-center text-muted-foreground py-8 rounded-lg border bg-card",children:ye?"":'""'}):le.map((I,pe)=>{const Ee=n.findIndex(zs=>zs===I);return e.jsxs("div",{className:"rounded-lg border bg-card p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("h3",{className:"font-semibold text-base truncate",children:I.name}),Mt(I.name)]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1 break-all",children:I.base_url})]}),e.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[e.jsx(_,{variant:"outline",size:"sm",onClick:()=>bs(I.name),disabled:K.has(I.name),title:"",children:K.has(I.name)?e.jsx(ut,{className:"h-4 w-4 animate-spin"}):e.jsx(xn,{className:"h-4 w-4"})}),e.jsx(_,{variant:"default",size:"sm",onClick:()=>Se(I,Ee),children:e.jsx(hn,{className:"h-4 w-4",strokeWidth:2,fill:"none"})}),e.jsx(_,{size:"sm",onClick:()=>Ks(Ee),className:"bg-red-600 hover:bg-red-700 text-white",children:e.jsx(ss,{className:"h-4 w-4",strokeWidth:2,fill:"none"})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground text-xs",children:""}),e.jsx("p",{className:"font-medium",children:I.client_type})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground text-xs",children:""}),e.jsx("p",{className:"font-medium",children:I.max_retry})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground text-xs",children:"()"}),e.jsx("p",{className:"font-medium",children:I.timeout})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground text-xs",children:"()"}),e.jsx("p",{className:"font-medium",children:I.retry_interval})]})]})]},pe)})}),e.jsx("div",{className:"hidden md:block rounded-lg border bg-card overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(pn,{children:[e.jsx(gn,{children:e.jsxs(ft,{children:[e.jsx(Pe,{className:"w-12",children:e.jsx(pt,{checked:D.size===vt.length&&vt.length>0,onCheckedChange:nt})}),e.jsx(Pe,{children:""}),e.jsx(Pe,{children:""}),e.jsx(Pe,{children:"URL"}),e.jsx(Pe,{children:""}),e.jsx(Pe,{className:"text-right",children:""}),e.jsx(Pe,{className:"text-right",children:"()"}),e.jsx(Pe,{className:"text-right",children:"()"}),e.jsx(Pe,{className:"text-right",children:""})]})}),e.jsx(jn,{children:le.length===0?e.jsx(ft,{children:e.jsx(Qe,{colSpan:9,className:"text-center text-muted-foreground py-8",children:ye?"":'""'})}):le.map((I,pe)=>{const Ee=n.findIndex(zs=>zs===I);return e.jsxs(ft,{children:[e.jsx(Qe,{children:e.jsx(pt,{checked:D.has(Ee),onCheckedChange:()=>Xs(Ee)})}),e.jsx(Qe,{children:Mt(I.name)||e.jsx(Ie,{variant:"outline",className:"text-muted-foreground",children:""})}),e.jsx(Qe,{className:"font-medium",children:I.name}),e.jsx(Qe,{className:"max-w-xs truncate",title:I.base_url,children:I.base_url}),e.jsx(Qe,{children:I.client_type}),e.jsx(Qe,{className:"text-right",children:I.max_retry}),e.jsx(Qe,{className:"text-right",children:I.timeout}),e.jsx(Qe,{className:"text-right",children:I.retry_interval}),e.jsx(Qe,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(_,{variant:"outline",size:"sm",onClick:()=>bs(I.name),disabled:K.has(I.name),title:"",children:K.has(I.name)?e.jsx(ut,{className:"h-4 w-4 animate-spin"}):e.jsx(xn,{className:"h-4 w-4"})}),e.jsxs(_,{variant:"default",size:"sm",onClick:()=>Se(I,Ee),children:[e.jsx(hn,{className:"h-4 w-4 mr-1",strokeWidth:2,fill:"none"}),""]}),e.jsxs(_,{size:"sm",onClick:()=>Ks(Ee),className:"bg-red-600 hover:bg-red-700 text-white",children:[e.jsx(ss,{className:"h-4 w-4 mr-1",strokeWidth:2,fill:"none"}),""]})]})})]},pe)})})]})})}),vt.length>0&&e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{htmlFor:"page-size-provider",className:"text-sm whitespace-nowrap",children:""}),e.jsxs(He,{value:he.toString(),onValueChange:I=>{ke(parseInt(I)),re(1),X(new Set)},children:[e.jsx(Ue,{id:"page-size-provider",className:"w-20",children:e.jsx(qe,{})}),e.jsxs(Be,{children:[e.jsx(se,{value:"10",children:"10"}),e.jsx(se,{value:"20",children:"20"}),e.jsx(se,{value:"50",children:"50"}),e.jsx(se,{value:"100",children:"100"})]})]}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[" ",(T-1)*he+1," "," ",Math.min(T*he,vt.length),"  ",vt.length," "]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{variant:"outline",size:"sm",onClick:()=>re(1),disabled:T===1,className:"hidden sm:flex",children:e.jsx(mr,{className:"h-4 w-4"})}),e.jsxs(_,{variant:"outline",size:"sm",onClick:()=>re(I=>Math.max(1,I-1)),disabled:T===1,children:[e.jsx(pl,{className:"h-4 w-4 sm:mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{type:"number",value:Ce,onChange:I=>ze(I.target.value),onKeyDown:I=>I.key==="Enter"&&ue(),placeholder:T.toString(),className:"w-16 h-8 text-center",min:1,max:$t}),e.jsx(_,{variant:"outline",size:"sm",onClick:ue,disabled:!Ce,className:"h-8",children:""})]}),e.jsxs(_,{variant:"outline",size:"sm",onClick:()=>re(I=>I+1),disabled:T>=$t,children:[e.jsx("span",{className:"hidden sm:inline",children:""}),e.jsx(Ya,{className:"h-4 w-4 sm:ml-1"})]}),e.jsx(_,{variant:"outline",size:"sm",onClick:()=>re($t),disabled:T>=$t,className:"hidden sm:flex",children:e.jsx(xr,{className:"h-4 w-4"})})]})]})]}),e.jsx(Fs,{open:w,onOpenChange:Et,children:e.jsxs(Bs,{className:"max-w-[95vw] sm:max-w-2xl max-h-[90vh] overflow-y-auto","data-tour":"provider-dialog",preventOutsideClose:we.isRunning,children:[e.jsxs(Hs,{children:[e.jsx(qs,{children:F!==null?"":""}),e.jsx(et,{children:" API "})]}),e.jsxs("form",{onSubmit:I=>{I.preventDefault(),_s()},autoComplete:"off",children:[e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2","data-tour":"provider-template-select",children:[e.jsx(S,{htmlFor:"template",children:""}),e.jsxs(Qa,{open:$,onOpenChange:k,children:[e.jsx(Ia,{asChild:!0,children:e.jsxs(_,{variant:"outline",role:"combobox","aria-expanded":$,className:"w-full justify-between",children:[z?di.find(I=>I.id===z)?.display_name:"...",e.jsx(Ju,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsx(Ua,{className:"p-0",align:"start",style:{width:"var(--radix-popover-trigger-width)"},children:e.jsxs(uo,{children:[e.jsx(mo,{placeholder:"..."}),e.jsx(Ze,{className:"h-[300px]",children:e.jsxs(xo,{className:"max-h-none overflow-visible",children:[e.jsx(ho,{children:""}),e.jsx(vi,{children:di.map(I=>e.jsxs(bi,{value:I.display_name,onSelect:()=>Es(I.id),children:[e.jsx(Wt,{className:`mr-2 h-4 w-4 ${z===I.id?"opacity-100":"opacity-0"}`}),I.display_name]},I.id))})]})})]})})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" URL ,"})]}),e.jsxs("div",{className:"grid gap-2","data-tour":"provider-name-input",children:[e.jsx(S,{htmlFor:"name",className:ae.name?"text-destructive":"",children:" *"}),e.jsx(ie,{id:"name",value:O?.name||"",onChange:I=>{U(pe=>pe?{...pe,name:I.target.value}:null),ae.name&&q(pe=>({...pe,name:void 0}))},placeholder:": DeepSeek, SiliconFlow",className:ae.name?"border-destructive focus-visible:ring-destructive":""}),ae.name&&e.jsx("p",{className:"text-xs text-destructive",children:ae.name})]}),e.jsxs("div",{className:"grid gap-2","data-tour":"provider-url-input",children:[e.jsx(S,{htmlFor:"base_url",className:ae.base_url?"text-destructive":"",children:" URL *"}),e.jsx(ie,{id:"base_url",value:O?.base_url||"",onChange:I=>{U(pe=>pe?{...pe,base_url:I.target.value}:null),ae.base_url&&q(pe=>({...pe,base_url:void 0}))},placeholder:"https://api.example.com/v1",disabled:Ae,className:`${Ae?"bg-muted cursor-not-allowed":""} ${ae.base_url?"border-destructive focus-visible:ring-destructive":""}`}),ae.base_url&&e.jsx("p",{className:"text-xs text-destructive",children:ae.base_url}),Ae&&!ae.base_url&&e.jsx("p",{className:"text-xs text-muted-foreground",children:' URL ,""'})]}),e.jsxs("div",{className:"grid gap-2","data-tour":"provider-apikey-input",children:[e.jsx(S,{htmlFor:"api_key",className:ae.api_key?"text-destructive":"",children:"API Key *"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ie,{id:"api_key",type:je?"text":"password",value:O?.api_key||"",onChange:I=>{U(pe=>pe?{...pe,api_key:I.target.value}:null),ae.api_key&&q(pe=>({...pe,api_key:void 0}))},placeholder:"sk-...",className:`flex-1 ${ae.api_key?"border-destructive focus-visible:ring-destructive":""}`}),e.jsx(_,{type:"button",variant:"outline",size:"icon",onClick:()=>be(!je),title:je?"":"",children:je?e.jsx(pi,{className:"h-4 w-4"}):e.jsx(Vt,{className:"h-4 w-4"})}),e.jsx(_,{type:"button",variant:"outline",size:"icon",onClick:ws,title:"",children:e.jsx(Zc,{className:"h-4 w-4"})})]}),ae.api_key&&e.jsx("p",{className:"text-xs text-destructive",children:ae.api_key})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"client_type",children:""}),e.jsxs(He,{value:O?.client_type||"openai",onValueChange:I=>U(pe=>pe?{...pe,client_type:I}:null),disabled:Ae,children:[e.jsx(Ue,{id:"client_type",className:Ae?"bg-muted cursor-not-allowed":"",children:e.jsx(qe,{placeholder:""})}),e.jsxs(Be,{children:[e.jsx(se,{value:"openai",children:"OpenAI"}),e.jsx(se,{value:"gemini",children:"Gemini"})]})]}),Ae&&e.jsx("p",{className:"text-xs text-muted-foreground",children:',""'})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"max_retry",children:""}),e.jsx(ie,{id:"max_retry",type:"number",min:"0",value:O?.max_retry??"",onChange:I=>{const pe=I.target.value===""?null:parseInt(I.target.value);U(Ee=>Ee?{...Ee,max_retry:pe}:null)},placeholder:": 2"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"timeout",children:"()"}),e.jsx(ie,{id:"timeout",type:"number",min:"1",value:O?.timeout??"",onChange:I=>{const pe=I.target.value===""?null:parseInt(I.target.value);U(Ee=>Ee?{...Ee,timeout:pe}:null)},placeholder:": 30"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"retry_interval",children:"()"}),e.jsx(ie,{id:"retry_interval",type:"number",min:"1",value:O?.retry_interval??"",onChange:I=>{const pe=I.target.value===""?null:parseInt(I.target.value);U(Ee=>Ee?{...Ee,retry_interval:pe}:null)},placeholder:": 10"})]})]})]}),e.jsxs(at,{children:[e.jsx(_,{type:"button",variant:"outline",onClick:()=>L(!1),"data-tour":"provider-cancel-button",children:""}),e.jsx(_,{type:"submit","data-tour":"provider-save-button",children:""})]})]})]})}),e.jsx(xs,{open:M,onOpenChange:ee,children:e.jsxs(rs,{children:[e.jsxs(is,{children:[e.jsx(os,{children:""}),e.jsxs(ds,{children:[' "',ge!==null?n[ge]?.name:"",'"  ']})]}),e.jsxs(cs,{children:[e.jsx(ms,{children:""}),e.jsx(us,{onClick:jt,children:""})]})]})}),e.jsx(xs,{open:J,onOpenChange:ce,children:e.jsxs(rs,{children:[e.jsxs(is,{children:[e.jsx(os,{children:""}),e.jsxs(ds,{children:[" ",D.size,"  "]})]}),e.jsxs(cs,{children:[e.jsx(ms,{children:""}),e.jsx(us,{onClick:xa,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:""})]})]})}),e.jsx(xs,{open:fe.isOpen,onOpenChange:I=>te(pe=>({...pe,isOpen:I})),children:e.jsxs(rs,{className:"max-w-2xl",children:[e.jsxs(is,{children:[e.jsx(os,{children:""}),e.jsx(ds,{asChild:!0,children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("p",{children:["",e.jsx("strong",{className:"text-foreground ml-1",children:fe.providersToDelete.join(", ")})]}),e.jsxs("p",{className:"text-yellow-600 dark:text-yellow-500 font-medium",children:["  ",fe.affectedModels.length," "]}),e.jsx(Ze,{className:"h-32 w-full rounded border p-3",children:e.jsx("div",{className:"space-y-1",children:fe.affectedModels.map((I,pe)=>e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"font-mono text-muted-foreground",children:""}),e.jsx("span",{className:"ml-2 font-medium",children:I.name}),e.jsxs("span",{className:"ml-2 text-xs text-muted-foreground",children:["(",I.model_identifier,")"]})]},pe))})}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]})})]}),e.jsxs(cs,{children:[e.jsx(ms,{onClick:Gs,children:""}),e.jsx(us,{onClick:Xe,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:""})]})]})}),N&&e.jsx(sm,{onRestartComplete:Y,onRestartFailed:Ge})]})}function Qg(){return typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():`${Date.now().toString(36)}-${Math.random().toString(36).substring(2,11)}`}function Ig(n){return typeof n=="boolean"?"boolean":typeof n=="number"?"number":"string"}function Pw(n,r){switch(r){case"boolean":return n==="true";case"number":{const i=parseFloat(n);return isNaN(i)?0:i}default:return n}}function Lu(n){return Object.entries(n).map(([r,i])=>({id:Qg(),key:r,value:i,type:Ig(i)}))}function Uu(n){const r={};for(const i of n)i.key.trim()&&(r[i.key.trim()]=i.value);return r}function Bu(n){if(!n.trim())return{valid:!0,parsed:{}};try{const r=JSON.parse(n);if(typeof r!="object"||r===null||Array.isArray(r))return{valid:!1,error:" JSON  {}"};for(const[i,d]of Object.entries(r))if(d!==null&&!["string","number","boolean"].includes(typeof d))return{valid:!1,error:` "${i}"  string/number/boolean`};return{valid:!0,parsed:r}}catch{return{valid:!1,error:"JSON "}}}function Zw(n){switch(n){case"boolean":return"";case"number":return"";default:return""}}function Ww(n){switch(n){case"boolean":return"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400";case"number":return"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400";default:return"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400"}}function e1({value:n,onChange:r,className:i,placeholder:d="..."}){const[m,x]=u.useState("list"),[f,p]=u.useState(()=>Lu(n||{})),[g,b]=u.useState(()=>Object.keys(n||{}).length>0?JSON.stringify(n,null,2):""),[j,y]=u.useState(null);u.useEffect(()=>{const F=Lu(n||{});p(F),b(Object.keys(n||{}).length>0?JSON.stringify(n,null,2):"")},[n]);const N=u.useMemo(()=>{const F=Bu(g);return F.valid&&F.parsed?{success:!0,data:F.parsed}:{success:!1,data:{}}},[g]),C=u.useCallback(F=>{const R=F;if(R==="json"&&m==="list"){const z=Uu(f);b(Object.keys(z).length>0?JSON.stringify(z,null,2):""),y(null)}else if(R==="list"&&m==="json"){const z=Bu(g);z.valid&&z.parsed&&(p(Lu(z.parsed)),y(null))}x(R)},[m,f,g]),w=u.useCallback(()=>{const F={id:Qg(),key:"",value:"",type:"string"},R=[...f,F];p(R)},[f]),L=u.useCallback(F=>{const R=f.filter(z=>z.id!==F);p(R),r(Uu(R))},[f,r]),O=u.useCallback((F,R,z)=>{const V=f.map($=>{if($.id!==F)return $;if(R==="type"){const k=z;let M;return k==="boolean"?M=$.value==="true"||$.value===!0:k==="number"?M=typeof $.value=="number"?$.value:parseFloat(String($.value))||0:M=String($.value),{...$,type:k,value:M}}else return R==="value"?{...$,value:Pw(z,$.type)}:{...$,[R]:z}});p(V),r(Uu(V))},[f,r]),U=u.useCallback(F=>{b(F);const R=Bu(F);R.valid&&R.parsed?(y(null),r(R.parsed)):y(R.error||"JSON ")},[r]);return e.jsxs("div",{className:H("space-y-3",i),children:[e.jsx(S,{className:"text-sm font-medium",children:""}),e.jsxs(Ca,{value:m,onValueChange:C,className:"w-full",children:[e.jsxs(ma,{className:"h-8 p-0.5 bg-muted/60",children:[e.jsx(as,{value:"list",className:"h-7 px-3 text-xs data-[state=active]:bg-background data-[state=active]:shadow-sm",children:""}),e.jsx(as,{value:"json",className:"h-7 px-3 text-xs data-[state=active]:bg-background data-[state=active]:shadow-sm",children:"JSON"})]}),e.jsxs(Ms,{value:"list",className:"mt-3 space-y-2",children:[f.length===0?e.jsx("div",{className:"text-sm text-muted-foreground text-center py-4 border border-dashed rounded-md",children:d}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"grid grid-cols-[1fr_1fr_90px_32px] gap-2 text-xs text-muted-foreground px-1",children:[e.jsx("span",{children:""}),e.jsx("span",{children:""}),e.jsx("span",{children:""}),e.jsx("span",{})]}),f.map(F=>e.jsxs("div",{className:"grid grid-cols-[1fr_1fr_90px_32px] gap-2 items-center",children:[e.jsx(ie,{value:F.key,onChange:R=>O(F.id,"key",R.target.value),placeholder:"key",className:"h-8 text-sm"}),F.type==="boolean"?e.jsxs("div",{className:"flex items-center h-8 px-3 border rounded-md bg-background",children:[e.jsx(Fe,{checked:F.value===!0,onCheckedChange:R=>O(F.id,"value",String(R))}),e.jsx("span",{className:"ml-2 text-sm text-muted-foreground",children:F.value?"true":"false"})]}):e.jsx(ie,{type:F.type==="number"?"number":"text",value:F.value,onChange:R=>O(F.id,"value",R.target.value),placeholder:"value",className:"h-8 text-sm",step:F.type==="number"?"any":void 0}),e.jsxs(He,{value:F.type,onValueChange:R=>O(F.id,"type",R),children:[e.jsx(Ue,{className:"h-8 text-xs",children:e.jsx(qe,{})}),e.jsxs(Be,{children:[e.jsx(se,{value:"string",children:""}),e.jsx(se,{value:"number",children:""}),e.jsx(se,{value:"boolean",children:""})]})]}),e.jsx(_,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8 text-muted-foreground hover:text-destructive",onClick:()=>L(F.id),children:e.jsx(ss,{className:"h-4 w-4"})})]},F.id))]}),e.jsxs(_,{type:"button",variant:"outline",size:"sm",className:"w-full h-8",onClick:w,children:[e.jsx(ht,{className:"h-4 w-4 mr-1"}),""]})]}),e.jsx(Ms,{value:"json",className:"mt-3",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:""}),j?e.jsxs("div",{className:"flex items-center gap-1 text-xs text-destructive",children:[e.jsx(qt,{className:"h-3 w-3"}),e.jsx("span",{className:"truncate max-w-[150px]",children:j})]}):g.trim()&&e.jsxs("div",{className:"flex items-center gap-1 text-xs text-green-600 dark:text-green-400",children:[e.jsx(Wt,{className:"h-3 w-3"}),e.jsx("span",{children:""})]})]}),e.jsx(Ys,{value:g,onChange:F=>U(F.target.value),placeholder:`{
  "key": "value"
}`,className:H("font-mono text-sm min-h-[140px] h-[140px] resize-y flex-1",j&&"border-destructive focus-visible:ring-destructive")}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" stringnumberboolean "})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:""}),e.jsx("div",{className:"min-h-[140px] h-[140px] flex-1 rounded-md border bg-muted/30 p-3 overflow-auto",children:N.success&&Object.keys(N.data).length>0?e.jsx("div",{className:"space-y-2",children:Object.entries(N.data).map(([F,R])=>{const z=Ig(R);return e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("code",{className:"px-1.5 py-0.5 bg-background rounded text-xs font-medium",children:F}),e.jsx("span",{className:"text-muted-foreground",children:"="}),e.jsx("span",{className:H("font-mono",z==="boolean"&&(R?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),z==="number"&&"text-blue-600 dark:text-blue-400",z==="string"&&"text-amber-600 dark:text-amber-400"),children:z==="string"?`"${R}"`:String(R)}),e.jsx(Ie,{variant:"secondary",className:H("h-5 text-[10px] px-1.5",Ww(z)),children:Zw(z)})]},F)})}):N.success?e.jsx("div",{className:"flex items-center justify-center h-full text-sm text-muted-foreground",children:""}):e.jsx("div",{className:"flex items-center justify-center h-full text-sm text-destructive",children:"JSON "})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})]})})]})]})}function s1({value:n,label:r,onRemove:i}){const{attributes:d,listeners:m,setNodeRef:x,transform:f,transition:p,isDragging:g}=Vy({id:n}),b={transform:Qy.Transform.toString(f),transition:p,opacity:g?.5:1},j=N=>{N.preventDefault(),N.stopPropagation(),i(n)},y=N=>{N.stopPropagation()};return e.jsx("div",{ref:x,style:b,className:H("inline-flex items-center gap-1",g&&"shadow-lg"),children:e.jsxs(Ie,{variant:"secondary",className:"cursor-move hover:bg-secondary/80 flex items-center gap-1",children:[e.jsx("div",{...d,...m,className:"cursor-grab active:cursor-grabbing flex items-center",children:e.jsx(iy,{className:"h-3 w-3 text-muted-foreground"})}),e.jsx("span",{children:r}),e.jsx("button",{type:"button",className:"ml-1 rounded-sm hover:bg-destructive/20 focus:outline-none focus:ring-1 focus:ring-destructive",onClick:j,onPointerDown:y,onMouseDown:N=>N.stopPropagation(),children:e.jsx(hl,{className:"h-3 w-3 cursor-pointer hover:text-destructive",strokeWidth:2,fill:"none"})})]})})}function t1({options:n,selected:r,onChange:i,placeholder:d="...",emptyText:m="",className:x}){const[f,p]=u.useState(!1),g=Ry(tp(Fy,{activationConstraint:{distance:8}}),tp($y,{coordinateGetter:Gy})),b=N=>{r.includes(N)?i(r.filter(C=>C!==N)):i([...r,N])},j=N=>{i(r.filter(C=>C!==N))},y=N=>{const{active:C,over:w}=N;if(w&&C.id!==w.id){const L=r.indexOf(C.id),O=r.indexOf(w.id);i(qy(r,L,O))}};return e.jsxs(Qa,{open:f,onOpenChange:p,children:[e.jsx(Ia,{asChild:!0,children:e.jsxs(_,{variant:"outline",role:"combobox","aria-expanded":f,className:H("w-full justify-between min-h-10 h-auto",x),children:[e.jsx(Ly,{sensors:g,collisionDetection:Uy,onDragEnd:y,children:e.jsx(By,{items:r,strategy:Hy,children:e.jsx("div",{className:"flex gap-1 flex-wrap flex-1",children:r.length===0?e.jsx("span",{className:"text-muted-foreground",children:d}):r.map(N=>{const C=n.find(w=>w.value===N);return e.jsx(s1,{value:N,label:C?.label||N,onRemove:j},N)})})})}),e.jsx(Ju,{className:"ml-2 h-4 w-4 shrink-0 opacity-50",strokeWidth:2,fill:"none"})]})}),e.jsx(Ua,{className:"w-full p-0",align:"start",children:e.jsxs(uo,{children:[e.jsx(mo,{placeholder:"...",className:"h-9"}),e.jsxs(xo,{children:[e.jsx(ho,{children:m}),e.jsx(vi,{children:n.map(N=>{const C=r.includes(N.value);return e.jsxs(bi,{value:N.value,onSelect:()=>b(N.value),children:[e.jsx("div",{className:H("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",C?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"),children:e.jsx(Wt,{className:"h-3 w-3",strokeWidth:2,fill:"none"})}),e.jsx("span",{children:N.label})]},N.value)})})]})]})})]})}const Da=Tt.memo(function({title:r,description:i,taskConfig:d,modelNames:m,onChange:x,hideTemperature:f=!1,hideMaxTokens:p=!1,dataTour:g}){const b=j=>{x("model_list",j)};return e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-base sm:text-lg",children:r}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mt-1",children:i})]}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-2","data-tour":g,children:[e.jsx(S,{children:""}),e.jsx(t1,{options:m.map(j=>({label:j,value:j})),selected:d.model_list||[],onChange:b,placeholder:"...",emptyText:""})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[!f&&e.jsxs("div",{className:"grid gap-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(S,{children:""}),e.jsx(ie,{type:"number",step:"0.1",min:"0",max:"1",value:d.temperature??.3,onChange:j=>{const y=parseFloat(j.target.value);!isNaN(y)&&y>=0&&y<=1&&x("temperature",y)},className:"w-20 h-8 text-sm"})]}),e.jsx(Sa,{value:[d.temperature??.3],onValueChange:j=>x("temperature",j[0]),min:0,max:1,step:.1,className:"w-full"})]}),!p&&e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{children:" Token"}),e.jsx(ie,{type:"number",step:"1",min:"1",value:d.max_tokens??1024,onChange:j=>x("max_tokens",parseInt(j.target.value))})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(S,{children:" ()"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:""})]}),e.jsx(ie,{type:"number",step:"1",min:"1",value:d.slow_threshold??15,onChange:j=>{const y=parseInt(j.target.value);!isNaN(y)&&y>=1&&x("slow_threshold",y)},placeholder:"15"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})]})]})}),a1=Tt.memo(function({paginatedModels:r,allModels:i,onEdit:d,onDelete:m,isModelUsed:x,searchQuery:f}){return r.length===0?e.jsx("div",{className:"md:hidden text-center text-muted-foreground py-8 rounded-lg border bg-card",children:f?"":""}):e.jsx("div",{className:"md:hidden space-y-3",children:r.map((p,g)=>{const b=i.findIndex(y=>y===p),j=x(p.name);return e.jsxs("div",{className:"rounded-lg border bg-card p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"font-semibold text-base",children:p.name}),e.jsx(Ie,{variant:j?"default":"secondary",className:j?"bg-green-600 hover:bg-green-700":"",children:j?"":""})]}),e.jsx("p",{className:"text-xs text-muted-foreground break-all",title:p.model_identifier,children:p.model_identifier})]}),e.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[e.jsxs(_,{variant:"default",size:"sm",onClick:()=>d(p,b),children:[e.jsx(hn,{className:"h-4 w-4 mr-1",strokeWidth:2,fill:"none"}),""]}),e.jsxs(_,{size:"sm",onClick:()=>m(b),className:"bg-red-600 hover:bg-red-700 text-white",children:[e.jsx(ss,{className:"h-4 w-4 mr-1",strokeWidth:2,fill:"none"}),""]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground text-xs",children:""}),e.jsx("p",{className:"font-medium",children:p.api_provider})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground text-xs",children:""}),e.jsx("p",{className:"font-medium",children:p.temperature!=null?p.temperature:e.jsx("span",{className:"text-muted-foreground",children:""})})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground text-xs",children:""}),e.jsxs("p",{className:"font-medium",children:["",p.price_in,"/M"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground text-xs",children:""}),e.jsxs("p",{className:"font-medium",children:["",p.price_out,"/M"]})]})]})]},g)})})}),l1=Tt.memo(function({paginatedModels:r,allModels:i,filteredModels:d,selectedModels:m,onEdit:x,onDelete:f,onToggleSelection:p,onToggleSelectAll:g,isModelUsed:b,searchQuery:j}){return e.jsx("div",{className:"hidden md:block rounded-lg border bg-card overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(pn,{children:[e.jsx(gn,{children:e.jsxs(ft,{children:[e.jsx(Pe,{className:"w-12",children:e.jsx(pt,{checked:m.size===d.length&&d.length>0,onCheckedChange:g})}),e.jsx(Pe,{className:"w-24",children:""}),e.jsx(Pe,{children:""}),e.jsx(Pe,{children:""}),e.jsx(Pe,{children:""}),e.jsx(Pe,{className:"text-center",children:""}),e.jsx(Pe,{className:"text-right",children:""}),e.jsx(Pe,{className:"text-right",children:""}),e.jsx(Pe,{className:"text-right",children:""})]})}),e.jsx(jn,{children:r.length===0?e.jsx(ft,{children:e.jsx(Qe,{colSpan:9,className:"text-center text-muted-foreground py-8",children:j?"":""})}):r.map((y,N)=>{const C=i.findIndex(L=>L===y),w=b(y.name);return e.jsxs(ft,{children:[e.jsx(Qe,{children:e.jsx(pt,{checked:m.has(C),onCheckedChange:()=>p(C)})}),e.jsx(Qe,{children:e.jsx(Ie,{variant:w?"default":"secondary",className:w?"bg-green-600 hover:bg-green-700":"",children:w?"":""})}),e.jsx(Qe,{className:"font-medium",children:y.name}),e.jsx(Qe,{className:"max-w-xs truncate",title:y.model_identifier,children:y.model_identifier}),e.jsx(Qe,{children:y.api_provider}),e.jsx(Qe,{className:"text-center",children:y.temperature!=null?y.temperature:e.jsx("span",{className:"text-muted-foreground",children:"-"})}),e.jsxs(Qe,{className:"text-right",children:["",y.price_in,"/M"]}),e.jsxs(Qe,{className:"text-right",children:["",y.price_out,"/M"]}),e.jsx(Qe,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsxs(_,{variant:"default",size:"sm",onClick:()=>x(y,C),children:[e.jsx(hn,{className:"h-4 w-4 mr-1",strokeWidth:2,fill:"none"}),""]}),e.jsxs(_,{size:"sm",onClick:()=>f(C),className:"bg-red-600 hover:bg-red-700 text-white",children:[e.jsx(ss,{className:"h-4 w-4 mr-1",strokeWidth:2,fill:"none"}),""]})]})})]},N)})})]})})})}),n1=300*1e3,pp=new Map,r1=[10,20,50,100],i1=Tt.memo(function({page:r,pageSize:i,totalItems:d,jumpToPage:m,onPageChange:x,onPageSizeChange:f,onJumpToPageChange:p,onJumpToPage:g,onSelectionClear:b}){const j=Math.ceil(d/i),y=C=>{f(parseInt(C)),x(1),b?.()},N=C=>{C.key==="Enter"&&g()};return d===0?null:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{htmlFor:"page-size-model",className:"text-sm whitespace-nowrap",children:""}),e.jsxs(He,{value:i.toString(),onValueChange:y,children:[e.jsx(Ue,{id:"page-size-model",className:"w-20",children:e.jsx(qe,{})}),e.jsx(Be,{children:r1.map(C=>e.jsx(se,{value:C.toString(),children:C},C))})]}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[" ",(r-1)*i+1," "," ",Math.min(r*i,d),"  ",d," "]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{variant:"outline",size:"sm",onClick:()=>x(1),disabled:r===1,className:"hidden sm:flex",children:e.jsx(mr,{className:"h-4 w-4"})}),e.jsxs(_,{variant:"outline",size:"sm",onClick:()=>x(Math.max(1,r-1)),disabled:r===1,children:[e.jsx(pl,{className:"h-4 w-4 sm:mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{type:"number",value:m,onChange:C=>p(C.target.value),onKeyDown:N,placeholder:r.toString(),className:"w-16 h-8 text-center",min:1,max:j}),e.jsx(_,{variant:"outline",size:"sm",onClick:g,disabled:!m,className:"h-8",children:""})]}),e.jsxs(_,{variant:"outline",size:"sm",onClick:()=>x(r+1),disabled:r>=j,children:[e.jsx("span",{className:"hidden sm:inline",children:""}),e.jsx(Ya,{className:"h-4 w-4 sm:ml-1"})]}),e.jsx(_,{variant:"outline",size:"sm",onClick:()=>x(j),disabled:r>=j,className:"hidden sm:flex",children:e.jsx(xr,{className:"h-4 w-4"})})]})]})});function c1(n){const{models:r,taskConfig:i,debounceMs:d=2e3,onSavingChange:m,onUnsavedChange:x}=n,f=u.useRef(null),p=u.useRef(null),g=u.useRef(!0),b=u.useCallback(()=>{f.current&&(clearTimeout(f.current),f.current=null),p.current&&(clearTimeout(p.current),p.current=null)},[]),j=u.useCallback(C=>{const w={model_identifier:C.model_identifier,name:C.name,api_provider:C.api_provider,price_in:C.price_in??0,price_out:C.price_out??0,force_stream_mode:C.force_stream_mode??!1,extra_params:C.extra_params??{}};return C.temperature!=null&&(w.temperature=C.temperature),C.max_tokens!=null&&(w.max_tokens=C.max_tokens),w},[]),y=u.useCallback(async C=>{try{m?.(!0);const w=C.map(j);await Iu("models",w),x?.(!1)}catch(w){console.error(":",w),x?.(!0)}finally{m?.(!1)}},[m,x,j]),N=u.useCallback(async C=>{try{m?.(!0),await Iu("model_task_config",C),x?.(!1)}catch(w){console.error(":",w),x?.(!0)}finally{m?.(!1)}},[m,x]);return u.useEffect(()=>{if(!g.current)return x?.(!0),f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{y(r)},d),()=>{f.current&&clearTimeout(f.current)}},[r,y,d,x]),u.useEffect(()=>{if(!(g.current||!i))return x?.(!0),p.current&&clearTimeout(p.current),p.current=setTimeout(()=>{N(i)},d),()=>{p.current&&clearTimeout(p.current)}},[i,N,d,x]),u.useEffect(()=>()=>{b()},[b]),{clearTimers:b,initialLoadRef:g}}function o1(n={}){const{onCloseEditDialog:r}=n,i=Ta(),{registerTour:d,startTour:m,state:x,goToStep:f}=tm(),p=u.useRef(x.stepIndex);return u.useEffect(()=>{d($a,Fg)},[d]),u.useEffect(()=>{if(x.activeTourId===$a&&x.isRunning){const b=Vg[x.stepIndex];b&&!window.location.pathname.endsWith(b.replace("/config/",""))&&i({to:b})}},[x.stepIndex,x.activeTourId,x.isRunning,i]),u.useEffect(()=>{if(x.activeTourId===$a&&x.isRunning){const b=p.current,j=x.stepIndex;b>=12&&b<=17&&j<12&&r?.(),p.current=j}},[x.stepIndex,x.activeTourId,x.isRunning,r]),u.useEffect(()=>{if(x.activeTourId!==$a||!x.isRunning)return;const b=j=>{const y=j.target,N=x.stepIndex;N===2&&y.closest('[data-tour="add-provider-button"]')?setTimeout(()=>f(3),300):N===9&&y.closest('[data-tour="provider-cancel-button"]')?setTimeout(()=>f(10),300):N===11&&y.closest('[data-tour="add-model-button"]')?setTimeout(()=>f(12),300):N===17&&y.closest('[data-tour="model-cancel-button"]')?setTimeout(()=>f(18),300):N===18&&y.closest('[data-tour="tasks-tab-trigger"]')&&setTimeout(()=>f(19),300)};return document.addEventListener("click",b,!0),()=>document.removeEventListener("click",b,!0)},[x,f]),{startTour:u.useCallback(()=>{m($a)},[m]),isRunning:x.isRunning&&x.activeTourId===$a,stepIndex:x.stepIndex}}function d1(n){const{getProviderConfig:r}=n,[i,d]=u.useState([]),[m,x]=u.useState(!1),[f,p]=u.useState(null),[g,b]=u.useState(null),j=u.useCallback(()=>{d([]),p(null),b(null)},[]),y=u.useCallback(async(N,C=!1)=>{const w=r(N);if(!w?.base_url){d([]),b(null),p('""');return}if(!w.api_key){d([]),b(null),p(' API Key""');return}const L=Kw(w.base_url);if(b(L),!L?.modelFetcher){d([]),p(null);return}const O=`${N}:${w.base_url}`,U=pp.get(O);if(!C&&U&&Date.now()-U.timestamp<n1){d(U.models),p(null);return}x(!0),p(null);try{const F=await zw(N,L.modelFetcher.parser,L.modelFetcher.endpoint);d(F),pp.set(O,{models:F,timestamp:Date.now()})}catch(F){console.error(":",F);const R=F.message||"";R.includes("")||R.includes("")||R.includes("API Key")?p('API Key ""'):R.includes("")?p(" API Key "):R.includes("timeout")||R.includes("")?p(""):R.includes("")?p(""):p(R),d([])}finally{x(!1)}},[r]);return{availableModels:i,fetchingModels:m,modelFetchError:f,matchedTemplate:g,fetchModelsForProvider:y,clearModels:j}}function u1(){const[n,r]=u.useState([]),[i,d]=u.useState([]),[m,x]=u.useState([]),[f,p]=u.useState([]),[g,b]=u.useState(null),[j,y]=u.useState(!0),[N,C]=u.useState(!1),[w,L]=u.useState(!1),[O,U]=u.useState(!1),[F,R]=u.useState(!1),[z,V]=u.useState(!1),[$,k]=u.useState(!1),[M,ee]=u.useState(null),[ge,ve]=u.useState(null),[je,be]=u.useState(!1),[ye,Ne]=u.useState(null),[D,X]=u.useState(""),[J,ce]=u.useState(new Set),[T,re]=u.useState(!1),[he,ke]=u.useState(1),[Ce,ze]=u.useState(20),[fe,te]=u.useState(""),[ae,q]=u.useState(!1),[K,Me]=u.useState({}),{toast:We}=Qs(),{startTour:E,isRunning:xe}=o1({onCloseEditDialog:()=>k(!1)}),{clearTimers:Ke,initialLoadRef:we}=c1({models:n,taskConfig:g,onSavingChange:L,onUnsavedChange:U}),Q=u.useCallback(async()=>{try{y(!0);const le=await Fl(),ue=le.models||[];r(ue),p(ue.map(zt=>zt.name));const bs=le.api_providers||[];d(bs.map(zt=>zt.name)),x(bs),b(le.model_task_config||null),U(!1),we.current=!1}catch(le){console.error(":",le)}finally{y(!1)}},[we]);u.useEffect(()=>{Q()},[Q]);const _e=u.useCallback(le=>m.find(ue=>ue.name===le),[m]),{availableModels:Re,fetchingModels:Os,modelFetchError:Ts,matchedTemplate:gt,fetchModelsForProvider:gs,clearModels:Is}=d1({getProviderConfig:_e});u.useEffect(()=>{$&&M?.api_provider&&gs(M.api_provider)},[$,M?.api_provider,gs]);const Y=async()=>{try{R(!0),oo().catch(()=>{}),V(!0)}catch(le){console.error(":",le),V(!1),We({title:"",description:"",variant:"destructive"}),R(!1)}},Ge=le=>{const ue={model_identifier:le.model_identifier,name:le.name,api_provider:le.api_provider,price_in:le.price_in??0,price_out:le.price_out??0,force_stream_mode:le.force_stream_mode??!1,extra_params:le.extra_params??{}};return le.temperature!=null&&(ue.temperature=le.temperature),le.max_tokens!=null&&(ue.max_tokens=le.max_tokens),ue},Oe=async()=>{try{C(!0),Ke();const le=await Fl();le.models=n.map(Ge),le.model_task_config=g,await fi(le),U(!1),We({title:"",description:"..."}),await Y()}catch(le){console.error(":",le),We({title:"",description:le.message,variant:"destructive"}),C(!1)}},Xe=()=>{localStorage.removeItem("access-token"),window.location.href="/auth"},Gs=()=>{V(!1),R(!1),We({title:"",description:"",variant:"destructive"})},Je=async()=>{try{C(!0),Ke();const le=await Fl();le.models=n.map(Ge),le.model_task_config=g,await fi(le),U(!1),We({title:"",description:""}),await Q()}catch(le){console.error(":",le),We({title:"",description:le.message,variant:"destructive"})}finally{C(!1)}},Zs=(le,ue)=>{Me({}),ee(le||{model_identifier:"",name:"",api_provider:i[0]||"",price_in:0,price_out:0,temperature:null,max_tokens:null,force_stream_mode:!1,extra_params:{}}),ve(ue),k(!0)},Se=()=>{if(!M)return;const le={};if(M.name?.trim()||(le.name=""),M.api_provider?.trim()||(le.api_provider=" API "),M.model_identifier?.trim()||(le.model_identifier=""),Object.keys(le).length>0){Me(le);return}Me({});const ue={model_identifier:M.model_identifier,name:M.name,api_provider:M.api_provider,price_in:M.price_in??0,price_out:M.price_out??0,force_stream_mode:M.force_stream_mode??!1,extra_params:M.extra_params??{}};M.temperature!=null&&(ue.temperature=M.temperature),M.max_tokens!=null&&(ue.max_tokens=M.max_tokens);let bs,zt=null;if(ge!==null?(zt=n[ge].name,bs=[...n],bs[ge]=ue):bs=[...n,ue],r(bs),p(bs.map(Mt=>Mt.name)),zt&&zt!==ue.name&&g){const Mt=I=>I.map(pe=>pe===zt?ue.name:pe);b({...g,utils:{...g.utils,model_list:Mt(g.utils?.model_list||[])},utils_small:{...g.utils_small,model_list:Mt(g.utils_small?.model_list||[])},tool_use:{...g.tool_use,model_list:Mt(g.tool_use?.model_list||[])},replyer:{...g.replyer,model_list:Mt(g.replyer?.model_list||[])},planner:{...g.planner,model_list:Mt(g.planner?.model_list||[])},vlm:{...g.vlm,model_list:Mt(g.vlm?.model_list||[])},voice:{...g.voice,model_list:Mt(g.voice?.model_list||[])},embedding:{...g.embedding,model_list:Mt(g.embedding?.model_list||[])},lpmm_entity_extract:{...g.lpmm_entity_extract,model_list:Mt(g.lpmm_entity_extract?.model_list||[])},lpmm_rdf_build:{...g.lpmm_rdf_build,model_list:Mt(g.lpmm_rdf_build?.model_list||[])},lpmm_qa:{...g.lpmm_qa,model_list:Mt(g.lpmm_qa?.model_list||[])}})}k(!1),ee(null),ve(null)},Es=le=>{if(!le&&M){const ue={...M,price_in:M.price_in??0,price_out:M.price_out??0};ee(ue)}k(le)},Ae=le=>{Ne(le),be(!0)},ws=()=>{if(ye!==null){const le=n.filter((ue,bs)=>bs!==ye);r(le),p(le.map(ue=>ue.name)),We({title:"",description:""})}be(!1),Ne(null)},_s=le=>{const ue=new Set(J);ue.has(le)?ue.delete(le):ue.add(le),ce(ue)},Et=()=>{if(J.size===nt.length)ce(new Set);else{const le=nt.map((ue,bs)=>n.findIndex(zt=>zt===nt[bs]));ce(new Set(le))}},Ks=()=>{if(J.size===0){We({title:"",description:"",variant:"default"});return}re(!0)},jt=()=>{const le=n.filter((ue,bs)=>!J.has(bs));r(le),p(le.map(ue=>ue.name)),ce(new Set),re(!1),We({title:"",description:` ${J.size} `})},Xs=(le,ue,bs)=>{g&&b({...g,[le]:{...g[le],[ue]:bs}})},nt=n.filter(le=>{if(!D)return!0;const ue=D.toLowerCase();return le.name.toLowerCase().includes(ue)||le.model_identifier.toLowerCase().includes(ue)||le.api_provider.toLowerCase().includes(ue)}),jl=Math.ceil(nt.length/Ce),xa=nt.slice((he-1)*Ce,he*Ce),vt=()=>{const le=parseInt(fe);le>=1&&le<=jl&&(ke(le),te(""))},$t=le=>g?[g.utils?.model_list||[],g.utils_small?.model_list||[],g.tool_use?.model_list||[],g.replyer?.model_list||[],g.planner?.model_list||[],g.vlm?.model_list||[],g.voice?.model_list||[],g.embedding?.model_list||[],g.lpmm_entity_extract?.model_list||[],g.lpmm_rdf_build?.model_list||[],g.lpmm_qa?.model_list||[]].some(bs=>bs.includes(le)):!1;return j?e.jsx(Ze,{className:"h-full",children:e.jsx("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("p",{className:"text-muted-foreground",children:"..."})})})}):e.jsx(Ze,{className:"h-full",children:e.jsxs("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:""}),e.jsx("p",{className:"text-muted-foreground mt-1 sm:mt-2 text-sm sm:text-base",children:""})]}),e.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[e.jsxs(_,{onClick:Je,disabled:N||w||!O||F,size:"sm",variant:"outline",className:"flex-1 sm:flex-none sm:min-w-[120px]",children:[e.jsx(yi,{className:"mr-2 h-4 w-4",strokeWidth:2,fill:"none"}),N?"...":w?"...":O?"":""]}),e.jsxs(xs,{children:[e.jsx(dt,{asChild:!0,children:e.jsxs(_,{disabled:N||w||F,size:"sm",className:"flex-1 sm:flex-none sm:min-w-[120px]",children:[e.jsx(Ni,{className:"mr-2 h-4 w-4"}),F?"...":O?"":""]})}),e.jsxs(rs,{children:[e.jsxs(is,{children:[e.jsx(os,{children:""}),e.jsx(ds,{asChild:!0,children:e.jsx("div",{children:e.jsx("p",{children:O?",":","})})})]}),e.jsxs(cs,{children:[e.jsx(ms,{children:""}),e.jsx(us,{onClick:O?Oe:Y,children:O?"":""})]})]})]})]})]}),e.jsxs(ea,{children:[e.jsx(Va,{className:"h-4 w-4"}),e.jsxs(sa,{children:["",e.jsx("strong",{children:""}),'""']})]}),e.jsxs(ea,{className:"hidden lg:flex border-primary/30 bg-primary/5 cursor-pointer hover:bg-primary/10 transition-colors",onClick:E,children:[e.jsx(cy,{className:"h-4 w-4 text-primary"}),e.jsxs(sa,{className:"flex items-center justify-between",children:[e.jsxs("span",{children:[e.jsx("strong",{className:"text-primary",children:""}),""]}),e.jsx(_,{variant:"outline",size:"sm",className:"ml-4 shrink-0",children:""})]})]}),e.jsxs(Ca,{defaultValue:"models",className:"w-full",children:[e.jsxs(ma,{className:"grid w-full max-w-full sm:max-w-md grid-cols-2",children:[e.jsx(as,{value:"models",children:""}),e.jsx(as,{value:"tasks","data-tour":"tasks-tab-trigger",children:""})]}),e.jsxs(Ms,{value:"models",className:"space-y-4 mt-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:""}),e.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[J.size>0&&e.jsxs(_,{onClick:Ks,size:"sm",variant:"destructive",className:"w-full sm:w-auto",children:[e.jsx(ss,{className:"mr-2 h-4 w-4",strokeWidth:2,fill:"none"})," (",J.size,")"]}),e.jsxs(_,{onClick:()=>Zs(null,null),size:"sm",variant:"outline",className:"w-full sm:w-auto","data-tour":"add-model-button",children:[e.jsx(ht,{className:"mr-2 h-4 w-4",strokeWidth:2,fill:"none"}),""]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2",children:[e.jsxs("div",{className:"relative w-full sm:flex-1 sm:max-w-sm",children:[e.jsx(Gt,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(ie,{placeholder:"...",value:D,onChange:le=>X(le.target.value),className:"pl-9"})]}),D&&e.jsxs("p",{className:"text-sm text-muted-foreground whitespace-nowrap",children:[" ",nt.length," "]})]}),e.jsx(a1,{paginatedModels:xa,allModels:n,onEdit:Zs,onDelete:Ae,isModelUsed:$t,searchQuery:D}),e.jsx(l1,{paginatedModels:xa,allModels:n,filteredModels:nt,selectedModels:J,onEdit:Zs,onDelete:Ae,onToggleSelection:_s,onToggleSelectAll:Et,isModelUsed:$t,searchQuery:D}),e.jsx(i1,{page:he,pageSize:Ce,totalItems:nt.length,jumpToPage:fe,onPageChange:ke,onPageSizeChange:ze,onJumpToPageChange:te,onJumpToPage:vt,onSelectionClear:()=>ce(new Set)})]}),e.jsxs(Ms,{value:"tasks",className:"space-y-6 mt-0",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:""}),g&&e.jsxs("div",{className:"grid gap-4 sm:gap-6",children:[e.jsx(Da,{title:" (utils)",description:"",taskConfig:g.utils,modelNames:f,onChange:(le,ue)=>Xs("utils",le,ue),dataTour:"task-model-select"}),e.jsx(Da,{title:" (utils_small)",description:"",taskConfig:g.utils_small,modelNames:f,onChange:(le,ue)=>Xs("utils_small",le,ue)}),e.jsx(Da,{title:" (tool_use)",description:"",taskConfig:g.tool_use,modelNames:f,onChange:(le,ue)=>Xs("tool_use",le,ue)}),e.jsx(Da,{title:" (replyer)",description:"",taskConfig:g.replyer,modelNames:f,onChange:(le,ue)=>Xs("replyer",le,ue)}),e.jsx(Da,{title:" (planner)",description:"",taskConfig:g.planner,modelNames:f,onChange:(le,ue)=>Xs("planner",le,ue)}),e.jsx(Da,{title:" (vlm)",description:"",taskConfig:g.vlm,modelNames:f,onChange:(le,ue)=>Xs("vlm",le,ue),hideTemperature:!0}),e.jsx(Da,{title:" (voice)",description:"",taskConfig:g.voice,modelNames:f,onChange:(le,ue)=>Xs("voice",le,ue),hideTemperature:!0,hideMaxTokens:!0}),e.jsx(Da,{title:" (embedding)",description:"",taskConfig:g.embedding,modelNames:f,onChange:(le,ue)=>Xs("embedding",le,ue),hideTemperature:!0,hideMaxTokens:!0}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"LPMM "}),e.jsx(Da,{title:" (lpmm_entity_extract)",description:"",taskConfig:g.lpmm_entity_extract,modelNames:f,onChange:(le,ue)=>Xs("lpmm_entity_extract",le,ue)}),e.jsx(Da,{title:"RDF  (lpmm_rdf_build)",description:"",taskConfig:g.lpmm_rdf_build,modelNames:f,onChange:(le,ue)=>Xs("lpmm_rdf_build",le,ue)}),e.jsx(Da,{title:" (lpmm_qa)",description:"",taskConfig:g.lpmm_qa,modelNames:f,onChange:(le,ue)=>Xs("lpmm_qa",le,ue)})]})]})]})]}),e.jsx(Fs,{open:$,onOpenChange:Es,children:e.jsxs(Bs,{className:"max-w-[95vw] sm:max-w-2xl max-h-[90vh] overflow-y-auto","data-tour":"model-dialog",preventOutsideClose:xe,children:[e.jsxs(Hs,{children:[e.jsx(qs,{children:ge!==null?"":""}),e.jsx(et,{children:""})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2","data-tour":"model-name-input",children:[e.jsx(S,{htmlFor:"model_name",className:K.name?"text-destructive":"",children:" *"}),e.jsx(ie,{id:"model_name",value:M?.name||"",onChange:le=>{ee(ue=>ue?{...ue,name:le.target.value}:null),K.name&&Me(ue=>({...ue,name:void 0}))},placeholder:": qwen3-30b",className:K.name?"border-destructive focus-visible:ring-destructive":""}),K.name?e.jsx("p",{className:"text-xs text-destructive",children:K.name}):e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"grid gap-2","data-tour":"model-provider-select",children:[e.jsx(S,{htmlFor:"api_provider",className:K.api_provider?"text-destructive":"",children:"API  *"}),e.jsxs(He,{value:M?.api_provider||"",onValueChange:le=>{ee(ue=>ue?{...ue,api_provider:le}:null),Is(),K.api_provider&&Me(ue=>({...ue,api_provider:void 0}))},children:[e.jsx(Ue,{id:"api_provider",className:K.api_provider?"border-destructive focus-visible:ring-destructive":"",children:e.jsx(qe,{placeholder:""})}),e.jsx(Be,{children:i.map(le=>e.jsx(se,{value:le,children:le},le))})]}),K.api_provider&&e.jsx("p",{className:"text-xs text-destructive",children:K.api_provider})]}),e.jsxs("div",{className:"grid gap-2","data-tour":"model-identifier-input",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(S,{htmlFor:"model_identifier",className:K.model_identifier?"text-destructive":"",children:" *"}),gt?.modelFetcher&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ie,{variant:"secondary",className:"text-xs",children:gt.display_name}),e.jsx(_,{variant:"ghost",size:"sm",className:"h-6 px-2",onClick:()=>M?.api_provider&&gs(M.api_provider,!0),disabled:Os,children:Os?e.jsx(ut,{className:"h-3 w-3 animate-spin"}):e.jsx(Ht,{className:"h-3 w-3"})})]})]}),gt?.modelFetcher?e.jsxs(Qa,{open:ae,onOpenChange:q,children:[e.jsx(Ia,{asChild:!0,children:e.jsxs(_,{variant:"outline",role:"combobox","aria-expanded":ae,className:"w-full justify-between font-normal",disabled:Os||!!Ts,children:[Os?e.jsxs("span",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(ut,{className:"h-4 w-4 animate-spin"}),"..."]}):Ts?e.jsx("span",{className:"text-muted-foreground text-sm",children:""}):M?.model_identifier?e.jsx("span",{className:"truncate",children:M.model_identifier}):e.jsx("span",{className:"text-muted-foreground",children:"..."}),e.jsx(Ju,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsx(Ua,{className:"p-0",align:"start",style:{width:"var(--radix-popover-trigger-width)"},children:e.jsxs(uo,{children:[e.jsx(mo,{placeholder:"..."}),e.jsx(Ze,{className:"h-[300px]",children:e.jsxs(xo,{className:"max-h-none overflow-visible",children:[e.jsx(ho,{children:Ts?e.jsxs("div",{className:"py-4 px-2 text-center space-y-2",children:[e.jsx("p",{className:"text-sm text-destructive",children:Ts}),!Ts.includes("API Key")&&e.jsx(_,{variant:"link",size:"sm",onClick:()=>M?.api_provider&&gs(M.api_provider,!0),children:""})]}):""}),e.jsx(vi,{heading:"",children:Re.map(le=>e.jsxs(bi,{value:le.id,onSelect:()=>{ee(ue=>ue?{...ue,model_identifier:le.id}:null),q(!1)},children:[e.jsx(Wt,{className:`mr-2 h-4 w-4 ${M?.model_identifier===le.id?"opacity-100":"opacity-0"}`}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{children:le.id}),le.name!==le.id&&e.jsx("span",{className:"text-xs text-muted-foreground",children:le.name})]})]},le.id))}),e.jsx(vi,{heading:"",children:e.jsxs(bi,{value:"__manual_input__",onSelect:()=>{q(!1)},children:[e.jsx(hn,{className:"mr-2 h-4 w-4"}),"..."]})})]})})]})})]}):e.jsx(ie,{id:"model_identifier",value:M?.model_identifier||"",onChange:le=>{ee(ue=>ue?{...ue,model_identifier:le.target.value}:null),K.model_identifier&&Me(ue=>({...ue,model_identifier:void 0}))},placeholder:"Qwen/Qwen3-30B-A3B-Instruct-2507",className:K.model_identifier?"border-destructive focus-visible:ring-destructive":""}),K.model_identifier&&e.jsx("p",{className:"text-xs text-destructive",children:K.model_identifier}),Ts&&gt?.modelFetcher&&!K.model_identifier&&e.jsxs(ea,{variant:"destructive",className:"mt-2 py-2",children:[e.jsx(Va,{className:"h-4 w-4"}),e.jsx(sa,{className:"text-xs",children:Ts})]}),gt?.modelFetcher&&e.jsx(ie,{value:M?.model_identifier||"",onChange:le=>{ee(ue=>ue?{...ue,model_identifier:le.target.value}:null),K.model_identifier&&Me(ue=>({...ue,model_identifier:void 0}))},placeholder:"",className:`mt-2 ${K.model_identifier?"border-destructive focus-visible:ring-destructive":""}`}),!K.model_identifier&&e.jsx("p",{className:"text-xs text-muted-foreground",children:Ts?'"" API Key':gt?.modelFetcher?` ${gt.display_name}`:"API  ID"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"price_in",children:" (/M token)"}),e.jsx(ie,{id:"price_in",type:"number",step:"0.1",min:"0",value:M?.price_in??"",onChange:le=>{const ue=le.target.value===""?null:parseFloat(le.target.value);ee(bs=>bs?{...bs,price_in:ue}:null)},placeholder:": 0"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"price_out",children:" (/M token)"}),e.jsx(ie,{id:"price_out",type:"number",step:"0.1",min:"0",value:M?.price_out??"",onChange:le=>{const ue=le.target.value===""?null:parseFloat(le.target.value);ee(bs=>bs?{...bs,price_out:ue}:null)},placeholder:": 0"})]})]}),e.jsxs("div",{className:"rounded-lg border p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(S,{htmlFor:"enable_model_temperature",className:"cursor-pointer",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsx(Fe,{id:"enable_model_temperature",checked:M?.temperature!=null,onCheckedChange:le=>{ee(le?ue=>ue?{...ue,temperature:.5}:null:ue=>ue?{...ue,temperature:null}:null)}})]}),M?.temperature!=null&&e.jsxs("div",{className:"space-y-2 pt-2 border-t",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(S,{className:"text-sm",children:""}),e.jsx("span",{className:"text-sm font-medium tabular-nums",children:M.temperature.toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"0"}),e.jsx(Sa,{value:[M.temperature],onValueChange:le=>ee(ue=>ue?{...ue,temperature:le[0]}:null),min:0,max:1,step:.1,className:"flex-1"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"1"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"0.1-0.30.7-1.0"})]})]}),e.jsxs("div",{className:"rounded-lg border p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(S,{htmlFor:"enable_model_max_tokens",className:"cursor-pointer",children:" Token"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" Token "})]}),e.jsx(Fe,{id:"enable_model_max_tokens",checked:M?.max_tokens!=null,onCheckedChange:le=>{ee(le?ue=>ue?{...ue,max_tokens:2048}:null:ue=>ue?{...ue,max_tokens:null}:null)}})]}),M?.max_tokens!=null&&e.jsxs("div",{className:"space-y-2 pt-2 border-t",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(S,{className:"text-sm",children:" Token "}),e.jsx(ie,{type:"number",min:"1",max:"128000",value:M.max_tokens,onChange:le=>{const ue=parseInt(le.target.value);!isNaN(ue)&&ue>=1&&ee(bs=>bs?{...bs,max_tokens:ue}:null)},className:"w-28 h-8 text-sm"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" token "})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{id:"force_stream_mode",checked:M?.force_stream_mode||!1,onCheckedChange:le=>ee(ue=>ue?{...ue,force_stream_mode:le}:null)}),e.jsx(S,{htmlFor:"force_stream_mode",className:"cursor-pointer",children:""})]}),e.jsx(e1,{value:M?.extra_params||{},onChange:le=>ee(ue=>ue?{...ue,extra_params:le}:null),placeholder:" enable_thinkingtop_p ..."})]}),e.jsxs(at,{children:[e.jsx(_,{variant:"outline",onClick:()=>k(!1),"data-tour":"model-cancel-button",children:""}),e.jsx(_,{onClick:Se,"data-tour":"model-save-button",children:""})]})]})}),e.jsx(xs,{open:je,onOpenChange:be,children:e.jsxs(rs,{children:[e.jsxs(is,{children:[e.jsx(os,{children:""}),e.jsxs(ds,{children:[' "',ye!==null?n[ye]?.name:"",'"  ']})]}),e.jsxs(cs,{children:[e.jsx(ms,{children:""}),e.jsx(us,{onClick:ws,children:""})]})]})}),e.jsx(xs,{open:T,onOpenChange:re,children:e.jsxs(rs,{children:[e.jsxs(is,{children:[e.jsx(os,{children:""}),e.jsxs(ds,{children:[" ",J.size,"  "]})]}),e.jsxs(cs,{children:[e.jsx(ms,{children:""}),e.jsx(us,{onClick:jt,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:""})]})]})}),z&&e.jsx(sm,{onRestartComplete:Xe,onRestartFailed:Gs})]})})}const fo="/api/webui/config";async function m1(){const r=await(await Te(`${fo}/adapter-config/path`)).json();return!r.success||!r.path?null:{path:r.path,lastModified:r.lastModified}}async function gp(n){const i=await(await Te(`${fo}/adapter-config/path`,{method:"POST",headers:Vs(),body:JSON.stringify({path:n})})).json();if(!i.success)throw new Error(i.message||"")}async function jp(n){const i=await(await Te(`${fo}/adapter-config?path=${encodeURIComponent(n)}`)).json();if(!i.success)throw new Error("");return i.content}async function vp(n,r){const d=await(await Te(`${fo}/adapter-config`,{method:"POST",headers:Vs(),body:JSON.stringify({path:n,content:r})})).json();if(!d.success)throw new Error(d.message||"")}const da={inner:{version:"0.1.2"},nickname:{nickname:""},napcat_server:{host:"localhost",port:8095,token:"",heartbeat_interval:30},maibot_server:{host:"localhost",port:8e3},chat:{group_list_type:"whitelist",group_list:[],private_list_type:"whitelist",private_list:[],ban_user_id:[],ban_qq_bot:!1,enable_poke:!0},voice:{use_tts:!1},debug:{level:"INFO"}},Hu={oneclick:{name:"",description:"",path:"../MaiBot-Napcat-Adapter/config.toml",icon:Vl},docker:{name:"Docker",description:"Docker Compose ",path:"/MaiMBot/adapters-config/config.toml",icon:oy}};function x1(){const[n,r]=u.useState("upload"),[i,d]=u.useState(null),[m,x]=u.useState(""),[f,p]=u.useState(""),[g,b]=u.useState("oneclick"),[j,y]=u.useState(""),[N,C]=u.useState(!1),[w,L]=u.useState(!1),[O,U]=u.useState(!1),[F,R]=u.useState(!1),[z,V]=u.useState(null),$=u.useRef(null),{toast:k}=Qs(),M=u.useRef(null),ee=te=>{if(!te.trim())return{valid:!1,error:""};if(!te.toLowerCase().endsWith(".toml"))return{valid:!1,error:" .toml "};const ae=/^([a-zA-Z]:\\|\\\\[^\\]+\\[^\\]+\\).+\.toml$/i,q=/^(\/|~\/).+\.toml$/i,K=/^(\.{1,2}[\\/]|[^:\\/]).+\.toml$/i,Me=ae.test(te),We=q.test(te),E=K.test(te);return!Me&&!We&&!E?{valid:!1,error:""}:/[<>"|?*\x00-\x1F]/.test(te)?{valid:!1,error:""}:{valid:!0,error:""}},ge=te=>{if(p(te),te.trim()){const ae=ee(te);y(ae.error)}else y("")},ve=u.useCallback(async te=>{const ae=Hu[te];L(!0);try{const q=await jp(ae.path),K=he(q);d(K),b(te),p(ae.path),await gp(ae.path),k({title:"",description:`${ae.name}`})}catch(q){console.error(":",q),k({title:"",description:q instanceof Error?q.message:"",variant:"destructive"})}finally{L(!1)}},[k]),je=u.useCallback(async te=>{const ae=ee(te);if(!ae.valid){y(ae.error),k({title:"",description:ae.error,variant:"destructive"});return}y(""),L(!0);try{const q=await jp(te),K=he(q);d(K),p(te),await gp(te),k({title:"",description:""})}catch(q){console.error(":",q),k({title:"",description:q instanceof Error?q.message:"",variant:"destructive"})}finally{L(!1)}},[k]);u.useEffect(()=>{(async()=>{try{const ae=await m1();if(ae&&ae.path){p(ae.path);const q=Object.entries(Hu).find(([,K])=>K.path===ae.path);q?(r("preset"),b(q[0]),await ve(q[0])):(r("path"),await je(ae.path))}}catch(ae){console.error(":",ae)}})()},[je,ve]);const be=u.useCallback(te=>{n!=="path"&&n!=="preset"||!f||(M.current&&clearTimeout(M.current),M.current=setTimeout(async()=>{C(!0);try{const ae=ke(te);await vp(f,ae),k({title:"",description:""})}catch(ae){console.error(":",ae),k({title:"",description:ae instanceof Error?ae.message:"",variant:"destructive"})}finally{C(!1)}},1e3))},[n,f,k]),ye=async()=>{if(!i||!f)return;const te=ee(f);if(!te.valid){k({title:"",description:te.error,variant:"destructive"});return}C(!0);try{const ae=ke(i);await vp(f,ae),k({title:"",description:""})}catch(ae){console.error(":",ae),k({title:"",description:ae instanceof Error?ae.message:"",variant:"destructive"})}finally{C(!1)}},Ne=async()=>{f&&await je(f)},D=te=>{if(te!==n){if(i){V(te),U(!0);return}X(te)}},X=te=>{d(null),x(""),y(""),r(te),te==="preset"&&ve("oneclick"),k({title:"",description:{upload:"",path:"",preset:""}[te]})},J=()=>{z&&(X(z),V(null)),U(!1)},ce=()=>{if(i){R(!0);return}T()},T=()=>{p(""),d(null),y(""),k({title:"",description:""})},re=()=>{T(),R(!1)},he=te=>{const ae=JSON.parse(JSON.stringify(da)),q=te.split(`
`);let K="";for(const Me of q){const We=Me.trim();if(!We||We.startsWith("#"))continue;const E=We.match(/^\[(\w+)\]/);if(E){K=E[1];continue}const xe=We.match(/^(\w+)\s*=\s*(.+)$/);if(xe&&K){const[,Ke,we]=xe;let Q=we.trim();const _e=Q.match(/^("[^"]*")/);if(_e)Q=_e[1];else{const Os=Q.indexOf("#");Os!==-1&&(Q=Q.substring(0,Os).trim())}let Re;if(Q==="true")Re=!0;else if(Q==="false")Re=!1;else if(Q.startsWith("[")&&Q.endsWith("]")){const Os=Q.slice(1,-1).trim();if(Os){const Ts=Os.split(",").map(gs=>{const Is=gs.trim();return isNaN(Number(Is))?Is.replace(/"/g,""):Number(Is)}),gt=typeof Ts[0];Re=Ts.every(gs=>typeof gs===gt)?Ts:Ts.filter(gs=>typeof gs=="number")}else Re=[]}else Q.startsWith('"')&&Q.endsWith('"')?Re=Q.slice(1,-1):isNaN(Number(Q))?Re=Q.replace(/"/g,""):Re=Number(Q);if(K in ae){const Os=ae[K];Os[Ke]=Re}}}return ae},ke=te=>{const ae=[],q=(K,Me)=>K===""||K===null||K===void 0?Me:K;return ae.push("[inner]"),ae.push(`version = "${q(te.inner.version,da.inner.version)}" # `),ae.push("# "),ae.push(""),ae.push("[nickname] # "),ae.push(`nickname = "${q(te.nickname.nickname,da.nickname.nickname)}"`),ae.push(""),ae.push("[napcat_server] # Napcatws"),ae.push(`host = "${q(te.napcat_server.host,da.napcat_server.host)}"      # Napcat`),ae.push(`port = ${q(te.napcat_server.port||0,da.napcat_server.port)}             # Napcat`),ae.push(`token = "${q(te.napcat_server.token,da.napcat_server.token)}"              # Napcat`),ae.push(`heartbeat_interval = ${q(te.napcat_server.heartbeat_interval||0,da.napcat_server.heartbeat_interval)} # Napcat`),ae.push(""),ae.push("[maibot_server] # ws"),ae.push(`host = "${q(te.maibot_server.host,da.maibot_server.host)}" # .envHOST`),ae.push(`port = ${q(te.maibot_server.port||0,da.maibot_server.port)}        # .envPORT`),ae.push(""),ae.push("[chat] # "),ae.push(`group_list_type = "${q(te.chat.group_list_type,da.chat.group_list_type)}" # whitelist, blacklist`),ae.push(`group_list = [${te.chat.group_list.join(", ")}]               # `),ae.push("# group_list_typewhitelist"),ae.push("# group_list_typeblacklist"),ae.push(`private_list_type = "${q(te.chat.private_list_type,da.chat.private_list_type)}" # whitelist, blacklist`),ae.push(`private_list = [${te.chat.private_list.join(", ")}]               # `),ae.push("# private_list_typewhitelist"),ae.push("# private_list_typeblacklist"),ae.push(`ban_user_id = [${te.chat.ban_user_id.join(", ")}]   # `),ae.push(`ban_qq_bot = ${te.chat.ban_qq_bot} # QQ`),ae.push(`enable_poke = ${te.chat.enable_poke} # `),ae.push(""),ae.push("[voice] # "),ae.push(`use_tts = ${te.voice.use_tts} # ttsttsadapter`),ae.push(""),ae.push("[debug]"),ae.push(`level = "${q(te.debug.level,da.debug.level)}" # DEBUG, INFO, WARNING, ERROR, CRITICAL`),ae.join(`
`)},Ce=te=>{const ae=te.target.files?.[0];if(!ae)return;const q=new FileReader;q.onload=K=>{try{const Me=K.target?.result,We=he(Me);d(We),x(ae.name),k({title:"",description:`${ae.name}`})}catch(Me){console.error(":",Me),k({title:"",description:"",variant:"destructive"})}},q.readAsText(ae)},ze=()=>{if(!i)return;const te=ke(i),ae=new Blob([te],{type:"text/plain;charset=utf-8"}),q=URL.createObjectURL(ae),K=document.createElement("a");K.href=q,K.download=m||"config.toml",document.body.appendChild(K),K.click(),document.body.removeChild(K),URL.revokeObjectURL(q),k({title:"",description:""})},fe=()=>{d(JSON.parse(JSON.stringify(da))),x("config.toml"),k({title:"",description:""})};return e.jsx(Ze,{className:"h-full",children:e.jsxs("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:""}),e.jsx("p",{className:"text-muted-foreground mt-1 sm:mt-2 text-sm sm:text-base",children:" QQ "})]})}),e.jsxs("div",{className:"flex items-start gap-2 p-3 rounded-lg border border-amber-500/50 bg-amber-500/10 text-amber-700 dark:text-amber-400",children:[e.jsx(qt,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-sm",children:" WebUI "})]}),e.jsxs(Ve,{children:[e.jsxs(ls,{children:[e.jsx(ns,{children:""}),e.jsx(tt,{children:""})]}),e.jsxs(ps,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 md:gap-4",children:[e.jsx("div",{className:`border-2 rounded-lg p-3 md:p-4 cursor-pointer transition-all ${n==="preset"?"border-primary bg-primary/5":"border-muted hover:border-primary/50 active:border-primary/70"}`,onClick:()=>D("preset"),children:e.jsxs("div",{className:"flex items-start gap-2 md:gap-3",children:[e.jsx(Vl,{className:"h-4 w-4 md:h-5 md:w-5 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"font-semibold text-sm md:text-base",children:""}),e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground mt-1 line-clamp-2",children:""})]})]})}),e.jsx("div",{className:`border-2 rounded-lg p-3 md:p-4 cursor-pointer transition-all ${n==="upload"?"border-primary bg-primary/5":"border-muted hover:border-primary/50 active:border-primary/70"}`,onClick:()=>D("upload"),children:e.jsxs("div",{className:"flex items-start gap-2 md:gap-3",children:[e.jsx(gi,{className:"h-4 w-4 md:h-5 md:w-5 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"font-semibold text-sm md:text-base",children:""}),e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground mt-1 line-clamp-2",children:""})]})]})}),e.jsx("div",{className:`border-2 rounded-lg p-3 md:p-4 cursor-pointer transition-all ${n==="path"?"border-primary bg-primary/5":"border-muted hover:border-primary/50 active:border-primary/70"}`,onClick:()=>D("path"),children:e.jsxs("div",{className:"flex items-start gap-2 md:gap-3",children:[e.jsx(dy,{className:"h-4 w-4 md:h-5 md:w-5 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"font-semibold text-sm md:text-base",children:""}),e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground mt-1 line-clamp-2",children:""})]})]})})]}),n==="preset"&&e.jsxs("div",{className:"space-y-3 pt-2 border-t",children:[e.jsx(S,{className:"text-sm md:text-base",children:""}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:Object.entries(Hu).map(([te,ae])=>{const q=ae.icon,K=g===te;return e.jsx("div",{className:`border-2 rounded-lg p-3 cursor-pointer transition-all ${K?"border-primary bg-primary/5":"border-muted hover:border-primary/50"}`,onClick:()=>{b(te),ve(te)},children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(q,{className:"h-5 w-5 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h4",{className:"font-semibold text-sm",children:ae.name}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:ae.description}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1 font-mono break-all",children:ae.path})]})]})},te)})})]}),n==="path"&&e.jsxs("div",{className:"space-y-3 pt-2 border-t",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"config-path",className:"text-sm md:text-base",children:""}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsx(ie,{id:"config-path",value:f,onChange:te=>ge(te.target.value),placeholder:": C:\\Adapter\\config.toml",className:`text-sm ${j?"border-destructive":""}`}),j&&e.jsx("p",{className:"text-xs text-destructive",children:j})]}),e.jsx(_,{onClick:()=>je(f),disabled:w||!f||!!j,className:"w-full sm:w-auto",children:w?e.jsxs(e.Fragment,{children:[e.jsx(Ht,{className:"h-4 w-4 animate-spin mr-2"}),e.jsx("span",{className:"sm:hidden",children:"..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"sm:hidden",children:""}),e.jsx("span",{className:"hidden sm:inline",children:""})]})})]})]}),e.jsxs("details",{className:"rounded-lg bg-muted/50 p-3 group",children:[e.jsxs("summary",{className:"text-xs font-medium cursor-pointer select-none list-none flex items-center justify-between",children:[e.jsx("span",{children:""}),e.jsx("svg",{className:"h-4 w-4 transition-transform group-open:rotate-180",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),e.jsxs("div",{className:"mt-2 space-y-2 text-xs text-muted-foreground",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"font-mono bg-background px-1.5 py-0.5 rounded text-[10px] md:text-xs whitespace-nowrap",children:"Windows"})}),e.jsxs("div",{className:"pl-2 space-y-0.5 text-[10px] md:text-xs break-all",children:[e.jsx("div",{children:"C:\\Adapter\\config.toml"}),e.jsx("div",{className:"hidden sm:block",children:"D:\\MaiBot\\adapter\\config.toml"}),e.jsx("div",{className:"hidden sm:block",children:"\\\\server\\share\\config.toml"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"font-mono bg-background px-1.5 py-0.5 rounded text-[10px] md:text-xs whitespace-nowrap",children:"Linux"})}),e.jsxs("div",{className:"pl-2 space-y-0.5 text-[10px] md:text-xs break-all",children:[e.jsx("div",{children:"/opt/adapter/config.toml"}),e.jsx("div",{className:"hidden sm:block",children:"/home/user/adapter/config.toml"}),e.jsx("div",{className:"hidden sm:block",children:"~/adapter/config.toml"})]})]}),e.jsx("p",{className:"pt-1 border-t text-[10px] md:text-xs",children:"  1 "})]})]})]})]})]}),e.jsxs(ea,{children:[e.jsx(Va,{className:"h-4 w-4"}),e.jsx(sa,{children:n==="preset"?e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:""})," 1 ",N&&" (...)"]}):n==="upload"?e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:""}),"      "]}):e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:""})," 1 ",N&&" (...)"]})})]}),n==="upload"&&!i&&e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full",children:[e.jsx("input",{ref:$,type:"file",accept:".toml",className:"hidden",onChange:Ce}),e.jsxs(_,{onClick:()=>$.current?.click(),size:"sm",variant:"outline",className:"w-full sm:w-auto",children:[e.jsx(gi,{className:"mr-2 h-4 w-4"}),""]}),e.jsxs(_,{onClick:fe,size:"sm",className:"w-full sm:w-auto",children:[e.jsx(Oa,{className:"mr-2 h-4 w-4"}),""]})]}),n==="upload"&&i&&e.jsx("div",{className:"flex gap-2",children:e.jsxs(_,{onClick:ze,size:"sm",className:"w-full sm:w-auto",children:[e.jsx(La,{className:"mr-2 h-4 w-4"}),""]})}),(n==="preset"||n==="path")&&i&&e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs(_,{onClick:ye,size:"sm",disabled:N||!!j,className:"w-full sm:w-auto",children:[e.jsx(yi,{className:"mr-2 h-4 w-4"}),N?"...":""]}),e.jsxs(_,{onClick:Ne,size:"sm",variant:"outline",disabled:w,className:"w-full sm:w-auto",children:[e.jsx(Ht,{className:`mr-2 h-4 w-4 ${w?"animate-spin":""}`}),""]}),n==="path"&&e.jsxs(_,{onClick:ce,size:"sm",variant:"destructive",className:"w-full sm:w-auto",children:[e.jsx(ss,{className:"mr-2 h-4 w-4"}),""]})]}),i?e.jsxs(Ca,{defaultValue:"napcat",className:"w-full",children:[e.jsx("div",{className:"overflow-x-auto -mx-4 px-4 sm:mx-0 sm:px-0",children:e.jsxs(ma,{className:"inline-flex w-auto min-w-full sm:grid sm:w-full sm:grid-cols-5",children:[e.jsxs(as,{value:"napcat",className:"flex-shrink-0 text-xs sm:text-sm whitespace-nowrap",children:[e.jsx("span",{className:"hidden sm:inline",children:"Napcat "}),e.jsx("span",{className:"sm:hidden",children:"Napcat"})]}),e.jsxs(as,{value:"maibot",className:"flex-shrink-0 text-xs sm:text-sm whitespace-nowrap",children:[e.jsx("span",{className:"hidden sm:inline",children:""}),e.jsx("span",{className:"sm:hidden",children:""})]}),e.jsxs(as,{value:"chat",className:"flex-shrink-0 text-xs sm:text-sm whitespace-nowrap",children:[e.jsx("span",{className:"hidden sm:inline",children:""}),e.jsx("span",{className:"sm:hidden",children:""})]}),e.jsxs(as,{value:"voice",className:"flex-shrink-0 text-xs sm:text-sm whitespace-nowrap",children:[e.jsx("span",{className:"hidden sm:inline",children:""}),e.jsx("span",{className:"sm:hidden",children:""})]}),e.jsx(as,{value:"debug",className:"flex-shrink-0 text-xs sm:text-sm whitespace-nowrap",children:""})]})}),e.jsx(Ms,{value:"napcat",className:"space-y-4",children:e.jsx(h1,{config:i,onChange:te=>{d(te),be(te)}})}),e.jsx(Ms,{value:"maibot",className:"space-y-4",children:e.jsx(f1,{config:i,onChange:te=>{d(te),be(te)}})}),e.jsx(Ms,{value:"chat",className:"space-y-4",children:e.jsx(p1,{config:i,onChange:te=>{d(te),be(te)}})}),e.jsx(Ms,{value:"voice",className:"space-y-4",children:e.jsx(g1,{config:i,onChange:te=>{d(te),be(te)}})}),e.jsx(Ms,{value:"debug",className:"space-y-4",children:e.jsx(j1,{config:i,onChange:te=>{d(te),be(te)}})})]}):e.jsx("div",{className:"rounded-lg border bg-card p-6 md:p-12",children:e.jsxs("div",{className:"text-center space-y-3 md:space-y-4",children:[e.jsx(Oa,{className:"h-12 w-12 md:h-16 md:w-16 mx-auto text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold",children:""}),e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground mt-2 px-4",children:n==="preset"?"":n==="upload"?"":""})]})]})}),e.jsx(xs,{open:O,onOpenChange:U,children:e.jsxs(rs,{children:[e.jsxs(is,{children:[e.jsx(os,{children:""}),e.jsxs(ds,{children:["",e.jsx("br",{}),e.jsx("span",{className:"text-destructive font-medium",children:""})]})]}),e.jsxs(cs,{children:[e.jsx(ms,{onClick:()=>{U(!1),V(null)},children:""}),e.jsx(us,{onClick:J,children:""})]})]})}),e.jsx(xs,{open:F,onOpenChange:R,children:e.jsxs(rs,{children:[e.jsxs(is,{children:[e.jsx(os,{children:""}),e.jsxs(ds,{children:["",e.jsx("br",{}),e.jsx("span",{className:"text-muted-foreground text-sm",children:""})]})]}),e.jsxs(cs,{children:[e.jsx(ms,{onClick:()=>R(!1),children:""}),e.jsx(us,{onClick:re,className:"bg-destructive hover:bg-destructive/90",children:""})]})]})})]})})}function h1({config:n,onChange:r}){return e.jsx("div",{className:"rounded-lg border bg-card p-4 md:p-6 space-y-4 md:space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold mb-3 md:mb-4",children:"Napcat WebSocket "}),e.jsxs("div",{className:"grid gap-3 md:gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"napcat-host",className:"text-sm md:text-base",children:""}),e.jsx(ie,{id:"napcat-host",value:n.napcat_server.host,onChange:i=>r({...n,napcat_server:{...n.napcat_server,host:i.target.value}}),placeholder:"localhost",className:"text-sm md:text-base"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Napcat "})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"napcat-port",className:"text-sm md:text-base",children:""}),e.jsx(ie,{id:"napcat-port",type:"number",value:n.napcat_server.port||"",onChange:i=>r({...n,napcat_server:{...n.napcat_server,port:i.target.value?parseInt(i.target.value):0}}),placeholder:"8095",className:"text-sm md:text-base"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Napcat  8095"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"napcat-token",className:"text-sm md:text-base",children:"Token"}),e.jsx(ie,{id:"napcat-token",type:"password",value:n.napcat_server.token,onChange:i=>r({...n,napcat_server:{...n.napcat_server,token:i.target.value}}),placeholder:"",className:"text-sm md:text-base"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Napcat "})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"napcat-heartbeat",className:"text-sm md:text-base",children:""}),e.jsx(ie,{id:"napcat-heartbeat",type:"number",value:n.napcat_server.heartbeat_interval||"",onChange:i=>r({...n,napcat_server:{...n.napcat_server,heartbeat_interval:i.target.value?parseInt(i.target.value):0}}),placeholder:"30",className:"text-sm md:text-base"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" Napcat  30"})]})]})]})})}function f1({config:n,onChange:r}){return e.jsx("div",{className:"rounded-lg border bg-card p-4 md:p-6 space-y-4 md:space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold mb-3 md:mb-4",children:" WebSocket "}),e.jsxs("div",{className:"grid gap-3 md:gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"maibot-host",className:"text-sm md:text-base",children:""}),e.jsx(ie,{id:"maibot-host",value:n.maibot_server.host,onChange:i=>r({...n,maibot_server:{...n.maibot_server,host:i.target.value}}),placeholder:"localhost",className:"text-sm md:text-base"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" .env  HOST "})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"maibot-port",className:"text-sm md:text-base",children:""}),e.jsx(ie,{id:"maibot-port",type:"number",value:n.maibot_server.port||"",onChange:i=>r({...n,maibot_server:{...n.maibot_server,port:i.target.value?parseInt(i.target.value):0}}),placeholder:"8000",className:"text-sm md:text-base"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" .env  PORT  8000"})]})]})]})})}function p1({config:n,onChange:r}){const i=x=>{const f={...n};x==="group"?f.chat.group_list=[...f.chat.group_list,0]:x==="private"?f.chat.private_list=[...f.chat.private_list,0]:f.chat.ban_user_id=[...f.chat.ban_user_id,0],r(f)},d=(x,f)=>{const p={...n};x==="group"?p.chat.group_list=p.chat.group_list.filter((g,b)=>b!==f):x==="private"?p.chat.private_list=p.chat.private_list.filter((g,b)=>b!==f):p.chat.ban_user_id=p.chat.ban_user_id.filter((g,b)=>b!==f),r(p)},m=(x,f,p)=>{const g={...n};x==="group"?g.chat.group_list[f]=p:x==="private"?g.chat.private_list[f]=p:g.chat.ban_user_id[f]=p,r(g)};return e.jsx("div",{className:"rounded-lg border bg-card p-4 md:p-6 space-y-4 md:space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold mb-3 md:mb-4",children:""}),e.jsxs("div",{className:"grid gap-4 md:gap-6",children:[e.jsxs("div",{className:"space-y-3 md:space-y-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{className:"text-sm md:text-base",children:""}),e.jsxs(He,{value:n.chat.group_list_type,onValueChange:x=>r({...n,chat:{...n.chat,group_list_type:x}}),children:[e.jsx(Ue,{children:e.jsx(qe,{})}),e.jsxs(Be,{children:[e.jsx(se,{value:"whitelist",children:""}),e.jsx(se,{value:"blacklist",children:""})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-0",children:[e.jsx(S,{className:"text-sm md:text-base",children:""}),e.jsxs(_,{onClick:()=>i("group"),size:"sm",variant:"outline",className:"w-full sm:w-auto",children:[e.jsx(Oa,{className:"mr-1 h-4 w-4"}),""]})]}),n.chat.group_list.map((x,f)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ie,{type:"number",value:x,onChange:p=>m("group",f,parseInt(p.target.value)||0),placeholder:"",className:"text-sm md:text-base"}),e.jsxs(xs,{children:[e.jsx(dt,{asChild:!0,children:e.jsx(_,{size:"icon",variant:"outline",children:e.jsx(ss,{className:"h-4 w-4"})})}),e.jsxs(rs,{children:[e.jsxs(is,{children:[e.jsx(os,{children:""}),e.jsxs(ds,{children:[" ",x," "]})]}),e.jsxs(cs,{children:[e.jsx(ms,{children:""}),e.jsx(us,{onClick:()=>d("group",f),children:""})]})]})]})]},f)),n.chat.group_list.length===0&&e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]})]}),e.jsxs("div",{className:"space-y-3 md:space-y-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{className:"text-sm md:text-base",children:""}),e.jsxs(He,{value:n.chat.private_list_type,onValueChange:x=>r({...n,chat:{...n.chat,private_list_type:x}}),children:[e.jsx(Ue,{children:e.jsx(qe,{})}),e.jsxs(Be,{children:[e.jsx(se,{value:"whitelist",children:""}),e.jsx(se,{value:"blacklist",children:""})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-0",children:[e.jsx(S,{className:"text-sm md:text-base",children:""}),e.jsxs(_,{onClick:()=>i("private"),size:"sm",variant:"outline",className:"w-full sm:w-auto",children:[e.jsx(Oa,{className:"mr-1 h-4 w-4"}),""]})]}),n.chat.private_list.map((x,f)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ie,{type:"number",value:x,onChange:p=>m("private",f,parseInt(p.target.value)||0),placeholder:"QQ",className:"text-sm md:text-base"}),e.jsxs(xs,{children:[e.jsx(dt,{asChild:!0,children:e.jsx(_,{size:"icon",variant:"outline",children:e.jsx(ss,{className:"h-4 w-4"})})}),e.jsxs(rs,{children:[e.jsxs(is,{children:[e.jsx(os,{children:""}),e.jsxs(ds,{children:[" ",x," "]})]}),e.jsxs(cs,{children:[e.jsx(ms,{children:""}),e.jsx(us,{onClick:()=>d("private",f),children:""})]})]})]})]},f)),n.chat.private_list.length===0&&e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-0",children:[e.jsxs("div",{children:[e.jsx(S,{className:"text-sm md:text-base",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:""})]}),e.jsxs(_,{onClick:()=>i("ban"),size:"sm",variant:"outline",className:"w-full sm:w-auto",children:[e.jsx(Oa,{className:"mr-1 h-4 w-4"}),""]})]}),n.chat.ban_user_id.map((x,f)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ie,{type:"number",value:x,onChange:p=>m("ban",f,parseInt(p.target.value)||0),placeholder:"QQ",className:"text-sm md:text-base"}),e.jsxs(xs,{children:[e.jsx(dt,{asChild:!0,children:e.jsx(_,{size:"icon",variant:"outline",children:e.jsx(ss,{className:"h-4 w-4"})})}),e.jsxs(rs,{children:[e.jsxs(is,{children:[e.jsx(os,{children:""}),e.jsxs(ds,{children:[" ",x," "]})]}),e.jsxs(cs,{children:[e.jsx(ms,{children:""}),e.jsx(us,{onClick:()=>d("ban",f),children:""})]})]})]})]},f)),n.chat.ban_user_id.length===0&&e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(S,{className:"text-sm md:text-base",children:"QQ"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"QQ"})]}),e.jsx(Fe,{checked:n.chat.ban_qq_bot,onCheckedChange:x=>r({...n,chat:{...n.chat,ban_qq_bot:x}})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(S,{className:"text-sm md:text-base",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:""})]}),e.jsx(Fe,{checked:n.chat.enable_poke,onCheckedChange:x=>r({...n,chat:{...n.chat,enable_poke:x}})})]})]})]})})}function g1({config:n,onChange:r}){return e.jsx("div",{className:"rounded-lg border bg-card p-4 md:p-6 space-y-4 md:space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold mb-3 md:mb-4",children:""}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(S,{className:"text-sm md:text-base",children:" TTS "}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:" TTS "})]}),e.jsx(Fe,{checked:n.voice.use_tts,onCheckedChange:i=>r({...n,voice:{use_tts:i}})})]})]})})}function j1({config:n,onChange:r}){return e.jsx("div",{className:"rounded-lg border bg-card p-4 md:p-6 space-y-4 md:space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold mb-3 md:mb-4",children:""}),e.jsx("div",{className:"grid gap-3 md:gap-4",children:e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{className:"text-sm md:text-base",children:""}),e.jsxs(He,{value:n.debug.level,onValueChange:i=>r({...n,debug:{level:i}}),children:[e.jsx(Ue,{children:e.jsx(qe,{})}),e.jsxs(Be,{children:[e.jsx(se,{value:"DEBUG",children:"DEBUG"}),e.jsx(se,{value:"INFO",children:"INFO"}),e.jsx(se,{value:"WARNING",children:"WARNING"}),e.jsx(se,{value:"ERROR",children:"ERROR"}),e.jsx(se,{value:"CRITICAL",children:"CRITICAL"})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})})]})})}const v1=["defaultChecked","defaultValue","suppressContentEditableWarning","suppressHydrationWarning","dangerouslySetInnerHTML","accessKey","className","contentEditable","contextMenu","dir","draggable","hidden","id","lang","placeholder","slot","spellCheck","style","tabIndex","title","translate","radioGroup","role","about","datatype","inlist","prefix","property","resource","typeof","vocab","autoCapitalize","autoCorrect","autoSave","color","itemProp","itemScope","itemType","itemID","itemRef","results","security","unselectable","inputMode","is","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],b1=/^(aria-|data-)/,Yg=n=>Object.fromEntries(Object.entries(n).filter(([r])=>b1.test(r)||v1.includes(r)));function N1(n,r){const i=Yg(n);return Object.keys(n).some(d=>!Object.hasOwn(i,d)&&n[d]!==r[d])}class y1 extends u.Component{container;plugin;componentDidMount(){this.installPlugin()}componentDidUpdate(r){if(r.uppy!==this.props.uppy)this.uninstallPlugin(r),this.installPlugin();else if(N1(this.props,r)){const{uppy:i,...d}={...this.props,target:this.container};this.plugin.setOptions(d)}}componentWillUnmount(){this.uninstallPlugin()}installPlugin(){const{uppy:r,...i}={id:"Dashboard",...this.props,inline:!0,target:this.container};r.use(Iy,i),this.plugin=r.getPlugin(i.id)}uninstallPlugin(r=this.props){const{uppy:i}=r;i.removePlugin(this.plugin)}render(){return u.createElement("div",{className:"uppy-Container",ref:r=>{this.container=r},...Yg(this.props)})}}function w1({src:n,alt:r="",className:i,maxRetries:d=5,retryInterval:m=1500}){const[x,f]=u.useState("loading"),[p,g]=u.useState(0),[b,j]=u.useState(null),y=u.useCallback(async()=>{try{const N=await fetch(n,{credentials:"include"});if(N.status===202){f("generating"),p<d?setTimeout(()=>{g(L=>L+1)},m):f("error");return}if(!N.ok){f("error");return}const C=await N.blob(),w=URL.createObjectURL(C);j(w),f("loaded")}catch(N){console.error(":",N),f("error")}},[n,p,d,m]);return u.useEffect(()=>{f("loading"),g(0),j(null)},[n]),u.useEffect(()=>{y()},[y]),u.useEffect(()=>()=>{b&&URL.revokeObjectURL(b)},[b]),x==="loading"||x==="generating"?e.jsx(kg,{className:H("w-full h-full",i)}):x==="error"||!b?e.jsx("div",{className:H("w-full h-full flex items-center justify-center bg-muted",i),children:e.jsx(jg,{className:"h-8 w-8 text-muted-foreground"})}):e.jsx("img",{src:b,alt:r,className:H("w-full h-full object-contain",i)})}function Kg({content:n,className:r=""}){return e.jsx("div",{className:`prose prose-sm dark:prose-invert max-w-none ${r}`,children:e.jsx(Ky,{remarkPlugins:[Jy,Py],rehypePlugins:[Xy],components:{code({inline:i,className:d,children:m,...x}){return i?e.jsx("code",{className:"bg-muted px-1.5 py-0.5 rounded text-sm font-mono",...x,children:m}):e.jsx("code",{className:`${d} block bg-muted p-4 rounded-lg overflow-x-auto`,...x,children:m})},table({children:i,...d}){return e.jsx("div",{className:"overflow-x-auto",children:e.jsx("table",{className:"border-collapse border border-border",...d,children:i})})},th({children:i,...d}){return e.jsx("th",{className:"border border-border bg-muted px-4 py-2 text-left font-semibold",...d,children:i})},td({children:i,...d}){return e.jsx("td",{className:"border border-border px-4 py-2",...d,children:i})},a({children:i,...d}){return e.jsx("a",{className:"text-primary hover:underline",target:"_blank",rel:"noopener noreferrer",...d,children:i})},blockquote({children:i,...d}){return e.jsx("blockquote",{className:"border-l-4 border-primary pl-4 italic text-muted-foreground",...d,children:i})},h1({children:i,...d}){return e.jsx("h1",{className:"text-3xl font-bold mt-6 mb-4",...d,children:i})},h2({children:i,...d}){return e.jsx("h2",{className:"text-2xl font-bold mt-5 mb-3",...d,children:i})},h3({children:i,...d}){return e.jsx("h3",{className:"text-xl font-bold mt-4 mb-2",...d,children:i})},h4({children:i,...d}){return e.jsx("h4",{className:"text-lg font-semibold mt-3 mb-2",...d,children:i})},ul({children:i,...d}){return e.jsx("ul",{className:"list-disc list-inside space-y-1 my-2",...d,children:i})},ol({children:i,...d}){return e.jsx("ol",{className:"list-decimal list-inside space-y-1 my-2",...d,children:i})},p({children:i,...d}){return e.jsx("p",{className:"my-2 leading-relaxed",...d,children:i})},hr({...i}){return e.jsx("hr",{className:"my-4 border-border",...i})}},children:n})})}function _1({children:n,className:r}){return e.jsx(Kg,{content:n,className:r})}const ka="/api/webui/emoji";async function S1(n){const r=new URLSearchParams;n.page&&r.append("page",n.page.toString()),n.page_size&&r.append("page_size",n.page_size.toString()),n.search&&r.append("search",n.search),n.is_registered!==void 0&&r.append("is_registered",n.is_registered.toString()),n.is_banned!==void 0&&r.append("is_banned",n.is_banned.toString()),n.format&&r.append("format",n.format),n.sort_by&&r.append("sort_by",n.sort_by),n.sort_order&&r.append("sort_order",n.sort_order);const i=await Te(`${ka}/list?${r}`,{});if(!i.ok)throw new Error(`: ${i.statusText}`);return i.json()}async function C1(n){const r=await Te(`${ka}/${n}`,{});if(!r.ok)throw new Error(`: ${r.statusText}`);return r.json()}async function k1(n,r){const i=await Te(`${ka}/${n}`,{method:"PATCH",body:JSON.stringify(r)});if(!i.ok)throw new Error(`: ${i.statusText}`);return i.json()}async function T1(n){const r=await Te(`${ka}/${n}`,{method:"DELETE"});if(!r.ok)throw new Error(`: ${r.statusText}`);return r.json()}async function E1(){const n=await Te(`${ka}/stats/summary`,{});if(!n.ok)throw new Error(`: ${n.statusText}`);return n.json()}async function z1(n){const r=await Te(`${ka}/${n}/register`,{method:"POST"});if(!r.ok)throw new Error(`: ${r.statusText}`);return r.json()}async function M1(n){const r=await Te(`${ka}/${n}/ban`,{method:"POST"});if(!r.ok)throw new Error(`: ${r.statusText}`);return r.json()}function A1(n,r=!1){return r?`${ka}/${n}/thumbnail?original=true`:`${ka}/${n}/thumbnail`}function D1(n){return`${ka}/${n}/thumbnail?original=true`}async function O1(n){const r=await Te(`${ka}/batch/delete`,{method:"POST",body:JSON.stringify({emoji_ids:n})});if(!r.ok){const i=await r.json();throw new Error(i.detail||"")}return r.json()}function R1(){return`${ka}/upload`}function L1(){const[n,r]=u.useState([]),[i,d]=u.useState(null),[m,x]=u.useState(!1),[f,p]=u.useState(1),[g,b]=u.useState(0),[j,y]=u.useState(20),[N,C]=u.useState("all"),[w,L]=u.useState("all"),[O,U]=u.useState("all"),[F,R]=u.useState("usage_count"),[z,V]=u.useState("desc"),[$,k]=u.useState(null),[M,ee]=u.useState(!1),[ge,ve]=u.useState(!1),[je,be]=u.useState(!1),[ye,Ne]=u.useState(new Set),[D,X]=u.useState(!1),[J,ce]=u.useState(""),[T,re]=u.useState("medium"),[he,ke]=u.useState(!1),{toast:Ce}=Qs(),ze=u.useCallback(async()=>{try{x(!0);const Q=await S1({page:f,page_size:j,is_registered:N==="all"?void 0:N==="registered",is_banned:w==="all"?void 0:w==="banned",format:O==="all"?void 0:O,sort_by:F,sort_order:z});r(Q.data),b(Q.total)}catch(Q){const _e=Q instanceof Error?Q.message:"";Ce({title:"",description:_e,variant:"destructive"})}finally{x(!1)}},[f,j,N,w,O,F,z,Ce]),fe=async()=>{try{const Q=await E1();d(Q.data)}catch(Q){console.error(":",Q)}};u.useEffect(()=>{ze()},[ze]),u.useEffect(()=>{fe()},[]);const te=async Q=>{try{const _e=await C1(Q.id);k(_e.data),ee(!0)}catch(_e){const Re=_e instanceof Error?_e.message:"";Ce({title:"",description:Re,variant:"destructive"})}},ae=Q=>{k(Q),ve(!0)},q=Q=>{k(Q),be(!0)},K=async()=>{if($)try{await T1($.id),Ce({title:"",description:""}),be(!1),k(null),ze(),fe()}catch(Q){const _e=Q instanceof Error?Q.message:"";Ce({title:"",description:_e,variant:"destructive"})}},Me=async Q=>{try{await z1(Q.id),Ce({title:"",description:""}),ze(),fe()}catch(_e){const Re=_e instanceof Error?_e.message:"";Ce({title:"",description:Re,variant:"destructive"})}},We=async Q=>{try{await M1(Q.id),Ce({title:"",description:""}),ze(),fe()}catch(_e){const Re=_e instanceof Error?_e.message:"";Ce({title:"",description:Re,variant:"destructive"})}},E=Q=>{const _e=new Set(ye);_e.has(Q)?_e.delete(Q):_e.add(Q),Ne(_e)},xe=async()=>{try{const Q=await O1(Array.from(ye));Ce({title:"",description:Q.message}),Ne(new Set),X(!1),ze(),fe()}catch(Q){Ce({title:"",description:Q instanceof Error?Q.message:"",variant:"destructive"})}},Ke=()=>{const Q=parseInt(J),_e=Math.ceil(g/j);Q>=1&&Q<=_e?(p(Q),ce("")):Ce({title:"",description:`1-${_e}`,variant:"destructive"})},we=i?.formats?Object.keys(i.formats):[];return e.jsxs("div",{className:"h-[calc(100vh-4rem)] flex flex-col p-4 sm:p-6",children:[e.jsxs("div",{className:"mb-4 sm:mb-6 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:""})]}),e.jsxs(_,{onClick:()=>ke(!0),className:"gap-2",children:[e.jsx(gi,{className:"h-4 w-4"}),""]})]}),e.jsx(Ze,{className:"flex-1",children:e.jsxs("div",{className:"space-y-4 sm:space-y-6 pr-4",children:[i&&e.jsxs("div",{className:"grid gap-4 grid-cols-2 lg:grid-cols-4",children:[e.jsx(Ve,{children:e.jsxs(ls,{className:"pb-2",children:[e.jsx(tt,{children:""}),e.jsx(ns,{className:"text-2xl",children:i.total})]})}),e.jsx(Ve,{children:e.jsxs(ls,{className:"pb-2",children:[e.jsx(tt,{children:""}),e.jsx(ns,{className:"text-2xl text-green-600",children:i.registered})]})}),e.jsx(Ve,{children:e.jsxs(ls,{className:"pb-2",children:[e.jsx(tt,{children:""}),e.jsx(ns,{className:"text-2xl text-red-600",children:i.banned})]})}),e.jsx(Ve,{children:e.jsxs(ls,{className:"pb-2",children:[e.jsx(tt,{children:""}),e.jsx(ns,{className:"text-2xl text-gray-600",children:i.unregistered})]})})]}),e.jsxs(Ve,{children:[e.jsx(ls,{children:e.jsxs(ns,{className:"flex items-center gap-2",children:[e.jsx(Yc,{className:"h-5 w-5"}),""]})}),e.jsxs(ps,{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{children:""}),e.jsxs(He,{value:`${F}-${z}`,onValueChange:Q=>{const[_e,Re]=Q.split("-");R(_e),V(Re),p(1)},children:[e.jsx(Ue,{children:e.jsx(qe,{})}),e.jsxs(Be,{children:[e.jsx(se,{value:"usage_count-desc",children:" ()"}),e.jsx(se,{value:"usage_count-asc",children:" ()"}),e.jsx(se,{value:"register_time-desc",children:" ()"}),e.jsx(se,{value:"register_time-asc",children:" ()"}),e.jsx(se,{value:"record_time-desc",children:" ()"}),e.jsx(se,{value:"record_time-asc",children:" ()"}),e.jsx(se,{value:"last_used_time-desc",children:" ()"}),e.jsx(se,{value:"last_used_time-asc",children:" ()"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{children:""}),e.jsxs(He,{value:N,onValueChange:Q=>{C(Q),p(1)},children:[e.jsx(Ue,{children:e.jsx(qe,{})}),e.jsxs(Be,{children:[e.jsx(se,{value:"all",children:""}),e.jsx(se,{value:"registered",children:""}),e.jsx(se,{value:"unregistered",children:""})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{children:""}),e.jsxs(He,{value:w,onValueChange:Q=>{L(Q),p(1)},children:[e.jsx(Ue,{children:e.jsx(qe,{})}),e.jsxs(Be,{children:[e.jsx(se,{value:"all",children:""}),e.jsx(se,{value:"banned",children:""}),e.jsx(se,{value:"unbanned",children:""})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{children:""}),e.jsxs(He,{value:O,onValueChange:Q=>{U(Q),p(1)},children:[e.jsx(Ue,{children:e.jsx(qe,{})}),e.jsxs(Be,{children:[e.jsx(se,{value:"all",children:""}),we.map(Q=>e.jsxs(se,{value:Q,children:[Q.toUpperCase()," (",i?.formats[Q],")"]},Q))]})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 pt-4 border-t",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[ye.size>0&&e.jsxs("span",{className:"text-sm text-muted-foreground",children:[" ",ye.size," "]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{className:"text-sm whitespace-nowrap",children:""}),e.jsxs(He,{value:T,onValueChange:Q=>re(Q),children:[e.jsx(Ue,{className:"w-24",children:e.jsx(qe,{})}),e.jsxs(Be,{children:[e.jsx(se,{value:"small",children:""}),e.jsx(se,{value:"medium",children:""}),e.jsx(se,{value:"large",children:""})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{htmlFor:"emoji-page-size",className:"text-sm whitespace-nowrap",children:""}),e.jsxs(He,{value:j.toString(),onValueChange:Q=>{y(parseInt(Q)),p(1),Ne(new Set)},children:[e.jsx(Ue,{id:"emoji-page-size",className:"w-20",children:e.jsx(qe,{})}),e.jsxs(Be,{children:[e.jsx(se,{value:"20",children:"20"}),e.jsx(se,{value:"40",children:"40"}),e.jsx(se,{value:"60",children:"60"}),e.jsx(se,{value:"100",children:"100"})]})]}),ye.size>0&&e.jsxs(e.Fragment,{children:[e.jsx(_,{variant:"outline",size:"sm",onClick:()=>Ne(new Set),children:""}),e.jsxs(_,{variant:"destructive",size:"sm",onClick:()=>X(!0),children:[e.jsx(ss,{className:"h-4 w-4 mr-1"}),""]})]})]})]}),e.jsx("div",{className:"flex justify-end pt-4 border-t",children:e.jsxs(_,{variant:"outline",size:"sm",onClick:ze,disabled:m,children:[e.jsx(Ht,{className:`h-4 w-4 mr-2 ${m?"animate-spin":""}`}),""]})})]})]}),e.jsxs(Ve,{children:[e.jsxs(ls,{children:[e.jsx(ns,{children:""}),e.jsxs(tt,{children:[" ",g,"  ",f," "]})]}),e.jsxs(ps,{children:[n.length===0?e.jsx("div",{className:"text-center py-12 text-muted-foreground",children:""}):e.jsx("div",{className:`grid gap-3 ${T==="small"?"grid-cols-3 sm:grid-cols-4 md:grid-cols-6 lg:grid-cols-8 xl:grid-cols-10":T==="medium"?"grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 xl:grid-cols-8":"grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5"}`,children:n.map(Q=>e.jsxs("div",{className:`group relative rounded-lg border bg-card overflow-hidden hover:ring-2 hover:ring-primary transition-all cursor-pointer ${ye.has(Q.id)?"ring-2 ring-primary bg-primary/5":""}`,onClick:()=>E(Q.id),children:[e.jsx("div",{className:`absolute top-1 left-1 z-10 transition-opacity ${ye.has(Q.id)?"opacity-100":"opacity-0 group-hover:opacity-100"}`,children:e.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${ye.has(Q.id)?"bg-primary border-primary text-primary-foreground":"bg-background/80 border-muted-foreground/50"}`,children:ye.has(Q.id)&&e.jsx(ua,{className:"h-3 w-3"})})}),e.jsxs("div",{className:"absolute top-1 right-1 z-10 flex flex-col gap-0.5",children:[Q.is_registered&&e.jsx(Ie,{variant:"default",className:"bg-green-600 text-[10px] px-1 py-0",children:""}),Q.is_banned&&e.jsx(Ie,{variant:"destructive",className:"text-[10px] px-1 py-0",children:""})]}),e.jsx("div",{className:`aspect-square bg-muted flex items-center justify-center overflow-hidden ${T==="small"?"p-1":T==="medium"?"p-2":"p-3"}`,children:e.jsx(w1,{src:A1(Q.id),alt:""})}),e.jsxs("div",{className:`border-t bg-card ${T==="small"?"p-1":"p-2"}`,children:[e.jsxs("div",{className:"flex items-center justify-between gap-1 text-xs text-muted-foreground mb-1",children:[e.jsx(Ie,{variant:"outline",className:"text-[10px] px-1 py-0",children:Q.format.toUpperCase()}),e.jsxs("span",{className:"font-mono",children:[Q.usage_count,""]})]}),e.jsxs("div",{className:`flex gap-1 justify-center opacity-0 group-hover:opacity-100 transition-opacity ${T==="small"?"flex-wrap":""}`,children:[e.jsx(_,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:_e=>{_e.stopPropagation(),ae(Q)},title:"",children:e.jsx(fn,{className:"h-3 w-3"})}),e.jsx(_,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:_e=>{_e.stopPropagation(),te(Q)},title:"",children:e.jsx(Va,{className:"h-3 w-3"})}),!Q.is_registered&&e.jsx(_,{variant:"ghost",size:"icon",className:"h-6 w-6 text-green-600 hover:text-green-700",onClick:_e=>{_e.stopPropagation(),Me(Q)},title:"",children:e.jsx(ua,{className:"h-3 w-3"})}),!Q.is_banned&&e.jsx(_,{variant:"ghost",size:"icon",className:"h-6 w-6 text-orange-600 hover:text-orange-700",onClick:_e=>{_e.stopPropagation(),We(Q)},title:"",children:e.jsx(uy,{className:"h-3 w-3"})}),e.jsx(_,{variant:"ghost",size:"icon",className:"h-6 w-6 text-red-600 hover:text-red-700",onClick:_e=>{_e.stopPropagation(),q(Q)},title:"",children:e.jsx(ss,{className:"h-3 w-3"})})]})]})]},Q.id))}),g>0&&e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 mt-4",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:[" ",(f-1)*j+1," "," ",Math.min(f*j,g),"  ",g," "]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{variant:"outline",size:"sm",onClick:()=>p(1),disabled:f===1,className:"hidden sm:flex",children:e.jsx(mr,{className:"h-4 w-4"})}),e.jsxs(_,{variant:"outline",size:"sm",onClick:()=>p(Q=>Math.max(1,Q-1)),disabled:f===1,children:[e.jsx(pl,{className:"h-4 w-4 sm:mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{type:"number",value:J,onChange:Q=>ce(Q.target.value),onKeyDown:Q=>Q.key==="Enter"&&Ke(),placeholder:f.toString(),className:"w-16 h-8 text-center",min:1,max:Math.ceil(g/j)}),e.jsx(_,{variant:"outline",size:"sm",onClick:Ke,disabled:!J,className:"h-8",children:""})]}),e.jsxs(_,{variant:"outline",size:"sm",onClick:()=>p(Q=>Q+1),disabled:f>=Math.ceil(g/j),children:[e.jsx("span",{className:"hidden sm:inline",children:""}),e.jsx(Ya,{className:"h-4 w-4 sm:ml-1"})]}),e.jsx(_,{variant:"outline",size:"sm",onClick:()=>p(Math.ceil(g/j)),disabled:f>=Math.ceil(g/j),className:"hidden sm:flex",children:e.jsx(xr,{className:"h-4 w-4"})})]})]})]})]}),e.jsx(U1,{emoji:$,open:M,onOpenChange:ee}),e.jsx(B1,{emoji:$,open:ge,onOpenChange:ve,onSuccess:()=>{ze(),fe()}}),e.jsx(H1,{open:he,onOpenChange:ke,onSuccess:()=>{ze(),fe()}})]})}),e.jsx(xs,{open:D,onOpenChange:X,children:e.jsxs(rs,{children:[e.jsxs(is,{children:[e.jsx(os,{children:""}),e.jsxs(ds,{children:[" ",ye.size," "]})]}),e.jsxs(cs,{children:[e.jsx(ms,{children:""}),e.jsx(us,{onClick:xe,children:""})]})]})}),e.jsx(Fs,{open:je,onOpenChange:be,children:e.jsxs(Bs,{children:[e.jsxs(Hs,{children:[e.jsx(qs,{children:""}),e.jsx(et,{children:""})]}),e.jsxs(at,{children:[e.jsx(_,{variant:"outline",onClick:()=>be(!1),children:""}),e.jsx(_,{variant:"destructive",onClick:K,children:""})]})]})})]})}function U1({emoji:n,open:r,onOpenChange:i}){if(!n)return null;const d=m=>m?new Date(m*1e3).toLocaleString("zh-CN"):"-";return e.jsx(Fs,{open:r,onOpenChange:i,children:e.jsxs(Bs,{className:"max-w-2xl max-h-[90vh]",children:[e.jsx(Hs,{children:e.jsx(qs,{children:""})}),e.jsx(Ze,{className:"max-h-[calc(90vh-8rem)] pr-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"w-32 h-32 bg-muted rounded-lg flex items-center justify-center overflow-hidden",children:e.jsx("img",{src:D1(n.id),alt:n.description||"",className:"w-full h-full object-cover",onError:m=>{const x=m.target;x.style.display="none";const f=x.parentElement;f&&(f.innerHTML='<svg class="h-16 w-16 text-muted-foreground" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg>')}})})}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(S,{className:"text-muted-foreground",children:"ID"}),e.jsx("div",{className:"mt-1 font-mono",children:n.id})]}),e.jsxs("div",{children:[e.jsx(S,{className:"text-muted-foreground",children:""}),e.jsx("div",{className:"mt-1",children:e.jsx(Ie,{variant:"outline",children:n.format.toUpperCase()})})]})]}),e.jsxs("div",{children:[e.jsx(S,{className:"text-muted-foreground",children:""}),e.jsx("div",{className:"mt-1 font-mono text-sm break-all bg-muted p-2 rounded",children:n.full_path})]}),e.jsxs("div",{children:[e.jsx(S,{className:"text-muted-foreground",children:""}),e.jsx("div",{className:"mt-1 font-mono text-sm break-all bg-muted p-2 rounded",children:n.emoji_hash})]}),e.jsxs("div",{children:[e.jsx(S,{className:"text-muted-foreground",children:""}),n.description?e.jsx("div",{className:"mt-1 rounded-lg border bg-muted/50 p-3",children:e.jsx(_1,{className:"prose-sm",children:n.description})}):e.jsx("div",{className:"mt-1 text-sm text-muted-foreground",children:"-"})]}),e.jsxs("div",{children:[e.jsx(S,{className:"text-muted-foreground",children:""}),e.jsx("div",{className:"mt-1",children:n.emotion?e.jsx("span",{className:"text-sm",children:n.emotion}):e.jsx("span",{className:"text-sm text-muted-foreground",children:"-"})})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(S,{className:"text-muted-foreground",children:""}),e.jsxs("div",{className:"mt-2 flex gap-2",children:[n.is_registered&&e.jsx(Ie,{variant:"default",className:"bg-green-600",children:""}),n.is_banned&&e.jsx(Ie,{variant:"destructive",children:""}),!n.is_registered&&!n.is_banned&&e.jsx(Ie,{variant:"outline",children:""})]})]}),e.jsxs("div",{children:[e.jsx(S,{className:"text-muted-foreground",children:""}),e.jsx("div",{className:"mt-1 font-mono text-lg",children:n.usage_count})]})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(S,{className:"text-muted-foreground",children:""}),e.jsx("div",{className:"mt-1 text-sm",children:d(n.record_time)})]}),e.jsxs("div",{children:[e.jsx(S,{className:"text-muted-foreground",children:""}),e.jsx("div",{className:"mt-1 text-sm",children:d(n.register_time)})]})]}),e.jsxs("div",{children:[e.jsx(S,{className:"text-muted-foreground",children:""}),e.jsx("div",{className:"mt-1 text-sm",children:d(n.last_used_time)})]})]})})]})})}function B1({emoji:n,open:r,onOpenChange:i,onSuccess:d}){const[m,x]=u.useState(""),[f,p]=u.useState(!1),[g,b]=u.useState(!1),[j,y]=u.useState(!1),{toast:N}=Qs();u.useEffect(()=>{n&&(x(n.emotion||""),p(n.is_registered),b(n.is_banned))},[n]);const C=async()=>{if(n)try{y(!0);const w=m.split(/[,,]/).map(L=>L.trim()).filter(Boolean).join(",");await k1(n.id,{emotion:w||void 0,is_registered:f,is_banned:g}),N({title:"",description:""}),i(!1),d()}catch(w){const L=w instanceof Error?w.message:"";N({title:"",description:L,variant:"destructive"})}finally{y(!1)}};return n?e.jsx(Fs,{open:r,onOpenChange:i,children:e.jsxs(Bs,{className:"max-w-2xl",children:[e.jsxs(Hs,{children:[e.jsx(qs,{children:""}),e.jsx(et,{children:""})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(S,{children:""}),e.jsx(Ys,{value:m,onChange:w=>x(w.target.value),placeholder:"...",rows:2,className:"mt-1"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:""})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(pt,{id:"is_registered",checked:f,onCheckedChange:w=>{w===!0?(p(!0),b(!1)):p(!1)}}),e.jsx(S,{htmlFor:"is_registered",className:"cursor-pointer",children:""})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(pt,{id:"is_banned",checked:g,onCheckedChange:w=>{w===!0?(b(!0),p(!1)):b(!1)}}),e.jsx(S,{htmlFor:"is_banned",className:"cursor-pointer",children:""})]})]})]}),e.jsxs(at,{children:[e.jsx(_,{variant:"outline",onClick:()=>i(!1),children:""}),e.jsx(_,{onClick:C,disabled:j,children:j?"...":""})]})]})}):null}function H1({open:n,onOpenChange:r,onSuccess:i}){const[d,m]=u.useState("select"),[x,f]=u.useState([]),[p,g]=u.useState(null),[b,j]=u.useState(!1),{toast:y}=Qs(),N=u.useMemo(()=>new Yy({id:"emoji-uploader",autoProceed:!1,restrictions:{maxFileSize:10485760,allowedFileTypes:["image/jpeg","image/png","image/gif","image/webp"],maxNumberOfFiles:20},locale:{pluralize:()=>0,strings:{addMoreFiles:"",addingMoreFiles:"",allowedFileTypes:"%{types}",cancel:"",closeModal:"",complete:"",connectedToInternet:"",copyLink:"",copyLinkToClipboardFallback:"",copyLinkToClipboardSuccess:"",dashboardTitle:"",dashboardWindowTitle:" ESC ",done:"",dropHereOr:" %{browse}",dropHint:"",dropPasteFiles:" %{browseFiles}",dropPasteFolders:" %{browseFolders}",dropPasteBoth:"%{browseFiles}  %{browseFolders}",dropPasteImportFiles:"%{browseFiles} ",dropPasteImportFolders:"%{browseFolders} ",dropPasteImportBoth:"%{browseFiles}%{browseFolders} ",editFile:"",editing:" %{file}",emptyFolderAdded:"",exceedsSize:"%{file}  %{size}",failedToUpload:" %{file} ",fileSource:"%{name}",filesUploadedOfTotal:{0:" %{complete} / %{smart_count} ",1:" %{complete} / %{smart_count} "},filter:"",finishEditingFile:"",folderAdded:{0:" %{folder}  %{smart_count} ",1:" %{folder}  %{smart_count} "},generatingThumbnails:"...",import:"",importFiles:"",importFrom:" %{name} ",loading:"...",logOut:"",myDevice:"",noFilesFound:"",noInternetConnection:"",openFolderNamed:" %{name}",pause:"",pauseUpload:"",paused:"",poweredBy:"%{uppy}",processingXFiles:{0:" %{smart_count} ",1:" %{smart_count} "},recording:"",removeFile:"",resetFilter:"",resume:"",resumeUpload:"",retry:"",retryUpload:"",save:"",saveChanges:"",selectFileNamed:" %{name}",selectX:{0:" %{smart_count}",1:" %{smart_count}"},smile:"",startRecording:"",stopRecording:"",takePicture:"",timedOut:" %{seconds} ",upload:"",uploadComplete:"",uploadFailed:"",uploadPaused:"",uploadXFiles:{0:"%{smart_count} ",1:"%{smart_count} "},uploadXNewFiles:{0:"+%{smart_count} ",1:"+%{smart_count} "},uploading:"",uploadingXFiles:{0:" %{smart_count} ",1:" %{smart_count} "},xFilesSelected:{0:" %{smart_count} ",1:" %{smart_count} "},xMoreFilesAdded:{0:" %{smart_count} ",1:" %{smart_count} "},xTimeLeft:" %{time}",youCanOnlyUploadFileTypes:"%{types}",youCanOnlyUploadX:{0:" %{smart_count} ",1:" %{smart_count} "},youHaveToAtLeastSelectX:{0:" %{smart_count} ",1:" %{smart_count} "},browseFiles:"",browseFolders:"",cancelUpload:"",addMore:"",back:"",editFileWithFilename:" %{file}"}}}),[]);u.useEffect(()=>{const $=()=>{const k=N.getFiles();if(k.length===0)return;const M=k.map(ee=>({id:ee.id,name:ee.name,previewUrl:ee.preview||URL.createObjectURL(ee.data),emotion:"",description:"",isRegistered:!0,file:ee.data}));f(M),k.length===1?(g(M[0].id),m("edit-single")):m("edit-multiple")};return N.on("upload",$),()=>{N.off("upload",$)}},[N]),u.useEffect(()=>{n||(N.cancelAll(),m("select"),f([]),g(null),j(!1))},[n,N]);const C=u.useCallback(($,k)=>{f(M=>M.map(ee=>ee.id===$?{...ee,...k}:ee))},[]),w=u.useCallback($=>$.emotion.trim().length>0,[]),L=u.useMemo(()=>x.length>0&&x.every(w),[x,w]),O=u.useMemo(()=>x.find($=>$.id===p)||null,[x,p]),U=u.useCallback(()=>{(d==="edit-single"||d==="edit-multiple")&&(m("select"),f([]),g(null))},[d]),F=u.useCallback(async()=>{if(!L){y({title:"",description:"",variant:"destructive"});return}j(!0);const $=localStorage.getItem("access-token")||"";let k=0,M=0;try{for(const ee of x){const ge=new FormData;ge.append("file",ee.file),ge.append("emotion",ee.emotion),ge.append("description",ee.description),ge.append("is_registered",ee.isRegistered.toString());try{(await fetch(R1(),{method:"POST",headers:{Authorization:`Bearer ${$}`},body:ge})).ok?k++:M++}catch{M++}}M===0?(y({title:"",description:` ${k} `}),r(!1),i()):(y({title:"",description:` ${k}  ${M} `,variant:"destructive"}),i())}finally{j(!1)}},[L,x,y,r,i]),R=()=>e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"border rounded-lg overflow-hidden w-full",children:e.jsx(y1,{uppy:N,proudlyDisplayPoweredByUppy:!1,hideProgressDetails:!0,height:350,width:"100%",theme:"auto",note:" JPGPNGGIFWebP  20 "})})}),z=()=>{const $=x[0];return $?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(_,{variant:"ghost",size:"sm",onClick:U,children:[e.jsx(ir,{className:"h-4 w-4 mr-1"}),""]}),e.jsx("span",{className:"text-sm text-muted-foreground",children:""})]}),e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("div",{className:"flex-shrink-0",children:[e.jsx("div",{className:"w-32 h-32 rounded-lg border overflow-hidden bg-muted flex items-center justify-center",children:e.jsx("img",{src:$.previewUrl,alt:$.name,className:"max-w-full max-h-full object-contain"})}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2 text-center truncate max-w-32",children:$.name})]}),e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(S,{htmlFor:"single-emotion",children:[" ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(ie,{id:"single-emotion",value:$.emotion,onChange:k=>C($.id,{emotion:k.target.value}),placeholder:",",className:$.emotion.trim()?"":"border-destructive"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"single-description",children:""}),e.jsx(ie,{id:"single-description",value:$.description,onChange:k=>C($.id,{description:k.target.value}),placeholder:"..."})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(pt,{id:"single-is-registered",checked:$.isRegistered,onCheckedChange:k=>C($.id,{isRegistered:k===!0})}),e.jsx(S,{htmlFor:"single-is-registered",className:"cursor-pointer",children:""})]})]})]}),e.jsx(at,{children:e.jsx(_,{onClick:F,disabled:!L||b,children:b?"...":""})})]}):null},V=()=>{const $=x.filter(w).length,k=x.length;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(_,{variant:"ghost",size:"sm",onClick:U,children:[e.jsx(ir,{className:"h-4 w-4 mr-1"}),""]}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["",$,"/",k," "]})]}),e.jsx(Ie,{variant:L?"default":"secondary",children:L?e.jsxs(e.Fragment,{children:[e.jsx(Wt,{className:"h-3 w-3 mr-1"}),""]}):e.jsxs(e.Fragment,{children:[e.jsx(hl,{className:"h-3 w-3 mr-1"}),""]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(Ze,{className:"h-[350px] pr-2",children:e.jsx("div",{className:"space-y-2",children:x.map(M=>{const ee=w(M),ge=p===M.id;return e.jsxs("div",{onClick:()=>g(M.id),className:`
                      flex items-center gap-3 p-3 rounded-lg border-2 cursor-pointer transition-all
                      ${ge?"ring-2 ring-primary":""}
                      ${ee?"border-green-500 bg-green-50 dark:bg-green-950/20":"border-border hover:border-muted-foreground/50"}
                    `,children:[e.jsx("div",{className:"w-12 h-12 rounded border overflow-hidden bg-muted flex-shrink-0 flex items-center justify-center",children:e.jsx("img",{src:M.previewUrl,alt:M.name,className:"max-w-full max-h-full object-contain"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:M.name}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:M.emotion||""})]}),ee?e.jsx(ua,{className:"h-5 w-5 text-green-500 flex-shrink-0"}):e.jsx("div",{className:"h-5 w-5 rounded-full border-2 border-muted-foreground/30 flex-shrink-0"})]},M.id)})})}),e.jsx("div",{className:"border rounded-lg p-4",children:O?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-16 h-16 rounded border overflow-hidden bg-muted flex items-center justify-center",children:e.jsx("img",{src:O.previewUrl,alt:O.name,className:"max-w-full max-h-full object-contain"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium truncate",children:O.name}),w(O)&&e.jsxs(Ie,{variant:"outline",className:"text-green-600 border-green-600",children:[e.jsx(Wt,{className:"h-3 w-3 mr-1"}),""]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(S,{htmlFor:"multi-emotion",children:[" ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(ie,{id:"multi-emotion",value:O.emotion,onChange:M=>C(O.id,{emotion:M.target.value}),placeholder:",",className:O.emotion.trim()?"":"border-destructive"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"multi-description",children:""}),e.jsx(ie,{id:"multi-description",value:O.description,onChange:M=>C(O.id,{description:M.target.value}),placeholder:"..."})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(pt,{id:"multi-is-registered",checked:O.isRegistered,onCheckedChange:M=>C(O.id,{isRegistered:M===!0})}),e.jsx(S,{htmlFor:"multi-is-registered",className:"cursor-pointer text-sm",children:""})]})]}):e.jsx("div",{className:"h-full flex items-center justify-center text-muted-foreground",children:e.jsxs("div",{className:"text-center",children:[e.jsx(jg,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:""})]})})})]}),e.jsx(at,{children:e.jsx(_,{onClick:F,disabled:!L||b,children:b?"...":` (${k})`})})]})};return e.jsx(Fs,{open:n,onOpenChange:r,children:e.jsxs(Bs,{className:"max-w-3xl max-h-[90vh] overflow-hidden",children:[e.jsxs(Hs,{children:[e.jsxs(qs,{className:"flex items-center gap-2",children:[e.jsx(gi,{className:"h-5 w-5"}),d==="select"&&" - ",d==="edit-single"&&" - ",d==="edit-multiple"&&" - "]}),e.jsxs(et,{children:[d==="select"&&" JPGPNGGIFWebP  10MB",d==="edit-single"&&"",d==="edit-multiple"&&""]})]}),e.jsxs("div",{className:"overflow-y-auto pr-1",children:[d==="select"&&R(),d==="edit-single"&&z(),d==="edit-multiple"&&V()]})]})})}const Yl="/api/webui/expression";async function q1(){const n=await Te(`${Yl}/chats`,{});if(!n.ok){const r=await n.json();throw new Error(r.detail||"")}return n.json()}async function G1(n){const r=new URLSearchParams;n.page&&r.append("page",n.page.toString()),n.page_size&&r.append("page_size",n.page_size.toString()),n.search&&r.append("search",n.search),n.chat_id&&r.append("chat_id",n.chat_id);const i=await Te(`${Yl}/list?${r}`,{});if(!i.ok){const d=await i.json();throw new Error(d.detail||"")}return i.json()}async function $1(n){const r=await Te(`${Yl}/${n}`,{});if(!r.ok){const i=await r.json();throw new Error(i.detail||"")}return r.json()}async function F1(n){const r=await Te(`${Yl}/`,{method:"POST",body:JSON.stringify(n)});if(!r.ok){const i=await r.json();throw new Error(i.detail||"")}return r.json()}async function V1(n,r){const i=await Te(`${Yl}/${n}`,{method:"PATCH",body:JSON.stringify(r)});if(!i.ok){const d=await i.json();throw new Error(d.detail||"")}return i.json()}async function Q1(n){const r=await Te(`${Yl}/${n}`,{method:"DELETE"});if(!r.ok){const i=await r.json();throw new Error(i.detail||"")}return r.json()}async function I1(n){const r=await Te(`${Yl}/batch/delete`,{method:"POST",body:JSON.stringify({ids:n})});if(!r.ok){const i=await r.json();throw new Error(i.detail||"")}return r.json()}async function Y1(){const n=await Te(`${Yl}/stats/summary`,{});if(!n.ok){const r=await n.json();throw new Error(r.detail||"")}return n.json()}function K1(){const[n,r]=u.useState([]),[i,d]=u.useState(!0),[m,x]=u.useState(0),[f,p]=u.useState(1),[g,b]=u.useState(20),[j,y]=u.useState(""),[N,C]=u.useState(null),[w,L]=u.useState(!1),[O,U]=u.useState(!1),[F,R]=u.useState(!1),[z,V]=u.useState(null),[$,k]=u.useState(new Set),[M,ee]=u.useState(!1),[ge,ve]=u.useState(""),[je,be]=u.useState({total:0,recent_7days:0,chat_count:0,top_chats:{}}),[ye,Ne]=u.useState([]),[D,X]=u.useState(new Map),{toast:J}=Qs(),ce=async()=>{try{d(!0);const K=await G1({page:f,page_size:g,search:j||void 0});r(K.data),x(K.total)}catch(K){J({title:"",description:K instanceof Error?K.message:"",variant:"destructive"})}finally{d(!1)}},T=async()=>{try{const K=await Y1();K?.data&&be(K.data)}catch(K){console.error(":",K)}},re=async()=>{try{const K=await q1();if(K?.data){Ne(K.data);const Me=new Map;K.data.forEach(We=>{Me.set(We.chat_id,We.chat_name)}),X(Me)}}catch(K){console.error(":",K)}},he=K=>D.get(K)||K;u.useEffect(()=>{ce(),T(),re()},[f,g,j]);const ke=async K=>{try{const Me=await $1(K.id);C(Me.data),L(!0)}catch(Me){J({title:"",description:Me instanceof Error?Me.message:"",variant:"destructive"})}},Ce=K=>{C(K),U(!0)},ze=async K=>{try{await Q1(K.id),J({title:"",description:`: ${K.situation}`}),V(null),ce(),T()}catch(Me){J({title:"",description:Me instanceof Error?Me.message:"",variant:"destructive"})}},fe=K=>{const Me=new Set($);Me.has(K)?Me.delete(K):Me.add(K),k(Me)},te=()=>{$.size===n.length&&n.length>0?k(new Set):k(new Set(n.map(K=>K.id)))},ae=async()=>{try{await I1(Array.from($)),J({title:"",description:` ${$.size} `}),k(new Set),ee(!1),ce(),T()}catch(K){J({title:"",description:K instanceof Error?K.message:"",variant:"destructive"})}},q=()=>{const K=parseInt(ge),Me=Math.ceil(m/g);K>=1&&K<=Me?(p(K),ve("")):J({title:"",description:`1-${Me}`,variant:"destructive"})};return e.jsxs("div",{className:"h-[calc(100vh-4rem)] flex flex-col p-4 sm:p-6",children:[e.jsx("div",{className:"mb-4 sm:mb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold flex items-center gap-2",children:[e.jsx(Ql,{className:"h-8 w-8",strokeWidth:2}),""]}),e.jsx("p",{className:"text-muted-foreground mt-1 text-sm sm:text-base",children:""})]}),e.jsxs(_,{onClick:()=>R(!0),className:"gap-2",children:[e.jsx(ht,{className:"h-4 w-4"}),""]})]})}),e.jsx(Ze,{className:"flex-1",children:e.jsxs("div",{className:"space-y-4 sm:space-y-6 pr-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"rounded-lg border bg-card p-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:""}),e.jsx("div",{className:"text-2xl font-bold mt-1",children:je.total})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"7"}),e.jsx("div",{className:"text-2xl font-bold mt-1 text-green-600",children:je.recent_7days})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:""}),e.jsx("div",{className:"text-2xl font-bold mt-1 text-blue-600",children:je.chat_count})]})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4",children:[e.jsx(S,{htmlFor:"search",children:""}),e.jsx("div",{className:"flex flex-col sm:flex-row gap-2 mt-1.5",children:e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Gt,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(ie,{id:"search",placeholder:"...",value:j,onChange:K=>y(K.target.value),className:"pl-9"})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 mt-4 pt-4 border-t",children:[e.jsx("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:$.size>0&&e.jsxs("span",{children:[" ",$.size," "]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{htmlFor:"page-size",className:"text-sm whitespace-nowrap",children:""}),e.jsxs(He,{value:g.toString(),onValueChange:K=>{b(parseInt(K)),p(1),k(new Set)},children:[e.jsx(Ue,{id:"page-size",className:"w-20",children:e.jsx(qe,{})}),e.jsxs(Be,{children:[e.jsx(se,{value:"10",children:"10"}),e.jsx(se,{value:"20",children:"20"}),e.jsx(se,{value:"50",children:"50"}),e.jsx(se,{value:"100",children:"100"})]})]}),$.size>0&&e.jsxs(e.Fragment,{children:[e.jsx(_,{variant:"outline",size:"sm",onClick:()=>k(new Set),children:""}),e.jsxs(_,{variant:"destructive",size:"sm",onClick:()=>ee(!0),children:[e.jsx(ss,{className:"h-4 w-4 mr-1"}),""]})]})]})]})]}),e.jsxs("div",{className:"rounded-lg border bg-card",children:[e.jsx("div",{className:"hidden md:block",children:e.jsxs(pn,{children:[e.jsx(gn,{children:e.jsxs(ft,{children:[e.jsx(Pe,{className:"w-12",children:e.jsx(pt,{checked:$.size===n.length&&n.length>0,onCheckedChange:te})}),e.jsx(Pe,{children:""}),e.jsx(Pe,{children:""}),e.jsx(Pe,{children:""}),e.jsx(Pe,{className:"text-right",children:""})]})}),e.jsx(jn,{children:i?e.jsx(ft,{children:e.jsx(Qe,{colSpan:5,className:"text-center py-8 text-muted-foreground",children:"..."})}):n.length===0?e.jsx(ft,{children:e.jsx(Qe,{colSpan:5,className:"text-center py-8 text-muted-foreground",children:""})}):n.map(K=>e.jsxs(ft,{children:[e.jsx(Qe,{children:e.jsx(pt,{checked:$.has(K.id),onCheckedChange:()=>fe(K.id)})}),e.jsx(Qe,{className:"font-medium max-w-xs truncate",children:K.situation}),e.jsx(Qe,{className:"max-w-xs truncate",children:K.style}),e.jsx(Qe,{className:"max-w-[200px] truncate",title:he(K.chat_id),style:{wordBreak:"keep-all"},children:e.jsx("span",{className:"whitespace-nowrap overflow-hidden text-ellipsis block",children:he(K.chat_id)})}),e.jsx(Qe,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsxs(_,{variant:"default",size:"sm",onClick:()=>Ce(K),children:[e.jsx(fn,{className:"h-4 w-4 mr-1"}),""]}),e.jsx(_,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>ke(K),title:"",children:e.jsx(Vt,{className:"h-4 w-4"})}),e.jsxs(_,{size:"sm",onClick:()=>V(K),className:"bg-red-600 hover:bg-red-700 text-white",children:[e.jsx(ss,{className:"h-4 w-4 mr-1"}),""]})]})})]},K.id))})]})}),e.jsx("div",{className:"md:hidden space-y-3 p-4",children:i?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"..."}):n.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:""}):n.map(K=>e.jsxs("div",{className:"rounded-lg border bg-card p-4 space-y-3 overflow-hidden",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(pt,{checked:$.has(K.id),onCheckedChange:()=>fe(K.id),className:"mt-1"}),e.jsxs("div",{className:"min-w-0 flex-1 overflow-hidden space-y-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:""}),e.jsx("h3",{className:"font-semibold text-sm line-clamp-2 w-full break-all",title:K.situation,children:K.situation})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:""}),e.jsx("p",{className:"text-sm line-clamp-2 w-full break-all",title:K.style,children:K.style})]})]})]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:""}),e.jsx("p",{className:"text-sm truncate",title:he(K.chat_id),style:{wordBreak:"keep-all"},children:he(K.chat_id)})]}),e.jsxs("div",{className:"flex flex-wrap gap-1 pt-2 border-t overflow-hidden",children:[e.jsxs(_,{variant:"outline",size:"sm",onClick:()=>Ce(K),className:"text-xs px-2 py-1 h-auto flex-shrink-0",children:[e.jsx(fn,{className:"h-3 w-3 mr-1"}),""]}),e.jsx(_,{variant:"outline",size:"sm",onClick:()=>ke(K),className:"text-xs px-2 py-1 h-auto flex-shrink-0",children:e.jsx(Vt,{className:"h-3 w-3"})}),e.jsxs(_,{variant:"outline",size:"sm",onClick:()=>V(K),className:"text-xs px-2 py-1 h-auto flex-shrink-0 text-destructive hover:text-destructive",children:[e.jsx(ss,{className:"h-3 w-3 mr-1"}),""]})]})]},K.id))}),m>0&&e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 px-4 py-3 border-t",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:[" ",m,"  ",f," / ",Math.ceil(m/g)," "]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{variant:"outline",size:"sm",onClick:()=>p(1),disabled:f===1,className:"hidden sm:flex",children:e.jsx(mr,{className:"h-4 w-4"})}),e.jsxs(_,{variant:"outline",size:"sm",onClick:()=>p(f-1),disabled:f===1,children:[e.jsx(pl,{className:"h-4 w-4 sm:mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{type:"number",value:ge,onChange:K=>ve(K.target.value),onKeyDown:K=>K.key==="Enter"&&q(),placeholder:f.toString(),className:"w-16 h-8 text-center",min:1,max:Math.ceil(m/g)}),e.jsx(_,{variant:"outline",size:"sm",onClick:q,disabled:!ge,className:"h-8",children:""})]}),e.jsxs(_,{variant:"outline",size:"sm",onClick:()=>p(f+1),disabled:f>=Math.ceil(m/g),children:[e.jsx("span",{className:"hidden sm:inline",children:""}),e.jsx(Ya,{className:"h-4 w-4 sm:ml-1"})]}),e.jsx(_,{variant:"outline",size:"sm",onClick:()=>p(Math.ceil(m/g)),disabled:f>=Math.ceil(m/g),className:"hidden sm:flex",children:e.jsx(xr,{className:"h-4 w-4"})})]})]})]})]})}),e.jsx(X1,{expression:N,open:w,onOpenChange:L,chatNameMap:D}),e.jsx(J1,{open:F,onOpenChange:R,chatList:ye,onSuccess:()=>{ce(),T(),R(!1)}}),e.jsx(P1,{expression:N,open:O,onOpenChange:U,chatList:ye,onSuccess:()=>{ce(),T(),U(!1)}}),e.jsx(xs,{open:!!z,onOpenChange:()=>V(null),children:e.jsxs(rs,{children:[e.jsxs(is,{children:[e.jsx(os,{children:""}),e.jsxs(ds,{children:[' "',z?.situation,'"  ']})]}),e.jsxs(cs,{children:[e.jsx(ms,{children:""}),e.jsx(us,{onClick:()=>z&&ze(z),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:""})]})]})}),e.jsx(Z1,{open:M,onOpenChange:ee,onConfirm:ae,count:$.size})]})}function X1({expression:n,open:r,onOpenChange:i,chatNameMap:d}){if(!n)return null;const m=f=>f?new Date(f*1e3).toLocaleString("zh-CN"):"-",x=f=>d.get(f)||f;return e.jsx(Fs,{open:r,onOpenChange:i,children:e.jsxs(Bs,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(Hs,{children:[e.jsx(qs,{children:""}),e.jsx(et,{children:""})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(ci,{label:"",value:n.situation}),e.jsx(ci,{label:"",value:n.style}),e.jsx(ci,{label:"",value:x(n.chat_id)}),e.jsx(ci,{icon:or,label:"ID",value:n.id.toString(),mono:!0})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:e.jsx(ci,{icon:rr,label:"",value:m(n.create_date)})})]}),e.jsx(at,{children:e.jsx(_,{onClick:()=>i(!1),children:""})})]})})}function ci({icon:n,label:r,value:i,mono:d=!1}){return e.jsxs("div",{className:"space-y-1",children:[e.jsxs(S,{className:"text-xs text-muted-foreground flex items-center gap-1",children:[n&&e.jsx(n,{className:"h-3 w-3"}),r]}),e.jsx("div",{className:H("text-sm",d&&"font-mono",!i&&"text-muted-foreground"),children:i||"-"})]})}function J1({open:n,onOpenChange:r,chatList:i,onSuccess:d}){const[m,x]=u.useState({situation:"",style:"",chat_id:""}),[f,p]=u.useState(!1),{toast:g}=Qs(),b=async()=>{if(!m.situation||!m.style||!m.chat_id){g({title:"",description:"",variant:"destructive"});return}try{p(!0),await F1(m),g({title:"",description:""}),x({situation:"",style:"",chat_id:""}),d()}catch(j){g({title:"",description:j instanceof Error?j.message:"",variant:"destructive"})}finally{p(!1)}};return e.jsx(Fs,{open:n,onOpenChange:r,children:e.jsxs(Bs,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(Hs,{children:[e.jsx(qs,{children:""}),e.jsx(et,{children:""})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(S,{htmlFor:"situation",children:[" ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(ie,{id:"situation",value:m.situation,onChange:j=>x({...m,situation:j.target.value}),placeholder:""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(S,{htmlFor:"style",children:[" ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(ie,{id:"style",value:m.style,onChange:j=>x({...m,style:j.target.value}),placeholder:""})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(S,{htmlFor:"chat_id",children:[" ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs(He,{value:m.chat_id,onValueChange:j=>x({...m,chat_id:j}),children:[e.jsx(Ue,{children:e.jsx(qe,{placeholder:""})}),e.jsx(Be,{children:i.map(j=>e.jsx(se,{value:j.chat_id,children:e.jsxs("span",{className:"truncate",style:{wordBreak:"keep-all"},children:[j.chat_name,j.is_group&&e.jsx("span",{className:"text-muted-foreground ml-1",children:"()"})]})},j.chat_id))})]})]})]}),e.jsxs(at,{children:[e.jsx(_,{variant:"outline",onClick:()=>r(!1),children:""}),e.jsx(_,{onClick:b,disabled:f,children:f?"...":""})]})]})})}function P1({expression:n,open:r,onOpenChange:i,chatList:d,onSuccess:m}){const[x,f]=u.useState({}),[p,g]=u.useState(!1),{toast:b}=Qs();u.useEffect(()=>{n&&f({situation:n.situation,style:n.style,chat_id:n.chat_id})},[n]);const j=async()=>{if(n)try{g(!0),await V1(n.id,x),b({title:"",description:""}),m()}catch(y){b({title:"",description:y instanceof Error?y.message:"",variant:"destructive"})}finally{g(!1)}};return n?e.jsx(Fs,{open:r,onOpenChange:i,children:e.jsxs(Bs,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(Hs,{children:[e.jsx(qs,{children:""}),e.jsx(et,{children:""})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"edit_situation",children:""}),e.jsx(ie,{id:"edit_situation",value:x.situation||"",onChange:y=>f({...x,situation:y.target.value}),placeholder:""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"edit_style",children:""}),e.jsx(ie,{id:"edit_style",value:x.style||"",onChange:y=>f({...x,style:y.target.value}),placeholder:""})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"edit_chat_id",children:""}),e.jsxs(He,{value:x.chat_id||"",onValueChange:y=>f({...x,chat_id:y}),children:[e.jsx(Ue,{children:e.jsx(qe,{placeholder:""})}),e.jsx(Be,{children:d.map(y=>e.jsx(se,{value:y.chat_id,children:e.jsxs("span",{className:"truncate",style:{wordBreak:"keep-all"},children:[y.chat_name,y.is_group&&e.jsx("span",{className:"text-muted-foreground ml-1",children:"()"})]})},y.chat_id))})]})]})]}),e.jsxs(at,{children:[e.jsx(_,{variant:"outline",onClick:()=>i(!1),children:""}),e.jsx(_,{onClick:j,disabled:p,children:p?"...":""})]})]})}):null}function Z1({open:n,onOpenChange:r,onConfirm:i,count:d}){return e.jsx(xs,{open:n,onOpenChange:r,children:e.jsxs(rs,{children:[e.jsxs(is,{children:[e.jsx(os,{children:""}),e.jsxs(ds,{children:[" ",d," "]})]}),e.jsxs(cs,{children:[e.jsx(ms,{children:""}),e.jsx(us,{onClick:i,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:""})]})]})})}const gl="/api/webui/jargon";async function W1(){const n=await Te(`${gl}/chats`,{});if(!n.ok){const r=await n.json();throw new Error(r.detail||"")}return n.json()}async function e2(n){const r=new URLSearchParams;n.page&&r.append("page",n.page.toString()),n.page_size&&r.append("page_size",n.page_size.toString()),n.search&&r.append("search",n.search),n.chat_id&&r.append("chat_id",n.chat_id),n.is_jargon!==void 0&&n.is_jargon!==null&&r.append("is_jargon",n.is_jargon.toString()),n.is_global!==void 0&&r.append("is_global",n.is_global.toString());const i=await Te(`${gl}/list?${r}`,{});if(!i.ok){const d=await i.json();throw new Error(d.detail||"")}return i.json()}async function s2(n){const r=await Te(`${gl}/${n}`,{});if(!r.ok){const i=await r.json();throw new Error(i.detail||"")}return r.json()}async function t2(n){const r=await Te(`${gl}/`,{method:"POST",body:JSON.stringify(n)});if(!r.ok){const i=await r.json();throw new Error(i.detail||"")}return r.json()}async function a2(n,r){const i=await Te(`${gl}/${n}`,{method:"PATCH",body:JSON.stringify(r)});if(!i.ok){const d=await i.json();throw new Error(d.detail||"")}return i.json()}async function l2(n){const r=await Te(`${gl}/${n}`,{method:"DELETE"});if(!r.ok){const i=await r.json();throw new Error(i.detail||"")}return r.json()}async function n2(n){const r=await Te(`${gl}/batch/delete`,{method:"POST",body:JSON.stringify({ids:n})});if(!r.ok){const i=await r.json();throw new Error(i.detail||"")}return r.json()}async function r2(){const n=await Te(`${gl}/stats/summary`,{});if(!n.ok){const r=await n.json();throw new Error(r.detail||"")}return n.json()}async function i2(n,r){const i=new URLSearchParams;n.forEach(m=>i.append("ids",m.toString())),i.append("is_jargon",r.toString());const d=await Te(`${gl}/batch/set-jargon?${i}`,{method:"POST"});if(!d.ok){const m=await d.json();throw new Error(m.detail||"")}return d.json()}function c2(){const[n,r]=u.useState([]),[i,d]=u.useState(!0),[m,x]=u.useState(0),[f,p]=u.useState(1),[g,b]=u.useState(20),[j,y]=u.useState(""),[N,C]=u.useState("all"),[w,L]=u.useState("all"),[O,U]=u.useState(null),[F,R]=u.useState(!1),[z,V]=u.useState(!1),[$,k]=u.useState(!1),[M,ee]=u.useState(null),[ge,ve]=u.useState(new Set),[je,be]=u.useState(!1),[ye,Ne]=u.useState(""),[D,X]=u.useState({total:0,confirmed_jargon:0,confirmed_not_jargon:0,pending:0,global_count:0,complete_count:0,chat_count:0,top_chats:{}}),[J,ce]=u.useState([]),{toast:T}=Qs(),re=async()=>{try{d(!0);const E=await e2({page:f,page_size:g,search:j||void 0,chat_id:N==="all"?void 0:N,is_jargon:w==="all"?void 0:w==="true"?!0:w==="false"?!1:void 0});r(E.data),x(E.total)}catch(E){T({title:"",description:E instanceof Error?E.message:"",variant:"destructive"})}finally{d(!1)}},he=async()=>{try{const E=await r2();E?.data&&X(E.data)}catch(E){console.error(":",E)}},ke=async()=>{try{const E=await W1();E?.data&&ce(E.data)}catch(E){console.error(":",E)}};u.useEffect(()=>{re(),he(),ke()},[f,g,j,N,w]);const Ce=async E=>{try{const xe=await s2(E.id);U(xe.data),R(!0)}catch(xe){T({title:"",description:xe instanceof Error?xe.message:"",variant:"destructive"})}},ze=E=>{U(E),V(!0)},fe=async E=>{try{await l2(E.id),T({title:"",description:`: ${E.content}`}),ee(null),re(),he()}catch(xe){T({title:"",description:xe instanceof Error?xe.message:"",variant:"destructive"})}},te=E=>{const xe=new Set(ge);xe.has(E)?xe.delete(E):xe.add(E),ve(xe)},ae=()=>{ge.size===n.length&&n.length>0?ve(new Set):ve(new Set(n.map(E=>E.id)))},q=async()=>{try{await n2(Array.from(ge)),T({title:"",description:` ${ge.size} `}),ve(new Set),be(!1),re(),he()}catch(E){T({title:"",description:E instanceof Error?E.message:"",variant:"destructive"})}},K=async E=>{try{await i2(Array.from(ge),E),T({title:"",description:` ${ge.size} ${E?"":""}`}),ve(new Set),re(),he()}catch(xe){T({title:"",description:xe instanceof Error?xe.message:"",variant:"destructive"})}},Me=()=>{const E=parseInt(ye),xe=Math.ceil(m/g);E>=1&&E<=xe?(p(E),Ne("")):T({title:"",description:`1-${xe}`,variant:"destructive"})},We=E=>E===!0?e.jsxs(Ie,{variant:"default",className:"bg-green-600 hover:bg-green-700",children:[e.jsx(Wt,{className:"h-3 w-3 mr-1"}),""]}):E===!1?e.jsxs(Ie,{variant:"secondary",children:[e.jsx(hl,{className:"h-3 w-3 mr-1"}),""]}):e.jsxs(Ie,{variant:"outline",children:[e.jsx(gg,{className:"h-3 w-3 mr-1"}),""]});return e.jsxs("div",{className:"h-[calc(100vh-4rem)] flex flex-col p-4 sm:p-6",children:[e.jsx("div",{className:"mb-4 sm:mb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold flex items-center gap-2",children:[e.jsx(my,{className:"h-8 w-8",strokeWidth:2}),""]}),e.jsx("p",{className:"text-muted-foreground mt-1 text-sm sm:text-base",children:""})]}),e.jsxs(_,{onClick:()=>k(!0),className:"gap-2",children:[e.jsx(ht,{className:"h-4 w-4"}),""]})]})}),e.jsx(Ze,{className:"flex-1",children:e.jsxs("div",{className:"space-y-4 sm:space-y-6 pr-4",children:[e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 lg:grid-cols-7 gap-3",children:[e.jsxs("div",{className:"rounded-lg border bg-card p-3 sm:p-4",children:[e.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:""}),e.jsx("div",{className:"text-xl sm:text-2xl font-bold mt-1",children:D.total})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-3 sm:p-4",children:[e.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:""}),e.jsx("div",{className:"text-xl sm:text-2xl font-bold mt-1 text-green-600",children:D.confirmed_jargon})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-3 sm:p-4",children:[e.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:""}),e.jsx("div",{className:"text-xl sm:text-2xl font-bold mt-1 text-gray-500",children:D.confirmed_not_jargon})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-3 sm:p-4",children:[e.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:""}),e.jsx("div",{className:"text-xl sm:text-2xl font-bold mt-1 text-yellow-600",children:D.pending})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-3 sm:p-4",children:[e.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:""}),e.jsx("div",{className:"text-xl sm:text-2xl font-bold mt-1 text-blue-600",children:D.global_count})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-3 sm:p-4",children:[e.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:""}),e.jsx("div",{className:"text-xl sm:text-2xl font-bold mt-1 text-purple-600",children:D.complete_count})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-3 sm:p-4",children:[e.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:""}),e.jsx("div",{className:"text-xl sm:text-2xl font-bold mt-1",children:D.chat_count})]})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(S,{htmlFor:"search",children:""}),e.jsxs("div",{className:"relative",children:[e.jsx(Gt,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(ie,{id:"search",placeholder:"...",value:j,onChange:E=>y(E.target.value),className:"pl-9"})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(S,{children:""}),e.jsxs(He,{value:N,onValueChange:C,children:[e.jsx(Ue,{children:e.jsx(qe,{placeholder:""})}),e.jsxs(Be,{children:[e.jsx(se,{value:"all",children:""}),J.map(E=>e.jsx(se,{value:E.chat_id,children:E.chat_name},E.chat_id))]})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(S,{children:""}),e.jsxs(He,{value:w,onValueChange:L,children:[e.jsx(Ue,{children:e.jsx(qe,{placeholder:""})}),e.jsxs(Be,{children:[e.jsx(se,{value:"all",children:""}),e.jsx(se,{value:"true",children:""}),e.jsx(se,{value:"false",children:""})]})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(S,{htmlFor:"page-size",children:""}),e.jsxs(He,{value:g.toString(),onValueChange:E=>{b(parseInt(E)),p(1),ve(new Set)},children:[e.jsx(Ue,{id:"page-size",children:e.jsx(qe,{})}),e.jsxs(Be,{children:[e.jsx(se,{value:"10",children:"10"}),e.jsx(se,{value:"20",children:"20"}),e.jsx(se,{value:"50",children:"50"}),e.jsx(se,{value:"100",children:"100"})]})]})]})]}),ge.size>0&&e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-4 pt-4 border-t",children:[e.jsxs("span",{className:"text-sm text-muted-foreground",children:[" ",ge.size," "]}),e.jsxs(_,{variant:"outline",size:"sm",onClick:()=>K(!0),children:[e.jsx(Wt,{className:"h-4 w-4 mr-1"}),""]}),e.jsxs(_,{variant:"outline",size:"sm",onClick:()=>K(!1),children:[e.jsx(hl,{className:"h-4 w-4 mr-1"}),""]}),e.jsx(_,{variant:"outline",size:"sm",onClick:()=>ve(new Set),children:""}),e.jsxs(_,{variant:"destructive",size:"sm",onClick:()=>be(!0),children:[e.jsx(ss,{className:"h-4 w-4 mr-1"}),""]})]})]}),e.jsxs("div",{className:"rounded-lg border bg-card",children:[e.jsx("div",{className:"hidden md:block",children:e.jsxs(pn,{children:[e.jsx(gn,{children:e.jsxs(ft,{children:[e.jsx(Pe,{className:"w-12",children:e.jsx(pt,{checked:ge.size===n.length&&n.length>0,onCheckedChange:ae})}),e.jsx(Pe,{children:""}),e.jsx(Pe,{children:""}),e.jsx(Pe,{children:""}),e.jsx(Pe,{children:""}),e.jsx(Pe,{className:"text-center",children:""}),e.jsx(Pe,{className:"text-right",children:""})]})}),e.jsx(jn,{children:i?e.jsx(ft,{children:e.jsx(Qe,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:"..."})}):n.length===0?e.jsx(ft,{children:e.jsx(Qe,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:""})}):n.map(E=>e.jsxs(ft,{children:[e.jsx(Qe,{children:e.jsx(pt,{checked:ge.has(E.id),onCheckedChange:()=>te(E.id)})}),e.jsx(Qe,{className:"font-medium max-w-[200px]",children:e.jsxs("div",{className:"flex items-center gap-2",children:[E.is_global&&e.jsx("span",{title:"",children:e.jsx($u,{className:"h-4 w-4 text-blue-500 flex-shrink-0"})}),e.jsx("span",{className:"truncate",title:E.content,children:E.content})]})}),e.jsx(Qe,{className:"max-w-[200px] truncate",title:E.meaning||"",children:E.meaning||e.jsx("span",{className:"text-muted-foreground",children:"-"})}),e.jsx(Qe,{className:"max-w-[150px] truncate",title:E.chat_name||E.chat_id,children:E.chat_name||E.chat_id}),e.jsx(Qe,{children:We(E.is_jargon)}),e.jsx(Qe,{className:"text-center",children:E.count}),e.jsx(Qe,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsxs(_,{variant:"default",size:"sm",onClick:()=>ze(E),children:[e.jsx(fn,{className:"h-4 w-4 mr-1"}),""]}),e.jsx(_,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>Ce(E),title:"",children:e.jsx(Vt,{className:"h-4 w-4"})}),e.jsxs(_,{size:"sm",onClick:()=>ee(E),className:"bg-red-600 hover:bg-red-700 text-white",children:[e.jsx(ss,{className:"h-4 w-4 mr-1"}),""]})]})})]},E.id))})]})}),e.jsx("div",{className:"md:hidden space-y-3 p-4",children:i?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"..."}):n.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:""}):n.map(E=>e.jsxs("div",{className:"rounded-lg border bg-card p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(pt,{checked:ge.has(E.id),onCheckedChange:()=>te(E.id),className:"mt-1"}),e.jsxs("div",{className:"min-w-0 flex-1 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[E.is_global&&e.jsx($u,{className:"h-4 w-4 text-blue-500 flex-shrink-0"}),e.jsx("h3",{className:"font-semibold text-sm break-all",children:E.content})]}),E.meaning&&e.jsx("p",{className:"text-sm text-muted-foreground break-all",children:E.meaning}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs",children:[We(E.is_jargon),e.jsxs("span",{className:"text-muted-foreground",children:[": ",E.count]})]}),e.jsxs("div",{className:"text-xs text-muted-foreground truncate",children:[": ",E.chat_name||E.chat_id]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-1 pt-2 border-t",children:[e.jsxs(_,{variant:"outline",size:"sm",onClick:()=>ze(E),className:"text-xs px-2 py-1 h-auto",children:[e.jsx(fn,{className:"h-3 w-3 mr-1"}),""]}),e.jsx(_,{variant:"outline",size:"sm",onClick:()=>Ce(E),className:"text-xs px-2 py-1 h-auto",children:e.jsx(Vt,{className:"h-3 w-3"})}),e.jsxs(_,{variant:"outline",size:"sm",onClick:()=>ee(E),className:"text-xs px-2 py-1 h-auto text-destructive hover:text-destructive",children:[e.jsx(ss,{className:"h-3 w-3 mr-1"}),""]})]})]},E.id))}),m>0&&e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 px-4 py-3 border-t",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:[" ",m,"  ",f," / ",Math.ceil(m/g)," "]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{variant:"outline",size:"sm",onClick:()=>p(1),disabled:f===1,className:"hidden sm:flex",children:e.jsx(mr,{className:"h-4 w-4"})}),e.jsxs(_,{variant:"outline",size:"sm",onClick:()=>p(f-1),disabled:f===1,children:[e.jsx(pl,{className:"h-4 w-4 sm:mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{type:"number",value:ye,onChange:E=>Ne(E.target.value),onKeyDown:E=>E.key==="Enter"&&Me(),placeholder:f.toString(),className:"w-16 h-8 text-center",min:1,max:Math.ceil(m/g)}),e.jsx(_,{variant:"outline",size:"sm",onClick:Me,disabled:!ye,className:"h-8",children:""})]}),e.jsxs(_,{variant:"outline",size:"sm",onClick:()=>p(f+1),disabled:f>=Math.ceil(m/g),children:[e.jsx("span",{className:"hidden sm:inline",children:""}),e.jsx(Ya,{className:"h-4 w-4 sm:ml-1"})]}),e.jsx(_,{variant:"outline",size:"sm",onClick:()=>p(Math.ceil(m/g)),disabled:f>=Math.ceil(m/g),className:"hidden sm:flex",children:e.jsx(xr,{className:"h-4 w-4"})})]})]})]})]})}),e.jsx(o2,{jargon:O,open:F,onOpenChange:R}),e.jsx(d2,{open:$,onOpenChange:k,chatList:J,onSuccess:()=>{re(),he(),k(!1)}}),e.jsx(u2,{jargon:O,open:z,onOpenChange:V,chatList:J,onSuccess:()=>{re(),he(),V(!1)}}),e.jsx(xs,{open:!!M,onOpenChange:()=>ee(null),children:e.jsxs(rs,{children:[e.jsxs(is,{children:[e.jsx(os,{children:""}),e.jsxs(ds,{children:[' "',M?.content,'" ']})]}),e.jsxs(cs,{children:[e.jsx(ms,{children:""}),e.jsx(us,{onClick:()=>M&&fe(M),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:""})]})]})}),e.jsx(xs,{open:je,onOpenChange:be,children:e.jsxs(rs,{children:[e.jsxs(is,{children:[e.jsx(os,{children:""}),e.jsxs(ds,{children:[" ",ge.size," "]})]}),e.jsxs(cs,{children:[e.jsx(ms,{children:""}),e.jsx(us,{onClick:q,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:""})]})]})})]})}function o2({jargon:n,open:r,onOpenChange:i}){return n?e.jsx(Fs,{open:r,onOpenChange:i,children:e.jsxs(Bs,{className:"max-w-2xl max-h-[80vh] grid grid-rows-[auto_1fr_auto] overflow-hidden",children:[e.jsxs(Hs,{children:[e.jsx(qs,{children:""}),e.jsx(et,{children:""})]}),e.jsx(Ze,{className:"h-full pr-4",children:e.jsxs("div",{className:"space-y-4 pb-2",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(qu,{icon:or,label:"ID",value:n.id.toString(),mono:!0}),e.jsx(qu,{label:"",value:n.count.toString()})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(S,{className:"text-xs text-muted-foreground",children:""}),e.jsx("div",{className:"text-sm p-2 bg-muted rounded break-all whitespace-pre-wrap",children:n.content})]}),n.raw_content&&e.jsxs("div",{className:"space-y-1",children:[e.jsx(S,{className:"text-xs text-muted-foreground",children:""}),e.jsx("div",{className:"text-sm p-2 bg-muted rounded break-all",children:(()=>{try{const d=JSON.parse(n.raw_content);return Array.isArray(d)?d.map((m,x)=>e.jsxs("div",{children:[x>0&&e.jsx("hr",{className:"my-3 border-border"}),e.jsx("div",{className:"whitespace-pre-wrap",children:m})]},x)):e.jsx("div",{className:"whitespace-pre-wrap",children:n.raw_content})}catch{return e.jsx("div",{className:"whitespace-pre-wrap",children:n.raw_content})}})()})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(S,{className:"text-xs text-muted-foreground",children:""}),e.jsx("div",{className:"text-sm p-2 bg-muted rounded break-all",children:n.meaning?e.jsx(Kg,{content:n.meaning}):"-"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(qu,{label:"",value:n.chat_name||n.chat_id}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(S,{className:"text-xs text-muted-foreground",children:""}),e.jsxs("div",{className:"flex items-center gap-2",children:[n.is_jargon===!0&&e.jsx(Ie,{variant:"default",className:"bg-green-600",children:""}),n.is_jargon===!1&&e.jsx(Ie,{variant:"secondary",children:""}),n.is_jargon===null&&e.jsx(Ie,{variant:"outline",children:""}),n.is_global&&e.jsx(Ie,{variant:"outline",className:"border-blue-500 text-blue-500",children:""}),n.is_complete&&e.jsx(Ie,{variant:"outline",className:"border-purple-500 text-purple-500",children:""})]})]})]}),n.inference_with_context&&e.jsxs("div",{className:"space-y-1",children:[e.jsx(S,{className:"text-xs text-muted-foreground",children:""}),e.jsx("div",{className:"p-2 bg-muted rounded break-all whitespace-pre-wrap font-mono text-xs max-h-[200px] overflow-y-auto",children:n.inference_with_context})]}),n.inference_content_only&&e.jsxs("div",{className:"space-y-1",children:[e.jsx(S,{className:"text-xs text-muted-foreground",children:""}),e.jsx("div",{className:"p-2 bg-muted rounded break-all whitespace-pre-wrap font-mono text-xs max-h-[200px] overflow-y-auto",children:n.inference_content_only})]})]})}),e.jsx(at,{className:"flex-shrink-0",children:e.jsx(_,{onClick:()=>i(!1),children:""})})]})}):null}function qu({icon:n,label:r,value:i,mono:d=!1}){return e.jsxs("div",{className:"space-y-1",children:[e.jsxs(S,{className:"text-xs text-muted-foreground flex items-center gap-1",children:[n&&e.jsx(n,{className:"h-3 w-3"}),r]}),e.jsx("div",{className:H("text-sm",d&&"font-mono",!i&&"text-muted-foreground"),children:i||"-"})]})}function d2({open:n,onOpenChange:r,chatList:i,onSuccess:d}){const[m,x]=u.useState({content:"",meaning:"",chat_id:"",is_global:!1}),[f,p]=u.useState(!1),{toast:g}=Qs(),b=async()=>{if(!m.content||!m.chat_id){g({title:"",description:"",variant:"destructive"});return}try{p(!0),await t2(m),g({title:"",description:""}),x({content:"",meaning:"",chat_id:"",is_global:!1}),d()}catch(j){g({title:"",description:j instanceof Error?j.message:"",variant:"destructive"})}finally{p(!1)}};return e.jsx(Fs,{open:n,onOpenChange:r,children:e.jsxs(Bs,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(Hs,{children:[e.jsx(qs,{children:""}),e.jsx(et,{children:""})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(S,{htmlFor:"content",children:[" ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(ie,{id:"content",value:m.content,onChange:j=>x({...m,content:j.target.value}),placeholder:""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"meaning",children:""}),e.jsx(Ys,{id:"meaning",value:m.meaning||"",onChange:j=>x({...m,meaning:j.target.value}),placeholder:"",rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(S,{htmlFor:"chat_id",children:[" ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs(He,{value:m.chat_id,onValueChange:j=>x({...m,chat_id:j}),children:[e.jsx(Ue,{children:e.jsx(qe,{placeholder:""})}),e.jsx(Be,{children:i.map(j=>e.jsx(se,{value:j.chat_id,children:j.chat_name},j.chat_id))})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{id:"is_global",checked:m.is_global,onCheckedChange:j=>x({...m,is_global:j})}),e.jsx(S,{htmlFor:"is_global",children:""})]})]}),e.jsxs(at,{children:[e.jsx(_,{variant:"outline",onClick:()=>r(!1),children:""}),e.jsx(_,{onClick:b,disabled:f,children:f?"...":""})]})]})})}function u2({jargon:n,open:r,onOpenChange:i,chatList:d,onSuccess:m}){const[x,f]=u.useState({}),[p,g]=u.useState(!1),{toast:b}=Qs();u.useEffect(()=>{n&&f({content:n.content,meaning:n.meaning||"",chat_id:n.stream_id||n.chat_id,is_global:n.is_global,is_jargon:n.is_jargon})},[n]);const j=async()=>{if(n)try{g(!0),await a2(n.id,x),b({title:"",description:""}),m()}catch(y){b({title:"",description:y instanceof Error?y.message:"",variant:"destructive"})}finally{g(!1)}};return n?e.jsx(Fs,{open:r,onOpenChange:i,children:e.jsxs(Bs,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(Hs,{children:[e.jsx(qs,{children:""}),e.jsx(et,{children:""})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"edit_content",children:""}),e.jsx(ie,{id:"edit_content",value:x.content||"",onChange:y=>f({...x,content:y.target.value}),placeholder:""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"edit_meaning",children:""}),e.jsx(Ys,{id:"edit_meaning",value:x.meaning||"",onChange:y=>f({...x,meaning:y.target.value}),placeholder:"",rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"edit_chat_id",children:""}),e.jsxs(He,{value:x.chat_id||"",onValueChange:y=>f({...x,chat_id:y}),children:[e.jsx(Ue,{children:e.jsx(qe,{placeholder:""})}),e.jsx(Be,{children:d.map(y=>e.jsx(se,{value:y.chat_id,children:y.chat_name},y.chat_id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{children:""}),e.jsxs(He,{value:x.is_jargon===null?"null":x.is_jargon?.toString()||"null",onValueChange:y=>f({...x,is_jargon:y==="null"?null:y==="true"}),children:[e.jsx(Ue,{children:e.jsx(qe,{})}),e.jsxs(Be,{children:[e.jsx(se,{value:"null",children:""}),e.jsx(se,{value:"true",children:""}),e.jsx(se,{value:"false",children:""})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{id:"edit_is_global",checked:x.is_global,onCheckedChange:y=>f({...x,is_global:y})}),e.jsx(S,{htmlFor:"edit_is_global",children:""})]})]}),e.jsxs(at,{children:[e.jsx(_,{variant:"outline",onClick:()=>i(!1),children:""}),e.jsx(_,{onClick:j,disabled:p,children:p?"...":""})]})]})}):null}const fr="/api/webui/person";async function m2(n){const r=new URLSearchParams;n.page&&r.append("page",n.page.toString()),n.page_size&&r.append("page_size",n.page_size.toString()),n.search&&r.append("search",n.search),n.is_known!==void 0&&r.append("is_known",n.is_known.toString()),n.platform&&r.append("platform",n.platform);const i=await Te(`${fr}/list?${r}`,{headers:Vs()});if(!i.ok){const d=await i.json();throw new Error(d.detail||"")}return i.json()}async function x2(n){const r=await Te(`${fr}/${n}`,{headers:Vs()});if(!r.ok){const i=await r.json();throw new Error(i.detail||"")}return r.json()}async function h2(n,r){const i=await Te(`${fr}/${n}`,{method:"PATCH",headers:Vs(),body:JSON.stringify(r)});if(!i.ok){const d=await i.json();throw new Error(d.detail||"")}return i.json()}async function f2(n){const r=await Te(`${fr}/${n}`,{method:"DELETE",headers:Vs()});if(!r.ok){const i=await r.json();throw new Error(i.detail||"")}return r.json()}async function p2(){const n=await Te(`${fr}/stats/summary`,{headers:Vs()});if(!n.ok){const r=await n.json();throw new Error(r.detail||"")}return n.json()}async function g2(n){const r=await Te(`${fr}/batch/delete`,{method:"POST",headers:Vs(),body:JSON.stringify({person_ids:n})});if(!r.ok){const i=await r.json();throw new Error(i.detail||"")}return r.json()}function j2(){const[n,r]=u.useState([]),[i,d]=u.useState(!0),[m,x]=u.useState(0),[f,p]=u.useState(1),[g,b]=u.useState(20),[j,y]=u.useState(""),[N,C]=u.useState(void 0),[w,L]=u.useState(void 0),[O,U]=u.useState(null),[F,R]=u.useState(!1),[z,V]=u.useState(!1),[$,k]=u.useState(null),[M,ee]=u.useState({total:0,known:0,unknown:0,platforms:{}}),[ge,ve]=u.useState(new Set),[je,be]=u.useState(!1),[ye,Ne]=u.useState(""),{toast:D}=Qs(),X=async()=>{try{d(!0);const q=await m2({page:f,page_size:g,search:j||void 0,is_known:N,platform:w});r(q.data),x(q.total)}catch(q){D({title:"",description:q instanceof Error?q.message:"",variant:"destructive"})}finally{d(!1)}},J=async()=>{try{const q=await p2();q?.data&&ee(q.data)}catch(q){console.error(":",q)}};u.useEffect(()=>{X(),J()},[f,g,j,N,w]);const ce=async q=>{try{const K=await x2(q.person_id);U(K.data),R(!0)}catch(K){D({title:"",description:K instanceof Error?K.message:"",variant:"destructive"})}},T=q=>{U(q),V(!0)},re=async q=>{try{await f2(q.person_id),D({title:"",description:`: ${q.person_name||q.nickname||q.user_id}`}),k(null),X(),J()}catch(K){D({title:"",description:K instanceof Error?K.message:"",variant:"destructive"})}},he=u.useMemo(()=>Object.keys(M.platforms),[M.platforms]),ke=q=>{const K=new Set(ge);K.has(q)?K.delete(q):K.add(q),ve(K)},Ce=()=>{ge.size===n.length&&n.length>0?ve(new Set):ve(new Set(n.map(q=>q.person_id)))},ze=()=>{if(ge.size===0){D({title:"",description:"",variant:"destructive"});return}be(!0)},fe=async()=>{try{const q=await g2(Array.from(ge));D({title:"",description:q.message}),ve(new Set),be(!1),X(),J()}catch(q){D({title:"",description:q instanceof Error?q.message:"",variant:"destructive"})}},te=()=>{const q=parseInt(ye),K=Math.ceil(m/g);q>=1&&q<=K?(p(q),Ne("")):D({title:"",description:`1-${K}`,variant:"destructive"})},ae=q=>q?new Date(q*1e3).toLocaleString("zh-CN"):"-";return e.jsxs("div",{className:"h-[calc(100vh-4rem)] flex flex-col p-4 sm:p-6",children:[e.jsx("div",{className:"mb-4 sm:mb-6",children:e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold flex items-center gap-2",children:[e.jsx(Fu,{className:"h-8 w-8",strokeWidth:2}),""]}),e.jsx("p",{className:"text-muted-foreground mt-1 text-sm sm:text-base",children:""})]})})}),e.jsx(Ze,{className:"flex-1",children:e.jsxs("div",{className:"space-y-4 sm:space-y-6 pr-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"rounded-lg border bg-card p-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:""}),e.jsx("div",{className:"text-2xl font-bold mt-1",children:M.total})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:""}),e.jsx("div",{className:"text-2xl font-bold mt-1 text-green-600",children:M.known})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:""}),e.jsx("div",{className:"text-2xl font-bold mt-1 text-muted-foreground",children:M.unknown})]})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx(S,{htmlFor:"search",children:""}),e.jsxs("div",{className:"relative mt-1.5",children:[e.jsx(Gt,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(ie,{id:"search",placeholder:"ID...",value:j,onChange:q=>y(q.target.value),className:"pl-9"})]})]}),e.jsxs("div",{children:[e.jsx(S,{htmlFor:"filter-known",children:""}),e.jsxs(He,{value:N===void 0?"all":N.toString(),onValueChange:q=>{C(q==="all"?void 0:q==="true"),p(1)},children:[e.jsx(Ue,{id:"filter-known",className:"mt-1.5",children:e.jsx(qe,{})}),e.jsxs(Be,{children:[e.jsx(se,{value:"all",children:""}),e.jsx(se,{value:"true",children:""}),e.jsx(se,{value:"false",children:""})]})]})]}),e.jsxs("div",{children:[e.jsx(S,{htmlFor:"filter-platform",children:""}),e.jsxs(He,{value:w||"all",onValueChange:q=>{L(q==="all"?void 0:q),p(1)},children:[e.jsx(Ue,{id:"filter-platform",className:"mt-1.5",children:e.jsx(qe,{})}),e.jsxs(Be,{children:[e.jsx(se,{value:"all",children:""}),he.map(q=>e.jsxs(se,{value:q,children:[q," (",M.platforms[q],")"]},q))]})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 mt-4 pt-4 border-t",children:[e.jsx("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:ge.size>0&&e.jsxs("span",{children:[" ",ge.size," "]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{htmlFor:"page-size",className:"text-sm whitespace-nowrap",children:""}),e.jsxs(He,{value:g.toString(),onValueChange:q=>{b(parseInt(q)),p(1),ve(new Set)},children:[e.jsx(Ue,{id:"page-size",className:"w-20",children:e.jsx(qe,{})}),e.jsxs(Be,{children:[e.jsx(se,{value:"10",children:"10"}),e.jsx(se,{value:"20",children:"20"}),e.jsx(se,{value:"50",children:"50"}),e.jsx(se,{value:"100",children:"100"})]})]}),ge.size>0&&e.jsxs(e.Fragment,{children:[e.jsx(_,{variant:"outline",size:"sm",onClick:()=>ve(new Set),children:""}),e.jsxs(_,{variant:"destructive",size:"sm",onClick:ze,children:[e.jsx(ss,{className:"h-4 w-4 mr-1"}),""]})]})]})]})]}),e.jsxs("div",{className:"rounded-lg border bg-card",children:[e.jsx("div",{className:"hidden md:block",children:e.jsxs(pn,{children:[e.jsx(gn,{children:e.jsxs(ft,{children:[e.jsx(Pe,{className:"w-12",children:e.jsx(pt,{checked:n.length>0&&ge.size===n.length,onCheckedChange:Ce,"aria-label":""})}),e.jsx(Pe,{children:""}),e.jsx(Pe,{children:""}),e.jsx(Pe,{children:""}),e.jsx(Pe,{children:""}),e.jsx(Pe,{children:"ID"}),e.jsx(Pe,{children:""}),e.jsx(Pe,{className:"text-right",children:""})]})}),e.jsx(jn,{children:i?e.jsx(ft,{children:e.jsx(Qe,{colSpan:8,className:"text-center py-8 text-muted-foreground",children:"..."})}):n.length===0?e.jsx(ft,{children:e.jsx(Qe,{colSpan:8,className:"text-center py-8 text-muted-foreground",children:""})}):n.map(q=>e.jsxs(ft,{children:[e.jsx(Qe,{children:e.jsx(pt,{checked:ge.has(q.person_id),onCheckedChange:()=>ke(q.person_id),"aria-label":` ${q.person_name||q.nickname||q.user_id}`})}),e.jsx(Qe,{children:e.jsx("div",{className:H("inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium",q.is_known?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-400"),children:q.is_known?"":""})}),e.jsx(Qe,{className:"font-medium",children:q.person_name||e.jsx("span",{className:"text-muted-foreground",children:"-"})}),e.jsx(Qe,{children:q.nickname||"-"}),e.jsx(Qe,{children:q.platform}),e.jsx(Qe,{className:"font-mono text-sm",children:q.user_id}),e.jsx(Qe,{className:"text-sm text-muted-foreground",children:ae(q.last_know)}),e.jsx(Qe,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsxs(_,{variant:"default",size:"sm",onClick:()=>ce(q),children:[e.jsx(Vt,{className:"h-4 w-4 mr-1"}),""]}),e.jsxs(_,{variant:"default",size:"sm",onClick:()=>T(q),children:[e.jsx(fn,{className:"h-4 w-4 mr-1"}),""]}),e.jsxs(_,{size:"sm",onClick:()=>k(q),className:"bg-red-600 hover:bg-red-700 text-white",children:[e.jsx(ss,{className:"h-4 w-4 mr-1"}),""]})]})})]},q.id))})]})}),e.jsx("div",{className:"md:hidden space-y-3 p-4",children:i?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"..."}):n.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:""}):n.map(q=>e.jsxs("div",{className:"rounded-lg border bg-card p-4 space-y-3 overflow-hidden",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(pt,{checked:ge.has(q.person_id),onCheckedChange:()=>ke(q.person_id),className:"mt-1"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:H("inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium mb-2",q.is_known?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-400"),children:q.is_known?"":""}),e.jsx("h3",{className:"font-semibold text-sm line-clamp-1 w-full break-all",children:q.person_name||e.jsx("span",{className:"text-muted-foreground",children:""})}),q.nickname&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1 line-clamp-1 w-full break-all",children:[": ",q.nickname]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:""}),e.jsx("p",{className:"font-medium text-xs",children:q.platform})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"ID"}),e.jsx("p",{className:"font-mono text-xs truncate",title:q.user_id,children:q.user_id})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:""}),e.jsx("p",{className:"text-xs",children:ae(q.last_know)})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-1 pt-2 border-t overflow-hidden",children:[e.jsxs(_,{variant:"outline",size:"sm",onClick:()=>ce(q),className:"text-xs px-2 py-1 h-auto flex-shrink-0",children:[e.jsx(Vt,{className:"h-3 w-3 mr-1"}),""]}),e.jsxs(_,{variant:"outline",size:"sm",onClick:()=>T(q),className:"text-xs px-2 py-1 h-auto flex-shrink-0",children:[e.jsx(fn,{className:"h-3 w-3 mr-1"}),""]}),e.jsxs(_,{variant:"outline",size:"sm",onClick:()=>k(q),className:"text-xs px-2 py-1 h-auto flex-shrink-0 text-destructive hover:text-destructive",children:[e.jsx(ss,{className:"h-3 w-3 mr-1"}),""]})]})]},q.id))}),m>0&&e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 px-4 py-3 border-t",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:[" ",m,"  ",f," / ",Math.ceil(m/g)," "]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{variant:"outline",size:"sm",onClick:()=>p(1),disabled:f===1,className:"hidden sm:flex",children:e.jsx(mr,{className:"h-4 w-4"})}),e.jsxs(_,{variant:"outline",size:"sm",onClick:()=>p(f-1),disabled:f===1,children:[e.jsx(pl,{className:"h-4 w-4 sm:mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{type:"number",value:ye,onChange:q=>Ne(q.target.value),onKeyDown:q=>q.key==="Enter"&&te(),placeholder:f.toString(),className:"w-16 h-8 text-center",min:1,max:Math.ceil(m/g)}),e.jsx(_,{variant:"outline",size:"sm",onClick:te,disabled:!ye,className:"h-8",children:""})]}),e.jsxs(_,{variant:"outline",size:"sm",onClick:()=>p(f+1),disabled:f>=Math.ceil(m/g),children:[e.jsx("span",{className:"hidden sm:inline",children:""}),e.jsx(Ya,{className:"h-4 w-4 sm:ml-1"})]}),e.jsx(_,{variant:"outline",size:"sm",onClick:()=>p(Math.ceil(m/g)),disabled:f>=Math.ceil(m/g),className:"hidden sm:flex",children:e.jsx(xr,{className:"h-4 w-4"})})]})]})]})]})}),e.jsx(v2,{person:O,open:F,onOpenChange:R}),e.jsx(b2,{person:O,open:z,onOpenChange:V,onSuccess:()=>{X(),J(),V(!1)}}),e.jsx(xs,{open:!!$,onOpenChange:()=>k(null),children:e.jsxs(rs,{children:[e.jsxs(is,{children:[e.jsx(os,{children:""}),e.jsxs(ds,{children:[' "',$?.person_name||$?.nickname||$?.user_id,'"  ']})]}),e.jsxs(cs,{children:[e.jsx(ms,{children:""}),e.jsx(us,{onClick:()=>$&&re($),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:""})]})]})}),e.jsx(xs,{open:je,onOpenChange:be,children:e.jsxs(rs,{children:[e.jsxs(is,{children:[e.jsx(os,{children:""}),e.jsxs(ds,{children:[" ",ge.size,"  "]})]}),e.jsxs(cs,{children:[e.jsx(ms,{children:""}),e.jsx(us,{onClick:fe,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:""})]})]})})]})}function v2({person:n,open:r,onOpenChange:i}){if(!n)return null;const d=m=>m?new Date(m*1e3).toLocaleString("zh-CN"):"-";return e.jsx(Fs,{open:r,onOpenChange:i,children:e.jsxs(Bs,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(Hs,{children:[e.jsx(qs,{children:""}),e.jsxs(et,{children:[" ",n.person_name||n.nickname||n.user_id," "]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(ml,{icon:Wc,label:"",value:n.person_name}),e.jsx(ml,{icon:Ql,label:"",value:n.nickname}),e.jsx(ml,{icon:or,label:"ID",value:n.user_id,mono:!0}),e.jsx(ml,{icon:or,label:"ID",value:n.person_id,mono:!0}),e.jsx(ml,{label:"",value:n.platform}),e.jsx(ml,{label:"",value:n.is_known?"":""})]}),n.name_reason&&e.jsxs("div",{className:"rounded-lg border bg-muted/50 p-3",children:[e.jsx(S,{className:"text-xs text-muted-foreground",children:""}),e.jsx("p",{className:"mt-1 text-sm",children:n.name_reason})]}),n.memory_points&&e.jsxs("div",{className:"rounded-lg border bg-muted/50 p-3",children:[e.jsx(S,{className:"text-xs text-muted-foreground",children:""}),e.jsx("p",{className:"mt-1 text-sm whitespace-pre-wrap",children:n.memory_points})]}),n.group_nick_name&&n.group_nick_name.length>0&&e.jsxs("div",{className:"rounded-lg border bg-muted/50 p-3",children:[e.jsx(S,{className:"text-xs text-muted-foreground",children:""}),e.jsx("div",{className:"mt-2 space-y-1",children:n.group_nick_name.map((m,x)=>e.jsxs("div",{className:"text-sm flex items-center gap-2",children:[e.jsx("span",{className:"font-mono text-xs text-muted-foreground",children:m.group_id}),e.jsx("span",{children:""}),e.jsx("span",{children:m.group_nick_name})]},x))})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx(ml,{icon:rr,label:"",value:d(n.know_times)}),e.jsx(ml,{icon:rr,label:"",value:d(n.know_since)}),e.jsx(ml,{icon:rr,label:"",value:d(n.last_know)})]})]}),e.jsx(at,{children:e.jsx(_,{onClick:()=>i(!1),children:""})})]})})}function ml({icon:n,label:r,value:i,mono:d=!1}){return e.jsxs("div",{className:"space-y-1",children:[e.jsxs(S,{className:"text-xs text-muted-foreground flex items-center gap-1",children:[n&&e.jsx(n,{className:"h-3 w-3"}),r]}),e.jsx("div",{className:H("text-sm",d&&"font-mono",!i&&"text-muted-foreground"),children:i||"-"})]})}function b2({person:n,open:r,onOpenChange:i,onSuccess:d}){const[m,x]=u.useState({}),[f,p]=u.useState(!1),{toast:g}=Qs();u.useEffect(()=>{n&&x({person_name:n.person_name||"",name_reason:n.name_reason||"",nickname:n.nickname||"",memory_points:n.memory_points||"",is_known:n.is_known})},[n]);const b=async()=>{if(n)try{p(!0),await h2(n.person_id,m),g({title:"",description:""}),d()}catch(j){g({title:"",description:j instanceof Error?j.message:"",variant:"destructive"})}finally{p(!1)}};return n?e.jsx(Fs,{open:r,onOpenChange:i,children:e.jsxs(Bs,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(Hs,{children:[e.jsx(qs,{children:""}),e.jsxs(et,{children:[" ",n.person_name||n.nickname||n.user_id," "]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"person_name",children:""}),e.jsx(ie,{id:"person_name",value:m.person_name||"",onChange:j=>x({...m,person_name:j.target.value}),placeholder:""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"nickname",children:""}),e.jsx(ie,{id:"nickname",value:m.nickname||"",onChange:j=>x({...m,nickname:j.target.value}),placeholder:""})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"name_reason",children:""}),e.jsx(Ys,{id:"name_reason",value:m.name_reason||"",onChange:j=>x({...m,name_reason:j.target.value}),placeholder:"",rows:2})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"memory_points",children:""}),e.jsx(Ys,{id:"memory_points",value:m.memory_points||"",onChange:j=>x({...m,memory_points:j.target.value}),placeholder:"...",rows:4})]}),e.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3",children:[e.jsxs("div",{children:[e.jsx(S,{htmlFor:"is_known",className:"text-base font-medium",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),e.jsx(Fe,{id:"is_known",checked:m.is_known,onCheckedChange:j=>x({...m,is_known:j})})]})]}),e.jsxs(at,{children:[e.jsx(_,{variant:"outline",onClick:()=>i(!1),children:""}),e.jsx(_,{onClick:b,disabled:f,children:f?"...":""})]})]})}):null}var N2=Zy();const bp=Yb(N2),am="/api/webui";async function y2(n=100,r="all"){const i=`${am}/knowledge/graph?limit=${n}&node_type=${r}`,d=await fetch(i);if(!d.ok)throw new Error(`: ${d.status}`);return d.json()}async function w2(){const n=await fetch(`${am}/knowledge/stats`);if(!n.ok)throw new Error("");return n.json()}async function _2(n){const r=await fetch(`${am}/knowledge/search?query=${encodeURIComponent(n)}`);if(!r.ok)throw new Error("");return r.json()}const Xg=u.memo(({data:n})=>e.jsxs("div",{className:"px-4 py-2 shadow-md rounded-lg bg-gradient-to-br from-blue-500 to-blue-600 border-2 border-blue-700 min-w-[120px]",children:[e.jsx(eo,{type:"target",position:so.Top}),e.jsx("div",{className:"font-semibold text-white text-sm truncate max-w-[200px]",title:n.content,children:n.label}),e.jsx(eo,{type:"source",position:so.Bottom})]}));Xg.displayName="EntityNode";const Jg=u.memo(({data:n})=>e.jsxs("div",{className:"px-3 py-2 shadow-md rounded-md bg-gradient-to-br from-green-500 to-green-600 border-2 border-green-700 min-w-[100px]",children:[e.jsx(eo,{type:"target",position:so.Top}),e.jsx("div",{className:"font-medium text-white text-xs truncate max-w-[150px]",title:n.content,children:n.label}),e.jsx(eo,{type:"source",position:so.Bottom})]}));Jg.displayName="ParagraphNode";const S2={entity:Xg,paragraph:Jg};function C2(n,r){const i=new bp.graphlib.Graph;i.setDefaultEdgeLabel(()=>({})),i.setGraph({rankdir:"TB",ranksep:100,nodesep:80});const d=[],m=[];return n.forEach(x=>{i.setNode(x.id,{width:150,height:50})}),r.forEach(x=>{i.setEdge(x.source,x.target)}),bp.layout(i),n.forEach(x=>{const f=i.node(x.id);d.push({id:x.id,type:x.type,position:{x:f.x-75,y:f.y-25},data:{label:x.content.slice(0,20)+(x.content.length>20?"...":""),content:x.content}})}),r.forEach((x,f)=>{const p={id:`edge-${f}`,source:x.source,target:x.target,animated:n.length<=200&&x.weight>5,style:{strokeWidth:Math.min(x.weight/2,5),opacity:.6}};x.weight>10&&n.length<100&&(p.label=`${x.weight.toFixed(0)}`),m.push(p)}),{nodes:d,edges:m}}function k2(){const n=Ta(),[r,i]=u.useState(!1),[d,m]=u.useState(null),[x,f]=u.useState(""),[p,g]=u.useState("all"),[b,j]=u.useState(50),[y,N]=u.useState("50"),[C,w]=u.useState(!1),[L,O]=u.useState(!0),[U,F]=u.useState(!1),[R,z]=u.useState(!1),[V,$,k]=Wy([]),[M,ee,ge]=e0([]),[ve,je]=u.useState(0),[be,ye]=u.useState(null),[Ne,D]=u.useState(null),{toast:X}=Qs(),J=u.useCallback(fe=>fe.type==="entity"?"#6366f1":fe.type==="paragraph"?"#10b981":"#6b7280",[]),ce=u.useCallback(async(fe=!1)=>{try{if(!fe&&b>200){z(!0);return}i(!0);const[te,ae]=await Promise.all([y2(b,p),w2()]);if(m(ae),te.nodes.length===0){X({title:"",description:""}),$([]),ee([]);return}const{nodes:q,edges:K}=C2(te.nodes,te.edges);$(q),ee(K),je(q.length),ae&&ae.total_nodes>b&&X({title:"",description:` ${ae.total_nodes}  ${q.length} `}),X({title:"",description:` ${q.length} ${K.length} `})}catch(te){console.error(":",te),X({title:"",description:te instanceof Error?te.message:"",variant:"destructive"})}finally{i(!1)}},[b,p,X]),T=u.useCallback(async()=>{if(!x.trim()){X({title:"",description:""});return}try{const fe=await _2(x);if(fe.length===0){X({title:"",description:""});return}const te=new Set(fe.map(ae=>ae.id));$(ae=>ae.map(q=>({...q,style:{...q.style,opacity:te.has(q.id)?1:.3,filter:te.has(q.id)?"brightness(1.2)":"brightness(0.8)"}}))),X({title:"",description:` ${fe.length} `})}catch(fe){console.error(":",fe),X({title:"",description:fe instanceof Error?fe.message:"",variant:"destructive"})}},[x,X]),re=u.useCallback(()=>{$(fe=>fe.map(te=>({...te,style:{...te.style,opacity:1,filter:"brightness(1)"}})))},[]),he=u.useCallback(()=>{O(!1),F(!0),ce()},[ce]),ke=u.useCallback(()=>{z(!1),setTimeout(()=>{ce(!0)},0)},[ce]),Ce=u.useCallback((fe,te)=>{V.find(q=>q.id===te.id)&&ye({id:te.id,type:te.type,content:te.data.content})},[V]);u.useEffect(()=>{L||U&&ce()},[b,p,L,U]);const ze=u.useCallback((fe,te)=>{const ae=V.find(Me=>Me.id===te.source),q=V.find(Me=>Me.id===te.target),K=M.find(Me=>Me.id===te.id);ae&&q&&K&&D({source:{id:ae.id,type:ae.type,content:ae.data.content},target:{id:q.id,type:q.type,content:q.data.content},edge:{source:te.source,target:te.target,weight:parseFloat(te.label||"0")}})},[V,M]);return e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"flex-shrink-0 p-4 border-b bg-background",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:""}),e.jsx("p",{className:"text-muted-foreground mt-1",children:""})]}),d&&e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs(Ie,{variant:"outline",className:"gap-1",children:[e.jsx(Pc,{className:"h-3 w-3"}),": ",d.total_nodes]}),e.jsxs(Ie,{variant:"outline",className:"gap-1",children:[e.jsx(vg,{className:"h-3 w-3"}),": ",d.total_edges]}),e.jsxs(Ie,{variant:"outline",className:"gap-1",children:[e.jsx(Va,{className:"h-3 w-3"}),": ",d.entity_nodes]}),e.jsxs(Ie,{variant:"outline",className:"gap-1",children:[e.jsx(Oa,{className:"h-3 w-3"}),": ",d.paragraph_nodes]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mt-4",children:[e.jsxs("div",{className:"flex-1 flex gap-2",children:[e.jsx(ie,{placeholder:"...",value:x,onChange:fe=>f(fe.target.value),onKeyDown:fe=>fe.key==="Enter"&&T(),className:"flex-1"}),e.jsx(_,{onClick:T,size:"sm",children:e.jsx(Gt,{className:"h-4 w-4"})}),e.jsx(_,{onClick:re,variant:"outline",size:"sm",children:""})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(He,{value:p,onValueChange:fe=>g(fe),children:[e.jsx(Ue,{className:"w-[120px]",children:e.jsx(qe,{})}),e.jsxs(Be,{children:[e.jsx(se,{value:"all",children:""}),e.jsx(se,{value:"entity",children:""}),e.jsx(se,{value:"paragraph",children:""})]})]}),e.jsxs(He,{value:b===1e4?"all":C?"custom":b.toString(),onValueChange:fe=>{fe==="custom"?(w(!0),N(b.toString())):fe==="all"?(w(!1),j(1e4)):(w(!1),j(Number(fe)))},children:[e.jsx(Ue,{className:"w-[120px]",children:e.jsx(qe,{})}),e.jsxs(Be,{children:[e.jsx(se,{value:"50",children:"50 "}),e.jsx(se,{value:"100",children:"100 "}),e.jsx(se,{value:"200",children:"200 "}),e.jsx(se,{value:"500",children:"500 "}),e.jsx(se,{value:"1000",children:"1000 "}),e.jsx(se,{value:"all",children:" (10000)"}),e.jsx(se,{value:"custom",children:"..."})]})]}),C&&e.jsx(ie,{type:"number",min:"50",value:y,onChange:fe=>N(fe.target.value),onBlur:()=>{const fe=parseInt(y);!isNaN(fe)&&fe>=50?j(fe):(N("50"),j(50))},onKeyDown:fe=>{if(fe.key==="Enter"){const te=parseInt(y);!isNaN(te)&&te>=50?j(te):(N("50"),j(50))}},placeholder:"50",className:"w-[120px]"}),e.jsx(_,{onClick:()=>ce(),variant:"outline",size:"sm",disabled:r,children:e.jsx(Ht,{className:H("h-4 w-4",r&&"animate-spin")})})]})]})]}),e.jsx("div",{className:"flex-1 relative",children:r?e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ht,{className:"h-8 w-8 animate-spin mx-auto mb-2 text-muted-foreground"}),e.jsx("p",{className:"text-muted-foreground",children:"..."})]})}):V.length===0?e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Pc,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:""}),e.jsx("p",{className:"text-muted-foreground",children:""})]})}):e.jsxs(s0,{nodes:V,edges:M,onNodesChange:k,onEdgesChange:ge,onNodeClick:Ce,onEdgeClick:ze,nodeTypes:S2,fitView:!0,minZoom:.05,maxZoom:1.5,defaultViewport:{x:0,y:0,zoom:.5},elevateNodesOnSelect:ve<=500,nodesDraggable:ve<=1e3,attributionPosition:"bottom-left",children:[e.jsx(t0,{variant:a0.Dots,gap:12,size:1}),e.jsx(l0,{}),ve<=500&&e.jsx(n0,{nodeColor:J,nodeBorderRadius:8,pannable:!0,zoomable:!0}),e.jsxs(r0,{position:"top-right",className:"bg-background/95 backdrop-blur-sm rounded-lg border p-3 shadow-lg",children:[e.jsx("div",{className:"text-sm font-semibold mb-2",children:""}),e.jsxs("div",{className:"space-y-2 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded bg-gradient-to-br from-blue-500 to-blue-600 border-2 border-blue-700"}),e.jsx("span",{children:""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded bg-gradient-to-br from-green-500 to-green-600 border-2 border-green-700"}),e.jsx("span",{children:""})]}),ve>200&&e.jsxs("div",{className:"mt-2 pt-2 border-t text-yellow-600 dark:text-yellow-500",children:[e.jsx("div",{className:"font-semibold",children:""}),e.jsx("div",{children:""}),ve>500&&e.jsx("div",{children:""})]})]})]})]})}),e.jsx(Fs,{open:!!be,onOpenChange:fe=>!fe&&ye(null),children:e.jsxs(Bs,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsx(Hs,{children:e.jsx(qs,{children:""})}),be&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"grid grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:""}),e.jsx("div",{className:"mt-1",children:e.jsx(Ie,{variant:be.type==="entity"?"default":"secondary",children:be.type==="entity"?" ":" "})})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"ID"}),e.jsx("code",{className:"mt-1 block p-2 bg-muted rounded text-xs break-all",children:be.id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:""}),e.jsx(Ze,{className:"mt-1 h-40 p-3 bg-muted rounded",children:e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:be.content})})]})]})]})}),e.jsx(Fs,{open:!!Ne,onOpenChange:fe=>!fe&&D(null),children:e.jsxs(Bs,{className:"max-w-2xl max-h-[80vh] overflow-hidden flex flex-col",children:[e.jsx(Hs,{children:e.jsx(qs,{children:""})}),Ne&&e.jsx(Ze,{className:"flex-1 pr-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0 p-3 bg-blue-50 dark:bg-blue-950 rounded border-2 border-blue-200 dark:border-blue-800",children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:""}),e.jsx("div",{className:"font-medium text-sm mb-2 truncate",children:Ne.source.content}),e.jsxs("code",{className:"text-xs text-muted-foreground truncate block",children:[Ne.source.id.slice(0,40),"..."]})]}),e.jsx("div",{className:"text-2xl text-muted-foreground flex-shrink-0",children:""}),e.jsxs("div",{className:"flex-1 min-w-0 p-3 bg-green-50 dark:bg-green-950 rounded border-2 border-green-200 dark:border-green-800",children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:""}),e.jsx("div",{className:"font-medium text-sm mb-2 truncate",children:Ne.target.content}),e.jsxs("code",{className:"text-xs text-muted-foreground truncate block",children:[Ne.target.id.slice(0,40),"..."]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:""}),e.jsx("div",{className:"mt-1",children:e.jsx(Ie,{variant:"outline",className:"text-base font-mono",children:Ne.edge.weight.toFixed(4)})})]})]})})]})}),e.jsx(xs,{open:L,onOpenChange:O,children:e.jsxs(rs,{children:[e.jsxs(is,{children:[e.jsx(os,{children:""}),e.jsxs(ds,{children:["",e.jsx("br",{}),"?"]})]}),e.jsxs(cs,{children:[e.jsx(ms,{onClick:()=>n({to:"/"}),children:" ()"}),e.jsx(us,{onClick:he,children:""})]})]})}),e.jsx(xs,{open:R,onOpenChange:z,children:e.jsxs(rs,{children:[e.jsxs(is,{children:[e.jsx(os,{children:" "}),e.jsx(ds,{asChild:!0,children:e.jsxs("div",{children:[e.jsxs("p",{children:[" ",e.jsx("strong",{className:"text-orange-600",children:b>=1e4?" (10000)":b})," "]}),e.jsx("p",{className:"mt-4",children:":"}),e.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[e.jsx("li",{children:""}),e.jsx("li",{children:""}),e.jsx("li",{children:""})]}),e.jsx("p",{className:"mt-4",children:" (50-200 )"})]})})]}),e.jsxs(cs,{children:[e.jsx(ms,{onClick:()=>{z(!1),b>200&&(j(50),w(!1))},children:""}),e.jsx(us,{onClick:ke,className:"bg-orange-600 hover:bg-orange-700",children:""})]})]})})]})}function Np({className:n,classNames:r,showOutsideDays:i=!0,captionLayout:d="label",buttonVariant:m="ghost",formatters:x,components:f,...p}){const g=Sg();return e.jsx(Oy,{showOutsideDays:i,className:H("bg-background group/calendar p-3 [--cell-size:2rem] [[data-slot=card-content]_&]:bg-transparent [[data-slot=popover-content]_&]:bg-transparent",String.raw`rtl:**:[.rdp-button\_next>svg]:rotate-180`,String.raw`rtl:**:[.rdp-button\_previous>svg]:rotate-180`,n),captionLayout:d,formatters:{formatMonthDropdown:b=>b.toLocaleString("default",{month:"short"}),...x},classNames:{root:H("w-fit",g.root),months:H("relative flex flex-col gap-4 md:flex-row",g.months),month:H("flex w-full flex-col gap-4",g.month),nav:H("absolute inset-x-0 top-0 flex w-full items-center justify-between gap-1",g.nav),button_previous:H(ji({variant:m}),"h-[--cell-size] w-[--cell-size] select-none p-0 aria-disabled:opacity-50",g.button_previous),button_next:H(ji({variant:m}),"h-[--cell-size] w-[--cell-size] select-none p-0 aria-disabled:opacity-50",g.button_next),month_caption:H("flex h-[--cell-size] w-full items-center justify-center px-[--cell-size]",g.month_caption),dropdowns:H("flex h-[--cell-size] w-full items-center justify-center gap-1.5 text-sm font-medium",g.dropdowns),dropdown_root:H("has-focus:border-ring border-input shadow-xs has-focus:ring-ring/50 has-focus:ring-[3px] relative rounded-md border",g.dropdown_root),dropdown:H("bg-popover absolute inset-0 opacity-0",g.dropdown),caption_label:H("select-none font-medium",d==="label"?"text-sm":"[&>svg]:text-muted-foreground flex h-8 items-center gap-1 rounded-md pl-2 pr-1 text-sm [&>svg]:size-3.5",g.caption_label),table:"w-full border-collapse",weekdays:H("flex",g.weekdays),weekday:H("text-muted-foreground flex-1 select-none rounded-md text-[0.8rem] font-normal",g.weekday),week:H("mt-2 flex w-full",g.week),week_number_header:H("w-[--cell-size] select-none",g.week_number_header),week_number:H("text-muted-foreground select-none text-[0.8rem]",g.week_number),day:H("group/day relative aspect-square h-full w-full select-none p-0 text-center [&:first-child[data-selected=true]_button]:rounded-l-md [&:last-child[data-selected=true]_button]:rounded-r-md",g.day),range_start:H("bg-accent rounded-l-md",g.range_start),range_middle:H("rounded-none",g.range_middle),range_end:H("bg-accent rounded-r-md",g.range_end),today:H("bg-accent text-accent-foreground rounded-md data-[selected=true]:rounded-none",g.today),outside:H("text-muted-foreground aria-selected:text-muted-foreground",g.outside),disabled:H("text-muted-foreground opacity-50",g.disabled),hidden:H("invisible",g.hidden),...r},components:{Root:({className:b,rootRef:j,...y})=>e.jsx("div",{"data-slot":"calendar",ref:j,className:H(b),...y}),Chevron:({className:b,orientation:j,...y})=>j==="left"?e.jsx(pl,{className:H("size-4",b),...y}):j==="right"?e.jsx(Ya,{className:H("size-4",b),...y}):e.jsx(fl,{className:H("size-4",b),...y}),DayButton:T2,WeekNumber:({children:b,...j})=>e.jsx("td",{...j,children:e.jsx("div",{className:"flex size-[--cell-size] items-center justify-center text-center",children:b})}),...f},...p})}function T2({className:n,day:r,modifiers:i,...d}){const m=Sg(),x=u.useRef(null);return u.useEffect(()=>{i.focused&&x.current?.focus()},[i.focused]),e.jsx(_,{ref:x,variant:"ghost",size:"icon","data-day":r.date.toLocaleDateString(),"data-selected-single":i.selected&&!i.range_start&&!i.range_end&&!i.range_middle,"data-range-start":i.range_start,"data-range-end":i.range_end,"data-range-middle":i.range_middle,className:H("data-[selected-single=true]:bg-primary data-[selected-single=true]:text-primary-foreground data-[range-middle=true]:bg-accent data-[range-middle=true]:text-accent-foreground data-[range-start=true]:bg-primary data-[range-start=true]:text-primary-foreground data-[range-end=true]:bg-primary data-[range-end=true]:text-primary-foreground group-data-[focused=true]/day:border-ring group-data-[focused=true]/day:ring-ring/50 flex aspect-square h-auto w-full min-w-[--cell-size] flex-col gap-1 font-normal leading-none data-[range-end=true]:rounded-md data-[range-middle=true]:rounded-none data-[range-start=true]:rounded-md group-data-[focused=true]/day:relative group-data-[focused=true]/day:z-10 group-data-[focused=true]/day:ring-[3px] [&>span]:text-xs [&>span]:opacity-70",m.day,n),...d})}const to=uN,ao=mN,lo=xN,Fc={xs:{label:"",rowHeight:28,class:"text-[10px] sm:text-xs"},sm:{label:"",rowHeight:36,class:"text-xs sm:text-sm"},base:{label:"",rowHeight:44,class:"text-sm sm:text-base"}};function E2(){const[n,r]=u.useState([]),[i,d]=u.useState(""),[m,x]=u.useState("all"),[f,p]=u.useState("all"),[g,b]=u.useState(void 0),[j,y]=u.useState(void 0),[N,C]=u.useState(!0),[w,L]=u.useState(!1),[O,U]=u.useState("xs"),[F,R]=u.useState(4),[z,V]=u.useState(!1),$=u.useRef(null);u.useEffect(()=>{const T=mn.getAllLogs();r(T);const re=mn.onLog(()=>{r(mn.getAllLogs())}),he=mn.onConnectionChange(ke=>{L(ke)});return()=>{re(),he()}},[]);const k=u.useMemo(()=>{const T=new Set(n.map(re=>re.module).filter(re=>re&&re.trim()!==""));return Array.from(T).sort()},[n]),M=T=>{switch(T){case"DEBUG":return"text-muted-foreground";case"INFO":return"text-blue-500 dark:text-blue-400";case"WARNING":return"text-yellow-600 dark:text-yellow-500";case"ERROR":return"text-red-600 dark:text-red-500";case"CRITICAL":return"text-red-700 dark:text-red-400 font-bold";default:return"text-foreground"}},ee=T=>{switch(T){case"DEBUG":return"bg-gray-800/30 dark:bg-gray-800/50";case"INFO":return"bg-blue-900/20 dark:bg-blue-500/20";case"WARNING":return"bg-yellow-900/20 dark:bg-yellow-500/20";case"ERROR":return"bg-red-900/20 dark:bg-red-500/20";case"CRITICAL":return"bg-red-900/30 dark:bg-red-600/30";default:return"bg-gray-800/20 dark:bg-gray-800/30"}},ge=()=>{window.location.reload()},ve=()=>{mn.clearLogs(),r([])},je=()=>{const T=Ne.map(Ce=>`${Ce.timestamp} [${Ce.level.padEnd(8)}] [${Ce.module}] ${Ce.message}`).join(`
`),re=new Blob([T],{type:"text/plain;charset=utf-8"}),he=URL.createObjectURL(re),ke=document.createElement("a");ke.href=he,ke.download=`logs-${Cu(new Date,"yyyy-MM-dd-HHmmss")}.txt`,ke.click(),URL.revokeObjectURL(he)},be=()=>{C(!N)},ye=()=>{b(void 0),y(void 0)},Ne=u.useMemo(()=>n.filter(T=>{const re=i===""||T.message.toLowerCase().includes(i.toLowerCase())||T.module.toLowerCase().includes(i.toLowerCase()),he=m==="all"||T.level===m,ke=f==="all"||T.module===f;let Ce=!0;if(g||j){const ze=new Date(T.timestamp);if(g){const fe=new Date(g);fe.setHours(0,0,0,0),Ce=Ce&&ze>=fe}if(j){const fe=new Date(j);fe.setHours(23,59,59,999),Ce=Ce&&ze<=fe}}return re&&he&&ke&&Ce}),[n,i,m,f,g,j]),D=Fc[O].rowHeight+F,X=Hb({count:Ne.length,getScrollElement:()=>$.current,estimateSize:()=>D,overscan:50}),J=u.useRef(!1),ce=u.useRef(Ne.length);return u.useEffect(()=>{const T=$.current;if(!T)return;const re=()=>{if(J.current)return;const{scrollTop:he,scrollHeight:ke,clientHeight:Ce}=T,ze=ke-he-Ce;ze>100&&N?C(!1):ze<50&&!N&&C(!0)};return T.addEventListener("scroll",re,{passive:!0}),()=>T.removeEventListener("scroll",re)},[N]),u.useEffect(()=>{const T=Ne.length>ce.current;ce.current=Ne.length,N&&Ne.length>0&&T&&(J.current=!0,X.scrollToIndex(Ne.length-1,{align:"end",behavior:"auto"}),requestAnimationFrame(()=>{requestAnimationFrame(()=>{J.current=!1})}))},[Ne.length,N,X]),e.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"flex-shrink-0 space-y-2 sm:space-y-3 p-2 sm:p-3 lg:p-4",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg sm:text-xl lg:text-2xl font-bold",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground mt-0.5 hidden sm:block",children:""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:H("h-2 w-2 sm:h-2.5 sm:w-2.5 rounded-full",w?"bg-green-500 animate-pulse":"bg-red-500")}),e.jsx("span",{className:"text-xs text-muted-foreground",children:w?"":""})]})]}),e.jsx(Ve,{className:"p-2 sm:p-3",children:e.jsx(to,{open:z,onOpenChange:V,children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"flex-1 relative min-w-0",children:[e.jsx(Gt,{className:"absolute left-2 top-1/2 -translate-y-1/2 h-3.5 w-3.5 text-muted-foreground"}),e.jsx(ie,{placeholder:"...",value:i,onChange:T=>d(T.target.value),className:"pl-8 h-8 text-xs sm:text-sm"})]}),e.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[e.jsxs(_,{variant:N?"default":"outline",size:"sm",onClick:be,className:"h-8 px-2",title:N?"":"",children:[N?e.jsx(xy,{className:"h-3.5 w-3.5"}):e.jsx(hy,{className:"h-3.5 w-3.5"}),e.jsx("span",{className:"ml-1 text-xs hidden sm:inline",children:N?"":""})]}),e.jsxs(_,{variant:"outline",size:"sm",onClick:ve,className:"h-8 px-2",title:"",children:[e.jsx(ss,{className:"h-3.5 w-3.5"}),e.jsx("span",{className:"ml-1 text-xs hidden md:inline",children:""})]}),e.jsxs(_,{variant:"outline",size:"sm",onClick:je,className:"h-8 px-2 hidden sm:flex",title:"",children:[e.jsx(La,{className:"h-3.5 w-3.5"}),e.jsx("span",{className:"ml-1 text-xs hidden lg:inline",children:""})]}),e.jsx(ao,{asChild:!0,children:e.jsxs(_,{variant:"outline",size:"sm",className:"h-8 px-2",title:z?"":"",children:[e.jsx(Yc,{className:"h-3.5 w-3.5"}),z?e.jsx(cr,{className:"h-3.5 w-3.5 ml-1"}):e.jsx(fl,{className:"h-3.5 w-3.5 ml-1"})]})})]})]}),e.jsxs("div",{className:"text-xs text-muted-foreground text-center sm:text-right -mt-1",children:[e.jsxs("span",{className:"font-mono",children:[Ne.length," / ",n.length]}),e.jsx("span",{className:"ml-1",children:""})]}),e.jsxs(lo,{className:"space-y-2",children:[e.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:gap-2",children:[e.jsxs(He,{value:m,onValueChange:x,children:[e.jsxs(Ue,{className:"w-full sm:flex-1 h-8 text-xs",children:[e.jsx(Yc,{className:"h-3.5 w-3.5 mr-1.5"}),e.jsx(qe,{placeholder:""})]}),e.jsxs(Be,{children:[e.jsx(se,{value:"all",children:""}),e.jsx(se,{value:"DEBUG",children:"DEBUG"}),e.jsx(se,{value:"INFO",children:"INFO"}),e.jsx(se,{value:"WARNING",children:"WARNING"}),e.jsx(se,{value:"ERROR",children:"ERROR"}),e.jsx(se,{value:"CRITICAL",children:"CRITICAL"})]})]}),e.jsxs(He,{value:f,onValueChange:p,children:[e.jsxs(Ue,{className:"w-full sm:flex-1 h-8 text-xs",children:[e.jsx(Yc,{className:"h-3.5 w-3.5 mr-1.5"}),e.jsx(qe,{placeholder:""})]}),e.jsxs(Be,{children:[e.jsx(se,{value:"all",children:""}),k.map(T=>e.jsx(se,{value:T,children:T},T))]})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:gap-2",children:[e.jsxs(Qa,{children:[e.jsx(Ia,{asChild:!0,children:e.jsxs(_,{variant:"outline",size:"sm",className:H("w-full sm:flex-1 justify-start text-left font-normal h-8",!g&&"text-muted-foreground"),children:[e.jsx(Zf,{className:"mr-1.5 h-3.5 w-3.5"}),e.jsx("span",{className:"text-xs",children:g?Cu(g,"PP",{locale:Gc}):""})]})}),e.jsx(Ua,{className:"w-auto p-0",align:"start",children:e.jsx(Np,{mode:"single",selected:g,onSelect:b,initialFocus:!0,locale:Gc})})]}),e.jsxs(Qa,{children:[e.jsx(Ia,{asChild:!0,children:e.jsxs(_,{variant:"outline",size:"sm",className:H("w-full sm:flex-1 justify-start text-left font-normal h-8",!j&&"text-muted-foreground"),children:[e.jsx(Zf,{className:"mr-1.5 h-3.5 w-3.5"}),e.jsx("span",{className:"text-xs",children:j?Cu(j,"PP",{locale:Gc}):""})]})}),e.jsx(Ua,{className:"w-auto p-0",align:"start",children:e.jsx(Np,{mode:"single",selected:j,onSelect:y,initialFocus:!0,locale:Gc})})]}),(g||j)&&e.jsxs(_,{variant:"outline",size:"sm",onClick:ye,className:"w-full sm:w-auto h-8",children:[e.jsx(hl,{className:"h-3.5 w-3.5 sm:mr-1"}),e.jsx("span",{className:"text-xs",children:""})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:gap-3 pt-2 border-t border-border/50",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground",children:[e.jsx(fy,{className:"h-3.5 w-3.5"}),e.jsx("span",{children:""})]}),e.jsx("div",{className:"flex gap-1",children:Object.keys(Fc).map(T=>e.jsx(_,{variant:O===T?"default":"outline",size:"sm",onClick:()=>U(T),className:"h-6 px-2 text-xs",children:Fc[T].label},T))})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-1 max-w-[200px]",children:[e.jsx("span",{className:"text-xs text-muted-foreground whitespace-nowrap",children:""}),e.jsx(Sa,{value:[F],onValueChange:([T])=>R(T),min:0,max:12,step:2,className:"flex-1"}),e.jsxs("span",{className:"text-xs text-muted-foreground w-7",children:[F,"px"]})]}),e.jsxs("div",{className:"flex gap-2 sm:hidden",children:[e.jsxs(_,{variant:"outline",size:"sm",onClick:ge,className:"flex-1 h-8",children:[e.jsx(Ht,{className:"h-3.5 w-3.5 mr-1"}),e.jsx("span",{className:"text-xs",children:""})]}),e.jsxs(_,{variant:"outline",size:"sm",onClick:je,className:"flex-1 h-8",children:[e.jsx(La,{className:"h-3.5 w-3.5 mr-1"}),e.jsx("span",{className:"text-xs",children:""})]})]})]})]})]})})})]}),e.jsx("div",{className:"flex-1 min-h-0 px-2 sm:px-3 lg:px-4 pb-2 sm:pb-3 lg:pb-4",children:e.jsx(Ve,{className:"bg-black dark:bg-gray-950 border-gray-800 dark:border-gray-900 h-full overflow-hidden",children:e.jsx("div",{ref:$,className:H("h-full overflow-auto","[&::-webkit-scrollbar]:w-2.5","[&::-webkit-scrollbar-track]:bg-transparent","[&::-webkit-scrollbar-thumb]:bg-border [&::-webkit-scrollbar-thumb]:rounded-full","[&::-webkit-scrollbar-thumb:hover]:bg-border/80"),children:e.jsx("div",{className:H("p-2 sm:p-3 font-mono relative",Fc[O].class),style:{height:`${X.getTotalSize()}px`},children:Ne.length===0?e.jsx("div",{className:"text-gray-500 dark:text-gray-600 text-center py-8 text-xs sm:text-sm",children:""}):X.getVirtualItems().map(T=>{const re=Ne[T.index];return e.jsxs("div",{"data-index":T.index,ref:X.measureElement,className:H("absolute top-0 left-0 w-full px-2 sm:px-3 rounded hover:bg-white/5 transition-colors",ee(re.level)),style:{transform:`translateY(${T.start}px)`,paddingTop:`${F/2}px`,paddingBottom:`${F/2}px`},children:[e.jsxs("div",{className:"flex flex-col gap-0.5 sm:hidden",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-600 text-[10px]",children:re.timestamp}),e.jsxs("span",{className:H("font-semibold text-[10px]",M(re.level)),children:["[",re.level,"]"]})]}),e.jsx("div",{className:"text-cyan-400 dark:text-cyan-500 truncate text-[10px]",children:re.module}),e.jsx("div",{className:"text-gray-300 dark:text-gray-400 whitespace-pre-wrap break-words text-[10px]",children:re.message})]}),e.jsxs("div",{className:"hidden sm:flex gap-2 items-start",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-600 flex-shrink-0 w-[130px] lg:w-[160px]",children:re.timestamp}),e.jsxs("span",{className:H("flex-shrink-0 w-[65px] lg:w-[75px] font-semibold",M(re.level)),children:["[",re.level,"]"]}),e.jsx("span",{className:"text-cyan-400 dark:text-cyan-500 flex-shrink-0 w-[100px] lg:w-[130px] truncate",children:re.module}),e.jsx("span",{className:"text-gray-300 dark:text-gray-400 flex-1 whitespace-pre-wrap break-words",children:re.message})]})]},T.key)})})})})})]})}const z2="Mai-with-u",M2="plugin-repo",A2="main",D2="plugin_details.json";async function O2(){try{const n=await Te("/api/webui/plugins/fetch-raw",{method:"POST",body:JSON.stringify({owner:z2,repo:M2,branch:A2,file_path:D2})});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const r=await n.json();if(!r.success||!r.data)throw new Error(r.error||"");return JSON.parse(r.data).filter(m=>!m?.id||!m?.manifest?(console.warn(":",m),!1):!m.manifest.name||!m.manifest.version?(console.warn(":",m.id),!1):!0).map(m=>({id:m.id,manifest:{manifest_version:m.manifest.manifest_version||1,name:m.manifest.name,version:m.manifest.version,description:m.manifest.description||"",author:m.manifest.author||{name:"Unknown"},license:m.manifest.license||"Unknown",host_application:m.manifest.host_application||{min_version:"0.0.0"},homepage_url:m.manifest.homepage_url,repository_url:m.manifest.repository_url,keywords:m.manifest.keywords||[],categories:m.manifest.categories||[],default_locale:m.manifest.default_locale||"zh-CN",locales_path:m.manifest.locales_path},downloads:0,rating:0,review_count:0,installed:!1,published_at:new Date().toISOString(),updated_at:new Date().toISOString()}))}catch(n){throw console.error("Failed to fetch plugin list:",n),n}}async function R2(){try{const n=await Te("/api/webui/plugins/git-status");if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return await n.json()}catch(n){return console.error("Failed to check Git status:",n),{installed:!1,error:" Git "}}}async function L2(){try{const n=await Te("/api/webui/plugins/version");if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return await n.json()}catch(n){return console.error("Failed to get Maimai version:",n),{version:"0.0.0",version_major:0,version_minor:0,version_patch:0}}}function U2(n,r,i){const d=n.split(".").map(p=>parseInt(p)||0),m=d[0]||0,x=d[1]||0,f=d[2]||0;if(i.version_major<m||i.version_major===m&&i.version_minor<x||i.version_major===m&&i.version_minor===x&&i.version_patch<f)return!1;if(r){const p=r.split(".").map(y=>parseInt(y)||0),g=p[0]||0,b=p[1]||0,j=p[2]||0;if(i.version_major>g||i.version_major===g&&i.version_minor>b||i.version_major===g&&i.version_minor===b&&i.version_patch>j)return!1}return!0}function B2(n,r){const i=window.location.protocol==="https:"?"wss:":"ws:",d=window.location.host,m=new WebSocket(`${i}//${d}/api/webui/ws/plugin-progress`);return m.onopen=()=>{console.log("Plugin progress WebSocket connected");const x=setInterval(()=>{m.readyState===WebSocket.OPEN?m.send("ping"):clearInterval(x)},3e4)},m.onmessage=x=>{try{if(x.data==="pong")return;const f=JSON.parse(x.data);n(f)}catch(f){console.error("Failed to parse progress data:",f)}},m.onerror=x=>{console.error("Plugin progress WebSocket error:",x),r?.(x)},m.onclose=()=>{console.log("Plugin progress WebSocket disconnected")},m}async function ui(){try{const n=await Te("/api/webui/plugins/installed",{headers:Vs()});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const r=await n.json();if(!r.success)throw new Error(r.message||"");return r.plugins||[]}catch(n){return console.error("Failed to get installed plugins:",n),[]}}function Vc(n,r){return r.some(i=>i.id===n)}function Qc(n,r){const i=r.find(d=>d.id===n);if(i)return i.manifest?.version||i.version}async function H2(n,r,i="main"){const d=await Te("/api/webui/plugins/install",{method:"POST",body:JSON.stringify({plugin_id:n,repository_url:r,branch:i})});if(!d.ok){const m=await d.json();throw new Error(m.detail||"")}return await d.json()}async function q2(n){const r=await Te("/api/webui/plugins/uninstall",{method:"POST",body:JSON.stringify({plugin_id:n})});if(!r.ok){const i=await r.json();throw new Error(i.detail||"")}return await r.json()}async function G2(n,r,i="main"){const d=await Te("/api/webui/plugins/update",{method:"POST",body:JSON.stringify({plugin_id:n,repository_url:r,branch:i})});if(!d.ok){const m=await d.json();throw new Error(m.detail||"")}return await d.json()}async function $2(n){const r=await Te(`/api/webui/plugins/config/${n}/schema`,{headers:Vs()});if(!r.ok){const d=await r.json();throw new Error(d.detail||" Schema ")}const i=await r.json();if(!i.success)throw new Error(i.message||" Schema ");return i.schema}async function F2(n){const r=await Te(`/api/webui/plugins/config/${n}`,{headers:Vs()});if(!r.ok){const d=await r.json();throw new Error(d.detail||"")}const i=await r.json();if(!i.success)throw new Error(i.message||"");return i.config}async function V2(n,r){const i=await Te(`/api/webui/plugins/config/${n}`,{method:"PUT",body:JSON.stringify({config:r})});if(!i.ok){const d=await i.json();throw new Error(d.detail||"")}return await i.json()}async function Q2(n){const r=await Te(`/api/webui/plugins/config/${n}/reset`,{method:"POST",headers:Vs()});if(!r.ok){const i=await r.json();throw new Error(i.detail||"")}return await r.json()}async function I2(n){const r=await Te(`/api/webui/plugins/config/${n}/toggle`,{method:"POST",headers:Vs()});if(!r.ok){const i=await r.json();throw new Error(i.detail||"")}return await r.json()}const wi="https://maibot-plugin-stats.maibot-webui.workers.dev";async function Pg(n){try{const r=await fetch(`${wi}/stats/${n}`);return r.ok?await r.json():(console.error("Failed to fetch plugin stats:",r.statusText),null)}catch(r){return console.error("Error fetching plugin stats:",r),null}}async function Y2(n,r){try{const i=r||lm(),d=await fetch(`${wi}/stats/like`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({plugin_id:n,user_id:i})}),m=await d.json();return d.status===429?{success:!1,error:""}:d.ok?{success:!0,...m}:{success:!1,error:m.error||""}}catch(i){return console.error("Error liking plugin:",i),{success:!1,error:""}}}async function K2(n,r){try{const i=r||lm(),d=await fetch(`${wi}/stats/dislike`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({plugin_id:n,user_id:i})}),m=await d.json();return d.status===429?{success:!1,error:""}:d.ok?{success:!0,...m}:{success:!1,error:m.error||""}}catch(i){return console.error("Error disliking plugin:",i),{success:!1,error:""}}}async function X2(n,r,i,d){if(r<1||r>5)return{success:!1,error:" 1-5 "};try{const m=d||lm(),x=await fetch(`${wi}/stats/rate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({plugin_id:n,rating:r,comment:i,user_id:m})}),f=await x.json();return x.status===429?{success:!1,error:" 3 "}:x.ok?{success:!0,...f}:{success:!1,error:f.error||""}}catch(m){return console.error("Error rating plugin:",m),{success:!1,error:""}}}async function J2(n){try{const r=await fetch(`${wi}/stats/download`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({plugin_id:n})}),i=await r.json();return r.status===429?(console.warn("Download recording rate limited"),{success:!0}):r.ok?{success:!0,...i}:(console.error("Failed to record download:",i.error),{success:!1,error:i.error})}catch(r){return console.error("Error recording download:",r),{success:!1,error:""}}}function P2(){const n=navigator,r=[navigator.userAgent,navigator.language,navigator.languages?.join(",")||"",navigator.platform,navigator.hardwareConcurrency||0,screen.width,screen.height,screen.colorDepth,screen.pixelDepth,new Date().getTimezoneOffset(),Intl.DateTimeFormat().resolvedOptions().timeZone,navigator.maxTouchPoints||0,n.deviceMemory||0].join("|");let i=0;for(let d=0;d<r.length;d++){const m=r.charCodeAt(d);i=(i<<5)-i+m,i=i&i}return`fp_${Math.abs(i).toString(36)}`}function lm(){const n="maibot_user_id";let r=localStorage.getItem(n);if(!r){const i=P2(),d=Date.now().toString(36),m=Math.random().toString(36).substring(2,15);r=`${i}_${d}_${m}`,localStorage.setItem(n,r)}return r}function Z2({pluginId:n,compact:r=!1}){const[i,d]=u.useState(null),[m,x]=u.useState(!0),[f,p]=u.useState(0),[g,b]=u.useState(""),[j,y]=u.useState(!1),{toast:N}=Qs(),C=async()=>{x(!0);const U=await Pg(n);U&&d(U),x(!1)};u.useEffect(()=>{C()},[n]);const w=async()=>{const U=await Y2(n);U.success?(N({title:"",description:""}),C()):N({title:"",description:U.error||"",variant:"destructive"})},L=async()=>{const U=await K2(n);U.success?(N({title:"",description:""}),C()):N({title:"",description:U.error||"",variant:"destructive"})},O=async()=>{if(f===0){N({title:"",description:" 1 ",variant:"destructive"});return}const U=await X2(n,f,g||void 0);U.success?(N({title:"",description:""}),y(!1),p(0),b(""),C()):N({title:"",description:U.error||"",variant:"destructive"})};return m?e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(La,{className:"h-4 w-4"}),e.jsx("span",{children:"-"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(xl,{className:"h-4 w-4"}),e.jsx("span",{children:"-"})]})]}):i?r?e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",title:`: ${i.downloads.toLocaleString()}`,children:[e.jsx(La,{className:"h-4 w-4"}),e.jsx("span",{children:i.downloads.toLocaleString()})]}),e.jsxs("div",{className:"flex items-center gap-1",title:`: ${i.rating.toFixed(1)} (${i.rating_count} )`,children:[e.jsx(xl,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),e.jsx("span",{children:i.rating.toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-1",title:`: ${i.likes}`,children:[e.jsx(Tu,{className:"h-4 w-4"}),e.jsx("span",{children:i.likes})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"flex flex-col items-center p-3 rounded-lg border bg-card",children:[e.jsx(La,{className:"h-5 w-5 text-muted-foreground mb-1"}),e.jsx("span",{className:"text-2xl font-bold",children:i.downloads.toLocaleString()}),e.jsx("span",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"flex flex-col items-center p-3 rounded-lg border bg-card",children:[e.jsx(xl,{className:"h-5 w-5 text-yellow-400 mb-1 fill-yellow-400"}),e.jsx("span",{className:"text-2xl font-bold",children:i.rating.toFixed(1)}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[i.rating_count," "]})]}),e.jsxs("div",{className:"flex flex-col items-center p-3 rounded-lg border bg-card",children:[e.jsx(Tu,{className:"h-5 w-5 text-green-500 mb-1"}),e.jsx("span",{className:"text-2xl font-bold",children:i.likes}),e.jsx("span",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"flex flex-col items-center p-3 rounded-lg border bg-card",children:[e.jsx(Wf,{className:"h-5 w-5 text-red-500 mb-1"}),e.jsx("span",{className:"text-2xl font-bold",children:i.dislikes}),e.jsx("span",{className:"text-xs text-muted-foreground",children:""})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(_,{variant:"outline",size:"sm",onClick:w,children:[e.jsx(Tu,{className:"h-4 w-4 mr-1"}),""]}),e.jsxs(_,{variant:"outline",size:"sm",onClick:L,children:[e.jsx(Wf,{className:"h-4 w-4 mr-1"}),""]}),e.jsxs(Fs,{open:j,onOpenChange:y,children:[e.jsx(Wu,{asChild:!0,children:e.jsxs(_,{variant:"default",size:"sm",children:[e.jsx(xl,{className:"h-4 w-4 mr-1"}),""]})}),e.jsxs(Bs,{children:[e.jsxs(Hs,{children:[e.jsx(qs,{children:""}),e.jsx(et,{children:""})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:"flex gap-2",children:[1,2,3,4,5].map(U=>e.jsx("button",{onClick:()=>p(U),className:"focus:outline-none",children:e.jsx(xl,{className:`h-8 w-8 transition-colors ${U<=f?"fill-yellow-400 text-yellow-400":"text-muted-foreground hover:text-yellow-300"}`})},U))}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[f===0&&"",f===1&&"",f===2&&"",f===3&&"",f===4&&"",f===5&&""]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:""}),e.jsx(Ys,{value:g,onChange:U=>b(U.target.value),placeholder:"...",rows:4,maxLength:500}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-1 text-right",children:[g.length," / 500"]})]})]}),e.jsxs(at,{children:[e.jsx(_,{variant:"outline",onClick:()=>y(!1),children:""}),e.jsx(_,{onClick:O,disabled:f===0,children:""})]})]})]})]}),i.recent_ratings&&i.recent_ratings.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-semibold",children:""}),e.jsx("div",{className:"space-y-3",children:i.recent_ratings.map((U,F)=>e.jsxs("div",{className:"p-3 rounded-lg border bg-muted/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(R=>e.jsx(xl,{className:`h-3 w-3 ${R<=U.rating?"fill-yellow-400 text-yellow-400":"text-muted-foreground"}`},R))}),e.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(U.created_at).toLocaleDateString()})]}),U.comment&&e.jsx("p",{className:"text-sm text-muted-foreground",children:U.comment})]},F))})]})]}):null}const yp={"Group Management":"","Entertainment & Interaction":"","Utility Tools":"","Content Generation":"",Multimedia:"","External Integration":"","Data Analysis & Insights":"",Other:""};function W2(){const n=Ta(),[r,i]=u.useState(null),[d,m]=u.useState(""),[x,f]=u.useState("all"),[p,g]=u.useState("all"),[b,j]=u.useState(!0),[y,N]=u.useState([]),[C,w]=u.useState(!0),[L,O]=u.useState(null),[U,F]=u.useState(null),[R,z]=u.useState(null),[V,$]=u.useState(null),[,k]=u.useState([]),[M,ee]=u.useState({}),[ge,ve]=u.useState(!1),[je,be]=u.useState(null),[ye,Ne]=u.useState("main"),[D,X]=u.useState(""),[J,ce]=u.useState("preset"),[T,re]=u.useState(!1),{toast:he}=Qs(),ke=async E=>{const xe=E.map(async Q=>{try{const _e=await Pg(Q.id);return{id:Q.id,stats:_e}}catch(_e){return console.warn(`Failed to load stats for ${Q.id}:`,_e),{id:Q.id,stats:null}}}),Ke=await Promise.all(xe),we={};Ke.forEach(({id:Q,stats:_e})=>{_e&&(we[Q]=_e)}),ee(we)};u.useEffect(()=>{let E=null,xe=!1;return(async()=>{if(E=B2(we=>{xe||(z(we),we.stage==="success"?setTimeout(()=>{xe||z(null)},2e3):we.stage==="error"&&(w(!1),O(we.error||"")))},we=>{console.error("WebSocket error:",we),xe||he({title:"WebSocket ",description:"",variant:"destructive"})}),await new Promise(we=>{if(!E){we();return}const Q=()=>{E&&E.readyState===WebSocket.OPEN?(console.log("WebSocket connected, starting to load plugins"),we()):E&&E.readyState===WebSocket.CLOSED?(console.warn("WebSocket closed before loading plugins"),we()):setTimeout(Q,100)};Q()}),!xe){const we=await R2();F(we),we.installed||he({title:"Git ",description:we.error||" Git ",variant:"destructive"})}if(!xe){const we=await L2();$(we)}if(!xe)try{w(!0),O(null);const we=await O2();if(!xe){const Q=await ui();k(Q);const _e=we.map(Re=>{const Os=Vc(Re.id,Q),Ts=Qc(Re.id,Q);return{...Re,installed:Os,installed_version:Ts}});for(const Re of Q)!_e.some(Ts=>Ts.id===Re.id)&&Re.manifest&&_e.push({id:Re.id,manifest:{manifest_version:Re.manifest.manifest_version||1,name:Re.manifest.name,version:Re.manifest.version,description:Re.manifest.description||"",author:Re.manifest.author,license:Re.manifest.license||"Unknown",host_application:Re.manifest.host_application,homepage_url:Re.manifest.homepage_url,repository_url:Re.manifest.repository_url,keywords:Re.manifest.keywords||[],categories:Re.manifest.categories||[],default_locale:Re.manifest.default_locale||"zh-CN",locales_path:Re.manifest.locales_path},downloads:0,rating:0,review_count:0,installed:!0,installed_version:Re.manifest.version,published_at:new Date().toISOString(),updated_at:new Date().toISOString()});N(_e),ke(_e)}}catch(we){if(!xe){const Q=we instanceof Error?we.message:"";O(Q),he({title:"",description:Q,variant:"destructive"})}}finally{xe||w(!1)}})(),()=>{xe=!0,E&&E.close()}},[he]);const Ce=E=>{if(!E.installed&&V&&!ze(E))return e.jsxs(Ie,{variant:"destructive",className:"gap-1",children:[e.jsx(qt,{className:"h-3 w-3"}),""]});if(E.installed){const xe=E.installed_version?.trim(),Ke=E.manifest.version?.trim();if(xe!==Ke){const we=xe?.split(".").map(Number)||[0,0,0],Q=Ke?.split(".").map(Number)||[0,0,0];for(let _e=0;_e<3;_e++){if((Q[_e]||0)>(we[_e]||0))return e.jsxs(Ie,{variant:"outline",className:"gap-1 text-orange-600 border-orange-600",children:[e.jsx(qt,{className:"h-3 w-3"}),""]});if((Q[_e]||0)<(we[_e]||0))break}}return e.jsxs(Ie,{variant:"default",className:"gap-1",children:[e.jsx(ua,{className:"h-3 w-3"}),""]})}return null},ze=E=>!V||!E.manifest?.host_application?!0:U2(E.manifest.host_application.min_version,E.manifest.host_application.max_version,V),fe=E=>{if(!E.installed||!E.installed_version||!E.manifest?.version)return!1;const xe=E.installed_version.trim(),Ke=E.manifest.version.trim();if(xe===Ke)return!1;const we=xe.split(".").map(Number),Q=Ke.split(".").map(Number);for(let _e=0;_e<3;_e++){if((Q[_e]||0)>(we[_e]||0))return!0;if((Q[_e]||0)<(we[_e]||0))return!1}return!1},te=y.filter(E=>{if(!E.manifest)return console.warn("[]  manifest :",E.id),!1;const xe=d===""||E.manifest.name?.toLowerCase().includes(d.toLowerCase())||E.manifest.description?.toLowerCase().includes(d.toLowerCase())||E.manifest.keywords&&E.manifest.keywords.some(_e=>_e.toLowerCase().includes(d.toLowerCase())),Ke=x==="all"||E.manifest.categories&&E.manifest.categories.includes(x);let we=!0;p==="installed"?we=E.installed===!0:p==="updates"&&(we=E.installed===!0&&fe(E));const Q=!b||!V||ze(E);return xe&&Ke&&we&&Q}),ae=()=>{i(null)},q=E=>{if(!U?.installed){he({title:"",description:"Git ",variant:"destructive"});return}if(V&&!ze(E)){he({title:"",description:"",variant:"destructive"});return}be(E),Ne("main"),X(""),ce("preset"),re(!1),ve(!0)},K=async()=>{if(!je)return;const E=J==="custom"?D:ye;if(!E||E.trim()===""){he({title:"",variant:"destructive"});return}try{ve(!1),await H2(je.id,je.manifest.repository_url||"",E),J2(je.id).catch(Ke=>{console.warn("Failed to record download:",Ke)}),he({title:"",description:`${je.manifest.name} `});const xe=await ui();k(xe),N(Ke=>Ke.map(we=>{if(we.id===je.id){const Q=Vc(we.id,xe),_e=Qc(we.id,xe);return{...we,installed:Q,installed_version:_e}}return we}))}catch(xe){he({title:"",description:xe instanceof Error?xe.message:"",variant:"destructive"})}finally{be(null)}},Me=async E=>{try{await q2(E.id),he({title:"",description:`${E.manifest.name} `});const xe=await ui();k(xe),N(Ke=>Ke.map(we=>{if(we.id===E.id){const Q=Vc(we.id,xe),_e=Qc(we.id,xe);return{...we,installed:Q,installed_version:_e}}return we}))}catch(xe){he({title:"",description:xe instanceof Error?xe.message:"",variant:"destructive"})}},We=async E=>{if(!U?.installed){he({title:"",description:"Git ",variant:"destructive"});return}try{const xe=await G2(E.id,E.manifest.repository_url||"","main");he({title:"",description:`${E.manifest.name}  ${xe.old_version}  ${xe.new_version}`});const Ke=await ui();k(Ke),N(we=>we.map(Q=>{if(Q.id===E.id){const _e=Vc(Q.id,Ke),Re=Qc(Q.id,Ke);return{...Q,installed:_e,installed_version:Re}}return Q}))}catch(xe){he({title:"",description:xe instanceof Error?xe.message:"",variant:"destructive"})}};return e.jsx(Ze,{className:"h-full",children:e.jsxs("div",{className:"space-y-6 p-4 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:""}),e.jsx("p",{className:"text-muted-foreground mt-2",children:""})]}),e.jsxs(_,{onClick:()=>n({to:"/plugin-mirrors"}),children:[e.jsx(py,{className:"h-4 w-4 mr-2"}),""]})]}),U&&!U.installed&&e.jsxs(Ve,{className:"border-orange-600 bg-orange-50 dark:bg-orange-950/20",children:[e.jsx(ls,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ra,{className:"h-5 w-5 text-orange-600"}),e.jsxs("div",{children:[e.jsx(ns,{className:"text-lg text-orange-900 dark:text-orange-100",children:"Git "}),e.jsx(tt,{className:"text-orange-800 dark:text-orange-200",children:U.error||" Git "})]})]})}),e.jsx(ps,{children:e.jsxs("p",{className:"text-sm text-orange-800 dark:text-orange-200",children:[" ",e.jsx("a",{href:"https://git-scm.com/downloads",target:"_blank",rel:"noopener noreferrer",className:"underline font-medium",children:"git-scm.com"}),"  Git "]})})]}),e.jsx(Ve,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Gt,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(ie,{placeholder:"...",value:d,onChange:E=>m(E.target.value),className:"pl-9"})]}),e.jsxs(He,{value:x,onValueChange:f,children:[e.jsx(Ue,{className:"w-full sm:w-[200px]",children:e.jsx(qe,{placeholder:""})}),e.jsxs(Be,{children:[e.jsx(se,{value:"all",children:""}),e.jsx(se,{value:"Group Management",children:""}),e.jsx(se,{value:"Entertainment & Interaction",children:""}),e.jsx(se,{value:"Utility Tools",children:""}),e.jsx(se,{value:"Content Generation",children:""}),e.jsx(se,{value:"Multimedia",children:""}),e.jsx(se,{value:"External Integration",children:""}),e.jsx(se,{value:"Data Analysis & Insights",children:""}),e.jsx(se,{value:"Other",children:""})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(pt,{id:"compatible-only",checked:b,onCheckedChange:E=>j(E===!0)}),e.jsx("label",{htmlFor:"compatible-only",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer",children:""})]})]})}),e.jsx(Ca,{value:p,onValueChange:g,className:"w-full",children:e.jsxs(ma,{className:"grid w-full grid-cols-3",children:[e.jsxs(as,{value:"all",children:[" (",y.filter(E=>{if(!E.manifest)return!1;const xe=d===""||E.manifest.name?.toLowerCase().includes(d.toLowerCase())||E.manifest.description?.toLowerCase().includes(d.toLowerCase())||E.manifest.keywords&&E.manifest.keywords.some(Q=>Q.toLowerCase().includes(d.toLowerCase())),Ke=x==="all"||E.manifest.categories&&E.manifest.categories.includes(x),we=!b||!V||ze(E);return xe&&Ke&&we}).length,")"]}),e.jsxs(as,{value:"installed",children:[" (",y.filter(E=>{if(!E.manifest)return!1;const xe=d===""||E.manifest.name?.toLowerCase().includes(d.toLowerCase())||E.manifest.description?.toLowerCase().includes(d.toLowerCase())||E.manifest.keywords&&E.manifest.keywords.some(Q=>Q.toLowerCase().includes(d.toLowerCase())),Ke=x==="all"||E.manifest.categories&&E.manifest.categories.includes(x),we=!b||!V||ze(E);return E.installed&&xe&&Ke&&we}).length,")"]}),e.jsxs(as,{value:"updates",children:[" (",y.filter(E=>{if(!E.manifest)return!1;const xe=d===""||E.manifest.name?.toLowerCase().includes(d.toLowerCase())||E.manifest.description?.toLowerCase().includes(d.toLowerCase())||E.manifest.keywords&&E.manifest.keywords.some(Q=>Q.toLowerCase().includes(d.toLowerCase())),Ke=x==="all"||E.manifest.categories&&E.manifest.categories.includes(x),we=!b||!V||ze(E);return E.installed&&fe(E)&&xe&&Ke&&we}).length,")"]})]})}),R&&R.stage==="loading"&&e.jsx(Ve,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ut,{className:"h-4 w-4 animate-spin"}),e.jsxs("span",{className:"text-sm font-medium",children:[R.operation==="fetch"&&"",R.operation==="install"&&`${R.plugin_id?`: ${R.plugin_id}`:""}`,R.operation==="uninstall"&&`${R.plugin_id?`: ${R.plugin_id}`:""}`,R.operation==="update"&&`${R.plugin_id?`: ${R.plugin_id}`:""}`]})]}),e.jsxs("span",{className:"text-sm font-medium",children:[R.progress,"%"]})]}),e.jsx(hr,{value:R.progress,className:"h-2"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:R.message}),R.operation==="fetch"&&R.total_plugins>0&&e.jsxs("div",{className:"text-xs text-muted-foreground text-center",children:[" ",R.loaded_plugins," / ",R.total_plugins," "]})]})}),R&&R.stage==="error"&&R.error&&e.jsx(Ve,{className:"border-destructive bg-destructive/10",children:e.jsx(ls,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ra,{className:"h-5 w-5 text-destructive"}),e.jsxs("div",{children:[e.jsx(ns,{className:"text-lg text-destructive",children:""}),e.jsx(tt,{className:"text-destructive/80",children:R.error})]})]})})}),C?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx(ut,{className:"h-8 w-8 animate-spin text-muted-foreground"}),e.jsx("span",{className:"ml-3 text-muted-foreground",children:"..."})]}):L?e.jsx(Ve,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[e.jsx(Ra,{className:"h-12 w-12 text-destructive mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:L}),e.jsx(_,{onClick:()=>window.location.reload(),children:""})]})}):te.length===0?e.jsx(Ve,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[e.jsx(Gt,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:d||x!=="all"?"":""})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:te.map(E=>e.jsxs(Ve,{className:"flex flex-col hover:shadow-lg transition-shadow h-full",children:[e.jsxs(ls,{children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx(ns,{className:"text-xl",children:E.manifest?.name||E.id}),e.jsxs("div",{className:"flex flex-col gap-1",children:[E.manifest?.categories&&E.manifest.categories[0]&&e.jsx(Ie,{variant:"secondary",className:"text-xs whitespace-nowrap",children:yp[E.manifest.categories[0]]||E.manifest.categories[0]}),Ce(E)]})]}),e.jsx(tt,{className:"line-clamp-2",children:E.manifest?.description||""})]}),e.jsx(ps,{className:"flex-1",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(La,{className:"h-4 w-4"}),e.jsx("span",{children:(M[E.id]?.downloads??E.downloads??0).toLocaleString()})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(xl,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),e.jsx("span",{children:(M[E.id]?.rating??E.rating??0).toFixed(1)})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[E.manifest?.keywords&&E.manifest.keywords.slice(0,3).map(xe=>e.jsx(Ie,{variant:"outline",className:"text-xs",children:xe},xe)),E.manifest?.keywords&&E.manifest.keywords.length>3&&e.jsxs(Ie,{variant:"outline",className:"text-xs",children:["+",E.manifest.keywords.length-3]})]}),e.jsxs("div",{className:"text-xs text-muted-foreground pt-2 border-t space-y-1",children:[e.jsxs("div",{children:["v",E.manifest?.version||"unknown","  ",E.manifest?.author?.name||"Unknown"]}),E.manifest?.host_application&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{children:":"}),e.jsxs("span",{className:"font-medium",children:[E.manifest.host_application.min_version,E.manifest.host_application.max_version?` - ${E.manifest.host_application.max_version}`:" - "]})]})]})]})}),e.jsx(Cg,{className:"pt-4",children:e.jsxs("div",{className:"flex items-center justify-end gap-2 w-full",children:[e.jsx(_,{variant:"outline",size:"sm",onClick:()=>i(E),children:""}),E.installed?fe(E)?e.jsxs(_,{size:"sm",disabled:!U?.installed,title:U?.installed?void 0:"Git ",onClick:()=>We(E),children:[e.jsx(Ht,{className:"h-4 w-4 mr-1"}),""]}):e.jsxs(_,{variant:"destructive",size:"sm",disabled:!U?.installed,title:U?.installed?void 0:"Git ",onClick:()=>Me(E),children:[e.jsx(ss,{className:"h-4 w-4 mr-1"}),""]}):e.jsxs(_,{size:"sm",disabled:!U?.installed||R?.operation==="install"||V!==null&&!ze(E),title:U?.installed?V!==null&&!ze(E)?` ( ${E.manifest?.host_application?.min_version||""}${E.manifest?.host_application?.max_version?` - ${E.manifest.host_application.max_version}`:"+"} ${V?.version})`:void 0:"Git ",onClick:()=>q(E),children:[e.jsx(La,{className:"h-4 w-4 mr-1"}),R?.operation==="install"&&R?.plugin_id===E.id?"...":""]})]})})]},E.id))}),e.jsx(Fs,{open:r!==null,onOpenChange:ae,children:r&&r.manifest&&e.jsx(Bs,{className:"max-w-2xl max-h-[80vh] p-0 flex flex-col",children:e.jsx(Ze,{className:"flex-1 overflow-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsx(Hs,{children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"space-y-2 flex-1",children:[e.jsx(qs,{className:"text-2xl",children:r.manifest.name}),e.jsxs(et,{children:[": ",r.manifest.author?.name||"Unknown",r.manifest.author?.url&&e.jsx("a",{href:r.manifest.author.url,target:"_blank",rel:"noopener noreferrer",className:"ml-2 text-primary hover:underline",children:e.jsx(Ic,{className:"h-3 w-3 inline"})})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[r.manifest.categories&&r.manifest.categories[0]&&e.jsx(Ie,{variant:"secondary",children:yp[r.manifest.categories[0]]||r.manifest.categories[0]}),Ce(r)]})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(Z2,{pluginId:r.id}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:""}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["v",r.manifest?.version||"unknown"]}),r.installed&&r.installed_version&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:[": v",r.installed_version]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:(M[r.id]?.downloads??r.downloads??0).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:""}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(xl,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[(M[r.id]?.rating??r.rating??0).toFixed(1)," (",M[r.id]?.rating_count??r.review_count??0,")"]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:r.manifest.license||"Unknown"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("p",{className:"text-sm font-medium",children:""}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[r.manifest.host_application?.min_version||"",r.manifest.host_application?.max_version?` - ${r.manifest.host_application.max_version}`:" - "]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:""}),e.jsx("div",{className:"flex flex-wrap gap-2",children:r.manifest.keywords&&r.manifest.keywords.map(E=>e.jsx(Ie,{variant:"outline",children:E},E))})]}),r.detailed_description&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-line",children:r.detailed_description})]}),!r.detailed_description&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:r.manifest.description||""})]}),e.jsxs("div",{className:"space-y-2",children:[r.manifest.homepage_url&&e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:": "}),e.jsx("a",{href:r.manifest.homepage_url,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:r.manifest.homepage_url})]}),r.manifest.repository_url&&e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:": "}),e.jsx("a",{href:r.manifest.repository_url,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:r.manifest.repository_url})]})]})]}),e.jsxs(at,{children:[r.manifest.homepage_url&&e.jsxs(_,{onClick:()=>window.open(r.manifest.homepage_url,"_blank"),children:[e.jsx(Ic,{className:"h-4 w-4 mr-2"}),""]}),r.manifest.repository_url&&e.jsxs(_,{variant:"outline",onClick:()=>window.open(r.manifest.repository_url,"_blank"),children:[e.jsx(Ic,{className:"h-4 w-4 mr-2"}),""]})]})]})})})}),e.jsx(Fs,{open:ge,onOpenChange:ve,children:e.jsxs(Bs,{children:[e.jsxs(Hs,{children:[e.jsx(qs,{children:""}),e.jsxs(et,{children:[" ",je?.manifest.name]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:[": ",je?.manifest.version]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[": ",typeof je?.manifest.author=="string"?je.manifest.author:je?.manifest.author?.name]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(pt,{id:"advanced-options",checked:T,onCheckedChange:E=>re(E)}),e.jsx("label",{htmlFor:"advanced-options",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:""})]}),T&&e.jsx("div",{className:"space-y-4 p-4 border rounded-lg",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:""}),e.jsxs(Ca,{value:J,onValueChange:E=>ce(E),children:[e.jsxs(ma,{className:"grid w-full grid-cols-2",children:[e.jsx(as,{value:"preset",className:"text-xs",children:""}),e.jsx(as,{value:"custom",className:"text-xs",children:""})]}),J==="preset"&&e.jsx("div",{className:"mt-3",children:e.jsxs(He,{value:ye,onValueChange:Ne,children:[e.jsx(Ue,{children:e.jsx(qe,{placeholder:""})}),e.jsxs(Be,{children:[e.jsx(se,{value:"main",children:"main ()"}),e.jsx(se,{value:"master",children:"master"}),e.jsx(se,{value:"dev",children:"dev ()"}),e.jsx(se,{value:"develop",children:"develop"}),e.jsx(se,{value:"beta",children:"beta ()"}),e.jsx(se,{value:"stable",children:"stable ()"})]})]})}),J==="custom"&&e.jsxs("div",{className:"space-y-2 mt-3",children:[e.jsx("input",{type:"text",className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",placeholder:": feature/new-feature",value:D,onChange:E=>X(E.target.value)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" Git "})]})]})]})}),!T&&e.jsx("p",{className:"text-sm text-muted-foreground",children:" (main) "})]}),e.jsxs(at,{children:[e.jsx(_,{variant:"outline",onClick:()=>ve(!1),children:""}),e.jsxs(_,{onClick:K,children:[e.jsx(La,{className:"h-4 w-4 mr-2"}),""]})]})]})})]})})}function e_(){return e.jsxs("div",{className:"h-[calc(100vh-4rem)] flex flex-col p-4 sm:p-6",children:[e.jsx("div",{className:"mb-4 sm:mb-6",children:e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold flex items-center gap-2",children:[e.jsx(bg,{className:"h-8 w-8",strokeWidth:2}),""]}),e.jsx("p",{className:"text-muted-foreground mt-1 text-sm sm:text-base",children:""})]})})}),e.jsx(Ze,{className:"flex-1",children:e.jsx("div",{className:"flex items-center justify-center h-[calc(100vh-12rem)]",children:e.jsxs(Ve,{className:"max-w-2xl w-full border-dashed",children:[e.jsxs(ls,{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx(Vl,{className:"h-16 w-16 text-muted-foreground"})}),e.jsx(ns,{className:"text-2xl",children:""}),e.jsx(tt,{className:"text-base",children:""})]}),e.jsx(ps,{children:e.jsxs("div",{className:"space-y-3 text-sm text-muted-foreground",children:[e.jsx("p",{className:"font-medium text-foreground",children:" "}),e.jsxs("ul",{className:"space-y-2 ml-6",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{children:""})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{children:""})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{children:""})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{children:""})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{children:""})]})]})]})})]})})})]})}function s_({field:n,value:r,onChange:i}){const[d,m]=u.useState(!1);switch(n.ui_type){case"switch":return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(S,{children:n.label}),n.hint&&e.jsx("p",{className:"text-xs text-muted-foreground",children:n.hint})]}),e.jsx(Fe,{checked:!!r,onCheckedChange:i,disabled:n.disabled})]});case"number":return e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{children:n.label}),e.jsx(ie,{type:"number",value:r??n.default,onChange:x=>i(parseFloat(x.target.value)||0),min:n.min,max:n.max,step:n.step??1,placeholder:n.placeholder,disabled:n.disabled}),n.hint&&e.jsx("p",{className:"text-xs text-muted-foreground",children:n.hint})]});case"slider":return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(S,{children:n.label}),e.jsx("span",{className:"text-sm text-muted-foreground",children:r??n.default})]}),e.jsx(Sa,{value:[r??n.default],onValueChange:x=>i(x[0]),min:n.min??0,max:n.max??100,step:n.step??1,disabled:n.disabled}),n.hint&&e.jsx("p",{className:"text-xs text-muted-foreground",children:n.hint})]});case"select":return e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{children:n.label}),e.jsxs(He,{value:String(r??n.default),onValueChange:i,disabled:n.disabled,children:[e.jsx(Ue,{children:e.jsx(qe,{placeholder:n.placeholder??""})}),e.jsx(Be,{children:n.choices?.map(x=>e.jsx(se,{value:String(x),children:String(x)},String(x)))})]}),n.hint&&e.jsx("p",{className:"text-xs text-muted-foreground",children:n.hint})]});case"textarea":return e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{children:n.label}),e.jsx(Ys,{value:r??n.default,onChange:x=>i(x.target.value),placeholder:n.placeholder,rows:n.rows??3,disabled:n.disabled}),n.hint&&e.jsx("p",{className:"text-xs text-muted-foreground",children:n.hint})]});case"password":return e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{children:n.label}),e.jsxs("div",{className:"relative",children:[e.jsx(ie,{type:d?"text":"password",value:r??"",onChange:x=>i(x.target.value),placeholder:n.placeholder,disabled:n.disabled,className:"pr-10"}),e.jsx(_,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full px-3",onClick:()=>m(!d),children:d?e.jsx(pi,{className:"h-4 w-4"}):e.jsx(Vt,{className:"h-4 w-4"})})]}),n.hint&&e.jsx("p",{className:"text-xs text-muted-foreground",children:n.hint})]});case"text":default:return e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{children:n.label}),e.jsx(ie,{type:"text",value:r??n.default??"",onChange:x=>i(x.target.value),placeholder:n.placeholder,maxLength:n.max_length,disabled:n.disabled}),n.hint&&e.jsx("p",{className:"text-xs text-muted-foreground",children:n.hint})]})}}function wp({section:n,config:r,onChange:i}){const[d,m]=u.useState(!n.collapsed),x=Object.entries(n.fields).filter(([,f])=>!f.hidden).sort(([,f],[,p])=>f.order-p.order);return e.jsx(to,{open:d,onOpenChange:m,children:e.jsxs(Ve,{children:[e.jsx(ao,{asChild:!0,children:e.jsxs(ls,{className:"cursor-pointer hover:bg-muted/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[d?e.jsx(fl,{className:"h-4 w-4 text-muted-foreground"}):e.jsx(Ya,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(ns,{className:"text-lg",children:n.title})]}),e.jsxs(Ie,{variant:"secondary",className:"text-xs",children:[x.length," "]})]}),n.description&&e.jsx(tt,{className:"ml-6",children:n.description})]})}),e.jsx(lo,{children:e.jsx(ps,{className:"space-y-4 pt-0",children:x.map(([f,p])=>e.jsx(s_,{field:p,value:r[n.name]?.[f],onChange:g=>i(n.name,f,g),sectionName:n.name},f))})})]})})}function t_({plugin:n,onBack:r}){const{toast:i}=Qs(),[d,m]=u.useState(null),[x,f]=u.useState({}),[p,g]=u.useState({}),[b,j]=u.useState(!0),[y,N]=u.useState(!1),[C,w]=u.useState(!1),[L,O]=u.useState(!1),U=u.useCallback(async()=>{j(!0);try{const[M,ee]=await Promise.all([$2(n.id),F2(n.id)]);m(M),f(ee),g(JSON.parse(JSON.stringify(ee)))}catch(M){i({title:"",description:M instanceof Error?M.message:"",variant:"destructive"})}finally{j(!1)}},[n.id,i]);u.useEffect(()=>{U()},[U]),u.useEffect(()=>{w(JSON.stringify(x)!==JSON.stringify(p))},[x,p]);const F=(M,ee,ge)=>{f(ve=>({...ve,[M]:{...ve[M]||{},[ee]:ge}}))},R=async()=>{N(!0);try{await V2(n.id,x),g(JSON.parse(JSON.stringify(x))),i({title:"",description:""})}catch(M){i({title:"",description:M instanceof Error?M.message:"",variant:"destructive"})}finally{N(!1)}},z=async()=>{try{await Q2(n.id),i({title:"",description:""}),O(!1),U()}catch(M){i({title:"",description:M instanceof Error?M.message:"",variant:"destructive"})}},V=async()=>{try{const M=await I2(n.id);i({title:M.message,description:M.note}),U()}catch(M){i({title:"",description:M instanceof Error?M.message:"",variant:"destructive"})}};if(b)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(ut,{className:"h-8 w-8 animate-spin text-muted-foreground"})});if(!d)return e.jsxs("div",{className:"flex flex-col items-center justify-center h-64 space-y-4",children:[e.jsx(qt,{className:"h-12 w-12 text-muted-foreground"}),e.jsx("p",{className:"text-muted-foreground",children:""}),e.jsxs(_,{onClick:r,variant:"outline",children:[e.jsx(ir,{className:"h-4 w-4 mr-2"}),""]})]});const $=Object.values(d.sections).sort((M,ee)=>M.order-ee.order),k=x.plugin?.enabled!==!1;return e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(_,{variant:"ghost",size:"icon",onClick:r,children:e.jsx(ir,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:d.plugin_info.name||n.manifest.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(Ie,{variant:k?"default":"secondary",children:k?"":""}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["v",d.plugin_info.version||n.manifest.version]})]})]})]}),e.jsxs("div",{className:"flex gap-2 ml-10 sm:ml-0",children:[e.jsxs(_,{variant:"outline",size:"sm",onClick:V,children:[e.jsx(Ni,{className:"h-4 w-4 mr-2"}),k?"":""]}),e.jsxs(_,{variant:"outline",size:"sm",onClick:()=>O(!0),children:[e.jsx(Jc,{className:"h-4 w-4 mr-2"}),""]}),e.jsxs(_,{size:"sm",onClick:R,disabled:!C||y,children:[y?e.jsx(ut,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(yi,{className:"h-4 w-4 mr-2"}),""]})]})]}),C&&e.jsx(Ve,{className:"border-orange-200 bg-orange-50 dark:bg-orange-950/20 dark:border-orange-900",children:e.jsx(ps,{className:"py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Va,{className:"h-4 w-4 text-orange-600"}),e.jsx("p",{className:"text-sm text-orange-800 dark:text-orange-200",children:""})]})})}),d.layout.type==="tabs"&&d.layout.tabs.length>0?e.jsxs(Ca,{defaultValue:d.layout.tabs[0]?.id,children:[e.jsx(ma,{children:d.layout.tabs.map(M=>e.jsxs(as,{value:M.id,children:[M.title,M.badge&&e.jsx(Ie,{variant:"secondary",className:"ml-2 text-xs",children:M.badge})]},M.id))}),d.layout.tabs.map(M=>e.jsx(Ms,{value:M.id,className:"space-y-4 mt-4",children:M.sections.map(ee=>{const ge=d.sections[ee];return ge?e.jsx(wp,{section:ge,config:x,onChange:F},ee):null})},M.id))]}):e.jsx("div",{className:"space-y-4",children:$.map(M=>e.jsx(wp,{section:M,config:x,onChange:F},M.name))}),e.jsx(Fs,{open:L,onOpenChange:O,children:e.jsxs(Bs,{children:[e.jsxs(Hs,{children:[e.jsx(qs,{children:""}),e.jsx(et,{children:""})]}),e.jsxs(at,{children:[e.jsx(_,{variant:"outline",onClick:()=>O(!1),children:""}),e.jsx(_,{variant:"destructive",onClick:z,children:""})]})]})})]})}function a_(){const{toast:n}=Qs(),[r,i]=u.useState([]),[d,m]=u.useState(!0),[x,f]=u.useState(""),[p,g]=u.useState(null),b=async()=>{m(!0);try{const C=await ui();i(C)}catch(C){n({title:"",description:C instanceof Error?C.message:"",variant:"destructive"})}finally{m(!1)}};u.useEffect(()=>{b()},[]);const j=r.filter(C=>{const w=x.toLowerCase();return C.id.toLowerCase().includes(w)||C.manifest.name.toLowerCase().includes(w)||C.manifest.description?.toLowerCase().includes(w)}),y=r.length,N=0;return p?e.jsx(Ze,{className:"h-full",children:e.jsx("div",{className:"p-4 sm:p-6",children:e.jsx(t_,{plugin:p,onBack:()=>g(null)})})}):e.jsx(Ze,{className:"h-full",children:e.jsxs("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:""}),e.jsx("p",{className:"text-muted-foreground mt-1 sm:mt-2 text-sm sm:text-base",children:""})]}),e.jsxs(_,{variant:"outline",size:"sm",onClick:b,children:[e.jsx(Ht,{className:`h-4 w-4 mr-2 ${d?"animate-spin":""}`}),""]})]}),e.jsxs("div",{className:"grid gap-4 grid-cols-1 xs:grid-cols-2 lg:grid-cols-3",children:[e.jsxs(Ve,{children:[e.jsxs(ls,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ns,{className:"text-sm font-medium",children:""}),e.jsx(Vl,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ps,{children:[e.jsx("div",{className:"text-2xl font-bold",children:r.length}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:d?"...":""})]})]}),e.jsxs(Ve,{children:[e.jsxs(ls,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ns,{className:"text-sm font-medium",children:""}),e.jsx(ua,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(ps,{children:[e.jsx("div",{className:"text-2xl font-bold",children:y}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:""})]})]}),e.jsxs(Ve,{children:[e.jsxs(ls,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ns,{className:"text-sm font-medium",children:""}),e.jsx(qt,{className:"h-4 w-4 text-orange-600"})]}),e.jsxs(ps,{children:[e.jsx("div",{className:"text-2xl font-bold",children:N}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:""})]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Gt,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(ie,{placeholder:"...",value:x,onChange:C=>f(C.target.value),className:"pl-9"})]}),e.jsxs(Ve,{children:[e.jsxs(ls,{children:[e.jsx(ns,{children:""}),e.jsx(tt,{children:""})]}),e.jsx(ps,{children:d?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(ut,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):j.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 space-y-4",children:[e.jsx(Vl,{className:"h-16 w-16 text-muted-foreground/50"}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("p",{className:"text-lg font-medium text-muted-foreground",children:x?"":""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:x?"":""})]})]}):e.jsx("div",{className:"space-y-2",children:j.map(C=>e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border hover:bg-muted/50 cursor-pointer transition-colors",onClick:()=>g(C),children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsx("div",{className:"h-10 w-10 rounded-lg bg-primary/10 flex items-center justify-center flex-shrink-0",children:e.jsx(Vl,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-medium truncate",children:C.manifest.name}),e.jsxs(Ie,{variant:"secondary",className:"text-xs flex-shrink-0",children:["v",C.manifest.version]})]}),e.jsx("p",{className:"text-sm text-muted-foreground truncate",children:C.manifest.description||""})]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e.jsx(_,{variant:"ghost",size:"sm",children:e.jsx(ur,{className:"h-4 w-4"})}),e.jsx(Ya,{className:"h-4 w-4 text-muted-foreground"})]})]},C.id))})})]})]})})}function l_(){const n=Ta(),{toast:r}=Qs(),[i,d]=u.useState([]),[m,x]=u.useState(!0),[f,p]=u.useState(null),[g,b]=u.useState(null),[j,y]=u.useState(!1),[N,C]=u.useState(!1),[w,L]=u.useState({id:"",name:"",raw_prefix:"",clone_prefix:"",enabled:!0,priority:1}),O=u.useCallback(async()=>{try{x(!0),p(null);const k=localStorage.getItem("access-token"),M=await fetch("/api/webui/plugins/mirrors",{headers:{Authorization:`Bearer ${k}`}});if(!M.ok)throw new Error("");const ee=await M.json();d(ee.mirrors||[])}catch(k){const M=k instanceof Error?k.message:"";p(M),r({title:"",description:M,variant:"destructive"})}finally{x(!1)}},[r]);u.useEffect(()=>{O()},[O]);const U=async()=>{try{const k=localStorage.getItem("access-token"),M=await fetch("/api/webui/plugins/mirrors",{method:"POST",headers:{Authorization:`Bearer ${k}`,"Content-Type":"application/json"},body:JSON.stringify(w)});if(!M.ok){const ee=await M.json();throw new Error(ee.detail||"")}r({title:"",description:""}),y(!1),L({id:"",name:"",raw_prefix:"",clone_prefix:"",enabled:!0,priority:1}),O()}catch(k){r({title:"",description:k instanceof Error?k.message:"",variant:"destructive"})}},F=async()=>{if(g)try{const k=localStorage.getItem("access-token");if(!(await fetch(`/api/webui/plugins/mirrors/${g.id}`,{method:"PUT",headers:{Authorization:`Bearer ${k}`,"Content-Type":"application/json"},body:JSON.stringify({name:w.name,raw_prefix:w.raw_prefix,clone_prefix:w.clone_prefix,enabled:w.enabled,priority:w.priority})})).ok)throw new Error("");r({title:"",description:""}),C(!1),b(null),O()}catch(k){r({title:"",description:k instanceof Error?k.message:"",variant:"destructive"})}},R=async k=>{if(confirm(""))try{const M=localStorage.getItem("access-token");if(!(await fetch(`/api/webui/plugins/mirrors/${k}`,{method:"DELETE",headers:{Authorization:`Bearer ${M}`}})).ok)throw new Error("");r({title:"",description:""}),O()}catch(M){r({title:"",description:M instanceof Error?M.message:"",variant:"destructive"})}},z=async k=>{try{const M=localStorage.getItem("access-token");if(!(await fetch(`/api/webui/plugins/mirrors/${k.id}`,{method:"PUT",headers:{Authorization:`Bearer ${M}`,"Content-Type":"application/json"},body:JSON.stringify({enabled:!k.enabled})})).ok)throw new Error("");O()}catch(M){r({title:"",description:M instanceof Error?M.message:"",variant:"destructive"})}},V=k=>{b(k),L({id:k.id,name:k.name,raw_prefix:k.raw_prefix,clone_prefix:k.clone_prefix,enabled:k.enabled,priority:k.priority}),C(!0)},$=async(k,M)=>{const ee=M==="up"?k.priority-1:k.priority+1;if(!(ee<1))try{const ge=localStorage.getItem("access-token");if(!(await fetch(`/api/webui/plugins/mirrors/${k.id}`,{method:"PUT",headers:{Authorization:`Bearer ${ge}`,"Content-Type":"application/json"},body:JSON.stringify({priority:ee})})).ok)throw new Error("");O()}catch(ge){r({title:"",description:ge instanceof Error?ge.message:"",variant:"destructive"})}};return e.jsx(Ze,{className:"h-full",children:e.jsxs("div",{className:"space-y-6 p-4 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(_,{variant:"ghost",size:"icon",onClick:()=>n({to:"/plugins"}),children:e.jsx(ir,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:" Git "})]})]}),e.jsxs(_,{onClick:()=>y(!0),children:[e.jsx(ht,{className:"h-4 w-4 mr-2"}),""]})]}),m?e.jsx(Ve,{className:"p-6",children:e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(ut,{className:"h-8 w-8 animate-spin text-primary"})})}):f?e.jsx(Ve,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[e.jsx(Ra,{className:"h-12 w-12 text-destructive mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:f}),e.jsx(_,{onClick:O,children:""})]})}):e.jsxs(Ve,{children:[e.jsx("div",{className:"hidden md:block",children:e.jsxs(pn,{children:[e.jsx(gn,{children:e.jsxs(ft,{children:[e.jsx(Pe,{children:""}),e.jsx(Pe,{children:""}),e.jsx(Pe,{children:"ID"}),e.jsx(Pe,{children:""}),e.jsx(Pe,{className:"text-right",children:""})]})}),e.jsx(jn,{children:i.map(k=>e.jsxs(ft,{children:[e.jsx(Qe,{children:e.jsx(Fe,{checked:k.enabled,onCheckedChange:()=>z(k)})}),e.jsx(Qe,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:k.name}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Raw: ",k.raw_prefix]})]})}),e.jsx(Qe,{children:e.jsx(Ie,{variant:"outline",children:k.id})}),e.jsx(Qe,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-mono",children:k.priority}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx(_,{variant:"ghost",size:"icon",className:"h-5 w-5",onClick:()=>$(k,"up"),disabled:k.priority===1,children:e.jsx(cr,{className:"h-3 w-3"})}),e.jsx(_,{variant:"ghost",size:"icon",className:"h-5 w-5",onClick:()=>$(k,"down"),children:e.jsx(fl,{className:"h-3 w-3"})})]})]})}),e.jsx(Qe,{className:"text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(_,{variant:"ghost",size:"icon",onClick:()=>V(k),children:e.jsx(hn,{className:"h-4 w-4"})}),e.jsx(_,{variant:"ghost",size:"icon",onClick:()=>R(k.id),children:e.jsx(ss,{className:"h-4 w-4 text-destructive"})})]})})]},k.id))})]})}),e.jsx("div",{className:"md:hidden p-4 space-y-4",children:i.map(k=>e.jsx(Ve,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-semibold",children:k.name}),k.enabled&&e.jsx(Ie,{variant:"default",className:"text-xs",children:""})]}),e.jsx(Ie,{variant:"outline",className:"mt-1 text-xs",children:k.id})]}),e.jsx(Fe,{checked:k.enabled,onCheckedChange:()=>z(k)})]}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{className:"text-muted-foreground",children:[e.jsx("span",{className:"font-medium",children:"Raw: "}),e.jsx("span",{className:"break-all",children:k.raw_prefix})]}),e.jsxs("div",{className:"text-muted-foreground",children:[e.jsx("span",{className:"font-medium",children:": "}),e.jsx("span",{className:"font-mono",children:k.priority})]})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t",children:[e.jsxs(_,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>V(k),children:[e.jsx(hn,{className:"h-4 w-4 mr-1"}),""]}),e.jsx(_,{variant:"outline",size:"sm",onClick:()=>$(k,"up"),disabled:k.priority===1,children:e.jsx(cr,{className:"h-4 w-4"})}),e.jsx(_,{variant:"outline",size:"sm",onClick:()=>$(k,"down"),children:e.jsx(fl,{className:"h-4 w-4"})}),e.jsx(_,{variant:"destructive",size:"sm",onClick:()=>R(k.id),children:e.jsx(ss,{className:"h-4 w-4"})})]})]})},k.id))})]}),e.jsx(Fs,{open:j,onOpenChange:y,children:e.jsxs(Bs,{className:"max-w-lg",children:[e.jsxs(Hs,{children:[e.jsx(qs,{children:""}),e.jsx(et,{children:" Git "})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"add-id",children:" ID *"}),e.jsx(ie,{id:"add-id",placeholder:": my-mirror",value:w.id,onChange:k=>L({...w,id:k.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"add-name",children:" *"}),e.jsx(ie,{id:"add-name",placeholder:": ",value:w.name,onChange:k=>L({...w,name:k.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"add-raw",children:"Raw  *"}),e.jsx(ie,{id:"add-raw",placeholder:"https://example.com/raw",value:w.raw_prefix,onChange:k=>L({...w,raw_prefix:k.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"add-clone",children:" *"}),e.jsx(ie,{id:"add-clone",placeholder:"https://example.com/clone",value:w.clone_prefix,onChange:k=>L({...w,clone_prefix:k.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"add-priority",children:""}),e.jsx(ie,{id:"add-priority",type:"number",min:"1",value:w.priority,onChange:k=>L({...w,priority:parseInt(k.target.value)||1})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{id:"add-enabled",checked:w.enabled,onCheckedChange:k=>L({...w,enabled:k})}),e.jsx(S,{htmlFor:"add-enabled",children:""})]})]}),e.jsxs(at,{children:[e.jsx(_,{variant:"outline",onClick:()=>y(!1),children:""}),e.jsx(_,{onClick:U,children:""})]})]})}),e.jsx(Fs,{open:N,onOpenChange:C,children:e.jsxs(Bs,{className:"max-w-lg",children:[e.jsxs(Hs,{children:[e.jsx(qs,{children:""}),e.jsx(et,{children:""})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{children:" ID"}),e.jsx(ie,{value:w.id,disabled:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"edit-name",children:" *"}),e.jsx(ie,{id:"edit-name",value:w.name,onChange:k=>L({...w,name:k.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"edit-raw",children:"Raw  *"}),e.jsx(ie,{id:"edit-raw",value:w.raw_prefix,onChange:k=>L({...w,raw_prefix:k.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"edit-clone",children:" *"}),e.jsx(ie,{id:"edit-clone",value:w.clone_prefix,onChange:k=>L({...w,clone_prefix:k.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"edit-priority",children:""}),e.jsx(ie,{id:"edit-priority",type:"number",min:"1",value:w.priority,onChange:k=>L({...w,priority:parseInt(k.target.value)||1})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{id:"edit-enabled",checked:w.enabled,onCheckedChange:k=>L({...w,enabled:k})}),e.jsx(S,{htmlFor:"edit-enabled",children:""})]})]}),e.jsxs(at,{children:[e.jsx(_,{variant:"outline",onClick:()=>C(!1),children:""}),e.jsx(_,{onClick:F,children:""})]})]})})]})})}const mi=u.forwardRef(({className:n,...r},i)=>e.jsx($p,{ref:i,className:H("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",n),...r}));mi.displayName=$p.displayName;const n_=u.forwardRef(({className:n,...r},i)=>e.jsx(Fp,{ref:i,className:H("aspect-square h-full w-full",n),...r}));n_.displayName=Fp.displayName;const xi=u.forwardRef(({className:n,...r},i)=>e.jsx(Vp,{ref:i,className:H("flex h-full w-full items-center justify-center rounded-full bg-muted",n),...r}));xi.displayName=Vp.displayName;function r_(){return"webui_"+Math.random().toString(36).substr(2,9)+"_"+Date.now().toString(36)}function i_(){const n="maibot_webui_user_id";let r=localStorage.getItem(n);return r||(r=r_(),localStorage.setItem(n,r)),r}function c_(){return localStorage.getItem("maibot_webui_user_name")||"WebUI"}function o_(n){localStorage.setItem("maibot_webui_user_name",n)}const Zg="maibot_webui_virtual_tabs";function d_(){try{const n=localStorage.getItem(Zg);if(n)return JSON.parse(n)}catch(n){console.error("[Chat] :",n)}return[]}function _p(n){try{localStorage.setItem(Zg,JSON.stringify(n))}catch(r){console.error("[Chat] :",r)}}function u_({segment:n}){switch(n.type){case"text":return e.jsx("span",{className:"whitespace-pre-wrap",children:String(n.data)});case"image":case"emoji":return e.jsx("img",{src:String(n.data),alt:n.type==="emoji"?"":"",className:H("rounded-lg max-w-full",n.type==="emoji"?"max-h-32":"max-h-64"),loading:"lazy",onError:r=>{const i=r.target;i.style.display="none",i.parentElement?.insertAdjacentHTML("beforeend",`<span class="text-muted-foreground text-xs">[${n.type==="emoji"?"":""}]</span>`)}});case"voice":return e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("audio",{controls:!0,src:String(n.data),className:"max-w-[200px] h-8",children:""})});case"video":return e.jsx("video",{controls:!0,src:String(n.data),className:"rounded-lg max-w-full max-h-64",children:""});case"face":return e.jsxs("span",{className:"text-muted-foreground",children:["[:",String(n.data),"]"]});case"music":return e.jsx("span",{className:"text-muted-foreground",children:"[]"});case"file":return e.jsxs("span",{className:"text-muted-foreground",children:["[: ",String(n.data),"]"]});case"reply":return e.jsx("span",{className:"text-muted-foreground text-xs",children:"[]"});case"forward":return e.jsx("span",{className:"text-muted-foreground",children:"[]"});case"unknown":default:return e.jsxs("span",{className:"text-muted-foreground",children:["[",n.original_type||"","]"]})}}function m_({message:n,isBot:r}){return n.message_type==="rich"&&n.segments&&n.segments.length>0?e.jsx("div",{className:"flex flex-col gap-2",children:n.segments.map((i,d)=>e.jsx(u_,{segment:i},d))}):e.jsx("span",{className:"whitespace-pre-wrap",children:n.content})}function x_(){const n={id:"webui-default",type:"webui",label:"WebUI",messages:[],isConnected:!1,isTyping:!1,sessionInfo:{}},r=()=>{const Ge=d_().map(Oe=>{const Xe=Oe.virtualConfig;return!Xe.groupId&&Xe.platform&&Xe.userId&&(Xe.groupId=`webui_virtual_group_${Xe.platform}_${Xe.userId}`),{id:Oe.id,type:"virtual",label:Oe.label,virtualConfig:Xe,messages:[],isConnected:!1,isTyping:!1,sessionInfo:{}}});return[n,...Ge]},[i,d]=u.useState(r),[m,x]=u.useState("webui-default"),f=i.find(Y=>Y.id===m)||i[0],[p,g]=u.useState(""),[b,j]=u.useState(!1),[y,N]=u.useState(!0),[C,w]=u.useState(c_()),[L,O]=u.useState(!1),[U,F]=u.useState(""),[R,z]=u.useState(!1),[V,$]=u.useState([]),[k,M]=u.useState([]),[ee,ge]=u.useState(!1),[ve,je]=u.useState(!1),[be,ye]=u.useState(""),[Ne,D]=u.useState({platform:"",personId:"",userId:"",userName:"",groupName:"",groupId:""}),X=u.useRef(i_()),J=u.useRef(new Map),ce=u.useRef(null),T=u.useRef(new Map),re=u.useRef(0),he=u.useRef(new Map),{toast:ke}=Qs(),Ce=Y=>(re.current+=1,`${Y}-${Date.now()}-${re.current}-${Math.random().toString(36).substr(2,9)}`),ze=u.useCallback((Y,Ge)=>{d(Oe=>Oe.map(Xe=>Xe.id===Y?{...Xe,...Ge}:Xe))},[]),fe=u.useCallback((Y,Ge)=>{d(Oe=>Oe.map(Xe=>Xe.id===Y?{...Xe,messages:[...Xe.messages,Ge]}:Xe))},[]),te=u.useCallback(()=>{ce.current?.scrollIntoView({behavior:"smooth"})},[]);u.useEffect(()=>{te()},[f?.messages,te]);const ae=u.useCallback(async()=>{ge(!0);try{const Y=await Te("/api/chat/platforms");if(console.log("[Chat] :",Y.status,Y.headers.get("content-type")),Y.ok){const Ge=Y.headers.get("content-type");if(Ge&&Ge.includes("application/json")){const Oe=await Y.json();console.log("[Chat] :",Oe),$(Oe.platforms||[])}else{const Oe=await Y.text();console.error("[Chat] :  JSON :",Oe.substring(0,200)),ke({title:"",description:" MaiBot ",variant:"destructive"})}}else console.error("[Chat] : HTTP",Y.status),ke({title:"",description:`: ${Y.status}`,variant:"destructive"})}catch(Y){console.error("[Chat] :",Y),ke({title:"",description:"",variant:"destructive"})}finally{ge(!1)}},[ke]),q=u.useCallback(async(Y,Ge)=>{je(!0);try{const Oe=new URLSearchParams;Y&&Oe.append("platform",Y),Ge&&Oe.append("search",Ge),Oe.append("limit","50");const Xe=await Te(`/api/chat/persons?${Oe.toString()}`);if(Xe.ok){const Gs=Xe.headers.get("content-type");if(Gs&&Gs.includes("application/json")){const Je=await Xe.json();M(Je.persons||[])}else console.error("[Chat] :  JSON ")}}catch(Oe){console.error("[Chat] :",Oe)}finally{je(!1)}},[]);u.useEffect(()=>{Ne.platform&&q(Ne.platform,be)},[Ne.platform,be,q]);const K=u.useCallback(async(Y,Ge)=>{N(!0);try{const Oe=new URLSearchParams;Oe.append("user_id",X.current),Oe.append("limit","50"),Ge&&Oe.append("group_id",Ge);const Xe=`/api/chat/history?${Oe.toString()}`;console.log("[Chat] :",Xe);const Gs=await Te(Xe);if(Gs.ok){const Je=await Gs.text();try{const Zs=JSON.parse(Je);if(Zs.messages&&Zs.messages.length>0){const Se=Zs.messages.map(Ae=>({id:Ae.id,type:Ae.type,content:Ae.content,timestamp:Ae.timestamp,sender:{name:Ae.sender_name||(Ae.is_bot?"":"WebUI"),user_id:Ae.user_id,is_bot:Ae.is_bot}}));ze(Y,{messages:Se});const Es=he.current.get(Y)||new Set;Se.forEach(Ae=>{if(Ae.type==="bot"){const ws=`bot-${Ae.content}-${Math.floor(Ae.timestamp*1e3)}`;Es.add(ws)}}),he.current.set(Y,Es)}}catch(Zs){console.error("[Chat] JSON :",Zs)}}}catch(Oe){console.error("[Chat] :",Oe)}finally{N(!1)}},[ze]),Me=u.useCallback((Y,Ge,Oe)=>{const Xe=J.current.get(Y);if(Xe?.readyState===WebSocket.OPEN||Xe?.readyState===WebSocket.CONNECTING){console.log(`[Tab ${Y}] WebSocket `);return}j(!0);const Gs=window.location.protocol==="https:"?"wss:":"ws:",Je=new URLSearchParams;Ge==="virtual"&&Oe?(Je.append("user_id",Oe.userId),Je.append("user_name",Oe.userName),Je.append("platform",Oe.platform),Je.append("person_id",Oe.personId),Je.append("group_name",Oe.groupName||"WebUI"),Oe.groupId&&Je.append("group_id",Oe.groupId)):(Je.append("user_id",X.current),Je.append("user_name",C));const Zs=`${Gs}//${window.location.host}/api/chat/ws?${Je.toString()}`;console.log(`[Tab ${Y}]  WebSocket:`,Zs);try{const Se=new WebSocket(Zs);J.current.set(Y,Se),Se.onopen=()=>{ze(Y,{isConnected:!0}),j(!1),console.log(`[Tab ${Y}] WebSocket `)},Se.onmessage=Es=>{try{const Ae=JSON.parse(Es.data);switch(Ae.type){case"session_info":ze(Y,{sessionInfo:{session_id:Ae.session_id,user_id:Ae.user_id,user_name:Ae.user_name,bot_name:Ae.bot_name}});break;case"system":fe(Y,{id:Ce("sys"),type:"system",content:Ae.content||"",timestamp:Ae.timestamp||Date.now()/1e3});break;case"user_message":{const ws=Ae.sender?.user_id,_s=Ge==="virtual"&&Oe?Oe.userId:X.current;console.log(`[Tab ${Y}]  user_message, sender: ${ws}, current: ${_s}`);const Et=ws?ws.replace(/^webui_user_/,""):"",Ks=_s?_s.replace(/^webui_user_/,""):"";if(Et&&Ks&&Et===Ks){console.log(`[Tab ${Y}] user_id `);break}const jt=he.current.get(Y)||new Set,Xs=`user-${Ae.content}-${Math.floor((Ae.timestamp||0)*1e3)}`;if(jt.has(Xs)){console.log(`[Tab ${Y}] `);break}if(jt.add(Xs),he.current.set(Y,jt),jt.size>100){const nt=jt.values().next().value;nt&&jt.delete(nt)}fe(Y,{id:Ae.message_id||Ce("user"),type:"user",content:Ae.content||"",timestamp:Ae.timestamp||Date.now()/1e3,sender:Ae.sender});break}case"bot_message":{ze(Y,{isTyping:!1});const ws=he.current.get(Y)||new Set,_s=`bot-${Ae.content}-${Math.floor((Ae.timestamp||0)*1e3)}`;if(ws.has(_s))break;if(ws.add(_s),he.current.set(Y,ws),ws.size>100){const Et=ws.values().next().value;Et&&ws.delete(Et)}d(Et=>Et.map(Ks=>{if(Ks.id!==Y)return Ks;const jt=Ks.messages.filter(nt=>nt.type!=="thinking"),Xs={id:Ce("bot"),type:"bot",content:Ae.content||"",message_type:Ae.message_type==="rich"?"rich":"text",segments:Ae.segments,timestamp:Ae.timestamp||Date.now()/1e3,sender:Ae.sender};return{...Ks,messages:[...jt,Xs]}}));break}case"typing":ze(Y,{isTyping:Ae.is_typing||!1});break;case"error":d(ws=>ws.map(_s=>{if(_s.id!==Y)return _s;const Et=_s.messages.filter(Ks=>Ks.type!=="thinking");return{..._s,messages:[...Et,{id:Ce("error"),type:"error",content:Ae.content||"",timestamp:Ae.timestamp||Date.now()/1e3}]}})),ke({title:"",description:Ae.content,variant:"destructive"});break;case"pong":break;case"history":{const ws=Ae.messages||[];if(ws.length>0){const _s=he.current.get(Y)||new Set,Et=ws.map(Ks=>{const jt=Ks.is_bot||!1,Xs=Ks.id||Ce(jt?"bot":"user"),nt=`${jt?"bot":"user"}-${Ks.content}-${Math.floor(Ks.timestamp*1e3)}`;return _s.add(nt),{id:Xs,type:jt?"bot":"user",content:Ks.content,timestamp:Ks.timestamp,sender:{name:Ks.sender_name||(jt?"":""),user_id:Ks.sender_id,is_bot:jt}}});he.current.set(Y,_s),ze(Y,{messages:Et}),console.log(`[Tab ${Y}]  ${Et.length} `)}break}default:console.log(":",Ae.type)}}catch(Ae){console.error(":",Ae)}},Se.onclose=()=>{ze(Y,{isConnected:!1}),j(!1),J.current.delete(Y),console.log(`[Tab ${Y}] WebSocket `);const Es=T.current.get(Y);Es&&clearTimeout(Es);const Ae=window.setTimeout(()=>{if(!We.current){const ws=i.find(_s=>_s.id===Y);ws&&Me(Y,ws.type,ws.virtualConfig)}},5e3);T.current.set(Y,Ae)},Se.onerror=Es=>{console.error(`[Tab ${Y}] WebSocket :`,Es),j(!1)}}catch(Se){console.error(`[Tab ${Y}]  WebSocket :`,Se),j(!1)}},[C,ze,fe,ke,i]),We=u.useRef(!1);u.useEffect(()=>{We.current=!1;const Y=J.current,Ge=T.current,Oe=he.current;K("webui-default");const Xe=setTimeout(()=>{We.current||(Me("webui-default","webui"),i.forEach(Je=>{Je.type==="virtual"&&Je.virtualConfig&&(Oe.set(Je.id,new Set),setTimeout(()=>{We.current||Me(Je.id,"virtual",Je.virtualConfig)},200))}))},100),Gs=setInterval(()=>{Y.forEach(Je=>{Je.readyState===WebSocket.OPEN&&Je.send(JSON.stringify({type:"ping"}))})},3e4);return()=>{We.current=!0,clearTimeout(Xe),clearInterval(Gs),Ge.forEach(Je=>{clearTimeout(Je)}),Ge.clear(),Y.forEach(Je=>{Je.close()}),Y.clear()}},[]);const E=u.useCallback(()=>{const Y=J.current.get(m);if(!p.trim()||!Y||Y.readyState!==WebSocket.OPEN)return;const Ge=f?.type==="virtual"&&f.virtualConfig?.userName||C,Oe=p.trim(),Xe=Date.now()/1e3;Y.send(JSON.stringify({type:"message",content:Oe,user_name:Ge}));const Gs=he.current.get(m)||new Set,Je=`user-${Oe}-${Math.floor(Xe*1e3)}`;if(Gs.add(Je),he.current.set(m,Gs),Gs.size>100){const Es=Gs.values().next().value;Es&&Gs.delete(Es)}const Zs={id:Ce("user"),type:"user",content:Oe,timestamp:Xe,sender:{name:Ge,is_bot:!1}};fe(m,Zs);const Se={id:Ce("thinking"),type:"thinking",content:"",timestamp:Xe+.001,sender:{name:f?.sessionInfo.bot_name||"",is_bot:!0}};fe(m,Se),g("")},[p,C,m,f,fe]),xe=Y=>{Y.key==="Enter"&&!Y.shiftKey&&(Y.preventDefault(),E())},Ke=()=>{F(C),O(!0)},we=()=>{const Y=U.trim()||"WebUI";w(Y),o_(Y),O(!1);const Ge=J.current.get(m);Ge?.readyState===WebSocket.OPEN&&Ge.send(JSON.stringify({type:"update_nickname",user_name:Y}))},Q=()=>{F(""),O(!1)},_e=Y=>new Date(Y*1e3).toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"}),Re=()=>{const Y=J.current.get(m);Y&&(Y.close(),J.current.delete(m)),Me(m,f?.type||"webui",f?.virtualConfig)},Os=()=>{D({platform:"",personId:"",userId:"",userName:"",groupName:"",groupId:""}),ye(""),ae(),z(!0)},Ts=()=>{if(!Ne.platform||!Ne.personId){ke({title:"",description:"",variant:"destructive"});return}const Y=`webui_virtual_group_${Ne.platform}_${Ne.userId}`,Ge=`virtual-${Ne.platform}-${Ne.userId}-${Date.now()}`,Oe=Ne.userName||Ne.userId,Xe={id:Ge,type:"virtual",label:Oe,virtualConfig:{...Ne,groupId:Y},messages:[],isConnected:!1,isTyping:!1,sessionInfo:{}};d(Gs=>{const Je=[...Gs,Xe],Zs=Je.filter(Se=>Se.type==="virtual"&&Se.virtualConfig).map(Se=>({id:Se.id,label:Se.label,virtualConfig:Se.virtualConfig,createdAt:Date.now()}));return _p(Zs),Je}),x(Ge),z(!1),he.current.set(Ge,new Set),setTimeout(()=>{Me(Ge,"virtual",Ne)},100),ke({title:"",description:` ${Oe} `})},gt=(Y,Ge)=>{if(Ge?.stopPropagation(),Y==="webui-default")return;const Oe=J.current.get(Y);Oe&&(Oe.close(),J.current.delete(Y));const Xe=T.current.get(Y);Xe&&(clearTimeout(Xe),T.current.delete(Y)),he.current.delete(Y),d(Gs=>{const Je=Gs.filter(Se=>Se.id!==Y),Zs=Je.filter(Se=>Se.type==="virtual"&&Se.virtualConfig).map(Se=>({id:Se.id,label:Se.label,virtualConfig:Se.virtualConfig,createdAt:Date.now()}));return _p(Zs),Je}),m===Y&&x("webui-default")},gs=Y=>{x(Y)},Is=Y=>{D(Ge=>({...Ge,personId:Y.person_id,userId:Y.user_id,userName:Y.nickname||Y.person_name}))};return e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsx(Fs,{open:R,onOpenChange:z,children:e.jsxs(Bs,{className:"sm:max-w-[500px] max-h-[85vh] overflow-hidden flex flex-col",children:[e.jsxs(Hs,{children:[e.jsxs(qs,{className:"flex items-center gap-2",children:[e.jsx(Eu,{className:"h-5 w-5"}),""]}),e.jsx(et,{children:""})]}),e.jsxs("div",{className:"space-y-4 flex-1 overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx($u,{className:"h-4 w-4"}),""]}),e.jsxs(He,{value:Ne.platform,onValueChange:Y=>{D(Ge=>({...Ge,platform:Y,personId:"",userId:"",userName:""})),M([])},children:[e.jsx(Ue,{disabled:ee,children:e.jsx(qe,{placeholder:ee?"...":""})}),e.jsx(Be,{children:V.map(Y=>e.jsxs(se,{value:Y.platform,children:[Y.platform," (",Y.count," )"]},Y.platform))})]})]}),Ne.platform&&e.jsxs("div",{className:"space-y-2 flex-1 overflow-hidden flex flex-col",children:[e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(Fu,{className:"h-4 w-4"}),""]}),e.jsxs("div",{className:"relative",children:[e.jsx(Gt,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(ie,{placeholder:"...",value:be,onChange:Y=>ye(Y.target.value),className:"pl-9"})]}),e.jsx(Ze,{className:"h-[250px] border rounded-md",children:e.jsx("div",{className:"p-2",children:ve?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(ut,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):k.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-muted-foreground",children:[e.jsx(Fu,{className:"h-8 w-8 mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:""})]}):e.jsx("div",{className:"space-y-1",children:k.map(Y=>e.jsxs("button",{onClick:()=>Is(Y),className:H("w-full flex items-center gap-3 p-2 rounded-md text-left transition-colors",Ne.personId===Y.person_id?"bg-primary text-primary-foreground":"hover:bg-muted"),children:[e.jsx(mi,{className:"h-8 w-8 shrink-0",children:e.jsx(xi,{className:H("text-xs",Ne.personId===Y.person_id?"bg-primary-foreground/20":"bg-muted"),children:(Y.nickname||Y.person_name||"?").charAt(0)})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"font-medium truncate",children:Y.nickname||Y.person_name}),e.jsxs("div",{className:H("text-xs truncate",Ne.personId===Y.person_id?"text-primary-foreground/70":"text-muted-foreground"),children:["ID: ",Y.user_id,Y.is_known&&"  "]})]})]},Y.person_id))})})})]}),Ne.personId&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{children:""}),e.jsx(ie,{placeholder:"WebUI",value:Ne.groupName,onChange:Y=>D(Ge=>({...Ge,groupName:Y.target.value}))}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})]}),e.jsxs(at,{className:"gap-2 sm:gap-0",children:[e.jsx(_,{variant:"outline",onClick:()=>z(!1),children:""}),e.jsx(_,{onClick:Ts,disabled:!Ne.platform||!Ne.personId,children:""})]})]})}),e.jsx("div",{className:"shrink-0 border-b bg-muted/30",children:e.jsx("div",{className:"max-w-4xl mx-auto px-2 sm:px-4",children:e.jsxs("div",{className:"flex items-center gap-1 overflow-x-auto py-1.5 scrollbar-thin",children:[i.map(Y=>e.jsxs("div",{className:H("flex items-center gap-1.5 px-3 py-1.5 rounded-md text-sm whitespace-nowrap transition-colors cursor-pointer","hover:bg-muted",m===Y.id?"bg-background shadow-sm border":"text-muted-foreground"),onClick:()=>gs(Y.id),children:[Y.type==="webui"?e.jsx(Ql,{className:"h-3.5 w-3.5"}):e.jsx(Eu,{className:"h-3.5 w-3.5"}),e.jsx("span",{className:"max-w-[100px] truncate",children:Y.label}),e.jsx("span",{className:H("w-1.5 h-1.5 rounded-full",Y.isConnected?"bg-green-500":"bg-muted-foreground/50")}),Y.id!=="webui-default"&&e.jsx("span",{onClick:Ge=>gt(Y.id,Ge),className:"ml-0.5 p-0.5 rounded hover:bg-muted-foreground/20 cursor-pointer",role:"button",tabIndex:0,onKeyDown:Ge=>{(Ge.key==="Enter"||Ge.key===" ")&&(Ge.preventDefault(),gt(Y.id,Ge))},children:e.jsx(hl,{className:"h-3 w-3"})})]},Y.id)),e.jsx("button",{onClick:Os,className:"flex items-center gap-1 px-2 py-1.5 rounded-md text-sm text-muted-foreground hover:bg-muted hover:text-foreground transition-colors",title:"",children:e.jsx(ht,{className:"h-3.5 w-3.5"})})]})})}),e.jsx("div",{className:"shrink-0 border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:e.jsxs("div",{className:"p-3 sm:p-4 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0",children:[e.jsx(mi,{className:"h-8 w-8 sm:h-10 sm:w-10 shrink-0",children:e.jsx(xi,{className:"bg-primary/10 text-primary",children:e.jsx(oi,{className:"h-4 w-4 sm:h-5 sm:w-5"})})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-base sm:text-lg font-semibold truncate",children:f?.sessionInfo.bot_name||""}),e.jsx("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground",children:f?.isConnected?e.jsxs(e.Fragment,{children:[e.jsx(gy,{className:"h-3 w-3 text-green-500"}),e.jsx("span",{className:"text-green-600 dark:text-green-400",children:""})]}):b?e.jsxs(e.Fragment,{children:[e.jsx(ut,{className:"h-3 w-3 animate-spin"}),e.jsx("span",{children:"..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(jy,{className:"h-3 w-3 text-red-500"}),e.jsx("span",{className:"text-red-600 dark:text-red-400",children:""})]})})]})]}),e.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[y&&e.jsx(ut,{className:"h-4 w-4 animate-spin text-muted-foreground"}),e.jsx(_,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:Re,disabled:b,title:"",children:e.jsx(Ht,{className:H("h-4 w-4",b&&"animate-spin")})})]})]}),e.jsx("div",{className:"hidden sm:flex items-center gap-2 mt-2 text-sm text-muted-foreground",children:f?.type==="virtual"&&f.virtualConfig?e.jsxs(e.Fragment,{children:[e.jsx(Eu,{className:"h-3 w-3 text-primary"}),e.jsx("span",{children:""}),e.jsx("span",{className:"font-medium text-primary",children:f.virtualConfig.userName}),e.jsxs("span",{className:"text-xs",children:["(",f.virtualConfig.platform,")"]}),f.virtualConfig.groupName&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"mx-1",children:""}),e.jsxs("span",{className:"text-xs",children:["",f.virtualConfig.groupName]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(Wc,{className:"h-3 w-3"}),e.jsx("span",{children:""}),L?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{value:U,onChange:Y=>F(Y.target.value),onKeyDown:Y=>{Y.key==="Enter"&&we(),Y.key==="Escape"&&Q()},className:"h-7 w-32",placeholder:"",autoFocus:!0}),e.jsx(_,{size:"sm",variant:"ghost",className:"h-7 px-2",onClick:we,children:""}),e.jsx(_,{size:"sm",variant:"ghost",className:"h-7 px-2",onClick:Q,children:""})]}):e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"font-medium text-foreground",children:C}),e.jsx(_,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0",onClick:Ke,title:"",children:e.jsx(vy,{className:"h-3 w-3"})})]})]})})]})}),e.jsx("div",{className:"flex-1 overflow-hidden",children:e.jsx(Ze,{className:"h-full",children:e.jsxs("div",{className:"p-3 sm:p-4 max-w-4xl mx-auto space-y-3 sm:space-y-4",children:[f?.messages.length===0&&!y&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-muted-foreground",children:[e.jsx(oi,{className:"h-12 w-12 mb-4 opacity-50"}),e.jsxs("p",{className:"text-sm",children:[" ",f?.sessionInfo.bot_name||""," "]})]}),f?.messages.map(Y=>e.jsxs("div",{className:H("flex gap-2 sm:gap-3",Y.type==="user"&&"flex-row-reverse",Y.type==="system"&&"justify-center",Y.type==="error"&&"justify-center"),children:[Y.type==="system"&&e.jsx("div",{className:"text-xs text-muted-foreground bg-muted/50 px-3 py-1 rounded-full max-w-[90%]",children:Y.content}),Y.type==="error"&&e.jsx("div",{className:"text-xs text-red-600 dark:text-red-400 bg-red-100 dark:bg-red-900/30 px-3 py-1 rounded-full max-w-[90%]",children:Y.content}),Y.type==="thinking"&&e.jsxs(e.Fragment,{children:[e.jsx(mi,{className:"h-7 w-7 sm:h-8 sm:w-8 shrink-0",children:e.jsx(xi,{className:"bg-primary/10 text-primary",children:e.jsx(oi,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})})}),e.jsxs("div",{className:"flex flex-col gap-1 max-w-[75%] sm:max-w-[70%]",children:[e.jsx("div",{className:"flex items-center gap-2 text-[10px] sm:text-xs text-muted-foreground",children:e.jsx("span",{className:"hidden sm:inline",children:Y.sender?.name||f?.sessionInfo.bot_name})}),e.jsx("div",{className:"bg-muted rounded-2xl rounded-tl-sm px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex gap-1",children:[e.jsx("span",{className:"w-2 h-2 bg-primary/60 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),e.jsx("span",{className:"w-2 h-2 bg-primary/60 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),e.jsx("span",{className:"w-2 h-2 bg-primary/60 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),e.jsx("span",{className:"text-xs text-muted-foreground ml-1",children:"..."})]})})]})]}),(Y.type==="user"||Y.type==="bot")&&e.jsxs(e.Fragment,{children:[e.jsx(mi,{className:"h-7 w-7 sm:h-8 sm:w-8 shrink-0",children:e.jsx(xi,{className:H("text-xs",Y.type==="bot"?"bg-primary/10 text-primary":"bg-secondary text-secondary-foreground"),children:Y.type==="bot"?e.jsx(oi,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}):e.jsx(Wc,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})})}),e.jsxs("div",{className:H("flex flex-col gap-1 max-w-[75%] sm:max-w-[70%]",Y.type==="user"&&"items-end"),children:[e.jsxs("div",{className:"flex items-center gap-2 text-[10px] sm:text-xs text-muted-foreground",children:[e.jsx("span",{className:"hidden sm:inline",children:Y.sender?.name||(Y.type==="bot"?f?.sessionInfo.bot_name:C)}),e.jsx("span",{children:_e(Y.timestamp)})]}),e.jsx("div",{className:H("rounded-2xl px-3 py-2 text-sm break-words",Y.type==="bot"?"bg-muted rounded-tl-sm":"bg-primary text-primary-foreground rounded-tr-sm"),children:e.jsx(m_,{message:Y,isBot:Y.type==="bot"})})]})]})]},Y.id)),e.jsx("div",{ref:ce})]})})}),e.jsx("div",{className:"shrink-0 border-t bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:e.jsx("div",{className:"p-3 sm:p-4 max-w-4xl mx-auto",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ie,{value:p,onChange:Y=>g(Y.target.value),onKeyDown:xe,placeholder:f?.isConnected?"...":"...",disabled:!f?.isConnected,className:"flex-1 h-10 sm:h-10"}),e.jsx(_,{onClick:E,disabled:!f?.isConnected||!p.trim(),size:"icon",className:"h-10 w-10 shrink-0",children:e.jsx(by,{className:"h-4 w-4"})})]})})})]})}var nm="Radio",[h_,Wg]=ng(nm),[f_,p_]=h_(nm),ej=u.forwardRef((n,r)=>{const{__scopeRadio:i,name:d,checked:m=!1,required:x,disabled:f,value:p="on",onCheck:g,form:b,...j}=n,[y,N]=u.useState(null),C=Yu(r,O=>N(O)),w=u.useRef(!1),L=y?b||!!y.closest("form"):!0;return e.jsxs(f_,{scope:i,checked:m,disabled:f,children:[e.jsx(no.button,{type:"button",role:"radio","aria-checked":m,"data-state":lj(m),"data-disabled":f?"":void 0,disabled:f,value:p,...j,ref:C,onClick:Gu(n.onClick,O=>{m||g?.(),L&&(w.current=O.isPropagationStopped(),w.current||O.stopPropagation())})}),L&&e.jsx(aj,{control:y,bubbles:!w.current,name:d,value:p,checked:m,required:x,disabled:f,form:b,style:{transform:"translateX(-100%)"}})]})});ej.displayName=nm;var sj="RadioIndicator",tj=u.forwardRef((n,r)=>{const{__scopeRadio:i,forceMount:d,...m}=n,x=p_(sj,i);return e.jsx(HN,{present:d||x.checked,children:e.jsx(no.span,{"data-state":lj(x.checked),"data-disabled":x.disabled?"":void 0,...m,ref:r})})});tj.displayName=sj;var g_="RadioBubbleInput",aj=u.forwardRef(({__scopeRadio:n,control:r,checked:i,bubbles:d=!0,...m},x)=>{const f=u.useRef(null),p=Yu(f,x),g=qN(i),b=GN(r);return u.useEffect(()=>{const j=f.current;if(!j)return;const y=window.HTMLInputElement.prototype,C=Object.getOwnPropertyDescriptor(y,"checked").set;if(g!==i&&C){const w=new Event("click",{bubbles:d});C.call(j,i),j.dispatchEvent(w)}},[g,i,d]),e.jsx(no.input,{type:"radio","aria-hidden":!0,defaultChecked:i,...m,tabIndex:-1,ref:p,style:{...m.style,...b,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});aj.displayName=g_;function lj(n){return n?"checked":"unchecked"}var j_=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],po="RadioGroup",[v_]=ng(po,[Qp,Wg]),nj=Qp(),rj=Wg(),[b_,N_]=v_(po),ij=u.forwardRef((n,r)=>{const{__scopeRadioGroup:i,name:d,defaultValue:m,value:x,required:f=!1,disabled:p=!1,orientation:g,dir:b,loop:j=!0,onValueChange:y,...N}=n,C=nj(i),w=UN(b),[L,O]=BN({prop:x,defaultProp:m??null,onChange:y,caller:po});return e.jsx(b_,{scope:i,name:d,required:f,disabled:p,value:L,onValueChange:O,children:e.jsx(hN,{asChild:!0,...C,orientation:g,dir:w,loop:j,children:e.jsx(no.div,{role:"radiogroup","aria-required":f,"aria-orientation":g,"data-disabled":p?"":void 0,dir:w,...N,ref:r})})})});ij.displayName=po;var cj="RadioGroupItem",oj=u.forwardRef((n,r)=>{const{__scopeRadioGroup:i,disabled:d,...m}=n,x=N_(cj,i),f=x.disabled||d,p=nj(i),g=rj(i),b=u.useRef(null),j=Yu(r,b),y=x.value===m.value,N=u.useRef(!1);return u.useEffect(()=>{const C=L=>{j_.includes(L.key)&&(N.current=!0)},w=()=>N.current=!1;return document.addEventListener("keydown",C),document.addEventListener("keyup",w),()=>{document.removeEventListener("keydown",C),document.removeEventListener("keyup",w)}},[]),e.jsx(fN,{asChild:!0,...p,focusable:!f,active:y,children:e.jsx(ej,{disabled:f,required:x.required,checked:y,...g,...m,name:x.name,ref:j,onCheck:()=>x.onValueChange(m.value),onKeyDown:Gu(C=>{C.key==="Enter"&&C.preventDefault()}),onFocus:Gu(m.onFocus,()=>{N.current&&b.current?.click()})})})});oj.displayName=cj;var y_="RadioGroupIndicator",dj=u.forwardRef((n,r)=>{const{__scopeRadioGroup:i,...d}=n,m=rj(i);return e.jsx(tj,{...m,...d,ref:r})});dj.displayName=y_;var uj=ij,mj=oj,w_=dj;const xj=u.forwardRef(({className:n,...r},i)=>e.jsx(uj,{className:H("grid gap-2",n),...r,ref:i}));xj.displayName=uj.displayName;const hj=u.forwardRef(({className:n,...r},i)=>e.jsx(mj,{ref:i,className:H("aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",n),...r,children:e.jsx(w_,{className:"flex items-center justify-center",children:e.jsx(Ny,{className:"h-2.5 w-2.5 fill-current text-current"})})}));hj.displayName=mj.displayName;function __({question:n,value:r,onChange:i,error:d,disabled:m=!1}){const[x,f]=u.useState(null),p=m||n.readOnly,g=()=>{switch(n.type){case"single":return e.jsx(xj,{value:r||"",onValueChange:i,disabled:p,className:"space-y-2",children:n.options?.map(b=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(hj,{value:b.value,id:`${n.id}-${b.id}`}),e.jsx(S,{htmlFor:`${n.id}-${b.id}`,className:"cursor-pointer font-normal",children:b.label})]},b.id))});case"multiple":{const b=r||[];return e.jsxs("div",{className:"space-y-2",children:[n.options?.map(j=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(pt,{id:`${n.id}-${j.id}`,checked:b.includes(j.value),disabled:p||n.maxSelections!==void 0&&b.length>=n.maxSelections&&!b.includes(j.value),onCheckedChange:y=>{i(y?[...b,j.value]:b.filter(N=>N!==j.value))}}),e.jsx(S,{htmlFor:`${n.id}-${j.id}`,className:"cursor-pointer font-normal",children:j.label})]},j.id)),n.maxSelections&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:[" ",n.maxSelections," "]})]})}case"text":return e.jsx(ie,{value:r||"",onChange:b=>i(b.target.value),placeholder:n.placeholder||"...",disabled:p,readOnly:n.readOnly,maxLength:n.maxLength,className:H(n.readOnly&&"bg-muted cursor-not-allowed")});case"textarea":return e.jsxs("div",{className:"space-y-1",children:[e.jsx(Ys,{value:r||"",onChange:b=>i(b.target.value),placeholder:n.placeholder||"...",disabled:p,readOnly:n.readOnly,maxLength:n.maxLength,rows:4,className:H(n.readOnly&&"bg-muted cursor-not-allowed")}),n.maxLength&&e.jsxs("p",{className:"text-xs text-muted-foreground text-right",children:[(r||"").length," / ",n.maxLength]})]});case"rating":{const b=r||0,j=x!==null?x:b;return e.jsxs("div",{className:"flex items-center gap-1",children:[[1,2,3,4,5].map(y=>e.jsx("button",{type:"button",disabled:p,className:H("p-1 transition-colors focus:outline-none focus:ring-2 focus:ring-ring rounded",p&&"cursor-not-allowed opacity-50"),onMouseEnter:()=>!p&&f(y),onMouseLeave:()=>f(null),onClick:()=>!p&&i(y),children:e.jsx(xl,{className:H("h-6 w-6 transition-colors",y<=j?"fill-yellow-400 text-yellow-400":"text-muted-foreground")})},y)),b>0&&e.jsxs("span",{className:"ml-2 text-sm text-muted-foreground",children:[b," / 5"]})]})}case"scale":{const b=n.min??1,j=n.max??10,y=n.step??1,N=r??b;return e.jsxs("div",{className:"space-y-4",children:[e.jsx(Sa,{value:[N],onValueChange:([C])=>i(C),min:b,max:j,step:y,disabled:p}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsx("span",{children:n.minLabel||b}),e.jsx("span",{className:"font-medium text-foreground",children:N}),e.jsx("span",{children:n.maxLabel||j})]})]})}case"dropdown":return e.jsxs(He,{value:r||"",onValueChange:i,disabled:p,children:[e.jsx(Ue,{children:e.jsx(qe,{placeholder:n.placeholder||"..."})}),e.jsx(Be,{children:n.options?.map(b=>e.jsx(se,{value:b.value,children:b.label},b.id))})]});default:return e.jsx("div",{className:"text-muted-foreground",children:""})}};return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs(S,{className:"text-base font-medium",children:[n.title,n.required&&e.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),n.description&&e.jsx("p",{className:"text-sm text-muted-foreground",children:n.description})]}),g(),d&&e.jsx("p",{className:"text-sm text-destructive",children:d})]})}const fj="https://maibot-plugin-stats.maibot-webui.workers.dev";function pj(){const n="maibot_user_id";let r=localStorage.getItem(n);if(!r){const i=Math.random().toString(36).substring(2,10),d=Date.now().toString(36),m=Math.random().toString(36).substring(2,10);r=`fp_${i}_${d}_${m}`,localStorage.setItem(n,r)}return r}async function S_(n,r,i,d){try{const m=d?.userId||pj(),x={surveyId:n,surveyVersion:r,userId:m,answers:i,submittedAt:new Date().toISOString(),allowMultiple:d?.allowMultiple,metadata:{userAgent:navigator.userAgent,language:navigator.language}},f=await fetch(`${fj}/survey/submit`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(x)}),p=await f.json();return f.status===429?{success:!1,error:""}:f.status===409?{success:!1,error:p.error||""}:f.ok?{success:!0,submissionId:p.submissionId,message:p.message}:{success:!1,error:p.error||""}}catch(m){return console.error("Error submitting survey:",m),{success:!1,error:""}}}async function C_(n,r){try{const i=r||pj(),d=new URLSearchParams({user_id:i,survey_id:n}),m=await fetch(`${fj}/survey/check?${d}`);return m.ok?{success:!0,hasSubmitted:(await m.json()).hasSubmitted}:{success:!1,error:(await m.json()).error||""}}catch(i){return console.error("Error checking submission:",i),{success:!1,error:""}}}function gj({config:n,initialAnswers:r,onSubmitSuccess:i,onSubmitError:d,showProgress:m=!0,paginateQuestions:x=!1,className:f}){const p=u.useCallback(()=>!r||r.length===0?{}:r.reduce((J,ce)=>(J[ce.questionId]=ce.value,J),{}),[r]),[g,b]=u.useState(()=>p()),[j,y]=u.useState({}),[N,C]=u.useState(0),[w,L]=u.useState(!1),[O,U]=u.useState(!1),[F,R]=u.useState(null),[z,V]=u.useState(null),[$,k]=u.useState(!1),[M,ee]=u.useState(!0);u.useEffect(()=>{r&&r.length>0&&b(J=>({...J,...p()}))},[r,p]),u.useEffect(()=>{(async()=>{if(!n.settings?.allowMultiple){const ce=await C_(n.id);ce.success&&ce.hasSubmitted&&k(!0)}ee(!1)})()},[n.id,n.settings?.allowMultiple]);const ge=u.useCallback(()=>{const J=new Date;return!(n.settings?.startTime&&new Date(n.settings.startTime)>J||n.settings?.endTime&&new Date(n.settings.endTime)<J)},[n.settings?.startTime,n.settings?.endTime]),ve=n.questions.filter(J=>{const ce=g[J.id];return ce==null?!1:Array.isArray(ce)?ce.length>0:typeof ce=="string"?ce.trim()!=="":!0}).length,je=ve/n.questions.length*100,be=u.useCallback((J,ce)=>{b(T=>({...T,[J]:ce})),y(T=>{const re={...T};return delete re[J],re})},[]),ye=u.useCallback(()=>{const J={};for(const ce of n.questions){if(ce.required){const T=g[ce.id];if(T==null){J[ce.id]="";continue}if(Array.isArray(T)&&T.length===0){J[ce.id]="";continue}if(typeof T=="string"&&T.trim()===""){J[ce.id]="";continue}}ce.minLength&&typeof g[ce.id]=="string"&&g[ce.id].length<ce.minLength&&(J[ce.id]=` ${ce.minLength} `)}return y(J),Object.keys(J).length===0},[n.questions,g]),Ne=u.useCallback(async()=>{if(!ye()){if(x){const J=n.questions.findIndex(ce=>j[ce.id]);J>=0&&C(J)}return}L(!0),R(null);try{const J=n.questions.filter(T=>g[T.id]!==void 0).map(T=>({questionId:T.id,value:g[T.id]})),ce=await S_(n.id,n.version,J,{allowMultiple:n.settings?.allowMultiple});if(ce.success&&ce.submissionId)U(!0),V(ce.submissionId),i?.(ce.submissionId);else{const T=ce.error||"";R(T),d?.(T)}}catch(J){const ce=J instanceof Error?J.message:"";R(ce),d?.(ce)}finally{L(!1)}},[ye,x,n,g,j,i,d]),D=u.useCallback(J=>{J>=0&&J<n.questions.length&&C(J)},[n.questions.length]);if(M)return e.jsx(Ve,{className:H("w-full max-w-2xl mx-auto",f),children:e.jsx(ps,{className:"py-12 flex items-center justify-center",children:e.jsx(ut,{className:"h-6 w-6 animate-spin text-muted-foreground"})})});if($&&!n.settings?.allowMultiple)return e.jsxs(Ve,{className:H("w-full max-w-2xl mx-auto",f),children:[e.jsx(ls,{children:e.jsx(ns,{children:n.title})}),e.jsx(ps,{className:"py-8",children:e.jsxs(ea,{children:[e.jsx(qt,{className:"h-4 w-4"}),e.jsx(sa,{children:""})]})})]});if(!ge())return e.jsxs(Ve,{className:H("w-full max-w-2xl mx-auto",f),children:[e.jsx(ls,{children:e.jsx(ns,{children:n.title})}),e.jsx(ps,{className:"py-8",children:e.jsxs(ea,{variant:"destructive",children:[e.jsx(qt,{className:"h-4 w-4"}),e.jsx(sa,{children:""})]})})]});if(O)return e.jsxs(Ve,{className:H("w-full max-w-2xl mx-auto",f),children:[e.jsx(ls,{children:e.jsxs(ns,{className:"flex items-center gap-2 text-green-600",children:[e.jsx(ua,{className:"h-6 w-6"}),""]})}),e.jsxs(ps,{className:"py-8",children:[e.jsx("p",{className:"text-center text-muted-foreground",children:n.settings?.thankYouMessage||""}),z&&e.jsxs("p",{className:"text-center text-xs text-muted-foreground mt-4",children:["",z]})]})]});const X=x?[n.questions[N]]:n.questions;return e.jsxs("div",{className:H("h-full flex flex-col",f),children:[e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6 mb-4 shrink-0",children:[e.jsx("h2",{className:"text-xl font-semibold",children:n.title}),n.description&&e.jsx("p",{className:"text-muted-foreground mt-1 text-sm",children:n.description}),m&&e.jsxs("div",{className:"space-y-1 pt-3",children:[e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsx("span",{children:""}),e.jsxs("span",{children:[ve," / ",n.questions.length]})]}),e.jsx(hr,{value:je,className:"h-2"})]})]}),e.jsx(Ze,{className:"flex-1 min-h-0",children:e.jsxs("div",{className:"space-y-4 pr-4",children:[X.map((J,ce)=>e.jsxs("div",{className:H("p-4 rounded-lg border bg-card",j[J.id]?"border-destructive bg-destructive/5":"border-border"),children:[x&&e.jsxs("div",{className:"text-xs text-muted-foreground mb-2",children:[" ",N+1," / ",n.questions.length]}),!x&&e.jsxs("div",{className:"text-xs text-muted-foreground mb-2",children:[ce+1,"."]}),e.jsx(__,{question:J,value:g[J.id],onChange:T=>be(J.id,T),error:j[J.id],disabled:w})]},J.id)),F&&e.jsxs(ea,{variant:"destructive",children:[e.jsx(qt,{className:"h-4 w-4"}),e.jsx(sa,{children:F})]}),e.jsx("div",{className:"flex justify-between items-center py-4",children:x?e.jsxs(e.Fragment,{children:[e.jsxs(_,{variant:"outline",onClick:()=>D(N-1),disabled:N===0||w,children:[e.jsx(pl,{className:"h-4 w-4 mr-1"}),""]}),N===n.questions.length-1?e.jsxs(_,{onClick:Ne,disabled:w,children:[w&&e.jsx(ut,{className:"h-4 w-4 mr-2 animate-spin"}),""]}):e.jsxs(_,{onClick:()=>D(N+1),disabled:w,children:["",e.jsx(Ya,{className:"h-4 w-4 ml-1"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:Object.keys(j).length>0&&e.jsxs("span",{className:"text-destructive",children:[" ",Object.keys(j).length," "]})}),e.jsxs(_,{onClick:Ne,disabled:w,size:"lg",children:[w&&e.jsx(ut,{className:"h-4 w-4 mr-2 animate-spin"}),""]})]})})]})})]})}const k_={id:"webui-feedback-v1",version:"1.0.0",title:" WebUI ",description:" WebUI",questions:[{id:"webui_version",type:"text",title:" WebUI ",description:"",required:!0,readOnly:!0,placeholder:"..."},{id:"ui_design_satisfaction",type:"single",title:" WebUI ",required:!0,options:[{id:"very_satisfied",label:"",value:"very_satisfied"},{id:"satisfied",label:"",value:"satisfied"},{id:"neutral",label:"",value:"neutral"},{id:"dissatisfied",label:"",value:"dissatisfied"},{id:"very_dissatisfied",label:"",value:"very_dissatisfied"}]},{id:"problems_encountered",type:"multiple",title:" WebUI ",description:"",required:!0,options:[{id:"lag",label:"",value:"lag"},{id:"incomplete",label:"",value:"incomplete"},{id:"complex",label:"",value:"complex"},{id:"bugs",label:" Bug",value:"bugs"},{id:"none",label:"",value:"none"},{id:"other",label:"",value:"other"}]},{id:"problems_other",type:"text",title:'""',required:!1,placeholder:"...",maxLength:500},{id:"useful_features",type:"textarea",title:"",required:!0,placeholder:"...",maxLength:1e3},{id:"feature_requests",type:"textarea",title:"",required:!0,placeholder:"...",maxLength:1e3},{id:"overall_satisfaction",type:"single",title:" WebUI ",required:!0,options:[{id:"very_satisfied",label:"",value:"very_satisfied"},{id:"satisfied",label:"",value:"satisfied"},{id:"neutral",label:"",value:"neutral"},{id:"dissatisfied",label:"",value:"dissatisfied"},{id:"very_dissatisfied",label:"",value:"very_dissatisfied"}]},{id:"would_recommend",type:"single",title:" WebUI ",required:!0,options:[{id:"yes",label:"",value:"yes"},{id:"no",label:"",value:"no"}]},{id:"other_suggestions",type:"textarea",title:"",description:"",required:!1,placeholder:"...",maxLength:2e3}],settings:{allowMultiple:!1,thankYouMessage:""}},T_={id:"maibot-feedback-v1",version:"1.0.0",title:"",description:" AI ",questions:[{id:"maibot_version",type:"text",title:"",description:"",required:!0,readOnly:!0,placeholder:"..."},{id:"improvement_areas",type:"textarea",title:"",required:!0,placeholder:"...",maxLength:1e3},{id:"problems_encountered",type:"multiple",title:"",description:"",required:!0,options:[{id:"incomplete",label:"",value:"incomplete"},{id:"slow_response",label:"",value:"slow_response"},{id:"complex",label:"",value:"complex"},{id:"unstable",label:"",value:"unstable"},{id:"config_difficult",label:"",value:"config_difficult"},{id:"none",label:"",value:"none"},{id:"other",label:"",value:"other"}]},{id:"problems_other",type:"text",title:'""',required:!1,placeholder:"...",maxLength:500},{id:"helpful_features",type:"textarea",title:"",required:!0,placeholder:"...",maxLength:1e3},{id:"feature_requests",type:"textarea",title:"",required:!0,placeholder:"...",maxLength:1e3},{id:"overall_satisfaction",type:"single",title:"",required:!0,options:[{id:"very_satisfied",label:"",value:"very_satisfied"},{id:"satisfied",label:"",value:"satisfied"},{id:"neutral",label:"",value:"neutral"},{id:"dissatisfied",label:"",value:"dissatisfied"},{id:"very_dissatisfied",label:"",value:"very_dissatisfied"}]},{id:"would_recommend",type:"single",title:"",required:!0,options:[{id:"yes",label:"",value:"yes"},{id:"no",label:"",value:"no"}]},{id:"other_suggestions",type:"textarea",title:"",description:"",required:!1,placeholder:"...",maxLength:2e3}],settings:{allowMultiple:!1,thankYouMessage:""}};function E_(){const[n,r]=u.useState(null),[i,d]=u.useState(!0);u.useEffect(()=>{const p=JSON.parse(JSON.stringify(k_));r(p),d(!1)},[]);const m=u.useMemo(()=>[{questionId:"webui_version",value:`v${io}`}],[]),x=u.useCallback(p=>{console.log("WebUI Survey submitted:",p)},[]),f=u.useCallback(p=>{console.error("WebUI Survey submission error:",p)},[]);return i?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx(ut,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):n?e.jsxs("div",{className:"h-[calc(100vh-4rem)] flex flex-col p-4 sm:p-6",children:[e.jsxs("div",{className:"mb-4 sm:mb-6 shrink-0",children:[e.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold flex items-center gap-2",children:[e.jsx(Ng,{className:"h-8 w-8",strokeWidth:2}),"WebUI "]}),e.jsx("p",{className:"text-muted-foreground mt-1 text-sm sm:text-base",children:""})]}),e.jsx("div",{className:"flex-1 min-h-0",children:e.jsx(gj,{config:n,initialAnswers:m,showProgress:!0,paginateQuestions:!1,onSubmitSuccess:x,onSubmitError:f})})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] gap-4",children:[e.jsxs(ea,{variant:"destructive",className:"max-w-md",children:[e.jsx(qt,{className:"h-4 w-4"}),e.jsx(sa,{children:""})]}),e.jsx(_,{variant:"outline",onClick:()=>window.location.reload(),children:""})]})}function z_(){const[n,r]=u.useState(null),[i,d]=u.useState(!0),[m,x]=u.useState("");u.useEffect(()=>{(async()=>{try{const y=await Ug();x(y.version||"")}catch(y){console.error("Failed to get MaiBot version:",y),x("")}const j=JSON.parse(JSON.stringify(T_));r(j),d(!1)})()},[]);const f=u.useMemo(()=>[{questionId:"maibot_version",value:m}],[m]),p=u.useCallback(b=>{console.log("MaiBot Survey submitted:",b)},[]),g=u.useCallback(b=>{console.error("MaiBot Survey submission error:",b)},[]);return i?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx(ut,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):n?e.jsxs("div",{className:"h-[calc(100vh-4rem)] flex flex-col p-4 sm:p-6",children:[e.jsxs("div",{className:"mb-4 sm:mb-6 shrink-0",children:[e.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold flex items-center gap-2",children:[e.jsx(Ng,{className:"h-8 w-8",strokeWidth:2}),""]}),e.jsx("p",{className:"text-muted-foreground mt-1 text-sm sm:text-base",children:" AI "})]}),e.jsx("div",{className:"flex-1 min-h-0",children:e.jsx(gj,{config:n,initialAnswers:f,showProgress:!0,paginateQuestions:!1,onSubmitSuccess:p,onSubmitError:g})})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] gap-4",children:[e.jsxs(ea,{variant:"destructive",className:"max-w-md",children:[e.jsx(qt,{className:"h-4 w-4"}),e.jsx(sa,{children:""})]}),e.jsx(_,{variant:"outline",onClick:()=>window.location.reload(),children:""})]})}function M_(){const n=Ta(),[r,i]=u.useState(!0);return u.useEffect(()=>{let d=!1;return(async()=>{try{const x=await em();!d&&!x&&n({to:"/auth"})}catch{d||n({to:"/auth"})}finally{d||i(!1)}})(),()=>{d=!0}},[n]),{checking:r}}async function A_(){return await em()}const D_=dr("pointer-events-none inline-flex select-none items-center gap-1 rounded border bg-muted px-1.5 font-mono font-medium opacity-100",{variants:{size:{sm:"h-5 text-[10px]",default:"h-6 text-xs",lg:"h-7 text-sm"}},defaultVariants:{size:"default"}}),jj=u.forwardRef(({className:n,size:r,abbrTitle:i,children:d,...m},x)=>e.jsx("kbd",{className:H(D_({size:r,className:n})),ref:x,...m,children:i?e.jsx("abbr",{title:i,children:d}):d}));jj.displayName="Kbd";const O_=[{icon:ro,title:"",description:"",path:"/",category:""},{icon:Oa,title:"",description:"",path:"/config/bot",category:""},{icon:yg,title:"",description:"",path:"/config/modelProvider",category:""},{icon:wg,title:"",description:"",path:"/config/model",category:""},{icon:Ku,title:"",description:"",path:"/resource/emoji",category:""},{icon:Ql,title:"",description:"",path:"/resource/expression",category:""},{icon:_g,title:"",description:"",path:"/resource/person",category:""},{icon:or,title:"",description:"",path:"/resource/jargon",category:""},{icon:yy,title:"",description:"",path:"/statistics",category:""},{icon:Vl,title:"",description:"",path:"/plugins",category:""},{icon:Xu,title:"",description:"",path:"/logs",category:""},{icon:ur,title:"",description:"",path:"/settings",category:""}];function R_({open:n,onOpenChange:r}){const[i,d]=u.useState(""),[m,x]=u.useState(0),f=Ta(),p=O_.filter(j=>j.title.toLowerCase().includes(i.toLowerCase())||j.description.toLowerCase().includes(i.toLowerCase())||j.category.toLowerCase().includes(i.toLowerCase()));u.useEffect(()=>{n&&(d(""),x(0))},[n]);const g=u.useCallback(j=>{f({to:j}),r(!1)},[f,r]),b=u.useCallback(j=>{j.key==="ArrowDown"?(j.preventDefault(),x(y=>(y+1)%p.length)):j.key==="ArrowUp"?(j.preventDefault(),x(y=>(y-1+p.length)%p.length)):j.key==="Enter"&&p[m]&&(j.preventDefault(),g(p[m].path))},[p,m,g]);return e.jsx(Fs,{open:n,onOpenChange:r,children:e.jsxs(Bs,{className:"max-w-2xl p-0 gap-0",children:[e.jsxs(Hs,{className:"px-4 pt-4 pb-0",children:[e.jsx(qs,{className:"sr-only",children:""}),e.jsxs("div",{className:"relative",children:[e.jsx(Gt,{className:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 text-muted-foreground"}),e.jsx(ie,{value:i,onChange:j=>{d(j.target.value),x(0)},onKeyDown:b,placeholder:"...",className:"h-12 pl-11 text-base border-0 focus-visible:ring-0 shadow-none",autoFocus:!0})]})]}),e.jsx("div",{className:"border-t",children:e.jsx(Ze,{className:"h-[400px]",children:p.length>0?e.jsx("div",{className:"p-2",children:p.map((j,y)=>{const N=j.icon;return e.jsxs("button",{onClick:()=>g(j.path),onMouseEnter:()=>x(y),className:H("w-full flex items-center gap-3 px-3 py-2.5 rounded-md text-left transition-colors",y===m?"bg-accent text-accent-foreground":"hover:bg-accent/50"),children:[e.jsx(N,{className:"h-5 w-5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-sm",children:j.title}),e.jsx("div",{className:"text-xs text-muted-foreground truncate",children:j.description})]}),e.jsx("div",{className:"text-xs text-muted-foreground px-2 py-1 bg-muted rounded",children:j.category})]},j.path)})}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx(Gt,{className:"h-12 w-12 text-muted-foreground/50 mb-4"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:i?"":""})]})})}),e.jsx("div",{className:"border-t px-4 py-3 flex items-center justify-between text-xs text-muted-foreground",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("kbd",{className:"px-1.5 py-0.5 bg-muted rounded border",children:""}),e.jsx("kbd",{className:"px-1.5 py-0.5 bg-muted rounded border",children:""}),""]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("kbd",{className:"px-1.5 py-0.5 bg-muted rounded border",children:"Enter"}),""]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("kbd",{className:"px-1.5 py-0.5 bg-muted rounded border",children:"Esc"}),""]})]})})]})})}const L_=FN,U_=VN,B_=QN,vj=u.forwardRef(({className:n,sideOffset:r=4,...i},d)=>e.jsx($N,{children:e.jsx(rg,{ref:d,sideOffset:r,className:H("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",n),...i})}));vj.displayName=rg.displayName;function H_({children:n}){const{checking:r}=M_(),[i,d]=u.useState(!0),[m,x]=u.useState(!1),[f,p]=u.useState(!1),{theme:g,setTheme:b}=Pu(),j=qb();if(u.useEffect(()=>{const L=O=>{(O.metaKey||O.ctrlKey)&&O.key==="k"&&(O.preventDefault(),p(!0))};return window.addEventListener("keydown",L),()=>window.removeEventListener("keydown",L)},[]),r)return e.jsx("div",{className:"flex h-screen items-center justify-center bg-background",children:e.jsx("div",{className:"text-muted-foreground",children:"..."})});const y=[{title:"",items:[{icon:ro,label:"",path:"/"}]},{title:"",items:[{icon:Oa,label:"",path:"/config/bot"},{icon:yg,label:"AI",path:"/config/modelProvider",tourId:"sidebar-model-provider"},{icon:wg,label:"",path:"/config/model",tourId:"sidebar-model-management"},{icon:ep,label:"",path:"/config/adapter"}]},{title:"",items:[{icon:Ku,label:"",path:"/resource/emoji"},{icon:Ql,label:"",path:"/resource/expression"},{icon:or,label:"",path:"/resource/jargon"},{icon:_g,label:"",path:"/resource/person"},{icon:vg,label:"",path:"/resource/knowledge-graph"}]},{title:"",items:[{icon:Vl,label:"",path:"/plugins"},{icon:bg,label:"",path:"/model-presets"},{icon:ep,label:"",path:"/plugin-config"},{icon:Xu,label:"",path:"/logs"},{icon:Ql,label:"",path:"/chat"}]},{title:"",items:[{icon:ur,label:"",path:"/settings"}]}],C=g==="system"?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":g,w=async()=>{await Q0()};return e.jsx(L_,{delayDuration:300,children:e.jsxs("div",{className:"flex h-screen overflow-hidden",children:[e.jsxs("aside",{className:H("fixed inset-y-0 left-0 z-50 flex flex-col border-r bg-card transition-all duration-300 lg:relative lg:z-0","w-64 lg:w-auto",i?"lg:w-64":"lg:w-16",m?"translate-x-0":"-translate-x-full lg:translate-x-0"),children:[e.jsx("div",{className:"flex h-16 items-center border-b px-4",children:e.jsxs("div",{className:H("relative flex items-center justify-center flex-1 transition-all overflow-hidden","lg:flex-1",!i&&"lg:flex-none lg:w-8"),children:[e.jsxs("div",{className:H("flex items-baseline gap-2",!i&&"lg:hidden"),children:[e.jsx("span",{className:"font-bold text-xl text-primary-gradient whitespace-nowrap",children:"MaiBot WebUI"}),e.jsx("span",{className:"text-xs text-primary/60 whitespace-nowrap",children:E0()})]}),!i&&e.jsx("span",{className:"hidden lg:block font-bold text-primary-gradient text-2xl",children:"M"})]})}),e.jsx(Ze,{className:H("flex-1 overflow-x-hidden",!i&&"lg:w-16"),children:e.jsx("nav",{className:H("p-4",!i&&"lg:p-2 lg:w-16"),children:e.jsx("ul",{className:H("space-y-6",!i&&"lg:space-y-3 lg:w-full"),children:y.map((L,O)=>e.jsxs("li",{children:[e.jsx("div",{className:H("px-3 h-[1.25rem]","mb-2",!i&&"lg:mb-1 lg:invisible"),children:e.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground/60 whitespace-nowrap",children:L.title})}),!i&&O>0&&e.jsx("div",{className:"hidden lg:block mb-2 border-t border-border"}),e.jsx("ul",{className:"space-y-1",children:L.items.map(U=>{const F=j({to:U.path}),R=U.icon,z=e.jsxs(e.Fragment,{children:[F&&e.jsx("div",{className:"absolute left-0 top-1/2 h-8 w-1 -translate-y-1/2 rounded-r-full bg-primary transition-opacity duration-300"}),e.jsxs("div",{className:H("flex items-center transition-all duration-300",i?"gap-3":"gap-3 lg:gap-0"),children:[e.jsx(R,{className:H("h-5 w-5 flex-shrink-0",F&&"text-primary"),strokeWidth:2,fill:"none"}),e.jsx("span",{className:H("text-sm font-medium whitespace-nowrap transition-all duration-300",F&&"font-semibold",i?"opacity-100 max-w-[200px]":"opacity-100 max-w-[200px] lg:opacity-0 lg:max-w-0 lg:overflow-hidden"),children:U.label})]})]});return e.jsx("li",{className:"relative",children:e.jsxs(U_,{children:[e.jsx(B_,{asChild:!0,children:e.jsx(tr,{to:U.path,"data-tour":U.tourId,className:H("relative flex items-center rounded-lg py-2 transition-all duration-300","hover:bg-accent hover:text-accent-foreground",F?"bg-accent text-foreground":"text-muted-foreground hover:text-foreground",i?"px-3":"px-3 lg:px-0 lg:justify-center lg:w-12 lg:mx-auto"),onClick:()=>x(!1),children:z})}),!i&&e.jsx(vj,{side:"right",className:"hidden lg:block",children:e.jsx("p",{children:U.label})})]})},U.path)})})]},L.title))})})})]}),m&&e.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 lg:hidden",onClick:()=>x(!1)}),e.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[e.jsxs("header",{className:"flex h-16 items-center justify-between border-b bg-card/80 backdrop-blur-md px-4 sticky top-0 z-10",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>x(!m),className:"rounded-lg p-2 hover:bg-accent lg:hidden",children:e.jsx(wy,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>d(!i),className:"hidden rounded-lg p-2 hover:bg-accent lg:block",title:i?"":"",children:e.jsx(pl,{className:H("h-5 w-5 transition-transform",!i&&"rotate-180")})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>p(!0),className:"relative hidden md:flex items-center w-64 h-9 pl-9 pr-16 bg-background/50 border rounded-md hover:bg-accent/50 transition-colors text-left",children:[e.jsx(Gt,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"..."}),e.jsxs(jj,{size:"sm",className:"absolute right-2 top-1/2 -translate-y-1/2",children:[e.jsx("span",{className:"text-xs",children:""}),"K"]})]}),e.jsx(R_,{open:f,onOpenChange:p}),e.jsxs(_,{variant:"ghost",size:"sm",onClick:()=>window.open("https://docs.mai-mai.org","_blank"),className:"gap-2",title:"",children:[e.jsx(_y,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:""})]}),e.jsx("button",{onClick:L=>{_0(C==="dark"?"light":"dark",b,L)},className:"rounded-lg p-2 hover:bg-accent",title:C==="dark"?"":"",children:C==="dark"?e.jsx(hg,{className:"h-5 w-5"}):e.jsx(fg,{className:"h-5 w-5"})}),e.jsx("div",{className:"h-6 w-px bg-border"}),e.jsxs(_,{variant:"ghost",size:"sm",onClick:w,className:"gap-2",title:"",children:[e.jsx(Sy,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:""})]})]})]}),e.jsx("main",{className:"flex-1 overflow-hidden bg-background",children:n})]})]})})}function q_(n){const r=n.split(`
`).slice(1),i=[];for(const d of r){const m=d.trim();if(!m.startsWith("at "))continue;const x=m.match(/at\s+(?:(.+?)\s+\()?(.+?):(\d+):(\d+)\)?$/);x?i.push({functionName:x[1]||"<anonymous>",fileName:x[2],lineNumber:x[3],columnNumber:x[4],raw:m}):i.push({functionName:"<unknown>",fileName:"",lineNumber:"",columnNumber:"",raw:m})}return i}function G_({error:n,errorInfo:r}){const[i,d]=u.useState(!0),[m,x]=u.useState(!1),[f,p]=u.useState(!1),g=n.stack?q_(n.stack):[],b=async()=>{const j=`
Error: ${n.name}
Message: ${n.message}

Stack Trace:
${n.stack||"No stack trace available"}

Component Stack:
${r?.componentStack||"No component stack available"}

URL: ${window.location.href}
User Agent: ${navigator.userAgent}
Time: ${new Date().toISOString()}
    `.trim();try{await navigator.clipboard.writeText(j),p(!0),setTimeout(()=>p(!1),2e3)}catch(y){console.error("Failed to copy:",y)}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs(ea,{variant:"destructive",className:"border-red-500/50 bg-red-500/10",children:[e.jsx(Ra,{className:"h-4 w-4"}),e.jsxs(sa,{className:"font-mono text-sm",children:[e.jsxs("span",{className:"font-semibold",children:[n.name,":"]})," ",n.message]})]}),g.length>0&&e.jsxs(to,{open:i,onOpenChange:d,children:[e.jsx(ao,{asChild:!0,children:e.jsxs(_,{variant:"ghost",className:"w-full justify-between p-3 h-auto",children:[e.jsxs("span",{className:"font-semibold text-sm flex items-center gap-2",children:[e.jsx(Cy,{className:"h-4 w-4"}),"Stack Trace (",g.length," frames)"]}),i?e.jsx(cr,{className:"h-4 w-4"}):e.jsx(fl,{className:"h-4 w-4"})]})}),e.jsx(lo,{children:e.jsx(Ze,{className:"h-[280px] rounded-md border bg-muted/30",children:e.jsx("div",{className:"p-3 space-y-1",children:g.map((j,y)=>e.jsx("div",{className:"font-mono text-xs p-2 rounded hover:bg-muted/50 transition-colors",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsxs("span",{className:"text-muted-foreground w-6 text-right flex-shrink-0",children:[y+1,"."]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("span",{className:"text-primary font-medium",children:j.functionName}),j.fileName&&e.jsxs("div",{className:"text-muted-foreground mt-0.5 break-all",children:[j.fileName,j.lineNumber&&e.jsxs("span",{className:"text-yellow-600 dark:text-yellow-400",children:[":",j.lineNumber,":",j.columnNumber]})]})]})]})},y))})})})]}),r?.componentStack&&e.jsxs(to,{open:m,onOpenChange:x,children:[e.jsx(ao,{asChild:!0,children:e.jsxs(_,{variant:"ghost",className:"w-full justify-between p-3 h-auto",children:[e.jsxs("span",{className:"font-semibold text-sm flex items-center gap-2",children:[e.jsx(Ra,{className:"h-4 w-4"}),"Component Stack"]}),m?e.jsx(cr,{className:"h-4 w-4"}):e.jsx(fl,{className:"h-4 w-4"})]})}),e.jsx(lo,{children:e.jsx(Ze,{className:"h-[200px] rounded-md border bg-muted/30",children:e.jsx("pre",{className:"p-3 font-mono text-xs whitespace-pre-wrap text-muted-foreground",children:r.componentStack})})})]}),e.jsx(_,{variant:"outline",size:"sm",onClick:b,className:"w-full",children:f?e.jsxs(e.Fragment,{children:[e.jsx(Wt,{className:"mr-2 h-4 w-4 text-green-500"}),""]}):e.jsxs(e.Fragment,{children:[e.jsx(Zc,{className:"mr-2 h-4 w-4"}),""]})})]})}function bj({error:n,errorInfo:r}){const i=()=>{window.location.href="/"},d=()=>{window.location.reload()};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:e.jsxs(Ve,{className:"w-full max-w-2xl shadow-lg",children:[e.jsxs(ls,{className:"text-center pb-2",children:[e.jsx("div",{className:"mx-auto flex h-16 w-16 items-center justify-center rounded-full bg-red-100 dark:bg-red-900/30 mb-4",children:e.jsx(Ra,{className:"h-8 w-8 text-red-600 dark:text-red-400"})}),e.jsx(ns,{className:"text-2xl font-bold",children:""}),e.jsx(tt,{className:"text-base mt-2",children:""})]}),e.jsxs(ps,{className:"space-y-4",children:[e.jsx(G_,{error:n,errorInfo:r}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 pt-2",children:[e.jsxs(_,{onClick:d,className:"flex-1",children:[e.jsx(Ht,{className:"mr-2 h-4 w-4"}),""]}),e.jsxs(_,{onClick:i,variant:"outline",className:"flex-1",children:[e.jsx(ro,{className:"mr-2 h-4 w-4"}),""]})]}),e.jsx("p",{className:"text-xs text-center text-muted-foreground pt-2",children:""})]})]})})}class $_ extends u.Component{constructor(r){super(r),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,i){console.error("ErrorBoundary caught an error:",r,i),this.setState({errorInfo:i})}handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};render(){return this.state.hasError&&this.state.error?this.props.fallback?this.props.fallback:e.jsx(bj,{error:this.state.error,errorInfo:this.state.errorInfo}):this.props.children}}function Nj({error:n}){return e.jsx(bj,{error:n,errorInfo:null})}const _i=Gb({component:()=>e.jsxs(e.Fragment,{children:[e.jsx(Sp,{}),!1]}),beforeLoad:()=>{if(window.location.pathname==="/"&&!A_())throw Fb({to:"/auth"})}}),F_=lt({getParentRoute:()=>_i,path:"/auth",component:I0}),V_=lt({getParentRoute:()=>_i,path:"/setup",component:cw}),_t=lt({getParentRoute:()=>_i,id:"protected",component:()=>e.jsx(H_,{children:e.jsx(Sp,{})}),errorComponent:({error:n})=>e.jsx(Nj,{error:n})}),Q_=lt({getParentRoute:()=>_t,path:"/",component:y0}),I_=lt({getParentRoute:()=>_t,path:"/config/bot",component:Hw}),Y_=lt({getParentRoute:()=>_t,path:"/config/modelProvider",component:Jw}),K_=lt({getParentRoute:()=>_t,path:"/config/model",component:u1}),X_=lt({getParentRoute:()=>_t,path:"/config/adapter",component:x1}),J_=lt({getParentRoute:()=>_t,path:"/resource/emoji",component:L1}),P_=lt({getParentRoute:()=>_t,path:"/resource/expression",component:K1}),Z_=lt({getParentRoute:()=>_t,path:"/resource/person",component:j2}),W_=lt({getParentRoute:()=>_t,path:"/resource/jargon",component:c2}),eS=lt({getParentRoute:()=>_t,path:"/resource/knowledge-graph",component:k2}),sS=lt({getParentRoute:()=>_t,path:"/logs",component:E2}),tS=lt({getParentRoute:()=>_t,path:"/chat",component:x_}),aS=lt({getParentRoute:()=>_t,path:"/plugins",component:W2}),lS=lt({getParentRoute:()=>_t,path:"/model-presets",component:e_}),nS=lt({getParentRoute:()=>_t,path:"/plugin-config",component:a_}),rS=lt({getParentRoute:()=>_t,path:"/plugin-mirrors",component:l_}),iS=lt({getParentRoute:()=>_t,path:"/settings",component:H0}),cS=lt({getParentRoute:()=>_t,path:"/survey/webui-feedback",component:E_}),oS=lt({getParentRoute:()=>_t,path:"/survey/maibot-feedback",component:z_}),dS=lt({getParentRoute:()=>_i,path:"*",component:Bg}),uS=_i.addChildren([F_,V_,_t.addChildren([Q_,I_,Y_,K_,X_,J_,P_,W_,Z_,eS,aS,lS,nS,rS,sS,tS,iS,cS,oS]),dS]),mS=$b({routeTree:uS,defaultNotFoundComponent:Bg,defaultErrorComponent:({error:n})=>e.jsx(Nj,{error:n})});function xS({children:n,defaultTheme:r="system",storageKey:i="ui-theme",...d}){const[m,x]=u.useState(()=>localStorage.getItem(i)||r);u.useEffect(()=>{const p=window.document.documentElement;if(p.classList.remove("light","dark"),m==="system"){const g=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";p.classList.add(g);return}p.classList.add(m)},[m]),u.useEffect(()=>{const p=localStorage.getItem("accent-color");if(p){const g=document.documentElement,j={blue:{hsl:"221.2 83.2% 53.3%",darkHsl:"217.2 91.2% 59.8%",gradient:null},purple:{hsl:"271 91% 65%",darkHsl:"270 95% 75%",gradient:null},green:{hsl:"142 71% 45%",darkHsl:"142 76% 36%",gradient:null},orange:{hsl:"25 95% 53%",darkHsl:"20 90% 48%",gradient:null},pink:{hsl:"330 81% 60%",darkHsl:"330 85% 70%",gradient:null},red:{hsl:"0 84% 60%",darkHsl:"0 90% 70%",gradient:null},"gradient-sunset":{hsl:"15 95% 60%",darkHsl:"15 95% 65%",gradient:"linear-gradient(135deg, hsl(25 95% 53%) 0%, hsl(330 81% 60%) 100%)"},"gradient-ocean":{hsl:"200 90% 55%",darkHsl:"200 90% 60%",gradient:"linear-gradient(135deg, hsl(221.2 83.2% 53.3%) 0%, hsl(189 94% 43%) 100%)"},"gradient-forest":{hsl:"150 70% 45%",darkHsl:"150 75% 40%",gradient:"linear-gradient(135deg, hsl(142 71% 45%) 0%, hsl(158 64% 52%) 100%)"},"gradient-aurora":{hsl:"310 85% 65%",darkHsl:"310 90% 70%",gradient:"linear-gradient(135deg, hsl(271 91% 65%) 0%, hsl(330 81% 60%) 100%)"},"gradient-fire":{hsl:"15 95% 55%",darkHsl:"15 95% 60%",gradient:"linear-gradient(135deg, hsl(0 84% 60%) 0%, hsl(25 95% 53%) 100%)"},"gradient-twilight":{hsl:"250 90% 60%",darkHsl:"250 95% 65%",gradient:"linear-gradient(135deg, hsl(239 84% 67%) 0%, hsl(271 91% 65%) 100%)"}}[p];j&&(g.style.setProperty("--primary",j.hsl),j.gradient?(g.style.setProperty("--primary-gradient",j.gradient),g.classList.add("has-gradient")):(g.style.removeProperty("--primary-gradient"),g.classList.remove("has-gradient")))}},[]);const f={theme:m,setTheme:p=>{localStorage.setItem(i,p),x(p)}};return e.jsx(Mg.Provider,{...d,value:f,children:n})}function hS({children:n,defaultEnabled:r=!0,defaultWavesEnabled:i=!0,storageKey:d="enable-animations",wavesStorageKey:m="enable-waves-background"}){const[x,f]=u.useState(()=>{const j=localStorage.getItem(d);return j!==null?j==="true":r}),[p,g]=u.useState(()=>{const j=localStorage.getItem(m);return j!==null?j==="true":i});u.useEffect(()=>{const j=document.documentElement;x?j.classList.remove("no-animations"):j.classList.add("no-animations"),localStorage.setItem(d,String(x))},[x,d]),u.useEffect(()=>{localStorage.setItem(m,String(p))},[p,m]);const b={enableAnimations:x,setEnableAnimations:f,enableWavesBackground:p,setEnableWavesBackground:g};return e.jsx(Ag.Provider,{value:b,children:n})}const fS=IN,yj=u.forwardRef(({className:n,...r},i)=>e.jsx(ig,{ref:i,className:H("fixed bottom-0 right-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:max-w-[420px] gap-2",n),...r}));yj.displayName=ig.displayName;const pS=dr("group pointer-events-auto relative flex w-full items-center justify-between space-x-2 overflow-hidden rounded-md border p-4 pr-6 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-slide-in-from-right data-[state=open]:animate-fade-in data-[state=closed]:animate-slide-out-to-right data-[state=closed]:animate-fade-out data-[swipe=end]:animate-slide-out-to-right",{variants:{variant:{default:"border bg-primary/5 text-foreground backdrop-blur-sm",destructive:"destructive group border-destructive bg-destructive/10 text-destructive-foreground backdrop-blur-sm"}},defaultVariants:{variant:"default"}}),wj=u.forwardRef(({className:n,variant:r,...i},d)=>e.jsx(cg,{ref:d,className:H(pS({variant:r}),n),...i}));wj.displayName=cg.displayName;const gS=u.forwardRef(({className:n,...r},i)=>e.jsx(og,{ref:i,className:H("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium transition-colors hover:bg-secondary focus:outline-none focus:ring-1 focus:ring-ring disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...r}));gS.displayName=og.displayName;const _j=u.forwardRef(({className:n,...r},i)=>e.jsx(dg,{ref:i,className:H("absolute right-1 top-1 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-1 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...r,children:e.jsx(hl,{className:"h-4 w-4"})}));_j.displayName=dg.displayName;const Sj=u.forwardRef(({className:n,...r},i)=>e.jsx(ug,{ref:i,className:H("text-sm font-semibold [&+div]:text-xs",n),...r}));Sj.displayName=ug.displayName;const Cj=u.forwardRef(({className:n,...r},i)=>e.jsx(mg,{ref:i,className:H("text-sm opacity-90",n),...r}));Cj.displayName=mg.displayName;function jS(){const{toasts:n}=Qs();return e.jsxs(fS,{children:[n.map(function({id:r,title:i,description:d,action:m,...x}){return e.jsxs(wj,{...x,children:[e.jsxs("div",{className:"grid gap-1",children:[i&&e.jsx(Sj,{children:i}),d&&e.jsx(Cj,{children:d})]}),m,e.jsx(_j,{})]},r)}),e.jsx(yj,{})]})}u0.createRoot(document.getElementById("root")).render(e.jsx(u.StrictMode,{children:e.jsx($_,{children:e.jsx(xS,{defaultTheme:"system",children:e.jsx(hS,{children:e.jsxs(Vw,{children:[e.jsx(Vb,{router:mS}),e.jsx(Yw,{}),e.jsx(jS,{})]})})})})}));
