import{r as u,j as e,L as Kc,e as It,b as xy,f as fy,g as py,h as gy,k as lt,l as jy,m as vy,O as vp,n as yy}from"./router-CWhjJi2n.js";import{a as Ny,b as by,g as wy}from"./react-vendor-Dtc2IqVY.js";import{I as _y,c as Sy,J as ai,K as qc,L as wu,M as Cy,N as er,O as sr,P as ky,n as _u}from"./utils-CCeOswSm.js";import{L as yp,T as Np,C as bp,R as Ty,a as wp,V as Ey,b as zy,S as _p,c as My,d as Sp,I as Ay,e as Cp,f as Dy,g as kp,h as Oy,i as Ry,j as Ly,O as Tp,P as Uy,k as Ep,l as zp,D as Mp,A as Ap,m as Dp,n as By,o as Hy,p as Op,q as qy,r as Rp,s as Gy,t as Vy,u as Fy,v as Qy,w as $y,x as Lp,y as Up,F as Bp,z as Hp,B as qp,E as Yy,G as Gp,H as Vp,J as Fp,K as Qp,M as $p,N as Yp,Q as Xp,U as Xy,W as Ky,X as Zy}from"./radix-extra-Cw1azsjZ.js";import{aj as Iy,ak as Jy,al as Py,am as Wy,an as Gc,ao as Vc,ap as tr,aq as eN,ar as Su,as as Fc,at as sN,au as tN,av as aN}from"./charts-Dhri-zxi.js";import{S as lN,H as Kp,O as Zp,o as nN,C as Ip,p as Jp,T as Pp,D as Wp,R as iN,q as rN,I as eg,J as cN,K as sg,L as tg,M as oN,N as ag,V as dN,Q as lg,U as ng,X as uN,Y as mN,Z as ig,_ as hN,$ as xN,a0 as rg,a1 as fN,a2 as pN,a3 as cg,a4 as gN,a5 as jN,a6 as vN,a7 as og,a8 as dg,a9 as ug,aa as mg,ab as hg,ac as xg,ad as yN}from"./radix-core-BlBHu_Lw.js";import{R as ft,P as Nr,C as xa,a as Aa,Z as ln,b as Wc,F as Ma,c as NN,S as Rl,A as bN,D as wN,d as eo,e as Wn,M as si,T as _N,X as li,f as fg,g as SN,I as Xt,h as ya,i as ha,j as so,E as mr,k as Zt,l as pg,H as CN,m as ns,n as nl,U as hr,o as Ou,p as Ru,L as $f,K as gg,q as ro,r as kN,s as dr,t as vt,u as TN,B as ir,v as to,w as Qu,x as EN,y as zN,z as St,G as xr,J as ti,N as Ll,O as fr,Q as MN,V as AN,W as br,Y as gt,_ as ao,$ as nn,a0 as wr,a1 as cn,a2 as il,a3 as _r,a4 as $u,a5 as DN,a6 as ON,a7 as RN,a8 as rn,a9 as LN,aa as Lu,ab as pr,ac as UN,ad as BN,ae as Uu,af as HN,ag as jg,ah as Yf,ai as qN,aj as GN,ak as VN,al as Ol,am as Cu,an as Xf,ao as FN,ap as QN,aq as $N,ar as YN,as as XN,at as vg,au as yg,av as Ng,aw as KN,ax as ZN,ay as Kf,az as IN,aA as JN,aB as Zf,aC as PN,aD as WN}from"./icons-Bw5y5Hqz.js";import{S as eb,p as sb,j as tb,a as ab,E as If,R as lb,o as nb}from"./codemirror-BHeANvwm.js";import{_ as Lt,c as ib,g as bg,D as rb}from"./misc-Ii-X5qWA.js";import{u as cb,a as Jf,D as ob,c as db,S as ub,h as mb,b as hb,s as xb,K as fb,P as pb,d as gb,C as jb}from"./dnd-Dyi3CnuX.js";import{D as vb,U as yb}from"./uppy-DSH7n_-V.js";import{M as Nb,r as bb,a as wb,b as _b}from"./markdown-A1ShuLvG.js";import{r as Sb,H as lo,P as no,u as Cb,a as kb,R as Tb,B as Eb,b as zb,C as Mb,M as Ab,c as Db}from"./reactflow-B3n3_Vkw.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))d(h);new MutationObserver(h=>{for(const x of h)if(x.type==="childList")for(const f of x.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&d(f)}).observe(document,{childList:!0,subtree:!0});function c(h){const x={};return h.integrity&&(x.integrity=h.integrity),h.referrerPolicy&&(x.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?x.credentials="include":h.crossOrigin==="anonymous"?x.credentials="omit":x.credentials="same-origin",x}function d(h){if(h.ep)return;h.ep=!0;const x=c(h);fetch(h.href,x)}})();var ku={exports:{}},ar={},Tu={exports:{}},Eu={};var Pf;function Ob(){return Pf||(Pf=1,(function(n){function r(y,q){var H=y.length;y.push(q);e:for(;0<H;){var ne=H-1>>>1,S=y[ne];if(0<h(S,q))y[ne]=q,y[H]=S,H=ne;else break e}}function c(y){return y.length===0?null:y[0]}function d(y){if(y.length===0)return null;var q=y[0],H=y.pop();if(H!==q){y[0]=H;e:for(var ne=0,S=y.length,me=S>>>1;ne<me;){var he=2*(ne+1)-1,Q=y[he],oe=he+1,ge=y[oe];if(0>h(Q,H))oe<S&&0>h(ge,Q)?(y[ne]=ge,y[oe]=H,ne=oe):(y[ne]=Q,y[he]=H,ne=he);else if(oe<S&&0>h(ge,H))y[ne]=ge,y[oe]=H,ne=oe;else break e}}return q}function h(y,q){var H=y.sortIndex-q.sortIndex;return H!==0?H:y.id-q.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var x=performance;n.unstable_now=function(){return x.now()}}else{var f=Date,j=f.now();n.unstable_now=function(){return f.now()-j}}var g=[],_=[],v=1,k=null,z=3,T=!1,L=!1,K=!1,U=!1,R=typeof setTimeout=="function"?setTimeout:null,ee=typeof clearTimeout=="function"?clearTimeout:null,V=typeof setImmediate<"u"?setImmediate:null;function E(y){for(var q=c(_);q!==null;){if(q.callback===null)d(_);else if(q.startTime<=y)d(_),q.sortIndex=q.expirationTime,r(g,q);else break;q=c(_)}}function B(y){if(K=!1,E(y),!L)if(c(g)!==null)L=!0,X||(X=!0,ye());else{var q=c(_);q!==null&&Ne(B,q.startTime-y)}}var X=!1,w=-1,D=5,te=-1;function xe(){return U?!0:!(n.unstable_now()-te<D)}function be(){if(U=!1,X){var y=n.unstable_now();te=y;var q=!0;try{e:{L=!1,K&&(K=!1,ee(w),w=-1),T=!0;var H=z;try{s:{for(E(y),k=c(g);k!==null&&!(k.expirationTime>y&&xe());){var ne=k.callback;if(typeof ne=="function"){k.callback=null,z=k.priorityLevel;var S=ne(k.expirationTime<=y);if(y=n.unstable_now(),typeof S=="function"){k.callback=S,E(y),q=!0;break s}k===c(g)&&d(g),E(y)}else d(g);k=c(g)}if(k!==null)q=!0;else{var me=c(_);me!==null&&Ne(B,me.startTime-y),q=!1}}break e}finally{k=null,z=H,T=!1}q=void 0}}finally{q?ye():X=!1}}}var ye;if(typeof V=="function")ye=function(){V(be)};else if(typeof MessageChannel<"u"){var ve=new MessageChannel,pe=ve.port2;ve.port1.onmessage=be,ye=function(){pe.postMessage(null)}}else ye=function(){R(be,0)};function Ne(y,q){w=R(function(){y(n.unstable_now())},q)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(y){y.callback=null},n.unstable_forceFrameRate=function(y){0>y||125<y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<y?Math.floor(1e3/y):5},n.unstable_getCurrentPriorityLevel=function(){return z},n.unstable_next=function(y){switch(z){case 1:case 2:case 3:var q=3;break;default:q=z}var H=z;z=q;try{return y()}finally{z=H}},n.unstable_requestPaint=function(){U=!0},n.unstable_runWithPriority=function(y,q){switch(y){case 1:case 2:case 3:case 4:case 5:break;default:y=3}var H=z;z=y;try{return q()}finally{z=H}},n.unstable_scheduleCallback=function(y,q,H){var ne=n.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?ne+H:ne):H=ne,y){case 1:var S=-1;break;case 2:S=250;break;case 5:S=1073741823;break;case 4:S=1e4;break;default:S=5e3}return S=H+S,y={id:v++,callback:q,priorityLevel:y,startTime:H,expirationTime:S,sortIndex:-1},H>ne?(y.sortIndex=H,r(_,y),c(g)===null&&y===c(_)&&(K?(ee(w),w=-1):K=!0,Ne(B,H-ne))):(y.sortIndex=S,r(g,y),L||T||(L=!0,X||(X=!0,ye()))),y},n.unstable_shouldYield=xe,n.unstable_wrapCallback=function(y){var q=z;return function(){var H=z;z=q;try{return y.apply(this,arguments)}finally{z=H}}}})(Eu)),Eu}var Wf;function Rb(){return Wf||(Wf=1,Tu.exports=Ob()),Tu.exports}var ep;function Lb(){if(ep)return ar;ep=1;var n=Rb(),r=Ny(),c=by();function d(s){var t="https://react.dev/errors/"+s;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+s+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function h(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function x(s){var t=s,a=s;if(s.alternate)for(;t.return;)t=t.return;else{s=t;do t=s,(t.flags&4098)!==0&&(a=t.return),s=t.return;while(s)}return t.tag===3?a:null}function f(s){if(s.tag===13){var t=s.memoizedState;if(t===null&&(s=s.alternate,s!==null&&(t=s.memoizedState)),t!==null)return t.dehydrated}return null}function j(s){if(s.tag===31){var t=s.memoizedState;if(t===null&&(s=s.alternate,s!==null&&(t=s.memoizedState)),t!==null)return t.dehydrated}return null}function g(s){if(x(s)!==s)throw Error(d(188))}function _(s){var t=s.alternate;if(!t){if(t=x(s),t===null)throw Error(d(188));return t!==s?null:s}for(var a=s,l=t;;){var i=a.return;if(i===null)break;var o=i.alternate;if(o===null){if(l=i.return,l!==null){a=l;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===a)return g(i),s;if(o===l)return g(i),t;o=o.sibling}throw Error(d(188))}if(a.return!==l.return)a=i,l=o;else{for(var m=!1,p=i.child;p;){if(p===a){m=!0,a=i,l=o;break}if(p===l){m=!0,l=i,a=o;break}p=p.sibling}if(!m){for(p=o.child;p;){if(p===a){m=!0,a=o,l=i;break}if(p===l){m=!0,l=o,a=i;break}p=p.sibling}if(!m)throw Error(d(189))}}if(a.alternate!==l)throw Error(d(190))}if(a.tag!==3)throw Error(d(188));return a.stateNode.current===a?s:t}function v(s){var t=s.tag;if(t===5||t===26||t===27||t===6)return s;for(s=s.child;s!==null;){if(t=v(s),t!==null)return t;s=s.sibling}return null}var k=Object.assign,z=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),L=Symbol.for("react.portal"),K=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),ee=Symbol.for("react.consumer"),V=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),X=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),te=Symbol.for("react.activity"),xe=Symbol.for("react.memo_cache_sentinel"),be=Symbol.iterator;function ye(s){return s===null||typeof s!="object"?null:(s=be&&s[be]||s["@@iterator"],typeof s=="function"?s:null)}var ve=Symbol.for("react.client.reference");function pe(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===ve?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case K:return"Fragment";case R:return"Profiler";case U:return"StrictMode";case B:return"Suspense";case X:return"SuspenseList";case te:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case L:return"Portal";case V:return s.displayName||"Context";case ee:return(s._context.displayName||"Context")+".Consumer";case E:var t=s.render;return s=s.displayName,s||(s=t.displayName||t.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case w:return t=s.displayName||null,t!==null?t:pe(s.type)||"Memo";case D:t=s._payload,s=s._init;try{return pe(s(t))}catch{}}return null}var Ne=Array.isArray,y=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q=c.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H={pending:!1,data:null,method:null,action:null},ne=[],S=-1;function me(s){return{current:s}}function he(s){0>S||(s.current=ne[S],ne[S]=null,S--)}function Q(s,t){S++,ne[S]=s.current,s.current=t}var oe=me(null),ge=me(null),le=me(null),O=me(null);function F(s,t){switch(Q(le,t),Q(ge,s),Q(oe,null),t.nodeType){case 9:case 11:s=(s=t.documentElement)&&(s=s.namespaceURI)?xf(s):0;break;default:if(s=t.tagName,t=t.namespaceURI)t=xf(t),s=ff(t,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}he(oe),Q(oe,s)}function A(){he(oe),he(ge),he(le)}function W(s){s.memoizedState!==null&&Q(O,s);var t=oe.current,a=ff(t,s.type);t!==a&&(Q(ge,s),Q(oe,a))}function _e(s){ge.current===s&&(he(oe),he(ge)),O.current===s&&(he(O),Ii._currentValue=H)}var Me,ss;function Ie(s){if(Me===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);Me=t&&t[1]||"",ss=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Me+s+ss}var Rs=!1;function qs(s,t){if(!s||Rs)return"";Rs=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(t){var de=function(){throw Error()};if(Object.defineProperty(de.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(de,[])}catch(se){var J=se}Reflect.construct(s,[],de)}else{try{de.call()}catch(se){J=se}s.call(de.prototype)}}else{try{throw Error()}catch(se){J=se}(de=s())&&typeof de.catch=="function"&&de.catch(function(){})}}catch(se){if(se&&J&&typeof se.stack=="string")return[se.stack,J.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var o=l.DetermineComponentFrameRoot(),m=o[0],p=o[1];if(m&&p){var C=m.split(`
`),I=p.split(`
`);for(i=l=0;l<C.length&&!C[l].includes("DetermineComponentFrameRoot");)l++;for(;i<I.length&&!I[i].includes("DetermineComponentFrameRoot");)i++;if(l===C.length||i===I.length)for(l=C.length-1,i=I.length-1;1<=l&&0<=i&&C[l]!==I[i];)i--;for(;1<=l&&0<=i;l--,i--)if(C[l]!==I[i]){if(l!==1||i!==1)do if(l--,i--,0>i||C[l]!==I[i]){var ae=`
`+C[l].replace(" at new "," at ");return s.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",s.displayName)),ae}while(1<=l&&0<=i);break}}}finally{Rs=!1,Error.prepareStackTrace=a}return(a=s?s.displayName||s.name:"")?Ie(a):""}function ie(s,t){switch(s.tag){case 26:case 27:case 5:return Ie(s.type);case 16:return Ie("Lazy");case 13:return s.child!==t&&t!==null?Ie("Suspense Fallback"):Ie("Suspense");case 19:return Ie("SuspenseList");case 0:case 15:return qs(s.type,!1);case 11:return qs(s.type.render,!1);case 1:return qs(s.type,!0);case 31:return Ie("Activity");default:return""}}function we(s){try{var t="",a=null;do t+=ie(s,a),a=s,s=s.return;while(s);return t}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Ke=Object.prototype.hasOwnProperty,Le=n.unstable_scheduleCallback,st=n.unstable_cancelCallback,Jt=n.unstable_shouldYield,bt=n.unstable_requestPaint,Je=n.unstable_now,Ue=n.unstable_getCurrentPriorityLevel,jt=n.unstable_ImmediatePriority,nt=n.unstable_UserBlockingPriority,Ct=n.unstable_NormalPriority,kt=n.unstable_LowPriority,rl=n.unstable_IdlePriority,cl=n.log,ol=n.unstable_setDisableYieldValue,Se=null,Re=null;function it(s){if(typeof cl=="function"&&ol(s),Re&&typeof Re.setStrictMode=="function")try{Re.setStrictMode(Se,s)}catch{}}var ot=Math.clz32?Math.clz32:dt,di=Math.log,on=Math.LN2;function dt(s){return s>>>=0,s===0?32:31-(di(s)/on|0)|0}var Pt=256,Wt=262144,La=4194304;function Ut(s){var t=s&42;if(t!==0)return t;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Ua(s,t,a){var l=s.pendingLanes;if(l===0)return 0;var i=0,o=s.suspendedLanes,m=s.pingedLanes;s=s.warmLanes;var p=l&134217727;return p!==0?(l=p&~o,l!==0?i=Ut(l):(m&=p,m!==0?i=Ut(m):a||(a=p&~s,a!==0&&(i=Ut(a))))):(p=l&~o,p!==0?i=Ut(p):m!==0?i=Ut(m):a||(a=l&~s,a!==0&&(i=Ut(a)))),i===0?0:t!==0&&t!==i&&(t&o)===0&&(o=i&-i,a=t&-t,o>=a||o===32&&(a&4194048)!==0)?t:i}function ba(s,t){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&t)===0}function P(s,t){switch(s){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function je(){var s=La;return La<<=1,(La&62914560)===0&&(La=4194304),s}function Ae(s){for(var t=[],a=0;31>a;a++)t.push(s);return t}function tt(s,t){s.pendingLanes|=t,t!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Bt(s,t,a,l,i,o){var m=s.pendingLanes;s.pendingLanes=a,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=a,s.entangledLanes&=a,s.errorRecoveryDisabledLanes&=a,s.shellSuspendCounter=0;var p=s.entanglements,C=s.expirationTimes,I=s.hiddenUpdates;for(a=m&~a;0<a;){var ae=31-ot(a),de=1<<ae;p[ae]=0,C[ae]=-1;var J=I[ae];if(J!==null)for(I[ae]=null,ae=0;ae<J.length;ae++){var se=J[ae];se!==null&&(se.lane&=-536870913)}a&=~de}l!==0&&Tt(s,l,0),o!==0&&i===0&&s.tag!==0&&(s.suspendedLanes|=o&~(m&~t))}function Tt(s,t,a){s.pendingLanes|=t,s.suspendedLanes&=~t;var l=31-ot(t);s.entangledLanes|=t,s.entanglements[l]=s.entanglements[l]|1073741824|a&261930}function dl(s,t){var a=s.entangledLanes|=t;for(s=s.entanglements;a;){var l=31-ot(a),i=1<<l;i&t|s[l]&t&&(s[l]|=t),a&=~i}}function Hl(s,t){var a=t&-t;return a=(a&42)!==0?1:dn(a),(a&(s.suspendedLanes|t))!==0?0:a}function dn(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function un(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Y(){var s=q.p;return s!==0?s:(s=window.event,s===void 0?32:Bf(s.type))}function fe(s,t){var a=q.p;try{return q.p=s,t()}finally{q.p=a}}var De=Math.random().toString(36).slice(2),Fe="__reactFiber$"+De,Ys="__reactProps$"+De,wa="__reactContainer$"+De,Ba="__reactEvents$"+De,_a="__reactListeners$"+De,lj="__reactHandles$"+De,em="__reactResources$"+De,ui="__reactMarker$"+De;function fo(s){delete s[Fe],delete s[Ys],delete s[Ba],delete s[_a],delete s[lj]}function mn(s){var t=s[Fe];if(t)return t;for(var a=s.parentNode;a;){if(t=a[wa]||a[Fe]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(s=bf(s);s!==null;){if(a=s[Fe])return a;s=bf(s)}return t}s=a,a=s.parentNode}return null}function hn(s){if(s=s[Fe]||s[wa]){var t=s.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return s}return null}function mi(s){var t=s.tag;if(t===5||t===26||t===27||t===6)return s.stateNode;throw Error(d(33))}function xn(s){var t=s[em];return t||(t=s[em]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function rt(s){s[ui]=!0}var sm=new Set,tm={};function ql(s,t){fn(s,t),fn(s+"Capture",t)}function fn(s,t){for(tm[s]=t,s=0;s<t.length;s++)sm.add(t[s])}var nj=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),am={},lm={};function ij(s){return Ke.call(lm,s)?!0:Ke.call(am,s)?!1:nj.test(s)?lm[s]=!0:(am[s]=!0,!1)}function Tr(s,t,a){if(ij(t))if(a===null)s.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":s.removeAttribute(t);return;case"boolean":var l=t.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){s.removeAttribute(t);return}}s.setAttribute(t,""+a)}}function Er(s,t,a){if(a===null)s.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(t);return}s.setAttribute(t,""+a)}}function Ha(s,t,a,l){if(l===null)s.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttributeNS(t,a,""+l)}}function ea(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function nm(s){var t=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function rj(s,t,a){var l=Object.getOwnPropertyDescriptor(s.constructor.prototype,t);if(!s.hasOwnProperty(t)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var i=l.get,o=l.set;return Object.defineProperty(s,t,{configurable:!0,get:function(){return i.call(this)},set:function(m){a=""+m,o.call(this,m)}}),Object.defineProperty(s,t,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(m){a=""+m},stopTracking:function(){s._valueTracker=null,delete s[t]}}}}function po(s){if(!s._valueTracker){var t=nm(s)?"checked":"value";s._valueTracker=rj(s,t,""+s[t])}}function im(s){if(!s)return!1;var t=s._valueTracker;if(!t)return!0;var a=t.getValue(),l="";return s&&(l=nm(s)?s.checked?"true":"false":s.value),s=l,s!==a?(t.setValue(s),!0):!1}function zr(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var cj=/[\n"\\]/g;function sa(s){return s.replace(cj,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function go(s,t,a,l,i,o,m,p){s.name="",m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"?s.type=m:s.removeAttribute("type"),t!=null?m==="number"?(t===0&&s.value===""||s.value!=t)&&(s.value=""+ea(t)):s.value!==""+ea(t)&&(s.value=""+ea(t)):m!=="submit"&&m!=="reset"||s.removeAttribute("value"),t!=null?jo(s,m,ea(t)):a!=null?jo(s,m,ea(a)):l!=null&&s.removeAttribute("value"),i==null&&o!=null&&(s.defaultChecked=!!o),i!=null&&(s.checked=i&&typeof i!="function"&&typeof i!="symbol"),p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"?s.name=""+ea(p):s.removeAttribute("name")}function rm(s,t,a,l,i,o,m,p){if(o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(s.type=o),t!=null||a!=null){if(!(o!=="submit"&&o!=="reset"||t!=null)){po(s);return}a=a!=null?""+ea(a):"",t=t!=null?""+ea(t):a,p||t===s.value||(s.value=t),s.defaultValue=t}l=l??i,l=typeof l!="function"&&typeof l!="symbol"&&!!l,s.checked=p?s.checked:!!l,s.defaultChecked=!!l,m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(s.name=m),po(s)}function jo(s,t,a){t==="number"&&zr(s.ownerDocument)===s||s.defaultValue===""+a||(s.defaultValue=""+a)}function pn(s,t,a,l){if(s=s.options,t){t={};for(var i=0;i<a.length;i++)t["$"+a[i]]=!0;for(a=0;a<s.length;a++)i=t.hasOwnProperty("$"+s[a].value),s[a].selected!==i&&(s[a].selected=i),i&&l&&(s[a].defaultSelected=!0)}else{for(a=""+ea(a),t=null,i=0;i<s.length;i++){if(s[i].value===a){s[i].selected=!0,l&&(s[i].defaultSelected=!0);return}t!==null||s[i].disabled||(t=s[i])}t!==null&&(t.selected=!0)}}function cm(s,t,a){if(t!=null&&(t=""+ea(t),t!==s.value&&(s.value=t),a==null)){s.defaultValue!==t&&(s.defaultValue=t);return}s.defaultValue=a!=null?""+ea(a):""}function om(s,t,a,l){if(t==null){if(l!=null){if(a!=null)throw Error(d(92));if(Ne(l)){if(1<l.length)throw Error(d(93));l=l[0]}a=l}a==null&&(a=""),t=a}a=ea(t),s.defaultValue=a,l=s.textContent,l===a&&l!==""&&l!==null&&(s.value=l),po(s)}function gn(s,t){if(t){var a=s.firstChild;if(a&&a===s.lastChild&&a.nodeType===3){a.nodeValue=t;return}}s.textContent=t}var oj=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function dm(s,t,a){var l=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?s.setProperty(t,""):t==="float"?s.cssFloat="":s[t]="":l?s.setProperty(t,a):typeof a!="number"||a===0||oj.has(t)?t==="float"?s.cssFloat=a:s[t]=(""+a).trim():s[t]=a+"px"}function um(s,t,a){if(t!=null&&typeof t!="object")throw Error(d(62));if(s=s.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||t!=null&&t.hasOwnProperty(l)||(l.indexOf("--")===0?s.setProperty(l,""):l==="float"?s.cssFloat="":s[l]="");for(var i in t)l=t[i],t.hasOwnProperty(i)&&a[i]!==l&&dm(s,i,l)}else for(var o in t)t.hasOwnProperty(o)&&dm(s,o,t[o])}function vo(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dj=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),uj=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Mr(s){return uj.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function qa(){}var yo=null;function No(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var jn=null,vn=null;function mm(s){var t=hn(s);if(t&&(s=t.stateNode)){var a=s[Ys]||null;e:switch(s=t.stateNode,t.type){case"input":if(go(s,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=s;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+sa(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var l=a[t];if(l!==s&&l.form===s.form){var i=l[Ys]||null;if(!i)throw Error(d(90));go(l,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<a.length;t++)l=a[t],l.form===s.form&&im(l)}break e;case"textarea":cm(s,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&pn(s,!!a.multiple,t,!1)}}}var bo=!1;function hm(s,t,a){if(bo)return s(t,a);bo=!0;try{var l=s(t);return l}finally{if(bo=!1,(jn!==null||vn!==null)&&(jc(),jn&&(t=jn,s=vn,vn=jn=null,mm(t),s)))for(t=0;t<s.length;t++)mm(s[t])}}function hi(s,t){var a=s.stateNode;if(a===null)return null;var l=a[Ys]||null;if(l===null)return null;a=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(s=s.type,l=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!l;break e;default:s=!1}if(s)return null;if(a&&typeof a!="function")throw Error(d(231,t,typeof a));return a}var Ga=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wo=!1;if(Ga)try{var xi={};Object.defineProperty(xi,"passive",{get:function(){wo=!0}}),window.addEventListener("test",xi,xi),window.removeEventListener("test",xi,xi)}catch{wo=!1}var ul=null,_o=null,Ar=null;function xm(){if(Ar)return Ar;var s,t=_o,a=t.length,l,i="value"in ul?ul.value:ul.textContent,o=i.length;for(s=0;s<a&&t[s]===i[s];s++);var m=a-s;for(l=1;l<=m&&t[a-l]===i[o-l];l++);return Ar=i.slice(s,1<l?1-l:void 0)}function Dr(s){var t=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&t===13&&(s=13)):s=t,s===10&&(s=13),32<=s||s===13?s:0}function Or(){return!0}function fm(){return!1}function Et(s){function t(a,l,i,o,m){this._reactName=a,this._targetInst=i,this.type=l,this.nativeEvent=o,this.target=m,this.currentTarget=null;for(var p in s)s.hasOwnProperty(p)&&(a=s[p],this[p]=a?a(o):o[p]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Or:fm,this.isPropagationStopped=fm,this}return k(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Or)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Or)},persist:function(){},isPersistent:Or}),t}var Gl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Rr=Et(Gl),fi=k({},Gl,{view:0,detail:0}),mj=Et(fi),So,Co,pi,Lr=k({},fi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:To,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==pi&&(pi&&s.type==="mousemove"?(So=s.screenX-pi.screenX,Co=s.screenY-pi.screenY):Co=So=0,pi=s),So)},movementY:function(s){return"movementY"in s?s.movementY:Co}}),pm=Et(Lr),hj=k({},Lr,{dataTransfer:0}),xj=Et(hj),fj=k({},fi,{relatedTarget:0}),ko=Et(fj),pj=k({},Gl,{animationName:0,elapsedTime:0,pseudoElement:0}),gj=Et(pj),jj=k({},Gl,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),vj=Et(jj),yj=k({},Gl,{data:0}),gm=Et(yj),Nj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bj={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wj={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _j(s){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(s):(s=wj[s])?!!t[s]:!1}function To(){return _j}var Sj=k({},fi,{key:function(s){if(s.key){var t=Nj[s.key]||s.key;if(t!=="Unidentified")return t}return s.type==="keypress"?(s=Dr(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?bj[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:To,charCode:function(s){return s.type==="keypress"?Dr(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Dr(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Cj=Et(Sj),kj=k({},Lr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jm=Et(kj),Tj=k({},fi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:To}),Ej=Et(Tj),zj=k({},Gl,{propertyName:0,elapsedTime:0,pseudoElement:0}),Mj=Et(zj),Aj=k({},Lr,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Dj=Et(Aj),Oj=k({},Gl,{newState:0,oldState:0}),Rj=Et(Oj),Lj=[9,13,27,32],Eo=Ga&&"CompositionEvent"in window,gi=null;Ga&&"documentMode"in document&&(gi=document.documentMode);var Uj=Ga&&"TextEvent"in window&&!gi,vm=Ga&&(!Eo||gi&&8<gi&&11>=gi),ym=" ",Nm=!1;function bm(s,t){switch(s){case"keyup":return Lj.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wm(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var yn=!1;function Bj(s,t){switch(s){case"compositionend":return wm(t);case"keypress":return t.which!==32?null:(Nm=!0,ym);case"textInput":return s=t.data,s===ym&&Nm?null:s;default:return null}}function Hj(s,t){if(yn)return s==="compositionend"||!Eo&&bm(s,t)?(s=xm(),Ar=_o=ul=null,yn=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return vm&&t.locale!=="ko"?null:t.data;default:return null}}var qj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _m(s){var t=s&&s.nodeName&&s.nodeName.toLowerCase();return t==="input"?!!qj[s.type]:t==="textarea"}function Sm(s,t,a,l){jn?vn?vn.push(l):vn=[l]:jn=l,t=Sc(t,"onChange"),0<t.length&&(a=new Rr("onChange","change",null,a,l),s.push({event:a,listeners:t}))}var ji=null,vi=null;function Gj(s){cf(s,0)}function Ur(s){var t=mi(s);if(im(t))return s}function Cm(s,t){if(s==="change")return t}var km=!1;if(Ga){var zo;if(Ga){var Mo="oninput"in document;if(!Mo){var Tm=document.createElement("div");Tm.setAttribute("oninput","return;"),Mo=typeof Tm.oninput=="function"}zo=Mo}else zo=!1;km=zo&&(!document.documentMode||9<document.documentMode)}function Em(){ji&&(ji.detachEvent("onpropertychange",zm),vi=ji=null)}function zm(s){if(s.propertyName==="value"&&Ur(vi)){var t=[];Sm(t,vi,s,No(s)),hm(Gj,t)}}function Vj(s,t,a){s==="focusin"?(Em(),ji=t,vi=a,ji.attachEvent("onpropertychange",zm)):s==="focusout"&&Em()}function Fj(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Ur(vi)}function Qj(s,t){if(s==="click")return Ur(t)}function $j(s,t){if(s==="input"||s==="change")return Ur(t)}function Yj(s,t){return s===t&&(s!==0||1/s===1/t)||s!==s&&t!==t}var Ht=typeof Object.is=="function"?Object.is:Yj;function yi(s,t){if(Ht(s,t))return!0;if(typeof s!="object"||s===null||typeof t!="object"||t===null)return!1;var a=Object.keys(s),l=Object.keys(t);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var i=a[l];if(!Ke.call(t,i)||!Ht(s[i],t[i]))return!1}return!0}function Mm(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Am(s,t){var a=Mm(s);s=0;for(var l;a;){if(a.nodeType===3){if(l=s+a.textContent.length,s<=t&&l>=t)return{node:a,offset:t-s};s=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Mm(a)}}function Dm(s,t){return s&&t?s===t?!0:s&&s.nodeType===3?!1:t&&t.nodeType===3?Dm(s,t.parentNode):"contains"in s?s.contains(t):s.compareDocumentPosition?!!(s.compareDocumentPosition(t)&16):!1:!1}function Om(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var t=zr(s.document);t instanceof s.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)s=t.contentWindow;else break;t=zr(s.document)}return t}function Ao(s){var t=s&&s.nodeName&&s.nodeName.toLowerCase();return t&&(t==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||t==="textarea"||s.contentEditable==="true")}var Xj=Ga&&"documentMode"in document&&11>=document.documentMode,Nn=null,Do=null,Ni=null,Oo=!1;function Rm(s,t,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Oo||Nn==null||Nn!==zr(l)||(l=Nn,"selectionStart"in l&&Ao(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Ni&&yi(Ni,l)||(Ni=l,l=Sc(Do,"onSelect"),0<l.length&&(t=new Rr("onSelect","select",null,t,a),s.push({event:t,listeners:l}),t.target=Nn)))}function Vl(s,t){var a={};return a[s.toLowerCase()]=t.toLowerCase(),a["Webkit"+s]="webkit"+t,a["Moz"+s]="moz"+t,a}var bn={animationend:Vl("Animation","AnimationEnd"),animationiteration:Vl("Animation","AnimationIteration"),animationstart:Vl("Animation","AnimationStart"),transitionrun:Vl("Transition","TransitionRun"),transitionstart:Vl("Transition","TransitionStart"),transitioncancel:Vl("Transition","TransitionCancel"),transitionend:Vl("Transition","TransitionEnd")},Ro={},Lm={};Ga&&(Lm=document.createElement("div").style,"AnimationEvent"in window||(delete bn.animationend.animation,delete bn.animationiteration.animation,delete bn.animationstart.animation),"TransitionEvent"in window||delete bn.transitionend.transition);function Fl(s){if(Ro[s])return Ro[s];if(!bn[s])return s;var t=bn[s],a;for(a in t)if(t.hasOwnProperty(a)&&a in Lm)return Ro[s]=t[a];return s}var Um=Fl("animationend"),Bm=Fl("animationiteration"),Hm=Fl("animationstart"),Kj=Fl("transitionrun"),Zj=Fl("transitionstart"),Ij=Fl("transitioncancel"),qm=Fl("transitionend"),Gm=new Map,Lo="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Lo.push("scrollEnd");function fa(s,t){Gm.set(s,t),ql(t,[s])}var Br=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},ta=[],wn=0,Uo=0;function Hr(){for(var s=wn,t=Uo=wn=0;t<s;){var a=ta[t];ta[t++]=null;var l=ta[t];ta[t++]=null;var i=ta[t];ta[t++]=null;var o=ta[t];if(ta[t++]=null,l!==null&&i!==null){var m=l.pending;m===null?i.next=i:(i.next=m.next,m.next=i),l.pending=i}o!==0&&Vm(a,i,o)}}function qr(s,t,a,l){ta[wn++]=s,ta[wn++]=t,ta[wn++]=a,ta[wn++]=l,Uo|=l,s.lanes|=l,s=s.alternate,s!==null&&(s.lanes|=l)}function Bo(s,t,a,l){return qr(s,t,a,l),Gr(s)}function Ql(s,t){return qr(s,null,null,t),Gr(s)}function Vm(s,t,a){s.lanes|=a;var l=s.alternate;l!==null&&(l.lanes|=a);for(var i=!1,o=s.return;o!==null;)o.childLanes|=a,l=o.alternate,l!==null&&(l.childLanes|=a),o.tag===22&&(s=o.stateNode,s===null||s._visibility&1||(i=!0)),s=o,o=o.return;return s.tag===3?(o=s.stateNode,i&&t!==null&&(i=31-ot(a),s=o.hiddenUpdates,l=s[i],l===null?s[i]=[t]:l.push(t),t.lane=a|536870912),o):null}function Gr(s){if(50<Fi)throw Fi=0,Xd=null,Error(d(185));for(var t=s.return;t!==null;)s=t,t=s.return;return s.tag===3?s.stateNode:null}var _n={};function Jj(s,t,a,l){this.tag=s,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qt(s,t,a,l){return new Jj(s,t,a,l)}function Ho(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Va(s,t){var a=s.alternate;return a===null?(a=qt(s.tag,t,s.key,s.mode),a.elementType=s.elementType,a.type=s.type,a.stateNode=s.stateNode,a.alternate=s,s.alternate=a):(a.pendingProps=t,a.type=s.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=s.flags&65011712,a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,t=s.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=s.sibling,a.index=s.index,a.ref=s.ref,a.refCleanup=s.refCleanup,a}function Fm(s,t){s.flags&=65011714;var a=s.alternate;return a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),s}function Vr(s,t,a,l,i,o){var m=0;if(l=s,typeof s=="function")Ho(s)&&(m=1);else if(typeof s=="string")m=ty(s,a,oe.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case te:return s=qt(31,a,t,i),s.elementType=te,s.lanes=o,s;case K:return $l(a.children,i,o,t);case U:m=8,i|=24;break;case R:return s=qt(12,a,t,i|2),s.elementType=R,s.lanes=o,s;case B:return s=qt(13,a,t,i),s.elementType=B,s.lanes=o,s;case X:return s=qt(19,a,t,i),s.elementType=X,s.lanes=o,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case V:m=10;break e;case ee:m=9;break e;case E:m=11;break e;case w:m=14;break e;case D:m=16,l=null;break e}m=29,a=Error(d(130,s===null?"null":typeof s,"")),l=null}return t=qt(m,a,t,i),t.elementType=s,t.type=l,t.lanes=o,t}function $l(s,t,a,l){return s=qt(7,s,l,t),s.lanes=a,s}function qo(s,t,a){return s=qt(6,s,null,t),s.lanes=a,s}function Qm(s){var t=qt(18,null,null,0);return t.stateNode=s,t}function Go(s,t,a){return t=qt(4,s.children!==null?s.children:[],s.key,t),t.lanes=a,t.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},t}var $m=new WeakMap;function aa(s,t){if(typeof s=="object"&&s!==null){var a=$m.get(s);return a!==void 0?a:(t={value:s,source:t,stack:we(t)},$m.set(s,t),t)}return{value:s,source:t,stack:we(t)}}var Sn=[],Cn=0,Fr=null,bi=0,la=[],na=0,ml=null,Sa=1,Ca="";function Fa(s,t){Sn[Cn++]=bi,Sn[Cn++]=Fr,Fr=s,bi=t}function Ym(s,t,a){la[na++]=Sa,la[na++]=Ca,la[na++]=ml,ml=s;var l=Sa;s=Ca;var i=32-ot(l)-1;l&=~(1<<i),a+=1;var o=32-ot(t)+i;if(30<o){var m=i-i%5;o=(l&(1<<m)-1).toString(32),l>>=m,i-=m,Sa=1<<32-ot(t)+i|a<<i|l,Ca=o+s}else Sa=1<<o|a<<i|l,Ca=s}function Vo(s){s.return!==null&&(Fa(s,1),Ym(s,1,0))}function Fo(s){for(;s===Fr;)Fr=Sn[--Cn],Sn[Cn]=null,bi=Sn[--Cn],Sn[Cn]=null;for(;s===ml;)ml=la[--na],la[na]=null,Ca=la[--na],la[na]=null,Sa=la[--na],la[na]=null}function Xm(s,t){la[na++]=Sa,la[na++]=Ca,la[na++]=ml,Sa=t.id,Ca=t.overflow,ml=s}var ut=null,As=null,fs=!1,hl=null,ia=!1,Qo=Error(d(519));function xl(s){var t=Error(d(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw wi(aa(t,s)),Qo}function Km(s){var t=s.stateNode,a=s.type,l=s.memoizedProps;switch(t[Fe]=s,t[Ys]=l,a){case"dialog":as("cancel",t),as("close",t);break;case"iframe":case"object":case"embed":as("load",t);break;case"video":case"audio":for(a=0;a<$i.length;a++)as($i[a],t);break;case"source":as("error",t);break;case"img":case"image":case"link":as("error",t),as("load",t);break;case"details":as("toggle",t);break;case"input":as("invalid",t),rm(t,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":as("invalid",t);break;case"textarea":as("invalid",t),om(t,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||l.suppressHydrationWarning===!0||mf(t.textContent,a)?(l.popover!=null&&(as("beforetoggle",t),as("toggle",t)),l.onScroll!=null&&as("scroll",t),l.onScrollEnd!=null&&as("scrollend",t),l.onClick!=null&&(t.onclick=qa),t=!0):t=!1,t||xl(s,!0)}function Zm(s){for(ut=s.return;ut;)switch(ut.tag){case 5:case 31:case 13:ia=!1;return;case 27:case 3:ia=!0;return;default:ut=ut.return}}function kn(s){if(s!==ut)return!1;if(!fs)return Zm(s),fs=!0,!1;var t=s.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=s.type,a=!(a!=="form"&&a!=="button")||cu(s.type,s.memoizedProps)),a=!a),a&&As&&xl(s),Zm(s),t===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(d(317));As=Nf(s)}else if(t===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(d(317));As=Nf(s)}else t===27?(t=As,Tl(s.type)?(s=hu,hu=null,As=s):As=t):As=ut?ca(s.stateNode.nextSibling):null;return!0}function Yl(){As=ut=null,fs=!1}function $o(){var s=hl;return s!==null&&(Dt===null?Dt=s:Dt.push.apply(Dt,s),hl=null),s}function wi(s){hl===null?hl=[s]:hl.push(s)}var Yo=me(null),Xl=null,Qa=null;function fl(s,t,a){Q(Yo,t._currentValue),t._currentValue=a}function $a(s){s._currentValue=Yo.current,he(Yo)}function Xo(s,t,a){for(;s!==null;){var l=s.alternate;if((s.childLanes&t)!==t?(s.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),s===a)break;s=s.return}}function Ko(s,t,a,l){var i=s.child;for(i!==null&&(i.return=s);i!==null;){var o=i.dependencies;if(o!==null){var m=i.child;o=o.firstContext;e:for(;o!==null;){var p=o;o=i;for(var C=0;C<t.length;C++)if(p.context===t[C]){o.lanes|=a,p=o.alternate,p!==null&&(p.lanes|=a),Xo(o.return,a,s),l||(m=null);break e}o=p.next}}else if(i.tag===18){if(m=i.return,m===null)throw Error(d(341));m.lanes|=a,o=m.alternate,o!==null&&(o.lanes|=a),Xo(m,a,s),m=null}else m=i.child;if(m!==null)m.return=i;else for(m=i;m!==null;){if(m===s){m=null;break}if(i=m.sibling,i!==null){i.return=m.return,m=i;break}m=m.return}i=m}}function Tn(s,t,a,l){s=null;for(var i=t,o=!1;i!==null;){if(!o){if((i.flags&524288)!==0)o=!0;else if((i.flags&262144)!==0)break}if(i.tag===10){var m=i.alternate;if(m===null)throw Error(d(387));if(m=m.memoizedProps,m!==null){var p=i.type;Ht(i.pendingProps.value,m.value)||(s!==null?s.push(p):s=[p])}}else if(i===O.current){if(m=i.alternate,m===null)throw Error(d(387));m.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(s!==null?s.push(Ii):s=[Ii])}i=i.return}s!==null&&Ko(t,s,a,l),t.flags|=262144}function Qr(s){for(s=s.firstContext;s!==null;){if(!Ht(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Kl(s){Xl=s,Qa=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function mt(s){return Im(Xl,s)}function $r(s,t){return Xl===null&&Kl(s),Im(s,t)}function Im(s,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},Qa===null){if(s===null)throw Error(d(308));Qa=t,s.dependencies={lanes:0,firstContext:t},s.flags|=524288}else Qa=Qa.next=t;return a}var Pj=typeof AbortController<"u"?AbortController:function(){var s=[],t=this.signal={aborted:!1,addEventListener:function(a,l){s.push(l)}};this.abort=function(){t.aborted=!0,s.forEach(function(a){return a()})}},Wj=n.unstable_scheduleCallback,ev=n.unstable_NormalPriority,Js={$$typeof:V,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Zo(){return{controller:new Pj,data:new Map,refCount:0}}function _i(s){s.refCount--,s.refCount===0&&Wj(ev,function(){s.controller.abort()})}var Si=null,Io=0,En=0,zn=null;function sv(s,t){if(Si===null){var a=Si=[];Io=0,En=Wd(),zn={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Io++,t.then(Jm,Jm),t}function Jm(){if(--Io===0&&Si!==null){zn!==null&&(zn.status="fulfilled");var s=Si;Si=null,En=0,zn=null;for(var t=0;t<s.length;t++)(0,s[t])()}}function tv(s,t){var a=[],l={status:"pending",value:null,reason:null,then:function(i){a.push(i)}};return s.then(function(){l.status="fulfilled",l.value=t;for(var i=0;i<a.length;i++)(0,a[i])(t)},function(i){for(l.status="rejected",l.reason=i,i=0;i<a.length;i++)(0,a[i])(void 0)}),l}var Pm=y.S;y.S=function(s,t){Rx=Je(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&sv(s,t),Pm!==null&&Pm(s,t)};var Zl=me(null);function Jo(){var s=Zl.current;return s!==null?s:Ts.pooledCache}function Yr(s,t){t===null?Q(Zl,Zl.current):Q(Zl,t.pool)}function Wm(){var s=Jo();return s===null?null:{parent:Js._currentValue,pool:s}}var Mn=Error(d(460)),Po=Error(d(474)),Xr=Error(d(542)),Kr={then:function(){}};function eh(s){return s=s.status,s==="fulfilled"||s==="rejected"}function sh(s,t,a){switch(a=s[a],a===void 0?s.push(t):a!==t&&(t.then(qa,qa),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw s=t.reason,ah(s),s;default:if(typeof t.status=="string")t.then(qa,qa);else{if(s=Ts,s!==null&&100<s.shellSuspendCounter)throw Error(d(482));s=t,s.status="pending",s.then(function(l){if(t.status==="pending"){var i=t;i.status="fulfilled",i.value=l}},function(l){if(t.status==="pending"){var i=t;i.status="rejected",i.reason=l}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw s=t.reason,ah(s),s}throw Jl=t,Mn}}function Il(s){try{var t=s._init;return t(s._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Jl=a,Mn):a}}var Jl=null;function th(){if(Jl===null)throw Error(d(459));var s=Jl;return Jl=null,s}function ah(s){if(s===Mn||s===Xr)throw Error(d(483))}var An=null,Ci=0;function Zr(s){var t=Ci;return Ci+=1,An===null&&(An=[]),sh(An,s,t)}function ki(s,t){t=t.props.ref,s.ref=t!==void 0?t:null}function Ir(s,t){throw t.$$typeof===z?Error(d(525)):(s=Object.prototype.toString.call(t),Error(d(31,s==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":s)))}function lh(s){function t(G,M){if(s){var Z=G.deletions;Z===null?(G.deletions=[M],G.flags|=16):Z.push(M)}}function a(G,M){if(!s)return null;for(;M!==null;)t(G,M),M=M.sibling;return null}function l(G){for(var M=new Map;G!==null;)G.key!==null?M.set(G.key,G):M.set(G.index,G),G=G.sibling;return M}function i(G,M){return G=Va(G,M),G.index=0,G.sibling=null,G}function o(G,M,Z){return G.index=Z,s?(Z=G.alternate,Z!==null?(Z=Z.index,Z<M?(G.flags|=67108866,M):Z):(G.flags|=67108866,M)):(G.flags|=1048576,M)}function m(G){return s&&G.alternate===null&&(G.flags|=67108866),G}function p(G,M,Z,re){return M===null||M.tag!==6?(M=qo(Z,G.mode,re),M.return=G,M):(M=i(M,Z),M.return=G,M)}function C(G,M,Z,re){var Ee=Z.type;return Ee===K?ae(G,M,Z.props.children,re,Z.key):M!==null&&(M.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===D&&Il(Ee)===M.type)?(M=i(M,Z.props),ki(M,Z),M.return=G,M):(M=Vr(Z.type,Z.key,Z.props,null,G.mode,re),ki(M,Z),M.return=G,M)}function I(G,M,Z,re){return M===null||M.tag!==4||M.stateNode.containerInfo!==Z.containerInfo||M.stateNode.implementation!==Z.implementation?(M=Go(Z,G.mode,re),M.return=G,M):(M=i(M,Z.children||[]),M.return=G,M)}function ae(G,M,Z,re,Ee){return M===null||M.tag!==7?(M=$l(Z,G.mode,re,Ee),M.return=G,M):(M=i(M,Z),M.return=G,M)}function de(G,M,Z){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=qo(""+M,G.mode,Z),M.return=G,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case T:return Z=Vr(M.type,M.key,M.props,null,G.mode,Z),ki(Z,M),Z.return=G,Z;case L:return M=Go(M,G.mode,Z),M.return=G,M;case D:return M=Il(M),de(G,M,Z)}if(Ne(M)||ye(M))return M=$l(M,G.mode,Z,null),M.return=G,M;if(typeof M.then=="function")return de(G,Zr(M),Z);if(M.$$typeof===V)return de(G,$r(G,M),Z);Ir(G,M)}return null}function J(G,M,Z,re){var Ee=M!==null?M.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Ee!==null?null:p(G,M,""+Z,re);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case T:return Z.key===Ee?C(G,M,Z,re):null;case L:return Z.key===Ee?I(G,M,Z,re):null;case D:return Z=Il(Z),J(G,M,Z,re)}if(Ne(Z)||ye(Z))return Ee!==null?null:ae(G,M,Z,re,null);if(typeof Z.then=="function")return J(G,M,Zr(Z),re);if(Z.$$typeof===V)return J(G,M,$r(G,Z),re);Ir(G,Z)}return null}function se(G,M,Z,re,Ee){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return G=G.get(Z)||null,p(M,G,""+re,Ee);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case T:return G=G.get(re.key===null?Z:re.key)||null,C(M,G,re,Ee);case L:return G=G.get(re.key===null?Z:re.key)||null,I(M,G,re,Ee);case D:return re=Il(re),se(G,M,Z,re,Ee)}if(Ne(re)||ye(re))return G=G.get(Z)||null,ae(M,G,re,Ee,null);if(typeof re.then=="function")return se(G,M,Z,Zr(re),Ee);if(re.$$typeof===V)return se(G,M,Z,$r(M,re),Ee);Ir(M,re)}return null}function Ce(G,M,Z,re){for(var Ee=null,vs=null,Te=M,Pe=M=0,rs=null;Te!==null&&Pe<Z.length;Pe++){Te.index>Pe?(rs=Te,Te=null):rs=Te.sibling;var ys=J(G,Te,Z[Pe],re);if(ys===null){Te===null&&(Te=rs);break}s&&Te&&ys.alternate===null&&t(G,Te),M=o(ys,M,Pe),vs===null?Ee=ys:vs.sibling=ys,vs=ys,Te=rs}if(Pe===Z.length)return a(G,Te),fs&&Fa(G,Pe),Ee;if(Te===null){for(;Pe<Z.length;Pe++)Te=de(G,Z[Pe],re),Te!==null&&(M=o(Te,M,Pe),vs===null?Ee=Te:vs.sibling=Te,vs=Te);return fs&&Fa(G,Pe),Ee}for(Te=l(Te);Pe<Z.length;Pe++)rs=se(Te,G,Pe,Z[Pe],re),rs!==null&&(s&&rs.alternate!==null&&Te.delete(rs.key===null?Pe:rs.key),M=o(rs,M,Pe),vs===null?Ee=rs:vs.sibling=rs,vs=rs);return s&&Te.forEach(function(Dl){return t(G,Dl)}),fs&&Fa(G,Pe),Ee}function Oe(G,M,Z,re){if(Z==null)throw Error(d(151));for(var Ee=null,vs=null,Te=M,Pe=M=0,rs=null,ys=Z.next();Te!==null&&!ys.done;Pe++,ys=Z.next()){Te.index>Pe?(rs=Te,Te=null):rs=Te.sibling;var Dl=J(G,Te,ys.value,re);if(Dl===null){Te===null&&(Te=rs);break}s&&Te&&Dl.alternate===null&&t(G,Te),M=o(Dl,M,Pe),vs===null?Ee=Dl:vs.sibling=Dl,vs=Dl,Te=rs}if(ys.done)return a(G,Te),fs&&Fa(G,Pe),Ee;if(Te===null){for(;!ys.done;Pe++,ys=Z.next())ys=de(G,ys.value,re),ys!==null&&(M=o(ys,M,Pe),vs===null?Ee=ys:vs.sibling=ys,vs=ys);return fs&&Fa(G,Pe),Ee}for(Te=l(Te);!ys.done;Pe++,ys=Z.next())ys=se(Te,G,Pe,ys.value,re),ys!==null&&(s&&ys.alternate!==null&&Te.delete(ys.key===null?Pe:ys.key),M=o(ys,M,Pe),vs===null?Ee=ys:vs.sibling=ys,vs=ys);return s&&Te.forEach(function(hy){return t(G,hy)}),fs&&Fa(G,Pe),Ee}function ks(G,M,Z,re){if(typeof Z=="object"&&Z!==null&&Z.type===K&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case T:e:{for(var Ee=Z.key;M!==null;){if(M.key===Ee){if(Ee=Z.type,Ee===K){if(M.tag===7){a(G,M.sibling),re=i(M,Z.props.children),re.return=G,G=re;break e}}else if(M.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===D&&Il(Ee)===M.type){a(G,M.sibling),re=i(M,Z.props),ki(re,Z),re.return=G,G=re;break e}a(G,M);break}else t(G,M);M=M.sibling}Z.type===K?(re=$l(Z.props.children,G.mode,re,Z.key),re.return=G,G=re):(re=Vr(Z.type,Z.key,Z.props,null,G.mode,re),ki(re,Z),re.return=G,G=re)}return m(G);case L:e:{for(Ee=Z.key;M!==null;){if(M.key===Ee)if(M.tag===4&&M.stateNode.containerInfo===Z.containerInfo&&M.stateNode.implementation===Z.implementation){a(G,M.sibling),re=i(M,Z.children||[]),re.return=G,G=re;break e}else{a(G,M);break}else t(G,M);M=M.sibling}re=Go(Z,G.mode,re),re.return=G,G=re}return m(G);case D:return Z=Il(Z),ks(G,M,Z,re)}if(Ne(Z))return Ce(G,M,Z,re);if(ye(Z)){if(Ee=ye(Z),typeof Ee!="function")throw Error(d(150));return Z=Ee.call(Z),Oe(G,M,Z,re)}if(typeof Z.then=="function")return ks(G,M,Zr(Z),re);if(Z.$$typeof===V)return ks(G,M,$r(G,Z),re);Ir(G,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint"?(Z=""+Z,M!==null&&M.tag===6?(a(G,M.sibling),re=i(M,Z),re.return=G,G=re):(a(G,M),re=qo(Z,G.mode,re),re.return=G,G=re),m(G)):a(G,M)}return function(G,M,Z,re){try{Ci=0;var Ee=ks(G,M,Z,re);return An=null,Ee}catch(Te){if(Te===Mn||Te===Xr)throw Te;var vs=qt(29,Te,null,G.mode);return vs.lanes=re,vs.return=G,vs}finally{}}}var Pl=lh(!0),nh=lh(!1),pl=!1;function Wo(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ed(s,t){s=s.updateQueue,t.updateQueue===s&&(t.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function gl(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function jl(s,t,a){var l=s.updateQueue;if(l===null)return null;if(l=l.shared,(Ns&2)!==0){var i=l.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),l.pending=t,t=Gr(s),Vm(s,null,a),t}return qr(s,l,t,a),Gr(s)}function Ti(s,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var l=t.lanes;l&=s.pendingLanes,a|=l,t.lanes=a,dl(s,a)}}function sd(s,t){var a=s.updateQueue,l=s.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var i=null,o=null;if(a=a.firstBaseUpdate,a!==null){do{var m={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};o===null?i=o=m:o=o.next=m,a=a.next}while(a!==null);o===null?i=o=t:o=o.next=t}else i=o=t;a={baseState:l.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:l.shared,callbacks:l.callbacks},s.updateQueue=a;return}s=a.lastBaseUpdate,s===null?a.firstBaseUpdate=t:s.next=t,a.lastBaseUpdate=t}var td=!1;function Ei(){if(td){var s=zn;if(s!==null)throw s}}function zi(s,t,a,l){td=!1;var i=s.updateQueue;pl=!1;var o=i.firstBaseUpdate,m=i.lastBaseUpdate,p=i.shared.pending;if(p!==null){i.shared.pending=null;var C=p,I=C.next;C.next=null,m===null?o=I:m.next=I,m=C;var ae=s.alternate;ae!==null&&(ae=ae.updateQueue,p=ae.lastBaseUpdate,p!==m&&(p===null?ae.firstBaseUpdate=I:p.next=I,ae.lastBaseUpdate=C))}if(o!==null){var de=i.baseState;m=0,ae=I=C=null,p=o;do{var J=p.lane&-536870913,se=J!==p.lane;if(se?(is&J)===J:(l&J)===J){J!==0&&J===En&&(td=!0),ae!==null&&(ae=ae.next={lane:0,tag:p.tag,payload:p.payload,callback:null,next:null});e:{var Ce=s,Oe=p;J=t;var ks=a;switch(Oe.tag){case 1:if(Ce=Oe.payload,typeof Ce=="function"){de=Ce.call(ks,de,J);break e}de=Ce;break e;case 3:Ce.flags=Ce.flags&-65537|128;case 0:if(Ce=Oe.payload,J=typeof Ce=="function"?Ce.call(ks,de,J):Ce,J==null)break e;de=k({},de,J);break e;case 2:pl=!0}}J=p.callback,J!==null&&(s.flags|=64,se&&(s.flags|=8192),se=i.callbacks,se===null?i.callbacks=[J]:se.push(J))}else se={lane:J,tag:p.tag,payload:p.payload,callback:p.callback,next:null},ae===null?(I=ae=se,C=de):ae=ae.next=se,m|=J;if(p=p.next,p===null){if(p=i.shared.pending,p===null)break;se=p,p=se.next,se.next=null,i.lastBaseUpdate=se,i.shared.pending=null}}while(!0);ae===null&&(C=de),i.baseState=C,i.firstBaseUpdate=I,i.lastBaseUpdate=ae,o===null&&(i.shared.lanes=0),wl|=m,s.lanes=m,s.memoizedState=de}}function ih(s,t){if(typeof s!="function")throw Error(d(191,s));s.call(t)}function rh(s,t){var a=s.callbacks;if(a!==null)for(s.callbacks=null,s=0;s<a.length;s++)ih(a[s],t)}var Dn=me(null),Jr=me(0);function ch(s,t){s=el,Q(Jr,s),Q(Dn,t),el=s|t.baseLanes}function ad(){Q(Jr,el),Q(Dn,Dn.current)}function ld(){el=Jr.current,he(Dn),he(Jr)}var Gt=me(null),ra=null;function vl(s){var t=s.alternate;Q(Xs,Xs.current&1),Q(Gt,s),ra===null&&(t===null||Dn.current!==null||t.memoizedState!==null)&&(ra=s)}function nd(s){Q(Xs,Xs.current),Q(Gt,s),ra===null&&(ra=s)}function oh(s){s.tag===22?(Q(Xs,Xs.current),Q(Gt,s),ra===null&&(ra=s)):yl()}function yl(){Q(Xs,Xs.current),Q(Gt,Gt.current)}function Vt(s){he(Gt),ra===s&&(ra=null),he(Xs)}var Xs=me(0);function Pr(s){for(var t=s;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||uu(a)||mu(a)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break;for(;t.sibling===null;){if(t.return===null||t.return===s)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ya=0,Ze=null,Ss=null,Ps=null,Wr=!1,On=!1,Wl=!1,ec=0,Mi=0,Rn=null,av=0;function Gs(){throw Error(d(321))}function id(s,t){if(t===null)return!1;for(var a=0;a<t.length&&a<s.length;a++)if(!Ht(s[a],t[a]))return!1;return!0}function rd(s,t,a,l,i,o){return Ya=o,Ze=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,y.H=s===null||s.memoizedState===null?Yh:bd,Wl=!1,o=a(l,i),Wl=!1,On&&(o=uh(t,a,l,i)),dh(s),o}function dh(s){y.H=Oi;var t=Ss!==null&&Ss.next!==null;if(Ya=0,Ps=Ss=Ze=null,Wr=!1,Mi=0,Rn=null,t)throw Error(d(300));s===null||Ws||(s=s.dependencies,s!==null&&Qr(s)&&(Ws=!0))}function uh(s,t,a,l){Ze=s;var i=0;do{if(On&&(Rn=null),Mi=0,On=!1,25<=i)throw Error(d(301));if(i+=1,Ps=Ss=null,s.updateQueue!=null){var o=s.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,o.memoCache!=null&&(o.memoCache.index=0)}y.H=Xh,o=t(a,l)}while(On);return o}function lv(){var s=y.H,t=s.useState()[0];return t=typeof t.then=="function"?Ai(t):t,s=s.useState()[0],(Ss!==null?Ss.memoizedState:null)!==s&&(Ze.flags|=1024),t}function cd(){var s=ec!==0;return ec=0,s}function od(s,t,a){t.updateQueue=s.updateQueue,t.flags&=-2053,s.lanes&=~a}function dd(s){if(Wr){for(s=s.memoizedState;s!==null;){var t=s.queue;t!==null&&(t.pending=null),s=s.next}Wr=!1}Ya=0,Ps=Ss=Ze=null,On=!1,Mi=ec=0,Rn=null}function wt(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ps===null?Ze.memoizedState=Ps=s:Ps=Ps.next=s,Ps}function Ks(){if(Ss===null){var s=Ze.alternate;s=s!==null?s.memoizedState:null}else s=Ss.next;var t=Ps===null?Ze.memoizedState:Ps.next;if(t!==null)Ps=t,Ss=s;else{if(s===null)throw Ze.alternate===null?Error(d(467)):Error(d(310));Ss=s,s={memoizedState:Ss.memoizedState,baseState:Ss.baseState,baseQueue:Ss.baseQueue,queue:Ss.queue,next:null},Ps===null?Ze.memoizedState=Ps=s:Ps=Ps.next=s}return Ps}function sc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ai(s){var t=Mi;return Mi+=1,Rn===null&&(Rn=[]),s=sh(Rn,s,t),t=Ze,(Ps===null?t.memoizedState:Ps.next)===null&&(t=t.alternate,y.H=t===null||t.memoizedState===null?Yh:bd),s}function tc(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Ai(s);if(s.$$typeof===V)return mt(s)}throw Error(d(438,String(s)))}function ud(s){var t=null,a=Ze.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var l=Ze.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(t={data:l.data.map(function(i){return i.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=sc(),Ze.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(s),l=0;l<s;l++)a[l]=xe;return t.index++,a}function Xa(s,t){return typeof t=="function"?t(s):t}function ac(s){var t=Ks();return md(t,Ss,s)}function md(s,t,a){var l=s.queue;if(l===null)throw Error(d(311));l.lastRenderedReducer=a;var i=s.baseQueue,o=l.pending;if(o!==null){if(i!==null){var m=i.next;i.next=o.next,o.next=m}t.baseQueue=i=o,l.pending=null}if(o=s.baseState,i===null)s.memoizedState=o;else{t=i.next;var p=m=null,C=null,I=t,ae=!1;do{var de=I.lane&-536870913;if(de!==I.lane?(is&de)===de:(Ya&de)===de){var J=I.revertLane;if(J===0)C!==null&&(C=C.next={lane:0,revertLane:0,gesture:null,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null}),de===En&&(ae=!0);else if((Ya&J)===J){I=I.next,J===En&&(ae=!0);continue}else de={lane:0,revertLane:I.revertLane,gesture:null,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null},C===null?(p=C=de,m=o):C=C.next=de,Ze.lanes|=J,wl|=J;de=I.action,Wl&&a(o,de),o=I.hasEagerState?I.eagerState:a(o,de)}else J={lane:de,revertLane:I.revertLane,gesture:I.gesture,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null},C===null?(p=C=J,m=o):C=C.next=J,Ze.lanes|=de,wl|=de;I=I.next}while(I!==null&&I!==t);if(C===null?m=o:C.next=p,!Ht(o,s.memoizedState)&&(Ws=!0,ae&&(a=zn,a!==null)))throw a;s.memoizedState=o,s.baseState=m,s.baseQueue=C,l.lastRenderedState=o}return i===null&&(l.lanes=0),[s.memoizedState,l.dispatch]}function hd(s){var t=Ks(),a=t.queue;if(a===null)throw Error(d(311));a.lastRenderedReducer=s;var l=a.dispatch,i=a.pending,o=t.memoizedState;if(i!==null){a.pending=null;var m=i=i.next;do o=s(o,m.action),m=m.next;while(m!==i);Ht(o,t.memoizedState)||(Ws=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),a.lastRenderedState=o}return[o,l]}function mh(s,t,a){var l=Ze,i=Ks(),o=fs;if(o){if(a===void 0)throw Error(d(407));a=a()}else a=t();var m=!Ht((Ss||i).memoizedState,a);if(m&&(i.memoizedState=a,Ws=!0),i=i.queue,pd(fh.bind(null,l,i,s),[s]),i.getSnapshot!==t||m||Ps!==null&&Ps.memoizedState.tag&1){if(l.flags|=2048,Ln(9,{destroy:void 0},xh.bind(null,l,i,a,t),null),Ts===null)throw Error(d(349));o||(Ya&127)!==0||hh(l,t,a)}return a}function hh(s,t,a){s.flags|=16384,s={getSnapshot:t,value:a},t=Ze.updateQueue,t===null?(t=sc(),Ze.updateQueue=t,t.stores=[s]):(a=t.stores,a===null?t.stores=[s]:a.push(s))}function xh(s,t,a,l){t.value=a,t.getSnapshot=l,ph(t)&&gh(s)}function fh(s,t,a){return a(function(){ph(t)&&gh(s)})}function ph(s){var t=s.getSnapshot;s=s.value;try{var a=t();return!Ht(s,a)}catch{return!0}}function gh(s){var t=Ql(s,2);t!==null&&Ot(t,s,2)}function xd(s){var t=wt();if(typeof s=="function"){var a=s;if(s=a(),Wl){it(!0);try{a()}finally{it(!1)}}}return t.memoizedState=t.baseState=s,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xa,lastRenderedState:s},t}function jh(s,t,a,l){return s.baseState=a,md(s,Ss,typeof l=="function"?l:Xa)}function nv(s,t,a,l,i){if(ic(s))throw Error(d(485));if(s=t.action,s!==null){var o={payload:i,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(m){o.listeners.push(m)}};y.T!==null?a(!0):o.isTransition=!1,l(o),a=t.pending,a===null?(o.next=t.pending=o,vh(t,o)):(o.next=a.next,t.pending=a.next=o)}}function vh(s,t){var a=t.action,l=t.payload,i=s.state;if(t.isTransition){var o=y.T,m={};y.T=m;try{var p=a(i,l),C=y.S;C!==null&&C(m,p),yh(s,t,p)}catch(I){fd(s,t,I)}finally{o!==null&&m.types!==null&&(o.types=m.types),y.T=o}}else try{o=a(i,l),yh(s,t,o)}catch(I){fd(s,t,I)}}function yh(s,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Nh(s,t,l)},function(l){return fd(s,t,l)}):Nh(s,t,a)}function Nh(s,t,a){t.status="fulfilled",t.value=a,bh(t),s.state=a,t=s.pending,t!==null&&(a=t.next,a===t?s.pending=null:(a=a.next,t.next=a,vh(s,a)))}function fd(s,t,a){var l=s.pending;if(s.pending=null,l!==null){l=l.next;do t.status="rejected",t.reason=a,bh(t),t=t.next;while(t!==l)}s.action=null}function bh(s){s=s.listeners;for(var t=0;t<s.length;t++)(0,s[t])()}function wh(s,t){return t}function _h(s,t){if(fs){var a=Ts.formState;if(a!==null){e:{var l=Ze;if(fs){if(As){s:{for(var i=As,o=ia;i.nodeType!==8;){if(!o){i=null;break s}if(i=ca(i.nextSibling),i===null){i=null;break s}}o=i.data,i=o==="F!"||o==="F"?i:null}if(i){As=ca(i.nextSibling),l=i.data==="F!";break e}}xl(l)}l=!1}l&&(t=a[0])}}return a=wt(),a.memoizedState=a.baseState=t,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wh,lastRenderedState:t},a.queue=l,a=Fh.bind(null,Ze,l),l.dispatch=a,l=xd(!1),o=Nd.bind(null,Ze,!1,l.queue),l=wt(),i={state:t,dispatch:null,action:s,pending:null},l.queue=i,a=nv.bind(null,Ze,i,o,a),i.dispatch=a,l.memoizedState=s,[t,a,!1]}function Sh(s){var t=Ks();return Ch(t,Ss,s)}function Ch(s,t,a){if(t=md(s,t,wh)[0],s=ac(Xa)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var l=Ai(t)}catch(m){throw m===Mn?Xr:m}else l=t;t=Ks();var i=t.queue,o=i.dispatch;return a!==t.memoizedState&&(Ze.flags|=2048,Ln(9,{destroy:void 0},iv.bind(null,i,a),null)),[l,o,s]}function iv(s,t){s.action=t}function kh(s){var t=Ks(),a=Ss;if(a!==null)return Ch(t,a,s);Ks(),t=t.memoizedState,a=Ks();var l=a.queue.dispatch;return a.memoizedState=s,[t,l,!1]}function Ln(s,t,a,l){return s={tag:s,create:a,deps:l,inst:t,next:null},t=Ze.updateQueue,t===null&&(t=sc(),Ze.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=s.next=s:(l=a.next,a.next=s,s.next=l,t.lastEffect=s),s}function Th(){return Ks().memoizedState}function lc(s,t,a,l){var i=wt();Ze.flags|=s,i.memoizedState=Ln(1|t,{destroy:void 0},a,l===void 0?null:l)}function nc(s,t,a,l){var i=Ks();l=l===void 0?null:l;var o=i.memoizedState.inst;Ss!==null&&l!==null&&id(l,Ss.memoizedState.deps)?i.memoizedState=Ln(t,o,a,l):(Ze.flags|=s,i.memoizedState=Ln(1|t,o,a,l))}function Eh(s,t){lc(8390656,8,s,t)}function pd(s,t){nc(2048,8,s,t)}function rv(s){Ze.flags|=4;var t=Ze.updateQueue;if(t===null)t=sc(),Ze.updateQueue=t,t.events=[s];else{var a=t.events;a===null?t.events=[s]:a.push(s)}}function zh(s){var t=Ks().memoizedState;return rv({ref:t,nextImpl:s}),function(){if((Ns&2)!==0)throw Error(d(440));return t.impl.apply(void 0,arguments)}}function Mh(s,t){return nc(4,2,s,t)}function Ah(s,t){return nc(4,4,s,t)}function Dh(s,t){if(typeof t=="function"){s=s();var a=t(s);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return s=s(),t.current=s,function(){t.current=null}}function Oh(s,t,a){a=a!=null?a.concat([s]):null,nc(4,4,Dh.bind(null,t,s),a)}function gd(){}function Rh(s,t){var a=Ks();t=t===void 0?null:t;var l=a.memoizedState;return t!==null&&id(t,l[1])?l[0]:(a.memoizedState=[s,t],s)}function Lh(s,t){var a=Ks();t=t===void 0?null:t;var l=a.memoizedState;if(t!==null&&id(t,l[1]))return l[0];if(l=s(),Wl){it(!0);try{s()}finally{it(!1)}}return a.memoizedState=[l,t],l}function jd(s,t,a){return a===void 0||(Ya&1073741824)!==0&&(is&261930)===0?s.memoizedState=t:(s.memoizedState=a,s=Ux(),Ze.lanes|=s,wl|=s,a)}function Uh(s,t,a,l){return Ht(a,t)?a:Dn.current!==null?(s=jd(s,a,l),Ht(s,t)||(Ws=!0),s):(Ya&42)===0||(Ya&1073741824)!==0&&(is&261930)===0?(Ws=!0,s.memoizedState=a):(s=Ux(),Ze.lanes|=s,wl|=s,t)}function Bh(s,t,a,l,i){var o=q.p;q.p=o!==0&&8>o?o:8;var m=y.T,p={};y.T=p,Nd(s,!1,t,a);try{var C=i(),I=y.S;if(I!==null&&I(p,C),C!==null&&typeof C=="object"&&typeof C.then=="function"){var ae=tv(C,l);Di(s,t,ae,$t(s))}else Di(s,t,l,$t(s))}catch(de){Di(s,t,{then:function(){},status:"rejected",reason:de},$t())}finally{q.p=o,m!==null&&p.types!==null&&(m.types=p.types),y.T=m}}function cv(){}function vd(s,t,a,l){if(s.tag!==5)throw Error(d(476));var i=Hh(s).queue;Bh(s,i,t,H,a===null?cv:function(){return qh(s),a(l)})}function Hh(s){var t=s.memoizedState;if(t!==null)return t;t={memoizedState:H,baseState:H,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xa,lastRenderedState:H},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xa,lastRenderedState:a},next:null},s.memoizedState=t,s=s.alternate,s!==null&&(s.memoizedState=t),t}function qh(s){var t=Hh(s);t.next===null&&(t=s.alternate.memoizedState),Di(s,t.next.queue,{},$t())}function yd(){return mt(Ii)}function Gh(){return Ks().memoizedState}function Vh(){return Ks().memoizedState}function ov(s){for(var t=s.return;t!==null;){switch(t.tag){case 24:case 3:var a=$t();s=gl(a);var l=jl(t,s,a);l!==null&&(Ot(l,t,a),Ti(l,t,a)),t={cache:Zo()},s.payload=t;return}t=t.return}}function dv(s,t,a){var l=$t();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},ic(s)?Qh(t,a):(a=Bo(s,t,a,l),a!==null&&(Ot(a,s,l),$h(a,t,l)))}function Fh(s,t,a){var l=$t();Di(s,t,a,l)}function Di(s,t,a,l){var i={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(ic(s))Qh(t,i);else{var o=s.alternate;if(s.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var m=t.lastRenderedState,p=o(m,a);if(i.hasEagerState=!0,i.eagerState=p,Ht(p,m))return qr(s,t,i,0),Ts===null&&Hr(),!1}catch{}finally{}if(a=Bo(s,t,i,l),a!==null)return Ot(a,s,l),$h(a,t,l),!0}return!1}function Nd(s,t,a,l){if(l={lane:2,revertLane:Wd(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},ic(s)){if(t)throw Error(d(479))}else t=Bo(s,a,l,2),t!==null&&Ot(t,s,2)}function ic(s){var t=s.alternate;return s===Ze||t!==null&&t===Ze}function Qh(s,t){On=Wr=!0;var a=s.pending;a===null?t.next=t:(t.next=a.next,a.next=t),s.pending=t}function $h(s,t,a){if((a&4194048)!==0){var l=t.lanes;l&=s.pendingLanes,a|=l,t.lanes=a,dl(s,a)}}var Oi={readContext:mt,use:tc,useCallback:Gs,useContext:Gs,useEffect:Gs,useImperativeHandle:Gs,useLayoutEffect:Gs,useInsertionEffect:Gs,useMemo:Gs,useReducer:Gs,useRef:Gs,useState:Gs,useDebugValue:Gs,useDeferredValue:Gs,useTransition:Gs,useSyncExternalStore:Gs,useId:Gs,useHostTransitionStatus:Gs,useFormState:Gs,useActionState:Gs,useOptimistic:Gs,useMemoCache:Gs,useCacheRefresh:Gs};Oi.useEffectEvent=Gs;var Yh={readContext:mt,use:tc,useCallback:function(s,t){return wt().memoizedState=[s,t===void 0?null:t],s},useContext:mt,useEffect:Eh,useImperativeHandle:function(s,t,a){a=a!=null?a.concat([s]):null,lc(4194308,4,Dh.bind(null,t,s),a)},useLayoutEffect:function(s,t){return lc(4194308,4,s,t)},useInsertionEffect:function(s,t){lc(4,2,s,t)},useMemo:function(s,t){var a=wt();t=t===void 0?null:t;var l=s();if(Wl){it(!0);try{s()}finally{it(!1)}}return a.memoizedState=[l,t],l},useReducer:function(s,t,a){var l=wt();if(a!==void 0){var i=a(t);if(Wl){it(!0);try{a(t)}finally{it(!1)}}}else i=t;return l.memoizedState=l.baseState=i,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:i},l.queue=s,s=s.dispatch=dv.bind(null,Ze,s),[l.memoizedState,s]},useRef:function(s){var t=wt();return s={current:s},t.memoizedState=s},useState:function(s){s=xd(s);var t=s.queue,a=Fh.bind(null,Ze,t);return t.dispatch=a,[s.memoizedState,a]},useDebugValue:gd,useDeferredValue:function(s,t){var a=wt();return jd(a,s,t)},useTransition:function(){var s=xd(!1);return s=Bh.bind(null,Ze,s.queue,!0,!1),wt().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,t,a){var l=Ze,i=wt();if(fs){if(a===void 0)throw Error(d(407));a=a()}else{if(a=t(),Ts===null)throw Error(d(349));(is&127)!==0||hh(l,t,a)}i.memoizedState=a;var o={value:a,getSnapshot:t};return i.queue=o,Eh(fh.bind(null,l,o,s),[s]),l.flags|=2048,Ln(9,{destroy:void 0},xh.bind(null,l,o,a,t),null),a},useId:function(){var s=wt(),t=Ts.identifierPrefix;if(fs){var a=Ca,l=Sa;a=(l&~(1<<32-ot(l)-1)).toString(32)+a,t="_"+t+"R_"+a,a=ec++,0<a&&(t+="H"+a.toString(32)),t+="_"}else a=av++,t="_"+t+"r_"+a.toString(32)+"_";return s.memoizedState=t},useHostTransitionStatus:yd,useFormState:_h,useActionState:_h,useOptimistic:function(s){var t=wt();t.memoizedState=t.baseState=s;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=Nd.bind(null,Ze,!0,a),a.dispatch=t,[s,t]},useMemoCache:ud,useCacheRefresh:function(){return wt().memoizedState=ov.bind(null,Ze)},useEffectEvent:function(s){var t=wt(),a={impl:s};return t.memoizedState=a,function(){if((Ns&2)!==0)throw Error(d(440));return a.impl.apply(void 0,arguments)}}},bd={readContext:mt,use:tc,useCallback:Rh,useContext:mt,useEffect:pd,useImperativeHandle:Oh,useInsertionEffect:Mh,useLayoutEffect:Ah,useMemo:Lh,useReducer:ac,useRef:Th,useState:function(){return ac(Xa)},useDebugValue:gd,useDeferredValue:function(s,t){var a=Ks();return Uh(a,Ss.memoizedState,s,t)},useTransition:function(){var s=ac(Xa)[0],t=Ks().memoizedState;return[typeof s=="boolean"?s:Ai(s),t]},useSyncExternalStore:mh,useId:Gh,useHostTransitionStatus:yd,useFormState:Sh,useActionState:Sh,useOptimistic:function(s,t){var a=Ks();return jh(a,Ss,s,t)},useMemoCache:ud,useCacheRefresh:Vh};bd.useEffectEvent=zh;var Xh={readContext:mt,use:tc,useCallback:Rh,useContext:mt,useEffect:pd,useImperativeHandle:Oh,useInsertionEffect:Mh,useLayoutEffect:Ah,useMemo:Lh,useReducer:hd,useRef:Th,useState:function(){return hd(Xa)},useDebugValue:gd,useDeferredValue:function(s,t){var a=Ks();return Ss===null?jd(a,s,t):Uh(a,Ss.memoizedState,s,t)},useTransition:function(){var s=hd(Xa)[0],t=Ks().memoizedState;return[typeof s=="boolean"?s:Ai(s),t]},useSyncExternalStore:mh,useId:Gh,useHostTransitionStatus:yd,useFormState:kh,useActionState:kh,useOptimistic:function(s,t){var a=Ks();return Ss!==null?jh(a,Ss,s,t):(a.baseState=s,[s,a.queue.dispatch])},useMemoCache:ud,useCacheRefresh:Vh};Xh.useEffectEvent=zh;function wd(s,t,a,l){t=s.memoizedState,a=a(l,t),a=a==null?t:k({},t,a),s.memoizedState=a,s.lanes===0&&(s.updateQueue.baseState=a)}var _d={enqueueSetState:function(s,t,a){s=s._reactInternals;var l=$t(),i=gl(l);i.payload=t,a!=null&&(i.callback=a),t=jl(s,i,l),t!==null&&(Ot(t,s,l),Ti(t,s,l))},enqueueReplaceState:function(s,t,a){s=s._reactInternals;var l=$t(),i=gl(l);i.tag=1,i.payload=t,a!=null&&(i.callback=a),t=jl(s,i,l),t!==null&&(Ot(t,s,l),Ti(t,s,l))},enqueueForceUpdate:function(s,t){s=s._reactInternals;var a=$t(),l=gl(a);l.tag=2,t!=null&&(l.callback=t),t=jl(s,l,a),t!==null&&(Ot(t,s,a),Ti(t,s,a))}};function Kh(s,t,a,l,i,o,m){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(l,o,m):t.prototype&&t.prototype.isPureReactComponent?!yi(a,l)||!yi(i,o):!0}function Zh(s,t,a,l){s=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,l),t.state!==s&&_d.enqueueReplaceState(t,t.state,null)}function en(s,t){var a=t;if("ref"in t){a={};for(var l in t)l!=="ref"&&(a[l]=t[l])}if(s=s.defaultProps){a===t&&(a=k({},a));for(var i in s)a[i]===void 0&&(a[i]=s[i])}return a}function Ih(s){Br(s)}function Jh(s){console.error(s)}function Ph(s){Br(s)}function rc(s,t){try{var a=s.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(l){setTimeout(function(){throw l})}}function Wh(s,t,a){try{var l=s.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(i){setTimeout(function(){throw i})}}function Sd(s,t,a){return a=gl(a),a.tag=3,a.payload={element:null},a.callback=function(){rc(s,t)},a}function ex(s){return s=gl(s),s.tag=3,s}function sx(s,t,a,l){var i=a.type.getDerivedStateFromError;if(typeof i=="function"){var o=l.value;s.payload=function(){return i(o)},s.callback=function(){Wh(t,a,l)}}var m=a.stateNode;m!==null&&typeof m.componentDidCatch=="function"&&(s.callback=function(){Wh(t,a,l),typeof i!="function"&&(_l===null?_l=new Set([this]):_l.add(this));var p=l.stack;this.componentDidCatch(l.value,{componentStack:p!==null?p:""})})}function uv(s,t,a,l,i){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(t=a.alternate,t!==null&&Tn(t,a,i,!0),a=Gt.current,a!==null){switch(a.tag){case 31:case 13:return ra===null?vc():a.alternate===null&&Vs===0&&(Vs=3),a.flags&=-257,a.flags|=65536,a.lanes=i,l===Kr?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([l]):t.add(l),Id(s,l,i)),!1;case 22:return a.flags|=65536,l===Kr?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([l]):a.add(l)),Id(s,l,i)),!1}throw Error(d(435,a.tag))}return Id(s,l,i),vc(),!1}if(fs)return t=Gt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=i,l!==Qo&&(s=Error(d(422),{cause:l}),wi(aa(s,a)))):(l!==Qo&&(t=Error(d(423),{cause:l}),wi(aa(t,a))),s=s.current.alternate,s.flags|=65536,i&=-i,s.lanes|=i,l=aa(l,a),i=Sd(s.stateNode,l,i),sd(s,i),Vs!==4&&(Vs=2)),!1;var o=Error(d(520),{cause:l});if(o=aa(o,a),Vi===null?Vi=[o]:Vi.push(o),Vs!==4&&(Vs=2),t===null)return!0;l=aa(l,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,s=i&-i,a.lanes|=s,s=Sd(a.stateNode,l,s),sd(a,s),!1;case 1:if(t=a.type,o=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||o!==null&&typeof o.componentDidCatch=="function"&&(_l===null||!_l.has(o))))return a.flags|=65536,i&=-i,a.lanes|=i,i=ex(i),sx(i,s,a,l),sd(a,i),!1}a=a.return}while(a!==null);return!1}var Cd=Error(d(461)),Ws=!1;function ht(s,t,a,l){t.child=s===null?nh(t,null,a,l):Pl(t,s.child,a,l)}function tx(s,t,a,l,i){a=a.render;var o=t.ref;if("ref"in l){var m={};for(var p in l)p!=="ref"&&(m[p]=l[p])}else m=l;return Kl(t),l=rd(s,t,a,m,o,i),p=cd(),s!==null&&!Ws?(od(s,t,i),Ka(s,t,i)):(fs&&p&&Vo(t),t.flags|=1,ht(s,t,l,i),t.child)}function ax(s,t,a,l,i){if(s===null){var o=a.type;return typeof o=="function"&&!Ho(o)&&o.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=o,lx(s,t,o,l,i)):(s=Vr(a.type,null,l,t,t.mode,i),s.ref=t.ref,s.return=t,t.child=s)}if(o=s.child,!Od(s,i)){var m=o.memoizedProps;if(a=a.compare,a=a!==null?a:yi,a(m,l)&&s.ref===t.ref)return Ka(s,t,i)}return t.flags|=1,s=Va(o,l),s.ref=t.ref,s.return=t,t.child=s}function lx(s,t,a,l,i){if(s!==null){var o=s.memoizedProps;if(yi(o,l)&&s.ref===t.ref)if(Ws=!1,t.pendingProps=l=o,Od(s,i))(s.flags&131072)!==0&&(Ws=!0);else return t.lanes=s.lanes,Ka(s,t,i)}return kd(s,t,a,l,i)}function nx(s,t,a,l){var i=l.children,o=s!==null?s.memoizedState:null;if(s===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((t.flags&128)!==0){if(o=o!==null?o.baseLanes|a:a,s!==null){for(l=t.child=s.child,i=0;l!==null;)i=i|l.lanes|l.childLanes,l=l.sibling;l=i&~o}else l=0,t.child=null;return ix(s,t,o,a,l)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},s!==null&&Yr(t,o!==null?o.cachePool:null),o!==null?ch(t,o):ad(),oh(t);else return l=t.lanes=536870912,ix(s,t,o!==null?o.baseLanes|a:a,a,l)}else o!==null?(Yr(t,o.cachePool),ch(t,o),yl(),t.memoizedState=null):(s!==null&&Yr(t,null),ad(),yl());return ht(s,t,i,a),t.child}function Ri(s,t){return s!==null&&s.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function ix(s,t,a,l,i){var o=Jo();return o=o===null?null:{parent:Js._currentValue,pool:o},t.memoizedState={baseLanes:a,cachePool:o},s!==null&&Yr(t,null),ad(),oh(t),s!==null&&Tn(s,t,l,!0),t.childLanes=i,null}function cc(s,t){return t=dc({mode:t.mode,children:t.children},s.mode),t.ref=s.ref,s.child=t,t.return=s,t}function rx(s,t,a){return Pl(t,s.child,null,a),s=cc(t,t.pendingProps),s.flags|=2,Vt(t),t.memoizedState=null,s}function mv(s,t,a){var l=t.pendingProps,i=(t.flags&128)!==0;if(t.flags&=-129,s===null){if(fs){if(l.mode==="hidden")return s=cc(t,l),t.lanes=536870912,Ri(null,s);if(nd(t),(s=As)?(s=yf(s,ia),s=s!==null&&s.data==="&"?s:null,s!==null&&(t.memoizedState={dehydrated:s,treeContext:ml!==null?{id:Sa,overflow:Ca}:null,retryLane:536870912,hydrationErrors:null},a=Qm(s),a.return=t,t.child=a,ut=t,As=null)):s=null,s===null)throw xl(t);return t.lanes=536870912,null}return cc(t,l)}var o=s.memoizedState;if(o!==null){var m=o.dehydrated;if(nd(t),i)if(t.flags&256)t.flags&=-257,t=rx(s,t,a);else if(t.memoizedState!==null)t.child=s.child,t.flags|=128,t=null;else throw Error(d(558));else if(Ws||Tn(s,t,a,!1),i=(a&s.childLanes)!==0,Ws||i){if(l=Ts,l!==null&&(m=Hl(l,a),m!==0&&m!==o.retryLane))throw o.retryLane=m,Ql(s,m),Ot(l,s,m),Cd;vc(),t=rx(s,t,a)}else s=o.treeContext,As=ca(m.nextSibling),ut=t,fs=!0,hl=null,ia=!1,s!==null&&Xm(t,s),t=cc(t,l),t.flags|=4096;return t}return s=Va(s.child,{mode:l.mode,children:l.children}),s.ref=t.ref,t.child=s,s.return=t,s}function oc(s,t){var a=t.ref;if(a===null)s!==null&&s.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(d(284));(s===null||s.ref!==a)&&(t.flags|=4194816)}}function kd(s,t,a,l,i){return Kl(t),a=rd(s,t,a,l,void 0,i),l=cd(),s!==null&&!Ws?(od(s,t,i),Ka(s,t,i)):(fs&&l&&Vo(t),t.flags|=1,ht(s,t,a,i),t.child)}function cx(s,t,a,l,i,o){return Kl(t),t.updateQueue=null,a=uh(t,l,a,i),dh(s),l=cd(),s!==null&&!Ws?(od(s,t,o),Ka(s,t,o)):(fs&&l&&Vo(t),t.flags|=1,ht(s,t,a,o),t.child)}function ox(s,t,a,l,i){if(Kl(t),t.stateNode===null){var o=_n,m=a.contextType;typeof m=="object"&&m!==null&&(o=mt(m)),o=new a(l,o),t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=_d,t.stateNode=o,o._reactInternals=t,o=t.stateNode,o.props=l,o.state=t.memoizedState,o.refs={},Wo(t),m=a.contextType,o.context=typeof m=="object"&&m!==null?mt(m):_n,o.state=t.memoizedState,m=a.getDerivedStateFromProps,typeof m=="function"&&(wd(t,a,m,l),o.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(m=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),m!==o.state&&_d.enqueueReplaceState(o,o.state,null),zi(t,l,o,i),Ei(),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308),l=!0}else if(s===null){o=t.stateNode;var p=t.memoizedProps,C=en(a,p);o.props=C;var I=o.context,ae=a.contextType;m=_n,typeof ae=="object"&&ae!==null&&(m=mt(ae));var de=a.getDerivedStateFromProps;ae=typeof de=="function"||typeof o.getSnapshotBeforeUpdate=="function",p=t.pendingProps!==p,ae||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(p||I!==m)&&Zh(t,o,l,m),pl=!1;var J=t.memoizedState;o.state=J,zi(t,l,o,i),Ei(),I=t.memoizedState,p||J!==I||pl?(typeof de=="function"&&(wd(t,a,de,l),I=t.memoizedState),(C=pl||Kh(t,a,C,l,J,I,m))?(ae||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=I),o.props=l,o.state=I,o.context=m,l=C):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{o=t.stateNode,ed(s,t),m=t.memoizedProps,ae=en(a,m),o.props=ae,de=t.pendingProps,J=o.context,I=a.contextType,C=_n,typeof I=="object"&&I!==null&&(C=mt(I)),p=a.getDerivedStateFromProps,(I=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(m!==de||J!==C)&&Zh(t,o,l,C),pl=!1,J=t.memoizedState,o.state=J,zi(t,l,o,i),Ei();var se=t.memoizedState;m!==de||J!==se||pl||s!==null&&s.dependencies!==null&&Qr(s.dependencies)?(typeof p=="function"&&(wd(t,a,p,l),se=t.memoizedState),(ae=pl||Kh(t,a,ae,l,J,se,C)||s!==null&&s.dependencies!==null&&Qr(s.dependencies))?(I||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(l,se,C),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(l,se,C)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||m===s.memoizedProps&&J===s.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||m===s.memoizedProps&&J===s.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=se),o.props=l,o.state=se,o.context=C,l=ae):(typeof o.componentDidUpdate!="function"||m===s.memoizedProps&&J===s.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||m===s.memoizedProps&&J===s.memoizedState||(t.flags|=1024),l=!1)}return o=l,oc(s,t),l=(t.flags&128)!==0,o||l?(o=t.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:o.render(),t.flags|=1,s!==null&&l?(t.child=Pl(t,s.child,null,i),t.child=Pl(t,null,a,i)):ht(s,t,a,i),t.memoizedState=o.state,s=t.child):s=Ka(s,t,i),s}function dx(s,t,a,l){return Yl(),t.flags|=256,ht(s,t,a,l),t.child}var Td={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ed(s){return{baseLanes:s,cachePool:Wm()}}function zd(s,t,a){return s=s!==null?s.childLanes&~a:0,t&&(s|=Qt),s}function ux(s,t,a){var l=t.pendingProps,i=!1,o=(t.flags&128)!==0,m;if((m=o)||(m=s!==null&&s.memoizedState===null?!1:(Xs.current&2)!==0),m&&(i=!0,t.flags&=-129),m=(t.flags&32)!==0,t.flags&=-33,s===null){if(fs){if(i?vl(t):yl(),(s=As)?(s=yf(s,ia),s=s!==null&&s.data!=="&"?s:null,s!==null&&(t.memoizedState={dehydrated:s,treeContext:ml!==null?{id:Sa,overflow:Ca}:null,retryLane:536870912,hydrationErrors:null},a=Qm(s),a.return=t,t.child=a,ut=t,As=null)):s=null,s===null)throw xl(t);return mu(s)?t.lanes=32:t.lanes=536870912,null}var p=l.children;return l=l.fallback,i?(yl(),i=t.mode,p=dc({mode:"hidden",children:p},i),l=$l(l,i,a,null),p.return=t,l.return=t,p.sibling=l,t.child=p,l=t.child,l.memoizedState=Ed(a),l.childLanes=zd(s,m,a),t.memoizedState=Td,Ri(null,l)):(vl(t),Md(t,p))}var C=s.memoizedState;if(C!==null&&(p=C.dehydrated,p!==null)){if(o)t.flags&256?(vl(t),t.flags&=-257,t=Ad(s,t,a)):t.memoizedState!==null?(yl(),t.child=s.child,t.flags|=128,t=null):(yl(),p=l.fallback,i=t.mode,l=dc({mode:"visible",children:l.children},i),p=$l(p,i,a,null),p.flags|=2,l.return=t,p.return=t,l.sibling=p,t.child=l,Pl(t,s.child,null,a),l=t.child,l.memoizedState=Ed(a),l.childLanes=zd(s,m,a),t.memoizedState=Td,t=Ri(null,l));else if(vl(t),mu(p)){if(m=p.nextSibling&&p.nextSibling.dataset,m)var I=m.dgst;m=I,l=Error(d(419)),l.stack="",l.digest=m,wi({value:l,source:null,stack:null}),t=Ad(s,t,a)}else if(Ws||Tn(s,t,a,!1),m=(a&s.childLanes)!==0,Ws||m){if(m=Ts,m!==null&&(l=Hl(m,a),l!==0&&l!==C.retryLane))throw C.retryLane=l,Ql(s,l),Ot(m,s,l),Cd;uu(p)||vc(),t=Ad(s,t,a)}else uu(p)?(t.flags|=192,t.child=s.child,t=null):(s=C.treeContext,As=ca(p.nextSibling),ut=t,fs=!0,hl=null,ia=!1,s!==null&&Xm(t,s),t=Md(t,l.children),t.flags|=4096);return t}return i?(yl(),p=l.fallback,i=t.mode,C=s.child,I=C.sibling,l=Va(C,{mode:"hidden",children:l.children}),l.subtreeFlags=C.subtreeFlags&65011712,I!==null?p=Va(I,p):(p=$l(p,i,a,null),p.flags|=2),p.return=t,l.return=t,l.sibling=p,t.child=l,Ri(null,l),l=t.child,p=s.child.memoizedState,p===null?p=Ed(a):(i=p.cachePool,i!==null?(C=Js._currentValue,i=i.parent!==C?{parent:C,pool:C}:i):i=Wm(),p={baseLanes:p.baseLanes|a,cachePool:i}),l.memoizedState=p,l.childLanes=zd(s,m,a),t.memoizedState=Td,Ri(s.child,l)):(vl(t),a=s.child,s=a.sibling,a=Va(a,{mode:"visible",children:l.children}),a.return=t,a.sibling=null,s!==null&&(m=t.deletions,m===null?(t.deletions=[s],t.flags|=16):m.push(s)),t.child=a,t.memoizedState=null,a)}function Md(s,t){return t=dc({mode:"visible",children:t},s.mode),t.return=s,s.child=t}function dc(s,t){return s=qt(22,s,null,t),s.lanes=0,s}function Ad(s,t,a){return Pl(t,s.child,null,a),s=Md(t,t.pendingProps.children),s.flags|=2,t.memoizedState=null,s}function mx(s,t,a){s.lanes|=t;var l=s.alternate;l!==null&&(l.lanes|=t),Xo(s.return,t,a)}function Dd(s,t,a,l,i,o){var m=s.memoizedState;m===null?s.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:i,treeForkCount:o}:(m.isBackwards=t,m.rendering=null,m.renderingStartTime=0,m.last=l,m.tail=a,m.tailMode=i,m.treeForkCount=o)}function hx(s,t,a){var l=t.pendingProps,i=l.revealOrder,o=l.tail;l=l.children;var m=Xs.current,p=(m&2)!==0;if(p?(m=m&1|2,t.flags|=128):m&=1,Q(Xs,m),ht(s,t,l,a),l=fs?bi:0,!p&&s!==null&&(s.flags&128)!==0)e:for(s=t.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&mx(s,a,t);else if(s.tag===19)mx(s,a,t);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(i){case"forwards":for(a=t.child,i=null;a!==null;)s=a.alternate,s!==null&&Pr(s)===null&&(i=a),a=a.sibling;a=i,a===null?(i=t.child,t.child=null):(i=a.sibling,a.sibling=null),Dd(t,!1,i,a,o,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,i=t.child,t.child=null;i!==null;){if(s=i.alternate,s!==null&&Pr(s)===null){t.child=i;break}s=i.sibling,i.sibling=a,a=i,i=s}Dd(t,!0,a,null,o,l);break;case"together":Dd(t,!1,null,null,void 0,l);break;default:t.memoizedState=null}return t.child}function Ka(s,t,a){if(s!==null&&(t.dependencies=s.dependencies),wl|=t.lanes,(a&t.childLanes)===0)if(s!==null){if(Tn(s,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(s!==null&&t.child!==s.child)throw Error(d(153));if(t.child!==null){for(s=t.child,a=Va(s,s.pendingProps),t.child=a,a.return=t;s.sibling!==null;)s=s.sibling,a=a.sibling=Va(s,s.pendingProps),a.return=t;a.sibling=null}return t.child}function Od(s,t){return(s.lanes&t)!==0?!0:(s=s.dependencies,!!(s!==null&&Qr(s)))}function hv(s,t,a){switch(t.tag){case 3:F(t,t.stateNode.containerInfo),fl(t,Js,s.memoizedState.cache),Yl();break;case 27:case 5:W(t);break;case 4:F(t,t.stateNode.containerInfo);break;case 10:fl(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,nd(t),null;break;case 13:var l=t.memoizedState;if(l!==null)return l.dehydrated!==null?(vl(t),t.flags|=128,null):(a&t.child.childLanes)!==0?ux(s,t,a):(vl(t),s=Ka(s,t,a),s!==null?s.sibling:null);vl(t);break;case 19:var i=(s.flags&128)!==0;if(l=(a&t.childLanes)!==0,l||(Tn(s,t,a,!1),l=(a&t.childLanes)!==0),i){if(l)return hx(s,t,a);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Q(Xs,Xs.current),l)break;return null;case 22:return t.lanes=0,nx(s,t,a,t.pendingProps);case 24:fl(t,Js,s.memoizedState.cache)}return Ka(s,t,a)}function xx(s,t,a){if(s!==null)if(s.memoizedProps!==t.pendingProps)Ws=!0;else{if(!Od(s,a)&&(t.flags&128)===0)return Ws=!1,hv(s,t,a);Ws=(s.flags&131072)!==0}else Ws=!1,fs&&(t.flags&1048576)!==0&&Ym(t,bi,t.index);switch(t.lanes=0,t.tag){case 16:e:{var l=t.pendingProps;if(s=Il(t.elementType),t.type=s,typeof s=="function")Ho(s)?(l=en(s,l),t.tag=1,t=ox(null,t,s,l,a)):(t.tag=0,t=kd(null,t,s,l,a));else{if(s!=null){var i=s.$$typeof;if(i===E){t.tag=11,t=tx(null,t,s,l,a);break e}else if(i===w){t.tag=14,t=ax(null,t,s,l,a);break e}}throw t=pe(s)||s,Error(d(306,t,""))}}return t;case 0:return kd(s,t,t.type,t.pendingProps,a);case 1:return l=t.type,i=en(l,t.pendingProps),ox(s,t,l,i,a);case 3:e:{if(F(t,t.stateNode.containerInfo),s===null)throw Error(d(387));l=t.pendingProps;var o=t.memoizedState;i=o.element,ed(s,t),zi(t,l,null,a);var m=t.memoizedState;if(l=m.cache,fl(t,Js,l),l!==o.cache&&Ko(t,[Js],a,!0),Ei(),l=m.element,o.isDehydrated)if(o={element:l,isDehydrated:!1,cache:m.cache},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){t=dx(s,t,l,a);break e}else if(l!==i){i=aa(Error(d(424)),t),wi(i),t=dx(s,t,l,a);break e}else{switch(s=t.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(As=ca(s.firstChild),ut=t,fs=!0,hl=null,ia=!0,a=nh(t,null,l,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Yl(),l===i){t=Ka(s,t,a);break e}ht(s,t,l,a)}t=t.child}return t;case 26:return oc(s,t),s===null?(a=Cf(t.type,null,t.pendingProps,null))?t.memoizedState=a:fs||(a=t.type,s=t.pendingProps,l=Cc(le.current).createElement(a),l[Fe]=t,l[Ys]=s,xt(l,a,s),rt(l),t.stateNode=l):t.memoizedState=Cf(t.type,s.memoizedProps,t.pendingProps,s.memoizedState),null;case 27:return W(t),s===null&&fs&&(l=t.stateNode=wf(t.type,t.pendingProps,le.current),ut=t,ia=!0,i=As,Tl(t.type)?(hu=i,As=ca(l.firstChild)):As=i),ht(s,t,t.pendingProps.children,a),oc(s,t),s===null&&(t.flags|=4194304),t.child;case 5:return s===null&&fs&&((i=l=As)&&(l=Fv(l,t.type,t.pendingProps,ia),l!==null?(t.stateNode=l,ut=t,As=ca(l.firstChild),ia=!1,i=!0):i=!1),i||xl(t)),W(t),i=t.type,o=t.pendingProps,m=s!==null?s.memoizedProps:null,l=o.children,cu(i,o)?l=null:m!==null&&cu(i,m)&&(t.flags|=32),t.memoizedState!==null&&(i=rd(s,t,lv,null,null,a),Ii._currentValue=i),oc(s,t),ht(s,t,l,a),t.child;case 6:return s===null&&fs&&((s=a=As)&&(a=Qv(a,t.pendingProps,ia),a!==null?(t.stateNode=a,ut=t,As=null,s=!0):s=!1),s||xl(t)),null;case 13:return ux(s,t,a);case 4:return F(t,t.stateNode.containerInfo),l=t.pendingProps,s===null?t.child=Pl(t,null,l,a):ht(s,t,l,a),t.child;case 11:return tx(s,t,t.type,t.pendingProps,a);case 7:return ht(s,t,t.pendingProps,a),t.child;case 8:return ht(s,t,t.pendingProps.children,a),t.child;case 12:return ht(s,t,t.pendingProps.children,a),t.child;case 10:return l=t.pendingProps,fl(t,t.type,l.value),ht(s,t,l.children,a),t.child;case 9:return i=t.type._context,l=t.pendingProps.children,Kl(t),i=mt(i),l=l(i),t.flags|=1,ht(s,t,l,a),t.child;case 14:return ax(s,t,t.type,t.pendingProps,a);case 15:return lx(s,t,t.type,t.pendingProps,a);case 19:return hx(s,t,a);case 31:return mv(s,t,a);case 22:return nx(s,t,a,t.pendingProps);case 24:return Kl(t),l=mt(Js),s===null?(i=Jo(),i===null&&(i=Ts,o=Zo(),i.pooledCache=o,o.refCount++,o!==null&&(i.pooledCacheLanes|=a),i=o),t.memoizedState={parent:l,cache:i},Wo(t),fl(t,Js,i)):((s.lanes&a)!==0&&(ed(s,t),zi(t,null,null,a),Ei()),i=s.memoizedState,o=t.memoizedState,i.parent!==l?(i={parent:l,cache:l},t.memoizedState=i,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=i),fl(t,Js,l)):(l=o.cache,fl(t,Js,l),l!==i.cache&&Ko(t,[Js],a,!0))),ht(s,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(d(156,t.tag))}function Za(s){s.flags|=4}function Rd(s,t,a,l,i){if((t=(s.mode&32)!==0)&&(t=!1),t){if(s.flags|=16777216,(i&335544128)===i)if(s.stateNode.complete)s.flags|=8192;else if(Gx())s.flags|=8192;else throw Jl=Kr,Po}else s.flags&=-16777217}function fx(s,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!Mf(t))if(Gx())s.flags|=8192;else throw Jl=Kr,Po}function uc(s,t){t!==null&&(s.flags|=4),s.flags&16384&&(t=s.tag!==22?je():536870912,s.lanes|=t,qn|=t)}function Li(s,t){if(!fs)switch(s.tailMode){case"hidden":t=s.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?s.tail=null:a.sibling=null;break;case"collapsed":a=s.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?t||s.tail===null?s.tail=null:s.tail.sibling=null:l.sibling=null}}function Ds(s){var t=s.alternate!==null&&s.alternate.child===s.child,a=0,l=0;if(t)for(var i=s.child;i!==null;)a|=i.lanes|i.childLanes,l|=i.subtreeFlags&65011712,l|=i.flags&65011712,i.return=s,i=i.sibling;else for(i=s.child;i!==null;)a|=i.lanes|i.childLanes,l|=i.subtreeFlags,l|=i.flags,i.return=s,i=i.sibling;return s.subtreeFlags|=l,s.childLanes=a,t}function xv(s,t,a){var l=t.pendingProps;switch(Fo(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ds(t),null;case 1:return Ds(t),null;case 3:return a=t.stateNode,l=null,s!==null&&(l=s.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),$a(Js),A(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(s===null||s.child===null)&&(kn(t)?Za(t):s===null||s.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,$o())),Ds(t),null;case 26:var i=t.type,o=t.memoizedState;return s===null?(Za(t),o!==null?(Ds(t),fx(t,o)):(Ds(t),Rd(t,i,null,l,a))):o?o!==s.memoizedState?(Za(t),Ds(t),fx(t,o)):(Ds(t),t.flags&=-16777217):(s=s.memoizedProps,s!==l&&Za(t),Ds(t),Rd(t,i,s,l,a)),null;case 27:if(_e(t),a=le.current,i=t.type,s!==null&&t.stateNode!=null)s.memoizedProps!==l&&Za(t);else{if(!l){if(t.stateNode===null)throw Error(d(166));return Ds(t),null}s=oe.current,kn(t)?Km(t):(s=wf(i,l,a),t.stateNode=s,Za(t))}return Ds(t),null;case 5:if(_e(t),i=t.type,s!==null&&t.stateNode!=null)s.memoizedProps!==l&&Za(t);else{if(!l){if(t.stateNode===null)throw Error(d(166));return Ds(t),null}if(o=oe.current,kn(t))Km(t);else{var m=Cc(le.current);switch(o){case 1:o=m.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:o=m.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":o=m.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":o=m.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":o=m.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof l.is=="string"?m.createElement("select",{is:l.is}):m.createElement("select"),l.multiple?o.multiple=!0:l.size&&(o.size=l.size);break;default:o=typeof l.is=="string"?m.createElement(i,{is:l.is}):m.createElement(i)}}o[Fe]=t,o[Ys]=l;e:for(m=t.child;m!==null;){if(m.tag===5||m.tag===6)o.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}t.stateNode=o;e:switch(xt(o,i,l),i){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Za(t)}}return Ds(t),Rd(t,t.type,s===null?null:s.memoizedProps,t.pendingProps,a),null;case 6:if(s&&t.stateNode!=null)s.memoizedProps!==l&&Za(t);else{if(typeof l!="string"&&t.stateNode===null)throw Error(d(166));if(s=le.current,kn(t)){if(s=t.stateNode,a=t.memoizedProps,l=null,i=ut,i!==null)switch(i.tag){case 27:case 5:l=i.memoizedProps}s[Fe]=t,s=!!(s.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||mf(s.nodeValue,a)),s||xl(t,!0)}else s=Cc(s).createTextNode(l),s[Fe]=t,t.stateNode=s}return Ds(t),null;case 31:if(a=t.memoizedState,s===null||s.memoizedState!==null){if(l=kn(t),a!==null){if(s===null){if(!l)throw Error(d(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(d(557));s[Fe]=t}else Yl(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ds(t),s=!1}else a=$o(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=a),s=!0;if(!s)return t.flags&256?(Vt(t),t):(Vt(t),null);if((t.flags&128)!==0)throw Error(d(558))}return Ds(t),null;case 13:if(l=t.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(i=kn(t),l!==null&&l.dehydrated!==null){if(s===null){if(!i)throw Error(d(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(d(317));i[Fe]=t}else Yl(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ds(t),i=!1}else i=$o(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=i),i=!0;if(!i)return t.flags&256?(Vt(t),t):(Vt(t),null)}return Vt(t),(t.flags&128)!==0?(t.lanes=a,t):(a=l!==null,s=s!==null&&s.memoizedState!==null,a&&(l=t.child,i=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(i=l.alternate.memoizedState.cachePool.pool),o=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(o=l.memoizedState.cachePool.pool),o!==i&&(l.flags|=2048)),a!==s&&a&&(t.child.flags|=8192),uc(t,t.updateQueue),Ds(t),null);case 4:return A(),s===null&&au(t.stateNode.containerInfo),Ds(t),null;case 10:return $a(t.type),Ds(t),null;case 19:if(he(Xs),l=t.memoizedState,l===null)return Ds(t),null;if(i=(t.flags&128)!==0,o=l.rendering,o===null)if(i)Li(l,!1);else{if(Vs!==0||s!==null&&(s.flags&128)!==0)for(s=t.child;s!==null;){if(o=Pr(s),o!==null){for(t.flags|=128,Li(l,!1),s=o.updateQueue,t.updateQueue=s,uc(t,s),t.subtreeFlags=0,s=a,a=t.child;a!==null;)Fm(a,s),a=a.sibling;return Q(Xs,Xs.current&1|2),fs&&Fa(t,l.treeForkCount),t.child}s=s.sibling}l.tail!==null&&Je()>pc&&(t.flags|=128,i=!0,Li(l,!1),t.lanes=4194304)}else{if(!i)if(s=Pr(o),s!==null){if(t.flags|=128,i=!0,s=s.updateQueue,t.updateQueue=s,uc(t,s),Li(l,!0),l.tail===null&&l.tailMode==="hidden"&&!o.alternate&&!fs)return Ds(t),null}else 2*Je()-l.renderingStartTime>pc&&a!==536870912&&(t.flags|=128,i=!0,Li(l,!1),t.lanes=4194304);l.isBackwards?(o.sibling=t.child,t.child=o):(s=l.last,s!==null?s.sibling=o:t.child=o,l.last=o)}return l.tail!==null?(s=l.tail,l.rendering=s,l.tail=s.sibling,l.renderingStartTime=Je(),s.sibling=null,a=Xs.current,Q(Xs,i?a&1|2:a&1),fs&&Fa(t,l.treeForkCount),s):(Ds(t),null);case 22:case 23:return Vt(t),ld(),l=t.memoizedState!==null,s!==null?s.memoizedState!==null!==l&&(t.flags|=8192):l&&(t.flags|=8192),l?(a&536870912)!==0&&(t.flags&128)===0&&(Ds(t),t.subtreeFlags&6&&(t.flags|=8192)):Ds(t),a=t.updateQueue,a!==null&&uc(t,a.retryQueue),a=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(a=s.memoizedState.cachePool.pool),l=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),l!==a&&(t.flags|=2048),s!==null&&he(Zl),null;case 24:return a=null,s!==null&&(a=s.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),$a(Js),Ds(t),null;case 25:return null;case 30:return null}throw Error(d(156,t.tag))}function fv(s,t){switch(Fo(t),t.tag){case 1:return s=t.flags,s&65536?(t.flags=s&-65537|128,t):null;case 3:return $a(Js),A(),s=t.flags,(s&65536)!==0&&(s&128)===0?(t.flags=s&-65537|128,t):null;case 26:case 27:case 5:return _e(t),null;case 31:if(t.memoizedState!==null){if(Vt(t),t.alternate===null)throw Error(d(340));Yl()}return s=t.flags,s&65536?(t.flags=s&-65537|128,t):null;case 13:if(Vt(t),s=t.memoizedState,s!==null&&s.dehydrated!==null){if(t.alternate===null)throw Error(d(340));Yl()}return s=t.flags,s&65536?(t.flags=s&-65537|128,t):null;case 19:return he(Xs),null;case 4:return A(),null;case 10:return $a(t.type),null;case 22:case 23:return Vt(t),ld(),s!==null&&he(Zl),s=t.flags,s&65536?(t.flags=s&-65537|128,t):null;case 24:return $a(Js),null;case 25:return null;default:return null}}function px(s,t){switch(Fo(t),t.tag){case 3:$a(Js),A();break;case 26:case 27:case 5:_e(t);break;case 4:A();break;case 31:t.memoizedState!==null&&Vt(t);break;case 13:Vt(t);break;case 19:he(Xs);break;case 10:$a(t.type);break;case 22:case 23:Vt(t),ld(),s!==null&&he(Zl);break;case 24:$a(Js)}}function Ui(s,t){try{var a=t.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var i=l.next;a=i;do{if((a.tag&s)===s){l=void 0;var o=a.create,m=a.inst;l=o(),m.destroy=l}a=a.next}while(a!==i)}}catch(p){_s(t,t.return,p)}}function Nl(s,t,a){try{var l=t.updateQueue,i=l!==null?l.lastEffect:null;if(i!==null){var o=i.next;l=o;do{if((l.tag&s)===s){var m=l.inst,p=m.destroy;if(p!==void 0){m.destroy=void 0,i=t;var C=a,I=p;try{I()}catch(ae){_s(i,C,ae)}}}l=l.next}while(l!==o)}}catch(ae){_s(t,t.return,ae)}}function gx(s){var t=s.updateQueue;if(t!==null){var a=s.stateNode;try{rh(t,a)}catch(l){_s(s,s.return,l)}}}function jx(s,t,a){a.props=en(s.type,s.memoizedProps),a.state=s.memoizedState;try{a.componentWillUnmount()}catch(l){_s(s,t,l)}}function Bi(s,t){try{var a=s.ref;if(a!==null){switch(s.tag){case 26:case 27:case 5:var l=s.stateNode;break;case 30:l=s.stateNode;break;default:l=s.stateNode}typeof a=="function"?s.refCleanup=a(l):a.current=l}}catch(i){_s(s,t,i)}}function ka(s,t){var a=s.ref,l=s.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(i){_s(s,t,i)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(i){_s(s,t,i)}else a.current=null}function vx(s){var t=s.type,a=s.memoizedProps,l=s.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(i){_s(s,s.return,i)}}function Ld(s,t,a){try{var l=s.stateNode;Uv(l,s.type,a,t),l[Ys]=t}catch(i){_s(s,s.return,i)}}function yx(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Tl(s.type)||s.tag===4}function Ud(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||yx(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Tl(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Bd(s,t,a){var l=s.tag;if(l===5||l===6)s=s.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(s,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(s),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=qa));else if(l!==4&&(l===27&&Tl(s.type)&&(a=s.stateNode,t=null),s=s.child,s!==null))for(Bd(s,t,a),s=s.sibling;s!==null;)Bd(s,t,a),s=s.sibling}function mc(s,t,a){var l=s.tag;if(l===5||l===6)s=s.stateNode,t?a.insertBefore(s,t):a.appendChild(s);else if(l!==4&&(l===27&&Tl(s.type)&&(a=s.stateNode),s=s.child,s!==null))for(mc(s,t,a),s=s.sibling;s!==null;)mc(s,t,a),s=s.sibling}function Nx(s){var t=s.stateNode,a=s.memoizedProps;try{for(var l=s.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);xt(t,l,a),t[Fe]=s,t[Ys]=a}catch(o){_s(s,s.return,o)}}var Ia=!1,et=!1,Hd=!1,bx=typeof WeakSet=="function"?WeakSet:Set,ct=null;function pv(s,t){if(s=s.containerInfo,iu=Dc,s=Om(s),Ao(s)){if("selectionStart"in s)var a={start:s.selectionStart,end:s.selectionEnd};else e:{a=(a=s.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var i=l.anchorOffset,o=l.focusNode;l=l.focusOffset;try{a.nodeType,o.nodeType}catch{a=null;break e}var m=0,p=-1,C=-1,I=0,ae=0,de=s,J=null;s:for(;;){for(var se;de!==a||i!==0&&de.nodeType!==3||(p=m+i),de!==o||l!==0&&de.nodeType!==3||(C=m+l),de.nodeType===3&&(m+=de.nodeValue.length),(se=de.firstChild)!==null;)J=de,de=se;for(;;){if(de===s)break s;if(J===a&&++I===i&&(p=m),J===o&&++ae===l&&(C=m),(se=de.nextSibling)!==null)break;de=J,J=de.parentNode}de=se}a=p===-1||C===-1?null:{start:p,end:C}}else a=null}a=a||{start:0,end:0}}else a=null;for(ru={focusedElem:s,selectionRange:a},Dc=!1,ct=t;ct!==null;)if(t=ct,s=t.child,(t.subtreeFlags&1028)!==0&&s!==null)s.return=t,ct=s;else for(;ct!==null;){switch(t=ct,o=t.alternate,s=t.flags,t.tag){case 0:if((s&4)!==0&&(s=t.updateQueue,s=s!==null?s.events:null,s!==null))for(a=0;a<s.length;a++)i=s[a],i.ref.impl=i.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&o!==null){s=void 0,a=t,i=o.memoizedProps,o=o.memoizedState,l=a.stateNode;try{var Ce=en(a.type,i);s=l.getSnapshotBeforeUpdate(Ce,o),l.__reactInternalSnapshotBeforeUpdate=s}catch(Oe){_s(a,a.return,Oe)}}break;case 3:if((s&1024)!==0){if(s=t.stateNode.containerInfo,a=s.nodeType,a===9)du(s);else if(a===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":du(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(d(163))}if(s=t.sibling,s!==null){s.return=t.return,ct=s;break}ct=t.return}}function wx(s,t,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Pa(s,a),l&4&&Ui(5,a);break;case 1:if(Pa(s,a),l&4)if(s=a.stateNode,t===null)try{s.componentDidMount()}catch(m){_s(a,a.return,m)}else{var i=en(a.type,t.memoizedProps);t=t.memoizedState;try{s.componentDidUpdate(i,t,s.__reactInternalSnapshotBeforeUpdate)}catch(m){_s(a,a.return,m)}}l&64&&gx(a),l&512&&Bi(a,a.return);break;case 3:if(Pa(s,a),l&64&&(s=a.updateQueue,s!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{rh(s,t)}catch(m){_s(a,a.return,m)}}break;case 27:t===null&&l&4&&Nx(a);case 26:case 5:Pa(s,a),t===null&&l&4&&vx(a),l&512&&Bi(a,a.return);break;case 12:Pa(s,a);break;case 31:Pa(s,a),l&4&&Cx(s,a);break;case 13:Pa(s,a),l&4&&kx(s,a),l&64&&(s=a.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(a=Sv.bind(null,a),$v(s,a))));break;case 22:if(l=a.memoizedState!==null||Ia,!l){t=t!==null&&t.memoizedState!==null||et,i=Ia;var o=et;Ia=l,(et=t)&&!o?Wa(s,a,(a.subtreeFlags&8772)!==0):Pa(s,a),Ia=i,et=o}break;case 30:break;default:Pa(s,a)}}function _x(s){var t=s.alternate;t!==null&&(s.alternate=null,_x(t)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(t=s.stateNode,t!==null&&fo(t)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Ls=null,zt=!1;function Ja(s,t,a){for(a=a.child;a!==null;)Sx(s,t,a),a=a.sibling}function Sx(s,t,a){if(Re&&typeof Re.onCommitFiberUnmount=="function")try{Re.onCommitFiberUnmount(Se,a)}catch{}switch(a.tag){case 26:et||ka(a,t),Ja(s,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:et||ka(a,t);var l=Ls,i=zt;Tl(a.type)&&(Ls=a.stateNode,zt=!1),Ja(s,t,a),Xi(a.stateNode),Ls=l,zt=i;break;case 5:et||ka(a,t);case 6:if(l=Ls,i=zt,Ls=null,Ja(s,t,a),Ls=l,zt=i,Ls!==null)if(zt)try{(Ls.nodeType===9?Ls.body:Ls.nodeName==="HTML"?Ls.ownerDocument.body:Ls).removeChild(a.stateNode)}catch(o){_s(a,t,o)}else try{Ls.removeChild(a.stateNode)}catch(o){_s(a,t,o)}break;case 18:Ls!==null&&(zt?(s=Ls,jf(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,a.stateNode),Kn(s)):jf(Ls,a.stateNode));break;case 4:l=Ls,i=zt,Ls=a.stateNode.containerInfo,zt=!0,Ja(s,t,a),Ls=l,zt=i;break;case 0:case 11:case 14:case 15:Nl(2,a,t),et||Nl(4,a,t),Ja(s,t,a);break;case 1:et||(ka(a,t),l=a.stateNode,typeof l.componentWillUnmount=="function"&&jx(a,t,l)),Ja(s,t,a);break;case 21:Ja(s,t,a);break;case 22:et=(l=et)||a.memoizedState!==null,Ja(s,t,a),et=l;break;default:Ja(s,t,a)}}function Cx(s,t){if(t.memoizedState===null&&(s=t.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{Kn(s)}catch(a){_s(t,t.return,a)}}}function kx(s,t){if(t.memoizedState===null&&(s=t.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Kn(s)}catch(a){_s(t,t.return,a)}}function gv(s){switch(s.tag){case 31:case 13:case 19:var t=s.stateNode;return t===null&&(t=s.stateNode=new bx),t;case 22:return s=s.stateNode,t=s._retryCache,t===null&&(t=s._retryCache=new bx),t;default:throw Error(d(435,s.tag))}}function hc(s,t){var a=gv(s);t.forEach(function(l){if(!a.has(l)){a.add(l);var i=Cv.bind(null,s,l);l.then(i,i)}})}function Mt(s,t){var a=t.deletions;if(a!==null)for(var l=0;l<a.length;l++){var i=a[l],o=s,m=t,p=m;e:for(;p!==null;){switch(p.tag){case 27:if(Tl(p.type)){Ls=p.stateNode,zt=!1;break e}break;case 5:Ls=p.stateNode,zt=!1;break e;case 3:case 4:Ls=p.stateNode.containerInfo,zt=!0;break e}p=p.return}if(Ls===null)throw Error(d(160));Sx(o,m,i),Ls=null,zt=!1,o=i.alternate,o!==null&&(o.return=null),i.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Tx(t,s),t=t.sibling}var pa=null;function Tx(s,t){var a=s.alternate,l=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Mt(t,s),At(s),l&4&&(Nl(3,s,s.return),Ui(3,s),Nl(5,s,s.return));break;case 1:Mt(t,s),At(s),l&512&&(et||a===null||ka(a,a.return)),l&64&&Ia&&(s=s.updateQueue,s!==null&&(l=s.callbacks,l!==null&&(a=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var i=pa;if(Mt(t,s),At(s),l&512&&(et||a===null||ka(a,a.return)),l&4){var o=a!==null?a.memoizedState:null;if(l=s.memoizedState,a===null)if(l===null)if(s.stateNode===null){e:{l=s.type,a=s.memoizedProps,i=i.ownerDocument||i;s:switch(l){case"title":o=i.getElementsByTagName("title")[0],(!o||o[ui]||o[Fe]||o.namespaceURI==="http://www.w3.org/2000/svg"||o.hasAttribute("itemprop"))&&(o=i.createElement(l),i.head.insertBefore(o,i.querySelector("head > title"))),xt(o,l,a),o[Fe]=s,rt(o),l=o;break e;case"link":var m=Ef("link","href",i).get(l+(a.href||""));if(m){for(var p=0;p<m.length;p++)if(o=m[p],o.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&o.getAttribute("rel")===(a.rel==null?null:a.rel)&&o.getAttribute("title")===(a.title==null?null:a.title)&&o.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){m.splice(p,1);break s}}o=i.createElement(l),xt(o,l,a),i.head.appendChild(o);break;case"meta":if(m=Ef("meta","content",i).get(l+(a.content||""))){for(p=0;p<m.length;p++)if(o=m[p],o.getAttribute("content")===(a.content==null?null:""+a.content)&&o.getAttribute("name")===(a.name==null?null:a.name)&&o.getAttribute("property")===(a.property==null?null:a.property)&&o.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&o.getAttribute("charset")===(a.charSet==null?null:a.charSet)){m.splice(p,1);break s}}o=i.createElement(l),xt(o,l,a),i.head.appendChild(o);break;default:throw Error(d(468,l))}o[Fe]=s,rt(o),l=o}s.stateNode=l}else zf(i,s.type,s.stateNode);else s.stateNode=Tf(i,l,s.memoizedProps);else o!==l?(o===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):o.count--,l===null?zf(i,s.type,s.stateNode):Tf(i,l,s.memoizedProps)):l===null&&s.stateNode!==null&&Ld(s,s.memoizedProps,a.memoizedProps)}break;case 27:Mt(t,s),At(s),l&512&&(et||a===null||ka(a,a.return)),a!==null&&l&4&&Ld(s,s.memoizedProps,a.memoizedProps);break;case 5:if(Mt(t,s),At(s),l&512&&(et||a===null||ka(a,a.return)),s.flags&32){i=s.stateNode;try{gn(i,"")}catch(Ce){_s(s,s.return,Ce)}}l&4&&s.stateNode!=null&&(i=s.memoizedProps,Ld(s,i,a!==null?a.memoizedProps:i)),l&1024&&(Hd=!0);break;case 6:if(Mt(t,s),At(s),l&4){if(s.stateNode===null)throw Error(d(162));l=s.memoizedProps,a=s.stateNode;try{a.nodeValue=l}catch(Ce){_s(s,s.return,Ce)}}break;case 3:if(Ec=null,i=pa,pa=kc(t.containerInfo),Mt(t,s),pa=i,At(s),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Kn(t.containerInfo)}catch(Ce){_s(s,s.return,Ce)}Hd&&(Hd=!1,Ex(s));break;case 4:l=pa,pa=kc(s.stateNode.containerInfo),Mt(t,s),At(s),pa=l;break;case 12:Mt(t,s),At(s);break;case 31:Mt(t,s),At(s),l&4&&(l=s.updateQueue,l!==null&&(s.updateQueue=null,hc(s,l)));break;case 13:Mt(t,s),At(s),s.child.flags&8192&&s.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(fc=Je()),l&4&&(l=s.updateQueue,l!==null&&(s.updateQueue=null,hc(s,l)));break;case 22:i=s.memoizedState!==null;var C=a!==null&&a.memoizedState!==null,I=Ia,ae=et;if(Ia=I||i,et=ae||C,Mt(t,s),et=ae,Ia=I,At(s),l&8192)e:for(t=s.stateNode,t._visibility=i?t._visibility&-2:t._visibility|1,i&&(a===null||C||Ia||et||sn(s)),a=null,t=s;;){if(t.tag===5||t.tag===26){if(a===null){C=a=t;try{if(o=C.stateNode,i)m=o.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none";else{p=C.stateNode;var de=C.memoizedProps.style,J=de!=null&&de.hasOwnProperty("display")?de.display:null;p.style.display=J==null||typeof J=="boolean"?"":(""+J).trim()}}catch(Ce){_s(C,C.return,Ce)}}}else if(t.tag===6){if(a===null){C=t;try{C.stateNode.nodeValue=i?"":C.memoizedProps}catch(Ce){_s(C,C.return,Ce)}}}else if(t.tag===18){if(a===null){C=t;try{var se=C.stateNode;i?vf(se,!0):vf(C.stateNode,!1)}catch(Ce){_s(C,C.return,Ce)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===s)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}l&4&&(l=s.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,hc(s,a))));break;case 19:Mt(t,s),At(s),l&4&&(l=s.updateQueue,l!==null&&(s.updateQueue=null,hc(s,l)));break;case 30:break;case 21:break;default:Mt(t,s),At(s)}}function At(s){var t=s.flags;if(t&2){try{for(var a,l=s.return;l!==null;){if(yx(l)){a=l;break}l=l.return}if(a==null)throw Error(d(160));switch(a.tag){case 27:var i=a.stateNode,o=Ud(s);mc(s,o,i);break;case 5:var m=a.stateNode;a.flags&32&&(gn(m,""),a.flags&=-33);var p=Ud(s);mc(s,p,m);break;case 3:case 4:var C=a.stateNode.containerInfo,I=Ud(s);Bd(s,I,C);break;default:throw Error(d(161))}}catch(ae){_s(s,s.return,ae)}s.flags&=-3}t&4096&&(s.flags&=-4097)}function Ex(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var t=s;Ex(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),s=s.sibling}}function Pa(s,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)wx(s,t.alternate,t),t=t.sibling}function sn(s){for(s=s.child;s!==null;){var t=s;switch(t.tag){case 0:case 11:case 14:case 15:Nl(4,t,t.return),sn(t);break;case 1:ka(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&jx(t,t.return,a),sn(t);break;case 27:Xi(t.stateNode);case 26:case 5:ka(t,t.return),sn(t);break;case 22:t.memoizedState===null&&sn(t);break;case 30:sn(t);break;default:sn(t)}s=s.sibling}}function Wa(s,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var l=t.alternate,i=s,o=t,m=o.flags;switch(o.tag){case 0:case 11:case 15:Wa(i,o,a),Ui(4,o);break;case 1:if(Wa(i,o,a),l=o,i=l.stateNode,typeof i.componentDidMount=="function")try{i.componentDidMount()}catch(I){_s(l,l.return,I)}if(l=o,i=l.updateQueue,i!==null){var p=l.stateNode;try{var C=i.shared.hiddenCallbacks;if(C!==null)for(i.shared.hiddenCallbacks=null,i=0;i<C.length;i++)ih(C[i],p)}catch(I){_s(l,l.return,I)}}a&&m&64&&gx(o),Bi(o,o.return);break;case 27:Nx(o);case 26:case 5:Wa(i,o,a),a&&l===null&&m&4&&vx(o),Bi(o,o.return);break;case 12:Wa(i,o,a);break;case 31:Wa(i,o,a),a&&m&4&&Cx(i,o);break;case 13:Wa(i,o,a),a&&m&4&&kx(i,o);break;case 22:o.memoizedState===null&&Wa(i,o,a),Bi(o,o.return);break;case 30:break;default:Wa(i,o,a)}t=t.sibling}}function qd(s,t){var a=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(a=s.memoizedState.cachePool.pool),s=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),s!==a&&(s!=null&&s.refCount++,a!=null&&_i(a))}function Gd(s,t){s=null,t.alternate!==null&&(s=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==s&&(t.refCount++,s!=null&&_i(s))}function ga(s,t,a,l){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)zx(s,t,a,l),t=t.sibling}function zx(s,t,a,l){var i=t.flags;switch(t.tag){case 0:case 11:case 15:ga(s,t,a,l),i&2048&&Ui(9,t);break;case 1:ga(s,t,a,l);break;case 3:ga(s,t,a,l),i&2048&&(s=null,t.alternate!==null&&(s=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==s&&(t.refCount++,s!=null&&_i(s)));break;case 12:if(i&2048){ga(s,t,a,l),s=t.stateNode;try{var o=t.memoizedProps,m=o.id,p=o.onPostCommit;typeof p=="function"&&p(m,t.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(C){_s(t,t.return,C)}}else ga(s,t,a,l);break;case 31:ga(s,t,a,l);break;case 13:ga(s,t,a,l);break;case 23:break;case 22:o=t.stateNode,m=t.alternate,t.memoizedState!==null?o._visibility&2?ga(s,t,a,l):Hi(s,t):o._visibility&2?ga(s,t,a,l):(o._visibility|=2,Un(s,t,a,l,(t.subtreeFlags&10256)!==0||!1)),i&2048&&qd(m,t);break;case 24:ga(s,t,a,l),i&2048&&Gd(t.alternate,t);break;default:ga(s,t,a,l)}}function Un(s,t,a,l,i){for(i=i&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var o=s,m=t,p=a,C=l,I=m.flags;switch(m.tag){case 0:case 11:case 15:Un(o,m,p,C,i),Ui(8,m);break;case 23:break;case 22:var ae=m.stateNode;m.memoizedState!==null?ae._visibility&2?Un(o,m,p,C,i):Hi(o,m):(ae._visibility|=2,Un(o,m,p,C,i)),i&&I&2048&&qd(m.alternate,m);break;case 24:Un(o,m,p,C,i),i&&I&2048&&Gd(m.alternate,m);break;default:Un(o,m,p,C,i)}t=t.sibling}}function Hi(s,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=s,l=t,i=l.flags;switch(l.tag){case 22:Hi(a,l),i&2048&&qd(l.alternate,l);break;case 24:Hi(a,l),i&2048&&Gd(l.alternate,l);break;default:Hi(a,l)}t=t.sibling}}var qi=8192;function Bn(s,t,a){if(s.subtreeFlags&qi)for(s=s.child;s!==null;)Mx(s,t,a),s=s.sibling}function Mx(s,t,a){switch(s.tag){case 26:Bn(s,t,a),s.flags&qi&&s.memoizedState!==null&&ay(a,pa,s.memoizedState,s.memoizedProps);break;case 5:Bn(s,t,a);break;case 3:case 4:var l=pa;pa=kc(s.stateNode.containerInfo),Bn(s,t,a),pa=l;break;case 22:s.memoizedState===null&&(l=s.alternate,l!==null&&l.memoizedState!==null?(l=qi,qi=16777216,Bn(s,t,a),qi=l):Bn(s,t,a));break;default:Bn(s,t,a)}}function Ax(s){var t=s.alternate;if(t!==null&&(s=t.child,s!==null)){t.child=null;do t=s.sibling,s.sibling=null,s=t;while(s!==null)}}function Gi(s){var t=s.deletions;if((s.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var l=t[a];ct=l,Ox(l,s)}Ax(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Dx(s),s=s.sibling}function Dx(s){switch(s.tag){case 0:case 11:case 15:Gi(s),s.flags&2048&&Nl(9,s,s.return);break;case 3:Gi(s);break;case 12:Gi(s);break;case 22:var t=s.stateNode;s.memoizedState!==null&&t._visibility&2&&(s.return===null||s.return.tag!==13)?(t._visibility&=-3,xc(s)):Gi(s);break;default:Gi(s)}}function xc(s){var t=s.deletions;if((s.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var l=t[a];ct=l,Ox(l,s)}Ax(s)}for(s=s.child;s!==null;){switch(t=s,t.tag){case 0:case 11:case 15:Nl(8,t,t.return),xc(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,xc(t));break;default:xc(t)}s=s.sibling}}function Ox(s,t){for(;ct!==null;){var a=ct;switch(a.tag){case 0:case 11:case 15:Nl(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:_i(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,ct=l;else e:for(a=s;ct!==null;){l=ct;var i=l.sibling,o=l.return;if(_x(l),l===a){ct=null;break e}if(i!==null){i.return=o,ct=i;break e}ct=o}}}var jv={getCacheForType:function(s){var t=mt(Js),a=t.data.get(s);return a===void 0&&(a=s(),t.data.set(s,a)),a},cacheSignal:function(){return mt(Js).controller.signal}},vv=typeof WeakMap=="function"?WeakMap:Map,Ns=0,Ts=null,ts=null,is=0,ws=0,Ft=null,bl=!1,Hn=!1,Vd=!1,el=0,Vs=0,wl=0,tn=0,Fd=0,Qt=0,qn=0,Vi=null,Dt=null,Qd=!1,fc=0,Rx=0,pc=1/0,gc=null,_l=null,at=0,Sl=null,Gn=null,sl=0,$d=0,Yd=null,Lx=null,Fi=0,Xd=null;function $t(){return(Ns&2)!==0&&is!==0?is&-is:y.T!==null?Wd():Y()}function Ux(){if(Qt===0)if((is&536870912)===0||fs){var s=Wt;Wt<<=1,(Wt&3932160)===0&&(Wt=262144),Qt=s}else Qt=536870912;return s=Gt.current,s!==null&&(s.flags|=32),Qt}function Ot(s,t,a){(s===Ts&&(ws===2||ws===9)||s.cancelPendingCommit!==null)&&(Vn(s,0),Cl(s,is,Qt,!1)),tt(s,a),((Ns&2)===0||s!==Ts)&&(s===Ts&&((Ns&2)===0&&(tn|=a),Vs===4&&Cl(s,is,Qt,!1)),Ta(s))}function Bx(s,t,a){if((Ns&6)!==0)throw Error(d(327));var l=!a&&(t&127)===0&&(t&s.expiredLanes)===0||ba(s,t),i=l?bv(s,t):Zd(s,t,!0),o=l;do{if(i===0){Hn&&!l&&Cl(s,t,0,!1);break}else{if(a=s.current.alternate,o&&!yv(a)){i=Zd(s,t,!1),o=!1;continue}if(i===2){if(o=t,s.errorRecoveryDisabledLanes&o)var m=0;else m=s.pendingLanes&-536870913,m=m!==0?m:m&536870912?536870912:0;if(m!==0){t=m;e:{var p=s;i=Vi;var C=p.current.memoizedState.isDehydrated;if(C&&(Vn(p,m).flags|=256),m=Zd(p,m,!1),m!==2){if(Vd&&!C){p.errorRecoveryDisabledLanes|=o,tn|=o,i=4;break e}o=Dt,Dt=i,o!==null&&(Dt===null?Dt=o:Dt.push.apply(Dt,o))}i=m}if(o=!1,i!==2)continue}}if(i===1){Vn(s,0),Cl(s,t,0,!0);break}e:{switch(l=s,o=i,o){case 0:case 1:throw Error(d(345));case 4:if((t&4194048)!==t)break;case 6:Cl(l,t,Qt,!bl);break e;case 2:Dt=null;break;case 3:case 5:break;default:throw Error(d(329))}if((t&62914560)===t&&(i=fc+300-Je(),10<i)){if(Cl(l,t,Qt,!bl),Ua(l,0,!0)!==0)break e;sl=t,l.timeoutHandle=pf(Hx.bind(null,l,a,Dt,gc,Qd,t,Qt,tn,qn,bl,o,"Throttled",-0,0),i);break e}Hx(l,a,Dt,gc,Qd,t,Qt,tn,qn,bl,o,null,-0,0)}}break}while(!0);Ta(s)}function Hx(s,t,a,l,i,o,m,p,C,I,ae,de,J,se){if(s.timeoutHandle=-1,de=t.subtreeFlags,de&8192||(de&16785408)===16785408){de={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:qa},Mx(t,o,de);var Ce=(o&62914560)===o?fc-Je():(o&4194048)===o?Rx-Je():0;if(Ce=ly(de,Ce),Ce!==null){sl=o,s.cancelPendingCommit=Ce(Xx.bind(null,s,t,o,a,l,i,m,p,C,ae,de,null,J,se)),Cl(s,o,m,!I);return}}Xx(s,t,o,a,l,i,m,p,C)}function yv(s){for(var t=s;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var i=a[l],o=i.getSnapshot;i=i.value;try{if(!Ht(o(),i))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===s)break;for(;t.sibling===null;){if(t.return===null||t.return===s)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Cl(s,t,a,l){t&=~Fd,t&=~tn,s.suspendedLanes|=t,s.pingedLanes&=~t,l&&(s.warmLanes|=t),l=s.expirationTimes;for(var i=t;0<i;){var o=31-ot(i),m=1<<o;l[o]=-1,i&=~m}a!==0&&Tt(s,a,t)}function jc(){return(Ns&6)===0?(Qi(0),!1):!0}function Kd(){if(ts!==null){if(ws===0)var s=ts.return;else s=ts,Qa=Xl=null,dd(s),An=null,Ci=0,s=ts;for(;s!==null;)px(s.alternate,s),s=s.return;ts=null}}function Vn(s,t){var a=s.timeoutHandle;a!==-1&&(s.timeoutHandle=-1,qv(a)),a=s.cancelPendingCommit,a!==null&&(s.cancelPendingCommit=null,a()),sl=0,Kd(),Ts=s,ts=a=Va(s.current,null),is=t,ws=0,Ft=null,bl=!1,Hn=ba(s,t),Vd=!1,qn=Qt=Fd=tn=wl=Vs=0,Dt=Vi=null,Qd=!1,(t&8)!==0&&(t|=t&32);var l=s.entangledLanes;if(l!==0)for(s=s.entanglements,l&=t;0<l;){var i=31-ot(l),o=1<<i;t|=s[i],l&=~o}return el=t,Hr(),a}function qx(s,t){Ze=null,y.H=Oi,t===Mn||t===Xr?(t=th(),ws=3):t===Po?(t=th(),ws=4):ws=t===Cd?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Ft=t,ts===null&&(Vs=1,rc(s,aa(t,s.current)))}function Gx(){var s=Gt.current;return s===null?!0:(is&4194048)===is?ra===null:(is&62914560)===is||(is&536870912)!==0?s===ra:!1}function Vx(){var s=y.H;return y.H=Oi,s===null?Oi:s}function Fx(){var s=y.A;return y.A=jv,s}function vc(){Vs=4,bl||(is&4194048)!==is&&Gt.current!==null||(Hn=!0),(wl&134217727)===0&&(tn&134217727)===0||Ts===null||Cl(Ts,is,Qt,!1)}function Zd(s,t,a){var l=Ns;Ns|=2;var i=Vx(),o=Fx();(Ts!==s||is!==t)&&(gc=null,Vn(s,t)),t=!1;var m=Vs;e:do try{if(ws!==0&&ts!==null){var p=ts,C=Ft;switch(ws){case 8:Kd(),m=6;break e;case 3:case 2:case 9:case 6:Gt.current===null&&(t=!0);var I=ws;if(ws=0,Ft=null,Fn(s,p,C,I),a&&Hn){m=0;break e}break;default:I=ws,ws=0,Ft=null,Fn(s,p,C,I)}}Nv(),m=Vs;break}catch(ae){qx(s,ae)}while(!0);return t&&s.shellSuspendCounter++,Qa=Xl=null,Ns=l,y.H=i,y.A=o,ts===null&&(Ts=null,is=0,Hr()),m}function Nv(){for(;ts!==null;)Qx(ts)}function bv(s,t){var a=Ns;Ns|=2;var l=Vx(),i=Fx();Ts!==s||is!==t?(gc=null,pc=Je()+500,Vn(s,t)):Hn=ba(s,t);e:do try{if(ws!==0&&ts!==null){t=ts;var o=Ft;s:switch(ws){case 1:ws=0,Ft=null,Fn(s,t,o,1);break;case 2:case 9:if(eh(o)){ws=0,Ft=null,$x(t);break}t=function(){ws!==2&&ws!==9||Ts!==s||(ws=7),Ta(s)},o.then(t,t);break e;case 3:ws=7;break e;case 4:ws=5;break e;case 7:eh(o)?(ws=0,Ft=null,$x(t)):(ws=0,Ft=null,Fn(s,t,o,7));break;case 5:var m=null;switch(ts.tag){case 26:m=ts.memoizedState;case 5:case 27:var p=ts;if(m?Mf(m):p.stateNode.complete){ws=0,Ft=null;var C=p.sibling;if(C!==null)ts=C;else{var I=p.return;I!==null?(ts=I,yc(I)):ts=null}break s}}ws=0,Ft=null,Fn(s,t,o,5);break;case 6:ws=0,Ft=null,Fn(s,t,o,6);break;case 8:Kd(),Vs=6;break e;default:throw Error(d(462))}}wv();break}catch(ae){qx(s,ae)}while(!0);return Qa=Xl=null,y.H=l,y.A=i,Ns=a,ts!==null?0:(Ts=null,is=0,Hr(),Vs)}function wv(){for(;ts!==null&&!Jt();)Qx(ts)}function Qx(s){var t=xx(s.alternate,s,el);s.memoizedProps=s.pendingProps,t===null?yc(s):ts=t}function $x(s){var t=s,a=t.alternate;switch(t.tag){case 15:case 0:t=cx(a,t,t.pendingProps,t.type,void 0,is);break;case 11:t=cx(a,t,t.pendingProps,t.type.render,t.ref,is);break;case 5:dd(t);default:px(a,t),t=ts=Fm(t,el),t=xx(a,t,el)}s.memoizedProps=s.pendingProps,t===null?yc(s):ts=t}function Fn(s,t,a,l){Qa=Xl=null,dd(t),An=null,Ci=0;var i=t.return;try{if(uv(s,i,t,a,is)){Vs=1,rc(s,aa(a,s.current)),ts=null;return}}catch(o){if(i!==null)throw ts=i,o;Vs=1,rc(s,aa(a,s.current)),ts=null;return}t.flags&32768?(fs||l===1?s=!0:Hn||(is&536870912)!==0?s=!1:(bl=s=!0,(l===2||l===9||l===3||l===6)&&(l=Gt.current,l!==null&&l.tag===13&&(l.flags|=16384))),Yx(t,s)):yc(t)}function yc(s){var t=s;do{if((t.flags&32768)!==0){Yx(t,bl);return}s=t.return;var a=xv(t.alternate,t,el);if(a!==null){ts=a;return}if(t=t.sibling,t!==null){ts=t;return}ts=t=s}while(t!==null);Vs===0&&(Vs=5)}function Yx(s,t){do{var a=fv(s.alternate,s);if(a!==null){a.flags&=32767,ts=a;return}if(a=s.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(s=s.sibling,s!==null)){ts=s;return}ts=s=a}while(s!==null);Vs=6,ts=null}function Xx(s,t,a,l,i,o,m,p,C){s.cancelPendingCommit=null;do Nc();while(at!==0);if((Ns&6)!==0)throw Error(d(327));if(t!==null){if(t===s.current)throw Error(d(177));if(o=t.lanes|t.childLanes,o|=Uo,Bt(s,a,o,m,p,C),s===Ts&&(ts=Ts=null,is=0),Gn=t,Sl=s,sl=a,$d=o,Yd=i,Lx=l,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,kv(Ct,function(){return Px(),null})):(s.callbackNode=null,s.callbackPriority=0),l=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||l){l=y.T,y.T=null,i=q.p,q.p=2,m=Ns,Ns|=4;try{pv(s,t,a)}finally{Ns=m,q.p=i,y.T=l}}at=1,Kx(),Zx(),Ix()}}function Kx(){if(at===1){at=0;var s=Sl,t=Gn,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=y.T,y.T=null;var l=q.p;q.p=2;var i=Ns;Ns|=4;try{Tx(t,s);var o=ru,m=Om(s.containerInfo),p=o.focusedElem,C=o.selectionRange;if(m!==p&&p&&p.ownerDocument&&Dm(p.ownerDocument.documentElement,p)){if(C!==null&&Ao(p)){var I=C.start,ae=C.end;if(ae===void 0&&(ae=I),"selectionStart"in p)p.selectionStart=I,p.selectionEnd=Math.min(ae,p.value.length);else{var de=p.ownerDocument||document,J=de&&de.defaultView||window;if(J.getSelection){var se=J.getSelection(),Ce=p.textContent.length,Oe=Math.min(C.start,Ce),ks=C.end===void 0?Oe:Math.min(C.end,Ce);!se.extend&&Oe>ks&&(m=ks,ks=Oe,Oe=m);var G=Am(p,Oe),M=Am(p,ks);if(G&&M&&(se.rangeCount!==1||se.anchorNode!==G.node||se.anchorOffset!==G.offset||se.focusNode!==M.node||se.focusOffset!==M.offset)){var Z=de.createRange();Z.setStart(G.node,G.offset),se.removeAllRanges(),Oe>ks?(se.addRange(Z),se.extend(M.node,M.offset)):(Z.setEnd(M.node,M.offset),se.addRange(Z))}}}}for(de=[],se=p;se=se.parentNode;)se.nodeType===1&&de.push({element:se,left:se.scrollLeft,top:se.scrollTop});for(typeof p.focus=="function"&&p.focus(),p=0;p<de.length;p++){var re=de[p];re.element.scrollLeft=re.left,re.element.scrollTop=re.top}}Dc=!!iu,ru=iu=null}finally{Ns=i,q.p=l,y.T=a}}s.current=t,at=2}}function Zx(){if(at===2){at=0;var s=Sl,t=Gn,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=y.T,y.T=null;var l=q.p;q.p=2;var i=Ns;Ns|=4;try{wx(s,t.alternate,t)}finally{Ns=i,q.p=l,y.T=a}}at=3}}function Ix(){if(at===4||at===3){at=0,bt();var s=Sl,t=Gn,a=sl,l=Lx;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?at=5:(at=0,Gn=Sl=null,Jx(s,s.pendingLanes));var i=s.pendingLanes;if(i===0&&(_l=null),un(a),t=t.stateNode,Re&&typeof Re.onCommitFiberRoot=="function")try{Re.onCommitFiberRoot(Se,t,void 0,(t.current.flags&128)===128)}catch{}if(l!==null){t=y.T,i=q.p,q.p=2,y.T=null;try{for(var o=s.onRecoverableError,m=0;m<l.length;m++){var p=l[m];o(p.value,{componentStack:p.stack})}}finally{y.T=t,q.p=i}}(sl&3)!==0&&Nc(),Ta(s),i=s.pendingLanes,(a&261930)!==0&&(i&42)!==0?s===Xd?Fi++:(Fi=0,Xd=s):Fi=0,Qi(0)}}function Jx(s,t){(s.pooledCacheLanes&=t)===0&&(t=s.pooledCache,t!=null&&(s.pooledCache=null,_i(t)))}function Nc(){return Kx(),Zx(),Ix(),Px()}function Px(){if(at!==5)return!1;var s=Sl,t=$d;$d=0;var a=un(sl),l=y.T,i=q.p;try{q.p=32>a?32:a,y.T=null,a=Yd,Yd=null;var o=Sl,m=sl;if(at=0,Gn=Sl=null,sl=0,(Ns&6)!==0)throw Error(d(331));var p=Ns;if(Ns|=4,Dx(o.current),zx(o,o.current,m,a),Ns=p,Qi(0,!1),Re&&typeof Re.onPostCommitFiberRoot=="function")try{Re.onPostCommitFiberRoot(Se,o)}catch{}return!0}finally{q.p=i,y.T=l,Jx(s,t)}}function Wx(s,t,a){t=aa(a,t),t=Sd(s.stateNode,t,2),s=jl(s,t,2),s!==null&&(tt(s,2),Ta(s))}function _s(s,t,a){if(s.tag===3)Wx(s,s,a);else for(;t!==null;){if(t.tag===3){Wx(t,s,a);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(_l===null||!_l.has(l))){s=aa(a,s),a=ex(2),l=jl(t,a,2),l!==null&&(sx(a,l,t,s),tt(l,2),Ta(l));break}}t=t.return}}function Id(s,t,a){var l=s.pingCache;if(l===null){l=s.pingCache=new vv;var i=new Set;l.set(t,i)}else i=l.get(t),i===void 0&&(i=new Set,l.set(t,i));i.has(a)||(Vd=!0,i.add(a),s=_v.bind(null,s,t,a),t.then(s,s))}function _v(s,t,a){var l=s.pingCache;l!==null&&l.delete(t),s.pingedLanes|=s.suspendedLanes&a,s.warmLanes&=~a,Ts===s&&(is&a)===a&&(Vs===4||Vs===3&&(is&62914560)===is&&300>Je()-fc?(Ns&2)===0&&Vn(s,0):Fd|=a,qn===is&&(qn=0)),Ta(s)}function ef(s,t){t===0&&(t=je()),s=Ql(s,t),s!==null&&(tt(s,t),Ta(s))}function Sv(s){var t=s.memoizedState,a=0;t!==null&&(a=t.retryLane),ef(s,a)}function Cv(s,t){var a=0;switch(s.tag){case 31:case 13:var l=s.stateNode,i=s.memoizedState;i!==null&&(a=i.retryLane);break;case 19:l=s.stateNode;break;case 22:l=s.stateNode._retryCache;break;default:throw Error(d(314))}l!==null&&l.delete(t),ef(s,a)}function kv(s,t){return Le(s,t)}var bc=null,Qn=null,Jd=!1,wc=!1,Pd=!1,kl=0;function Ta(s){s!==Qn&&s.next===null&&(Qn===null?bc=Qn=s:Qn=Qn.next=s),wc=!0,Jd||(Jd=!0,Ev())}function Qi(s,t){if(!Pd&&wc){Pd=!0;do for(var a=!1,l=bc;l!==null;){if(s!==0){var i=l.pendingLanes;if(i===0)var o=0;else{var m=l.suspendedLanes,p=l.pingedLanes;o=(1<<31-ot(42|s)+1)-1,o&=i&~(m&~p),o=o&201326741?o&201326741|1:o?o|2:0}o!==0&&(a=!0,lf(l,o))}else o=is,o=Ua(l,l===Ts?o:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(o&3)===0||ba(l,o)||(a=!0,lf(l,o));l=l.next}while(a);Pd=!1}}function Tv(){sf()}function sf(){wc=Jd=!1;var s=0;kl!==0&&Hv()&&(s=kl);for(var t=Je(),a=null,l=bc;l!==null;){var i=l.next,o=tf(l,t);o===0?(l.next=null,a===null?bc=i:a.next=i,i===null&&(Qn=a)):(a=l,(s!==0||(o&3)!==0)&&(wc=!0)),l=i}at!==0&&at!==5||Qi(s),kl!==0&&(kl=0)}function tf(s,t){for(var a=s.suspendedLanes,l=s.pingedLanes,i=s.expirationTimes,o=s.pendingLanes&-62914561;0<o;){var m=31-ot(o),p=1<<m,C=i[m];C===-1?((p&a)===0||(p&l)!==0)&&(i[m]=P(p,t)):C<=t&&(s.expiredLanes|=p),o&=~p}if(t=Ts,a=is,a=Ua(s,s===t?a:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),l=s.callbackNode,a===0||s===t&&(ws===2||ws===9)||s.cancelPendingCommit!==null)return l!==null&&l!==null&&st(l),s.callbackNode=null,s.callbackPriority=0;if((a&3)===0||ba(s,a)){if(t=a&-a,t===s.callbackPriority)return t;switch(l!==null&&st(l),un(a)){case 2:case 8:a=nt;break;case 32:a=Ct;break;case 268435456:a=rl;break;default:a=Ct}return l=af.bind(null,s),a=Le(a,l),s.callbackPriority=t,s.callbackNode=a,t}return l!==null&&l!==null&&st(l),s.callbackPriority=2,s.callbackNode=null,2}function af(s,t){if(at!==0&&at!==5)return s.callbackNode=null,s.callbackPriority=0,null;var a=s.callbackNode;if(Nc()&&s.callbackNode!==a)return null;var l=is;return l=Ua(s,s===Ts?l:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),l===0?null:(Bx(s,l,t),tf(s,Je()),s.callbackNode!=null&&s.callbackNode===a?af.bind(null,s):null)}function lf(s,t){if(Nc())return null;Bx(s,t,!0)}function Ev(){Gv(function(){(Ns&6)!==0?Le(jt,Tv):sf()})}function Wd(){if(kl===0){var s=En;s===0&&(s=Pt,Pt<<=1,(Pt&261888)===0&&(Pt=256)),kl=s}return kl}function nf(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Mr(""+s)}function rf(s,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,s.id&&a.setAttribute("form",s.id),t.parentNode.insertBefore(a,t),s=new FormData(s),a.parentNode.removeChild(a),s}function zv(s,t,a,l,i){if(t==="submit"&&a&&a.stateNode===i){var o=nf((i[Ys]||null).action),m=l.submitter;m&&(t=(t=m[Ys]||null)?nf(t.formAction):m.getAttribute("formAction"),t!==null&&(o=t,m=null));var p=new Rr("action","action",null,l,i);s.push({event:p,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(kl!==0){var C=m?rf(i,m):new FormData(i);vd(a,{pending:!0,data:C,method:i.method,action:o},null,C)}}else typeof o=="function"&&(p.preventDefault(),C=m?rf(i,m):new FormData(i),vd(a,{pending:!0,data:C,method:i.method,action:o},o,C))},currentTarget:i}]})}}for(var eu=0;eu<Lo.length;eu++){var su=Lo[eu],Mv=su.toLowerCase(),Av=su[0].toUpperCase()+su.slice(1);fa(Mv,"on"+Av)}fa(Um,"onAnimationEnd"),fa(Bm,"onAnimationIteration"),fa(Hm,"onAnimationStart"),fa("dblclick","onDoubleClick"),fa("focusin","onFocus"),fa("focusout","onBlur"),fa(Kj,"onTransitionRun"),fa(Zj,"onTransitionStart"),fa(Ij,"onTransitionCancel"),fa(qm,"onTransitionEnd"),fn("onMouseEnter",["mouseout","mouseover"]),fn("onMouseLeave",["mouseout","mouseover"]),fn("onPointerEnter",["pointerout","pointerover"]),fn("onPointerLeave",["pointerout","pointerover"]),ql("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ql("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ql("onBeforeInput",["compositionend","keypress","textInput","paste"]),ql("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ql("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ql("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $i="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dv=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat($i));function cf(s,t){t=(t&4)!==0;for(var a=0;a<s.length;a++){var l=s[a],i=l.event;l=l.listeners;e:{var o=void 0;if(t)for(var m=l.length-1;0<=m;m--){var p=l[m],C=p.instance,I=p.currentTarget;if(p=p.listener,C!==o&&i.isPropagationStopped())break e;o=p,i.currentTarget=I;try{o(i)}catch(ae){Br(ae)}i.currentTarget=null,o=C}else for(m=0;m<l.length;m++){if(p=l[m],C=p.instance,I=p.currentTarget,p=p.listener,C!==o&&i.isPropagationStopped())break e;o=p,i.currentTarget=I;try{o(i)}catch(ae){Br(ae)}i.currentTarget=null,o=C}}}}function as(s,t){var a=t[Ba];a===void 0&&(a=t[Ba]=new Set);var l=s+"__bubble";a.has(l)||(of(t,s,2,!1),a.add(l))}function tu(s,t,a){var l=0;t&&(l|=4),of(a,s,l,t)}var _c="_reactListening"+Math.random().toString(36).slice(2);function au(s){if(!s[_c]){s[_c]=!0,sm.forEach(function(a){a!=="selectionchange"&&(Dv.has(a)||tu(a,!1,s),tu(a,!0,s))});var t=s.nodeType===9?s:s.ownerDocument;t===null||t[_c]||(t[_c]=!0,tu("selectionchange",!1,t))}}function of(s,t,a,l){switch(Bf(t)){case 2:var i=ry;break;case 8:i=cy;break;default:i=ju}a=i.bind(null,t,a,s),i=void 0,!wo||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),l?i!==void 0?s.addEventListener(t,a,{capture:!0,passive:i}):s.addEventListener(t,a,!0):i!==void 0?s.addEventListener(t,a,{passive:i}):s.addEventListener(t,a,!1)}function lu(s,t,a,l,i){var o=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var m=l.tag;if(m===3||m===4){var p=l.stateNode.containerInfo;if(p===i)break;if(m===4)for(m=l.return;m!==null;){var C=m.tag;if((C===3||C===4)&&m.stateNode.containerInfo===i)return;m=m.return}for(;p!==null;){if(m=mn(p),m===null)return;if(C=m.tag,C===5||C===6||C===26||C===27){l=o=m;continue e}p=p.parentNode}}l=l.return}hm(function(){var I=o,ae=No(a),de=[];e:{var J=Gm.get(s);if(J!==void 0){var se=Rr,Ce=s;switch(s){case"keypress":if(Dr(a)===0)break e;case"keydown":case"keyup":se=Cj;break;case"focusin":Ce="focus",se=ko;break;case"focusout":Ce="blur",se=ko;break;case"beforeblur":case"afterblur":se=ko;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=pm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=xj;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=Ej;break;case Um:case Bm:case Hm:se=gj;break;case qm:se=Mj;break;case"scroll":case"scrollend":se=mj;break;case"wheel":se=Dj;break;case"copy":case"cut":case"paste":se=vj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=jm;break;case"toggle":case"beforetoggle":se=Rj}var Oe=(t&4)!==0,ks=!Oe&&(s==="scroll"||s==="scrollend"),G=Oe?J!==null?J+"Capture":null:J;Oe=[];for(var M=I,Z;M!==null;){var re=M;if(Z=re.stateNode,re=re.tag,re!==5&&re!==26&&re!==27||Z===null||G===null||(re=hi(M,G),re!=null&&Oe.push(Yi(M,re,Z))),ks)break;M=M.return}0<Oe.length&&(J=new se(J,Ce,null,a,ae),de.push({event:J,listeners:Oe}))}}if((t&7)===0){e:{if(J=s==="mouseover"||s==="pointerover",se=s==="mouseout"||s==="pointerout",J&&a!==yo&&(Ce=a.relatedTarget||a.fromElement)&&(mn(Ce)||Ce[wa]))break e;if((se||J)&&(J=ae.window===ae?ae:(J=ae.ownerDocument)?J.defaultView||J.parentWindow:window,se?(Ce=a.relatedTarget||a.toElement,se=I,Ce=Ce?mn(Ce):null,Ce!==null&&(ks=x(Ce),Oe=Ce.tag,Ce!==ks||Oe!==5&&Oe!==27&&Oe!==6)&&(Ce=null)):(se=null,Ce=I),se!==Ce)){if(Oe=pm,re="onMouseLeave",G="onMouseEnter",M="mouse",(s==="pointerout"||s==="pointerover")&&(Oe=jm,re="onPointerLeave",G="onPointerEnter",M="pointer"),ks=se==null?J:mi(se),Z=Ce==null?J:mi(Ce),J=new Oe(re,M+"leave",se,a,ae),J.target=ks,J.relatedTarget=Z,re=null,mn(ae)===I&&(Oe=new Oe(G,M+"enter",Ce,a,ae),Oe.target=Z,Oe.relatedTarget=ks,re=Oe),ks=re,se&&Ce)s:{for(Oe=Ov,G=se,M=Ce,Z=0,re=G;re;re=Oe(re))Z++;re=0;for(var Ee=M;Ee;Ee=Oe(Ee))re++;for(;0<Z-re;)G=Oe(G),Z--;for(;0<re-Z;)M=Oe(M),re--;for(;Z--;){if(G===M||M!==null&&G===M.alternate){Oe=G;break s}G=Oe(G),M=Oe(M)}Oe=null}else Oe=null;se!==null&&df(de,J,se,Oe,!1),Ce!==null&&ks!==null&&df(de,ks,Ce,Oe,!0)}}e:{if(J=I?mi(I):window,se=J.nodeName&&J.nodeName.toLowerCase(),se==="select"||se==="input"&&J.type==="file")var vs=Cm;else if(_m(J))if(km)vs=$j;else{vs=Fj;var Te=Vj}else se=J.nodeName,!se||se.toLowerCase()!=="input"||J.type!=="checkbox"&&J.type!=="radio"?I&&vo(I.elementType)&&(vs=Cm):vs=Qj;if(vs&&(vs=vs(s,I))){Sm(de,vs,a,ae);break e}Te&&Te(s,J,I),s==="focusout"&&I&&J.type==="number"&&I.memoizedProps.value!=null&&jo(J,"number",J.value)}switch(Te=I?mi(I):window,s){case"focusin":(_m(Te)||Te.contentEditable==="true")&&(Nn=Te,Do=I,Ni=null);break;case"focusout":Ni=Do=Nn=null;break;case"mousedown":Oo=!0;break;case"contextmenu":case"mouseup":case"dragend":Oo=!1,Rm(de,a,ae);break;case"selectionchange":if(Xj)break;case"keydown":case"keyup":Rm(de,a,ae)}var Pe;if(Eo)e:{switch(s){case"compositionstart":var rs="onCompositionStart";break e;case"compositionend":rs="onCompositionEnd";break e;case"compositionupdate":rs="onCompositionUpdate";break e}rs=void 0}else yn?bm(s,a)&&(rs="onCompositionEnd"):s==="keydown"&&a.keyCode===229&&(rs="onCompositionStart");rs&&(vm&&a.locale!=="ko"&&(yn||rs!=="onCompositionStart"?rs==="onCompositionEnd"&&yn&&(Pe=xm()):(ul=ae,_o="value"in ul?ul.value:ul.textContent,yn=!0)),Te=Sc(I,rs),0<Te.length&&(rs=new gm(rs,s,null,a,ae),de.push({event:rs,listeners:Te}),Pe?rs.data=Pe:(Pe=wm(a),Pe!==null&&(rs.data=Pe)))),(Pe=Uj?Bj(s,a):Hj(s,a))&&(rs=Sc(I,"onBeforeInput"),0<rs.length&&(Te=new gm("onBeforeInput","beforeinput",null,a,ae),de.push({event:Te,listeners:rs}),Te.data=Pe)),zv(de,s,I,a,ae)}cf(de,t)})}function Yi(s,t,a){return{instance:s,listener:t,currentTarget:a}}function Sc(s,t){for(var a=t+"Capture",l=[];s!==null;){var i=s,o=i.stateNode;if(i=i.tag,i!==5&&i!==26&&i!==27||o===null||(i=hi(s,a),i!=null&&l.unshift(Yi(s,i,o)),i=hi(s,t),i!=null&&l.push(Yi(s,i,o))),s.tag===3)return l;s=s.return}return[]}function Ov(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function df(s,t,a,l,i){for(var o=t._reactName,m=[];a!==null&&a!==l;){var p=a,C=p.alternate,I=p.stateNode;if(p=p.tag,C!==null&&C===l)break;p!==5&&p!==26&&p!==27||I===null||(C=I,i?(I=hi(a,o),I!=null&&m.unshift(Yi(a,I,C))):i||(I=hi(a,o),I!=null&&m.push(Yi(a,I,C)))),a=a.return}m.length!==0&&s.push({event:t,listeners:m})}var Rv=/\r\n?/g,Lv=/\u0000|\uFFFD/g;function uf(s){return(typeof s=="string"?s:""+s).replace(Rv,`
`).replace(Lv,"")}function mf(s,t){return t=uf(t),uf(s)===t}function Cs(s,t,a,l,i,o){switch(a){case"children":typeof l=="string"?t==="body"||t==="textarea"&&l===""||gn(s,l):(typeof l=="number"||typeof l=="bigint")&&t!=="body"&&gn(s,""+l);break;case"className":Er(s,"class",l);break;case"tabIndex":Er(s,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Er(s,a,l);break;case"style":um(s,l,o);break;case"data":if(t!=="object"){Er(s,"data",l);break}case"src":case"href":if(l===""&&(t!=="a"||a!=="href")){s.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){s.removeAttribute(a);break}l=Mr(""+l),s.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){s.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof o=="function"&&(a==="formAction"?(t!=="input"&&Cs(s,t,"name",i.name,i,null),Cs(s,t,"formEncType",i.formEncType,i,null),Cs(s,t,"formMethod",i.formMethod,i,null),Cs(s,t,"formTarget",i.formTarget,i,null)):(Cs(s,t,"encType",i.encType,i,null),Cs(s,t,"method",i.method,i,null),Cs(s,t,"target",i.target,i,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){s.removeAttribute(a);break}l=Mr(""+l),s.setAttribute(a,l);break;case"onClick":l!=null&&(s.onclick=qa);break;case"onScroll":l!=null&&as("scroll",s);break;case"onScrollEnd":l!=null&&as("scrollend",s);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(d(61));if(a=l.__html,a!=null){if(i.children!=null)throw Error(d(60));s.innerHTML=a}}break;case"multiple":s.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":s.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){s.removeAttribute("xlink:href");break}a=Mr(""+l),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?s.setAttribute(a,""+l):s.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?s.setAttribute(a,""):s.removeAttribute(a);break;case"capture":case"download":l===!0?s.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?s.setAttribute(a,l):s.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?s.setAttribute(a,l):s.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?s.removeAttribute(a):s.setAttribute(a,l);break;case"popover":as("beforetoggle",s),as("toggle",s),Tr(s,"popover",l);break;case"xlinkActuate":Ha(s,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Ha(s,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Ha(s,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Ha(s,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Ha(s,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Ha(s,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Ha(s,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Ha(s,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Ha(s,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Tr(s,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=dj.get(a)||a,Tr(s,a,l))}}function nu(s,t,a,l,i,o){switch(a){case"style":um(s,l,o);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(d(61));if(a=l.__html,a!=null){if(i.children!=null)throw Error(d(60));s.innerHTML=a}}break;case"children":typeof l=="string"?gn(s,l):(typeof l=="number"||typeof l=="bigint")&&gn(s,""+l);break;case"onScroll":l!=null&&as("scroll",s);break;case"onScrollEnd":l!=null&&as("scrollend",s);break;case"onClick":l!=null&&(s.onclick=qa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!tm.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(i=a.endsWith("Capture"),t=a.slice(2,i?a.length-7:void 0),o=s[Ys]||null,o=o!=null?o[a]:null,typeof o=="function"&&s.removeEventListener(t,o,i),typeof l=="function")){typeof o!="function"&&o!==null&&(a in s?s[a]=null:s.hasAttribute(a)&&s.removeAttribute(a)),s.addEventListener(t,l,i);break e}a in s?s[a]=l:l===!0?s.setAttribute(a,""):Tr(s,a,l)}}}function xt(s,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":as("error",s),as("load",s);var l=!1,i=!1,o;for(o in a)if(a.hasOwnProperty(o)){var m=a[o];if(m!=null)switch(o){case"src":l=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(d(137,t));default:Cs(s,t,o,m,a,null)}}i&&Cs(s,t,"srcSet",a.srcSet,a,null),l&&Cs(s,t,"src",a.src,a,null);return;case"input":as("invalid",s);var p=o=m=i=null,C=null,I=null;for(l in a)if(a.hasOwnProperty(l)){var ae=a[l];if(ae!=null)switch(l){case"name":i=ae;break;case"type":m=ae;break;case"checked":C=ae;break;case"defaultChecked":I=ae;break;case"value":o=ae;break;case"defaultValue":p=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(d(137,t));break;default:Cs(s,t,l,ae,a,null)}}rm(s,o,p,C,I,m,i,!1);return;case"select":as("invalid",s),l=m=o=null;for(i in a)if(a.hasOwnProperty(i)&&(p=a[i],p!=null))switch(i){case"value":o=p;break;case"defaultValue":m=p;break;case"multiple":l=p;default:Cs(s,t,i,p,a,null)}t=o,a=m,s.multiple=!!l,t!=null?pn(s,!!l,t,!1):a!=null&&pn(s,!!l,a,!0);return;case"textarea":as("invalid",s),o=i=l=null;for(m in a)if(a.hasOwnProperty(m)&&(p=a[m],p!=null))switch(m){case"value":l=p;break;case"defaultValue":i=p;break;case"children":o=p;break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(d(91));break;default:Cs(s,t,m,p,a,null)}om(s,l,i,o);return;case"option":for(C in a)if(a.hasOwnProperty(C)&&(l=a[C],l!=null))switch(C){case"selected":s.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Cs(s,t,C,l,a,null)}return;case"dialog":as("beforetoggle",s),as("toggle",s),as("cancel",s),as("close",s);break;case"iframe":case"object":as("load",s);break;case"video":case"audio":for(l=0;l<$i.length;l++)as($i[l],s);break;case"image":as("error",s),as("load",s);break;case"details":as("toggle",s);break;case"embed":case"source":case"link":as("error",s),as("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(I in a)if(a.hasOwnProperty(I)&&(l=a[I],l!=null))switch(I){case"children":case"dangerouslySetInnerHTML":throw Error(d(137,t));default:Cs(s,t,I,l,a,null)}return;default:if(vo(t)){for(ae in a)a.hasOwnProperty(ae)&&(l=a[ae],l!==void 0&&nu(s,t,ae,l,a,void 0));return}}for(p in a)a.hasOwnProperty(p)&&(l=a[p],l!=null&&Cs(s,t,p,l,a,null))}function Uv(s,t,a,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,o=null,m=null,p=null,C=null,I=null,ae=null;for(se in a){var de=a[se];if(a.hasOwnProperty(se)&&de!=null)switch(se){case"checked":break;case"value":break;case"defaultValue":C=de;default:l.hasOwnProperty(se)||Cs(s,t,se,null,l,de)}}for(var J in l){var se=l[J];if(de=a[J],l.hasOwnProperty(J)&&(se!=null||de!=null))switch(J){case"type":o=se;break;case"name":i=se;break;case"checked":I=se;break;case"defaultChecked":ae=se;break;case"value":m=se;break;case"defaultValue":p=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(d(137,t));break;default:se!==de&&Cs(s,t,J,se,l,de)}}go(s,m,p,C,I,ae,o,i);return;case"select":se=m=p=J=null;for(o in a)if(C=a[o],a.hasOwnProperty(o)&&C!=null)switch(o){case"value":break;case"multiple":se=C;default:l.hasOwnProperty(o)||Cs(s,t,o,null,l,C)}for(i in l)if(o=l[i],C=a[i],l.hasOwnProperty(i)&&(o!=null||C!=null))switch(i){case"value":J=o;break;case"defaultValue":p=o;break;case"multiple":m=o;default:o!==C&&Cs(s,t,i,o,l,C)}t=p,a=m,l=se,J!=null?pn(s,!!a,J,!1):!!l!=!!a&&(t!=null?pn(s,!!a,t,!0):pn(s,!!a,a?[]:"",!1));return;case"textarea":se=J=null;for(p in a)if(i=a[p],a.hasOwnProperty(p)&&i!=null&&!l.hasOwnProperty(p))switch(p){case"value":break;case"children":break;default:Cs(s,t,p,null,l,i)}for(m in l)if(i=l[m],o=a[m],l.hasOwnProperty(m)&&(i!=null||o!=null))switch(m){case"value":J=i;break;case"defaultValue":se=i;break;case"children":break;case"dangerouslySetInnerHTML":if(i!=null)throw Error(d(91));break;default:i!==o&&Cs(s,t,m,i,l,o)}cm(s,J,se);return;case"option":for(var Ce in a)if(J=a[Ce],a.hasOwnProperty(Ce)&&J!=null&&!l.hasOwnProperty(Ce))switch(Ce){case"selected":s.selected=!1;break;default:Cs(s,t,Ce,null,l,J)}for(C in l)if(J=l[C],se=a[C],l.hasOwnProperty(C)&&J!==se&&(J!=null||se!=null))switch(C){case"selected":s.selected=J&&typeof J!="function"&&typeof J!="symbol";break;default:Cs(s,t,C,J,l,se)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Oe in a)J=a[Oe],a.hasOwnProperty(Oe)&&J!=null&&!l.hasOwnProperty(Oe)&&Cs(s,t,Oe,null,l,J);for(I in l)if(J=l[I],se=a[I],l.hasOwnProperty(I)&&J!==se&&(J!=null||se!=null))switch(I){case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(d(137,t));break;default:Cs(s,t,I,J,l,se)}return;default:if(vo(t)){for(var ks in a)J=a[ks],a.hasOwnProperty(ks)&&J!==void 0&&!l.hasOwnProperty(ks)&&nu(s,t,ks,void 0,l,J);for(ae in l)J=l[ae],se=a[ae],!l.hasOwnProperty(ae)||J===se||J===void 0&&se===void 0||nu(s,t,ae,J,l,se);return}}for(var G in a)J=a[G],a.hasOwnProperty(G)&&J!=null&&!l.hasOwnProperty(G)&&Cs(s,t,G,null,l,J);for(de in l)J=l[de],se=a[de],!l.hasOwnProperty(de)||J===se||J==null&&se==null||Cs(s,t,de,J,l,se)}function hf(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Bv(){if(typeof performance.getEntriesByType=="function"){for(var s=0,t=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var i=a[l],o=i.transferSize,m=i.initiatorType,p=i.duration;if(o&&p&&hf(m)){for(m=0,p=i.responseEnd,l+=1;l<a.length;l++){var C=a[l],I=C.startTime;if(I>p)break;var ae=C.transferSize,de=C.initiatorType;ae&&hf(de)&&(C=C.responseEnd,m+=ae*(C<p?1:(p-I)/(C-I)))}if(--l,t+=8*(o+m)/(i.duration/1e3),s++,10<s)break}}if(0<s)return t/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var iu=null,ru=null;function Cc(s){return s.nodeType===9?s:s.ownerDocument}function xf(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ff(s,t){if(s===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&t==="foreignObject"?0:s}function cu(s,t){return s==="textarea"||s==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ou=null;function Hv(){var s=window.event;return s&&s.type==="popstate"?s===ou?!1:(ou=s,!0):(ou=null,!1)}var pf=typeof setTimeout=="function"?setTimeout:void 0,qv=typeof clearTimeout=="function"?clearTimeout:void 0,gf=typeof Promise=="function"?Promise:void 0,Gv=typeof queueMicrotask=="function"?queueMicrotask:typeof gf<"u"?function(s){return gf.resolve(null).then(s).catch(Vv)}:pf;function Vv(s){setTimeout(function(){throw s})}function Tl(s){return s==="head"}function jf(s,t){var a=t,l=0;do{var i=a.nextSibling;if(s.removeChild(a),i&&i.nodeType===8)if(a=i.data,a==="/$"||a==="/&"){if(l===0){s.removeChild(i),Kn(t);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Xi(s.ownerDocument.documentElement);else if(a==="head"){a=s.ownerDocument.head,Xi(a);for(var o=a.firstChild;o;){var m=o.nextSibling,p=o.nodeName;o[ui]||p==="SCRIPT"||p==="STYLE"||p==="LINK"&&o.rel.toLowerCase()==="stylesheet"||a.removeChild(o),o=m}}else a==="body"&&Xi(s.ownerDocument.body);a=i}while(a);Kn(t)}function vf(s,t){var a=s;s=0;do{var l=a.nextSibling;if(a.nodeType===1?t?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(t?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(s===0)break;s--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||s++;a=l}while(a)}function du(s){var t=s.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":du(a),fo(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}s.removeChild(a)}}function Fv(s,t,a,l){for(;s.nodeType===1;){var i=a;if(s.nodeName.toLowerCase()!==t.toLowerCase()){if(!l&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(l){if(!s[ui])switch(t){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(o=s.getAttribute("rel"),o==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(o!==i.rel||s.getAttribute("href")!==(i.href==null||i.href===""?null:i.href)||s.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin)||s.getAttribute("title")!==(i.title==null?null:i.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(o=s.getAttribute("src"),(o!==(i.src==null?null:i.src)||s.getAttribute("type")!==(i.type==null?null:i.type)||s.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin))&&o&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(t==="input"&&s.type==="hidden"){var o=i.name==null?null:""+i.name;if(i.type==="hidden"&&s.getAttribute("name")===o)return s}else return s;if(s=ca(s.nextSibling),s===null)break}return null}function Qv(s,t,a){if(t==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!a||(s=ca(s.nextSibling),s===null))return null;return s}function yf(s,t){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!t||(s=ca(s.nextSibling),s===null))return null;return s}function uu(s){return s.data==="$?"||s.data==="$~"}function mu(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function $v(s,t){var a=s.ownerDocument;if(s.data==="$~")s._reactRetry=t;else if(s.data!=="$?"||a.readyState!=="loading")t();else{var l=function(){t(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),s._reactRetry=l}}function ca(s){for(;s!=null;s=s.nextSibling){var t=s.nodeType;if(t===1||t===3)break;if(t===8){if(t=s.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return s}var hu=null;function Nf(s){s=s.nextSibling;for(var t=0;s;){if(s.nodeType===8){var a=s.data;if(a==="/$"||a==="/&"){if(t===0)return ca(s.nextSibling);t--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||t++}s=s.nextSibling}return null}function bf(s){s=s.previousSibling;for(var t=0;s;){if(s.nodeType===8){var a=s.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(t===0)return s;t--}else a!=="/$"&&a!=="/&"||t++}s=s.previousSibling}return null}function wf(s,t,a){switch(t=Cc(a),s){case"html":if(s=t.documentElement,!s)throw Error(d(452));return s;case"head":if(s=t.head,!s)throw Error(d(453));return s;case"body":if(s=t.body,!s)throw Error(d(454));return s;default:throw Error(d(451))}}function Xi(s){for(var t=s.attributes;t.length;)s.removeAttributeNode(t[0]);fo(s)}var oa=new Map,_f=new Set;function kc(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var tl=q.d;q.d={f:Yv,r:Xv,D:Kv,C:Zv,L:Iv,m:Jv,X:Wv,S:Pv,M:ey};function Yv(){var s=tl.f(),t=jc();return s||t}function Xv(s){var t=hn(s);t!==null&&t.tag===5&&t.type==="form"?qh(t):tl.r(s)}var $n=typeof document>"u"?null:document;function Sf(s,t,a){var l=$n;if(l&&typeof t=="string"&&t){var i=sa(t);i='link[rel="'+s+'"][href="'+i+'"]',typeof a=="string"&&(i+='[crossorigin="'+a+'"]'),_f.has(i)||(_f.add(i),s={rel:s,crossOrigin:a,href:t},l.querySelector(i)===null&&(t=l.createElement("link"),xt(t,"link",s),rt(t),l.head.appendChild(t)))}}function Kv(s){tl.D(s),Sf("dns-prefetch",s,null)}function Zv(s,t){tl.C(s,t),Sf("preconnect",s,t)}function Iv(s,t,a){tl.L(s,t,a);var l=$n;if(l&&s&&t){var i='link[rel="preload"][as="'+sa(t)+'"]';t==="image"&&a&&a.imageSrcSet?(i+='[imagesrcset="'+sa(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(i+='[imagesizes="'+sa(a.imageSizes)+'"]')):i+='[href="'+sa(s)+'"]';var o=i;switch(t){case"style":o=Yn(s);break;case"script":o=Xn(s)}oa.has(o)||(s=k({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:s,as:t},a),oa.set(o,s),l.querySelector(i)!==null||t==="style"&&l.querySelector(Ki(o))||t==="script"&&l.querySelector(Zi(o))||(t=l.createElement("link"),xt(t,"link",s),rt(t),l.head.appendChild(t)))}}function Jv(s,t){tl.m(s,t);var a=$n;if(a&&s){var l=t&&typeof t.as=="string"?t.as:"script",i='link[rel="modulepreload"][as="'+sa(l)+'"][href="'+sa(s)+'"]',o=i;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":o=Xn(s)}if(!oa.has(o)&&(s=k({rel:"modulepreload",href:s},t),oa.set(o,s),a.querySelector(i)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Zi(o)))return}l=a.createElement("link"),xt(l,"link",s),rt(l),a.head.appendChild(l)}}}function Pv(s,t,a){tl.S(s,t,a);var l=$n;if(l&&s){var i=xn(l).hoistableStyles,o=Yn(s);t=t||"default";var m=i.get(o);if(!m){var p={loading:0,preload:null};if(m=l.querySelector(Ki(o)))p.loading=5;else{s=k({rel:"stylesheet",href:s,"data-precedence":t},a),(a=oa.get(o))&&xu(s,a);var C=m=l.createElement("link");rt(C),xt(C,"link",s),C._p=new Promise(function(I,ae){C.onload=I,C.onerror=ae}),C.addEventListener("load",function(){p.loading|=1}),C.addEventListener("error",function(){p.loading|=2}),p.loading|=4,Tc(m,t,l)}m={type:"stylesheet",instance:m,count:1,state:p},i.set(o,m)}}}function Wv(s,t){tl.X(s,t);var a=$n;if(a&&s){var l=xn(a).hoistableScripts,i=Xn(s),o=l.get(i);o||(o=a.querySelector(Zi(i)),o||(s=k({src:s,async:!0},t),(t=oa.get(i))&&fu(s,t),o=a.createElement("script"),rt(o),xt(o,"link",s),a.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},l.set(i,o))}}function ey(s,t){tl.M(s,t);var a=$n;if(a&&s){var l=xn(a).hoistableScripts,i=Xn(s),o=l.get(i);o||(o=a.querySelector(Zi(i)),o||(s=k({src:s,async:!0,type:"module"},t),(t=oa.get(i))&&fu(s,t),o=a.createElement("script"),rt(o),xt(o,"link",s),a.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},l.set(i,o))}}function Cf(s,t,a,l){var i=(i=le.current)?kc(i):null;if(!i)throw Error(d(446));switch(s){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=Yn(a.href),a=xn(i).hoistableStyles,l=a.get(t),l||(l={type:"style",instance:null,count:0,state:null},a.set(t,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){s=Yn(a.href);var o=xn(i).hoistableStyles,m=o.get(s);if(m||(i=i.ownerDocument||i,m={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},o.set(s,m),(o=i.querySelector(Ki(s)))&&!o._p&&(m.instance=o,m.state.loading=5),oa.has(s)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},oa.set(s,a),o||sy(i,s,a,m.state))),t&&l===null)throw Error(d(528,""));return m}if(t&&l!==null)throw Error(d(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Xn(a),a=xn(i).hoistableScripts,l=a.get(t),l||(l={type:"script",instance:null,count:0,state:null},a.set(t,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(d(444,s))}}function Yn(s){return'href="'+sa(s)+'"'}function Ki(s){return'link[rel="stylesheet"]['+s+"]"}function kf(s){return k({},s,{"data-precedence":s.precedence,precedence:null})}function sy(s,t,a,l){s.querySelector('link[rel="preload"][as="style"]['+t+"]")?l.loading=1:(t=s.createElement("link"),l.preload=t,t.addEventListener("load",function(){return l.loading|=1}),t.addEventListener("error",function(){return l.loading|=2}),xt(t,"link",a),rt(t),s.head.appendChild(t))}function Xn(s){return'[src="'+sa(s)+'"]'}function Zi(s){return"script[async]"+s}function Tf(s,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var l=s.querySelector('style[data-href~="'+sa(a.href)+'"]');if(l)return t.instance=l,rt(l),l;var i=k({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(s.ownerDocument||s).createElement("style"),rt(l),xt(l,"style",i),Tc(l,a.precedence,s),t.instance=l;case"stylesheet":i=Yn(a.href);var o=s.querySelector(Ki(i));if(o)return t.state.loading|=4,t.instance=o,rt(o),o;l=kf(a),(i=oa.get(i))&&xu(l,i),o=(s.ownerDocument||s).createElement("link"),rt(o);var m=o;return m._p=new Promise(function(p,C){m.onload=p,m.onerror=C}),xt(o,"link",l),t.state.loading|=4,Tc(o,a.precedence,s),t.instance=o;case"script":return o=Xn(a.src),(i=s.querySelector(Zi(o)))?(t.instance=i,rt(i),i):(l=a,(i=oa.get(o))&&(l=k({},a),fu(l,i)),s=s.ownerDocument||s,i=s.createElement("script"),rt(i),xt(i,"link",l),s.head.appendChild(i),t.instance=i);case"void":return null;default:throw Error(d(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(l=t.instance,t.state.loading|=4,Tc(l,a.precedence,s));return t.instance}function Tc(s,t,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=l.length?l[l.length-1]:null,o=i,m=0;m<l.length;m++){var p=l[m];if(p.dataset.precedence===t)o=p;else if(o!==i)break}o?o.parentNode.insertBefore(s,o.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(s,t.firstChild))}function xu(s,t){s.crossOrigin==null&&(s.crossOrigin=t.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=t.referrerPolicy),s.title==null&&(s.title=t.title)}function fu(s,t){s.crossOrigin==null&&(s.crossOrigin=t.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=t.referrerPolicy),s.integrity==null&&(s.integrity=t.integrity)}var Ec=null;function Ef(s,t,a){if(Ec===null){var l=new Map,i=Ec=new Map;i.set(a,l)}else i=Ec,l=i.get(a),l||(l=new Map,i.set(a,l));if(l.has(s))return l;for(l.set(s,null),a=a.getElementsByTagName(s),i=0;i<a.length;i++){var o=a[i];if(!(o[ui]||o[Fe]||s==="link"&&o.getAttribute("rel")==="stylesheet")&&o.namespaceURI!=="http://www.w3.org/2000/svg"){var m=o.getAttribute(t)||"";m=s+m;var p=l.get(m);p?p.push(o):l.set(m,[o])}}return l}function zf(s,t,a){s=s.ownerDocument||s,s.head.insertBefore(a,t==="title"?s.querySelector("head > title"):null)}function ty(s,t,a){if(a===1||t.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return s=t.disabled,typeof t.precedence=="string"&&s==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Mf(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function ay(s,t,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var i=Yn(l.href),o=t.querySelector(Ki(i));if(o){t=o._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(s.count++,s=zc.bind(s),t.then(s,s)),a.state.loading|=4,a.instance=o,rt(o);return}o=t.ownerDocument||t,l=kf(l),(i=oa.get(i))&&xu(l,i),o=o.createElement("link"),rt(o);var m=o;m._p=new Promise(function(p,C){m.onload=p,m.onerror=C}),xt(o,"link",l),a.instance=o}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(a,t),(t=a.state.preload)&&(a.state.loading&3)===0&&(s.count++,a=zc.bind(s),t.addEventListener("load",a),t.addEventListener("error",a))}}var pu=0;function ly(s,t){return s.stylesheets&&s.count===0&&Ac(s,s.stylesheets),0<s.count||0<s.imgCount?function(a){var l=setTimeout(function(){if(s.stylesheets&&Ac(s,s.stylesheets),s.unsuspend){var o=s.unsuspend;s.unsuspend=null,o()}},6e4+t);0<s.imgBytes&&pu===0&&(pu=62500*Bv());var i=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&Ac(s,s.stylesheets),s.unsuspend)){var o=s.unsuspend;s.unsuspend=null,o()}},(s.imgBytes>pu?50:800)+t);return s.unsuspend=a,function(){s.unsuspend=null,clearTimeout(l),clearTimeout(i)}}:null}function zc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ac(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Mc=null;function Ac(s,t){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Mc=new Map,t.forEach(ny,s),Mc=null,zc.call(s))}function ny(s,t){if(!(t.state.loading&4)){var a=Mc.get(s);if(a)var l=a.get(null);else{a=new Map,Mc.set(s,a);for(var i=s.querySelectorAll("link[data-precedence],style[data-precedence]"),o=0;o<i.length;o++){var m=i[o];(m.nodeName==="LINK"||m.getAttribute("media")!=="not all")&&(a.set(m.dataset.precedence,m),l=m)}l&&a.set(null,l)}i=t.instance,m=i.getAttribute("data-precedence"),o=a.get(m)||l,o===l&&a.set(null,i),a.set(m,i),this.count++,l=zc.bind(this),i.addEventListener("load",l),i.addEventListener("error",l),o?o.parentNode.insertBefore(i,o.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(i,s.firstChild)),t.state.loading|=4}}var Ii={$$typeof:V,Provider:null,Consumer:null,_currentValue:H,_currentValue2:H,_threadCount:0};function iy(s,t,a,l,i,o,m,p,C){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ae(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ae(0),this.hiddenUpdates=Ae(null),this.identifierPrefix=l,this.onUncaughtError=i,this.onCaughtError=o,this.onRecoverableError=m,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=C,this.incompleteTransitions=new Map}function Af(s,t,a,l,i,o,m,p,C,I,ae,de){return s=new iy(s,t,a,m,C,I,ae,de,p),t=1,o===!0&&(t|=24),o=qt(3,null,null,t),s.current=o,o.stateNode=s,t=Zo(),t.refCount++,s.pooledCache=t,t.refCount++,o.memoizedState={element:l,isDehydrated:a,cache:t},Wo(o),s}function Df(s){return s?(s=_n,s):_n}function Of(s,t,a,l,i,o){i=Df(i),l.context===null?l.context=i:l.pendingContext=i,l=gl(t),l.payload={element:a},o=o===void 0?null:o,o!==null&&(l.callback=o),a=jl(s,l,t),a!==null&&(Ot(a,s,t),Ti(a,s,t))}function Rf(s,t){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var a=s.retryLane;s.retryLane=a!==0&&a<t?a:t}}function gu(s,t){Rf(s,t),(s=s.alternate)&&Rf(s,t)}function Lf(s){if(s.tag===13||s.tag===31){var t=Ql(s,67108864);t!==null&&Ot(t,s,67108864),gu(s,67108864)}}function Uf(s){if(s.tag===13||s.tag===31){var t=$t();t=dn(t);var a=Ql(s,t);a!==null&&Ot(a,s,t),gu(s,t)}}var Dc=!0;function ry(s,t,a,l){var i=y.T;y.T=null;var o=q.p;try{q.p=2,ju(s,t,a,l)}finally{q.p=o,y.T=i}}function cy(s,t,a,l){var i=y.T;y.T=null;var o=q.p;try{q.p=8,ju(s,t,a,l)}finally{q.p=o,y.T=i}}function ju(s,t,a,l){if(Dc){var i=vu(l);if(i===null)lu(s,t,l,Oc,a),Hf(s,l);else if(dy(i,s,t,a,l))l.stopPropagation();else if(Hf(s,l),t&4&&-1<oy.indexOf(s)){for(;i!==null;){var o=hn(i);if(o!==null)switch(o.tag){case 3:if(o=o.stateNode,o.current.memoizedState.isDehydrated){var m=Ut(o.pendingLanes);if(m!==0){var p=o;for(p.pendingLanes|=2,p.entangledLanes|=2;m;){var C=1<<31-ot(m);p.entanglements[1]|=C,m&=~C}Ta(o),(Ns&6)===0&&(pc=Je()+500,Qi(0))}}break;case 31:case 13:p=Ql(o,2),p!==null&&Ot(p,o,2),jc(),gu(o,2)}if(o=vu(l),o===null&&lu(s,t,l,Oc,a),o===i)break;i=o}i!==null&&l.stopPropagation()}else lu(s,t,l,null,a)}}function vu(s){return s=No(s),yu(s)}var Oc=null;function yu(s){if(Oc=null,s=mn(s),s!==null){var t=x(s);if(t===null)s=null;else{var a=t.tag;if(a===13){if(s=f(t),s!==null)return s;s=null}else if(a===31){if(s=j(t),s!==null)return s;s=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;s=null}else t!==s&&(s=null)}}return Oc=s,null}function Bf(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ue()){case jt:return 2;case nt:return 8;case Ct:case kt:return 32;case rl:return 268435456;default:return 32}default:return 32}}var Nu=!1,El=null,zl=null,Ml=null,Ji=new Map,Pi=new Map,Al=[],oy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Hf(s,t){switch(s){case"focusin":case"focusout":El=null;break;case"dragenter":case"dragleave":zl=null;break;case"mouseover":case"mouseout":Ml=null;break;case"pointerover":case"pointerout":Ji.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pi.delete(t.pointerId)}}function Wi(s,t,a,l,i,o){return s===null||s.nativeEvent!==o?(s={blockedOn:t,domEventName:a,eventSystemFlags:l,nativeEvent:o,targetContainers:[i]},t!==null&&(t=hn(t),t!==null&&Lf(t)),s):(s.eventSystemFlags|=l,t=s.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),s)}function dy(s,t,a,l,i){switch(t){case"focusin":return El=Wi(El,s,t,a,l,i),!0;case"dragenter":return zl=Wi(zl,s,t,a,l,i),!0;case"mouseover":return Ml=Wi(Ml,s,t,a,l,i),!0;case"pointerover":var o=i.pointerId;return Ji.set(o,Wi(Ji.get(o)||null,s,t,a,l,i)),!0;case"gotpointercapture":return o=i.pointerId,Pi.set(o,Wi(Pi.get(o)||null,s,t,a,l,i)),!0}return!1}function qf(s){var t=mn(s.target);if(t!==null){var a=x(t);if(a!==null){if(t=a.tag,t===13){if(t=f(a),t!==null){s.blockedOn=t,fe(s.priority,function(){Uf(a)});return}}else if(t===31){if(t=j(a),t!==null){s.blockedOn=t,fe(s.priority,function(){Uf(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){s.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Rc(s){if(s.blockedOn!==null)return!1;for(var t=s.targetContainers;0<t.length;){var a=vu(s.nativeEvent);if(a===null){a=s.nativeEvent;var l=new a.constructor(a.type,a);yo=l,a.target.dispatchEvent(l),yo=null}else return t=hn(a),t!==null&&Lf(t),s.blockedOn=a,!1;t.shift()}return!0}function Gf(s,t,a){Rc(s)&&a.delete(t)}function uy(){Nu=!1,El!==null&&Rc(El)&&(El=null),zl!==null&&Rc(zl)&&(zl=null),Ml!==null&&Rc(Ml)&&(Ml=null),Ji.forEach(Gf),Pi.forEach(Gf)}function Lc(s,t){s.blockedOn===t&&(s.blockedOn=null,Nu||(Nu=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,uy)))}var Uc=null;function Vf(s){Uc!==s&&(Uc=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Uc===s&&(Uc=null);for(var t=0;t<s.length;t+=3){var a=s[t],l=s[t+1],i=s[t+2];if(typeof l!="function"){if(yu(l||a)===null)continue;break}var o=hn(a);o!==null&&(s.splice(t,3),t-=3,vd(o,{pending:!0,data:i,method:a.method,action:l},l,i))}}))}function Kn(s){function t(C){return Lc(C,s)}El!==null&&Lc(El,s),zl!==null&&Lc(zl,s),Ml!==null&&Lc(Ml,s),Ji.forEach(t),Pi.forEach(t);for(var a=0;a<Al.length;a++){var l=Al[a];l.blockedOn===s&&(l.blockedOn=null)}for(;0<Al.length&&(a=Al[0],a.blockedOn===null);)qf(a),a.blockedOn===null&&Al.shift();if(a=(s.ownerDocument||s).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var i=a[l],o=a[l+1],m=i[Ys]||null;if(typeof o=="function")m||Vf(a);else if(m){var p=null;if(o&&o.hasAttribute("formAction")){if(i=o,m=o[Ys]||null)p=m.formAction;else if(yu(i)!==null)continue}else p=m.action;typeof p=="function"?a[l+1]=p:(a.splice(l,3),l-=3),Vf(a)}}}function Ff(){function s(o){o.canIntercept&&o.info==="react-transition"&&o.intercept({handler:function(){return new Promise(function(m){return i=m})},focusReset:"manual",scroll:"manual"})}function t(){i!==null&&(i(),i=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var o=navigation.currentEntry;o&&o.url!=null&&navigation.navigate(o.url,{state:o.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,i=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),i!==null&&(i(),i=null)}}}function bu(s){this._internalRoot=s}Bc.prototype.render=bu.prototype.render=function(s){var t=this._internalRoot;if(t===null)throw Error(d(409));var a=t.current,l=$t();Of(a,l,s,t,null,null)},Bc.prototype.unmount=bu.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var t=s.containerInfo;Of(s.current,2,null,s,null,null),jc(),t[wa]=null}};function Bc(s){this._internalRoot=s}Bc.prototype.unstable_scheduleHydration=function(s){if(s){var t=Y();s={blockedOn:null,target:s,priority:t};for(var a=0;a<Al.length&&t!==0&&t<Al[a].priority;a++);Al.splice(a,0,s),a===0&&qf(s)}};var Qf=r.version;if(Qf!=="19.2.0")throw Error(d(527,Qf,"19.2.0"));q.findDOMNode=function(s){var t=s._reactInternals;if(t===void 0)throw typeof s.render=="function"?Error(d(188)):(s=Object.keys(s).join(","),Error(d(268,s)));return s=_(t),s=s!==null?v(s):null,s=s===null?null:s.stateNode,s};var my={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:y,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hc.isDisabled&&Hc.supportsFiber)try{Se=Hc.inject(my),Re=Hc}catch{}}return ar.createRoot=function(s,t){if(!h(s))throw Error(d(299));var a=!1,l="",i=Ih,o=Jh,m=Ph;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onUncaughtError!==void 0&&(i=t.onUncaughtError),t.onCaughtError!==void 0&&(o=t.onCaughtError),t.onRecoverableError!==void 0&&(m=t.onRecoverableError)),t=Af(s,1,!1,null,null,a,l,null,i,o,m,Ff),s[wa]=t.current,au(s),new bu(t)},ar.hydrateRoot=function(s,t,a){if(!h(s))throw Error(d(299));var l=!1,i="",o=Ih,m=Jh,p=Ph,C=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(i=a.identifierPrefix),a.onUncaughtError!==void 0&&(o=a.onUncaughtError),a.onCaughtError!==void 0&&(m=a.onCaughtError),a.onRecoverableError!==void 0&&(p=a.onRecoverableError),a.formState!==void 0&&(C=a.formState)),t=Af(s,1,!0,t,a??null,l,i,C,o,m,p,Ff),t.context=Df(null),a=t.current,l=$t(),l=dn(l),i=gl(l),i.callback=null,jl(a,i,l),a=l,t.current.lanes=a,tt(t,a),Ta(t),s[wa]=t.current,au(s),new Bc(t)},ar.version="19.2.0",ar}var sp;function Ub(){if(sp)return ku.exports;sp=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(r){console.error(r)}}return n(),ku.exports=Lb(),ku.exports}var Bb=Ub();function $(...n){return _y(Sy(n))}const Be=u.forwardRef(({className:n,...r},c)=>e.jsx("div",{ref:c,className:$("rounded-xl border bg-card text-card-foreground shadow",n),...r}));Be.displayName="Card";const gs=u.forwardRef(({className:n,...r},c)=>e.jsx("div",{ref:c,className:$("flex flex-col space-y-1.5 p-6",n),...r}));gs.displayName="CardHeader";const js=u.forwardRef(({className:n,...r},c)=>e.jsx("div",{ref:c,className:$("font-semibold leading-none tracking-tight",n),...r}));js.displayName="CardTitle";const Zs=u.forwardRef(({className:n,...r},c)=>e.jsx("div",{ref:c,className:$("text-sm text-muted-foreground",n),...r}));Zs.displayName="CardDescription";const bs=u.forwardRef(({className:n,...r},c)=>e.jsx("div",{ref:c,className:$("p-6 pt-0",n),...r}));bs.displayName="CardContent";const wg=u.forwardRef(({className:n,...r},c)=>e.jsx("div",{ref:c,className:$("flex items-center p-6 pt-0",n),...r}));wg.displayName="CardFooter";const Kt=Ty,Rt=u.forwardRef(({className:n,...r},c)=>e.jsx(yp,{ref:c,className:$("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",n),...r}));Rt.displayName=yp.displayName;const He=u.forwardRef(({className:n,...r},c)=>e.jsx(Np,{ref:c,className:$("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all duration-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",n),...r}));He.displayName=Np.displayName;const We=u.forwardRef(({className:n,...r},c)=>e.jsx(bp,{ref:c,className:$("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 data-[state=active]:animate-in data-[state=active]:fade-in data-[state=active]:duration-300",n),...r}));We.displayName=bp.displayName;const es=u.forwardRef(({className:n,children:r,viewportRef:c,...d},h)=>e.jsxs(wp,{ref:h,className:$("relative overflow-hidden",n),...d,children:[e.jsx(Ey,{ref:c,className:"h-full w-full rounded-[inherit]",children:r}),e.jsx(Bu,{}),e.jsx(Bu,{orientation:"horizontal"}),e.jsx(zy,{})]}));es.displayName=wp.displayName;const Bu=u.forwardRef(({className:n,orientation:r="vertical",...c},d)=>e.jsx(_p,{ref:d,orientation:r,className:$("flex touch-none select-none transition-colors",r==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",r==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",n),...c,children:e.jsx(My,{className:"relative flex-1 rounded-full bg-border"})}));Bu.displayName=_p.displayName;function Hb({className:n,...r}){return e.jsx("div",{className:$("animate-pulse rounded-md bg-primary/10",n),...r})}const Sr=u.forwardRef(({className:n,value:r,...c},d)=>e.jsx(Sp,{ref:d,className:$("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",n),...c,children:e.jsx(Ay,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(r||0)}%)`}})}));Sr.displayName=Sp.displayName;const qb={light:"",dark:".dark"},_g=u.createContext(null);function Sg(){const n=u.useContext(_g);if(!n)throw new Error("useChart must be used within a <ChartContainer />");return n}const Zn=u.forwardRef(({id:n,className:r,children:c,config:d,...h},x)=>{const f=u.useId(),j=`chart-${n||f.replace(/:/g,"")}`;return e.jsx(_g.Provider,{value:{config:d},children:e.jsxs("div",{"data-chart":j,ref:x,className:$("flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none",r),...h,children:[e.jsx(Gb,{id:j,config:d}),e.jsx(Iy,{children:c})]})})});Zn.displayName="Chart";const Gb=({id:n,config:r})=>{const c=Object.entries(r).filter(([,d])=>d.theme||d.color);return c.length?e.jsx("style",{dangerouslySetInnerHTML:{__html:Object.entries(qb).map(([d,h])=>`
${h} [data-chart=${n}] {
${c.map(([x,f])=>{const j=f.theme?.[d]||f.color;return j?`  --color-${x}: ${j};`:null}).join(`
`)}
}
`).join(`
`)}}):null},lr=Jy,In=u.forwardRef(({active:n,payload:r,className:c,indicator:d="dot",hideLabel:h=!1,hideIndicator:x=!1,label:f,labelFormatter:j,labelClassName:g,formatter:_,color:v,nameKey:k,labelKey:z},T)=>{const{config:L}=Sg(),K=u.useMemo(()=>{if(h||!r?.length)return null;const[R]=r,ee=`${z||R?.dataKey||R?.name||"value"}`,V=Hu(L,R,ee),E=!z&&typeof f=="string"?L[f]?.label||f:V?.label;return j?e.jsx("div",{className:$("font-medium",g),children:j(E,r)}):E?e.jsx("div",{className:$("font-medium",g),children:E}):null},[f,j,r,h,g,L,z]);if(!n||!r?.length)return null;const U=r.length===1&&d!=="dot";return e.jsxs("div",{ref:T,className:$("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",c),children:[U?null:K,e.jsx("div",{className:"grid gap-1.5",children:r.filter(R=>R.type!=="none").map((R,ee)=>{const V=`${k||R.name||R.dataKey||"value"}`,E=Hu(L,R,V),B=v||R.payload.fill||R.color;return e.jsx("div",{className:$("flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground",d==="dot"&&"items-center"),children:_&&R?.value!==void 0&&R.name?_(R.value,R.name,R,ee,R.payload):e.jsxs(e.Fragment,{children:[E?.icon?e.jsx(E.icon,{}):!x&&e.jsx("div",{className:$("shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]",{"h-2.5 w-2.5":d==="dot","w-1":d==="line","w-0 border-[1.5px] border-dashed bg-transparent":d==="dashed","my-0.5":U&&d==="dashed"}),style:{"--color-bg":B,"--color-border":B}}),e.jsxs("div",{className:$("flex flex-1 justify-between leading-none",U?"items-end":"items-center"),children:[e.jsxs("div",{className:"grid gap-1.5",children:[U?K:null,e.jsx("span",{className:"text-muted-foreground",children:E?.label||R.name})]}),R.value&&e.jsx("span",{className:"font-mono font-medium tabular-nums text-foreground",children:R.value.toLocaleString()})]})]})},R.dataKey)})})]})});In.displayName="ChartTooltip";const Vb=Py,Cg=u.forwardRef(({className:n,hideIcon:r=!1,payload:c,verticalAlign:d="bottom",nameKey:h},x)=>{const{config:f}=Sg();return c?.length?e.jsx("div",{ref:x,className:$("flex items-center justify-center gap-4",d==="top"?"pb-3":"pt-3",n),children:c.filter(j=>j.type!=="none").map(j=>{const g=`${h||j.dataKey||"value"}`,_=Hu(f,j,g);return e.jsxs("div",{className:$("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground"),children:[_?.icon&&!r?e.jsx(_.icon,{}):e.jsx("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:j.color}}),_?.label]},j.value)})}):null});Cg.displayName="ChartLegend";function Hu(n,r,c){if(typeof r!="object"||r===null)return;const d="payload"in r&&typeof r.payload=="object"&&r.payload!==null?r.payload:void 0;let h=c;return c in r&&typeof r[c]=="string"?h=r[c]:d&&c in d&&typeof d[c]=="string"&&(h=d[c]),h in n?n[h]:n[c]}const gr=ai("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),N=u.forwardRef(({className:n,variant:r,size:c,asChild:d=!1,...h},x)=>{const f=d?lN:"button";return e.jsx(f,{className:$(gr({variant:r,size:c,className:n})),ref:x,...h})});N.displayName="Button";const Fb=ai("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Xe({className:n,variant:r,...c}){return e.jsx("div",{className:$(Fb({variant:r}),n),...c})}const Qb=5,$b=5e3;let zu=0;function Yb(){return zu=(zu+1)%Number.MAX_SAFE_INTEGER,zu.toString()}const Mu=new Map,tp=n=>{if(Mu.has(n))return;const r=setTimeout(()=>{Mu.delete(n),ur({type:"REMOVE_TOAST",toastId:n})},$b);Mu.set(n,r)},Xb=(n,r)=>{switch(r.type){case"ADD_TOAST":return{...n,toasts:[r.toast,...n.toasts].slice(0,Qb)};case"UPDATE_TOAST":return{...n,toasts:n.toasts.map(c=>c.id===r.toast.id?{...c,...r.toast}:c)};case"DISMISS_TOAST":{const{toastId:c}=r;return c?tp(c):n.toasts.forEach(d=>{tp(d.id)}),{...n,toasts:n.toasts.map(d=>d.id===c||c===void 0?{...d,open:!1}:d)}}case"REMOVE_TOAST":return r.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(c=>c.id!==r.toastId)}}},Zc=[];let Ic={toasts:[]};function ur(n){Ic=Xb(Ic,n),Zc.forEach(r=>{r(Ic)})}function Kb({...n}){const r=Yb(),c=h=>ur({type:"UPDATE_TOAST",toast:{...h,id:r}}),d=()=>ur({type:"DISMISS_TOAST",toastId:r});return ur({type:"ADD_TOAST",toast:{...n,id:r,open:!0,onOpenChange:h=>{h||d()}}}),{id:r,dismiss:d,update:c}}function Bs(){const[n,r]=u.useState(Ic);return u.useEffect(()=>(Zc.push(r),()=>{const c=Zc.indexOf(r);c>-1&&Zc.splice(c,1)}),[n]),{...n,toast:Kb,dismiss:c=>ur({type:"DISMISS_TOAST",toastId:c})}}const Zb=n=>{const r=[];for(let c=0;c<n;c++){const d=c*137.508%360;r.push(`hsl(${d}, 70%, 55%)`)}return r};function Ib(){const[n,r]=u.useState(null),[c,d]=u.useState(!0),[h,x]=u.useState(0),[f,j]=u.useState(24),[g,_]=u.useState(!0),[v,k]=u.useState(null),[z,T]=u.useState(!0),[L,K]=u.useState(null),[U,R]=u.useState(!1),{toast:ee}=Bs(),V=u.useCallback(async()=>{try{T(!0);const H=await qc.get("https://v1.hitokoto.cn/?c=a&c=b&c=c&c=d&c=h&c=i&c=k");k({hitokoto:H.data.hitokoto,from:H.data.from||H.data.from_who||""})}catch(H){console.error(":",H),k({hitokoto:"",from:""})}finally{T(!1)}},[]),E=u.useCallback(async()=>{try{const H=localStorage.getItem("access-token"),ne=await qc.get("/api/webui/system/status",{headers:{Authorization:`Bearer ${H}`}});K(ne.data)}catch(H){console.error(":",H),K(null)}},[]),B=async()=>{if(!U)try{R(!0);const H=localStorage.getItem("access-token");await qc.post("/api/webui/system/restart",{},{headers:{Authorization:`Bearer ${H}`}}),ee({title:"",description:"..."}),setTimeout(()=>{E(),R(!1)},3e3)}catch(H){console.error(":",H),ee({title:"",description:"",variant:"destructive"}),R(!1)}},X=u.useCallback(async()=>{try{const H=localStorage.getItem("access-token"),ne=await qc.get(`/api/webui/statistics/dashboard?hours=${f}`,{headers:{Authorization:`Bearer ${H}`}});r(ne.data),d(!1),x(100)}catch(H){console.error("Failed to fetch dashboard data:",H),d(!1),x(100)}},[f]);if(u.useEffect(()=>{if(!c)return;x(0);const H=setTimeout(()=>x(15),200),ne=setTimeout(()=>x(30),800),S=setTimeout(()=>x(45),2e3),me=setTimeout(()=>x(60),4e3),he=setTimeout(()=>x(75),6500),Q=setTimeout(()=>x(85),9e3),oe=setTimeout(()=>x(92),11e3);return()=>{clearTimeout(H),clearTimeout(ne),clearTimeout(S),clearTimeout(me),clearTimeout(he),clearTimeout(Q),clearTimeout(oe)}},[c]),u.useEffect(()=>{X(),V(),E()},[X,V,E]),u.useEffect(()=>{if(!g)return;const H=setInterval(()=>{X(),E()},3e4);return()=>clearInterval(H)},[g,X,E]),c||!n)return e.jsx("div",{className:"flex items-center justify-center h-[calc(100vh-200px)]",children:e.jsxs("div",{className:"text-center space-y-6 w-full max-w-md px-4",children:[e.jsx(ft,{className:"h-12 w-12 animate-spin mx-auto text-primary"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-lg font-medium",children:"..."}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Sr,{value:h,className:"h-2"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[h,"%"]})]})]})});const{summary:w,model_stats:D=[],hourly_data:te=[],daily_data:xe=[],recent_activity:be=[]}=n,ye=w??{total_requests:0,total_cost:0,total_tokens:0,online_time:0,total_messages:0,total_replies:0,avg_response_time:0,cost_per_hour:0,tokens_per_hour:0},ve=H=>{const ne=Math.floor(H/3600),S=Math.floor(H%3600/60);return`${ne}${S}`},pe=H=>new Date(H).toLocaleString("zh-CN",{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),Ne=Zb(D.length),y=D.map((H,ne)=>({name:H.model_name,value:H.request_count,fill:Ne[ne]})),q={requests:{label:"",color:"hsl(var(--chart-1))"},cost:{label:"()",color:"hsl(var(--chart-2))"},tokens:{label:"Tokens",color:"hsl(var(--chart-3))"}};return e.jsx(es,{className:"h-full",children:e.jsxs("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:""})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(Kt,{value:f.toString(),onValueChange:H=>j(Number(H)),children:e.jsxs(Rt,{className:"grid grid-cols-3 w-full sm:w-auto",children:[e.jsx(He,{value:"24",children:"24"}),e.jsx(He,{value:"168",children:"7"}),e.jsx(He,{value:"720",children:"30"})]})}),e.jsxs(N,{variant:g?"default":"outline",size:"sm",onClick:()=>_(!g),className:"gap-2",children:[e.jsx(ft,{className:`h-4 w-4 ${g?"animate-spin":""}`}),e.jsx("span",{className:"hidden sm:inline",children:""})]}),e.jsx(N,{variant:"outline",size:"sm",onClick:X,children:e.jsx(ft,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"flex items-center gap-3 px-4 py-2 rounded-lg border border-dashed border-muted-foreground/30 bg-muted/20",children:[z?e.jsx(Hb,{className:"h-5 flex-1"}):v?e.jsxs("p",{className:"flex-1 text-sm text-muted-foreground italic truncate",children:['"',v.hitokoto,'"  ',v.from]}):null,e.jsx(N,{variant:"ghost",size:"icon",className:"h-7 w-7 shrink-0",onClick:V,disabled:z,children:e.jsx(ft,{className:`h-3.5 w-3.5 ${z?"animate-spin":""}`})})]}),e.jsxs("div",{className:"grid gap-4 grid-cols-1 lg:grid-cols-3",children:[e.jsxs(Be,{className:"lg:col-span-1",children:[e.jsx(gs,{className:"pb-3",children:e.jsxs(js,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(Nr,{className:"h-4 w-4"}),""]})}),e.jsx(bs,{children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex items-center gap-2",children:L?.running?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-3 w-3 rounded-full bg-green-500 animate-pulse"}),e.jsxs(Xe,{variant:"outline",className:"text-green-600 border-green-300 bg-green-50",children:[e.jsx(xa,{className:"h-3 w-3 mr-1"}),""]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-3 w-3 rounded-full bg-red-500"}),e.jsxs(Xe,{variant:"outline",className:"text-red-600 border-red-300 bg-red-50",children:[e.jsx(Aa,{className:"h-3 w-3 mr-1"}),""]})]})}),L&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.jsxs("span",{children:["v",L.version]}),e.jsx("span",{className:"mx-2",children:"|"}),e.jsxs("span",{children:[" ",ve(L.uptime)]})]})]})})]}),e.jsxs(Be,{className:"lg:col-span-2",children:[e.jsx(gs,{className:"pb-3",children:e.jsxs(js,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(ln,{className:"h-4 w-4"}),""]})}),e.jsx(bs,{children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(N,{variant:"outline",size:"sm",onClick:B,disabled:U,className:"gap-2",children:[e.jsx(Wc,{className:`h-4 w-4 ${U?"animate-spin":""}`}),U?"...":""]}),e.jsx(N,{variant:"outline",size:"sm",asChild:!0,className:"gap-2",children:e.jsxs(Kc,{to:"/logs",children:[e.jsx(Ma,{className:"h-4 w-4"}),""]})}),e.jsx(N,{variant:"outline",size:"sm",asChild:!0,className:"gap-2",children:e.jsxs(Kc,{to:"/plugins",children:[e.jsx(NN,{className:"h-4 w-4"}),""]})}),e.jsx(N,{variant:"outline",size:"sm",asChild:!0,className:"gap-2",children:e.jsxs(Kc,{to:"/settings",children:[e.jsx(Rl,{className:"h-4 w-4"}),""]})})]})})]})]}),e.jsxs("div",{className:"grid gap-4 grid-cols-1 xs:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(Be,{children:[e.jsxs(gs,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(js,{className:"text-sm font-medium",children:""}),e.jsx(bN,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(bs,{children:[e.jsx("div",{className:"text-2xl font-bold",children:ye.total_requests.toLocaleString()}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["",f<48?f+"":Math.floor(f/24)+""]})]})]}),e.jsxs(Be,{children:[e.jsxs(gs,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(js,{className:"text-sm font-medium",children:""}),e.jsx(wN,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(bs,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["",ye.total_cost.toFixed(2)]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:ye.cost_per_hour>0?`${ye.cost_per_hour.toFixed(2)}/`:""})]})]}),e.jsxs(Be,{children:[e.jsxs(gs,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(js,{className:"text-sm font-medium",children:"Token"}),e.jsx(eo,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(bs,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[(ye.total_tokens/1e3).toFixed(1),"K"]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:ye.tokens_per_hour>0?`${(ye.tokens_per_hour/1e3).toFixed(1)}K/`:""})]})]}),e.jsxs(Be,{children:[e.jsxs(gs,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(js,{className:"text-sm font-medium",children:""}),e.jsx(ln,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(bs,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[ye.avg_response_time.toFixed(2),"s"]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"API"})]})]})]}),e.jsxs("div",{className:"grid gap-4 grid-cols-1 sm:grid-cols-3",children:[e.jsxs(Be,{children:[e.jsxs(gs,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(js,{className:"text-sm font-medium",children:""}),e.jsx(Wn,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(bs,{children:e.jsx("div",{className:"text-xl font-bold",children:ve(ye.online_time)})})]}),e.jsxs(Be,{children:[e.jsxs(gs,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(js,{className:"text-sm font-medium",children:""}),e.jsx(si,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(bs,{children:[e.jsx("div",{className:"text-xl font-bold",children:ye.total_messages.toLocaleString()}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[" ",ye.total_replies.toLocaleString()," "]})]})]}),e.jsxs(Be,{children:[e.jsxs(gs,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(js,{className:"text-sm font-medium",children:""}),e.jsx(_N,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(bs,{children:[e.jsx("div",{className:"text-xl font-bold",children:ye.total_messages>0?`${(ye.total_cost/ye.total_messages*100).toFixed(2)}`:"0.00"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"100"})]})]})]}),e.jsxs(Kt,{defaultValue:"trends",className:"space-y-4",children:[e.jsxs(Rt,{className:"grid w-full grid-cols-2 sm:grid-cols-4",children:[e.jsx(He,{value:"trends",children:""}),e.jsx(He,{value:"models",children:""}),e.jsx(He,{value:"activity",children:""}),e.jsx(He,{value:"daily",children:""})]}),e.jsxs(We,{value:"trends",className:"space-y-4",children:[e.jsxs(Be,{children:[e.jsxs(gs,{children:[e.jsx(js,{children:""}),e.jsxs(Zs,{children:["",f,""]})]}),e.jsx(bs,{children:e.jsx(Zn,{config:q,className:"h-[300px] sm:h-[400px] w-full aspect-auto",children:e.jsxs(Wy,{data:te,children:[e.jsx(Gc,{strokeDasharray:"3 3",stroke:"hsl(var(--muted-foreground) / 0.2)"}),e.jsx(Vc,{dataKey:"timestamp",tickFormatter:H=>pe(H),angle:-45,textAnchor:"end",height:60,stroke:"hsl(var(--muted-foreground))",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(tr,{stroke:"hsl(var(--muted-foreground))",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(lr,{content:e.jsx(In,{labelFormatter:H=>pe(H)})}),e.jsx(eN,{type:"monotone",dataKey:"requests",stroke:"var(--color-requests)",strokeWidth:2})]})})})]}),e.jsxs("div",{className:"grid gap-4 grid-cols-1 lg:grid-cols-2",children:[e.jsxs(Be,{children:[e.jsxs(gs,{children:[e.jsx(js,{children:""}),e.jsx(Zs,{children:"API"})]}),e.jsx(bs,{children:e.jsx(Zn,{config:q,className:"h-[250px] sm:h-[300px] w-full aspect-auto",children:e.jsxs(Su,{data:te,children:[e.jsx(Gc,{strokeDasharray:"3 3",stroke:"hsl(var(--muted-foreground) / 0.2)"}),e.jsx(Vc,{dataKey:"timestamp",tickFormatter:H=>pe(H),angle:-45,textAnchor:"end",height:60,stroke:"hsl(var(--muted-foreground))",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(tr,{stroke:"hsl(var(--muted-foreground))",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(lr,{content:e.jsx(In,{labelFormatter:H=>pe(H)})}),e.jsx(Fc,{dataKey:"cost",fill:"var(--color-cost)"})]})})})]}),e.jsxs(Be,{children:[e.jsxs(gs,{children:[e.jsx(js,{children:"Token"}),e.jsx(Zs,{children:"Token"})]}),e.jsx(bs,{children:e.jsx(Zn,{config:q,className:"h-[250px] sm:h-[300px] w-full aspect-auto",children:e.jsxs(Su,{data:te,children:[e.jsx(Gc,{strokeDasharray:"3 3",stroke:"hsl(var(--muted-foreground) / 0.2)"}),e.jsx(Vc,{dataKey:"timestamp",tickFormatter:H=>pe(H),angle:-45,textAnchor:"end",height:60,stroke:"hsl(var(--muted-foreground))",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(tr,{stroke:"hsl(var(--muted-foreground))",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(lr,{content:e.jsx(In,{labelFormatter:H=>pe(H)})}),e.jsx(Fc,{dataKey:"tokens",fill:"var(--color-tokens)"})]})})})]})]})]}),e.jsx(We,{value:"models",className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4 grid-cols-1 lg:grid-cols-2",children:[e.jsxs(Be,{children:[e.jsxs(gs,{children:[e.jsx(js,{children:""}),e.jsxs(Zs,{children:[" ( ",D.length," )"]})]}),e.jsx(bs,{children:e.jsx(Zn,{config:Object.fromEntries(D.map((H,ne)=>[H.model_name,{label:H.model_name,color:Ne[ne]}])),className:"h-[300px] sm:h-[400px] w-full aspect-auto",children:e.jsxs(sN,{children:[e.jsx(lr,{content:e.jsx(In,{})}),e.jsx(tN,{data:y,cx:"50%",cy:"50%",labelLine:!1,label:({name:H,percent:ne})=>ne&&ne<.05?"":`${H} ${ne?(ne*100).toFixed(0):0}%`,outerRadius:100,dataKey:"value",children:y.map((H,ne)=>e.jsx(aN,{fill:H.fill},`cell-${ne}`))})]})})})]}),e.jsxs(Be,{children:[e.jsxs(gs,{children:[e.jsx(js,{children:""}),e.jsx(Zs,{children:""})]}),e.jsx(bs,{children:e.jsx(es,{className:"h-[300px] sm:h-[400px]",children:e.jsx("div",{className:"space-y-3",children:D.map((H,ne)=>e.jsxs("div",{className:"p-4 rounded-lg border bg-card hover:bg-accent/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-semibold text-sm truncate flex-1 min-w-0",children:H.model_name}),e.jsx("div",{className:"w-3 h-3 rounded-full ml-2 flex-shrink-0",style:{backgroundColor:`hsl(var(--chart-${ne%5+1}))`}})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:":"}),e.jsx("span",{className:"ml-1 font-medium",children:H.request_count.toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:":"}),e.jsxs("span",{className:"ml-1 font-medium",children:["",H.total_cost.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Tokens:"}),e.jsxs("span",{className:"ml-1 font-medium",children:[(H.total_tokens/1e3).toFixed(1),"K"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:":"}),e.jsxs("span",{className:"ml-1 font-medium",children:[H.avg_response_time.toFixed(2),"s"]})]})]})]},ne))})})})]})]})}),e.jsx(We,{value:"activity",children:e.jsxs(Be,{children:[e.jsxs(gs,{children:[e.jsx(js,{children:""}),e.jsx(Zs,{children:"API"})]}),e.jsx(bs,{children:e.jsx(es,{className:"h-[400px] sm:h-[500px]",children:e.jsx("div",{className:"space-y-2",children:be.map((H,ne)=>e.jsxs("div",{className:"p-3 sm:p-4 rounded-lg border bg-card hover:bg-accent/50 transition-colors",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-2 mb-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-sm truncate",children:H.model}),e.jsx("div",{className:"text-xs text-muted-foreground",children:H.request_type})]}),e.jsx("div",{className:"text-xs text-muted-foreground flex-shrink-0",children:pe(H.timestamp)})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Tokens:"}),e.jsx("span",{className:"ml-1",children:H.tokens})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:":"}),e.jsxs("span",{className:"ml-1",children:["",H.cost.toFixed(4)]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:":"}),e.jsxs("span",{className:"ml-1",children:[H.time_cost.toFixed(2),"s"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:":"}),e.jsx("span",{className:`ml-1 ${H.status==="success"?"text-green-600":"text-red-600"}`,children:H.status})]})]})]},ne))})})})]})}),e.jsx(We,{value:"daily",children:e.jsxs(Be,{children:[e.jsxs(gs,{children:[e.jsx(js,{children:""}),e.jsx(Zs,{children:"7"})]}),e.jsx(bs,{children:e.jsx(Zn,{config:{requests:{label:"",color:"hsl(var(--chart-1))"},cost:{label:"()",color:"hsl(var(--chart-2))"}},className:"h-[400px] sm:h-[500px] w-full aspect-auto",children:e.jsxs(Su,{data:xe,children:[e.jsx(Gc,{strokeDasharray:"3 3",stroke:"hsl(var(--muted-foreground) / 0.2)"}),e.jsx(Vc,{dataKey:"timestamp",tickFormatter:H=>{const ne=new Date(H);return`${ne.getMonth()+1}/${ne.getDate()}`},stroke:"hsl(var(--muted-foreground))",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(tr,{yAxisId:"left",stroke:"hsl(var(--muted-foreground))",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(tr,{yAxisId:"right",orientation:"right",stroke:"hsl(var(--muted-foreground))",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(lr,{content:e.jsx(In,{labelFormatter:H=>new Date(H).toLocaleDateString("zh-CN")})}),e.jsx(Vb,{content:e.jsx(Cg,{})}),e.jsx(Fc,{yAxisId:"left",dataKey:"requests",fill:"var(--color-requests)"}),e.jsx(Fc,{yAxisId:"right",dataKey:"cost",fill:"var(--color-cost)"})]})})})]})})]})]})})}const Jb={theme:"system",setTheme:()=>null},kg=u.createContext(Jb),Yu=()=>{const n=u.useContext(kg);if(n===void 0)throw new Error("useTheme must be used within a ThemeProvider");return n},Pb=(n,r,c)=>{const d=document.documentElement.classList.contains("no-animations");if(!document.startViewTransition||d){r(n);return}const h=c.clientX,x=c.clientY,f=Math.hypot(Math.max(h,innerWidth-h),Math.max(x,innerHeight-x));document.startViewTransition(()=>{r(n)}).ready.then(()=>{document.documentElement.animate({clipPath:[`circle(0px at ${h}px ${x}px)`,`circle(${f}px at ${h}px ${x}px)`]},{duration:500,easing:"ease-in-out",pseudoElement:"::view-transition-new(root)"})})},Tg=u.createContext(void 0),Eg=()=>{const n=u.useContext(Tg);if(n===void 0)throw new Error("useAnimation must be used within an AnimationProvider");return n},qe=u.forwardRef(({className:n,...r},c)=>e.jsx(Cp,{className:$("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",n),...r,ref:c,children:e.jsx(Dy,{className:$("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));qe.displayName=Cp.displayName;const Wb=ai("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),b=u.forwardRef(({className:n,...r},c)=>e.jsx(Kp,{ref:c,className:$(Wb(),n),...r}));b.displayName=Kp.displayName;const ce=u.forwardRef(({className:n,type:r,...c},d)=>e.jsx("input",{type:r,className:$("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:d,...c}));ce.displayName="Input";const e0=[{id:"minLength",label:" 10 ",description:"Token  10 ",validate:n=>n.length>=10},{id:"hasUppercase",label:"",description:" (A-Z)",validate:n=>/[A-Z]/.test(n)},{id:"hasLowercase",label:"",description:" (a-z)",validate:n=>/[a-z]/.test(n)},{id:"hasSpecialChar",label:"",description:" (!@#$%^&*()_+-=[]{}|;:,.<>?/)",validate:n=>/[!@#$%^&*()_+\-=[\]{}|;:,.<>?/]/.test(n)}];function s0(n){const r=e0.map(d=>({id:d.id,label:d.label,description:d.description,passed:d.validate(n)}));return{isValid:r.every(d=>d.passed),rules:r}}const Xu="0.11.6 Beta",Ku="MaiBot Dashboard",t0=`${Ku} v${Xu}`,a0=(n="v")=>`${n}${Xu}`,_t={THEME:"maibot-ui-theme",ACCENT_COLOR:"accent-color",ENABLE_ANIMATIONS:"maibot-animations",ENABLE_WAVES_BACKGROUND:"maibot-waves-background",LOG_CACHE_SIZE:"maibot-log-cache-size",LOG_AUTO_SCROLL:"maibot-log-auto-scroll",LOG_FONT_SIZE:"maibot-log-font-size",LOG_LINE_SPACING:"maibot-log-line-spacing",DATA_SYNC_INTERVAL:"maibot-data-sync-interval",WS_RECONNECT_INTERVAL:"maibot-ws-reconnect-interval",WS_MAX_RECONNECT_ATTEMPTS:"maibot-ws-max-reconnect-attempts",ACCESS_TOKEN:"access-token",COMPLETED_TOURS:"maibot-completed-tours"},Ea={theme:"system",accentColor:"blue",enableAnimations:!0,enableWavesBackground:!0,logCacheSize:1e3,logAutoScroll:!0,logFontSize:"xs",logLineSpacing:4,dataSyncInterval:30,wsReconnectInterval:3e3,wsMaxReconnectAttempts:10};function Fs(n){const r=zg(n),c=localStorage.getItem(r);if(c===null)return Ea[n];const d=Ea[n];if(typeof d=="boolean")return c==="true";if(typeof d=="number"){const h=parseFloat(c);return isNaN(h)?d:h}return c}function Pn(n,r){const c=zg(n);localStorage.setItem(c,String(r)),window.dispatchEvent(new CustomEvent("maibot-settings-change",{detail:{key:n,value:r}}))}function l0(){return{theme:Fs("theme"),accentColor:Fs("accentColor"),enableAnimations:Fs("enableAnimations"),enableWavesBackground:Fs("enableWavesBackground"),logCacheSize:Fs("logCacheSize"),logAutoScroll:Fs("logAutoScroll"),logFontSize:Fs("logFontSize"),logLineSpacing:Fs("logLineSpacing"),dataSyncInterval:Fs("dataSyncInterval"),wsReconnectInterval:Fs("wsReconnectInterval"),wsMaxReconnectAttempts:Fs("wsMaxReconnectAttempts")}}function n0(){const n=l0(),r=localStorage.getItem(_t.COMPLETED_TOURS),c=r?JSON.parse(r):[];return{...n,completedTours:c}}function i0(n){const r=[],c=[];for(const[d,h]of Object.entries(n)){if(d==="completedTours"){Array.isArray(h)?(localStorage.setItem(_t.COMPLETED_TOURS,JSON.stringify(h)),r.push("completedTours")):c.push("completedTours");continue}if(d in Ea){const x=d,f=Ea[x];if(typeof h==typeof f){if(x==="theme"&&!["light","dark","system"].includes(h)){c.push(d);continue}if(x==="logFontSize"&&!["xs","sm","base"].includes(h)){c.push(d);continue}Pn(x,h),r.push(d)}else c.push(d)}else c.push(d)}return{success:r.length>0,imported:r,skipped:c}}function r0(){for(const n of Object.keys(Ea))Pn(n,Ea[n]);localStorage.removeItem(_t.COMPLETED_TOURS),window.dispatchEvent(new CustomEvent("maibot-settings-reset"))}function c0(){const n=[],r=[],c=new Set([_t.ACCESS_TOKEN]),d=[];for(let h=0;h<localStorage.length;h++){const x=localStorage.key(h);x&&(c.has(x)?r.push(x):(x.startsWith("maibot")||x.startsWith("accent-color"))&&d.push(x))}for(const h of d)localStorage.removeItem(h),n.push(h);return{clearedKeys:n,preservedKeys:r}}function ap(){let n=0;const r=[];for(let c=0;c<localStorage.length;c++){const d=localStorage.key(c);if(d){const h=localStorage.getItem(d)||"",x=(d.length+h.length)*2;n+=x,r.push({key:d,size:x})}}return r.sort((c,d)=>d.size-c.size),{used:n,items:localStorage.length,details:r}}function o0(n){if(n===0)return"0 B";const r=1024,c=["B","KB","MB"],d=Math.floor(Math.log(n)/Math.log(r));return parseFloat((n/Math.pow(r,d)).toFixed(2))+" "+c[d]}function zg(n){return{theme:_t.THEME,accentColor:_t.ACCENT_COLOR,enableAnimations:_t.ENABLE_ANIMATIONS,enableWavesBackground:_t.ENABLE_WAVES_BACKGROUND,logCacheSize:_t.LOG_CACHE_SIZE,logAutoScroll:_t.LOG_AUTO_SCROLL,logFontSize:_t.LOG_FONT_SIZE,logLineSpacing:_t.LOG_LINE_SPACING,dataSyncInterval:_t.DATA_SYNC_INTERVAL,wsReconnectInterval:_t.WS_RECONNECT_INTERVAL,wsMaxReconnectAttempts:_t.WS_MAX_RECONNECT_ATTEMPTS}[n]}const za=u.forwardRef(({className:n,...r},c)=>e.jsxs(kp,{ref:c,className:$("relative flex w-full touch-none select-none items-center",n),...r,children:[e.jsx(Oy,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:e.jsx(Ry,{className:"absolute h-full bg-primary"})}),e.jsx(Ly,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}));za.displayName=kp.displayName;class d0{ws=null;reconnectTimeout=null;reconnectAttempts=0;heartbeatInterval=null;logCallbacks=new Set;connectionCallbacks=new Set;isConnected=!1;logCache=[];getMaxCacheSize(){return Fs("logCacheSize")}getMaxReconnectAttempts(){return Fs("wsMaxReconnectAttempts")}getReconnectInterval(){return Fs("wsReconnectInterval")}getWebSocketUrl(){{const r=window.location.protocol==="https:"?"wss:":"ws:",c=window.location.host;return`${r}//${c}/ws/logs`}}connect(){if(this.ws?.readyState===WebSocket.OPEN||this.ws?.readyState===WebSocket.CONNECTING)return;const r=this.getWebSocketUrl();try{this.ws=new WebSocket(r),this.ws.onopen=()=>{this.isConnected=!0,this.reconnectAttempts=0,this.notifyConnection(!0),this.startHeartbeat()},this.ws.onmessage=c=>{try{if(c.data==="pong")return;const d=JSON.parse(c.data);this.notifyLog(d)}catch(d){console.error(":",d)}},this.ws.onerror=c=>{console.error(" WebSocket :",c),this.isConnected=!1,this.notifyConnection(!1)},this.ws.onclose=()=>{this.isConnected=!1,this.notifyConnection(!1),this.stopHeartbeat(),this.attemptReconnect()}}catch(c){console.error(" WebSocket :",c),this.attemptReconnect()}}attemptReconnect(){const r=this.getMaxReconnectAttempts();if(this.reconnectAttempts>=r)return;this.reconnectAttempts+=1;const c=this.getReconnectInterval(),d=Math.min(c*this.reconnectAttempts,3e4);this.reconnectTimeout=window.setTimeout(()=>{this.connect()},d)}startHeartbeat(){this.heartbeatInterval=window.setInterval(()=>{this.ws?.readyState===WebSocket.OPEN&&this.ws.send("ping")},3e4)}stopHeartbeat(){this.heartbeatInterval!==null&&(clearInterval(this.heartbeatInterval),this.heartbeatInterval=null)}disconnect(){this.reconnectTimeout!==null&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),this.stopHeartbeat(),this.ws&&(this.ws.close(),this.ws=null),this.isConnected=!1,this.reconnectAttempts=0}onLog(r){return this.logCallbacks.add(r),()=>this.logCallbacks.delete(r)}onConnectionChange(r){return this.connectionCallbacks.add(r),r(this.isConnected),()=>this.connectionCallbacks.delete(r)}notifyLog(r){if(!this.logCache.some(d=>d.id===r.id)){this.logCache.push(r);const d=this.getMaxCacheSize();this.logCache.length>d&&(this.logCache=this.logCache.slice(-d)),this.logCallbacks.forEach(h=>{try{h(r)}catch(x){console.error(":",x)}})}}notifyConnection(r){this.connectionCallbacks.forEach(c=>{try{c(r)}catch(d){console.error(":",d)}})}getAllLogs(){return[...this.logCache]}clearLogs(){this.logCache=[]}getConnectionStatus(){return this.isConnected}}const an=new d0;typeof window<"u"&&an.connect();const Os=iN,ni=rN,u0=nN,Zu=Jp,Mg=u.forwardRef(({className:n,...r},c)=>e.jsx(Zp,{ref:c,className:$("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...r}));Mg.displayName=Zp.displayName;const Es=u.forwardRef(({className:n,children:r,preventOutsideClose:c=!1,...d},h)=>e.jsxs(u0,{children:[e.jsx(Mg,{}),e.jsxs(Ip,{ref:h,className:$("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),onPointerDownOutside:c?x=>x.preventDefault():void 0,onInteractOutside:c?x=>x.preventDefault():void 0,...d,children:[r,e.jsxs(Jp,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(li,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Es.displayName=Ip.displayName;const zs=({className:n,...r})=>e.jsx("div",{className:$("flex flex-col space-y-1.5 text-center sm:text-left",n),...r});zs.displayName="DialogHeader";const Is=({className:n,...r})=>e.jsx("div",{className:$("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",n),...r});Is.displayName="DialogFooter";const Ms=u.forwardRef(({className:n,...r},c)=>e.jsx(Pp,{ref:c,className:$("text-lg font-semibold leading-none tracking-tight",n),...r}));Ms.displayName=Pp.displayName;const $s=u.forwardRef(({className:n,...r},c)=>e.jsx(Wp,{ref:c,className:$("text-sm text-muted-foreground",n),...r}));$s.displayName=Wp.displayName;const ps=By,Qs=Hy,m0=Uy,Ag=u.forwardRef(({className:n,...r},c)=>e.jsx(Tp,{className:$("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...r,ref:c}));Ag.displayName=Tp.displayName;const cs=u.forwardRef(({className:n,...r},c)=>e.jsxs(m0,{children:[e.jsx(Ag,{}),e.jsx(Ep,{ref:c,className:$("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...r})]}));cs.displayName=Ep.displayName;const os=({className:n,...r})=>e.jsx("div",{className:$("flex flex-col space-y-2 text-center sm:text-left",n),...r});os.displayName="AlertDialogHeader";const ds=({className:n,...r})=>e.jsx("div",{className:$("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",n),...r});ds.displayName="AlertDialogFooter";const us=u.forwardRef(({className:n,...r},c)=>e.jsx(zp,{ref:c,className:$("text-lg font-semibold",n),...r}));us.displayName=zp.displayName;const ms=u.forwardRef(({className:n,...r},c)=>e.jsx(Mp,{ref:c,className:$("text-sm text-muted-foreground",n),...r}));ms.displayName=Mp.displayName;const hs=u.forwardRef(({className:n,...r},c)=>e.jsx(Ap,{ref:c,className:$(gr(),n),...r}));hs.displayName=Ap.displayName;const xs=u.forwardRef(({className:n,...r},c)=>e.jsx(Dp,{ref:c,className:$(gr({variant:"outline"}),"mt-2 sm:mt-0",n),...r}));xs.displayName=Dp.displayName;function h0(){return e.jsxs("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:""}),e.jsx("p",{className:"text-muted-foreground mt-1 sm:mt-2 text-sm sm:text-base",children:""})]})}),e.jsxs(Kt,{defaultValue:"appearance",className:"w-full",children:[e.jsxs(Rt,{className:"grid w-full grid-cols-2 sm:grid-cols-4 gap-0.5 sm:gap-1 h-auto p-1",children:[e.jsxs(He,{value:"appearance",className:"gap-1 sm:gap-2 text-xs sm:text-sm px-2 sm:px-3 py-2",children:[e.jsx(fg,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4",strokeWidth:2,fill:"none"}),e.jsx("span",{children:""})]}),e.jsxs(He,{value:"security",className:"gap-1 sm:gap-2 text-xs sm:text-sm px-2 sm:px-3 py-2",children:[e.jsx(SN,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4",strokeWidth:2,fill:"none"}),e.jsx("span",{children:""})]}),e.jsxs(He,{value:"other",className:"gap-1 sm:gap-2 text-xs sm:text-sm px-2 sm:px-3 py-2",children:[e.jsx(Rl,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4",strokeWidth:2,fill:"none"}),e.jsx("span",{children:""})]}),e.jsxs(He,{value:"about",className:"gap-1 sm:gap-2 text-xs sm:text-sm px-2 sm:px-3 py-2",children:[e.jsx(Xt,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4",strokeWidth:2,fill:"none"}),e.jsx("span",{children:""})]})]}),e.jsxs(es,{className:"h-[calc(100vh-240px)] sm:h-[calc(100vh-280px)] mt-4 sm:mt-6",children:[e.jsx(We,{value:"appearance",className:"mt-0",children:e.jsx(x0,{})}),e.jsx(We,{value:"security",className:"mt-0",children:e.jsx(f0,{})}),e.jsx(We,{value:"other",className:"mt-0",children:e.jsx(p0,{})}),e.jsx(We,{value:"about",className:"mt-0",children:e.jsx(g0,{})})]})]})]})}function lp(n){const r=document.documentElement,d={blue:{hsl:"221.2 83.2% 53.3%",darkHsl:"217.2 91.2% 59.8%",gradient:null},purple:{hsl:"271 91% 65%",darkHsl:"270 95% 75%",gradient:null},green:{hsl:"142 71% 45%",darkHsl:"142 76% 36%",gradient:null},orange:{hsl:"25 95% 53%",darkHsl:"20 90% 48%",gradient:null},pink:{hsl:"330 81% 60%",darkHsl:"330 85% 70%",gradient:null},red:{hsl:"0 84% 60%",darkHsl:"0 90% 70%",gradient:null},"gradient-sunset":{hsl:"15 95% 60%",darkHsl:"15 95% 65%",gradient:"linear-gradient(135deg, hsl(25 95% 53%) 0%, hsl(330 81% 60%) 100%)"},"gradient-ocean":{hsl:"200 90% 55%",darkHsl:"200 90% 60%",gradient:"linear-gradient(135deg, hsl(221.2 83.2% 53.3%) 0%, hsl(189 94% 43%) 100%)"},"gradient-forest":{hsl:"150 70% 45%",darkHsl:"150 75% 40%",gradient:"linear-gradient(135deg, hsl(142 71% 45%) 0%, hsl(158 64% 52%) 100%)"},"gradient-aurora":{hsl:"310 85% 65%",darkHsl:"310 90% 70%",gradient:"linear-gradient(135deg, hsl(271 91% 65%) 0%, hsl(330 81% 60%) 100%)"},"gradient-fire":{hsl:"15 95% 55%",darkHsl:"15 95% 60%",gradient:"linear-gradient(135deg, hsl(0 84% 60%) 0%, hsl(25 95% 53%) 100%)"},"gradient-twilight":{hsl:"250 90% 60%",darkHsl:"250 95% 65%",gradient:"linear-gradient(135deg, hsl(239 84% 67%) 0%, hsl(271 91% 65%) 100%)"}}[n];if(d)r.style.setProperty("--primary",d.hsl),d.gradient?(r.style.setProperty("--primary-gradient",d.gradient),r.classList.add("has-gradient")):(r.style.removeProperty("--primary-gradient"),r.classList.remove("has-gradient"));else if(n.startsWith("#")){const h=x=>{x=x.replace("#","");const f=parseInt(x.substring(0,2),16)/255,j=parseInt(x.substring(2,4),16)/255,g=parseInt(x.substring(4,6),16)/255,_=Math.max(f,j,g),v=Math.min(f,j,g);let k=0,z=0;const T=(_+v)/2;if(_!==v){const L=_-v;switch(z=T>.5?L/(2-_-v):L/(_+v),_){case f:k=((j-g)/L+(j<g?6:0))/6;break;case j:k=((g-f)/L+2)/6;break;case g:k=((f-j)/L+4)/6;break}}return`${Math.round(k*360)} ${Math.round(z*100)}% ${Math.round(T*100)}%`};r.style.setProperty("--primary",h(n)),r.style.removeProperty("--primary-gradient"),r.classList.remove("has-gradient")}}function x0(){const{theme:n,setTheme:r}=Yu(),{enableAnimations:c,setEnableAnimations:d,enableWavesBackground:h,setEnableWavesBackground:x}=Eg(),[f,j]=u.useState(()=>localStorage.getItem("accent-color")||"blue");u.useEffect(()=>{const _=localStorage.getItem("accent-color")||"blue";lp(_)},[]);const g=_=>{j(_),localStorage.setItem("accent-color",_),lp(_)};return e.jsxs("div",{className:"space-y-6 sm:space-y-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:""}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 sm:gap-4",children:[e.jsx(Au,{value:"light",current:n,onChange:r,label:"",description:""}),e.jsx(Au,{value:"dark",current:n,onChange:r,label:"",description:""}),e.jsx(Au,{value:"system",current:n,onChange:r,label:"",description:""})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:""}),e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs sm:text-sm font-medium mb-2 sm:mb-3",children:""}),e.jsxs("div",{className:"grid grid-cols-3 sm:grid-cols-6 gap-2 sm:gap-3",children:[e.jsx(da,{value:"blue",current:f,onChange:g,label:"",colorClass:"bg-blue-500"}),e.jsx(da,{value:"purple",current:f,onChange:g,label:"",colorClass:"bg-purple-500"}),e.jsx(da,{value:"green",current:f,onChange:g,label:"",colorClass:"bg-green-500"}),e.jsx(da,{value:"orange",current:f,onChange:g,label:"",colorClass:"bg-orange-500"}),e.jsx(da,{value:"pink",current:f,onChange:g,label:"",colorClass:"bg-pink-500"}),e.jsx(da,{value:"red",current:f,onChange:g,label:"",colorClass:"bg-red-500"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs sm:text-sm font-medium mb-2 sm:mb-3",children:""}),e.jsxs("div",{className:"grid grid-cols-3 sm:grid-cols-6 gap-2 sm:gap-3",children:[e.jsx(da,{value:"gradient-sunset",current:f,onChange:g,label:"",colorClass:"bg-gradient-to-r from-orange-500 to-pink-500"}),e.jsx(da,{value:"gradient-ocean",current:f,onChange:g,label:"",colorClass:"bg-gradient-to-r from-blue-500 to-cyan-500"}),e.jsx(da,{value:"gradient-forest",current:f,onChange:g,label:"",colorClass:"bg-gradient-to-r from-green-500 to-emerald-500"}),e.jsx(da,{value:"gradient-aurora",current:f,onChange:g,label:"",colorClass:"bg-gradient-to-r from-purple-500 to-pink-500"}),e.jsx(da,{value:"gradient-fire",current:f,onChange:g,label:"",colorClass:"bg-gradient-to-r from-red-500 to-orange-500"}),e.jsx(da,{value:"gradient-twilight",current:f,onChange:g,label:"",colorClass:"bg-gradient-to-r from-indigo-500 to-purple-500"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs sm:text-sm font-medium mb-2 sm:mb-3",children:""}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"color",value:f.startsWith("#")?f:"#3b82f6",onChange:_=>g(_.target.value),className:"h-10 sm:h-12 w-full rounded-lg border-2 border-border cursor-pointer",title:""})}),e.jsx("div",{className:"flex-1",children:e.jsx(ce,{type:"text",value:f,onChange:_=>g(_.target.value),placeholder:"#3b82f6",className:"font-mono text-sm"})})]}),e.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground mt-2",children:" HEX "})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:""}),e.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[e.jsx("div",{className:"rounded-lg border bg-card p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5 flex-1",children:[e.jsx(b,{htmlFor:"animations",className:"text-base font-medium cursor-pointer",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),e.jsx(qe,{id:"animations",checked:c,onCheckedChange:d})]})}),e.jsx("div",{className:"rounded-lg border bg-card p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5 flex-1",children:[e.jsx(b,{htmlFor:"waves-background",className:"text-base font-medium cursor-pointer",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),e.jsx(qe,{id:"waves-background",checked:h,onCheckedChange:x})]})})]})]})]})}function f0(){const n=It(),[r,c]=u.useState(""),[d,h]=u.useState(""),[x,f]=u.useState(!1),[j,g]=u.useState(!1),[_,v]=u.useState(!1),[k,z]=u.useState(!1),[T,L]=u.useState(!1),[K,U]=u.useState(!1),[R,ee]=u.useState(""),[V,E]=u.useState(!1),{toast:B}=Bs(),X=u.useMemo(()=>s0(d),[d]),w=()=>localStorage.getItem("access-token")||"",D=async pe=>{try{await navigator.clipboard.writeText(pe),L(!0),B({title:"",description:"Token "}),setTimeout(()=>L(!1),2e3)}catch{B({title:"",description:" Token",variant:"destructive"})}},te=async()=>{if(!d.trim()){B({title:"",description:" Token",variant:"destructive"});return}if(!X.isValid){const pe=X.rules.filter(Ne=>!Ne.passed).map(Ne=>Ne.label).join(", ");B({title:"",description:`Token : ${pe}`,variant:"destructive"});return}v(!0);try{const pe=w(),Ne=await fetch("/api/webui/auth/update",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${pe}`},body:JSON.stringify({new_token:d.trim()})}),y=await Ne.json();Ne.ok&&y.success?(localStorage.setItem("access-token",d.trim()),h(""),r&&c(d.trim()),B({title:"",description:"Access Token "}),setTimeout(()=>{localStorage.removeItem("access-token"),n({to:"/auth"})},1500)):B({title:"",description:y.message||" Token",variant:"destructive"})}catch(pe){console.error(" Token :",pe),B({title:"",description:"",variant:"destructive"})}finally{v(!1)}},xe=async()=>{z(!0);try{const pe=w(),Ne=await fetch("/api/webui/auth/regenerate",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${pe}`}}),y=await Ne.json();Ne.ok&&y.success?(localStorage.setItem("access-token",y.token),c(y.token),ee(y.token),U(!0),E(!1),B({title:"",description:" Access Token "})):B({title:"",description:y.message||" Token",variant:"destructive"})}catch(pe){console.error(" Token :",pe),B({title:"",description:"",variant:"destructive"})}finally{z(!1)}},be=async()=>{try{await navigator.clipboard.writeText(R),E(!0),B({title:"",description:"Token "})}catch{B({title:"",description:" Token",variant:"destructive"})}},ye=()=>{U(!1),setTimeout(()=>{ee(""),E(!1)},300),setTimeout(()=>{localStorage.removeItem("access-token"),n({to:"/auth"})},500)},ve=pe=>{pe||ye()};return e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsx(Os,{open:K,onOpenChange:ve,children:e.jsxs(Es,{className:"sm:max-w-md",children:[e.jsxs(zs,{children:[e.jsxs(Ms,{className:"flex items-center gap-2",children:[e.jsx(ya,{className:"h-5 w-5 text-yellow-500"})," Access Token"]}),e.jsx($s,{children:" Token"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"rounded-lg border-2 border-primary/20 bg-primary/5 p-4",children:[e.jsx(b,{className:"text-xs text-muted-foreground mb-2 block",children:" Token (64)"}),e.jsx("div",{className:"font-mono text-sm break-all select-all bg-background p-3 rounded border",children:R})]}),e.jsx("div",{className:"rounded-lg border border-yellow-200 dark:border-yellow-900 bg-yellow-50 dark:bg-yellow-950/30 p-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ya,{className:"h-4 w-4 text-yellow-600 dark:text-yellow-500 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-yellow-800 dark:text-yellow-300 space-y-1",children:[e.jsx("p",{className:"font-semibold",children:""}),e.jsxs("ul",{className:"list-disc list-inside space-y-0.5 text-xs",children:[e.jsx("li",{children:" Token "}),e.jsx("li",{children:""}),e.jsx("li",{children:""}),e.jsx("li",{children:" Token "})]})]})]})})]}),e.jsxs(Is,{className:"gap-2 sm:gap-0",children:[e.jsx(N,{variant:"outline",onClick:be,className:"gap-2",children:V?e.jsxs(e.Fragment,{children:[e.jsx(ha,{className:"h-4 w-4 text-green-500"}),""]}):e.jsxs(e.Fragment,{children:[e.jsx(so,{className:"h-4 w-4"})," Token"]})}),e.jsx(N,{onClick:ye,children:""})]})]})}),e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:" Access Token"}),e.jsx("div",{className:"space-y-3 sm:space-y-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"current-token",className:"text-sm",children:""}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ce,{id:"current-token",type:x?"text":"password",value:r||w(),readOnly:!0,className:"pr-10 font-mono text-sm",placeholder:" Token"}),e.jsx("button",{onClick:()=>{r||c(w()),f(!x)},className:"absolute right-2 top-1/2 -translate-y-1/2 p-1.5 hover:bg-accent rounded",title:x?"":"",children:x?e.jsx(mr,{className:"h-4 w-4 text-muted-foreground"}):e.jsx(Zt,{className:"h-4 w-4 text-muted-foreground"})})]}),e.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[e.jsx(N,{variant:"outline",size:"icon",onClick:()=>D(w()),title:"",className:"flex-shrink-0",children:T?e.jsx(ha,{className:"h-4 w-4 text-green-500"}):e.jsx(so,{className:"h-4 w-4"})}),e.jsxs(ps,{children:[e.jsx(Qs,{asChild:!0,children:e.jsxs(N,{variant:"outline",disabled:k,className:"gap-2 flex-1 sm:flex-none",children:[e.jsx(ft,{className:$("h-4 w-4",k&&"animate-spin")}),e.jsx("span",{className:"hidden sm:inline",children:""}),e.jsx("span",{className:"sm:hidden",children:""})]})}),e.jsxs(cs,{children:[e.jsxs(os,{children:[e.jsx(us,{children:" Token"}),e.jsx(ms,{children:" 64  Token   Token "})]}),e.jsxs(ds,{children:[e.jsx(xs,{children:""}),e.jsx(hs,{onClick:xe,children:""})]})]})]})]})]}),e.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:" Access Token"})]})})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:" Access Token"}),e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"new-token",className:"text-sm",children:""}),e.jsxs("div",{className:"relative",children:[e.jsx(ce,{id:"new-token",type:j?"text":"password",value:d,onChange:pe=>h(pe.target.value),className:"pr-10 font-mono text-sm",placeholder:" Token"}),e.jsx("button",{onClick:()=>g(!j),className:"absolute right-2 top-1/2 -translate-y-1/2 p-1.5 hover:bg-accent rounded",title:j?"":"",children:j?e.jsx(mr,{className:"h-4 w-4 text-muted-foreground"}):e.jsx(Zt,{className:"h-4 w-4 text-muted-foreground"})})]}),d&&e.jsxs("div",{className:"mt-3 space-y-2 p-3 rounded-lg bg-muted/50",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:"Token :"}),e.jsx("div",{className:"space-y-1.5",children:X.rules.map(pe=>e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[pe.passed?e.jsx(xa,{className:"h-4 w-4 text-green-500 flex-shrink-0"}):e.jsx(pg,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),e.jsx("span",{className:$(pe.passed?"text-green-600 dark:text-green-400":"text-muted-foreground"),children:pe.label})]},pe.id))}),X.isValid&&e.jsx("div",{className:"mt-2 pt-2 border-t border-border",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-600 dark:text-green-400",children:[e.jsx(ha,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:"Token "})]})})]})]}),e.jsx(N,{onClick:te,disabled:_||!X.isValid||!d,className:"w-full sm:w-auto",children:_?"...":" Token"})]})]}),e.jsxs("div",{className:"rounded-lg border border-yellow-200 dark:border-yellow-900 bg-yellow-50 dark:bg-yellow-950/30 p-3 sm:p-4",children:[e.jsx("h4",{className:"text-sm sm:text-base font-semibold text-yellow-900 dark:text-yellow-200 mb-2",children:""}),e.jsxs("ul",{className:"text-xs sm:text-sm text-yellow-800 dark:text-yellow-300 space-y-1 list-disc list-inside",children:[e.jsx("li",{children:" Token  64 "}),e.jsx("li",{children:" Token "}),e.jsx("li",{children:" Token  Token "}),e.jsx("li",{children:" Token"}),e.jsx("li",{children:" Token "}),e.jsx("li",{children:" Token "})]})]})]})}function p0(){const n=It(),{toast:r}=Bs(),[c,d]=u.useState(!1),[h,x]=u.useState(!1),[f,j]=u.useState(()=>Fs("logCacheSize")),[g,_]=u.useState(()=>Fs("wsReconnectInterval")),[v,k]=u.useState(()=>Fs("wsMaxReconnectAttempts")),[z,T]=u.useState(()=>Fs("dataSyncInterval")),[L,K]=u.useState(()=>ap()),[U,R]=u.useState(!1),[ee,V]=u.useState(!1),E=u.useRef(null);if(h)throw new Error("");const B=()=>{K(ap())},X=y=>{const q=y[0];j(q),Pn("logCacheSize",q)},w=y=>{const q=y[0];_(q),Pn("wsReconnectInterval",q)},D=y=>{const q=y[0];k(q),Pn("wsMaxReconnectAttempts",q)},te=y=>{const q=y[0];T(q),Pn("dataSyncInterval",q)},xe=()=>{an.clearLogs(),r({title:"",description:""})},be=()=>{const y=c0();B(),r({title:"",description:` ${y.clearedKeys.length} `})},ye=()=>{R(!0);try{const y=n0(),q=JSON.stringify(y,null,2),H=new Blob([q],{type:"application/json"}),ne=URL.createObjectURL(H),S=document.createElement("a");S.href=ne,S.download=`maibot-webui-settings-${new Date().toISOString().slice(0,10)}.json`,document.body.appendChild(S),S.click(),document.body.removeChild(S),URL.revokeObjectURL(ne),r({title:"",description:" JSON "})}catch(y){console.error(":",y),r({title:"",description:"",variant:"destructive"})}finally{R(!1)}},ve=y=>{const q=y.target.files?.[0];if(!q)return;V(!0);const H=new FileReader;H.onload=ne=>{try{const S=ne.target?.result,me=JSON.parse(S),he=i0(me);he.success?(j(Fs("logCacheSize")),_(Fs("wsReconnectInterval")),k(Fs("wsMaxReconnectAttempts")),T(Fs("dataSyncInterval")),B(),r({title:"",description:` ${he.imported.length} ${he.skipped.length>0?` ${he.skipped.length} `:""}`}),(he.imported.includes("theme")||he.imported.includes("accentColor"))&&r({title:"",description:""})):r({title:"",description:"",variant:"destructive"})}catch(S){console.error(":",S),r({title:"",description:"",variant:"destructive"})}finally{V(!1),E.current&&(E.current.value="")}},H.readAsText(q)},pe=()=>{r0(),j(Ea.logCacheSize),_(Ea.wsReconnectInterval),k(Ea.wsMaxReconnectAttempts),T(Ea.dataSyncInterval),B(),r({title:"",description:""})},Ne=async()=>{d(!0);try{const y=localStorage.getItem("access-token"),q=await fetch("/api/webui/setup/reset",{method:"POST",headers:{Authorization:`Bearer ${y}`}}),H=await q.json();q.ok&&H.success?(r({title:"",description:""}),setTimeout(()=>{n({to:"/setup"})},1e3)):r({title:"",description:H.message||"",variant:"destructive"})}catch(y){console.error(":",y),r({title:"",description:"",variant:"destructive"})}finally{d(!1)}};return e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6",children:[e.jsxs("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4 flex items-center gap-2",children:[e.jsx(eo,{className:"h-5 w-5"}),""]}),e.jsxs("div",{className:"space-y-4 sm:space-y-5",children:[e.jsxs("div",{className:"rounded-lg bg-muted/50 p-3 sm:p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(CN,{className:"h-4 w-4"}),""]}),e.jsx(N,{variant:"ghost",size:"sm",onClick:B,className:"h-7 px-2",children:e.jsx(ft,{className:"h-3 w-3"})})]}),e.jsx("div",{className:"text-2xl font-bold text-primary",children:o0(L.used)}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[L.items," "]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(b,{className:"text-sm font-medium",children:""}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[f," "]})]}),e.jsx(za,{value:[f],onValueChange:X,min:100,max:5e3,step:100,className:"w-full"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(b,{className:"text-sm font-medium",children:""}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[z," "]})]}),e.jsx(za,{value:[z],onValueChange:te,min:10,max:120,step:5,className:"w-full"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(b,{className:"text-sm font-medium",children:"WebSocket "}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[g/1e3," "]})]}),e.jsx(za,{value:[g],onValueChange:w,min:1e3,max:1e4,step:500,className:"w-full"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" WebSocket "})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(b,{className:"text-sm font-medium",children:"WebSocket "}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[v," "]})]}),e.jsx(za,{value:[v],onValueChange:D,min:3,max:30,step:1,className:"w-full"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 pt-2",children:[e.jsxs(N,{variant:"outline",size:"sm",onClick:xe,className:"gap-2",children:[e.jsx(ns,{className:"h-4 w-4"}),""]}),e.jsxs(ps,{children:[e.jsx(Qs,{asChild:!0,children:e.jsxs(N,{variant:"outline",size:"sm",className:"gap-2",children:[e.jsx(ns,{className:"h-4 w-4"}),""]})}),e.jsxs(cs,{children:[e.jsxs(os,{children:[e.jsx(us,{children:""}),e.jsx(ms,{children:" "})]}),e.jsxs(ds,{children:[e.jsx(xs,{children:""}),e.jsx(hs,{onClick:be,children:""})]})]})]})]})]})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6",children:[e.jsxs("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4 flex items-center gap-2",children:[e.jsx(nl,{className:"h-5 w-5"}),"/"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:""}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(N,{variant:"outline",onClick:ye,disabled:U,className:"gap-2",children:[e.jsx(nl,{className:"h-4 w-4"}),U?"...":""]}),e.jsx("input",{ref:E,type:"file",accept:".json",onChange:ve,className:"hidden"}),e.jsxs(N,{variant:"outline",onClick:()=>E.current?.click(),disabled:ee,className:"gap-2",children:[e.jsx(hr,{className:"h-4 w-4"}),ee?"...":""]})]}),e.jsx("div",{className:"pt-2 border-t",children:e.jsxs(ps,{children:[e.jsx(Qs,{asChild:!0,children:e.jsxs(N,{variant:"outline",size:"sm",className:"gap-2 text-destructive hover:text-destructive",children:[e.jsx(Wc,{className:"h-4 w-4"}),""]})}),e.jsxs(cs,{children:[e.jsxs(os,{children:[e.jsx(us,{children:""}),e.jsx(ms,{children:" "})]}),e.jsxs(ds,{children:[e.jsx(xs,{children:""}),e.jsx(hs,{onClick:pe,children:""})]})]})]})})]})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:""}),e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsx("div",{className:"space-y-2",children:e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:""})}),e.jsxs(ps,{children:[e.jsx(Qs,{asChild:!0,children:e.jsxs(N,{variant:"outline",disabled:c,className:"gap-2",children:[e.jsx(Wc,{className:$("h-4 w-4",c&&"animate-spin")}),""]})}),e.jsxs(cs,{children:[e.jsxs(os,{children:[e.jsx(us,{children:""}),e.jsx(ms,{children:""})]}),e.jsxs(ds,{children:[e.jsx(xs,{children:""}),e.jsx(hs,{onClick:Ne,children:""})]})]})]})]})]}),e.jsxs("div",{className:"rounded-lg border border-dashed border-yellow-500/50 bg-yellow-500/5 p-4 sm:p-6",children:[e.jsxs("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4 flex items-center gap-2",children:[e.jsx(ya,{className:"h-5 w-5 text-yellow-500"}),""]}),e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsx("div",{className:"space-y-2",children:e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:""})}),e.jsxs(ps,{children:[e.jsx(Qs,{asChild:!0,children:e.jsxs(N,{variant:"destructive",className:"gap-2",children:[e.jsx(ya,{className:"h-4 w-4"}),""]})}),e.jsxs(cs,{children:[e.jsxs(os,{children:[e.jsx(us,{children:""}),e.jsx(ms,{children:" React  "})]}),e.jsxs(ds,{children:[e.jsx(xs,{children:""}),e.jsx(hs,{onClick:()=>x(!0),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:""})]})]})]})]})]})]})}function g0(){return e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsx("div",{className:"rounded-lg border-2 border-primary/30 bg-gradient-to-r from-primary/5 to-primary/10 p-4 sm:p-6",children:e.jsxs("div",{className:"flex items-start gap-3 sm:gap-4",children:[e.jsx("div",{className:"flex-shrink-0 rounded-lg bg-primary/10 p-2 sm:p-3",children:e.jsx("svg",{className:"h-6 w-6 sm:h-8 sm:w-8 text-primary",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-foreground mb-2",children:""}),e.jsx("p",{className:"text-sm sm:text-base text-muted-foreground mb-3",children:" GitHub  Star  "}),e.jsxs("a",{href:"https://github.com/Mai-with-u/MaiBot-Dashboard",target:"_blank",rel:"noopener noreferrer",className:$("inline-flex items-center gap-2 px-4 py-2 rounded-lg","bg-primary text-primary-foreground font-medium text-sm","hover:bg-primary/90 transition-colors","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"),children:[e.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z",clipRule:"evenodd"})})," GitHub",e.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})]})]})}),e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6",children:[e.jsxs("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:[" ",Ku]}),e.jsxs("div",{className:"space-y-2 text-xs sm:text-sm text-muted-foreground",children:[e.jsxs("p",{children:[": ",Xu]}),e.jsx("p",{children:"MaiBot Web "})]})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:""}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"MaiBot "}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Mai-with-u"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"WebUI"}),e.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground",children:["Mai-with-u ",e.jsx("a",{href:"https://github.com/DrSmoothl",target:"_blank",rel:"noopener noreferrer",className:"text-primary underline",children:"@MotricSeven"})]})]})]})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:""}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-xs sm:text-sm text-muted-foreground",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("p",{className:"font-medium text-foreground",children:""}),e.jsxs("ul",{className:"space-y-0.5 list-disc list-inside",children:[e.jsx("li",{children:"React 19.2.0"}),e.jsx("li",{children:"TypeScript 5.7.2"}),e.jsx("li",{children:"Vite 6.0.7"}),e.jsx("li",{children:"TanStack Router 1.94.2"})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("p",{className:"font-medium text-foreground",children:"UI "}),e.jsxs("ul",{className:"space-y-0.5 list-disc list-inside",children:[e.jsx("li",{children:"shadcn/ui"}),e.jsx("li",{children:"Radix UI"}),e.jsx("li",{children:"Tailwind CSS 3.4.17"}),e.jsx("li",{children:"Lucide Icons"})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("p",{className:"font-medium text-foreground",children:""}),e.jsxs("ul",{className:"space-y-0.5 list-disc list-inside",children:[e.jsx("li",{children:"Python 3.12+"}),e.jsx("li",{children:"FastAPI"}),e.jsx("li",{children:"Uvicorn"}),e.jsx("li",{children:"WebSocket"})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("p",{className:"font-medium text-foreground",children:""}),e.jsxs("ul",{className:"space-y-0.5 list-disc list-inside",children:[e.jsx("li",{children:"Bun / npm"}),e.jsx("li",{children:"ESLint 9.17.0"}),e.jsx("li",{children:"PostCSS"})]})]})]})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:""}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mb-3",children:""}),e.jsx(es,{className:"h-[300px] sm:h-[400px]",children:e.jsxs("div",{className:"space-y-4 pr-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:"UI "}),e.jsxs("div",{className:"grid gap-2 text-xs sm:text-sm",children:[e.jsx(Hs,{name:"React",description:"",license:"MIT"}),e.jsx(Hs,{name:"shadcn/ui",description:" React ",license:"MIT"}),e.jsx(Hs,{name:"Radix UI",description:"",license:"MIT"}),e.jsx(Hs,{name:"Tailwind CSS",description:" CSS ",license:"MIT"}),e.jsx(Hs,{name:"Lucide React",description:"",license:"ISC"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:""}),e.jsxs("div",{className:"grid gap-2 text-xs sm:text-sm",children:[e.jsx(Hs,{name:"TanStack Router",description:"",license:"MIT"}),e.jsx(Hs,{name:"Zustand",description:"",license:"MIT"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:""}),e.jsxs("div",{className:"grid gap-2 text-xs sm:text-sm",children:[e.jsx(Hs,{name:"React Hook Form",description:"",license:"MIT"}),e.jsx(Hs,{name:"Zod",description:"TypeScript  schema ",license:"MIT"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:""}),e.jsxs("div",{className:"grid gap-2 text-xs sm:text-sm",children:[e.jsx(Hs,{name:"clsx",description:" className ",license:"MIT"}),e.jsx(Hs,{name:"tailwind-merge",description:"Tailwind ",license:"MIT"}),e.jsx(Hs,{name:"class-variance-authority",description:"",license:"Apache-2.0"}),e.jsx(Hs,{name:"date-fns",description:"",license:"MIT"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:""}),e.jsxs("div",{className:"grid gap-2 text-xs sm:text-sm",children:[e.jsx(Hs,{name:"Framer Motion",description:"React ",license:"MIT"}),e.jsx(Hs,{name:"vaul",description:"",license:"MIT"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:""}),e.jsxs("div",{className:"grid gap-2 text-xs sm:text-sm",children:[e.jsx(Hs,{name:"FastAPI",description:" Python Web ",license:"MIT"}),e.jsx(Hs,{name:"Uvicorn",description:"ASGI ",license:"BSD-3-Clause"}),e.jsx(Hs,{name:"Pydantic",description:"",license:"MIT"}),e.jsx(Hs,{name:"python-multipart",description:"",license:"Apache-2.0"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:""}),e.jsxs("div",{className:"grid gap-2 text-xs sm:text-sm",children:[e.jsx(Hs,{name:"TypeScript",description:"JavaScript ",license:"Apache-2.0"}),e.jsx(Hs,{name:"Vite",description:"",license:"MIT"}),e.jsx(Hs,{name:"ESLint",description:"JavaScript ",license:"MIT"}),e.jsx(Hs,{name:"PostCSS",description:"CSS ",license:"MIT"})]})]})]})})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:""}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"rounded-lg bg-primary/5 border border-primary/20 p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-start gap-2 sm:gap-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:e.jsx("div",{className:"rounded-md bg-primary/10 px-2 py-1",children:e.jsx("span",{className:"text-xs sm:text-sm font-bold text-primary",children:"GPLv3"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm sm:text-base font-semibold text-foreground mb-1",children:"MaiBot WebUI"}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:" GNU General Public License v3.0  "})]})]})}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"MITApache-2.0BSD  "})]})]})]})}function Hs({name:n,description:r,license:c}){return e.jsxs("div",{className:"flex items-start justify-between gap-2 rounded-lg border bg-muted/30 p-2.5 sm:p-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-foreground truncate",children:n}),e.jsx("p",{className:"text-muted-foreground text-xs mt-0.5",children:r})]}),e.jsx("span",{className:"inline-flex items-center rounded-full bg-primary/10 px-2 py-0.5 text-[10px] font-medium text-primary flex-shrink-0",children:c})]})}function Au({value:n,current:r,onChange:c,label:d,description:h}){const x=r===n;return e.jsxs("button",{onClick:()=>c(n),className:$("relative rounded-lg border-2 p-3 sm:p-4 text-left transition-all","hover:border-primary/50 hover:bg-accent/50",x?"border-primary bg-accent":"border-border"),children:[x&&e.jsx("div",{className:"absolute top-2 right-2 sm:top-3 sm:right-3 h-2 w-2 rounded-full bg-primary"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-sm sm:text-base font-medium",children:d}),e.jsx("div",{className:"text-[10px] sm:text-xs text-muted-foreground",children:h})]}),e.jsxs("div",{className:"mt-2 sm:mt-3 flex gap-1",children:[n==="light"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-slate-200"}),e.jsx("div",{className:"h-2 w-2 rounded-full bg-slate-300"}),e.jsx("div",{className:"h-2 w-2 rounded-full bg-slate-400"})]}),n==="dark"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-slate-700"}),e.jsx("div",{className:"h-2 w-2 rounded-full bg-slate-800"}),e.jsx("div",{className:"h-2 w-2 rounded-full bg-slate-900"})]}),n==="system"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-gradient-to-r from-slate-200 to-slate-700"}),e.jsx("div",{className:"h-2 w-2 rounded-full bg-gradient-to-r from-slate-300 to-slate-800"}),e.jsx("div",{className:"h-2 w-2 rounded-full bg-gradient-to-r from-slate-400 to-slate-900"})]})]})]})}function da({value:n,current:r,onChange:c,label:d,colorClass:h}){const x=r===n;return e.jsxs("button",{onClick:()=>c(n),className:$("relative rounded-lg border-2 p-2 sm:p-3 text-left transition-all","hover:border-primary/50 hover:bg-accent/50",x?"border-primary bg-accent":"border-border"),children:[x&&e.jsx("div",{className:"absolute top-1.5 right-1.5 sm:top-2 sm:right-2 h-1.5 w-1.5 sm:h-2 sm:w-2 rounded-full bg-primary"}),e.jsxs("div",{className:"flex flex-col items-center gap-1.5 sm:gap-2",children:[e.jsx("div",{className:$("h-8 w-8 sm:h-10 sm:w-10 rounded-full",h)}),e.jsx("div",{className:"text-[10px] sm:text-xs font-medium text-center",children:d})]})]})}class j0{grad3;p;perm;constructor(r=0){this.grad3=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],this.p=[];for(let c=0;c<256;c++)this.p[c]=Math.floor(Math.random()*256);this.perm=[];for(let c=0;c<512;c++)this.perm[c]=this.p[c&255]}dot(r,c,d){return r[0]*c+r[1]*d}mix(r,c,d){return(1-d)*r+d*c}fade(r){return r*r*r*(r*(r*6-15)+10)}perlin2(r,c){const d=Math.floor(r)&255,h=Math.floor(c)&255;r-=Math.floor(r),c-=Math.floor(c);const x=this.fade(r),f=this.fade(c),j=this.perm[d]+h,g=this.perm[j],_=this.perm[j+1],v=this.perm[d+1]+h,k=this.perm[v],z=this.perm[v+1];return this.mix(this.mix(this.dot(this.grad3[g%12],r,c),this.dot(this.grad3[k%12],r-1,c),x),this.mix(this.dot(this.grad3[_%12],r,c-1),this.dot(this.grad3[z%12],r-1,c-1),x),f)}}function v0(){const n=u.useRef(null),r=u.useRef(null),c=u.useRef(void 0),d=u.useRef({mouse:{x:-10,y:0,lx:0,ly:0,sx:0,sy:0,v:0,vs:0,a:0,set:!1},lines:[],paths:[],noise:new j0(Math.random()),bounding:null});return u.useEffect(()=>{const h=r.current,x=n.current;if(!h||!x)return;const f=d.current,j=()=>{const K=h.getBoundingClientRect();f.bounding=K,x.style.width=`${K.width}px`,x.style.height=`${K.height}px`},g=()=>{if(!f.bounding)return;const{width:K,height:U}=f.bounding;f.lines=[],f.paths.forEach(te=>te.remove()),f.paths=[];const R=10,ee=32,V=K+200,E=U+30,B=Math.ceil(V/R),X=Math.ceil(E/ee),w=(K-R*B)/2,D=(U-ee*X)/2;for(let te=0;te<=B;te++){const xe=[];for(let ye=0;ye<=X;ye++){const ve={x:w+R*te,y:D+ee*ye,wave:{x:0,y:0},cursor:{x:0,y:0,vx:0,vy:0}};xe.push(ve)}const be=document.createElementNS("http://www.w3.org/2000/svg","path");x.appendChild(be),f.paths.push(be),f.lines.push(xe)}},_=K=>{const{lines:U,mouse:R,noise:ee}=f;U.forEach(V=>{V.forEach(E=>{const B=ee.perlin2((E.x+K*.0125)*.002,(E.y+K*.005)*.0015)*12;E.wave.x=Math.cos(B)*32,E.wave.y=Math.sin(B)*16;const X=E.x-R.sx,w=E.y-R.sy,D=Math.hypot(X,w),te=Math.max(175,R.vs);if(D<te){const xe=1-D/te,be=Math.cos(D*.001)*xe;E.cursor.vx+=Math.cos(R.a)*be*te*R.vs*65e-5,E.cursor.vy+=Math.sin(R.a)*be*te*R.vs*65e-5}E.cursor.vx+=(0-E.cursor.x)*.005,E.cursor.vy+=(0-E.cursor.y)*.005,E.cursor.vx*=.925,E.cursor.vy*=.925,E.cursor.x+=E.cursor.vx*2,E.cursor.y+=E.cursor.vy*2,E.cursor.x=Math.min(100,Math.max(-100,E.cursor.x)),E.cursor.y=Math.min(100,Math.max(-100,E.cursor.y))})})},v=(K,U=!0)=>{const R={x:K.x+K.wave.x+(U?K.cursor.x:0),y:K.y+K.wave.y+(U?K.cursor.y:0)};return R.x=Math.round(R.x*10)/10,R.y=Math.round(R.y*10)/10,R},k=()=>{const{lines:K,paths:U}=f;K.forEach((R,ee)=>{let V=v(R[0],!1),E=`M ${V.x} ${V.y}`;R.forEach((B,X)=>{const w=X===R.length-1;V=v(B,!w),E+=`L ${V.x} ${V.y}`}),U[ee].setAttribute("d",E)})},z=K=>{const{mouse:U}=f;U.sx+=(U.x-U.sx)*.1,U.sy+=(U.y-U.sy)*.1;const R=U.x-U.lx,ee=U.y-U.ly,V=Math.hypot(R,ee);U.v=V,U.vs+=(V-U.vs)*.1,U.vs=Math.min(100,U.vs),U.lx=U.x,U.ly=U.y,U.a=Math.atan2(ee,R),h&&(h.style.setProperty("--x",`${U.sx}px`),h.style.setProperty("--y",`${U.sy}px`)),_(K),k(),c.current=requestAnimationFrame(z)},T=K=>{if(!f.bounding)return;const{mouse:U}=f;U.x=K.pageX-f.bounding.left,U.y=K.pageY-f.bounding.top+window.scrollY,U.set||(U.sx=U.x,U.sy=U.y,U.lx=U.x,U.ly=U.y,U.set=!0)},L=()=>{j(),g()};return j(),g(),window.addEventListener("resize",L),window.addEventListener("mousemove",T),c.current=requestAnimationFrame(z),()=>{window.removeEventListener("resize",L),window.removeEventListener("mousemove",T),c.current&&cancelAnimationFrame(c.current)}},[]),e.jsxs("div",{ref:r,className:"waves-background",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",overflow:"hidden",pointerEvents:"none"},children:[e.jsx("div",{className:"waves-cursor",style:{position:"absolute",top:0,left:0,width:"0.5rem",height:"0.5rem",background:"hsl(var(--primary) / 0.3)",borderRadius:"50%",transform:"translate3d(calc(var(--x, -0.5rem) - 50%), calc(var(--y, 50%) - 50%), 0)",willChange:"transform",pointerEvents:"none"}}),e.jsx("svg",{ref:n,style:{display:"block",width:"100%",height:"100%"},children:e.jsx("style",{children:`
          path {
            fill: none;
            stroke: hsl(var(--primary) / 0.20);
            stroke-width: 1px;
          }
        `})})]})}function y0(){const n=It();u.useEffect(()=>{localStorage.getItem("access-token")||n({to:"/auth"})},[n])}function Dg(){return!!localStorage.getItem("access-token")}function N0(){const[n,r]=u.useState(""),[c,d]=u.useState(!1),[h,x]=u.useState(""),f=It(),{enableWavesBackground:j,setEnableWavesBackground:g}=Eg(),{theme:_,setTheme:v}=Yu();u.useEffect(()=>{Dg()&&f({to:"/"})},[f]);const z=_==="system"?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":_,T=()=>{v(z==="dark"?"light":"dark")},L=async K=>{if(K.preventDefault(),x(""),!n.trim()){x(" Access Token");return}d(!0);try{const U=await fetch("/api/webui/auth/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:n.trim()})}),R=await U.json();if(U.ok&&R.valid){localStorage.setItem("access-token",n.trim());const ee=await fetch("/api/webui/setup/status",{method:"GET",headers:{Authorization:`Bearer ${n.trim()}`}}),V=await ee.json();ee.ok&&V.is_first_setup?f({to:"/setup"}):f({to:"/"})}else x(R.message||"Token ")}catch(U){console.error("Token :",U),x("")}finally{d(!1)}};return e.jsxs("div",{className:"relative flex min-h-screen items-center justify-center overflow-hidden bg-background p-4",children:[j&&e.jsx(v0,{}),e.jsxs(Be,{className:"relative z-10 w-full max-w-md shadow-2xl backdrop-blur-xl bg-card/80 border-border/50",children:[e.jsx("button",{onClick:T,className:"absolute right-4 top-4 rounded-lg p-2 hover:bg-accent transition-colors z-10 text-foreground",title:z==="dark"?"":"",children:z==="dark"?e.jsx(Ou,{className:"h-5 w-5",strokeWidth:2.5,fill:"none"}):e.jsx(Ru,{className:"h-5 w-5",strokeWidth:2.5,fill:"none"})}),e.jsxs(gs,{className:"space-y-4 text-center",children:[e.jsx("div",{className:"mx-auto flex h-16 w-16 items-center justify-center rounded-2xl bg-primary/10",children:e.jsx($f,{className:"h-8 w-8 text-primary",strokeWidth:2,fill:"none"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(js,{className:"text-2xl font-bold",children:" MaiBot"}),e.jsx(Zs,{className:"text-base",children:" Access Token "})]})]}),e.jsx(bs,{children:e.jsxs("form",{onSubmit:L,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"token",className:"text-sm font-medium",children:"Access Token"}),e.jsxs("div",{className:"relative",children:[e.jsx(gg,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground",strokeWidth:2,fill:"none"}),e.jsx(ce,{id:"token",type:"password",placeholder:" Access Token",value:n,onChange:K=>r(K.target.value),className:$("pl-10",h&&"border-red-500 focus-visible:ring-red-500"),disabled:c,autoFocus:!0,autoComplete:"off"})]})]}),h&&e.jsxs("div",{className:"flex items-center gap-2 rounded-md bg-red-50 p-3 text-sm text-red-600 dark:bg-red-950/50 dark:text-red-400",children:[e.jsx(Aa,{className:"h-4 w-4 flex-shrink-0",strokeWidth:2,fill:"none"}),e.jsx("span",{children:h})]}),e.jsx(N,{type:"submit",className:"w-full",disabled:c,children:c?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}),"..."]}):""}),e.jsxs(Os,{children:[e.jsx(ni,{asChild:!0,children:e.jsxs("button",{className:"w-full text-center text-sm text-primary hover:text-primary/80 transition-colors underline-offset-4 hover:underline flex items-center justify-center gap-1",children:[e.jsx(ro,{className:"h-4 w-4",strokeWidth:2,fill:"none"})," Token Token"]})}),e.jsxs(Es,{className:"sm:max-w-md",children:[e.jsxs(zs,{children:[e.jsxs(Ms,{className:"flex items-center gap-2",children:[e.jsx($f,{className:"h-5 w-5 text-primary",strokeWidth:2,fill:"none"})," Access Token"]}),e.jsx($s,{children:"Access Token  MaiBot WebUI "})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"rounded-lg border bg-muted/50 p-4 space-y-2",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(kN,{className:"h-5 w-5 text-primary flex-shrink-0 mt-0.5",strokeWidth:2,fill:"none"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("h4",{className:"font-semibold text-sm",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:" MaiBot  WebUI Access Token"}),e.jsxs("div",{className:"rounded bg-background p-2 font-mono text-xs",children:[e.jsx("p",{className:"text-muted-foreground",children:" WebUI Access Token: abc123..."}),e.jsx("p",{className:"text-muted-foreground",children:"  Token  WebUI"})]})]})]})}),e.jsx("div",{className:"rounded-lg border bg-muted/50 p-4 space-y-2",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ma,{className:"h-5 w-5 text-primary flex-shrink-0 mt-0.5",strokeWidth:2,fill:"none"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("h4",{className:"font-semibold text-sm",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Token "}),e.jsx("div",{className:"rounded bg-background p-2 font-mono text-xs break-all",children:e.jsx("code",{className:"text-primary",children:"data/webui.json"})}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[" ",e.jsx("code",{className:"px-1 py-0.5 bg-background rounded",children:"access_token"})," "]})]})]})}),e.jsx("div",{className:"rounded-lg border border-yellow-200 dark:border-yellow-900 bg-yellow-50 dark:bg-yellow-950/30 p-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Aa,{className:"h-4 w-4 text-yellow-600 dark:text-yellow-500 flex-shrink-0 mt-0.5",strokeWidth:2,fill:"none"}),e.jsxs("div",{className:"text-sm text-yellow-800 dark:text-yellow-300 space-y-1",children:[e.jsx("p",{className:"font-semibold",children:""}),e.jsxs("ul",{className:"list-disc list-inside space-y-0.5 text-xs",children:[e.jsx("li",{children:" Token"}),e.jsx("li",{children:" Token"})]})]})]})})]})]})]}),e.jsxs(ps,{children:[e.jsx(Qs,{asChild:!0,children:e.jsxs("button",{className:"w-full text-center text-sm text-muted-foreground hover:text-foreground transition-colors underline-offset-4 hover:underline flex items-center justify-center gap-1",children:[e.jsx(ln,{className:"h-4 w-4",strokeWidth:2,fill:"none"}),""]})}),e.jsxs(cs,{children:[e.jsxs(os,{children:[e.jsxs(us,{className:"flex items-center gap-2",children:[e.jsx(ln,{className:"h-5 w-5 text-primary",strokeWidth:2,fill:"none"}),""]}),e.jsx(ms,{children:""})]}),e.jsx("div",{className:"rounded-lg border bg-muted/50 p-4 space-y-2",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:""})}),e.jsxs(ds,{children:[e.jsx(xs,{children:""}),e.jsx(hs,{onClick:()=>g(!1),children:""})]})]})]})]})})]}),e.jsx("div",{className:"absolute bottom-4 left-0 right-0 text-center text-xs text-muted-foreground",children:e.jsx("p",{children:t0})})]})}const Us=u.forwardRef(({className:n,...r},c)=>e.jsx("textarea",{className:$("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:c,...r}));Us.displayName="Textarea";const jr=u.forwardRef(({className:n,orientation:r="horizontal",decorative:c=!0,...d},h)=>e.jsx(Op,{ref:h,decorative:c,orientation:r,className:$("shrink-0 bg-border",r==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",n),...d}));jr.displayName=Op.displayName;function b0({config:n,onChange:r}){const c=h=>{h.trim()&&!n.alias_names.includes(h.trim())&&r({...n,alias_names:[...n.alias_names,h.trim()]})},d=h=>{r({...n,alias_names:n.alias_names.filter((x,f)=>f!==h)})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(b,{htmlFor:"qq_account",children:"QQ *"}),e.jsx(ce,{id:"qq_account",type:"number",placeholder:"QQ",value:n.qq_account||"",onChange:h=>r({...n,qq_account:Number(h.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"QQ"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(b,{htmlFor:"nickname",children:" *"}),e.jsx(ce,{id:"nickname",placeholder:"",value:n.nickname,onChange:h=>r({...n,nickname:h.target.value})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(b,{children:""}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:n.alias_names.map((h,x)=>e.jsxs(Xe,{variant:"secondary",className:"gap-1",children:[h,e.jsx("button",{type:"button",onClick:()=>d(x),className:"ml-1 hover:text-destructive",children:e.jsx(li,{className:"h-3 w-3"})})]},x))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ce,{id:"alias_input",placeholder:"",onKeyPress:h=>{h.key==="Enter"&&(c(h.target.value),h.target.value="")}}),e.jsx(N,{type:"button",variant:"outline",onClick:()=>{const h=document.getElementById("alias_input");h&&(c(h.value),h.value="")},children:""})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})]})}function w0({config:n,onChange:r}){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(b,{htmlFor:"personality",children:" *"}),e.jsx(Us,{id:"personality",placeholder:"120",value:n.personality,onChange:c=>r({...n,personality:c.target.value}),rows:3}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(b,{htmlFor:"reply_style",children:" *"}),e.jsx(Us,{id:"reply_style",placeholder:"",value:n.reply_style,onChange:c=>r({...n,reply_style:c.target.value}),rows:3}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(b,{htmlFor:"interest",children:" *"}),e.jsx(Us,{id:"interest",placeholder:"",value:n.interest,onChange:c=>r({...n,interest:c.target.value}),rows:2}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsx(jr,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(b,{htmlFor:"plan_style",children:" *"}),e.jsx(Us,{id:"plan_style",placeholder:"",value:n.plan_style,onChange:c=>r({...n,plan_style:c.target.value}),rows:4}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(b,{htmlFor:"private_plan_style",children:" *"}),e.jsx(Us,{id:"private_plan_style",placeholder:"",value:n.private_plan_style,onChange:c=>r({...n,private_plan_style:c.target.value}),rows:3}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})]})}function _0({config:n,onChange:r}){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(b,{htmlFor:"emoji_chance",children:""}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[(n.emoji_chance*100).toFixed(0),"%"]})]}),e.jsx(ce,{id:"emoji_chance",type:"range",min:"0",max:"1",step:"0.1",value:n.emoji_chance,onChange:c=>r({...n,emoji_chance:Number(c.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(b,{htmlFor:"max_reg_num",children:""}),e.jsx(ce,{id:"max_reg_num",type:"number",min:"1",max:"200",value:n.max_reg_num,onChange:c=>r({...n,max_reg_num:Number(c.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(b,{htmlFor:"do_replace",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsx(qe,{id:"do_replace",checked:n.do_replace,onCheckedChange:c=>r({...n,do_replace:c})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(b,{htmlFor:"check_interval",children:""}),e.jsx(ce,{id:"check_interval",type:"number",min:"1",max:"120",value:n.check_interval,onChange:c=>r({...n,check_interval:Number(c.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsx(jr,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(b,{htmlFor:"steal_emoji",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsx(qe,{id:"steal_emoji",checked:n.steal_emoji,onCheckedChange:c=>r({...n,steal_emoji:c})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(b,{htmlFor:"content_filtration",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsx(qe,{id:"content_filtration",checked:n.content_filtration,onCheckedChange:c=>r({...n,content_filtration:c})})]}),n.content_filtration&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(b,{htmlFor:"filtration_prompt",children:""}),e.jsx(ce,{id:"filtration_prompt",placeholder:"",value:n.filtration_prompt,onChange:c=>r({...n,filtration_prompt:c.target.value})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})]})}function S0({config:n,onChange:r}){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(b,{htmlFor:"enable_tool",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsx(qe,{id:"enable_tool",checked:n.enable_tool,onCheckedChange:c=>r({...n,enable_tool:c})})]}),e.jsx(jr,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(b,{htmlFor:"enable_mood",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsx(qe,{id:"enable_mood",checked:n.enable_mood,onCheckedChange:c=>r({...n,enable_mood:c})})]}),n.enable_mood&&e.jsxs("div",{className:"ml-6 space-y-6 border-l-2 border-primary/20 pl-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(b,{htmlFor:"mood_update_threshold",children:""}),e.jsx(ce,{id:"mood_update_threshold",type:"number",min:"0.1",max:"10",step:"0.1",value:n.mood_update_threshold||1,onChange:c=>r({...n,mood_update_threshold:Number(c.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(b,{htmlFor:"emotion_style",children:""}),e.jsx(Us,{id:"emotion_style",placeholder:"",value:n.emotion_style||"",onChange:c=>r({...n,emotion_style:c.target.value}),rows:2}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})]}),e.jsx(jr,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(b,{htmlFor:"all_global",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsx(qe,{id:"all_global",checked:n.all_global,onCheckedChange:c=>r({...n,all_global:c})})]})]})}function C0({config:n,onChange:r}){const[c,d]=u.useState(!1);return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"rounded-lg bg-blue-50 dark:bg-blue-950/30 border border-blue-200 dark:border-blue-800 p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-0.5",children:e.jsx("svg",{className:"h-5 w-5 text-blue-600 dark:text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{className:"flex-1 text-sm",children:[e.jsx("p",{className:"font-medium text-blue-900 dark:text-blue-100 mb-1",children:" (SiliconFlow)"}),e.jsx("p",{className:"text-blue-700 dark:text-blue-300 mb-2",children:" DeepSeek V3Qwen  API Key "}),e.jsxs("a",{href:"https://cloud.siliconflow.cn",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-blue-600 dark:text-blue-400 hover:underline font-medium",children:[" API Key",e.jsx(dr,{className:"h-3 w-3"})]})]})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(b,{htmlFor:"siliconflow_api_key",children:"SiliconFlow API Key *"}),e.jsxs("div",{className:"relative",children:[e.jsx(ce,{id:"siliconflow_api_key",type:c?"text":"password",placeholder:"sk-...",value:n.api_key,onChange:h=>r({api_key:h.target.value}),className:"font-mono pr-10"}),e.jsx(N,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 hover:bg-transparent",onClick:()=>d(!c),children:c?e.jsx(mr,{className:"h-4 w-4 text-muted-foreground"}):e.jsx(Zt,{className:"h-4 w-4 text-muted-foreground"})})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" API "})]}),e.jsxs("div",{className:"rounded-lg bg-muted/50 p-4 text-sm space-y-2",children:[e.jsx("p",{className:"font-medium",children:""}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-muted-foreground ml-2",children:[e.jsx("li",{children:"DeepSeek V3 - "}),e.jsx("li",{children:"Qwen3 30B - "}),e.jsx("li",{children:"Qwen3 VL 30B - "}),e.jsx("li",{children:"SenseVoice - "}),e.jsx("li",{children:"BGE-M3 - "}),e.jsx("li",{children:" (LPMM)"})]})]}),e.jsx("div",{className:"rounded-lg border border-amber-200 dark:border-amber-800 bg-amber-50 dark:bg-amber-950/30 p-4",children:e.jsxs("p",{className:"text-sm text-amber-900 dark:text-amber-100",children:[e.jsx("span",{className:"font-medium",children:" "}),'"  " API ']})})]})}async function ke(n,r){const c=await fetch(n,r);if(c.status===401)throw localStorage.removeItem("access-token"),window.location.href="/auth",new Error("");return c}function ze(){return{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("access-token")}`}}async function k0(){const n=await ke("/api/webui/config/bot",{method:"GET",headers:ze()});if(!n.ok)throw new Error("Bot");const c=(await n.json()).config.bot||{};return{qq_account:c.qq_account||0,nickname:c.nickname||"",alias_names:c.alias_names||[]}}async function T0(){const n=await ke("/api/webui/config/bot",{method:"GET",headers:ze()});if(!n.ok)throw new Error("");const c=(await n.json()).config.personality||{};return{personality:c.personality||"",reply_style:c.reply_style||"",interest:c.interest||"",plan_style:c.plan_style||"",private_plan_style:c.private_plan_style||""}}async function E0(){const n=await ke("/api/webui/config/bot",{method:"GET",headers:ze()});if(!n.ok)throw new Error("");const c=(await n.json()).config.emoji||{};return{emoji_chance:c.emoji_chance??.4,max_reg_num:c.max_reg_num??40,do_replace:c.do_replace??!0,check_interval:c.check_interval??10,steal_emoji:c.steal_emoji??!0,content_filtration:c.content_filtration??!1,filtration_prompt:c.filtration_prompt||""}}async function z0(){const n=await ke("/api/webui/config/bot",{method:"GET",headers:ze()});if(!n.ok)throw new Error("");const c=(await n.json()).config,d=c.tool||{},h=c.mood||{},x=c.jargon||{};return{enable_tool:d.enable_tool??!0,enable_mood:h.enable_mood??!1,mood_update_threshold:h.mood_update_threshold,emotion_style:h.emotion_style,all_global:x.all_global??!0}}async function M0(){const n=await ke("/api/webui/config/model",{method:"GET",headers:ze()});if(!n.ok)throw new Error("");return{api_key:((await n.json()).config.api_providers||[]).find(x=>x.name==="SiliconFlow")?.api_key||""}}async function A0(n){const r=await ke("/api/webui/config/bot/section/bot",{method:"POST",headers:ze(),body:JSON.stringify(n)});if(!r.ok){const c=await r.json();throw new Error(c.detail||"Bot")}return await r.json()}async function D0(n){const r=await ke("/api/webui/config/bot/section/personality",{method:"POST",headers:ze(),body:JSON.stringify(n)});if(!r.ok){const c=await r.json();throw new Error(c.detail||"")}return await r.json()}async function O0(n){const r=await ke("/api/webui/config/bot/section/emoji",{method:"POST",headers:ze(),body:JSON.stringify(n)});if(!r.ok){const c=await r.json();throw new Error(c.detail||"")}return await r.json()}async function R0(n){const r=[];r.push(ke("/api/webui/config/bot/section/tool",{method:"POST",headers:ze(),body:JSON.stringify({enable_tool:n.enable_tool})})),r.push(ke("/api/webui/config/bot/section/jargon",{method:"POST",headers:ze(),body:JSON.stringify({all_global:n.all_global})}));const c={enable_mood:n.enable_mood};n.enable_mood&&(c.mood_update_threshold=n.mood_update_threshold||1,c.emotion_style=n.emotion_style||""),r.push(ke("/api/webui/config/bot/section/mood",{method:"POST",headers:ze(),body:JSON.stringify(c)}));const d=await Promise.all(r);for(const h of d)if(!h.ok){const x=await h.json();throw new Error(x.detail||"")}return{success:!0}}async function L0(n){const r=await ke("/api/webui/config/model",{method:"GET",headers:ze()});if(!r.ok)throw new Error("");const d=(await r.json()).config,h=d.api_providers||[],x=h.findIndex(g=>g.name==="SiliconFlow");x>=0?h[x]={...h[x],api_key:n.api_key}:h.push({name:"SiliconFlow",base_url:"https://api.siliconflow.cn/v1",api_key:n.api_key,client_type:"openai",max_retry:3,timeout:120,retry_interval:5});const f={...d,api_providers:h},j=await ke("/api/webui/config/model",{method:"POST",headers:ze(),body:JSON.stringify(f)});if(!j.ok){const g=await j.json();throw new Error(g.detail||"")}return await j.json()}async function np(){const n=localStorage.getItem("access-token"),r=await ke("/api/webui/setup/complete",{method:"POST",headers:{Authorization:`Bearer ${n}`}});if(!r.ok){const c=await r.json();throw new Error(c.message||"")}return await r.json()}async function co(){const n=await ke("/api/webui/system/restart",{method:"POST",headers:ze()});if(!n.ok){const r=await n.json();throw new Error(r.detail||"")}return await n.json()}async function U0(){const n=await ke("/api/webui/system/status",{method:"GET",headers:ze()});if(!n.ok){const r=await n.json();throw new Error(r.detail||"")}return await n.json()}function B0(){const n=It(),{toast:r}=Bs(),[c,d]=u.useState(0),[h,x]=u.useState(!1),[f,j]=u.useState(!1),[g,_]=u.useState(!0),[v,k]=u.useState({qq_account:0,nickname:"",alias_names:[]}),[z,T]=u.useState({personality:"",reply_style:"",interest:"",plan_style:`1.****action****
2.
3.
4.
5.`,private_plan_style:`1.****action****
2.
3.`}),[L,K]=u.useState({emoji_chance:.4,max_reg_num:40,do_replace:!0,check_interval:10,steal_emoji:!0,content_filtration:!1,filtration_prompt:""}),[U,R]=u.useState({enable_tool:!0,enable_mood:!1,mood_update_threshold:1,emotion_style:"",all_global:!0}),[ee,V]=u.useState({api_key:""}),[E,B]=u.useState(!1),[X,w]=u.useState(""),D=[{id:"bot-basic",title:"Bot",description:"",icon:ir},{id:"personality",title:"",description:"",icon:to},{id:"emoji",title:"",description:"",icon:Qu},{id:"other",title:"",description:"",icon:Rl},{id:"siliconflow",title:"API",description:"API",icon:gg}],te=(c+1)/D.length*100;u.useEffect(()=>{(async()=>{try{_(!0);const[q,H,ne,S,me]=await Promise.all([k0(),T0(),E0(),z0(),M0()]);k(q),T(H),K(ne),R(S),V(me)}catch(q){r({title:"",description:q instanceof Error?q.message:"",variant:"destructive"})}finally{_(!1)}})()},[r]);const xe=async()=>{j(!0);try{switch(c){case 0:await A0(v);break;case 1:await D0(z);break;case 2:await O0(L);break;case 3:await R0(U);break;case 4:await L0(ee);break}return r({title:"",description:`${D[c].title}`}),!0}catch(y){return r({title:"",description:y instanceof Error?y.message:"",variant:"destructive"}),!1}finally{j(!1)}},be=async()=>{await xe()&&c<D.length-1&&d(c+1)},ye=()=>{c>0&&d(c-1)},ve=async()=>{x(!0),B(!0);try{if(w("API..."),!await xe()){x(!1),B(!1);return}w("..."),await np(),w("..."),await co(),r({title:"",description:"..."}),w("...");const q=60;let H=0,ne=!1;for(;H<q&&!ne;){await new Promise(S=>setTimeout(S,1e3));try{(await U0()).running&&(ne=!0,w("..."))}catch{H++}}if(!ne)throw new Error(",");setTimeout(()=>{n({to:"/"})},1e3)}catch(y){B(!1),r({title:"",description:y instanceof Error?y.message:"",variant:"destructive"})}finally{x(!1)}},pe=async()=>{try{await np(),n({to:"/"})}catch(y){r({title:"",description:y instanceof Error?y.message:"",variant:"destructive"})}},Ne=()=>{switch(c){case 0:return e.jsx(b0,{config:v,onChange:k});case 1:return e.jsx(w0,{config:z,onChange:T});case 2:return e.jsx(_0,{config:L,onChange:K});case 3:return e.jsx(S0,{config:U,onChange:R});case 4:return e.jsx(C0,{config:ee,onChange:V});default:return null}};return e.jsxs("div",{className:"relative flex min-h-screen flex-col items-center justify-center overflow-hidden bg-gradient-to-br from-primary/5 via-background to-secondary/5 p-4 md:p-6",children:[E&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-background/80 backdrop-blur-sm",children:e.jsxs("div",{className:"mx-auto flex max-w-md flex-col items-center space-y-6 rounded-lg border bg-card p-8 text-center shadow-lg",children:[e.jsx("div",{className:"flex h-20 w-20 items-center justify-center rounded-full bg-primary/10",children:e.jsx(vt,{className:"h-10 w-10 animate-spin text-primary"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-2xl font-bold",children:""}),e.jsx("p",{className:"text-muted-foreground",children:X})]}),e.jsx("div",{className:"w-full",children:e.jsx("div",{className:"h-2 w-full overflow-hidden rounded-full bg-secondary",children:e.jsx("div",{className:"h-full w-full animate-pulse bg-primary",style:{animation:"pulse 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite"}})})}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"..."})]})}),e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute left-1/4 top-1/4 h-64 w-64 md:h-96 md:w-96 rounded-full bg-primary/5 blur-3xl"}),e.jsx("div",{className:"absolute right-1/4 bottom-1/4 h-64 w-64 md:h-96 md:w-96 rounded-full bg-secondary/5 blur-3xl"})]}),g?e.jsxs("div",{className:"relative z-10 text-center",children:[e.jsx("div",{className:"mx-auto mb-4 flex h-16 w-16 items-center justify-center",children:e.jsx("div",{className:"h-12 w-12 animate-spin rounded-full border-4 border-primary border-t-transparent"})}),e.jsx("p",{className:"text-lg font-medium",children:"..."}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:""})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative z-10 w-full max-w-4xl",children:[e.jsxs("div",{className:"mb-6 md:mb-8 text-center",children:[e.jsx("div",{className:"mx-auto mb-4 flex h-12 w-12 md:h-16 md:w-16 items-center justify-center rounded-2xl bg-primary/10",children:e.jsx(TN,{className:"h-6 w-6 md:h-8 md:w-8 text-primary",strokeWidth:2,fill:"none"})}),e.jsx("h1",{className:"mb-2 text-2xl md:text-3xl font-bold",children:""}),e.jsxs("p",{className:"text-sm md:text-base text-muted-foreground",children:[" ",Ku," "]})]}),e.jsxs("div",{className:"mb-6 md:mb-8",children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between text-xs md:text-sm",children:[e.jsxs("span",{className:"text-muted-foreground",children:[" ",c+1," / ",D.length]}),e.jsxs("span",{className:"font-medium text-primary",children:[Math.round(te),"%"]})]}),e.jsx(Sr,{value:te,className:"h-2"})]}),e.jsx("div",{className:"mb-6 md:mb-8 flex justify-between",children:D.map((y,q)=>{const H=y.icon;return e.jsxs("div",{className:$("flex flex-1 flex-col items-center gap-1 md:gap-2",q<D.length-1&&"relative"),children:[q<D.length-1&&e.jsx("div",{className:$("absolute left-1/2 top-3 md:top-4 h-0.5 w-full",q<c?"bg-primary":"bg-border")}),e.jsx("div",{className:$("relative z-10 flex h-6 w-6 md:h-8 md:w-8 items-center justify-center rounded-full border-2 transition-all",q===c||q<c?"border-primary bg-primary text-primary-foreground":"border-border bg-background text-muted-foreground"),children:q<c?e.jsx(xa,{className:"h-3 w-3 md:h-4 md:w-4",strokeWidth:2.5,fill:"none"}):e.jsx(H,{className:"h-3 w-3 md:h-4 md:w-4"})}),e.jsx("span",{className:$("text-[10px] md:text-xs text-center max-w-[60px] md:max-w-none truncate md:whitespace-normal",q===c?"font-medium text-foreground":"text-muted-foreground"),title:y.title,children:y.title})]},y.id)})}),e.jsx(Be,{className:"mb-6 md:mb-8 shadow-lg",children:e.jsx(bs,{className:"p-4 md:p-8",children:e.jsxs("div",{className:"min-h-[300px] md:min-h-[400px]",children:[e.jsxs("div",{className:"mb-4 md:mb-6",children:[e.jsx("h2",{className:"mb-2 text-xl md:text-2xl font-semibold",children:D[c].title}),e.jsx("p",{className:"text-sm md:text-base text-muted-foreground",children:D[c].description})]}),e.jsx(es,{className:"h-[400px] md:h-[500px]",children:e.jsx("div",{className:"pr-2",children:Ne()})})]})})}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-3 sm:gap-0",children:[e.jsx(N,{variant:"outline",onClick:ye,disabled:c===0||f,className:"w-full sm:w-auto order-2 sm:order-1",children:""}),e.jsxs("div",{className:"flex gap-2 w-full sm:w-auto order-1 sm:order-2",children:[e.jsxs(ps,{children:[e.jsx(Qs,{asChild:!0,children:e.jsxs(N,{variant:"ghost",className:"flex-1 sm:flex-none gap-2",disabled:f||h,children:[e.jsx(EN,{className:"h-4 w-4",strokeWidth:2,fill:"none"}),""]})}),e.jsxs(cs,{children:[e.jsxs(os,{children:[e.jsx(us,{children:""}),e.jsx(ms,{children:""})]}),e.jsxs(ds,{children:[e.jsx(xs,{children:""}),e.jsx(hs,{onClick:pe,children:""})]})]})]}),c===D.length-1?e.jsx(N,{onClick:ve,disabled:h||f,className:"flex-1 sm:flex-none",children:h||f?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}),f?"...":"..."]}):e.jsxs(e.Fragment,{children:["",e.jsx(xa,{className:"ml-2 h-4 w-4",strokeWidth:2,fill:"none"})]})}):e.jsx(N,{onClick:be,disabled:f,className:"flex-1 sm:flex-none",children:f?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}),"..."]}):e.jsxs(e.Fragment,{children:["",e.jsx(zN,{className:"ml-2 h-4 w-4",strokeWidth:2,fill:"none"})]})})]})]})]}),e.jsx("div",{className:"relative z-10 mt-6 md:mt-8 text-center text-xs text-muted-foreground",children:e.jsx("p",{children:""})})]})]})}function Og(){const n=It();return e.jsx("div",{className:"flex min-h-screen items-center justify-center bg-background p-4",children:e.jsxs("div",{className:"w-full max-w-2xl text-center",children:[e.jsxs("div",{className:"relative mb-8",children:[e.jsx("h1",{className:"text-[150px] font-black leading-none text-primary/10 select-none sm:text-[200px]",children:"404"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx(St,{className:"h-20 w-20 text-primary/30 sm:h-24 sm:w-24"})})]}),e.jsxs("div",{className:"space-y-4 mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground sm:text-3xl",children:""}),e.jsx("p",{className:"text-base text-muted-foreground sm:text-lg max-w-md mx-auto",children:" URL "})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[e.jsxs(N,{size:"lg",onClick:()=>n({to:"/"}),className:"gap-2 w-full sm:w-auto",children:[e.jsx(xr,{className:"h-4 w-4"}),""]}),e.jsxs(N,{size:"lg",variant:"outline",onClick:()=>window.history.back(),className:"gap-2 w-full sm:w-auto",children:[e.jsx(ti,{className:"h-4 w-4"}),""]})]}),e.jsx("div",{className:"mt-12 pt-8 border-t border-border",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:""})})]})})}const Qe=hN,$e=xN,Ge=u.forwardRef(({className:n,children:r,...c},d)=>e.jsxs(eg,{ref:d,className:$("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",n),...c,children:[r,e.jsx(cN,{asChild:!0,children:e.jsx(Ll,{className:"h-4 w-4 opacity-50"})})]}));Ge.displayName=eg.displayName;const Rg=u.forwardRef(({className:n,...r},c)=>e.jsx(sg,{ref:c,className:$("flex cursor-default items-center justify-center py-1",n),...r,children:e.jsx(fr,{className:"h-4 w-4"})}));Rg.displayName=sg.displayName;const Lg=u.forwardRef(({className:n,...r},c)=>e.jsx(tg,{ref:c,className:$("flex cursor-default items-center justify-center py-1",n),...r,children:e.jsx(Ll,{className:"h-4 w-4"})}));Lg.displayName=tg.displayName;const Ve=u.forwardRef(({className:n,children:r,position:c="popper",...d},h)=>e.jsx(oN,{children:e.jsxs(ag,{ref:h,className:$("relative z-[100] max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-hidden rounded-md border border-border bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",c==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:c,...d,children:[e.jsx(Rg,{}),e.jsx(dN,{className:$("p-1",c==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),e.jsx(Lg,{})]})}));Ve.displayName=ag.displayName;const H0=u.forwardRef(({className:n,...r},c)=>e.jsx(lg,{ref:c,className:$("px-2 py-1.5 text-sm font-semibold",n),...r}));H0.displayName=lg.displayName;const ue=u.forwardRef(({className:n,children:r,...c},d)=>e.jsxs(ng,{ref:d,className:$("relative flex w-full cursor-default select-none items-center rounded-sm py-2 pl-2 pr-8 text-sm outline-none bg-white dark:bg-gray-900 hover:bg-gray-100 dark:hover:bg-gray-800 focus:bg-gray-100 dark:focus:bg-gray-800 data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...c,children:[e.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(uN,{children:e.jsx(ha,{className:"h-4 w-4"})})}),e.jsx(mN,{children:r})]}));ue.displayName=ng.displayName;const q0=u.forwardRef(({className:n,...r},c)=>e.jsx(ig,{ref:c,className:$("-mx-1 my-1 h-px bg-muted",n),...r}));q0.displayName=ig.displayName;const Da=Gy,Oa=Vy,Na=u.forwardRef(({className:n,align:r="center",sideOffset:c=4,...d},h)=>e.jsx(qy,{children:e.jsx(Rp,{ref:h,align:r,sideOffset:c,className:$("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",n),...d})}));Na.displayName=Rp.displayName;const Ul="/api/webui/config";async function ip(){const r=await(await ke(`${Ul}/bot`)).json();if(!r.success)throw new Error("");return r.config}async function ei(){const r=await(await ke(`${Ul}/model`)).json();if(!r.success)throw new Error("");return r.config}async function rp(n){const c=await(await ke(`${Ul}/bot`,{method:"POST",headers:ze(),body:JSON.stringify(n)})).json();if(!c.success)throw new Error(c.message||"")}async function G0(){const r=await(await ke(`${Ul}/bot/raw`)).json();if(!r.success)throw new Error("");return r.content}async function V0(n){const c=await(await ke(`${Ul}/bot/raw`,{method:"POST",headers:ze(),body:JSON.stringify({raw_content:n})})).json();if(!c.success)throw new Error(c.message||"")}async function io(n){const c=await(await ke(`${Ul}/model`,{method:"POST",headers:ze(),body:JSON.stringify(n)})).json();if(!c.success)throw new Error(c.message||"")}async function F0(n,r){const d=await(await ke(`${Ul}/bot/section/${n}`,{method:"POST",headers:ze(),body:JSON.stringify(r)})).json();if(!d.success)throw new Error(d.message||` ${n} `)}async function qu(n,r){const d=await(await ke(`${Ul}/model/section/${n}`,{method:"POST",headers:ze(),body:JSON.stringify(r)})).json();if(!d.success)throw new Error(d.message||` ${n} `)}async function Q0(n,r="openai",c="/models"){const d=new URLSearchParams({provider_name:n,parser:r,endpoint:c}),h=await ke(`/api/webui/models/list?${d}`);if(!h.ok){const f=await h.json().catch(()=>({}));throw new Error(f.detail||` (${h.status})`)}const x=await h.json();if(!x.success)throw new Error("");return x.models}async function $0(n){const r=new URLSearchParams({provider_name:n}),c=await ke(`/api/webui/models/test-connection-by-name?${r}`,{method:"POST"});if(!c.ok){const d=await c.json().catch(()=>({}));throw new Error(d.detail||` (${c.status})`)}return await c.json()}const Y0=ai("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),ua=u.forwardRef(({className:n,variant:r,...c},d)=>e.jsx("div",{ref:d,role:"alert",className:$(Y0({variant:r}),n),...c}));ua.displayName="Alert";const X0=u.forwardRef(({className:n,...r},c)=>e.jsx("h5",{ref:c,className:$("mb-1 font-medium leading-none tracking-tight",n),...r}));X0.displayName="AlertTitle";const ma=u.forwardRef(({className:n,...r},c)=>e.jsx("div",{ref:c,className:$("text-sm [&_p]:leading-relaxed",n),...r}));ma.displayName="AlertDescription";function Iu({onRestartComplete:n,onRestartFailed:r}){const[c,d]=u.useState(0),[h,x]=u.useState("restarting"),[f,j]=u.useState(0),[g,_]=u.useState(0);u.useEffect(()=>{const z=setInterval(()=>{d(K=>K>=90?K:K+1)},200),T=setInterval(()=>{j(K=>K+1)},1e3),L=setTimeout(()=>{x("checking"),v()},3e3);return()=>{clearInterval(z),clearInterval(T),clearTimeout(L)}},[]);const v=()=>{const T=async()=>{try{if(_(K=>K+1),(await fetch("/api/webui/system/status",{method:"GET",headers:{"Content-Type":"application/json"},signal:AbortSignal.timeout(3e3)})).ok)d(100),x("success"),setTimeout(()=>{n?.()},1500);else throw new Error("Status check failed")}catch{g<60?setTimeout(T,2e3):(x("failed"),r?.())}};T()},k=z=>{const T=Math.floor(z/60),L=z%60;return`${T}:${L.toString().padStart(2,"0")}`};return e.jsx("div",{className:"fixed inset-0 bg-background/95 backdrop-blur-sm z-50 flex items-center justify-center",children:e.jsxs("div",{className:"max-w-md w-full mx-4 space-y-8",children:[e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[h==="restarting"&&e.jsxs(e.Fragment,{children:[e.jsx(vt,{className:"h-16 w-16 text-primary animate-spin"}),e.jsx("h2",{className:"text-2xl font-bold",children:""}),e.jsx("p",{className:"text-muted-foreground text-center",children:"..."})]}),h==="checking"&&e.jsxs(e.Fragment,{children:[e.jsx(vt,{className:"h-16 w-16 text-primary animate-spin"}),e.jsx("h2",{className:"text-2xl font-bold",children:""}),e.jsxs("p",{className:"text-muted-foreground text-center",children:["... ( ",g,"/60)"]})]}),h==="success"&&e.jsxs(e.Fragment,{children:[e.jsx(xa,{className:"h-16 w-16 text-green-500"}),e.jsx("h2",{className:"text-2xl font-bold",children:""}),e.jsx("p",{className:"text-muted-foreground text-center",children:"..."})]}),h==="failed"&&e.jsxs(e.Fragment,{children:[e.jsx(Aa,{className:"h-16 w-16 text-destructive"}),e.jsx("h2",{className:"text-2xl font-bold",children:""}),e.jsx("p",{className:"text-muted-foreground text-center",children:""})]})]}),h!=="failed"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(Sr,{value:c,className:"h-2"}),e.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground",children:[e.jsxs("span",{children:[c,"%"]}),e.jsxs("span",{children:[": ",k(f)]})]})]}),e.jsx("div",{className:"bg-muted/50 rounded-lg p-4 space-y-2",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:[h==="restarting"&&" ...",h==="checking"&&" ...",h==="success"&&" ",h==="failed"&&" "]})}),e.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/50 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-yellow-900 dark:text-yellow-100",children:[e.jsx("strong",{children:" :"})," ,, ",e.jsx("code",{className:"px-1 py-0.5 bg-yellow-200 dark:bg-yellow-900 rounded",children:"Ctrl+C"})," ,"]})}),h==="failed"&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>window.location.reload(),className:"flex-1 px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90",children:""}),e.jsx("button",{onClick:()=>{x("checking"),_(0),v()},className:"flex-1 px-4 py-2 bg-secondary text-secondary-foreground rounded-md hover:bg-secondary/90",children:""})]})]})})}const K0={name:"toml",startState:function(){return{inString:!1,stringType:"",lhs:!0,inArray:0}},token:function(n,r){let c;if(!r.inString&&(c=n.match(/^('''|"""|'|")/))&&(r.stringType=c[0],r.inString=!0),n.sol()&&!r.inString&&r.inArray===0&&(r.lhs=!0),r.inString){for(;r.inString;)if(n.match(r.stringType))r.inString=!1;else if(n.peek()==="\\")n.next(),n.next();else{if(n.eol())break;n.match(/^.[^\\\"\']*/)}return r.lhs?"property":"string"}else{if(r.inArray&&n.peek()==="]")return n.next(),r.inArray--,"bracket";if(r.lhs&&n.peek()==="["&&n.skipTo("]"))return n.next(),n.peek()==="]"&&n.next(),"atom";if(n.peek()==="#")return n.skipToEnd(),"comment";if(n.eatSpace())return null;if(r.lhs&&n.eatWhile(function(d){return d!="="&&d!=" "}))return"property";if(r.lhs&&n.peek()==="=")return n.next(),r.lhs=!1,null;if(!r.lhs&&n.match(/^\d\d\d\d[\d\-\:\.T]*Z/))return"atom";if(!r.lhs&&(n.match("true")||n.match("false")))return"atom";if(!r.lhs&&n.peek()==="[")return r.inArray++,n.next(),"bracket";if(!r.lhs&&n.match(/^\-?\d+(?:\.\d+)?/))return"number";n.eatSpace()||n.next()}return null},languageData:{commentTokens:{line:"#"}}},Z0={python:[sb()],json:[tb(),ab()],toml:[eb.define(K0)],text:[]};function I0({value:n,onChange:r,language:c="text",readOnly:d=!1,height:h="400px",minHeight:x,maxHeight:f,placeholder:j,theme:g="dark",className:_=""}){const[v,k]=u.useState(!1);if(u.useEffect(()=>{k(!0)},[]),!v)return e.jsx("div",{className:`rounded-md border bg-muted animate-pulse ${_}`,style:{height:h,minHeight:x,maxHeight:f}});const z=[...Z0[c]||[],If.lineWrapping];return d&&z.push(If.editable.of(!1)),e.jsx("div",{className:`rounded-md overflow-hidden border ${_}`,children:e.jsx(lb,{value:n,height:h,minHeight:x,maxHeight:f,theme:g==="dark"?nb:void 0,extensions:z,onChange:r,placeholder:j,basicSetup:{lineNumbers:!0,highlightActiveLineGutter:!0,highlightSpecialChars:!0,history:!0,foldGutter:!0,drawSelection:!0,dropCursor:!0,allowMultipleSelections:!0,indentOnInput:!0,syntaxHighlighting:!0,bracketMatching:!0,closeBrackets:!0,autocompletion:!0,rectangularSelection:!0,crosshairCursor:!0,highlightActiveLine:!0,highlightSelectionMatches:!0,closeBracketsKeymap:!0,defaultKeymap:!0,searchKeymap:!0,historyKeymap:!0,foldKeymap:!0,completionKeymap:!0,lintKeymap:!0}})})}function J0(){const[n,r]=u.useState(!0),[c,d]=u.useState(!1),[h,x]=u.useState(!1),[f,j]=u.useState(!1),[g,_]=u.useState(!1),[v,k]=u.useState(!1),[z,T]=u.useState("visual"),[L,K]=u.useState(""),[U,R]=u.useState(!1),{toast:ee}=Bs(),[V,E]=u.useState(null),[B,X]=u.useState(null),[w,D]=u.useState(null),[te,xe]=u.useState(null),[be,ye]=u.useState(null),[ve,pe]=u.useState(null),[Ne,y]=u.useState(null),[q,H]=u.useState(null),[ne,S]=u.useState(null),[me,he]=u.useState(null),[Q,oe]=u.useState(null),[ge,le]=u.useState(null),[O,F]=u.useState(null),[A,W]=u.useState(null),[_e,Me]=u.useState(null),[ss,Ie]=u.useState(null),[Rs,qs]=u.useState(null),[ie,we]=u.useState(null),Ke=u.useRef(null),Le=u.useRef(!0),st=u.useRef({}),Jt=u.useCallback(async()=>{try{const Se=await G0();K(Se),R(!1)}catch(Se){ee({variant:"destructive",title:"",description:Se instanceof Error?Se.message:""})}},[ee]),bt=u.useCallback(async()=>{try{r(!0);const Se=await ip();st.current=Se,E(Se.bot),X(Se.personality);const Re=Se.chat;Re.talk_value_rules||(Re.talk_value_rules=[]),D(Re),xe(Se.expression),ye(Se.emoji),pe(Se.memory),y(Se.tool),H(Se.mood),S(Se.voice),he(Se.lpmm_knowledge),oe(Se.keyword_reaction),le(Se.response_post_process),F(Se.chinese_typo),W(Se.response_splitter),Me(Se.log),Ie(Se.debug),qs(Se.maim_message),we(Se.telemetry),j(!1),Le.current=!1,await Jt()}catch(Se){console.error(":",Se),ee({title:"",description:"",variant:"destructive"})}finally{r(!1)}},[ee,Jt]);u.useEffect(()=>{bt()},[bt]);const Je=u.useCallback(async(Se,Re)=>{if(!Le.current)try{x(!0),await F0(Se,Re),j(!1)}catch(it){console.error(` ${Se} :`,it),j(!0)}finally{x(!1)}},[]),Ue=u.useCallback((Se,Re)=>{Le.current||(j(!0),Ke.current&&clearTimeout(Ke.current),Ke.current=setTimeout(()=>{Je(Se,Re)},2e3))},[Je]);u.useEffect(()=>{V&&!Le.current&&Ue("bot",V)},[V,Ue]),u.useEffect(()=>{B&&!Le.current&&Ue("personality",B)},[B,Ue]),u.useEffect(()=>{w&&!Le.current&&Ue("chat",w)},[w,Ue]),u.useEffect(()=>{te&&!Le.current&&Ue("expression",te)},[te,Ue]),u.useEffect(()=>{be&&!Le.current&&Ue("emoji",be)},[be,Ue]),u.useEffect(()=>{ve&&!Le.current&&Ue("memory",ve)},[ve,Ue]),u.useEffect(()=>{Ne&&!Le.current&&Ue("tool",Ne)},[Ne,Ue]),u.useEffect(()=>{q&&!Le.current&&Ue("mood",q)},[q,Ue]),u.useEffect(()=>{ne&&!Le.current&&Ue("voice",ne)},[ne,Ue]),u.useEffect(()=>{me&&!Le.current&&Ue("lpmm_knowledge",me)},[me,Ue]),u.useEffect(()=>{Q&&!Le.current&&Ue("keyword_reaction",Q)},[Q,Ue]),u.useEffect(()=>{ge&&!Le.current&&Ue("response_post_process",ge)},[ge,Ue]),u.useEffect(()=>{O&&!Le.current&&Ue("chinese_typo",O)},[O,Ue]),u.useEffect(()=>{A&&!Le.current&&Ue("response_splitter",A)},[A,Ue]),u.useEffect(()=>{_e&&!Le.current&&Ue("log",_e)},[_e,Ue]),u.useEffect(()=>{ss&&!Le.current&&Ue("debug",ss)},[ss,Ue]),u.useEffect(()=>{Rs&&!Le.current&&Ue("maim_message",Rs)},[Rs,Ue]),u.useEffect(()=>{ie&&!Le.current&&Ue("telemetry",ie)},[ie,Ue]);const jt=async()=>{try{d(!0),await V0(L),j(!1),R(!1),ee({title:"",description:""}),await bt()}catch(Se){R(!0),ee({variant:"destructive",title:"",description:Se instanceof Error?Se.message:""})}finally{d(!1)}},nt=async Se=>{if(f){ee({variant:"destructive",title:"",description:""});return}if(T(Se),Se==="source")await Jt();else try{const Re=await ip();st.current=Re,E(Re.bot),X(Re.personality);const it=Re.chat;it.talk_value_rules||(it.talk_value_rules=[]),D(it),xe(Re.expression),ye(Re.emoji),pe(Re.memory),y(Re.tool),H(Re.mood),S(Re.voice),he(Re.lpmm_knowledge),oe(Re.keyword_reaction),le(Re.response_post_process),F(Re.chinese_typo),W(Re.response_splitter),Me(Re.log),Ie(Re.debug),qs(Re.maim_message),we(Re.telemetry),j(!1)}catch(Re){console.error(":",Re),ee({title:"",description:"",variant:"destructive"})}},Ct=async()=>{try{d(!0),Ke.current&&clearTimeout(Ke.current);const Se={...st.current,bot:V,personality:B,chat:w,expression:te,emoji:be,memory:ve,tool:Ne,mood:q,voice:ne,lpmm_knowledge:me,keyword_reaction:Q,response_post_process:ge,chinese_typo:O,response_splitter:A,log:_e,debug:ss,maim_message:Rs,telemetry:ie};await rp(Se),j(!1),ee({title:"",description:""})}catch(Se){console.error(":",Se),ee({title:"",description:Se.message,variant:"destructive"})}finally{d(!1)}},kt=async()=>{try{_(!0),co().catch(()=>{}),k(!0)}catch(Se){console.error(":",Se),k(!1),ee({title:"",description:"",variant:"destructive"}),_(!1)}},rl=async()=>{try{d(!0),Ke.current&&clearTimeout(Ke.current);const Se={...st.current,bot:V,personality:B,chat:w,expression:te,emoji:be,memory:ve,tool:Ne,mood:q,voice:ne,lpmm_knowledge:me,keyword_reaction:Q,response_post_process:ge,chinese_typo:O,response_splitter:A,log:_e,debug:ss,maim_message:Rs,telemetry:ie};await rp(Se),j(!1),ee({title:"",description:"..."}),await new Promise(Re=>setTimeout(Re,500)),await kt()}catch(Se){console.error(":",Se),ee({title:"",description:Se.message,variant:"destructive"})}finally{d(!1)}},cl=()=>{localStorage.removeItem("access-token"),window.location.href="/auth"},ol=()=>{k(!1),_(!1),ee({title:"",description:"",variant:"destructive"})};return n?e.jsx(es,{className:"h-full",children:e.jsx("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("p",{className:"text-muted-foreground",children:"..."})})})}):e.jsx(es,{className:"h-full",children:e.jsxs("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:""}),e.jsx("p",{className:"text-muted-foreground mt-1 sm:mt-2 text-sm sm:text-base",children:""})]}),e.jsxs("div",{className:"flex gap-2 w-full sm:w-auto items-center",children:[e.jsx(Kt,{value:z,onValueChange:Se=>nt(Se),className:"w-auto",children:e.jsxs(Rt,{className:"h-9",children:[e.jsxs(He,{value:"visual",className:"text-xs sm:text-sm px-2 sm:px-3",children:[e.jsx(MN,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1"}),""]}),e.jsxs(He,{value:"source",className:"text-xs sm:text-sm px-2 sm:px-3",children:[e.jsx(AN,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1"}),""]})]})}),e.jsxs(N,{onClick:z==="visual"?Ct:jt,disabled:c||h||!f||g,size:"sm",variant:"outline",className:"flex-1 sm:flex-none",children:[e.jsx(br,{className:"mr-2 h-4 w-4",strokeWidth:2,fill:"none"}),c?"...":h?"...":f?"":""]}),e.jsxs(ps,{children:[e.jsx(Qs,{asChild:!0,children:e.jsxs(N,{disabled:c||h||g,size:"sm",className:"flex-1 sm:flex-none",children:[e.jsx(Nr,{className:"mr-2 h-4 w-4"}),g?"...":f?"":""]})}),e.jsxs(cs,{children:[e.jsxs(os,{children:[e.jsx(us,{children:""}),e.jsx(ms,{className:"space-y-3",asChild:!0,children:e.jsxs("div",{children:[e.jsx("p",{children:f?",":","}),e.jsxs(ua,{className:"border-yellow-500/50 bg-yellow-500/10",children:[e.jsx(Xt,{className:"h-4 w-4 text-yellow-600"}),e.jsxs(ma,{className:"text-yellow-900 dark:text-yellow-100",children:[e.jsx("strong",{children:":"}),",, ",e.jsx("code",{className:"px-1 py-0.5 bg-yellow-200 dark:bg-yellow-900 rounded",children:"Ctrl+C"})," ",e.jsxs(Os,{children:[e.jsx(ni,{asChild:!0,children:e.jsxs("button",{className:"ml-1 text-yellow-700 dark:text-yellow-300 underline hover:text-yellow-800 dark:hover:text-yellow-200 inline-flex items-center gap-1",children:[e.jsx(ro,{className:"h-3 w-3"}),""]})}),e.jsxs(Es,{className:"max-w-2xl",children:[e.jsxs(zs,{children:[e.jsx(Ms,{children:""}),e.jsx($s,{children:""})]}),e.jsxs(Kt,{defaultValue:"windows",className:"w-full",children:[e.jsxs(Rt,{className:"grid w-full grid-cols-3",children:[e.jsx(He,{value:"windows",children:"Windows"}),e.jsx(He,{value:"macos",children:"macOS"}),e.jsx(He,{value:"linux",children:"Linux"})]}),e.jsxs(We,{value:"windows",className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-semibold",children:""}),e.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-sm text-muted-foreground",children:[e.jsxs("li",{children:[" ",e.jsx("code",{className:"px-1 py-0.5 bg-muted rounded",children:"Ctrl + Shift + Esc"})," "]}),e.jsxs("li",{children:['"""" ',e.jsx("code",{className:"px-1 py-0.5 bg-muted rounded",children:"python.exe"})]}),e.jsx("li",{children:'""'})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-semibold",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:" PowerShell "}),e.jsxs("div",{className:"bg-muted p-3 rounded-md font-mono text-sm",children:[e.jsx("p",{children:"# "}),e.jsx("p",{children:'Get-Process python | Where-Object {$_.MainWindowTitle -eq ""}'}),e.jsx("p",{className:"mt-2",children:"#  Python "}),e.jsx("p",{children:"Stop-Process -Name python -Force"})]})]})]}),e.jsxs(We,{value:"macos",className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-semibold",children:""}),e.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-sm text-muted-foreground",children:[e.jsxs("li",{children:[" ",e.jsx("code",{className:"px-1 py-0.5 bg-muted rounded",children:"Cmd + Space"}),'  Spotlight""']}),e.jsxs("li",{children:[" ",e.jsx("code",{className:"px-1 py-0.5 bg-muted rounded",children:"Python"})]}),e.jsx("li",{children:" X "})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-semibold",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""}),e.jsxs("div",{className:"bg-muted p-3 rounded-md font-mono text-sm",children:[e.jsx("p",{children:"# "}),e.jsx("p",{children:"ps aux | grep python | grep -v grep"}),e.jsx("p",{className:"mt-2",children:"#  PID "}),e.jsx("p",{children:"kill -9 <PID>"}),e.jsx("p",{className:"mt-2",children:"#  Python "}),e.jsx("p",{children:"pkill -9 python"})]})]})]}),e.jsxs(We,{value:"linux",className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-semibold",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""}),e.jsxs("div",{className:"bg-muted p-3 rounded-md font-mono text-sm",children:[e.jsx("p",{children:"# "}),e.jsx("p",{children:"ps aux | grep python | grep -v grep"}),e.jsx("p",{className:"mt-2",children:"#  PID "}),e.jsx("p",{children:"kill -9 <PID>"}),e.jsx("p",{className:"mt-2",children:"#  pkill "}),e.jsx("p",{children:'pkill -9 -f "bot.py"'}),e.jsx("p",{className:"mt-2",children:"#  Python "}),e.jsx("p",{children:"pkill -9 python"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-semibold",children:" htop"}),e.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-sm text-muted-foreground",children:[e.jsxs("li",{children:[" ",e.jsx("code",{className:"px-1 py-0.5 bg-muted rounded",children:"htop"})]}),e.jsxs("li",{children:[" ",e.jsx("code",{className:"px-1 py-0.5 bg-muted rounded",children:"F3"}),"  python"]}),e.jsxs("li",{children:[" ",e.jsx("code",{className:"px-1 py-0.5 bg-muted rounded",children:"F9"}),"  SIGKILL"]})]})]})]})]}),e.jsx(Is,{children:e.jsx(Zu,{asChild:!0,children:e.jsx(N,{variant:"outline",children:""})})})]})]})]})]})]})})]}),e.jsxs(ds,{children:[e.jsx(xs,{children:""}),e.jsx(hs,{onClick:f?rl:kt,children:f?"":""})]})]})]})]})]}),e.jsxs(ua,{children:[e.jsx(Xt,{className:"h-4 w-4"}),e.jsxs(ma,{children:["",e.jsx("strong",{children:""}),'""']})]}),z==="source"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs(ua,{children:[e.jsx(Xt,{className:"h-4 w-4"}),e.jsxs(ma,{children:[e.jsx("strong",{children:""})," TOML  TOML ",U&&e.jsx("span",{className:"text-destructive font-semibold ml-2",children:"  TOML "})]})]}),e.jsx(I0,{value:L,onChange:Se=>{K(Se),j(!0),U&&R(!1)},language:"toml",theme:"dark",height:"calc(100vh - 280px)",minHeight:"500px",placeholder:"TOML "})]}),z==="visual"&&e.jsx(e.Fragment,{children:e.jsxs(Kt,{defaultValue:"bot",className:"w-full",children:[e.jsx("div",{className:"overflow-x-auto -mx-4 px-4 sm:mx-0 sm:px-0",children:e.jsxs(Rt,{className:"inline-flex w-auto min-w-full sm:grid sm:w-full sm:grid-cols-5 lg:grid-cols-10",children:[e.jsx(He,{value:"bot",className:"flex-shrink-0",children:""}),e.jsx(He,{value:"personality",className:"flex-shrink-0",children:""}),e.jsx(He,{value:"chat",className:"flex-shrink-0",children:""}),e.jsx(He,{value:"expression",className:"flex-shrink-0",children:""}),e.jsx(He,{value:"features",className:"flex-shrink-0",children:""}),e.jsx(He,{value:"processing",className:"flex-shrink-0",children:""}),e.jsx(He,{value:"mood",className:"flex-shrink-0",children:""}),e.jsx(He,{value:"voice",className:"flex-shrink-0",children:""}),e.jsx(He,{value:"lpmm",className:"flex-shrink-0",children:""}),e.jsx(He,{value:"other",className:"flex-shrink-0",children:""})]})}),e.jsx(We,{value:"bot",className:"space-y-4",children:V&&e.jsx(P0,{config:V,onChange:E})}),e.jsx(We,{value:"personality",className:"space-y-4",children:B&&e.jsx(W0,{config:B,onChange:X})}),e.jsx(We,{value:"chat",className:"space-y-4",children:w&&e.jsx(ew,{config:w,onChange:D})}),e.jsx(We,{value:"expression",className:"space-y-4",children:te&&e.jsx(tw,{config:te,onChange:xe})}),e.jsx(We,{value:"features",className:"space-y-4",children:be&&ve&&Ne&&e.jsx(aw,{emojiConfig:be,memoryConfig:ve,toolConfig:Ne,onEmojiChange:ye,onMemoryChange:pe,onToolChange:y})}),e.jsx(We,{value:"processing",className:"space-y-4",children:Q&&ge&&O&&A&&e.jsx(lw,{keywordReactionConfig:Q,responsePostProcessConfig:ge,chineseTypoConfig:O,responseSplitterConfig:A,onKeywordReactionChange:oe,onResponsePostProcessChange:le,onChineseTypoChange:F,onResponseSplitterChange:W})}),e.jsx(We,{value:"mood",className:"space-y-4",children:q&&e.jsx(nw,{config:q,onChange:H})}),e.jsx(We,{value:"voice",className:"space-y-4",children:ne&&e.jsx(iw,{config:ne,onChange:S})}),e.jsx(We,{value:"lpmm",className:"space-y-4",children:me&&e.jsx(rw,{config:me,onChange:he})}),e.jsxs(We,{value:"other",className:"space-y-4",children:[_e&&e.jsx(cw,{config:_e,onChange:Me}),ss&&e.jsx(ow,{config:ss,onChange:Ie}),Rs&&e.jsx(dw,{config:Rs,onChange:qs}),ie&&e.jsx(uw,{config:ie,onChange:we})]})]})}),v&&e.jsx(Iu,{onRestartComplete:cl,onRestartFailed:ol})]})})}function P0({config:n,onChange:r}){const c=()=>{r({...n,platforms:[...n.platforms,""]})},d=g=>{r({...n,platforms:n.platforms.filter((_,v)=>v!==g)})},h=(g,_)=>{const v=[...n.platforms];v[g]=_,r({...n,platforms:v})},x=()=>{r({...n,alias_names:[...n.alias_names,""]})},f=g=>{r({...n,alias_names:n.alias_names.filter((_,v)=>v!==g)})},j=(g,_)=>{const v=[...n.alias_names];v[g]=_,r({...n,alias_names:v})};return e.jsx("div",{className:"rounded-lg border bg-card p-6 space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:""}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"platform",children:""}),e.jsx(ce,{id:"platform",value:n.platform,onChange:g=>r({...n,platform:g.target.value}),placeholder:"qq"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"qq_account",children:"QQ"}),e.jsx(ce,{id:"qq_account",value:n.qq_account,onChange:g=>r({...n,qq_account:g.target.value}),placeholder:"123456789"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"nickname",children:""}),e.jsx(ce,{id:"nickname",value:n.nickname,onChange:g=>r({...n,nickname:g.target.value}),placeholder:""})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(b,{children:""}),e.jsxs(N,{onClick:c,size:"sm",variant:"outline",children:[e.jsx(gt,{className:"h-4 w-4 mr-1"}),""]})]}),e.jsxs("div",{className:"space-y-2",children:[n.platforms.map((g,_)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ce,{value:g,onChange:v=>h(_,v.target.value),placeholder:"wx:114514"}),e.jsxs(ps,{children:[e.jsx(Qs,{asChild:!0,children:e.jsx(N,{size:"icon",variant:"outline",children:e.jsx(ns,{className:"h-4 w-4"})})}),e.jsxs(cs,{children:[e.jsxs(os,{children:[e.jsx(us,{children:""}),e.jsxs(ms,{children:[' "',g||"()",'" ']})]}),e.jsxs(ds,{children:[e.jsx(xs,{children:""}),e.jsx(hs,{onClick:()=>d(_),children:""})]})]})]})]},_)),n.platforms.length===0&&e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(b,{children:""}),e.jsxs(N,{onClick:x,size:"sm",variant:"outline",children:[e.jsx(gt,{className:"h-4 w-4 mr-1"}),""]})]}),e.jsxs("div",{className:"space-y-2",children:[n.alias_names.map((g,_)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ce,{value:g,onChange:v=>j(_,v.target.value),placeholder:""}),e.jsxs(ps,{children:[e.jsx(Qs,{asChild:!0,children:e.jsx(N,{size:"icon",variant:"outline",children:e.jsx(ns,{className:"h-4 w-4"})})}),e.jsxs(cs,{children:[e.jsxs(os,{children:[e.jsx(us,{children:""}),e.jsxs(ms,{children:[' "',g||"()",'" ']})]}),e.jsxs(ds,{children:[e.jsx(xs,{children:""}),e.jsx(hs,{onClick:()=>f(_),children:""})]})]})]})]},_)),n.alias_names.length===0&&e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]})]})]})]})})}function W0({config:n,onChange:r}){const c=()=>{r({...n,states:[...n.states,""]})},d=x=>{r({...n,states:n.states.filter((f,j)=>j!==x)})},h=(x,f)=>{const j=[...n.states];j[x]=f,r({...n,states:j})};return e.jsx("div",{className:"rounded-lg border bg-card p-6 space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:""}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"personality",children:""}),e.jsx(Us,{id:"personality",value:n.personality,onChange:x=>r({...n,personality:x.target.value}),placeholder:"120",rows:3}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"120"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"reply_style",children:""}),e.jsx(Us,{id:"reply_style",value:n.reply_style,onChange:x=>r({...n,reply_style:x.target.value}),placeholder:"",rows:3})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"interest",children:""}),e.jsx(Us,{id:"interest",value:n.interest,onChange:x=>r({...n,interest:x.target.value}),placeholder:"",rows:2})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"plan_style",children:""}),e.jsx(Us,{id:"plan_style",value:n.plan_style,onChange:x=>r({...n,plan_style:x.target.value}),placeholder:"",rows:5})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"visual_style",children:""}),e.jsx(Us,{id:"visual_style",value:n.visual_style,onChange:x=>r({...n,visual_style:x.target.value}),placeholder:"",rows:3})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"private_plan_style",children:""}),e.jsx(Us,{id:"private_plan_style",value:n.private_plan_style,onChange:x=>r({...n,private_plan_style:x.target.value}),placeholder:"",rows:4})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(b,{children:""}),e.jsxs(N,{onClick:c,size:"sm",variant:"outline",children:[e.jsx(gt,{className:"h-4 w-4 mr-1"}),""]})]}),e.jsx("div",{className:"space-y-2",children:n.states.map((x,f)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Us,{value:x,onChange:j=>h(f,j.target.value),placeholder:"",rows:2}),e.jsxs(ps,{children:[e.jsx(Qs,{asChild:!0,children:e.jsx(N,{size:"icon",variant:"outline",children:e.jsx(ns,{className:"h-4 w-4"})})}),e.jsxs(cs,{children:[e.jsxs(os,{children:[e.jsx(us,{children:""}),e.jsx(ms,{children:""})]}),e.jsxs(ds,{children:[e.jsx(xs,{children:""}),e.jsx(hs,{onClick:()=>d(f),children:""})]})]})]})]},f))})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"state_probability",children:""}),e.jsx(ce,{id:"state_probability",type:"number",step:"0.1",min:"0",max:"1",value:n.state_probability,onChange:x=>r({...n,state_probability:parseFloat(x.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" personality 0.0-1.0"})]})]})]})})}function ew({config:n,onChange:r}){const c=()=>{r({...n,talk_value_rules:[...n.talk_value_rules,{target:"",time:"00:00-23:59",value:1}]})},d=j=>{r({...n,talk_value_rules:n.talk_value_rules.filter((g,_)=>_!==j)})},h=(j,g,_)=>{const v=[...n.talk_value_rules];v[j]={...v[j],[g]:_},r({...n,talk_value_rules:v})},x=({value:j,onChange:g})=>{const[_,v]=u.useState("00"),[k,z]=u.useState("00"),[T,L]=u.useState("23"),[K,U]=u.useState("59");u.useEffect(()=>{const ee=j.split("-");if(ee.length===2){const[V,E]=ee,[B,X]=V.split(":"),[w,D]=E.split(":");B&&v(B.padStart(2,"0")),X&&z(X.padStart(2,"0")),w&&L(w.padStart(2,"0")),D&&U(D.padStart(2,"0"))}},[j]);const R=(ee,V,E,B)=>{const X=`${ee}:${V}-${E}:${B}`;g(X)};return e.jsxs(Da,{children:[e.jsx(Oa,{asChild:!0,children:e.jsxs(N,{variant:"outline",className:"w-full justify-start font-mono text-sm",children:[e.jsx(Wn,{className:"h-4 w-4 mr-2"}),j||""]})}),e.jsx(Na,{className:"w-80",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm mb-3",children:""}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:gap-3",children:[e.jsxs("div",{children:[e.jsx(b,{className:"text-xs",children:""}),e.jsxs(Qe,{value:_,onValueChange:ee=>{v(ee),R(ee,k,T,K)},children:[e.jsx(Ge,{children:e.jsx($e,{})}),e.jsx(Ve,{children:Array.from({length:24},(ee,V)=>V).map(ee=>e.jsx(ue,{value:ee.toString().padStart(2,"0"),children:ee.toString().padStart(2,"0")},ee))})]})]}),e.jsxs("div",{children:[e.jsx(b,{className:"text-xs",children:""}),e.jsxs(Qe,{value:k,onValueChange:ee=>{z(ee),R(_,ee,T,K)},children:[e.jsx(Ge,{children:e.jsx($e,{})}),e.jsx(Ve,{children:Array.from({length:60},(ee,V)=>V).map(ee=>e.jsx(ue,{value:ee.toString().padStart(2,"0"),children:ee.toString().padStart(2,"0")},ee))})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm mb-3",children:""}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:gap-3",children:[e.jsxs("div",{children:[e.jsx(b,{className:"text-xs",children:""}),e.jsxs(Qe,{value:T,onValueChange:ee=>{L(ee),R(_,k,ee,K)},children:[e.jsx(Ge,{children:e.jsx($e,{})}),e.jsx(Ve,{children:Array.from({length:24},(ee,V)=>V).map(ee=>e.jsx(ue,{value:ee.toString().padStart(2,"0"),children:ee.toString().padStart(2,"0")},ee))})]})]}),e.jsxs("div",{children:[e.jsx(b,{className:"text-xs",children:""}),e.jsxs(Qe,{value:K,onValueChange:ee=>{U(ee),R(_,k,T,ee)},children:[e.jsx(Ge,{children:e.jsx($e,{})}),e.jsx(Ve,{children:Array.from({length:60},(ee,V)=>V).map(ee=>e.jsx(ue,{value:ee.toString().padStart(2,"0"),children:ee.toString().padStart(2,"0")},ee))})]})]})]})]})]})})]})},f=({rule:j})=>{const g=`{ target = "${j.target}", time = "${j.time}", value = ${j.value.toFixed(1)} }`;return e.jsxs(Da,{children:[e.jsx(Oa,{asChild:!0,children:e.jsxs(N,{variant:"outline",size:"sm",children:[e.jsx(Zt,{className:"h-4 w-4 mr-1"}),""]})}),e.jsx(Na,{className:"w-96",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-sm",children:""}),e.jsx("div",{className:"rounded-md bg-muted p-3 font-mono text-xs break-all",children:g}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" bot_config.toml "})]})})]})};return e.jsxs("div",{className:"rounded-lg border bg-card p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:""}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"talk_value",children:""}),e.jsx(ce,{id:"talk_value",type:"number",step:"0.1",min:"0",max:"1",value:n.talk_value,onChange:j=>r({...n,talk_value:parseFloat(j.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" 0-1"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(qe,{id:"mentioned_bot_reply",checked:n.mentioned_bot_reply,onCheckedChange:j=>r({...n,mentioned_bot_reply:j})}),e.jsx(b,{htmlFor:"mentioned_bot_reply",className:"cursor-pointer",children:""})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"max_context_size",children:""}),e.jsx(ce,{id:"max_context_size",type:"number",min:"1",value:n.max_context_size,onChange:j=>r({...n,max_context_size:parseInt(j.target.value)})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"planner_smooth",children:""}),e.jsx(ce,{id:"planner_smooth",type:"number",step:"1",min:"0",value:n.planner_smooth,onChange:j=>r({...n,planner_smooth:parseFloat(j.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" planner  1-50 "})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(qe,{id:"enable_talk_value_rules",checked:n.enable_talk_value_rules,onCheckedChange:j=>r({...n,enable_talk_value_rules:j})}),e.jsx(b,{htmlFor:"enable_talk_value_rules",className:"cursor-pointer",children:""})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(qe,{id:"include_planner_reasoning",checked:n.include_planner_reasoning,onCheckedChange:j=>r({...n,include_planner_reasoning:j})}),e.jsx(b,{htmlFor:"include_planner_reasoning",className:"cursor-pointer",children:" planner  replyer"})]})]})]}),n.enable_talk_value_rules&&e.jsxs("div",{className:"border-t pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-base font-semibold",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"ID"})]}),e.jsxs(N,{onClick:c,size:"sm",children:[e.jsx(gt,{className:"h-4 w-4 mr-1"}),""]})]}),n.talk_value_rules&&n.talk_value_rules.length>0?e.jsx("div",{className:"space-y-4",children:n.talk_value_rules.map((j,g)=>e.jsxs("div",{className:"rounded-lg border p-4 bg-muted/50 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm font-medium text-muted-foreground",children:[" #",g+1]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(f,{rule:j}),e.jsxs(ps,{children:[e.jsx(Qs,{asChild:!0,children:e.jsx(N,{variant:"ghost",size:"sm",children:e.jsx(ns,{className:"h-4 w-4 text-destructive"})})}),e.jsxs(cs,{children:[e.jsxs(os,{children:[e.jsx(us,{children:""}),e.jsxs(ms,{children:[" #",g+1," "]})]}),e.jsxs(ds,{children:[e.jsx(xs,{children:""}),e.jsx(hs,{onClick:()=>d(g),children:""})]})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{className:"text-xs font-medium",children:""}),e.jsxs(Qe,{value:j.target===""?"global":"specific",onValueChange:_=>{_==="global"?h(g,"target",""):h(g,"target","qq::group")},children:[e.jsx(Ge,{children:e.jsx($e,{})}),e.jsxs(Ve,{children:[e.jsx(ue,{value:"global",children:""}),e.jsx(ue,{value:"specific",children:""})]})]})]}),j.target!==""&&(()=>{const _=j.target.split(":"),v=_[0]||"qq",k=_[1]||"",z=_[2]||"group";return e.jsxs("div",{className:"grid gap-4 p-4 rounded-lg bg-muted/50",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{className:"text-xs font-medium",children:""}),e.jsxs(Qe,{value:v,onValueChange:T=>{h(g,"target",`${T}:${k}:${z}`)},children:[e.jsx(Ge,{children:e.jsx($e,{})}),e.jsxs(Ve,{children:[e.jsx(ue,{value:"qq",children:"QQ"}),e.jsx(ue,{value:"wx",children:""})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{className:"text-xs font-medium",children:" ID"}),e.jsx(ce,{value:k,onChange:T=>{h(g,"target",`${v}:${T.target.value}:${z}`)},placeholder:" ID",className:"font-mono text-sm"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{className:"text-xs font-medium",children:""}),e.jsxs(Qe,{value:z,onValueChange:T=>{h(g,"target",`${v}:${k}:${T}`)},children:[e.jsx(Ge,{children:e.jsx($e,{})}),e.jsxs(Ve,{children:[e.jsx(ue,{value:"group",children:"group"}),e.jsx(ue,{value:"private",children:"private"})]})]})]})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[" ID",j.target||""]})]})})(),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{className:"text-xs font-medium",children:" (Time)"}),e.jsx(x,{value:j.time,onChange:_=>h(g,"time",_)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" 23:00-02:00"})]}),e.jsxs("div",{className:"grid gap-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(b,{htmlFor:`rule-value-${g}`,className:"text-xs font-medium",children:" (Value)"}),e.jsx(ce,{id:`rule-value-${g}`,type:"number",step:"0.01",min:"0.01",max:"1",value:j.value,onChange:_=>{const v=parseFloat(_.target.value);isNaN(v)||h(g,"value",Math.max(.01,Math.min(1,v)))},className:"w-20 h-8 text-xs"})]}),e.jsx(za,{value:[j.value],onValueChange:_=>h(g,"value",_[0]),min:.01,max:1,step:.01,className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsx("span",{children:"0.01 ()"}),e.jsx("span",{children:"0.5"}),e.jsx("span",{children:"1.0 ()"})]})]})]})]},g))}):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:e.jsx("p",{className:"text-sm",children:'""'})}),e.jsxs("div",{className:"mt-4 p-4 bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:[e.jsx("h5",{className:"text-sm font-semibold text-blue-900 dark:text-blue-100 mb-2",children:" "}),e.jsxs("ul",{className:"text-xs text-blue-800 dark:text-blue-200 space-y-1",children:[e.jsxs("li",{children:[" ",e.jsx("strong",{children:"Target "}),""]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"Target "}),"platform:id:type"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:""}),""]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:""})," 23:00-02:00 112"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:""})," 0-10 1 "]})]})]})]})]})}function sw({member:n,groupIndex:r,memberIndex:c,availableChatIds:d,onUpdate:h,onRemove:x}){const f=d.includes(n)||n==="*",[j,g]=u.useState(!f);return e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"flex-1 flex gap-2",children:j?e.jsxs(e.Fragment,{children:[e.jsx(ce,{value:n,onChange:_=>h(r,c,_.target.value),placeholder:' "*"  "qq:123456:group"',className:"flex-1"}),d.length>0&&e.jsx(N,{size:"sm",variant:"outline",onClick:()=>g(!1),title:"",children:""})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Qe,{value:n,onValueChange:_=>h(r,c,_),children:[e.jsx(Ge,{className:"flex-1",children:e.jsx($e,{placeholder:""})}),e.jsxs(Ve,{children:[e.jsx(ue,{value:"*",children:"* ()"}),d.map((_,v)=>e.jsx(ue,{value:_,children:_},v))]})]}),e.jsx(N,{size:"sm",variant:"outline",onClick:()=>g(!0),title:"",children:""})]})}),e.jsxs(ps,{children:[e.jsx(Qs,{asChild:!0,children:e.jsx(N,{size:"icon",variant:"outline",children:e.jsx(ns,{className:"h-4 w-4"})})}),e.jsxs(cs,{children:[e.jsxs(os,{children:[e.jsx(us,{children:""}),e.jsxs(ms,{children:[' "',n||"()",'" ']})]}),e.jsxs(ds,{children:[e.jsx(xs,{children:""}),e.jsx(hs,{onClick:()=>x(r,c),children:""})]})]})]})]})}function tw({config:n,onChange:r}){const c=()=>{r({...n,learning_list:[...n.learning_list,["","enable","enable","1.0"]]})},d=k=>{r({...n,learning_list:n.learning_list.filter((z,T)=>T!==k)})},h=(k,z,T)=>{const L=[...n.learning_list];L[k][z]=T,r({...n,learning_list:L})},x=({rule:k})=>{const z=`["${k[0]}", "${k[1]}", "${k[2]}", "${k[3]}"]`;return e.jsxs(Da,{children:[e.jsx(Oa,{asChild:!0,children:e.jsxs(N,{variant:"outline",size:"sm",children:[e.jsx(Zt,{className:"h-4 w-4 mr-1"}),""]})}),e.jsx(Na,{className:"w-96",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-sm",children:""}),e.jsx("div",{className:"rounded-md bg-muted p-3 font-mono text-xs break-all",children:z}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" bot_config.toml "})]})})]})},f=()=>{r({...n,expression_groups:[...n.expression_groups,[]]})},j=k=>{r({...n,expression_groups:n.expression_groups.filter((z,T)=>T!==k)})},g=k=>{const z=[...n.expression_groups];z[k]=[...z[k],""],r({...n,expression_groups:z})},_=(k,z)=>{const T=[...n.expression_groups];T[k]=T[k].filter((L,K)=>K!==z),r({...n,expression_groups:T})},v=(k,z,T)=>{const L=[...n.expression_groups];L[k][z]=T,r({...n,expression_groups:L})};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"rounded-lg border bg-card p-6 space-y-6",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:""})]}),e.jsxs(N,{onClick:c,size:"sm",variant:"outline",children:[e.jsx(gt,{className:"h-4 w-4 mr-1"}),""]})]}),e.jsxs("div",{className:"space-y-4",children:[n.learning_list.map((k,z)=>{const T=n.learning_list.some((V,E)=>E!==z&&V[0]===""),L=k[0]==="",K=k[0].split(":"),U=K[0]||"qq",R=K[1]||"",ee=K[2]||"group";return e.jsxs("div",{className:"rounded-lg border p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm font-medium",children:[" ",z+1," ",L&&""]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x,{rule:k}),e.jsxs(ps,{children:[e.jsx(Qs,{asChild:!0,children:e.jsx(N,{size:"sm",variant:"ghost",children:e.jsx(ns,{className:"h-4 w-4"})})}),e.jsxs(cs,{children:[e.jsxs(os,{children:[e.jsx(us,{children:""}),e.jsxs(ms,{children:[" ",z+1," "]})]}),e.jsxs(ds,{children:[e.jsx(xs,{children:""}),e.jsx(hs,{onClick:()=>d(z),children:""})]})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{className:"text-xs font-medium",children:""}),e.jsxs(Qe,{value:L?"global":"specific",onValueChange:V=>{V==="global"?h(z,0,""):h(z,0,"qq::group")},disabled:T&&!L,children:[e.jsx(Ge,{children:e.jsx($e,{})}),e.jsxs(Ve,{children:[e.jsx(ue,{value:"global",children:""}),e.jsx(ue,{value:"specific",disabled:T&&!L,children:""})]})]}),T&&!L&&e.jsx("p",{className:"text-xs text-amber-600",children:""})]}),!L&&e.jsxs("div",{className:"grid gap-4 p-4 rounded-lg bg-muted/50",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{className:"text-xs font-medium",children:""}),e.jsxs(Qe,{value:U,onValueChange:V=>{h(z,0,`${V}:${R}:${ee}`)},children:[e.jsx(Ge,{children:e.jsx($e,{})}),e.jsxs(Ve,{children:[e.jsx(ue,{value:"qq",children:"QQ"}),e.jsx(ue,{value:"wx",children:""})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{className:"text-xs font-medium",children:" ID"}),e.jsx(ce,{value:R,onChange:V=>{h(z,0,`${U}:${V.target.value}:${ee}`)},placeholder:" ID",className:"font-mono text-sm"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{className:"text-xs font-medium",children:""}),e.jsxs(Qe,{value:ee,onValueChange:V=>{h(z,0,`${U}:${R}:${V}`)},children:[e.jsx(Ge,{children:e.jsx($e,{})}),e.jsxs(Ve,{children:[e.jsx(ue,{value:"group",children:"group"}),e.jsx(ue,{value:"private",children:"private"})]})]})]})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[" ID",k[0]||""]})]}),e.jsx("div",{className:"grid gap-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(b,{className:"text-xs font-medium",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:""})]}),e.jsx(qe,{checked:k[1]==="enable",onCheckedChange:V=>h(z,1,V?"enable":"disable")})]})}),e.jsx("div",{className:"grid gap-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(b,{className:"text-xs font-medium",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:""})]}),e.jsx(qe,{checked:k[2]==="enable",onCheckedChange:V=>h(z,2,V?"enable":"disable")})]})}),e.jsxs("div",{className:"grid gap-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(b,{className:"text-xs font-medium",children:""}),e.jsx(ce,{type:"number",step:"0.1",min:"0",max:"5",value:k[3],onChange:V=>{const E=parseFloat(V.target.value);isNaN(E)||h(z,3,Math.max(0,Math.min(5,E)).toFixed(1))},className:"w-20 h-8 text-xs"})]}),e.jsx(za,{value:[parseFloat(k[3])||1],onValueChange:V=>h(z,3,V[0].toFixed(1)),min:0,max:5,step:.1,className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsx("span",{children:"0 ()"}),e.jsx("span",{children:"2.5"}),e.jsx("span",{children:"5.0 ()"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" = 300/"})]})]})]},z)}),n.learning_list.length===0&&e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:'""'})]})]})}),e.jsx("div",{className:"rounded-lg border bg-card p-6 space-y-6",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:""})]}),e.jsxs(N,{onClick:f,size:"sm",variant:"outline",children:[e.jsx(gt,{className:"h-4 w-4 mr-1"}),""]})]}),e.jsxs("div",{className:"space-y-4",children:[n.expression_groups.map((k,z)=>{const T=n.learning_list.map(L=>L[0]).filter(L=>L!=="");return e.jsxs("div",{className:"rounded-lg border p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm font-medium",children:[" ",z+1,k.length===1&&k[0]==="*"&&""]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(N,{onClick:()=>g(z),size:"sm",variant:"outline",children:e.jsx(gt,{className:"h-4 w-4"})}),e.jsxs(ps,{children:[e.jsx(Qs,{asChild:!0,children:e.jsx(N,{size:"sm",variant:"ghost",children:e.jsx(ns,{className:"h-4 w-4"})})}),e.jsxs(cs,{children:[e.jsxs(os,{children:[e.jsx(us,{children:""}),e.jsxs(ms,{children:[" ",z+1," "]})]}),e.jsxs(ds,{children:[e.jsx(xs,{children:""}),e.jsx(hs,{onClick:()=>j(z),children:""})]})]})]})]})]}),e.jsx("div",{className:"space-y-2",children:k.map((L,K)=>e.jsx(sw,{member:L,groupIndex:z,memberIndex:K,availableChatIds:T,onUpdate:v,onRemove:_},`${z}-${K}`))}),e.jsx("p",{className:"text-xs text-muted-foreground",children:' "*" '})]},z)}),n.expression_groups.length===0&&e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:'""'})]})]})})]})}function aw({emojiConfig:n,memoryConfig:r,toolConfig:c,onEmojiChange:d,onMemoryChange:h,onToolChange:x}){return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"rounded-lg border bg-card p-6 space-y-4",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:""}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(qe,{id:"enable_tool",checked:c.enable_tool,onCheckedChange:f=>x({...c,enable_tool:f})}),e.jsx(b,{htmlFor:"enable_tool",className:"cursor-pointer",children:""})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:""})]})}),e.jsx("div",{className:"rounded-lg border bg-card p-6 space-y-4",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:""}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"max_agent_iterations",children:""}),e.jsx(ce,{id:"max_agent_iterations",type:"number",min:"1",value:r.max_agent_iterations,onChange:f=>h({...r,max_agent_iterations:parseInt(f.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" 1"})]})]})}),e.jsx("div",{className:"rounded-lg border bg-card p-6 space-y-4",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:""}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"emoji_chance",children:""}),e.jsx(ce,{id:"emoji_chance",type:"number",step:"0.1",min:"0",max:"1",value:n.emoji_chance,onChange:f=>d({...n,emoji_chance:parseFloat(f.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" 0-1"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"max_reg_num",children:""}),e.jsx(ce,{id:"max_reg_num",type:"number",min:"1",value:n.max_reg_num,onChange:f=>d({...n,max_reg_num:parseInt(f.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"check_interval",children:""}),e.jsx(ce,{id:"check_interval",type:"number",min:"1",value:n.check_interval,onChange:f=>d({...n,check_interval:parseInt(f.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(qe,{id:"do_replace",checked:n.do_replace,onCheckedChange:f=>d({...n,do_replace:f})}),e.jsx(b,{htmlFor:"do_replace",className:"cursor-pointer",children:""})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(qe,{id:"steal_emoji",checked:n.steal_emoji,onCheckedChange:f=>d({...n,steal_emoji:f})}),e.jsx(b,{htmlFor:"steal_emoji",className:"cursor-pointer",children:""})]}),e.jsx("p",{className:"text-xs text-muted-foreground -mt-2",children:""}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(qe,{id:"content_filtration",checked:n.content_filtration,onCheckedChange:f=>d({...n,content_filtration:f})}),e.jsx(b,{htmlFor:"content_filtration",className:"cursor-pointer",children:""})]}),n.content_filtration&&e.jsxs("div",{className:"grid gap-2 pl-6 border-l-2 border-primary/20",children:[e.jsx(b,{htmlFor:"filtration_prompt",children:""}),e.jsx(ce,{id:"filtration_prompt",value:n.filtration_prompt,onChange:f=>d({...n,filtration_prompt:f.target.value}),placeholder:""}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})]})]})})]})}function lw({keywordReactionConfig:n,responsePostProcessConfig:r,chineseTypoConfig:c,responseSplitterConfig:d,onKeywordReactionChange:h,onResponsePostProcessChange:x,onChineseTypoChange:f,onResponseSplitterChange:j}){const g=()=>{h({...n,regex_rules:[...n.regex_rules,{regex:[""],reaction:""}]})},_=E=>{h({...n,regex_rules:n.regex_rules.filter((B,X)=>X!==E)})},v=(E,B,X)=>{const w=[...n.regex_rules];B==="regex"&&typeof X=="string"?w[E]={...w[E],regex:[X]}:B==="reaction"&&typeof X=="string"&&(w[E]={...w[E],reaction:X}),h({...n,regex_rules:w})},k=({regex:E,reaction:B,onRegexChange:X,onReactionChange:w})=>{const[D,te]=u.useState(!1),[xe,be]=u.useState(""),[ye,ve]=u.useState(null),[pe,Ne]=u.useState(""),[y,q]=u.useState({}),[H,ne]=u.useState(""),S=u.useRef(null),[me,he]=u.useState("build"),Q=O=>O.replace(/\(\?P<([^>]+)>/g,"(?<$1>"),oe=(O,F=0)=>{const A=S.current;if(!A)return;const W=A.selectionStart||0,_e=A.selectionEnd||0,Me=E.substring(0,W)+O+E.substring(_e);X(Me),setTimeout(()=>{const ss=W+O.length+F;A.setSelectionRange(ss,ss),A.focus()},0)};u.useEffect(()=>{if(!E||!xe){ve(null),q({}),ne(B),Ne("");return}try{const O=Q(E),F=new RegExp(O,"g"),A=xe.match(F);ve(A),Ne("");const _e=new RegExp(O).exec(xe);if(_e&&_e.groups){q(_e.groups);let Me=B;Object.entries(_e.groups).forEach(([ss,Ie])=>{Me=Me.replace(new RegExp(`\\[${ss}\\]`,"g"),Ie||"")}),ne(Me)}else q({}),ne(B)}catch(O){Ne(O.message),ve(null),q({}),ne(B)}},[E,xe,B]);const ge=()=>{if(!xe||!ye||ye.length===0)return e.jsx("span",{className:"text-muted-foreground",children:xe||""});try{const O=Q(E),F=new RegExp(O,"g");let A=0;const W=[];let _e;for(;(_e=F.exec(xe))!==null;)_e.index>A&&W.push(e.jsx("span",{children:xe.substring(A,_e.index)},`text-${A}`)),W.push(e.jsx("span",{className:"bg-yellow-200 dark:bg-yellow-900 font-semibold",children:_e[0]},`match-${_e.index}`)),A=_e.index+_e[0].length;return A<xe.length&&W.push(e.jsx("span",{children:xe.substring(A)},`text-${A}`)),e.jsx(e.Fragment,{children:W})}catch{return e.jsx("span",{children:xe})}},le=[{category:"",items:[{label:"",pattern:".",desc:""},{label:"",pattern:"\\d",desc:" 0-9"},{label:"",pattern:"\\D",desc:""},{label:"",pattern:"\\w",desc:""},{label:"",pattern:"\\W",desc:""},{label:"",pattern:"\\s",desc:""},{label:"",pattern:"\\S",desc:""}]},{category:"",items:[{label:"",pattern:"^",desc:""},{label:"",pattern:"$",desc:""},{label:"",pattern:"\\b",desc:""}]},{category:"",items:[{label:"0",pattern:"*",desc:"0"},{label:"1",pattern:"+",desc:"1"},{label:"01",pattern:"?",desc:"01"},{label:"",pattern:"{n}",desc:"nn"},{label:"",pattern:"{m,n}",desc:"mn"}]},{category:"",items:[{label:"",pattern:"()",desc:"",moveCursor:-1},{label:"",pattern:"(?P<name>)",desc:"Python",moveCursor:-1},{label:"",pattern:"(?:)",desc:"",moveCursor:-1}]},{category:"",items:[{label:"",pattern:"[]",desc:"",moveCursor:-1},{label:"",pattern:"[^]",desc:"",moveCursor:-1},{label:"",pattern:"[a-z]",desc:"az"},{label:"",pattern:"[\\u4e00-\\u9fa5]",desc:""}]},{category:"",items:[{label:"",pattern:"(?P<word>\\S+)",desc:""},{label:"",pattern:"(?P<sentence>.+)",desc:""},{label:"",pattern:"(?P<num>\\d+)",desc:""},{label:"",pattern:"(?:1|2)",desc:""}]}];return e.jsxs(Os,{open:D,onOpenChange:te,children:[e.jsx(ni,{asChild:!0,children:e.jsxs(N,{variant:"outline",size:"sm",children:[e.jsx(ao,{className:"h-4 w-4 mr-1"}),""]})}),e.jsxs(Es,{className:"max-w-[95vw] sm:max-w-[900px] max-h-[90vh]",children:[e.jsxs(zs,{children:[e.jsx(Ms,{children:""}),e.jsx($s,{className:"text-sm",children:""})]}),e.jsx(es,{className:"max-h-[calc(90vh-120px)]",children:e.jsxs(Kt,{value:me,onValueChange:O=>he(O),className:"w-full",children:[e.jsxs(Rt,{className:"grid w-full grid-cols-2",children:[e.jsx(He,{value:"build",children:" "}),e.jsx(He,{value:"test",children:" "})]}),e.jsxs(We,{value:"build",className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{className:"text-sm font-medium",children:""}),e.jsx(ce,{ref:S,value:E,onChange:O=>X(O.target.value),className:"font-mono text-sm",placeholder:"..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{className:"text-sm font-medium",children:"Reaction "}),e.jsx(Us,{value:B,onChange:O=>w(O.target.value),placeholder:" [] ...",rows:3,className:"text-sm"})]}),e.jsxs("div",{className:"space-y-4 border-t pt-4",children:[le.map(O=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("h5",{className:"text-xs font-semibold text-primary",children:O.category}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:O.items.map(F=>e.jsx(N,{variant:"outline",size:"sm",className:"justify-start h-auto py-2 px-3",onClick:()=>oe(F.pattern,F.moveCursor||0),children:e.jsxs("div",{className:"flex flex-col items-start w-full",children:[e.jsxs("div",{className:"flex items-center gap-2 w-full",children:[e.jsx("span",{className:"text-xs font-medium",children:F.label}),e.jsx("code",{className:"ml-auto text-xs bg-muted px-1.5 py-0.5 rounded font-mono",children:F.pattern})]}),e.jsx("span",{className:"text-xs text-muted-foreground mt-0.5",children:F.desc})]})},F.label))})]},O.category)),e.jsxs("div",{className:"space-y-2 border-t pt-4",children:[e.jsx("h5",{className:"text-xs font-semibold text-primary",children:""}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{variant:"outline",size:"sm",className:"w-full justify-start h-auto py-2 px-3",onClick:()=>X("^(?P<n>\\S{1,20})$"),children:e.jsxs("div",{className:"flex flex-col items-start w-full",children:[e.jsxs("code",{className:"text-xs font-mono bg-muted px-2 py-1 rounded w-full overflow-x-auto",children:["^(?P<n>\\S","{1,20}",")$"]}),e.jsx("span",{className:"text-xs text-muted-foreground mt-1",children:""})]})}),e.jsx(N,{variant:"outline",size:"sm",className:"w-full justify-start h-auto py-2 px-3",onClick:()=>X("(?:[^.\\s]+\\s*)?(?:)?[]\\s*(?P<action>.+?)[.,]?$"),children:e.jsxs("div",{className:"flex flex-col items-start w-full",children:[e.jsx("code",{className:"text-xs font-mono bg-muted px-2 py-1 rounded w-full overflow-x-auto",children:"(?:[^.\\s]+\\s*)?(?:)?[]\\s*(?P<action>.+?)[.,]?$"}),e.jsx("span",{className:"text-xs text-muted-foreground mt-1",children:""})]})}),e.jsx(N,{variant:"outline",size:"sm",className:"w-full justify-start h-auto py-2 px-3",onClick:()=>X("(?P<subject>.+?)(?:||)"),children:e.jsxs("div",{className:"flex flex-col items-start w-full",children:[e.jsx("code",{className:"text-xs font-mono bg-muted px-2 py-1 rounded w-full overflow-x-auto",children:"(?P<subject>.+?)(?:||)"}),e.jsx("span",{className:"text-xs text-muted-foreground mt-1",children:""})]})})]})]})]}),e.jsxs("div",{className:"rounded-md bg-blue-50 dark:bg-blue-950/30 border border-blue-200 dark:border-blue-800 p-3 space-y-1",children:[e.jsx("p",{className:"text-xs font-medium text-blue-900 dark:text-blue-100",children:" "}),e.jsxs("ul",{className:"text-xs text-blue-700 dark:text-blue-300 space-y-1 list-disc list-inside",children:[e.jsx("li",{children:""}),e.jsxs("li",{children:["",e.jsx("code",{className:"bg-blue-100 dark:bg-blue-900 px-1 rounded",children:"(?P<>)"})]}),e.jsxs("li",{children:[" reaction  ",e.jsx("code",{className:"bg-blue-100 dark:bg-blue-900 px-1 rounded",children:"[]"})," "]}),e.jsx("li",{children:""})]})]})]}),e.jsxs(We,{value:"test",className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{className:"text-sm font-medium",children:""}),e.jsx("div",{className:"rounded-md bg-muted p-3 font-mono text-xs break-all",children:E||"()"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"test-text",className:"text-sm font-medium",children:""}),e.jsx(Us,{id:"test-text",value:xe,onChange:O=>be(O.target.value),placeholder:`...
`,className:"min-h-[100px] text-sm"})]}),pe&&e.jsxs("div",{className:"rounded-md bg-destructive/10 border border-destructive/20 p-3",children:[e.jsx("p",{className:"text-sm text-destructive font-medium",children:""}),e.jsx("p",{className:"text-xs text-destructive/80 mt-1",children:pe})]}),!pe&&xe&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex items-center gap-2",children:ye&&ye.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-green-500"}),e.jsxs("span",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:[" (",ye.length," )"]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:""})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{className:"text-sm font-medium",children:""}),e.jsx(es,{className:"h-40 rounded-md bg-muted p-3",children:e.jsx("div",{className:"text-sm break-words",children:ge()})})]}),Object.keys(y).length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{className:"text-sm font-medium",children:""}),e.jsx(es,{className:"h-32 rounded-md border p-3",children:e.jsx("div",{className:"space-y-2",children:Object.entries(y).map(([O,F])=>e.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[e.jsxs("span",{className:"font-mono font-semibold text-primary min-w-[80px]",children:["[",O,"]"]}),e.jsx("span",{className:"text-muted-foreground",children:"="}),e.jsx("span",{className:"font-mono bg-muted px-2 py-0.5 rounded",children:F})]},O))})})]}),Object.keys(y).length>0&&B&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{className:"text-sm font-medium",children:"Reaction "}),e.jsx(es,{className:"h-48 rounded-md bg-blue-50 dark:bg-blue-950/30 border border-blue-200 dark:border-blue-800 p-3",children:e.jsx("div",{className:"text-sm break-words",children:H})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"reaction  [name] "})]})]}),e.jsxs("div",{className:"rounded-md bg-blue-50 dark:bg-blue-950/30 border border-blue-200 dark:border-blue-800 p-3 space-y-1",children:[e.jsx("p",{className:"text-xs font-medium text-blue-900 dark:text-blue-100",children:" "}),e.jsxs("ul",{className:"text-xs text-blue-700 dark:text-blue-300 space-y-1 list-disc list-inside",children:[e.jsx("li",{children:""}),e.jsx("li",{children:""}),e.jsx("li",{children:"Reaction "}),e.jsx("li",{children:""})]})]})]})]})})]})]})},z=()=>{h({...n,keyword_rules:[...n.keyword_rules,{keywords:[],reaction:""}]})},T=E=>{h({...n,keyword_rules:n.keyword_rules.filter((B,X)=>X!==E)})},L=(E,B,X)=>{const w=[...n.keyword_rules];typeof X=="string"&&(w[E]={...w[E],reaction:X}),h({...n,keyword_rules:w})},K=E=>{const B=[...n.keyword_rules];B[E]={...B[E],keywords:[...B[E].keywords||[],""]},h({...n,keyword_rules:B})},U=(E,B)=>{const X=[...n.keyword_rules];X[E]={...X[E],keywords:(X[E].keywords||[]).filter((w,D)=>D!==B)},h({...n,keyword_rules:X})},R=(E,B,X)=>{const w=[...n.keyword_rules],D=[...w[E].keywords||[]];D[B]=X,w[E]={...w[E],keywords:D},h({...n,keyword_rules:w})},ee=({rule:E})=>{const B=`{ regex = [${(E.regex||[]).map(X=>`"${X}"`).join(", ")}], reaction = "${E.reaction}" }`;return e.jsxs(Da,{children:[e.jsx(Oa,{asChild:!0,children:e.jsxs(N,{variant:"outline",size:"sm",children:[e.jsx(Zt,{className:"h-4 w-4 mr-1"}),""]})}),e.jsx(Na,{className:"w-[95vw] sm:w-[500px]",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-sm",children:""}),e.jsx(es,{className:"h-60 rounded-md bg-muted p-3",children:e.jsx("pre",{className:"font-mono text-xs break-all",children:B})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" bot_config.toml "})]})})]})},V=({rule:E})=>{const B=`[[keyword_reaction.keyword_rules]]
keywords = [${(E.keywords||[]).map(X=>`"${X}"`).join(", ")}]
reaction = "${E.reaction}"`;return e.jsxs(Da,{children:[e.jsx(Oa,{asChild:!0,children:e.jsxs(N,{variant:"outline",size:"sm",children:[e.jsx(Zt,{className:"h-4 w-4 mr-1"}),""]})}),e.jsx(Na,{className:"w-[95vw] sm:w-[500px]",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-sm",children:""}),e.jsx(es,{className:"h-60 rounded-md bg-muted p-3",children:e.jsx("pre",{className:"font-mono text-xs whitespace-pre-wrap break-all",children:B})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" bot_config.toml "})]})})]})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"rounded-lg border bg-card p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-base font-semibold",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:""})]}),e.jsxs(N,{onClick:g,size:"sm",variant:"outline",children:[e.jsx(gt,{className:"h-4 w-4 mr-1"}),""]})]}),e.jsxs("div",{className:"space-y-3",children:[n.regex_rules.map((E,B)=>e.jsxs("div",{className:"rounded-lg border p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm font-medium",children:[" ",B+1]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{regex:E.regex&&E.regex[0]||"",reaction:E.reaction,onRegexChange:X=>v(B,"regex",X),onReactionChange:X=>v(B,"reaction",X)}),e.jsx(ee,{rule:E}),e.jsxs(ps,{children:[e.jsx(Qs,{asChild:!0,children:e.jsx(N,{size:"sm",variant:"ghost",children:e.jsx(ns,{className:"h-4 w-4"})})}),e.jsxs(cs,{children:[e.jsxs(os,{children:[e.jsx(us,{children:""}),e.jsxs(ms,{children:[" ",B+1," "]})]}),e.jsxs(ds,{children:[e.jsx(xs,{children:""}),e.jsx(hs,{onClick:()=>_(B),children:""})]})]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{className:"text-xs font-medium",children:"Python "}),e.jsx(ce,{value:E.regex&&E.regex[0]||"",onChange:X=>v(B,"regex",X.target.value),placeholder:"^(?P<n>\\\\S{1,20})$ ",className:"font-mono text-sm"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:' (?P<name>pattern) reaction  [name] ""'})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{className:"text-xs font-medium",children:""}),e.jsx(Us,{value:E.reaction,onChange:X=>v(B,"reaction",X.target.value),placeholder:`...
 [] `,rows:3,className:"text-sm"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" []  [n] "})]})]})]},B)),n.regex_rules.length===0&&e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:'""'})]})]}),e.jsxs("div",{className:"space-y-4 border-t pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-base font-semibold",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:""})]}),e.jsxs(N,{onClick:z,size:"sm",variant:"outline",children:[e.jsx(gt,{className:"h-4 w-4 mr-1"}),""]})]}),e.jsxs("div",{className:"space-y-3",children:[n.keyword_rules.map((E,B)=>e.jsxs("div",{className:"rounded-lg border p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm font-medium",children:[" ",B+1]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V,{rule:E}),e.jsxs(ps,{children:[e.jsx(Qs,{asChild:!0,children:e.jsx(N,{size:"sm",variant:"ghost",children:e.jsx(ns,{className:"h-4 w-4"})})}),e.jsxs(cs,{children:[e.jsxs(os,{children:[e.jsx(us,{children:""}),e.jsxs(ms,{children:[" ",B+1," "]})]}),e.jsxs(ds,{children:[e.jsx(xs,{children:""}),e.jsx(hs,{onClick:()=>T(B),children:""})]})]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(b,{className:"text-xs font-medium",children:""}),e.jsxs(N,{onClick:()=>K(B),size:"sm",variant:"ghost",children:[e.jsx(gt,{className:"h-3 w-3 mr-1"}),""]})]}),e.jsxs("div",{className:"space-y-2",children:[(E.keywords||[]).map((X,w)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ce,{value:X,onChange:D=>R(B,w,D.target.value),placeholder:"",className:"flex-1"}),e.jsx(N,{onClick:()=>U(B,w),size:"sm",variant:"ghost",children:e.jsx(ns,{className:"h-4 w-4"})})]},w)),(!E.keywords||E.keywords.length===0)&&e.jsx("p",{className:"text-xs text-muted-foreground text-center py-2",children:'""'})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{className:"text-xs font-medium",children:""}),e.jsx(Us,{value:E.reaction,onChange:X=>L(B,"reaction",X.target.value),placeholder:"...",rows:3,className:"text-sm"})]})]})]},B)),n.keyword_rules.length===0&&e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:'""'})]})]})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:""}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(qe,{id:"enable_response_post_process",checked:r.enable_response_post_process,onCheckedChange:E=>x({...r,enable_response_post_process:E})}),e.jsx(b,{htmlFor:"enable_response_post_process",className:"cursor-pointer",children:""})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:""})]}),r.enable_response_post_process&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"border-t pt-6 space-y-4",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(qe,{id:"enable_chinese_typo",checked:c.enable,onCheckedChange:E=>f({...c,enable:E})}),e.jsx(b,{htmlFor:"enable_chinese_typo",className:"cursor-pointer font-semibold",children:""})]}),e.jsx("p",{className:"text-xs text-muted-foreground mb-4",children:""}),c.enable&&e.jsxs("div",{className:"grid gap-4 pl-6 border-l-2 border-primary/20",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"error_rate",className:"text-xs font-medium",children:""}),e.jsx(ce,{id:"error_rate",type:"number",step:"0.001",min:"0",max:"1",value:c.error_rate,onChange:E=>f({...c,error_rate:parseFloat(E.target.value)})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"min_freq",className:"text-xs font-medium",children:""}),e.jsx(ce,{id:"min_freq",type:"number",min:"0",value:c.min_freq,onChange:E=>f({...c,min_freq:parseInt(E.target.value)})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"tone_error_rate",className:"text-xs font-medium",children:""}),e.jsx(ce,{id:"tone_error_rate",type:"number",step:"0.01",min:"0",max:"1",value:c.tone_error_rate,onChange:E=>f({...c,tone_error_rate:parseFloat(E.target.value)})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"word_replace_rate",className:"text-xs font-medium",children:""}),e.jsx(ce,{id:"word_replace_rate",type:"number",step:"0.001",min:"0",max:"1",value:c.word_replace_rate,onChange:E=>f({...c,word_replace_rate:parseFloat(E.target.value)})})]})]})]})}),e.jsx("div",{className:"border-t pt-6 space-y-4",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(qe,{id:"enable_response_splitter",checked:d.enable,onCheckedChange:E=>j({...d,enable:E})}),e.jsx(b,{htmlFor:"enable_response_splitter",className:"cursor-pointer font-semibold",children:""})]}),e.jsx("p",{className:"text-xs text-muted-foreground mb-4",children:""}),d.enable&&e.jsxs("div",{className:"grid gap-4 pl-6 border-l-2 border-primary/20",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"max_length",className:"text-xs font-medium",children:""}),e.jsx(ce,{id:"max_length",type:"number",min:"1",value:d.max_length,onChange:E=>j({...d,max_length:parseInt(E.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"max_sentence_num",className:"text-xs font-medium",children:""}),e.jsx(ce,{id:"max_sentence_num",type:"number",min:"1",value:d.max_sentence_num,onChange:E=>j({...d,max_sentence_num:parseInt(E.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(qe,{id:"enable_kaomoji_protection",checked:d.enable_kaomoji_protection,onCheckedChange:E=>j({...d,enable_kaomoji_protection:E})}),e.jsx(b,{htmlFor:"enable_kaomoji_protection",className:"cursor-pointer",children:""})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(qe,{id:"enable_overflow_return_all",checked:d.enable_overflow_return_all,onCheckedChange:E=>j({...d,enable_overflow_return_all:E})}),e.jsx(b,{htmlFor:"enable_overflow_return_all",className:"cursor-pointer",children:""})]}),e.jsx("p",{className:"text-xs text-muted-foreground -mt-2",children:""})]})]})})]})]})]})}function nw({config:n,onChange:r}){return e.jsxs("div",{className:"rounded-lg border bg-card p-6 space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:""}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(qe,{checked:n.enable_mood,onCheckedChange:c=>r({...n,enable_mood:c})}),e.jsx(b,{className:"cursor-pointer",children:""})]}),n.enable_mood&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{children:""}),e.jsx(ce,{type:"number",min:"1",value:n.mood_update_threshold,onChange:c=>r({...n,mood_update_threshold:parseInt(c.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{children:""}),e.jsx(Us,{value:n.emotion_style,onChange:c=>r({...n,emotion_style:c.target.value}),placeholder:"",rows:2})]})]})]})]})}function iw({config:n,onChange:r}){return e.jsxs("div",{className:"rounded-lg border bg-card p-6 space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:""}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(qe,{checked:n.enable_asr,onCheckedChange:c=>r({...n,enable_asr:c})}),e.jsx(b,{className:"cursor-pointer",children:""})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})}function rw({config:n,onChange:r}){return e.jsxs("div",{className:"rounded-lg border bg-card p-6 space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"LPMM "}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(qe,{checked:n.enable,onCheckedChange:c=>r({...n,enable:c})}),e.jsx(b,{className:"cursor-pointer",children:" LPMM "})]}),n.enable&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{children:"LPMM "}),e.jsxs(Qe,{value:n.lpmm_mode,onValueChange:c=>r({...n,lpmm_mode:c}),children:[e.jsx(Ge,{children:e.jsx($e,{placeholder:" LPMM "})}),e.jsxs(Ve,{children:[e.jsx(ue,{value:"classic",children:""}),e.jsx(ue,{value:"agent",children:"Agent "})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{children:" TopK"}),e.jsx(ce,{type:"number",min:"1",value:n.rag_synonym_search_top_k,onChange:c=>r({...n,rag_synonym_search_top_k:parseInt(c.target.value)})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{children:""}),e.jsx(ce,{type:"number",step:"0.1",min:"0",max:"1",value:n.rag_synonym_threshold,onChange:c=>r({...n,rag_synonym_threshold:parseFloat(c.target.value)})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{children:""}),e.jsx(ce,{type:"number",min:"1",value:n.info_extraction_workers,onChange:c=>r({...n,info_extraction_workers:parseInt(c.target.value)})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{children:""}),e.jsx(ce,{type:"number",min:"1",value:n.embedding_dimension,onChange:c=>r({...n,embedding_dimension:parseInt(c.target.value)})})]})]})]})]})]})}function cw({config:n,onChange:r}){const[c,d]=u.useState(""),[h,x]=u.useState("WARNING"),f=()=>{c&&!n.suppress_libraries.includes(c)&&(r({...n,suppress_libraries:[...n.suppress_libraries,c]}),d(""))},j=T=>{r({...n,suppress_libraries:n.suppress_libraries.filter(L=>L!==T)})},g=()=>{c&&!n.library_log_levels[c]&&(r({...n,library_log_levels:{...n.library_log_levels,[c]:h}}),d(""),x("WARNING"))},_=T=>{const L={...n.library_log_levels};delete L[T],r({...n,library_log_levels:L})},v=["DEBUG","INFO","WARNING","ERROR","CRITICAL"],k=["FULL","compact","lite"],z=["none","title","full"];return e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:""}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{children:""}),e.jsx(ce,{value:n.date_style,onChange:T=>r({...n,date_style:T.target.value}),placeholder:": m-d H:i:s"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"m=, d=, H=, i=, s="})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{children:""}),e.jsxs(Qe,{value:n.log_level_style,onValueChange:T=>r({...n,log_level_style:T}),children:[e.jsx(Ge,{children:e.jsx($e,{})}),e.jsx(Ve,{children:k.map(T=>e.jsx(ue,{value:T,children:T},T))})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{children:""}),e.jsxs(Qe,{value:n.color_text,onValueChange:T=>r({...n,color_text:T}),children:[e.jsx(Ge,{children:e.jsx($e,{})}),e.jsx(Ve,{children:z.map(T=>e.jsx(ue,{value:T,children:T},T))})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{children:""}),e.jsxs(Qe,{value:n.log_level,onValueChange:T=>r({...n,log_level:T}),children:[e.jsx(Ge,{children:e.jsx($e,{})}),e.jsx(Ve,{children:v.map(T=>e.jsx(ue,{value:T,children:T},T))})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{children:""}),e.jsxs(Qe,{value:n.console_log_level,onValueChange:T=>r({...n,console_log_level:T}),children:[e.jsx(Ge,{children:e.jsx($e,{})}),e.jsx(Ve,{children:v.map(T=>e.jsx(ue,{value:T,children:T},T))})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{children:""}),e.jsxs(Qe,{value:n.file_log_level,onValueChange:T=>r({...n,file_log_level:T}),children:[e.jsx(Ge,{children:e.jsx($e,{})}),e.jsx(Ve,{children:v.map(T=>e.jsx(ue,{value:T,children:T},T))})]})]})]})]}),e.jsxs("div",{children:[e.jsx(b,{className:"mb-2 block",children:""}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx(ce,{value:c,onChange:T=>d(T.target.value),placeholder:"",className:"flex-1",onKeyDown:T=>{T.key==="Enter"&&(T.preventDefault(),f())}}),e.jsx(N,{onClick:f,size:"sm",className:"flex-shrink-0",children:e.jsx(gt,{className:"h-4 w-4",strokeWidth:2,fill:"none"})})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:n.suppress_libraries.map(T=>e.jsxs("div",{className:"flex items-center gap-1 bg-secondary px-3 py-1 rounded-md",children:[e.jsx("span",{className:"text-sm",children:T}),e.jsx(N,{variant:"ghost",size:"sm",className:"h-5 w-5 p-0",onClick:()=>j(T),children:e.jsx(ns,{className:"h-3 w-3",strokeWidth:2,fill:"none"})})]},T))})]}),e.jsxs("div",{children:[e.jsx(b,{className:"mb-2 block",children:""}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx(ce,{value:c,onChange:T=>d(T.target.value),placeholder:"",className:"flex-1"}),e.jsxs(Qe,{value:h,onValueChange:x,children:[e.jsx(Ge,{className:"w-32",children:e.jsx($e,{})}),e.jsx(Ve,{children:v.map(T=>e.jsx(ue,{value:T,children:T},T))})]}),e.jsx(N,{onClick:g,size:"sm",children:e.jsx(gt,{className:"h-4 w-4",strokeWidth:2,fill:"none"})})]}),e.jsx("div",{className:"space-y-2",children:Object.entries(n.library_log_levels).map(([T,L])=>e.jsxs("div",{className:"flex items-center justify-between bg-secondary px-3 py-2 rounded-md",children:[e.jsx("span",{className:"text-sm font-medium",children:T}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:L}),e.jsx(N,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>_(T),children:e.jsx(ns,{className:"h-3 w-3",strokeWidth:2,fill:"none"})})]})]},T))})]})]})}function ow({config:n,onChange:r}){return e.jsxs("div",{className:"rounded-lg border bg-card p-6 space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:""}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(b,{children:" Prompt"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),e.jsx(qe,{checked:n.show_prompt,onCheckedChange:c=>r({...n,show_prompt:c})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(b,{children:" Prompt"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),e.jsx(qe,{checked:n.show_replyer_prompt,onCheckedChange:c=>r({...n,show_replyer_prompt:c})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(b,{children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),e.jsx(qe,{checked:n.show_replyer_reasoning,onCheckedChange:c=>r({...n,show_replyer_reasoning:c})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(b,{children:" Jargon Prompt"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),e.jsx(qe,{checked:n.show_jargon_prompt,onCheckedChange:c=>r({...n,show_jargon_prompt:c})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(b,{children:" Prompt"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),e.jsx(qe,{checked:n.show_memory_prompt,onCheckedChange:c=>r({...n,show_memory_prompt:c})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(b,{children:" Planner Prompt"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:" Planner "})]}),e.jsx(qe,{checked:n.show_planner_prompt,onCheckedChange:c=>r({...n,show_planner_prompt:c})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(b,{children:" LPMM "}),e.jsx("p",{className:"text-sm text-muted-foreground",children:" LPMM "})]}),e.jsx(qe,{checked:n.show_lpmm_paragraph,onCheckedChange:c=>r({...n,show_lpmm_paragraph:c})})]})]})]})}function dw({config:n,onChange:r}){const[c,d]=u.useState(""),h=()=>{c&&!n.auth_token.includes(c)&&(r({...n,auth_token:[...n.auth_token,c]}),d(""))},x=f=>{r({...n,auth_token:n.auth_token.filter((j,g)=>g!==f)})};return e.jsxs("div",{className:"rounded-lg border bg-card p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"MaimMessage "}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(b,{children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:" MaimMessage "})]}),e.jsx(qe,{checked:n.use_custom,onCheckedChange:f=>r({...n,use_custom:f})})]}),n.use_custom&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{children:""}),e.jsx(ce,{value:n.host,onChange:f=>r({...n,host:f.target.value}),placeholder:"127.0.0.1"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{children:""}),e.jsx(ce,{type:"number",value:n.port,onChange:f=>r({...n,port:parseInt(f.target.value)}),placeholder:"8090"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{children:""}),e.jsxs(Qe,{value:n.mode,onValueChange:f=>r({...n,mode:f}),children:[e.jsx(Ge,{children:e.jsx($e,{})}),e.jsxs(Ve,{children:[e.jsx(ue,{value:"ws",children:"WebSocket (ws)"}),e.jsx(ue,{value:"tcp",children:"TCP"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(qe,{checked:n.use_wss,onCheckedChange:f=>r({...n,use_wss:f}),disabled:n.mode!=="ws"}),e.jsx(b,{children:" WSS "})]})]}),n.use_wss&&n.mode==="ws"&&e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{children:"SSL "}),e.jsx(ce,{value:n.cert_file,onChange:f=>r({...n,cert_file:f.target.value}),placeholder:"cert.pem"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{children:"SSL "}),e.jsx(ce,{value:n.key_file,onChange:f=>r({...n,key_file:f.target.value}),placeholder:"key.pem"})]})]})]})]})]}),e.jsxs("div",{children:[e.jsx(b,{className:"mb-2 block",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:" API "}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx(ce,{value:c,onChange:f=>d(f.target.value),placeholder:"",onKeyDown:f=>{f.key==="Enter"&&(f.preventDefault(),h())}}),e.jsx(N,{onClick:h,size:"sm",children:e.jsx(gt,{className:"h-4 w-4",strokeWidth:2,fill:"none"})})]}),e.jsx("div",{className:"space-y-2",children:n.auth_token.map((f,j)=>e.jsxs("div",{className:"flex items-center justify-between bg-secondary px-3 py-2 rounded-md",children:[e.jsx("span",{className:"text-sm font-mono",children:f}),e.jsx(N,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>x(j),children:e.jsx(ns,{className:"h-3 w-3",strokeWidth:2,fill:"none"})})]},j))})]})]})}function uw({config:n,onChange:r}){return e.jsxs("div",{className:"rounded-lg border bg-card p-6 space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:""}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(b,{children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),e.jsx(qe,{checked:n.enable,onCheckedChange:c=>r({...n,enable:c})})]})]})}const ii=u.forwardRef(({className:n,...r},c)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:c,className:$("w-full caption-bottom text-sm",n),...r})}));ii.displayName="Table";const ri=u.forwardRef(({className:n,...r},c)=>e.jsx("thead",{ref:c,className:$("[&_tr]:border-b",n),...r}));ri.displayName="TableHeader";const ci=u.forwardRef(({className:n,...r},c)=>e.jsx("tbody",{ref:c,className:$("[&_tr:last-child]:border-0",n),...r}));ci.displayName="TableBody";const mw=u.forwardRef(({className:n,...r},c)=>e.jsx("tfoot",{ref:c,className:$("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",n),...r}));mw.displayName="TableFooter";const pt=u.forwardRef(({className:n,...r},c)=>e.jsx("tr",{ref:c,className:$("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",n),...r}));pt.displayName="TableRow";const ls=u.forwardRef(({className:n,...r},c)=>e.jsx("th",{ref:c,className:$("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",n),...r}));ls.displayName="TableHead";const Ye=u.forwardRef(({className:n,...r},c)=>e.jsx("td",{ref:c,className:$("px-4 py-3 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",n),...r}));Ye.displayName="TableCell";const hw=u.forwardRef(({className:n,...r},c)=>e.jsx("caption",{ref:c,className:$("mt-4 text-sm text-muted-foreground",n),...r}));hw.displayName="TableCaption";const oo=u.forwardRef(({className:n,...r},c)=>e.jsx(Lt,{ref:c,className:$("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",n),...r}));oo.displayName=Lt.displayName;const uo=u.forwardRef(({className:n,...r},c)=>e.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[e.jsx(St,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),e.jsx(Lt.Input,{ref:c,className:$("flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",n),...r})]}));uo.displayName=Lt.Input.displayName;const mo=u.forwardRef(({className:n,...r},c)=>e.jsx(Lt.List,{ref:c,className:$("max-h-[300px] overflow-y-auto overflow-x-hidden",n),...r}));mo.displayName=Lt.List.displayName;const ho=u.forwardRef((n,r)=>e.jsx(Lt.Empty,{ref:r,className:"py-6 text-center text-sm",...n}));ho.displayName=Lt.Empty.displayName;const vr=u.forwardRef(({className:n,...r},c)=>e.jsx(Lt.Group,{ref:c,className:$("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",n),...r}));vr.displayName=Lt.Group.displayName;const xw=u.forwardRef(({className:n,...r},c)=>e.jsx(Lt.Separator,{ref:c,className:$("-mx-1 h-px bg-border",n),...r}));xw.displayName=Lt.Separator.displayName;const yr=u.forwardRef(({className:n,...r},c)=>e.jsx(Lt.Item,{ref:c,className:$("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",n),...r}));yr.displayName=Lt.Item.displayName;const yt=u.forwardRef(({className:n,...r},c)=>e.jsx(rg,{ref:c,className:$("grid place-content-center peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",n),...r,children:e.jsx(fN,{className:$("grid place-content-center text-current"),children:e.jsx(ha,{className:"h-4 w-4"})})}));yt.displayName=rg.displayName;const Ug=u.createContext(null),Bg="maibot-completed-tours";function fw(){try{const n=localStorage.getItem(Bg);return n?new Set(JSON.parse(n)):new Set}catch{return new Set}}function cp(n){localStorage.setItem(Bg,JSON.stringify([...n]))}function pw({children:n}){const[r,c]=u.useState({activeTourId:null,stepIndex:0,isRunning:!1}),d=u.useRef(new Map),[,h]=u.useState(0),[x,f]=u.useState(fw),j=u.useCallback((V,E)=>{d.current.set(V,E),h(B=>B+1)},[]),g=u.useCallback(V=>{d.current.delete(V),c(E=>E.activeTourId===V?{...E,activeTourId:null,isRunning:!1,stepIndex:0}:E)},[]),_=u.useCallback((V,E=0)=>{d.current.has(V)&&c({activeTourId:V,stepIndex:E,isRunning:!0})},[]),v=u.useCallback(()=>{c(V=>({...V,isRunning:!1}))},[]),k=u.useCallback(V=>{c(E=>({...E,stepIndex:V}))},[]),z=u.useCallback(()=>{c(V=>({...V,stepIndex:V.stepIndex+1}))},[]),T=u.useCallback(()=>{c(V=>({...V,stepIndex:Math.max(0,V.stepIndex-1)}))},[]),L=u.useCallback(()=>r.activeTourId?d.current.get(r.activeTourId)||[]:[],[r.activeTourId]),K=u.useCallback(V=>{f(E=>{const B=new Set(E);return B.add(V),cp(B),B})},[]),U=u.useCallback(V=>{const{action:E,index:B,status:X,type:w}=V,D=["finished","skipped"];if(E==="close"){c(te=>({...te,isRunning:!1,stepIndex:0}));return}D.includes(X)?c(te=>(X==="finished"&&te.activeTourId&&setTimeout(()=>K(te.activeTourId),0),{...te,isRunning:!1,stepIndex:0})):w==="step:after"&&(E==="next"?c(te=>({...te,stepIndex:B+1})):E==="prev"&&c(te=>({...te,stepIndex:B-1})))},[K]),R=u.useCallback(V=>x.has(V),[x]),ee=u.useCallback(V=>{f(E=>{const B=new Set(E);return B.delete(V),cp(B),B})},[]);return e.jsx(Ug.Provider,{value:{state:r,tours:d.current,registerTour:j,unregisterTour:g,startTour:_,stopTour:v,goToStep:k,nextStep:z,prevStep:T,getCurrentSteps:L,handleJoyrideCallback:U,isTourCompleted:R,markTourCompleted:K,resetTourCompleted:ee},children:n})}function Ju(){const n=u.useContext(Ug);if(!n)throw new Error("useTour must be used within a TourProvider");return n}const gw={options:{zIndex:1e4,primaryColor:"hsl(var(--primary))",textColor:"hsl(var(--foreground))",backgroundColor:"hsl(var(--background))",arrowColor:"hsl(var(--background))",overlayColor:"rgba(0, 0, 0, 0.5)"},tooltip:{borderRadius:"var(--radius)",padding:"1rem"},tooltipContainer:{textAlign:"left"},tooltipTitle:{fontSize:"1rem",fontWeight:600,marginBottom:"0.5rem"},tooltipContent:{fontSize:"0.875rem",padding:"0.5rem 0"},buttonNext:{backgroundColor:"hsl(var(--primary))",color:"hsl(var(--primary-foreground))",borderRadius:"calc(var(--radius) - 2px)",fontSize:"0.875rem",padding:"0.5rem 1rem"},buttonBack:{color:"hsl(var(--muted-foreground))",fontSize:"0.875rem",marginRight:"0.5rem"},buttonSkip:{color:"hsl(var(--muted-foreground))",fontSize:"0.875rem"},buttonClose:{color:"hsl(var(--muted-foreground))"},spotlight:{borderRadius:"var(--radius)"}},jw={back:"",close:"",last:"",next:"",nextLabelWithProgress:" ({step}/{steps})",open:"",skip:""};function vw(){const{state:n,getCurrentSteps:r,handleJoyrideCallback:c}=Ju(),d=r(),[h,x]=u.useState(!1),f=u.useRef(n.stepIndex),j=u.useRef(null);u.useEffect(()=>{f.current!==n.stepIndex&&(x(!1),f.current=n.stepIndex)},[n.stepIndex]),u.useEffect(()=>{if(!n.isRunning||d.length===0){x(!1);return}const v=d[n.stepIndex];if(!v){x(!1);return}const k=v.target;if(k==="body"){x(!0);return}x(!1);const z=setTimeout(()=>{const T=()=>{const R=document.querySelector(k);if(R){const ee=R.getBoundingClientRect();if(ee.width>0&&ee.height>0)return!0}return!1};if(T()){setTimeout(()=>x(!0),100);return}const L=setInterval(()=>{T()&&(clearInterval(L),setTimeout(()=>x(!0),100))},100),K=setTimeout(()=>{clearInterval(L),x(!0)},5e3),U=()=>{clearInterval(L),clearTimeout(K)};j.current=U},150);return()=>{clearTimeout(z),j.current&&(j.current(),j.current=null)}},[n.isRunning,n.stepIndex,d]);const g=u.useRef(null);if(u.useEffect(()=>{let v=document.getElementById("tour-portal-container");return v||(v=document.createElement("div"),v.id="tour-portal-container",v.style.cssText="position: fixed; top: 0; left: 0; z-index: 99999; pointer-events: none;",document.body.appendChild(v)),g.current=v,()=>{}},[]),!n.isRunning||d.length===0||!h)return null;const _=e.jsx(ib,{steps:d,stepIndex:n.stepIndex,run:n.isRunning,continuous:!0,showSkipButton:!0,showProgress:!0,disableOverlayClose:!0,disableScrolling:!1,disableScrollParentFix:!1,callback:c,styles:gw,locale:jw,scrollOffset:80,scrollToFirstStep:!0,floaterProps:{styles:{floater:{zIndex:99999}},disableAnimation:!0}},`tour-step-${n.stepIndex}`);return g.current?xy.createPortal(_,g.current):_}const ll="model-assignment-tour",Hg=[{target:"body",content:"",placement:"center",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="sidebar-model-provider"]',content:' DeepSeek Siliconflow""',placement:"right",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="add-provider-button"]',content:'""',placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!0,hideFooter:!0},{target:'[data-tour="provider-dialog"]',content:"",placement:"left",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="provider-name-input"]',content:"",placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="provider-apikey-input"]',content:" API  API ",placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="provider-url-input"]',content:" API API ",placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="provider-template-select"]',content:"",placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="provider-save-button"]',content:"",placement:"top",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="provider-cancel-button"]',content:"",placement:"top",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!0,hideFooter:!0},{target:'[data-tour="sidebar-model-management"]',content:'""',placement:"right",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="add-model-button"]',content:'""',placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!0,hideFooter:!0},{target:'[data-tour="model-dialog"]',content:"",placement:"left",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="model-name-input"]',content:"",placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="model-provider-select"]',content:"",placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="model-identifier-input"]',content:"",placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="model-save-button"]',content:"",placement:"top",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="model-cancel-button"]',content:"",placement:"top",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!0,hideFooter:!0},{target:'[data-tour="tasks-tab-trigger"]',content:'""',placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!0,hideFooter:!0},{target:'[data-tour="task-model-select"]',content:"",placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1}],qg={0:"/config/model",1:"/config/model",2:"/config/modelProvider",3:"/config/modelProvider",4:"/config/modelProvider",5:"/config/modelProvider",6:"/config/modelProvider",7:"/config/modelProvider",8:"/config/modelProvider",9:"/config/modelProvider",10:"/config/modelProvider",11:"/config/model",12:"/config/model",13:"/config/model",14:"/config/model",15:"/config/model",16:"/config/model",17:"/config/model",18:"/config/model",19:"/config/model"},rr=[{id:"siliconflow",name:"SiliconFlow",base_url:"https://api.siliconflow.cn/v1",client_type:"openai",display_name:" (SiliconFlow)",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"deepseek",name:"DeepSeek",base_url:"https://api.deepseek.com",client_type:"openai",display_name:"DeepSeek",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"rinkoai",name:"RinkoAI",base_url:"https://rinkoai.com/v1",client_type:"openai",display_name:"RinkoAI",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"zhipu",name:"ZhipuAI",base_url:"https://open.bigmodel.cn/api/paas/v4",client_type:"openai",display_name:" AI (ZhipuAI / GLM)",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"moonshot",name:"Moonshot",base_url:"https://api.moonshot.cn/v1",client_type:"openai",display_name:" (Moonshot / Kimi)",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"doubao",name:"Doubao",base_url:"https://ark.cn-beijing.volces.com/api/v3",client_type:"openai",display_name:" (Doubao)",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"alibaba",name:"Alibaba",base_url:"https://dashscope.aliyuncs.com/compatible-mode/v1",client_type:"openai",display_name:" (Alibaba Qwen)",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"baichuan",name:"Baichuan",base_url:"https://api.baichuan-ai.com/v1",client_type:"openai",display_name:" (Baichuan)",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"minimax",name:"MiniMax",base_url:"https://api.minimax.chat/v1",client_type:"openai",display_name:"MiniMax ( AI)",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"stepfun",name:"StepFun",base_url:"https://api.stepfun.com/v1",client_type:"openai",display_name:" (StepFun)",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"lingyi",name:"Lingyi",base_url:"https://api.lingyiwanwu.com/v1",client_type:"openai",display_name:" (Lingyi / Yi)",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"openai",name:"OpenAI",base_url:"https://api.openai.com/v1",client_type:"openai",display_name:"OpenAI",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"xai",name:"xAI",base_url:"https://api.x.ai/v1",client_type:"openai",display_name:"xAI (Grok)",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"anthropic",name:"Anthropic",base_url:"https://api.anthropic.com/v1",client_type:"openai",display_name:"Anthropic (Claude)"},{id:"gemini",name:"Gemini",base_url:"https://generativelanguage.googleapis.com/v1beta",client_type:"gemini",display_name:"Google Gemini",modelFetcher:{endpoint:"/models",parser:"gemini"}},{id:"cohere",name:"Cohere",base_url:"https://api.cohere.ai/v1",client_type:"openai",display_name:"Cohere"},{id:"groq",name:"Groq",base_url:"https://api.groq.com/openai/v1",client_type:"openai",display_name:"Groq",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"together",name:"Together AI",base_url:"https://api.together.xyz/v1",client_type:"openai",display_name:"Together AI",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"fireworks",name:"Fireworks",base_url:"https://api.fireworks.ai/inference/v1",client_type:"openai",display_name:"Fireworks AI",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"mistral",name:"Mistral",base_url:"https://api.mistral.ai/v1",client_type:"openai",display_name:"Mistral AI",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"perplexity",name:"Perplexity",base_url:"https://api.perplexity.ai",client_type:"openai",display_name:"Perplexity AI"},{id:"custom",name:"",base_url:"",client_type:"openai",display_name:""}];function op(n){return n?n.replace(/\/+$/,"").toLowerCase():""}function yw(n){if(!n)return null;const r=op(n);return rr.find(c=>c.id!=="custom"&&op(c.base_url)===r)||null}function Nw(){const[n,r]=u.useState([]),[c,d]=u.useState(!0),[h,x]=u.useState(!1),[f,j]=u.useState(!1),[g,_]=u.useState(!1),[v,k]=u.useState(!1),[z,T]=u.useState(!1),[L,K]=u.useState(!1),[U,R]=u.useState(null),[ee,V]=u.useState(null),[E,B]=u.useState("custom"),[X,w]=u.useState(!1),[D,te]=u.useState(!1),[xe,be]=u.useState(null),[ye,ve]=u.useState(!1),[pe,Ne]=u.useState(""),[y,q]=u.useState(new Set),[H,ne]=u.useState(!1),[S,me]=u.useState(1),[he,Q]=u.useState(20),[oe,ge]=u.useState(""),[le,O]=u.useState({}),[F,A]=u.useState(new Set),[W,_e]=u.useState(new Map),{toast:Me}=Bs(),ss=It(),{state:Ie,goToStep:Rs,registerTour:qs}=Ju(),ie=u.useRef(null),we=u.useRef(!0);u.useEffect(()=>{qs(ll,Hg)},[qs]),u.useEffect(()=>{if(Ie.activeTourId===ll&&Ie.isRunning){const P=qg[Ie.stepIndex];P&&!window.location.pathname.endsWith(P.replace("/config/",""))&&ss({to:P})}},[Ie.stepIndex,Ie.activeTourId,Ie.isRunning,ss]);const Ke=u.useRef(Ie.stepIndex);u.useEffect(()=>{if(Ie.activeTourId===ll&&Ie.isRunning){const P=Ke.current,je=Ie.stepIndex;P>=3&&P<=9&&je<3&&K(!1),P>=10&&je>=3&&je<=9&&(O({}),B("custom"),R({name:"",base_url:"",api_key:"",client_type:"openai",max_retry:2,timeout:30,retry_interval:10}),V(null),ve(!1),K(!0)),Ke.current=je}},[Ie.stepIndex,Ie.activeTourId,Ie.isRunning]),u.useEffect(()=>{if(Ie.activeTourId!==ll||!Ie.isRunning)return;const P=je=>{const Ae=je.target,tt=Ie.stepIndex;tt===2&&Ae.closest('[data-tour="add-provider-button"]')?setTimeout(()=>Rs(3),300):tt===9&&Ae.closest('[data-tour="provider-cancel-button"]')&&setTimeout(()=>Rs(10),300)};return document.addEventListener("click",P,!0),()=>document.removeEventListener("click",P,!0)},[Ie,Rs]),u.useEffect(()=>{Le()},[]);const Le=async()=>{try{d(!0);const P=await ei();r(P.api_providers||[]),_(!1),we.current=!1}catch(P){console.error(":",P)}finally{d(!1)}},st=async()=>{try{k(!0),co().catch(()=>{}),T(!0)}catch(P){console.error(":",P),T(!1),Me({title:"",description:"",variant:"destructive"}),k(!1)}},Jt=async()=>{try{x(!0),ie.current&&clearTimeout(ie.current);const P=await ei();P.api_providers=n,await io(P),_(!1),Me({title:"",description:"..."}),await st()}catch(P){console.error(":",P),Me({title:"",description:P.message,variant:"destructive"}),x(!1)}},bt=()=>{localStorage.removeItem("access-token"),window.location.href="/auth"},Je=()=>{T(!1),k(!1),Me({title:"",description:"",variant:"destructive"})},Ue=u.useCallback(async P=>{if(!we.current)try{j(!0),await qu("api_providers",P),_(!1)}catch(je){console.error(":",je),_(!0)}finally{j(!1)}},[]);u.useEffect(()=>{if(!we.current)return _(!0),ie.current&&clearTimeout(ie.current),ie.current=setTimeout(()=>{Ue(n)},2e3),()=>{ie.current&&clearTimeout(ie.current)}},[n,Ue]);const jt=async()=>{try{x(!0),ie.current&&clearTimeout(ie.current);const P=await ei();P.api_providers=n,await io(P),_(!1),Me({title:"",description:""})}catch(P){console.error(":",P),Me({title:"",description:P.message,variant:"destructive"})}finally{x(!1)}},nt=(P,je)=>{if(O({}),P){const Ae=rr.find(tt=>tt.base_url===P.base_url&&tt.client_type===P.client_type);B(Ae?.id||"custom"),R(P)}else B("custom"),R({name:"",base_url:"",api_key:"",client_type:"openai",max_retry:2,timeout:30,retry_interval:10});V(je),ve(!1),K(!0)},Ct=P=>{B(P),w(!1);const je=rr.find(Ae=>Ae.id===P);je&&je.id!=="custom"?R(Ae=>({...Ae,name:je.name,base_url:je.base_url,client_type:je.client_type})):je?.id==="custom"&&R(Ae=>({...Ae,name:"",base_url:"",client_type:"openai"}))},kt=u.useMemo(()=>E!=="custom",[E]),rl=async()=>{if(U?.api_key)try{await navigator.clipboard.writeText(U.api_key),Me({title:"",description:"API Key "})}catch{Me({title:"",description:"",variant:"destructive"})}},cl=()=>{if(!U)return;const P={};if(U.name?.trim()||(P.name=""),U.base_url?.trim()||(P.base_url=" URL"),U.api_key?.trim()||(P.api_key=" API Key"),Object.keys(P).length>0){O(P);return}O({});const je={...U,max_retry:U.max_retry??2,timeout:U.timeout??30,retry_interval:U.retry_interval??10};if(ee!==null){const Ae=[...n];Ae[ee]=je,r(Ae)}else r([...n,je]);K(!1),R(null),V(null)},ol=P=>{if(!P&&U){const je={...U,max_retry:U.max_retry??2,timeout:U.timeout??30,retry_interval:U.retry_interval??10};R(je)}K(P)},Se=P=>{be(P),te(!0)},Re=()=>{if(xe!==null){const P=n.filter((je,Ae)=>Ae!==xe);r(P),Me({title:"",description:""})}te(!1),be(null)},it=P=>{const je=new Set(y);je.has(P)?je.delete(P):je.add(P),q(je)},ot=()=>{if(y.size===dt.length)q(new Set);else{const P=dt.map((je,Ae)=>n.findIndex(tt=>tt===dt[Ae]));q(new Set(P))}},di=()=>{if(y.size===0){Me({title:"",description:"",variant:"default"});return}ne(!0)},on=()=>{const P=n.filter((je,Ae)=>!y.has(Ae));r(P),q(new Set),ne(!1),Me({title:"",description:` ${y.size} `})},dt=n.filter(P=>{if(!pe)return!0;const je=pe.toLowerCase();return P.name.toLowerCase().includes(je)||P.base_url.toLowerCase().includes(je)||P.client_type.toLowerCase().includes(je)}),Pt=Math.ceil(dt.length/he),Wt=dt.slice((S-1)*he,S*he),La=()=>{const P=parseInt(oe);P>=1&&P<=Pt&&(me(P),ge(""))},Ut=async P=>{A(je=>new Set(je).add(P));try{const je=await $0(P);_e(Ae=>new Map(Ae).set(P,je)),je.network_ok?je.api_key_valid===!0?Me({title:"",description:`${P} API Key  (${je.latency_ms}ms)`}):je.api_key_valid===!1?Me({title:" Key ",description:`${P}  API Key `,variant:"destructive"}):Me({title:"",description:`${P}  (${je.latency_ms}ms)`}):Me({title:"",description:je.error||"",variant:"destructive"})}catch(je){Me({title:"",description:je.message,variant:"destructive"})}finally{A(je=>{const Ae=new Set(je);return Ae.delete(P),Ae})}},Ua=async()=>{for(const P of n)await Ut(P.name)},ba=P=>{const je=F.has(P),Ae=W.get(P);return je?e.jsxs(Xe,{variant:"secondary",className:"gap-1",children:[e.jsx(vt,{className:"h-3 w-3 animate-spin"}),""]}):Ae?Ae.network_ok?Ae.api_key_valid===!0?e.jsxs(Xe,{className:"gap-1 bg-green-600 hover:bg-green-700",children:[e.jsx(xa,{className:"h-3 w-3"}),""]}):Ae.api_key_valid===!1?e.jsxs(Xe,{variant:"destructive",className:"gap-1",children:[e.jsx(Aa,{className:"h-3 w-3"}),"Key"]}):e.jsxs(Xe,{className:"gap-1 bg-blue-600 hover:bg-blue-700",children:[e.jsx(xa,{className:"h-3 w-3"}),""]}):e.jsxs(Xe,{variant:"destructive",className:"gap-1",children:[e.jsx(pg,{className:"h-3 w-3"}),""]}):null};return c?e.jsx("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("p",{className:"text-muted-foreground",children:"..."})})}):e.jsxs("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"AI"}),e.jsx("p",{className:"text-muted-foreground mt-1 sm:mt-2 text-sm sm:text-base",children:" AI  API "})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[y.size>0&&e.jsxs(N,{onClick:di,size:"sm",variant:"destructive",className:"w-full sm:w-auto",children:[e.jsx(ns,{className:"mr-2 h-4 w-4",strokeWidth:2,fill:"none"})," (",y.size,")"]}),e.jsxs(N,{onClick:Ua,size:"sm",variant:"outline",className:"w-full sm:w-auto",disabled:n.length===0||F.size>0,children:[e.jsx(ln,{className:"mr-2 h-4 w-4"}),F.size>0?` (${F.size})`:""]}),e.jsxs(N,{onClick:()=>nt(null,null),size:"sm",className:"w-full sm:w-auto","data-tour":"add-provider-button",children:[e.jsx(gt,{className:"mr-2 h-4 w-4",strokeWidth:2,fill:"none"}),""]}),e.jsxs(N,{onClick:jt,disabled:h||f||!g||v,size:"sm",variant:"outline",className:"w-full sm:w-auto sm:min-w-[120px]",children:[e.jsx(br,{className:"mr-2 h-4 w-4",strokeWidth:2,fill:"none"}),h?"...":f?"...":g?"":""]}),e.jsxs(ps,{children:[e.jsx(Qs,{asChild:!0,children:e.jsxs(N,{disabled:h||f||v,size:"sm",className:"w-full sm:w-auto sm:min-w-[120px]",children:[e.jsx(Nr,{className:"mr-2 h-4 w-4"}),v?"...":g?"":""]})}),e.jsxs(cs,{children:[e.jsxs(os,{children:[e.jsx(us,{children:""}),e.jsx(ms,{className:"space-y-3",asChild:!0,children:e.jsxs("div",{children:[e.jsx("p",{children:g?",":","}),e.jsxs(ua,{className:"border-yellow-500/50 bg-yellow-500/10",children:[e.jsx(Xt,{className:"h-4 w-4 text-yellow-600"}),e.jsxs(ma,{className:"text-yellow-900 dark:text-yellow-100",children:[e.jsx("strong",{children:":"}),",, ",e.jsx("code",{className:"px-1 py-0.5 bg-yellow-200 dark:bg-yellow-900 rounded",children:"Ctrl+C"})," ",e.jsxs(Os,{children:[e.jsx(ni,{asChild:!0,children:e.jsxs("button",{className:"ml-1 text-yellow-700 dark:text-yellow-300 underline hover:text-yellow-800 dark:hover:text-yellow-200 inline-flex items-center gap-1",children:[e.jsx(ro,{className:"h-3 w-3"}),""]})}),e.jsxs(Es,{className:"max-w-2xl",children:[e.jsxs(zs,{children:[e.jsx(Ms,{children:""}),e.jsx($s,{children:""})]}),e.jsxs(Kt,{defaultValue:"windows",className:"w-full",children:[e.jsxs(Rt,{className:"grid w-full grid-cols-3",children:[e.jsx(He,{value:"windows",children:"Windows"}),e.jsx(He,{value:"macos",children:"macOS"}),e.jsx(He,{value:"linux",children:"Linux"})]}),e.jsxs(We,{value:"windows",className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-semibold",children:""}),e.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-sm text-muted-foreground",children:[e.jsxs("li",{children:[" ",e.jsx("code",{className:"px-1 py-0.5 bg-muted rounded",children:"Ctrl + Shift + Esc"})," "]}),e.jsxs("li",{children:[" ",e.jsx("code",{className:"px-1 py-0.5 bg-muted rounded",children:"python.exe"})]}),e.jsx("li",{children:""})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-semibold",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:" PowerShell "}),e.jsxs("div",{className:"bg-muted p-3 rounded-md font-mono text-sm",children:[e.jsx("p",{children:"# "}),e.jsx("p",{children:'Get-Process python | Where-Object {$_.MainWindowTitle -eq ""}'}),e.jsx("p",{className:"mt-2",children:"#  Python "}),e.jsx("p",{children:"Stop-Process -Name python -Force"})]})]})]}),e.jsxs(We,{value:"macos",className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-semibold",children:""}),e.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-sm text-muted-foreground",children:[e.jsxs("li",{children:[" ",e.jsx("code",{className:"px-1 py-0.5 bg-muted rounded",children:"Cmd + Space"}),"  Spotlight"]}),e.jsxs("li",{children:[" ",e.jsx("code",{className:"px-1 py-0.5 bg-muted rounded",children:"Python"})]}),e.jsx("li",{children:" X "})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-semibold",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""}),e.jsxs("div",{className:"bg-muted p-3 rounded-md font-mono text-sm",children:[e.jsx("p",{children:"# "}),e.jsx("p",{children:"ps aux | grep python | grep -v grep"}),e.jsx("p",{className:"mt-2",children:"#  PID "}),e.jsx("p",{children:"kill -9 <PID>"}),e.jsx("p",{className:"mt-2",children:"#  Python "}),e.jsx("p",{children:"pkill -9 python"})]})]})]}),e.jsxs(We,{value:"linux",className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-semibold",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""}),e.jsxs("div",{className:"bg-muted p-3 rounded-md font-mono text-sm",children:[e.jsx("p",{children:"# "}),e.jsx("p",{children:"ps aux | grep python | grep -v grep"}),e.jsx("p",{className:"mt-2",children:"#  PID "}),e.jsx("p",{children:"kill -9 <PID>"}),e.jsx("p",{className:"mt-2",children:"#  pkill "}),e.jsx("p",{children:'pkill -9 -f "bot.py"'}),e.jsx("p",{className:"mt-2",children:"#  Python "}),e.jsx("p",{children:"pkill -9 python"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-semibold",children:" htop"}),e.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-sm text-muted-foreground",children:[e.jsxs("li",{children:[" ",e.jsx("code",{className:"px-1 py-0.5 bg-muted rounded",children:"htop"})]}),e.jsxs("li",{children:[" ",e.jsx("code",{className:"px-1 py-0.5 bg-muted rounded",children:"F3"}),"  python"]}),e.jsxs("li",{children:[" ",e.jsx("code",{className:"px-1 py-0.5 bg-muted rounded",children:"F9"}),"  SIGKILL"]})]})]})]})]}),e.jsx(Is,{children:e.jsx(Zu,{asChild:!0,children:e.jsx(N,{variant:"outline",children:""})})})]})]})]})]})]})})]}),e.jsxs(ds,{children:[e.jsx(xs,{children:""}),e.jsx(hs,{onClick:g?Jt:st,children:g?"":""})]})]})]})]})]}),e.jsxs(ua,{children:[e.jsx(Xt,{className:"h-4 w-4"}),e.jsxs(ma,{children:["",e.jsx("strong",{children:""}),'""']})]}),e.jsxs(es,{className:"h-[calc(100vh-260px)]",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2 mb-4",children:[e.jsxs("div",{className:"relative w-full sm:flex-1 sm:max-w-sm",children:[e.jsx(St,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(ce,{placeholder:"URL ...",value:pe,onChange:P=>Ne(P.target.value),className:"pl-9"})]}),pe&&e.jsxs("p",{className:"text-sm text-muted-foreground whitespace-nowrap",children:[" ",dt.length," "]})]}),e.jsx("div",{className:"md:hidden space-y-3",children:dt.length===0?e.jsx("div",{className:"text-center text-muted-foreground py-8 rounded-lg border bg-card",children:pe?"":'""'}):Wt.map((P,je)=>{const Ae=n.findIndex(tt=>tt===P);return e.jsxs("div",{className:"rounded-lg border bg-card p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("h3",{className:"font-semibold text-base truncate",children:P.name}),ba(P.name)]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1 break-all",children:P.base_url})]}),e.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[e.jsx(N,{variant:"outline",size:"sm",onClick:()=>Ut(P.name),disabled:F.has(P.name),title:"",children:F.has(P.name)?e.jsx(vt,{className:"h-4 w-4 animate-spin"}):e.jsx(ln,{className:"h-4 w-4"})}),e.jsx(N,{variant:"default",size:"sm",onClick:()=>nt(P,Ae),children:e.jsx(nn,{className:"h-4 w-4",strokeWidth:2,fill:"none"})}),e.jsx(N,{size:"sm",onClick:()=>Se(Ae),className:"bg-red-600 hover:bg-red-700 text-white",children:e.jsx(ns,{className:"h-4 w-4",strokeWidth:2,fill:"none"})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground text-xs",children:""}),e.jsx("p",{className:"font-medium",children:P.client_type})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground text-xs",children:""}),e.jsx("p",{className:"font-medium",children:P.max_retry})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground text-xs",children:"()"}),e.jsx("p",{className:"font-medium",children:P.timeout})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground text-xs",children:"()"}),e.jsx("p",{className:"font-medium",children:P.retry_interval})]})]})]},je)})}),e.jsx("div",{className:"hidden md:block rounded-lg border bg-card overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(ii,{children:[e.jsx(ri,{children:e.jsxs(pt,{children:[e.jsx(ls,{className:"w-12",children:e.jsx(yt,{checked:y.size===dt.length&&dt.length>0,onCheckedChange:ot})}),e.jsx(ls,{children:""}),e.jsx(ls,{children:""}),e.jsx(ls,{children:"URL"}),e.jsx(ls,{children:""}),e.jsx(ls,{className:"text-right",children:""}),e.jsx(ls,{className:"text-right",children:"()"}),e.jsx(ls,{className:"text-right",children:"()"}),e.jsx(ls,{className:"text-right",children:""})]})}),e.jsx(ci,{children:Wt.length===0?e.jsx(pt,{children:e.jsx(Ye,{colSpan:9,className:"text-center text-muted-foreground py-8",children:pe?"":'""'})}):Wt.map((P,je)=>{const Ae=n.findIndex(tt=>tt===P);return e.jsxs(pt,{children:[e.jsx(Ye,{children:e.jsx(yt,{checked:y.has(Ae),onCheckedChange:()=>it(Ae)})}),e.jsx(Ye,{children:ba(P.name)||e.jsx(Xe,{variant:"outline",className:"text-muted-foreground",children:""})}),e.jsx(Ye,{className:"font-medium",children:P.name}),e.jsx(Ye,{className:"max-w-xs truncate",title:P.base_url,children:P.base_url}),e.jsx(Ye,{children:P.client_type}),e.jsx(Ye,{className:"text-right",children:P.max_retry}),e.jsx(Ye,{className:"text-right",children:P.timeout}),e.jsx(Ye,{className:"text-right",children:P.retry_interval}),e.jsx(Ye,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(N,{variant:"outline",size:"sm",onClick:()=>Ut(P.name),disabled:F.has(P.name),title:"",children:F.has(P.name)?e.jsx(vt,{className:"h-4 w-4 animate-spin"}):e.jsx(ln,{className:"h-4 w-4"})}),e.jsxs(N,{variant:"default",size:"sm",onClick:()=>nt(P,Ae),children:[e.jsx(nn,{className:"h-4 w-4 mr-1",strokeWidth:2,fill:"none"}),""]}),e.jsxs(N,{size:"sm",onClick:()=>Se(Ae),className:"bg-red-600 hover:bg-red-700 text-white",children:[e.jsx(ns,{className:"h-4 w-4 mr-1",strokeWidth:2,fill:"none"}),""]})]})})]},je)})})]})})}),dt.length>0&&e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{htmlFor:"page-size-provider",className:"text-sm whitespace-nowrap",children:""}),e.jsxs(Qe,{value:he.toString(),onValueChange:P=>{Q(parseInt(P)),me(1),q(new Set)},children:[e.jsx(Ge,{id:"page-size-provider",className:"w-20",children:e.jsx($e,{})}),e.jsxs(Ve,{children:[e.jsx(ue,{value:"10",children:"10"}),e.jsx(ue,{value:"20",children:"20"}),e.jsx(ue,{value:"50",children:"50"}),e.jsx(ue,{value:"100",children:"100"})]})]}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[" ",(S-1)*he+1," "," ",Math.min(S*he,dt.length),"  ",dt.length," "]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{variant:"outline",size:"sm",onClick:()=>me(1),disabled:S===1,className:"hidden sm:flex",children:e.jsx(wr,{className:"h-4 w-4"})}),e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>me(P=>Math.max(1,P-1)),disabled:S===1,children:[e.jsx(cn,{className:"h-4 w-4 sm:mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ce,{type:"number",value:oe,onChange:P=>ge(P.target.value),onKeyDown:P=>P.key==="Enter"&&La(),placeholder:S.toString(),className:"w-16 h-8 text-center",min:1,max:Pt}),e.jsx(N,{variant:"outline",size:"sm",onClick:La,disabled:!oe,className:"h-8",children:""})]}),e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>me(P=>P+1),disabled:S>=Pt,children:[e.jsx("span",{className:"hidden sm:inline",children:""}),e.jsx(il,{className:"h-4 w-4 sm:ml-1"})]}),e.jsx(N,{variant:"outline",size:"sm",onClick:()=>me(Pt),disabled:S>=Pt,className:"hidden sm:flex",children:e.jsx(_r,{className:"h-4 w-4"})})]})]})]}),e.jsx(Os,{open:L,onOpenChange:ol,children:e.jsxs(Es,{className:"max-w-[95vw] sm:max-w-2xl max-h-[90vh] overflow-y-auto","data-tour":"provider-dialog",preventOutsideClose:Ie.isRunning,children:[e.jsxs(zs,{children:[e.jsx(Ms,{children:ee!==null?"":""}),e.jsx($s,{children:" API "})]}),e.jsxs("form",{onSubmit:P=>{P.preventDefault(),cl()},autoComplete:"off",children:[e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2","data-tour":"provider-template-select",children:[e.jsx(b,{htmlFor:"template",children:""}),e.jsxs(Da,{open:X,onOpenChange:w,children:[e.jsx(Oa,{asChild:!0,children:e.jsxs(N,{variant:"outline",role:"combobox","aria-expanded":X,className:"w-full justify-between",children:[E?rr.find(P=>P.id===E)?.display_name:"...",e.jsx($u,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsx(Na,{className:"p-0",align:"start",style:{width:"var(--radix-popover-trigger-width)"},children:e.jsxs(oo,{children:[e.jsx(uo,{placeholder:"..."}),e.jsx(es,{className:"h-[300px]",children:e.jsxs(mo,{className:"max-h-none overflow-visible",children:[e.jsx(ho,{children:""}),e.jsx(vr,{children:rr.map(P=>e.jsxs(yr,{value:P.display_name,onSelect:()=>Ct(P.id),children:[e.jsx(ha,{className:`mr-2 h-4 w-4 ${E===P.id?"opacity-100":"opacity-0"}`}),P.display_name]},P.id))})]})})]})})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" URL ,"})]}),e.jsxs("div",{className:"grid gap-2","data-tour":"provider-name-input",children:[e.jsx(b,{htmlFor:"name",className:le.name?"text-destructive":"",children:" *"}),e.jsx(ce,{id:"name",value:U?.name||"",onChange:P=>{R(je=>je?{...je,name:P.target.value}:null),le.name&&O(je=>({...je,name:void 0}))},placeholder:": DeepSeek, SiliconFlow",className:le.name?"border-destructive focus-visible:ring-destructive":""}),le.name&&e.jsx("p",{className:"text-xs text-destructive",children:le.name})]}),e.jsxs("div",{className:"grid gap-2","data-tour":"provider-url-input",children:[e.jsx(b,{htmlFor:"base_url",className:le.base_url?"text-destructive":"",children:" URL *"}),e.jsx(ce,{id:"base_url",value:U?.base_url||"",onChange:P=>{R(je=>je?{...je,base_url:P.target.value}:null),le.base_url&&O(je=>({...je,base_url:void 0}))},placeholder:"https://api.example.com/v1",disabled:kt,className:`${kt?"bg-muted cursor-not-allowed":""} ${le.base_url?"border-destructive focus-visible:ring-destructive":""}`}),le.base_url&&e.jsx("p",{className:"text-xs text-destructive",children:le.base_url}),kt&&!le.base_url&&e.jsx("p",{className:"text-xs text-muted-foreground",children:' URL ,""'})]}),e.jsxs("div",{className:"grid gap-2","data-tour":"provider-apikey-input",children:[e.jsx(b,{htmlFor:"api_key",className:le.api_key?"text-destructive":"",children:"API Key *"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ce,{id:"api_key",type:ye?"text":"password",value:U?.api_key||"",onChange:P=>{R(je=>je?{...je,api_key:P.target.value}:null),le.api_key&&O(je=>({...je,api_key:void 0}))},placeholder:"sk-...",className:`flex-1 ${le.api_key?"border-destructive focus-visible:ring-destructive":""}`}),e.jsx(N,{type:"button",variant:"outline",size:"icon",onClick:()=>ve(!ye),title:ye?"":"",children:ye?e.jsx(mr,{className:"h-4 w-4"}):e.jsx(Zt,{className:"h-4 w-4"})}),e.jsx(N,{type:"button",variant:"outline",size:"icon",onClick:rl,title:"",children:e.jsx(so,{className:"h-4 w-4"})})]}),le.api_key&&e.jsx("p",{className:"text-xs text-destructive",children:le.api_key})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"client_type",children:""}),e.jsxs(Qe,{value:U?.client_type||"openai",onValueChange:P=>R(je=>je?{...je,client_type:P}:null),disabled:kt,children:[e.jsx(Ge,{id:"client_type",className:kt?"bg-muted cursor-not-allowed":"",children:e.jsx($e,{placeholder:""})}),e.jsxs(Ve,{children:[e.jsx(ue,{value:"openai",children:"OpenAI"}),e.jsx(ue,{value:"gemini",children:"Gemini"})]})]}),kt&&e.jsx("p",{className:"text-xs text-muted-foreground",children:',""'})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"max_retry",children:""}),e.jsx(ce,{id:"max_retry",type:"number",min:"0",value:U?.max_retry??"",onChange:P=>{const je=P.target.value===""?null:parseInt(P.target.value);R(Ae=>Ae?{...Ae,max_retry:je}:null)},placeholder:": 2"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"timeout",children:"()"}),e.jsx(ce,{id:"timeout",type:"number",min:"1",value:U?.timeout??"",onChange:P=>{const je=P.target.value===""?null:parseInt(P.target.value);R(Ae=>Ae?{...Ae,timeout:je}:null)},placeholder:": 30"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"retry_interval",children:"()"}),e.jsx(ce,{id:"retry_interval",type:"number",min:"1",value:U?.retry_interval??"",onChange:P=>{const je=P.target.value===""?null:parseInt(P.target.value);R(Ae=>Ae?{...Ae,retry_interval:je}:null)},placeholder:": 10"})]})]})]}),e.jsxs(Is,{children:[e.jsx(N,{type:"button",variant:"outline",onClick:()=>K(!1),"data-tour":"provider-cancel-button",children:""}),e.jsx(N,{type:"submit","data-tour":"provider-save-button",children:""})]})]})]})}),e.jsx(ps,{open:D,onOpenChange:te,children:e.jsxs(cs,{children:[e.jsxs(os,{children:[e.jsx(us,{children:""}),e.jsxs(ms,{children:[' "',xe!==null?n[xe]?.name:"",'"  ']})]}),e.jsxs(ds,{children:[e.jsx(xs,{children:""}),e.jsx(hs,{onClick:Re,children:""})]})]})}),e.jsx(ps,{open:H,onOpenChange:ne,children:e.jsxs(cs,{children:[e.jsxs(os,{children:[e.jsx(us,{children:""}),e.jsxs(ms,{children:[" ",y.size,"  "]})]}),e.jsxs(ds,{children:[e.jsx(xs,{children:""}),e.jsx(hs,{onClick:on,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:""})]})]})}),z&&e.jsx(Iu,{onRestartComplete:bt,onRestartFailed:Je})]})}function bw({value:n,label:r,onRemove:c}){const{attributes:d,listeners:h,setNodeRef:x,transform:f,transition:j,isDragging:g}=gb({id:n}),_={transform:jb.Transform.toString(f),transition:j,opacity:g?.5:1};return e.jsx("div",{ref:x,style:_,className:$("inline-flex items-center gap-1",g&&"shadow-lg"),children:e.jsxs(Xe,{variant:"secondary",className:"cursor-move hover:bg-secondary/80 flex items-center gap-1",children:[e.jsx("div",{...d,...h,className:"cursor-grab active:cursor-grabbing flex items-center",children:e.jsx(DN,{className:"h-3 w-3 text-muted-foreground"})}),e.jsx("span",{children:r}),e.jsx(li,{className:"ml-1 h-3 w-3 cursor-pointer hover:text-destructive",strokeWidth:2,fill:"none",onClick:v=>{v.stopPropagation(),c(n)}})]})})}function ww({options:n,selected:r,onChange:c,placeholder:d="...",emptyText:h="",className:x}){const[f,j]=u.useState(!1),g=cb(Jf(pb,{activationConstraint:{distance:8}}),Jf(fb,{coordinateGetter:xb})),_=z=>{r.includes(z)?c(r.filter(T=>T!==z)):c([...r,z])},v=z=>{c(r.filter(T=>T!==z))},k=z=>{const{active:T,over:L}=z;if(L&&T.id!==L.id){const K=r.indexOf(T.id),U=r.indexOf(L.id);c(hb(r,K,U))}};return e.jsxs(Da,{open:f,onOpenChange:j,children:[e.jsx(Oa,{asChild:!0,children:e.jsxs(N,{variant:"outline",role:"combobox","aria-expanded":f,className:$("w-full justify-between min-h-10 h-auto",x),children:[e.jsx(ob,{sensors:g,collisionDetection:db,onDragEnd:k,children:e.jsx(ub,{items:r,strategy:mb,children:e.jsx("div",{className:"flex gap-1 flex-wrap flex-1",children:r.length===0?e.jsx("span",{className:"text-muted-foreground",children:d}):r.map(z=>{const T=n.find(L=>L.value===z);return e.jsx(bw,{value:z,label:T?.label||z,onRemove:v},z)})})})}),e.jsx($u,{className:"ml-2 h-4 w-4 shrink-0 opacity-50",strokeWidth:2,fill:"none"})]})}),e.jsx(Na,{className:"w-full p-0",align:"start",children:e.jsxs(oo,{children:[e.jsx(uo,{placeholder:"...",className:"h-9"}),e.jsxs(mo,{children:[e.jsx(ho,{children:h}),e.jsx(vr,{children:n.map(z=>{const T=r.includes(z.value);return e.jsxs(yr,{value:z.value,onSelect:()=>_(z.value),children:[e.jsx("div",{className:$("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",T?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"),children:e.jsx(ha,{className:"h-3 w-3",strokeWidth:2,fill:"none"})}),e.jsx("span",{children:z.label})]},z.value)})})]})]})})]})}const dp=new Map,_w=300*1e3;function Sw(){const[n,r]=u.useState([]),[c,d]=u.useState([]),[h,x]=u.useState([]),[f,j]=u.useState([]),[g,_]=u.useState(null),[v,k]=u.useState(!0),[z,T]=u.useState(!1),[L,K]=u.useState(!1),[U,R]=u.useState(!1),[ee,V]=u.useState(!1),[E,B]=u.useState(!1),[X,w]=u.useState(!1),[D,te]=u.useState(null),[xe,be]=u.useState(null),[ye,ve]=u.useState(!1),[pe,Ne]=u.useState(null),[y,q]=u.useState(""),[H,ne]=u.useState(new Set),[S,me]=u.useState(!1),[he,Q]=u.useState(1),[oe,ge]=u.useState(20),[le,O]=u.useState(""),[F,A]=u.useState([]),[W,_e]=u.useState(!1),[Me,ss]=u.useState(null),[Ie,Rs]=u.useState(!1),[qs,ie]=u.useState(null),[we,Ke]=u.useState({}),{toast:Le}=Bs(),st=It(),{registerTour:Jt,startTour:bt,state:Je,goToStep:Ue}=Ju(),jt=u.useRef(null),nt=u.useRef(null),Ct=u.useRef(!0);u.useEffect(()=>{Jt(ll,Hg)},[Jt]),u.useEffect(()=>{if(Je.activeTourId===ll&&Je.isRunning){const Y=qg[Je.stepIndex];Y&&!window.location.pathname.endsWith(Y.replace("/config/",""))&&st({to:Y})}},[Je.stepIndex,Je.activeTourId,Je.isRunning,st]);const kt=u.useRef(Je.stepIndex);u.useEffect(()=>{if(Je.activeTourId===ll&&Je.isRunning){const Y=kt.current,fe=Je.stepIndex;Y>=12&&Y<=17&&fe<12&&w(!1),kt.current=fe}},[Je.stepIndex,Je.activeTourId,Je.isRunning]),u.useEffect(()=>{if(Je.activeTourId!==ll||!Je.isRunning)return;const Y=fe=>{const De=fe.target,Fe=Je.stepIndex;Fe===2&&De.closest('[data-tour="add-provider-button"]')?setTimeout(()=>Ue(3),300):Fe===9&&De.closest('[data-tour="provider-cancel-button"]')?setTimeout(()=>Ue(10),300):Fe===11&&De.closest('[data-tour="add-model-button"]')?setTimeout(()=>Ue(12),300):Fe===17&&De.closest('[data-tour="model-cancel-button"]')?setTimeout(()=>Ue(18),300):Fe===18&&De.closest('[data-tour="tasks-tab-trigger"]')&&setTimeout(()=>Ue(19),300)};return document.addEventListener("click",Y,!0),()=>document.removeEventListener("click",Y,!0)},[Je,Ue]);const rl=()=>{bt(ll)};u.useEffect(()=>{cl()},[]);const cl=async()=>{try{k(!0);const Y=await ei(),fe=Y.models||[];r(fe),j(fe.map(Fe=>Fe.name));const De=Y.api_providers||[];d(De.map(Fe=>Fe.name)),x(De),_(Y.model_task_config||null),R(!1),Ct.current=!1}catch(Y){console.error(":",Y)}finally{k(!1)}},ol=u.useCallback(Y=>h.find(fe=>fe.name===Y),[h]),Se=u.useCallback(async(Y,fe=!1)=>{const De=ol(Y);if(!De?.base_url){A([]),ie(null),ss('""');return}if(!De.api_key){A([]),ie(null),ss(' API Key""');return}const Fe=yw(De.base_url);if(ie(Fe),!Fe?.modelFetcher){A([]),ss(null);return}const Ys=`${Y}:${De.base_url}`,wa=dp.get(Ys);if(!fe&&wa&&Date.now()-wa.timestamp<_w){A(wa.models),ss(null);return}_e(!0),ss(null);try{const Ba=await Q0(Y,Fe.modelFetcher.parser,Fe.modelFetcher.endpoint);A(Ba),dp.set(Ys,{models:Ba,timestamp:Date.now()})}catch(Ba){console.error(":",Ba);const _a=Ba.message||"";_a.includes("")||_a.includes("")||_a.includes("API Key")?ss('API Key ""'):_a.includes("")?ss(" API Key "):_a.includes("timeout")||_a.includes("")?ss(""):_a.includes("")?ss(""):ss(_a),A([])}finally{_e(!1)}},[ol]);u.useEffect(()=>{X&&D?.api_provider&&Se(D.api_provider)},[X,D?.api_provider,Se]);const Re=async()=>{try{V(!0),co().catch(()=>{}),B(!0)}catch(Y){console.error(":",Y),B(!1),Le({title:"",description:"",variant:"destructive"}),V(!1)}},it=async()=>{try{T(!0),jt.current&&clearTimeout(jt.current),nt.current&&clearTimeout(nt.current);const Y=await ei();Y.models=n,Y.model_task_config=g,await io(Y),R(!1),Le({title:"",description:"..."}),await Re()}catch(Y){console.error(":",Y),Le({title:"",description:Y.message,variant:"destructive"}),T(!1)}},ot=()=>{localStorage.removeItem("access-token"),window.location.href="/auth"},di=()=>{B(!1),V(!1),Le({title:"",description:"",variant:"destructive"})},on=u.useCallback(async Y=>{if(!Ct.current)try{K(!0),await qu("models",Y),R(!1)}catch(fe){console.error(":",fe),R(!0)}finally{K(!1)}},[]),dt=u.useCallback(async Y=>{if(!Ct.current)try{K(!0),await qu("model_task_config",Y),R(!1)}catch(fe){console.error(":",fe),R(!0)}finally{K(!1)}},[]);u.useEffect(()=>{if(!Ct.current)return R(!0),jt.current&&clearTimeout(jt.current),jt.current=setTimeout(()=>{on(n)},2e3),()=>{jt.current&&clearTimeout(jt.current)}},[n,on]),u.useEffect(()=>{if(!(Ct.current||!g))return R(!0),nt.current&&clearTimeout(nt.current),nt.current=setTimeout(()=>{dt(g)},2e3),()=>{nt.current&&clearTimeout(nt.current)}},[g,dt]);const Pt=async()=>{try{T(!0),jt.current&&clearTimeout(jt.current),nt.current&&clearTimeout(nt.current);const Y=await ei();Y.models=n,Y.model_task_config=g,await io(Y),R(!1),Le({title:"",description:""}),await cl()}catch(Y){console.error(":",Y),Le({title:"",description:Y.message,variant:"destructive"})}finally{T(!1)}},Wt=(Y,fe)=>{Ke({}),te(Y||{model_identifier:"",name:"",api_provider:c[0]||"",price_in:0,price_out:0,force_stream_mode:!1,extra_params:{}}),be(fe),w(!0)},La=()=>{if(!D)return;const Y={};if(D.name?.trim()||(Y.name=""),D.api_provider?.trim()||(Y.api_provider=" API "),D.model_identifier?.trim()||(Y.model_identifier=""),Object.keys(Y).length>0){Ke(Y);return}Ke({});const fe={...D,price_in:D.price_in??0,price_out:D.price_out??0};let De;xe!==null?(De=[...n],De[xe]=fe):De=[...n,fe],r(De),j(De.map(Fe=>Fe.name)),w(!1),te(null),be(null)},Ut=Y=>{if(!Y&&D){const fe={...D,price_in:D.price_in??0,price_out:D.price_out??0};te(fe)}w(Y)},Ua=Y=>{Ne(Y),ve(!0)},ba=()=>{if(pe!==null){const Y=n.filter((fe,De)=>De!==pe);r(Y),j(Y.map(fe=>fe.name)),Le({title:"",description:""})}ve(!1),Ne(null)},P=Y=>{const fe=new Set(H);fe.has(Y)?fe.delete(Y):fe.add(Y),ne(fe)},je=()=>{if(H.size===Tt.length)ne(new Set);else{const Y=Tt.map((fe,De)=>n.findIndex(Fe=>Fe===Tt[De]));ne(new Set(Y))}},Ae=()=>{if(H.size===0){Le({title:"",description:"",variant:"default"});return}me(!0)},tt=()=>{const Y=n.filter((fe,De)=>!H.has(De));r(Y),j(Y.map(fe=>fe.name)),ne(new Set),me(!1),Le({title:"",description:` ${H.size} `})},Bt=(Y,fe,De)=>{g&&_({...g,[Y]:{...g[Y],[fe]:De}})},Tt=n.filter(Y=>{if(!y)return!0;const fe=y.toLowerCase();return Y.name.toLowerCase().includes(fe)||Y.model_identifier.toLowerCase().includes(fe)||Y.api_provider.toLowerCase().includes(fe)}),dl=Math.ceil(Tt.length/oe),Hl=Tt.slice((he-1)*oe,he*oe),dn=()=>{const Y=parseInt(le);Y>=1&&Y<=dl&&(Q(Y),O(""))},un=Y=>g?[g.utils?.model_list||[],g.utils_small?.model_list||[],g.tool_use?.model_list||[],g.replyer?.model_list||[],g.planner?.model_list||[],g.vlm?.model_list||[],g.voice?.model_list||[],g.embedding?.model_list||[],g.lpmm_entity_extract?.model_list||[],g.lpmm_rdf_build?.model_list||[],g.lpmm_qa?.model_list||[]].some(De=>De.includes(Y)):!1;return v?e.jsx(es,{className:"h-full",children:e.jsx("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("p",{className:"text-muted-foreground",children:"..."})})})}):e.jsx(es,{className:"h-full",children:e.jsxs("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:""}),e.jsx("p",{className:"text-muted-foreground mt-1 sm:mt-2 text-sm sm:text-base",children:""})]}),e.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[e.jsxs(N,{onClick:Pt,disabled:z||L||!U||ee,size:"sm",variant:"outline",className:"flex-1 sm:flex-none sm:min-w-[120px]",children:[e.jsx(br,{className:"mr-2 h-4 w-4",strokeWidth:2,fill:"none"}),z?"...":L?"...":U?"":""]}),e.jsxs(ps,{children:[e.jsx(Qs,{asChild:!0,children:e.jsxs(N,{disabled:z||L||ee,size:"sm",className:"flex-1 sm:flex-none sm:min-w-[120px]",children:[e.jsx(Nr,{className:"mr-2 h-4 w-4"}),ee?"...":U?"":""]})}),e.jsxs(cs,{children:[e.jsxs(os,{children:[e.jsx(us,{children:""}),e.jsx(ms,{className:"space-y-3",asChild:!0,children:e.jsxs("div",{children:[e.jsx("p",{children:U?",":","}),e.jsxs(ua,{className:"border-yellow-500/50 bg-yellow-500/10",children:[e.jsx(Xt,{className:"h-4 w-4 text-yellow-600"}),e.jsxs(ma,{className:"text-yellow-900 dark:text-yellow-100",children:[e.jsx("strong",{children:":"}),",, ",e.jsx("code",{className:"px-1 py-0.5 bg-yellow-200 dark:bg-yellow-900 rounded",children:"Ctrl+C"})," ",e.jsxs(Os,{children:[e.jsx(ni,{asChild:!0,children:e.jsxs("button",{className:"ml-1 text-yellow-700 dark:text-yellow-300 underline hover:text-yellow-800 dark:hover:text-yellow-200 inline-flex items-center gap-1",children:[e.jsx(ro,{className:"h-3 w-3"}),""]})}),e.jsxs(Es,{className:"max-w-2xl",children:[e.jsxs(zs,{children:[e.jsx(Ms,{children:""}),e.jsx($s,{children:""})]}),e.jsxs(Kt,{defaultValue:"windows",className:"w-full",children:[e.jsxs(Rt,{className:"grid w-full grid-cols-3",children:[e.jsx(He,{value:"windows",children:"Windows"}),e.jsx(He,{value:"macos",children:"macOS"}),e.jsx(He,{value:"linux",children:"Linux"})]}),e.jsxs(We,{value:"windows",className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-semibold",children:""}),e.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-sm text-muted-foreground",children:[e.jsxs("li",{children:[" ",e.jsx("code",{className:"px-1 py-0.5 bg-muted rounded",children:"Ctrl + Shift + Esc"})," "]}),e.jsxs("li",{children:['"""" ',e.jsx("code",{className:"px-1 py-0.5 bg-muted rounded",children:"python.exe"})]}),e.jsx("li",{children:'""'})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-semibold",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:" PowerShell "}),e.jsxs("div",{className:"bg-muted p-3 rounded-md font-mono text-sm",children:[e.jsx("p",{children:"# "}),e.jsx("p",{children:'Get-Process python | Where-Object {$_.MainWindowTitle -eq ""}'}),e.jsx("p",{className:"mt-2",children:"#  Python "}),e.jsx("p",{children:"Stop-Process -Name python -Force"})]})]})]}),e.jsxs(We,{value:"macos",className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-semibold",children:""}),e.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-sm text-muted-foreground",children:[e.jsxs("li",{children:[" ",e.jsx("code",{className:"px-1 py-0.5 bg-muted rounded",children:"Cmd + Space"}),'  Spotlight""']}),e.jsxs("li",{children:[" ",e.jsx("code",{className:"px-1 py-0.5 bg-muted rounded",children:"Python"})]}),e.jsx("li",{children:" X "})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-semibold",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""}),e.jsxs("div",{className:"bg-muted p-3 rounded-md font-mono text-sm",children:[e.jsx("p",{children:"# "}),e.jsx("p",{children:"ps aux | grep python | grep -v grep"}),e.jsx("p",{className:"mt-2",children:"#  PID "}),e.jsx("p",{children:"kill -9 <PID>"}),e.jsx("p",{className:"mt-2",children:"#  Python "}),e.jsx("p",{children:"pkill -9 python"})]})]})]}),e.jsxs(We,{value:"linux",className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-semibold",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""}),e.jsxs("div",{className:"bg-muted p-3 rounded-md font-mono text-sm",children:[e.jsx("p",{children:"# "}),e.jsx("p",{children:"ps aux | grep python | grep -v grep"}),e.jsx("p",{className:"mt-2",children:"#  PID "}),e.jsx("p",{children:"kill -9 <PID>"}),e.jsx("p",{className:"mt-2",children:"#  pkill "}),e.jsx("p",{children:'pkill -9 -f "bot.py"'}),e.jsx("p",{className:"mt-2",children:"#  Python "}),e.jsx("p",{children:"pkill -9 python"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-semibold",children:" htop"}),e.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-sm text-muted-foreground",children:[e.jsxs("li",{children:[" ",e.jsx("code",{className:"px-1 py-0.5 bg-muted rounded",children:"htop"})]}),e.jsxs("li",{children:[" ",e.jsx("code",{className:"px-1 py-0.5 bg-muted rounded",children:"F3"}),"  python"]}),e.jsxs("li",{children:[" ",e.jsx("code",{className:"px-1 py-0.5 bg-muted rounded",children:"F9"}),"  SIGKILL"]})]})]})]})]}),e.jsx(Is,{children:e.jsx(Zu,{asChild:!0,children:e.jsx(N,{variant:"outline",children:""})})})]})]})]})]})]})})]}),e.jsxs(ds,{children:[e.jsx(xs,{children:""}),e.jsx(hs,{onClick:U?it:Re,children:U?"":""})]})]})]})]})]}),e.jsxs(ua,{children:[e.jsx(Xt,{className:"h-4 w-4"}),e.jsxs(ma,{children:["",e.jsx("strong",{children:""}),'""']})]}),e.jsxs(ua,{className:"hidden lg:flex border-primary/30 bg-primary/5 cursor-pointer hover:bg-primary/10 transition-colors",onClick:rl,children:[e.jsx(ON,{className:"h-4 w-4 text-primary"}),e.jsxs(ma,{className:"flex items-center justify-between",children:[e.jsxs("span",{children:[e.jsx("strong",{className:"text-primary",children:""}),""]}),e.jsx(N,{variant:"outline",size:"sm",className:"ml-4 shrink-0",children:""})]})]}),e.jsxs(Kt,{defaultValue:"models",className:"w-full",children:[e.jsxs(Rt,{className:"grid w-full max-w-full sm:max-w-md grid-cols-2",children:[e.jsx(He,{value:"models",children:""}),e.jsx(He,{value:"tasks","data-tour":"tasks-tab-trigger",children:""})]}),e.jsxs(We,{value:"models",className:"space-y-4 mt-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:""}),e.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[H.size>0&&e.jsxs(N,{onClick:Ae,size:"sm",variant:"destructive",className:"w-full sm:w-auto",children:[e.jsx(ns,{className:"mr-2 h-4 w-4",strokeWidth:2,fill:"none"})," (",H.size,")"]}),e.jsxs(N,{onClick:()=>Wt(null,null),size:"sm",variant:"outline",className:"w-full sm:w-auto","data-tour":"add-model-button",children:[e.jsx(gt,{className:"mr-2 h-4 w-4",strokeWidth:2,fill:"none"}),""]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2",children:[e.jsxs("div",{className:"relative w-full sm:flex-1 sm:max-w-sm",children:[e.jsx(St,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(ce,{placeholder:"...",value:y,onChange:Y=>q(Y.target.value),className:"pl-9"})]}),y&&e.jsxs("p",{className:"text-sm text-muted-foreground whitespace-nowrap",children:[" ",Tt.length," "]})]}),e.jsx("div",{className:"md:hidden space-y-3",children:Hl.length===0?e.jsx("div",{className:"text-center text-muted-foreground py-8 rounded-lg border bg-card",children:y?"":""}):Hl.map((Y,fe)=>{const De=n.findIndex(Ys=>Ys===Y),Fe=un(Y.name);return e.jsxs("div",{className:"rounded-lg border bg-card p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"font-semibold text-base",children:Y.name}),e.jsx(Xe,{variant:Fe?"default":"secondary",className:Fe?"bg-green-600 hover:bg-green-700":"",children:Fe?"":""})]}),e.jsx("p",{className:"text-xs text-muted-foreground break-all",title:Y.model_identifier,children:Y.model_identifier})]}),e.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[e.jsxs(N,{variant:"default",size:"sm",onClick:()=>Wt(Y,De),children:[e.jsx(nn,{className:"h-4 w-4 mr-1",strokeWidth:2,fill:"none"}),""]}),e.jsxs(N,{size:"sm",onClick:()=>Ua(De),className:"bg-red-600 hover:bg-red-700 text-white",children:[e.jsx(ns,{className:"h-4 w-4 mr-1",strokeWidth:2,fill:"none"}),""]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground text-xs",children:""}),e.jsx("p",{className:"font-medium",children:Y.api_provider})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground text-xs",children:""}),e.jsx("p",{className:"font-medium",children:Y.force_stream_mode?"":""})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground text-xs",children:""}),e.jsxs("p",{className:"font-medium",children:["",Y.price_in,"/M"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground text-xs",children:""}),e.jsxs("p",{className:"font-medium",children:["",Y.price_out,"/M"]})]})]})]},fe)})}),e.jsx("div",{className:"hidden md:block rounded-lg border bg-card overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(ii,{children:[e.jsx(ri,{children:e.jsxs(pt,{children:[e.jsx(ls,{className:"w-12",children:e.jsx(yt,{checked:H.size===Tt.length&&Tt.length>0,onCheckedChange:je})}),e.jsx(ls,{className:"w-24",children:""}),e.jsx(ls,{children:""}),e.jsx(ls,{children:""}),e.jsx(ls,{children:""}),e.jsx(ls,{className:"text-right",children:""}),e.jsx(ls,{className:"text-right",children:""}),e.jsx(ls,{className:"text-center",children:""}),e.jsx(ls,{className:"text-right",children:""})]})}),e.jsx(ci,{children:Hl.length===0?e.jsx(pt,{children:e.jsx(Ye,{colSpan:9,className:"text-center text-muted-foreground py-8",children:y?"":""})}):Hl.map((Y,fe)=>{const De=n.findIndex(Ys=>Ys===Y),Fe=un(Y.name);return e.jsxs(pt,{children:[e.jsx(Ye,{children:e.jsx(yt,{checked:H.has(De),onCheckedChange:()=>P(De)})}),e.jsx(Ye,{children:e.jsx(Xe,{variant:Fe?"default":"secondary",className:Fe?"bg-green-600 hover:bg-green-700":"",children:Fe?"":""})}),e.jsx(Ye,{className:"font-medium",children:Y.name}),e.jsx(Ye,{className:"max-w-xs truncate",title:Y.model_identifier,children:Y.model_identifier}),e.jsx(Ye,{children:Y.api_provider}),e.jsxs(Ye,{className:"text-right",children:["",Y.price_in,"/M"]}),e.jsxs(Ye,{className:"text-right",children:["",Y.price_out,"/M"]}),e.jsx(Ye,{className:"text-center",children:Y.force_stream_mode?"":""}),e.jsx(Ye,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsxs(N,{variant:"default",size:"sm",onClick:()=>Wt(Y,De),children:[e.jsx(nn,{className:"h-4 w-4 mr-1",strokeWidth:2,fill:"none"}),""]}),e.jsxs(N,{size:"sm",onClick:()=>Ua(De),className:"bg-red-600 hover:bg-red-700 text-white",children:[e.jsx(ns,{className:"h-4 w-4 mr-1",strokeWidth:2,fill:"none"}),""]})]})})]},fe)})})]})})}),Tt.length>0&&e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{htmlFor:"page-size-model",className:"text-sm whitespace-nowrap",children:""}),e.jsxs(Qe,{value:oe.toString(),onValueChange:Y=>{ge(parseInt(Y)),Q(1),ne(new Set)},children:[e.jsx(Ge,{id:"page-size-model",className:"w-20",children:e.jsx($e,{})}),e.jsxs(Ve,{children:[e.jsx(ue,{value:"10",children:"10"}),e.jsx(ue,{value:"20",children:"20"}),e.jsx(ue,{value:"50",children:"50"}),e.jsx(ue,{value:"100",children:"100"})]})]}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[" ",(he-1)*oe+1," "," ",Math.min(he*oe,Tt.length),"  ",Tt.length," "]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{variant:"outline",size:"sm",onClick:()=>Q(1),disabled:he===1,className:"hidden sm:flex",children:e.jsx(wr,{className:"h-4 w-4"})}),e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>Q(Y=>Math.max(1,Y-1)),disabled:he===1,children:[e.jsx(cn,{className:"h-4 w-4 sm:mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ce,{type:"number",value:le,onChange:Y=>O(Y.target.value),onKeyDown:Y=>Y.key==="Enter"&&dn(),placeholder:he.toString(),className:"w-16 h-8 text-center",min:1,max:dl}),e.jsx(N,{variant:"outline",size:"sm",onClick:dn,disabled:!le,className:"h-8",children:""})]}),e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>Q(Y=>Y+1),disabled:he>=dl,children:[e.jsx("span",{className:"hidden sm:inline",children:""}),e.jsx(il,{className:"h-4 w-4 sm:ml-1"})]}),e.jsx(N,{variant:"outline",size:"sm",onClick:()=>Q(dl),disabled:he>=dl,className:"hidden sm:flex",children:e.jsx(_r,{className:"h-4 w-4"})})]})]})]}),e.jsxs(We,{value:"tasks",className:"space-y-6 mt-0",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:""}),g&&e.jsxs("div",{className:"grid gap-4 sm:gap-6",children:[e.jsx(ja,{title:" (utils)",description:"",taskConfig:g.utils,modelNames:f,onChange:(Y,fe)=>Bt("utils",Y,fe),dataTour:"task-model-select"}),e.jsx(ja,{title:" (utils_small)",description:"",taskConfig:g.utils_small,modelNames:f,onChange:(Y,fe)=>Bt("utils_small",Y,fe)}),e.jsx(ja,{title:" (tool_use)",description:"",taskConfig:g.tool_use,modelNames:f,onChange:(Y,fe)=>Bt("tool_use",Y,fe)}),e.jsx(ja,{title:" (replyer)",description:"",taskConfig:g.replyer,modelNames:f,onChange:(Y,fe)=>Bt("replyer",Y,fe)}),e.jsx(ja,{title:" (planner)",description:"",taskConfig:g.planner,modelNames:f,onChange:(Y,fe)=>Bt("planner",Y,fe)}),e.jsx(ja,{title:" (vlm)",description:"",taskConfig:g.vlm,modelNames:f,onChange:(Y,fe)=>Bt("vlm",Y,fe),hideTemperature:!0}),e.jsx(ja,{title:" (voice)",description:"",taskConfig:g.voice,modelNames:f,onChange:(Y,fe)=>Bt("voice",Y,fe),hideTemperature:!0,hideMaxTokens:!0}),e.jsx(ja,{title:" (embedding)",description:"",taskConfig:g.embedding,modelNames:f,onChange:(Y,fe)=>Bt("embedding",Y,fe),hideTemperature:!0,hideMaxTokens:!0}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"LPMM "}),e.jsx(ja,{title:" (lpmm_entity_extract)",description:"",taskConfig:g.lpmm_entity_extract,modelNames:f,onChange:(Y,fe)=>Bt("lpmm_entity_extract",Y,fe)}),e.jsx(ja,{title:"RDF  (lpmm_rdf_build)",description:"",taskConfig:g.lpmm_rdf_build,modelNames:f,onChange:(Y,fe)=>Bt("lpmm_rdf_build",Y,fe)}),e.jsx(ja,{title:" (lpmm_qa)",description:"",taskConfig:g.lpmm_qa,modelNames:f,onChange:(Y,fe)=>Bt("lpmm_qa",Y,fe)})]})]})]})]}),e.jsx(Os,{open:X,onOpenChange:Ut,children:e.jsxs(Es,{className:"max-w-[95vw] sm:max-w-2xl max-h-[90vh] overflow-y-auto","data-tour":"model-dialog",preventOutsideClose:Je.isRunning,children:[e.jsxs(zs,{children:[e.jsx(Ms,{children:xe!==null?"":""}),e.jsx($s,{children:""})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2","data-tour":"model-name-input",children:[e.jsx(b,{htmlFor:"model_name",className:we.name?"text-destructive":"",children:" *"}),e.jsx(ce,{id:"model_name",value:D?.name||"",onChange:Y=>{te(fe=>fe?{...fe,name:Y.target.value}:null),we.name&&Ke(fe=>({...fe,name:void 0}))},placeholder:": qwen3-30b",className:we.name?"border-destructive focus-visible:ring-destructive":""}),we.name?e.jsx("p",{className:"text-xs text-destructive",children:we.name}):e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"grid gap-2","data-tour":"model-provider-select",children:[e.jsx(b,{htmlFor:"api_provider",className:we.api_provider?"text-destructive":"",children:"API  *"}),e.jsxs(Qe,{value:D?.api_provider||"",onValueChange:Y=>{te(fe=>fe?{...fe,api_provider:Y}:null),A([]),ss(null),we.api_provider&&Ke(fe=>({...fe,api_provider:void 0}))},children:[e.jsx(Ge,{id:"api_provider",className:we.api_provider?"border-destructive focus-visible:ring-destructive":"",children:e.jsx($e,{placeholder:""})}),e.jsx(Ve,{children:c.map(Y=>e.jsx(ue,{value:Y,children:Y},Y))})]}),we.api_provider&&e.jsx("p",{className:"text-xs text-destructive",children:we.api_provider})]}),e.jsxs("div",{className:"grid gap-2","data-tour":"model-identifier-input",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(b,{htmlFor:"model_identifier",className:we.model_identifier?"text-destructive":"",children:" *"}),qs?.modelFetcher&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Xe,{variant:"secondary",className:"text-xs",children:qs.display_name}),e.jsx(N,{variant:"ghost",size:"sm",className:"h-6 px-2",onClick:()=>D?.api_provider&&Se(D.api_provider,!0),disabled:W,children:W?e.jsx(vt,{className:"h-3 w-3 animate-spin"}):e.jsx(ft,{className:"h-3 w-3"})})]})]}),qs?.modelFetcher?e.jsxs(Da,{open:Ie,onOpenChange:Rs,children:[e.jsx(Oa,{asChild:!0,children:e.jsxs(N,{variant:"outline",role:"combobox","aria-expanded":Ie,className:"w-full justify-between font-normal",disabled:W||!!Me,children:[W?e.jsxs("span",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(vt,{className:"h-4 w-4 animate-spin"}),"..."]}):Me?e.jsx("span",{className:"text-muted-foreground text-sm",children:""}):D?.model_identifier?e.jsx("span",{className:"truncate",children:D.model_identifier}):e.jsx("span",{className:"text-muted-foreground",children:"..."}),e.jsx($u,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsx(Na,{className:"p-0",align:"start",style:{width:"var(--radix-popover-trigger-width)"},children:e.jsxs(oo,{children:[e.jsx(uo,{placeholder:"..."}),e.jsx(es,{className:"h-[300px]",children:e.jsxs(mo,{className:"max-h-none overflow-visible",children:[e.jsx(ho,{children:Me?e.jsxs("div",{className:"py-4 px-2 text-center space-y-2",children:[e.jsx("p",{className:"text-sm text-destructive",children:Me}),!Me.includes("API Key")&&e.jsx(N,{variant:"link",size:"sm",onClick:()=>D?.api_provider&&Se(D.api_provider,!0),children:""})]}):""}),e.jsx(vr,{heading:"",children:F.map(Y=>e.jsxs(yr,{value:Y.id,onSelect:()=>{te(fe=>fe?{...fe,model_identifier:Y.id}:null),Rs(!1)},children:[e.jsx(ha,{className:`mr-2 h-4 w-4 ${D?.model_identifier===Y.id?"opacity-100":"opacity-0"}`}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{children:Y.id}),Y.name!==Y.id&&e.jsx("span",{className:"text-xs text-muted-foreground",children:Y.name})]})]},Y.id))}),e.jsx(vr,{heading:"",children:e.jsxs(yr,{value:"__manual_input__",onSelect:()=>{Rs(!1)},children:[e.jsx(nn,{className:"mr-2 h-4 w-4"}),"..."]})})]})})]})})]}):e.jsx(ce,{id:"model_identifier",value:D?.model_identifier||"",onChange:Y=>{te(fe=>fe?{...fe,model_identifier:Y.target.value}:null),we.model_identifier&&Ke(fe=>({...fe,model_identifier:void 0}))},placeholder:"Qwen/Qwen3-30B-A3B-Instruct-2507",className:we.model_identifier?"border-destructive focus-visible:ring-destructive":""}),we.model_identifier&&e.jsx("p",{className:"text-xs text-destructive",children:we.model_identifier}),Me&&qs?.modelFetcher&&!we.model_identifier&&e.jsxs(ua,{variant:"destructive",className:"mt-2 py-2",children:[e.jsx(Xt,{className:"h-4 w-4"}),e.jsx(ma,{className:"text-xs",children:Me})]}),qs?.modelFetcher&&e.jsx(ce,{value:D?.model_identifier||"",onChange:Y=>{te(fe=>fe?{...fe,model_identifier:Y.target.value}:null),we.model_identifier&&Ke(fe=>({...fe,model_identifier:void 0}))},placeholder:"",className:`mt-2 ${we.model_identifier?"border-destructive focus-visible:ring-destructive":""}`}),!we.model_identifier&&e.jsx("p",{className:"text-xs text-muted-foreground",children:Me?'"" API Key':qs?.modelFetcher?` ${qs.display_name}`:"API  ID"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"price_in",children:" (/M token)"}),e.jsx(ce,{id:"price_in",type:"number",step:"0.1",min:"0",value:D?.price_in??"",onChange:Y=>{const fe=Y.target.value===""?null:parseFloat(Y.target.value);te(De=>De?{...De,price_in:fe}:null)},placeholder:": 0"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"price_out",children:" (/M token)"}),e.jsx(ce,{id:"price_out",type:"number",step:"0.1",min:"0",value:D?.price_out??"",onChange:Y=>{const fe=Y.target.value===""?null:parseFloat(Y.target.value);te(De=>De?{...De,price_out:fe}:null)},placeholder:": 0"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(qe,{id:"force_stream_mode",checked:D?.force_stream_mode||!1,onCheckedChange:Y=>te(fe=>fe?{...fe,force_stream_mode:Y}:null)}),e.jsx(b,{htmlFor:"force_stream_mode",className:"cursor-pointer",children:""})]})]}),e.jsxs(Is,{children:[e.jsx(N,{variant:"outline",onClick:()=>w(!1),"data-tour":"model-cancel-button",children:""}),e.jsx(N,{onClick:La,"data-tour":"model-save-button",children:""})]})]})}),e.jsx(ps,{open:ye,onOpenChange:ve,children:e.jsxs(cs,{children:[e.jsxs(os,{children:[e.jsx(us,{children:""}),e.jsxs(ms,{children:[' "',pe!==null?n[pe]?.name:"",'"  ']})]}),e.jsxs(ds,{children:[e.jsx(xs,{children:""}),e.jsx(hs,{onClick:ba,children:""})]})]})}),e.jsx(ps,{open:S,onOpenChange:me,children:e.jsxs(cs,{children:[e.jsxs(os,{children:[e.jsx(us,{children:""}),e.jsxs(ms,{children:[" ",H.size,"  "]})]}),e.jsxs(ds,{children:[e.jsx(xs,{children:""}),e.jsx(hs,{onClick:tt,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:""})]})]})}),E&&e.jsx(Iu,{onRestartComplete:ot,onRestartFailed:di})]})})}function ja({title:n,description:r,taskConfig:c,modelNames:d,onChange:h,hideTemperature:x=!1,hideMaxTokens:f=!1,dataTour:j}){const g=_=>{h("model_list",_)};return e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-base sm:text-lg",children:n}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mt-1",children:r})]}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-2","data-tour":j,children:[e.jsx(b,{children:""}),e.jsx(ww,{options:d.map(_=>({label:_,value:_})),selected:c.model_list||[],onChange:g,placeholder:"...",emptyText:""})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[!x&&e.jsxs("div",{className:"grid gap-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(b,{children:""}),e.jsx(ce,{type:"number",step:"0.1",min:"0",max:"1",value:c.temperature??.3,onChange:_=>{const v=parseFloat(_.target.value);!isNaN(v)&&v>=0&&v<=1&&h("temperature",v)},className:"w-20 h-8 text-sm"})]}),e.jsx(za,{value:[c.temperature??.3],onValueChange:_=>h("temperature",_[0]),min:0,max:1,step:.1,className:"w-full"})]}),!f&&e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{children:" Token"}),e.jsx(ce,{type:"number",step:"1",min:"1",value:c.max_tokens??1024,onChange:_=>h("max_tokens",parseInt(_.target.value))})]})]})]})]})}const xo="/api/webui/config";async function Cw(){const r=await(await ke(`${xo}/adapter-config/path`)).json();return!r.success||!r.path?null:{path:r.path,lastModified:r.lastModified}}async function up(n){const c=await(await ke(`${xo}/adapter-config/path`,{method:"POST",headers:ze(),body:JSON.stringify({path:n})})).json();if(!c.success)throw new Error(c.message||"")}async function mp(n){const c=await(await ke(`${xo}/adapter-config?path=${encodeURIComponent(n)}`)).json();if(!c.success)throw new Error("");return c.content}async function hp(n,r){const d=await(await ke(`${xo}/adapter-config`,{method:"POST",headers:ze(),body:JSON.stringify({path:n,content:r})})).json();if(!d.success)throw new Error(d.message||"")}const Yt={inner:{version:"0.1.2"},nickname:{nickname:""},napcat_server:{host:"localhost",port:8095,token:"",heartbeat_interval:30},maibot_server:{host:"localhost",port:8e3},chat:{group_list_type:"whitelist",group_list:[],private_list_type:"whitelist",private_list:[],ban_user_id:[],ban_qq_bot:!1,enable_poke:!0},voice:{use_tts:!1},debug:{level:"INFO"}},Du={oneclick:{name:"",description:"",path:"../MaiBot-Napcat-Adapter/config.toml",icon:rn},docker:{name:"Docker",description:"Docker Compose ",path:"/MaiMBot/adapters-config/config.toml",icon:RN}};function kw(){const[n,r]=u.useState("upload"),[c,d]=u.useState(null),[h,x]=u.useState(""),[f,j]=u.useState(""),[g,_]=u.useState("oneclick"),[v,k]=u.useState(""),[z,T]=u.useState(!1),[L,K]=u.useState(!1),[U,R]=u.useState(!1),[ee,V]=u.useState(!1),[E,B]=u.useState(null),X=u.useRef(null),{toast:w}=Bs(),D=u.useRef(null),te=O=>{if(!O.trim())return{valid:!1,error:""};if(!O.toLowerCase().endsWith(".toml"))return{valid:!1,error:" .toml "};const F=/^([a-zA-Z]:\\|\\\\[^\\]+\\[^\\]+\\).+\.toml$/i,A=/^(\/|~\/).+\.toml$/i,W=/^(\.{1,2}[\\/]|[^:\\/]).+\.toml$/i,_e=F.test(O),Me=A.test(O),ss=W.test(O);return!_e&&!Me&&!ss?{valid:!1,error:""}:/[<>"|?*\x00-\x1F]/.test(O)?{valid:!1,error:""}:{valid:!0,error:""}},xe=O=>{if(j(O),O.trim()){const F=te(O);k(F.error)}else k("")},be=u.useCallback(async O=>{const F=Du[O];K(!0);try{const A=await mp(F.path),W=he(A);d(W),_(O),j(F.path),await up(F.path),w({title:"",description:`${F.name}`})}catch(A){console.error(":",A),w({title:"",description:A instanceof Error?A.message:"",variant:"destructive"})}finally{K(!1)}},[w]),ye=u.useCallback(async O=>{const F=te(O);if(!F.valid){k(F.error),w({title:"",description:F.error,variant:"destructive"});return}k(""),K(!0);try{const A=await mp(O),W=he(A);d(W),j(O),await up(O),w({title:"",description:""})}catch(A){console.error(":",A),w({title:"",description:A instanceof Error?A.message:"",variant:"destructive"})}finally{K(!1)}},[w]);u.useEffect(()=>{(async()=>{try{const F=await Cw();if(F&&F.path){j(F.path);const A=Object.entries(Du).find(([,W])=>W.path===F.path);A?(r("preset"),_(A[0]),await be(A[0])):(r("path"),await ye(F.path))}}catch(F){console.error(":",F)}})()},[ye,be]);const ve=u.useCallback(O=>{n!=="path"&&n!=="preset"||!f||(D.current&&clearTimeout(D.current),D.current=setTimeout(async()=>{T(!0);try{const F=Q(O);await hp(f,F),w({title:"",description:""})}catch(F){console.error(":",F),w({title:"",description:F instanceof Error?F.message:"",variant:"destructive"})}finally{T(!1)}},1e3))},[n,f,w]),pe=async()=>{if(!c||!f)return;const O=te(f);if(!O.valid){w({title:"",description:O.error,variant:"destructive"});return}T(!0);try{const F=Q(c);await hp(f,F),w({title:"",description:""})}catch(F){console.error(":",F),w({title:"",description:F instanceof Error?F.message:"",variant:"destructive"})}finally{T(!1)}},Ne=async()=>{f&&await ye(f)},y=O=>{if(O!==n){if(c){B(O),R(!0);return}q(O)}},q=O=>{d(null),x(""),k(""),r(O),O==="preset"&&be("oneclick"),w({title:"",description:{upload:"",path:"",preset:""}[O]})},H=()=>{E&&(q(E),B(null)),R(!1)},ne=()=>{if(c){V(!0);return}S()},S=()=>{j(""),d(null),k(""),w({title:"",description:""})},me=()=>{S(),V(!1)},he=O=>{const F=JSON.parse(JSON.stringify(Yt)),A=O.split(`
`);let W="";for(const _e of A){const Me=_e.trim();if(!Me||Me.startsWith("#"))continue;const ss=Me.match(/^\[(\w+)\]/);if(ss){W=ss[1];continue}const Ie=Me.match(/^(\w+)\s*=\s*(.+)$/);if(Ie&&W){const[,Rs,qs]=Ie;let ie=qs.trim();const we=ie.match(/^("[^"]*")/);if(we)ie=we[1];else{const Le=ie.indexOf("#");Le!==-1&&(ie=ie.substring(0,Le).trim())}let Ke;if(ie==="true")Ke=!0;else if(ie==="false")Ke=!1;else if(ie.startsWith("[")&&ie.endsWith("]")){const Le=ie.slice(1,-1).trim();if(Le){const st=Le.split(",").map(bt=>{const Je=bt.trim();return isNaN(Number(Je))?Je.replace(/"/g,""):Number(Je)}),Jt=typeof st[0];Ke=st.every(bt=>typeof bt===Jt)?st:st.filter(bt=>typeof bt=="number")}else Ke=[]}else ie.startsWith('"')&&ie.endsWith('"')?Ke=ie.slice(1,-1):isNaN(Number(ie))?Ke=ie.replace(/"/g,""):Ke=Number(ie);if(W in F){const Le=F[W];Le[Rs]=Ke}}}return F},Q=O=>{const F=[],A=(W,_e)=>W===""||W===null||W===void 0?_e:W;return F.push("[inner]"),F.push(`version = "${A(O.inner.version,Yt.inner.version)}" # `),F.push("# "),F.push(""),F.push("[nickname] # "),F.push(`nickname = "${A(O.nickname.nickname,Yt.nickname.nickname)}"`),F.push(""),F.push("[napcat_server] # Napcatws"),F.push(`host = "${A(O.napcat_server.host,Yt.napcat_server.host)}"      # Napcat`),F.push(`port = ${A(O.napcat_server.port||0,Yt.napcat_server.port)}             # Napcat`),F.push(`token = "${A(O.napcat_server.token,Yt.napcat_server.token)}"              # Napcat`),F.push(`heartbeat_interval = ${A(O.napcat_server.heartbeat_interval||0,Yt.napcat_server.heartbeat_interval)} # Napcat`),F.push(""),F.push("[maibot_server] # ws"),F.push(`host = "${A(O.maibot_server.host,Yt.maibot_server.host)}" # .envHOST`),F.push(`port = ${A(O.maibot_server.port||0,Yt.maibot_server.port)}        # .envPORT`),F.push(""),F.push("[chat] # "),F.push(`group_list_type = "${A(O.chat.group_list_type,Yt.chat.group_list_type)}" # whitelist, blacklist`),F.push(`group_list = [${O.chat.group_list.join(", ")}]               # `),F.push("# group_list_typewhitelist"),F.push("# group_list_typeblacklist"),F.push(`private_list_type = "${A(O.chat.private_list_type,Yt.chat.private_list_type)}" # whitelist, blacklist`),F.push(`private_list = [${O.chat.private_list.join(", ")}]               # `),F.push("# private_list_typewhitelist"),F.push("# private_list_typeblacklist"),F.push(`ban_user_id = [${O.chat.ban_user_id.join(", ")}]   # `),F.push(`ban_qq_bot = ${O.chat.ban_qq_bot} # QQ`),F.push(`enable_poke = ${O.chat.enable_poke} # `),F.push(""),F.push("[voice] # "),F.push(`use_tts = ${O.voice.use_tts} # ttsttsadapter`),F.push(""),F.push("[debug]"),F.push(`level = "${A(O.debug.level,Yt.debug.level)}" # DEBUG, INFO, WARNING, ERROR, CRITICAL`),F.join(`
`)},oe=O=>{const F=O.target.files?.[0];if(!F)return;const A=new FileReader;A.onload=W=>{try{const _e=W.target?.result,Me=he(_e);d(Me),x(F.name),w({title:"",description:`${F.name}`})}catch(_e){console.error(":",_e),w({title:"",description:"",variant:"destructive"})}},A.readAsText(F)},ge=()=>{if(!c)return;const O=Q(c),F=new Blob([O],{type:"text/plain;charset=utf-8"}),A=URL.createObjectURL(F),W=document.createElement("a");W.href=A,W.download=h||"config.toml",document.body.appendChild(W),W.click(),document.body.removeChild(W),URL.revokeObjectURL(A),w({title:"",description:""})},le=()=>{d(JSON.parse(JSON.stringify(Yt))),x("config.toml"),w({title:"",description:""})};return e.jsx(es,{className:"h-full",children:e.jsxs("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:""}),e.jsx("p",{className:"text-muted-foreground mt-1 sm:mt-2 text-sm sm:text-base",children:" QQ "})]})}),e.jsxs("div",{className:"flex items-start gap-2 p-3 rounded-lg border border-amber-500/50 bg-amber-500/10 text-amber-700 dark:text-amber-400",children:[e.jsx(Aa,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-sm",children:" WebUI "})]}),e.jsxs(Be,{children:[e.jsxs(gs,{children:[e.jsx(js,{children:""}),e.jsx(Zs,{children:""})]}),e.jsxs(bs,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 md:gap-4",children:[e.jsx("div",{className:`border-2 rounded-lg p-3 md:p-4 cursor-pointer transition-all ${n==="preset"?"border-primary bg-primary/5":"border-muted hover:border-primary/50 active:border-primary/70"}`,onClick:()=>y("preset"),children:e.jsxs("div",{className:"flex items-start gap-2 md:gap-3",children:[e.jsx(rn,{className:"h-4 w-4 md:h-5 md:w-5 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"font-semibold text-sm md:text-base",children:""}),e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground mt-1 line-clamp-2",children:""})]})]})}),e.jsx("div",{className:`border-2 rounded-lg p-3 md:p-4 cursor-pointer transition-all ${n==="upload"?"border-primary bg-primary/5":"border-muted hover:border-primary/50 active:border-primary/70"}`,onClick:()=>y("upload"),children:e.jsxs("div",{className:"flex items-start gap-2 md:gap-3",children:[e.jsx(hr,{className:"h-4 w-4 md:h-5 md:w-5 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"font-semibold text-sm md:text-base",children:""}),e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground mt-1 line-clamp-2",children:""})]})]})}),e.jsx("div",{className:`border-2 rounded-lg p-3 md:p-4 cursor-pointer transition-all ${n==="path"?"border-primary bg-primary/5":"border-muted hover:border-primary/50 active:border-primary/70"}`,onClick:()=>y("path"),children:e.jsxs("div",{className:"flex items-start gap-2 md:gap-3",children:[e.jsx(LN,{className:"h-4 w-4 md:h-5 md:w-5 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"font-semibold text-sm md:text-base",children:""}),e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground mt-1 line-clamp-2",children:""})]})]})})]}),n==="preset"&&e.jsxs("div",{className:"space-y-3 pt-2 border-t",children:[e.jsx(b,{className:"text-sm md:text-base",children:""}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:Object.entries(Du).map(([O,F])=>{const A=F.icon,W=g===O;return e.jsx("div",{className:`border-2 rounded-lg p-3 cursor-pointer transition-all ${W?"border-primary bg-primary/5":"border-muted hover:border-primary/50"}`,onClick:()=>{_(O),be(O)},children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(A,{className:"h-5 w-5 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h4",{className:"font-semibold text-sm",children:F.name}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:F.description}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1 font-mono break-all",children:F.path})]})]})},O)})})]}),n==="path"&&e.jsxs("div",{className:"space-y-3 pt-2 border-t",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"config-path",className:"text-sm md:text-base",children:""}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsx(ce,{id:"config-path",value:f,onChange:O=>xe(O.target.value),placeholder:": C:\\Adapter\\config.toml",className:`text-sm ${v?"border-destructive":""}`}),v&&e.jsx("p",{className:"text-xs text-destructive",children:v})]}),e.jsx(N,{onClick:()=>ye(f),disabled:L||!f||!!v,className:"w-full sm:w-auto",children:L?e.jsxs(e.Fragment,{children:[e.jsx(ft,{className:"h-4 w-4 animate-spin mr-2"}),e.jsx("span",{className:"sm:hidden",children:"..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"sm:hidden",children:""}),e.jsx("span",{className:"hidden sm:inline",children:""})]})})]})]}),e.jsxs("details",{className:"rounded-lg bg-muted/50 p-3 group",children:[e.jsxs("summary",{className:"text-xs font-medium cursor-pointer select-none list-none flex items-center justify-between",children:[e.jsx("span",{children:""}),e.jsx("svg",{className:"h-4 w-4 transition-transform group-open:rotate-180",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),e.jsxs("div",{className:"mt-2 space-y-2 text-xs text-muted-foreground",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"font-mono bg-background px-1.5 py-0.5 rounded text-[10px] md:text-xs whitespace-nowrap",children:"Windows"})}),e.jsxs("div",{className:"pl-2 space-y-0.5 text-[10px] md:text-xs break-all",children:[e.jsx("div",{children:"C:\\Adapter\\config.toml"}),e.jsx("div",{className:"hidden sm:block",children:"D:\\MaiBot\\adapter\\config.toml"}),e.jsx("div",{className:"hidden sm:block",children:"\\\\server\\share\\config.toml"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"font-mono bg-background px-1.5 py-0.5 rounded text-[10px] md:text-xs whitespace-nowrap",children:"Linux"})}),e.jsxs("div",{className:"pl-2 space-y-0.5 text-[10px] md:text-xs break-all",children:[e.jsx("div",{children:"/opt/adapter/config.toml"}),e.jsx("div",{className:"hidden sm:block",children:"/home/user/adapter/config.toml"}),e.jsx("div",{className:"hidden sm:block",children:"~/adapter/config.toml"})]})]}),e.jsx("p",{className:"pt-1 border-t text-[10px] md:text-xs",children:"  1 "})]})]})]})]})]}),e.jsxs(ua,{children:[e.jsx(Xt,{className:"h-4 w-4"}),e.jsx(ma,{children:n==="preset"?e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:""})," 1 ",z&&" (...)"]}):n==="upload"?e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:""}),"      "]}):e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:""})," 1 ",z&&" (...)"]})})]}),n==="upload"&&!c&&e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full",children:[e.jsx("input",{ref:X,type:"file",accept:".toml",className:"hidden",onChange:oe}),e.jsxs(N,{onClick:()=>X.current?.click(),size:"sm",variant:"outline",className:"w-full sm:w-auto",children:[e.jsx(hr,{className:"mr-2 h-4 w-4"}),""]}),e.jsxs(N,{onClick:le,size:"sm",className:"w-full sm:w-auto",children:[e.jsx(Ma,{className:"mr-2 h-4 w-4"}),""]})]}),n==="upload"&&c&&e.jsx("div",{className:"flex gap-2",children:e.jsxs(N,{onClick:ge,size:"sm",className:"w-full sm:w-auto",children:[e.jsx(nl,{className:"mr-2 h-4 w-4"}),""]})}),(n==="preset"||n==="path")&&c&&e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs(N,{onClick:pe,size:"sm",disabled:z||!!v,className:"w-full sm:w-auto",children:[e.jsx(br,{className:"mr-2 h-4 w-4"}),z?"...":""]}),e.jsxs(N,{onClick:Ne,size:"sm",variant:"outline",disabled:L,className:"w-full sm:w-auto",children:[e.jsx(ft,{className:`mr-2 h-4 w-4 ${L?"animate-spin":""}`}),""]}),n==="path"&&e.jsxs(N,{onClick:ne,size:"sm",variant:"destructive",className:"w-full sm:w-auto",children:[e.jsx(ns,{className:"mr-2 h-4 w-4"}),""]})]}),c?e.jsxs(Kt,{defaultValue:"napcat",className:"w-full",children:[e.jsx("div",{className:"overflow-x-auto -mx-4 px-4 sm:mx-0 sm:px-0",children:e.jsxs(Rt,{className:"inline-flex w-auto min-w-full sm:grid sm:w-full sm:grid-cols-5",children:[e.jsxs(He,{value:"napcat",className:"flex-shrink-0 text-xs sm:text-sm whitespace-nowrap",children:[e.jsx("span",{className:"hidden sm:inline",children:"Napcat "}),e.jsx("span",{className:"sm:hidden",children:"Napcat"})]}),e.jsxs(He,{value:"maibot",className:"flex-shrink-0 text-xs sm:text-sm whitespace-nowrap",children:[e.jsx("span",{className:"hidden sm:inline",children:""}),e.jsx("span",{className:"sm:hidden",children:""})]}),e.jsxs(He,{value:"chat",className:"flex-shrink-0 text-xs sm:text-sm whitespace-nowrap",children:[e.jsx("span",{className:"hidden sm:inline",children:""}),e.jsx("span",{className:"sm:hidden",children:""})]}),e.jsxs(He,{value:"voice",className:"flex-shrink-0 text-xs sm:text-sm whitespace-nowrap",children:[e.jsx("span",{className:"hidden sm:inline",children:""}),e.jsx("span",{className:"sm:hidden",children:""})]}),e.jsx(He,{value:"debug",className:"flex-shrink-0 text-xs sm:text-sm whitespace-nowrap",children:""})]})}),e.jsx(We,{value:"napcat",className:"space-y-4",children:e.jsx(Tw,{config:c,onChange:O=>{d(O),ve(O)}})}),e.jsx(We,{value:"maibot",className:"space-y-4",children:e.jsx(Ew,{config:c,onChange:O=>{d(O),ve(O)}})}),e.jsx(We,{value:"chat",className:"space-y-4",children:e.jsx(zw,{config:c,onChange:O=>{d(O),ve(O)}})}),e.jsx(We,{value:"voice",className:"space-y-4",children:e.jsx(Mw,{config:c,onChange:O=>{d(O),ve(O)}})}),e.jsx(We,{value:"debug",className:"space-y-4",children:e.jsx(Aw,{config:c,onChange:O=>{d(O),ve(O)}})})]}):e.jsx("div",{className:"rounded-lg border bg-card p-6 md:p-12",children:e.jsxs("div",{className:"text-center space-y-3 md:space-y-4",children:[e.jsx(Ma,{className:"h-12 w-12 md:h-16 md:w-16 mx-auto text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold",children:""}),e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground mt-2 px-4",children:n==="preset"?"":n==="upload"?"":""})]})]})}),e.jsx(ps,{open:U,onOpenChange:R,children:e.jsxs(cs,{children:[e.jsxs(os,{children:[e.jsx(us,{children:""}),e.jsxs(ms,{children:["",e.jsx("br",{}),e.jsx("span",{className:"text-destructive font-medium",children:""})]})]}),e.jsxs(ds,{children:[e.jsx(xs,{onClick:()=>{R(!1),B(null)},children:""}),e.jsx(hs,{onClick:H,children:""})]})]})}),e.jsx(ps,{open:ee,onOpenChange:V,children:e.jsxs(cs,{children:[e.jsxs(os,{children:[e.jsx(us,{children:""}),e.jsxs(ms,{children:["",e.jsx("br",{}),e.jsx("span",{className:"text-muted-foreground text-sm",children:""})]})]}),e.jsxs(ds,{children:[e.jsx(xs,{onClick:()=>V(!1),children:""}),e.jsx(hs,{onClick:me,className:"bg-destructive hover:bg-destructive/90",children:""})]})]})})]})})}function Tw({config:n,onChange:r}){return e.jsx("div",{className:"rounded-lg border bg-card p-4 md:p-6 space-y-4 md:space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold mb-3 md:mb-4",children:"Napcat WebSocket "}),e.jsxs("div",{className:"grid gap-3 md:gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"napcat-host",className:"text-sm md:text-base",children:""}),e.jsx(ce,{id:"napcat-host",value:n.napcat_server.host,onChange:c=>r({...n,napcat_server:{...n.napcat_server,host:c.target.value}}),placeholder:"localhost",className:"text-sm md:text-base"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Napcat "})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"napcat-port",className:"text-sm md:text-base",children:""}),e.jsx(ce,{id:"napcat-port",type:"number",value:n.napcat_server.port||"",onChange:c=>r({...n,napcat_server:{...n.napcat_server,port:c.target.value?parseInt(c.target.value):0}}),placeholder:"8095",className:"text-sm md:text-base"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Napcat  8095"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"napcat-token",className:"text-sm md:text-base",children:"Token"}),e.jsx(ce,{id:"napcat-token",type:"password",value:n.napcat_server.token,onChange:c=>r({...n,napcat_server:{...n.napcat_server,token:c.target.value}}),placeholder:"",className:"text-sm md:text-base"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Napcat "})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"napcat-heartbeat",className:"text-sm md:text-base",children:""}),e.jsx(ce,{id:"napcat-heartbeat",type:"number",value:n.napcat_server.heartbeat_interval||"",onChange:c=>r({...n,napcat_server:{...n.napcat_server,heartbeat_interval:c.target.value?parseInt(c.target.value):0}}),placeholder:"30",className:"text-sm md:text-base"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" Napcat  30"})]})]})]})})}function Ew({config:n,onChange:r}){return e.jsx("div",{className:"rounded-lg border bg-card p-4 md:p-6 space-y-4 md:space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold mb-3 md:mb-4",children:" WebSocket "}),e.jsxs("div",{className:"grid gap-3 md:gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"maibot-host",className:"text-sm md:text-base",children:""}),e.jsx(ce,{id:"maibot-host",value:n.maibot_server.host,onChange:c=>r({...n,maibot_server:{...n.maibot_server,host:c.target.value}}),placeholder:"localhost",className:"text-sm md:text-base"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" .env  HOST "})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"maibot-port",className:"text-sm md:text-base",children:""}),e.jsx(ce,{id:"maibot-port",type:"number",value:n.maibot_server.port||"",onChange:c=>r({...n,maibot_server:{...n.maibot_server,port:c.target.value?parseInt(c.target.value):0}}),placeholder:"8000",className:"text-sm md:text-base"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" .env  PORT  8000"})]})]})]})})}function zw({config:n,onChange:r}){const c=x=>{const f={...n};x==="group"?f.chat.group_list=[...f.chat.group_list,0]:x==="private"?f.chat.private_list=[...f.chat.private_list,0]:f.chat.ban_user_id=[...f.chat.ban_user_id,0],r(f)},d=(x,f)=>{const j={...n};x==="group"?j.chat.group_list=j.chat.group_list.filter((g,_)=>_!==f):x==="private"?j.chat.private_list=j.chat.private_list.filter((g,_)=>_!==f):j.chat.ban_user_id=j.chat.ban_user_id.filter((g,_)=>_!==f),r(j)},h=(x,f,j)=>{const g={...n};x==="group"?g.chat.group_list[f]=j:x==="private"?g.chat.private_list[f]=j:g.chat.ban_user_id[f]=j,r(g)};return e.jsx("div",{className:"rounded-lg border bg-card p-4 md:p-6 space-y-4 md:space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold mb-3 md:mb-4",children:""}),e.jsxs("div",{className:"grid gap-4 md:gap-6",children:[e.jsxs("div",{className:"space-y-3 md:space-y-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{className:"text-sm md:text-base",children:""}),e.jsxs(Qe,{value:n.chat.group_list_type,onValueChange:x=>r({...n,chat:{...n.chat,group_list_type:x}}),children:[e.jsx(Ge,{children:e.jsx($e,{})}),e.jsxs(Ve,{children:[e.jsx(ue,{value:"whitelist",children:""}),e.jsx(ue,{value:"blacklist",children:""})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-0",children:[e.jsx(b,{className:"text-sm md:text-base",children:""}),e.jsxs(N,{onClick:()=>c("group"),size:"sm",variant:"outline",className:"w-full sm:w-auto",children:[e.jsx(Ma,{className:"mr-1 h-4 w-4"}),""]})]}),n.chat.group_list.map((x,f)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ce,{type:"number",value:x,onChange:j=>h("group",f,parseInt(j.target.value)||0),placeholder:"",className:"text-sm md:text-base"}),e.jsxs(ps,{children:[e.jsx(Qs,{asChild:!0,children:e.jsx(N,{size:"icon",variant:"outline",children:e.jsx(ns,{className:"h-4 w-4"})})}),e.jsxs(cs,{children:[e.jsxs(os,{children:[e.jsx(us,{children:""}),e.jsxs(ms,{children:[" ",x," "]})]}),e.jsxs(ds,{children:[e.jsx(xs,{children:""}),e.jsx(hs,{onClick:()=>d("group",f),children:""})]})]})]})]},f)),n.chat.group_list.length===0&&e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]})]}),e.jsxs("div",{className:"space-y-3 md:space-y-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{className:"text-sm md:text-base",children:""}),e.jsxs(Qe,{value:n.chat.private_list_type,onValueChange:x=>r({...n,chat:{...n.chat,private_list_type:x}}),children:[e.jsx(Ge,{children:e.jsx($e,{})}),e.jsxs(Ve,{children:[e.jsx(ue,{value:"whitelist",children:""}),e.jsx(ue,{value:"blacklist",children:""})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-0",children:[e.jsx(b,{className:"text-sm md:text-base",children:""}),e.jsxs(N,{onClick:()=>c("private"),size:"sm",variant:"outline",className:"w-full sm:w-auto",children:[e.jsx(Ma,{className:"mr-1 h-4 w-4"}),""]})]}),n.chat.private_list.map((x,f)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ce,{type:"number",value:x,onChange:j=>h("private",f,parseInt(j.target.value)||0),placeholder:"QQ",className:"text-sm md:text-base"}),e.jsxs(ps,{children:[e.jsx(Qs,{asChild:!0,children:e.jsx(N,{size:"icon",variant:"outline",children:e.jsx(ns,{className:"h-4 w-4"})})}),e.jsxs(cs,{children:[e.jsxs(os,{children:[e.jsx(us,{children:""}),e.jsxs(ms,{children:[" ",x," "]})]}),e.jsxs(ds,{children:[e.jsx(xs,{children:""}),e.jsx(hs,{onClick:()=>d("private",f),children:""})]})]})]})]},f)),n.chat.private_list.length===0&&e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-0",children:[e.jsxs("div",{children:[e.jsx(b,{className:"text-sm md:text-base",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:""})]}),e.jsxs(N,{onClick:()=>c("ban"),size:"sm",variant:"outline",className:"w-full sm:w-auto",children:[e.jsx(Ma,{className:"mr-1 h-4 w-4"}),""]})]}),n.chat.ban_user_id.map((x,f)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ce,{type:"number",value:x,onChange:j=>h("ban",f,parseInt(j.target.value)||0),placeholder:"QQ",className:"text-sm md:text-base"}),e.jsxs(ps,{children:[e.jsx(Qs,{asChild:!0,children:e.jsx(N,{size:"icon",variant:"outline",children:e.jsx(ns,{className:"h-4 w-4"})})}),e.jsxs(cs,{children:[e.jsxs(os,{children:[e.jsx(us,{children:""}),e.jsxs(ms,{children:[" ",x," "]})]}),e.jsxs(ds,{children:[e.jsx(xs,{children:""}),e.jsx(hs,{onClick:()=>d("ban",f),children:""})]})]})]})]},f)),n.chat.ban_user_id.length===0&&e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(b,{className:"text-sm md:text-base",children:"QQ"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"QQ"})]}),e.jsx(qe,{checked:n.chat.ban_qq_bot,onCheckedChange:x=>r({...n,chat:{...n.chat,ban_qq_bot:x}})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(b,{className:"text-sm md:text-base",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:""})]}),e.jsx(qe,{checked:n.chat.enable_poke,onCheckedChange:x=>r({...n,chat:{...n.chat,enable_poke:x}})})]})]})]})})}function Mw({config:n,onChange:r}){return e.jsx("div",{className:"rounded-lg border bg-card p-4 md:p-6 space-y-4 md:space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold mb-3 md:mb-4",children:""}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(b,{className:"text-sm md:text-base",children:" TTS "}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:" TTS "})]}),e.jsx(qe,{checked:n.voice.use_tts,onCheckedChange:c=>r({...n,voice:{use_tts:c}})})]})]})})}function Aw({config:n,onChange:r}){return e.jsx("div",{className:"rounded-lg border bg-card p-4 md:p-6 space-y-4 md:space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold mb-3 md:mb-4",children:""}),e.jsx("div",{className:"grid gap-3 md:gap-4",children:e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{className:"text-sm md:text-base",children:""}),e.jsxs(Qe,{value:n.debug.level,onValueChange:c=>r({...n,debug:{level:c}}),children:[e.jsx(Ge,{children:e.jsx($e,{})}),e.jsxs(Ve,{children:[e.jsx(ue,{value:"DEBUG",children:"DEBUG"}),e.jsx(ue,{value:"INFO",children:"INFO"}),e.jsx(ue,{value:"WARNING",children:"WARNING"}),e.jsx(ue,{value:"ERROR",children:"ERROR"}),e.jsx(ue,{value:"CRITICAL",children:"CRITICAL"})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})})]})})}const Dw=["defaultChecked","defaultValue","suppressContentEditableWarning","suppressHydrationWarning","dangerouslySetInnerHTML","accessKey","className","contentEditable","contextMenu","dir","draggable","hidden","id","lang","placeholder","slot","spellCheck","style","tabIndex","title","translate","radioGroup","role","about","datatype","inlist","prefix","property","resource","typeof","vocab","autoCapitalize","autoCorrect","autoSave","color","itemProp","itemScope","itemType","itemID","itemRef","results","security","unselectable","inputMode","is","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Ow=/^(aria-|data-)/,Gg=n=>Object.fromEntries(Object.entries(n).filter(([r])=>Ow.test(r)||Dw.includes(r)));function Rw(n,r){const c=Gg(n);return Object.keys(n).some(d=>!Object.hasOwn(c,d)&&n[d]!==r[d])}class Lw extends u.Component{container;plugin;componentDidMount(){this.installPlugin()}componentDidUpdate(r){if(r.uppy!==this.props.uppy)this.uninstallPlugin(r),this.installPlugin();else if(Rw(this.props,r)){const{uppy:c,...d}={...this.props,target:this.container};this.plugin.setOptions(d)}}componentWillUnmount(){this.uninstallPlugin()}installPlugin(){const{uppy:r,...c}={id:"Dashboard",...this.props,inline:!0,target:this.container};r.use(vb,c),this.plugin=r.getPlugin(c.id)}uninstallPlugin(r=this.props){const{uppy:c}=r;c.removePlugin(this.plugin)}render(){return u.createElement("div",{className:"uppy-Container",ref:r=>{this.container=r},...Gg(this.props)})}}function Uw({content:n,className:r=""}){return e.jsx("div",{className:`prose prose-sm dark:prose-invert max-w-none ${r}`,children:e.jsx(Nb,{remarkPlugins:[wb,_b],rehypePlugins:[bb],components:{code({inline:c,className:d,children:h,...x}){return c?e.jsx("code",{className:"bg-muted px-1.5 py-0.5 rounded text-sm font-mono",...x,children:h}):e.jsx("code",{className:`${d} block bg-muted p-4 rounded-lg overflow-x-auto`,...x,children:h})},table({children:c,...d}){return e.jsx("div",{className:"overflow-x-auto",children:e.jsx("table",{className:"border-collapse border border-border",...d,children:c})})},th({children:c,...d}){return e.jsx("th",{className:"border border-border bg-muted px-4 py-2 text-left font-semibold",...d,children:c})},td({children:c,...d}){return e.jsx("td",{className:"border border-border px-4 py-2",...d,children:c})},a({children:c,...d}){return e.jsx("a",{className:"text-primary hover:underline",target:"_blank",rel:"noopener noreferrer",...d,children:c})},blockquote({children:c,...d}){return e.jsx("blockquote",{className:"border-l-4 border-primary pl-4 italic text-muted-foreground",...d,children:c})},h1({children:c,...d}){return e.jsx("h1",{className:"text-3xl font-bold mt-6 mb-4",...d,children:c})},h2({children:c,...d}){return e.jsx("h2",{className:"text-2xl font-bold mt-5 mb-3",...d,children:c})},h3({children:c,...d}){return e.jsx("h3",{className:"text-xl font-bold mt-4 mb-2",...d,children:c})},h4({children:c,...d}){return e.jsx("h4",{className:"text-lg font-semibold mt-3 mb-2",...d,children:c})},ul({children:c,...d}){return e.jsx("ul",{className:"list-disc list-inside space-y-1 my-2",...d,children:c})},ol({children:c,...d}){return e.jsx("ol",{className:"list-decimal list-inside space-y-1 my-2",...d,children:c})},p({children:c,...d}){return e.jsx("p",{className:"my-2 leading-relaxed",...d,children:c})},hr({...c}){return e.jsx("hr",{className:"my-4 border-border",...c})}},children:n})})}function Bw({children:n,className:r}){return e.jsx(Uw,{content:n,className:r})}const Ra="/api/webui/emoji";async function Hw(n){const r=new URLSearchParams;n.page&&r.append("page",n.page.toString()),n.page_size&&r.append("page_size",n.page_size.toString()),n.search&&r.append("search",n.search),n.is_registered!==void 0&&r.append("is_registered",n.is_registered.toString()),n.is_banned!==void 0&&r.append("is_banned",n.is_banned.toString()),n.format&&r.append("format",n.format),n.sort_by&&r.append("sort_by",n.sort_by),n.sort_order&&r.append("sort_order",n.sort_order);const c=await ke(`${Ra}/list?${r}`,{headers:ze()});if(!c.ok)throw new Error(`: ${c.statusText}`);return c.json()}async function qw(n){const r=await ke(`${Ra}/${n}`,{headers:ze()});if(!r.ok)throw new Error(`: ${r.statusText}`);return r.json()}async function Gw(n,r){const c=await ke(`${Ra}/${n}`,{method:"PATCH",headers:ze(),body:JSON.stringify(r)});if(!c.ok)throw new Error(`: ${c.statusText}`);return c.json()}async function Vw(n){const r=await ke(`${Ra}/${n}`,{method:"DELETE",headers:ze()});if(!r.ok)throw new Error(`: ${r.statusText}`);return r.json()}async function Fw(){const n=await ke(`${Ra}/stats/summary`,{headers:ze()});if(!n.ok)throw new Error(`: ${n.statusText}`);return n.json()}async function Qw(n){const r=await ke(`${Ra}/${n}/register`,{method:"POST",headers:ze()});if(!r.ok)throw new Error(`: ${r.statusText}`);return r.json()}async function $w(n){const r=await ke(`${Ra}/${n}/ban`,{method:"POST",headers:ze()});if(!r.ok)throw new Error(`: ${r.statusText}`);return r.json()}function Vg(n){const r=localStorage.getItem("access-token");return`${Ra}/${n}/thumbnail?token=${encodeURIComponent(r||"")}`}async function Yw(n){const r=await ke(`${Ra}/batch/delete`,{method:"POST",headers:ze(),body:JSON.stringify({emoji_ids:n})});if(!r.ok){const c=await r.json();throw new Error(c.detail||"")}return r.json()}function Xw(){return`${Ra}/upload`}function Kw(){const[n,r]=u.useState([]),[c,d]=u.useState(null),[h,x]=u.useState(!1),[f,j]=u.useState(1),[g,_]=u.useState(0),[v,k]=u.useState(20),[z,T]=u.useState("all"),[L,K]=u.useState("all"),[U,R]=u.useState("all"),[ee,V]=u.useState("usage_count"),[E,B]=u.useState("desc"),[X,w]=u.useState(null),[D,te]=u.useState(!1),[xe,be]=u.useState(!1),[ye,ve]=u.useState(!1),[pe,Ne]=u.useState(new Set),[y,q]=u.useState(!1),[H,ne]=u.useState(""),[S,me]=u.useState("medium"),[he,Q]=u.useState(!1),{toast:oe}=Bs(),ge=u.useCallback(async()=>{try{x(!0);const ie=await Hw({page:f,page_size:v,is_registered:z==="all"?void 0:z==="registered",is_banned:L==="all"?void 0:L==="banned",format:U==="all"?void 0:U,sort_by:ee,sort_order:E});r(ie.data),_(ie.total)}catch(ie){const we=ie instanceof Error?ie.message:"";oe({title:"",description:we,variant:"destructive"})}finally{x(!1)}},[f,v,z,L,U,ee,E,oe]),le=async()=>{try{const ie=await Fw();d(ie.data)}catch(ie){console.error(":",ie)}};u.useEffect(()=>{ge()},[ge]),u.useEffect(()=>{le()},[]);const O=async ie=>{try{const we=await qw(ie.id);w(we.data),te(!0)}catch(we){const Ke=we instanceof Error?we.message:"";oe({title:"",description:Ke,variant:"destructive"})}},F=ie=>{w(ie),be(!0)},A=ie=>{w(ie),ve(!0)},W=async()=>{if(X)try{await Vw(X.id),oe({title:"",description:""}),ve(!1),w(null),ge(),le()}catch(ie){const we=ie instanceof Error?ie.message:"";oe({title:"",description:we,variant:"destructive"})}},_e=async ie=>{try{await Qw(ie.id),oe({title:"",description:""}),ge(),le()}catch(we){const Ke=we instanceof Error?we.message:"";oe({title:"",description:Ke,variant:"destructive"})}},Me=async ie=>{try{await $w(ie.id),oe({title:"",description:""}),ge(),le()}catch(we){const Ke=we instanceof Error?we.message:"";oe({title:"",description:Ke,variant:"destructive"})}},ss=ie=>{const we=new Set(pe);we.has(ie)?we.delete(ie):we.add(ie),Ne(we)},Ie=async()=>{try{const ie=await Yw(Array.from(pe));oe({title:"",description:ie.message}),Ne(new Set),q(!1),ge(),le()}catch(ie){oe({title:"",description:ie instanceof Error?ie.message:"",variant:"destructive"})}},Rs=()=>{const ie=parseInt(H),we=Math.ceil(g/v);ie>=1&&ie<=we?(j(ie),ne("")):oe({title:"",description:`1-${we}`,variant:"destructive"})},qs=c?.formats?Object.keys(c.formats):[];return e.jsxs("div",{className:"h-[calc(100vh-4rem)] flex flex-col p-4 sm:p-6",children:[e.jsxs("div",{className:"mb-4 sm:mb-6 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:""})]}),e.jsxs(N,{onClick:()=>Q(!0),className:"gap-2",children:[e.jsx(hr,{className:"h-4 w-4"}),""]})]}),e.jsx(es,{className:"flex-1",children:e.jsxs("div",{className:"space-y-4 sm:space-y-6 pr-4",children:[c&&e.jsxs("div",{className:"grid gap-4 grid-cols-2 lg:grid-cols-4",children:[e.jsx(Be,{children:e.jsxs(gs,{className:"pb-2",children:[e.jsx(Zs,{children:""}),e.jsx(js,{className:"text-2xl",children:c.total})]})}),e.jsx(Be,{children:e.jsxs(gs,{className:"pb-2",children:[e.jsx(Zs,{children:""}),e.jsx(js,{className:"text-2xl text-green-600",children:c.registered})]})}),e.jsx(Be,{children:e.jsxs(gs,{className:"pb-2",children:[e.jsx(Zs,{children:""}),e.jsx(js,{className:"text-2xl text-red-600",children:c.banned})]})}),e.jsx(Be,{children:e.jsxs(gs,{className:"pb-2",children:[e.jsx(Zs,{children:""}),e.jsx(js,{className:"text-2xl text-gray-600",children:c.unregistered})]})})]}),e.jsxs(Be,{children:[e.jsx(gs,{children:e.jsxs(js,{className:"flex items-center gap-2",children:[e.jsx(Lu,{className:"h-5 w-5"}),""]})}),e.jsxs(bs,{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{children:""}),e.jsxs(Qe,{value:`${ee}-${E}`,onValueChange:ie=>{const[we,Ke]=ie.split("-");V(we),B(Ke),j(1)},children:[e.jsx(Ge,{children:e.jsx($e,{})}),e.jsxs(Ve,{children:[e.jsx(ue,{value:"usage_count-desc",children:" ()"}),e.jsx(ue,{value:"usage_count-asc",children:" ()"}),e.jsx(ue,{value:"register_time-desc",children:" ()"}),e.jsx(ue,{value:"register_time-asc",children:" ()"}),e.jsx(ue,{value:"record_time-desc",children:" ()"}),e.jsx(ue,{value:"record_time-asc",children:" ()"}),e.jsx(ue,{value:"last_used_time-desc",children:" ()"}),e.jsx(ue,{value:"last_used_time-asc",children:" ()"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{children:""}),e.jsxs(Qe,{value:z,onValueChange:ie=>{T(ie),j(1)},children:[e.jsx(Ge,{children:e.jsx($e,{})}),e.jsxs(Ve,{children:[e.jsx(ue,{value:"all",children:""}),e.jsx(ue,{value:"registered",children:""}),e.jsx(ue,{value:"unregistered",children:""})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{children:""}),e.jsxs(Qe,{value:L,onValueChange:ie=>{K(ie),j(1)},children:[e.jsx(Ge,{children:e.jsx($e,{})}),e.jsxs(Ve,{children:[e.jsx(ue,{value:"all",children:""}),e.jsx(ue,{value:"banned",children:""}),e.jsx(ue,{value:"unbanned",children:""})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{children:""}),e.jsxs(Qe,{value:U,onValueChange:ie=>{R(ie),j(1)},children:[e.jsx(Ge,{children:e.jsx($e,{})}),e.jsxs(Ve,{children:[e.jsx(ue,{value:"all",children:""}),qs.map(ie=>e.jsxs(ue,{value:ie,children:[ie.toUpperCase()," (",c?.formats[ie],")"]},ie))]})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 pt-4 border-t",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[pe.size>0&&e.jsxs("span",{className:"text-sm text-muted-foreground",children:[" ",pe.size," "]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{className:"text-sm whitespace-nowrap",children:""}),e.jsxs(Qe,{value:S,onValueChange:ie=>me(ie),children:[e.jsx(Ge,{className:"w-24",children:e.jsx($e,{})}),e.jsxs(Ve,{children:[e.jsx(ue,{value:"small",children:""}),e.jsx(ue,{value:"medium",children:""}),e.jsx(ue,{value:"large",children:""})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{htmlFor:"emoji-page-size",className:"text-sm whitespace-nowrap",children:""}),e.jsxs(Qe,{value:v.toString(),onValueChange:ie=>{k(parseInt(ie)),j(1),Ne(new Set)},children:[e.jsx(Ge,{id:"emoji-page-size",className:"w-20",children:e.jsx($e,{})}),e.jsxs(Ve,{children:[e.jsx(ue,{value:"20",children:"20"}),e.jsx(ue,{value:"40",children:"40"}),e.jsx(ue,{value:"60",children:"60"}),e.jsx(ue,{value:"100",children:"100"})]})]}),pe.size>0&&e.jsxs(e.Fragment,{children:[e.jsx(N,{variant:"outline",size:"sm",onClick:()=>Ne(new Set),children:""}),e.jsxs(N,{variant:"destructive",size:"sm",onClick:()=>q(!0),children:[e.jsx(ns,{className:"h-4 w-4 mr-1"}),""]})]})]})]}),e.jsx("div",{className:"flex justify-end pt-4 border-t",children:e.jsxs(N,{variant:"outline",size:"sm",onClick:ge,disabled:h,children:[e.jsx(ft,{className:`h-4 w-4 mr-2 ${h?"animate-spin":""}`}),""]})})]})]}),e.jsxs(Be,{children:[e.jsxs(gs,{children:[e.jsx(js,{children:""}),e.jsxs(Zs,{children:[" ",g,"  ",f," "]})]}),e.jsxs(bs,{children:[n.length===0?e.jsx("div",{className:"text-center py-12 text-muted-foreground",children:""}):e.jsx("div",{className:`grid gap-3 ${S==="small"?"grid-cols-3 sm:grid-cols-4 md:grid-cols-6 lg:grid-cols-8 xl:grid-cols-10":S==="medium"?"grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 xl:grid-cols-8":"grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5"}`,children:n.map(ie=>e.jsxs("div",{className:`group relative rounded-lg border bg-card overflow-hidden hover:ring-2 hover:ring-primary transition-all cursor-pointer ${pe.has(ie.id)?"ring-2 ring-primary bg-primary/5":""}`,onClick:()=>ss(ie.id),children:[e.jsx("div",{className:`absolute top-1 left-1 z-10 transition-opacity ${pe.has(ie.id)?"opacity-100":"opacity-0 group-hover:opacity-100"}`,children:e.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${pe.has(ie.id)?"bg-primary border-primary text-primary-foreground":"bg-background/80 border-muted-foreground/50"}`,children:pe.has(ie.id)&&e.jsx(xa,{className:"h-3 w-3"})})}),e.jsxs("div",{className:"absolute top-1 right-1 z-10 flex flex-col gap-0.5",children:[ie.is_registered&&e.jsx(Xe,{variant:"default",className:"bg-green-600 text-[10px] px-1 py-0",children:""}),ie.is_banned&&e.jsx(Xe,{variant:"destructive",className:"text-[10px] px-1 py-0",children:""})]}),e.jsx("div",{className:`aspect-square bg-muted flex items-center justify-center overflow-hidden ${S==="small"?"p-1":S==="medium"?"p-2":"p-3"}`,children:e.jsx("img",{src:Vg(ie.id),alt:"",className:"w-full h-full object-contain",loading:"lazy",onError:we=>{const Ke=we.target;Ke.style.display="none";const Le=Ke.parentElement;Le&&(Le.innerHTML='<svg class="h-8 w-8 text-muted-foreground" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg>')}})}),e.jsxs("div",{className:`border-t bg-card ${S==="small"?"p-1":"p-2"}`,children:[e.jsxs("div",{className:"flex items-center justify-between gap-1 text-xs text-muted-foreground mb-1",children:[e.jsx(Xe,{variant:"outline",className:"text-[10px] px-1 py-0",children:ie.format.toUpperCase()}),e.jsxs("span",{className:"font-mono",children:[ie.usage_count,""]})]}),e.jsxs("div",{className:`flex gap-1 justify-center opacity-0 group-hover:opacity-100 transition-opacity ${S==="small"?"flex-wrap":""}`,children:[e.jsx(N,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:we=>{we.stopPropagation(),F(ie)},title:"",children:e.jsx(pr,{className:"h-3 w-3"})}),e.jsx(N,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:we=>{we.stopPropagation(),O(ie)},title:"",children:e.jsx(Xt,{className:"h-3 w-3"})}),!ie.is_registered&&e.jsx(N,{variant:"ghost",size:"icon",className:"h-6 w-6 text-green-600 hover:text-green-700",onClick:we=>{we.stopPropagation(),_e(ie)},title:"",children:e.jsx(xa,{className:"h-3 w-3"})}),!ie.is_banned&&e.jsx(N,{variant:"ghost",size:"icon",className:"h-6 w-6 text-orange-600 hover:text-orange-700",onClick:we=>{we.stopPropagation(),Me(ie)},title:"",children:e.jsx(UN,{className:"h-3 w-3"})}),e.jsx(N,{variant:"ghost",size:"icon",className:"h-6 w-6 text-red-600 hover:text-red-700",onClick:we=>{we.stopPropagation(),A(ie)},title:"",children:e.jsx(ns,{className:"h-3 w-3"})})]})]})]},ie.id))}),g>0&&e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 mt-4",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:[" ",(f-1)*v+1," "," ",Math.min(f*v,g),"  ",g," "]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{variant:"outline",size:"sm",onClick:()=>j(1),disabled:f===1,className:"hidden sm:flex",children:e.jsx(wr,{className:"h-4 w-4"})}),e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>j(ie=>Math.max(1,ie-1)),disabled:f===1,children:[e.jsx(cn,{className:"h-4 w-4 sm:mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ce,{type:"number",value:H,onChange:ie=>ne(ie.target.value),onKeyDown:ie=>ie.key==="Enter"&&Rs(),placeholder:f.toString(),className:"w-16 h-8 text-center",min:1,max:Math.ceil(g/v)}),e.jsx(N,{variant:"outline",size:"sm",onClick:Rs,disabled:!H,className:"h-8",children:""})]}),e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>j(ie=>ie+1),disabled:f>=Math.ceil(g/v),children:[e.jsx("span",{className:"hidden sm:inline",children:""}),e.jsx(il,{className:"h-4 w-4 sm:ml-1"})]}),e.jsx(N,{variant:"outline",size:"sm",onClick:()=>j(Math.ceil(g/v)),disabled:f>=Math.ceil(g/v),className:"hidden sm:flex",children:e.jsx(_r,{className:"h-4 w-4"})})]})]})]})]}),e.jsx(Zw,{emoji:X,open:D,onOpenChange:te}),e.jsx(Iw,{emoji:X,open:xe,onOpenChange:be,onSuccess:()=>{ge(),le()}}),e.jsx(Jw,{open:he,onOpenChange:Q,onSuccess:()=>{ge(),le()}})]})}),e.jsx(ps,{open:y,onOpenChange:q,children:e.jsxs(cs,{children:[e.jsxs(os,{children:[e.jsx(us,{children:""}),e.jsxs(ms,{children:[" ",pe.size," "]})]}),e.jsxs(ds,{children:[e.jsx(xs,{children:""}),e.jsx(hs,{onClick:Ie,children:""})]})]})}),e.jsx(Os,{open:ye,onOpenChange:ve,children:e.jsxs(Es,{children:[e.jsxs(zs,{children:[e.jsx(Ms,{children:""}),e.jsx($s,{children:""})]}),e.jsxs(Is,{children:[e.jsx(N,{variant:"outline",onClick:()=>ve(!1),children:""}),e.jsx(N,{variant:"destructive",onClick:W,children:""})]})]})})]})}function Zw({emoji:n,open:r,onOpenChange:c}){if(!n)return null;const d=h=>h?new Date(h*1e3).toLocaleString("zh-CN"):"-";return e.jsx(Os,{open:r,onOpenChange:c,children:e.jsxs(Es,{className:"max-w-2xl max-h-[90vh]",children:[e.jsx(zs,{children:e.jsx(Ms,{children:""})}),e.jsx(es,{className:"max-h-[calc(90vh-8rem)] pr-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"w-32 h-32 bg-muted rounded-lg flex items-center justify-center overflow-hidden",children:e.jsx("img",{src:Vg(n.id),alt:n.description||"",className:"w-full h-full object-cover",onError:h=>{const x=h.target;x.style.display="none";const f=x.parentElement;f&&(f.innerHTML='<svg class="h-16 w-16 text-muted-foreground" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg>')}})})}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(b,{className:"text-muted-foreground",children:"ID"}),e.jsx("div",{className:"mt-1 font-mono",children:n.id})]}),e.jsxs("div",{children:[e.jsx(b,{className:"text-muted-foreground",children:""}),e.jsx("div",{className:"mt-1",children:e.jsx(Xe,{variant:"outline",children:n.format.toUpperCase()})})]})]}),e.jsxs("div",{children:[e.jsx(b,{className:"text-muted-foreground",children:""}),e.jsx("div",{className:"mt-1 font-mono text-sm break-all bg-muted p-2 rounded",children:n.full_path})]}),e.jsxs("div",{children:[e.jsx(b,{className:"text-muted-foreground",children:""}),e.jsx("div",{className:"mt-1 font-mono text-sm break-all bg-muted p-2 rounded",children:n.emoji_hash})]}),e.jsxs("div",{children:[e.jsx(b,{className:"text-muted-foreground",children:""}),n.description?e.jsx("div",{className:"mt-1 rounded-lg border bg-muted/50 p-3",children:e.jsx(Bw,{className:"prose-sm",children:n.description})}):e.jsx("div",{className:"mt-1 text-sm text-muted-foreground",children:"-"})]}),e.jsxs("div",{children:[e.jsx(b,{className:"text-muted-foreground",children:""}),e.jsx("div",{className:"mt-1",children:n.emotion?e.jsx("span",{className:"text-sm",children:n.emotion}):e.jsx("span",{className:"text-sm text-muted-foreground",children:"-"})})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(b,{className:"text-muted-foreground",children:""}),e.jsxs("div",{className:"mt-2 flex gap-2",children:[n.is_registered&&e.jsx(Xe,{variant:"default",className:"bg-green-600",children:""}),n.is_banned&&e.jsx(Xe,{variant:"destructive",children:""}),!n.is_registered&&!n.is_banned&&e.jsx(Xe,{variant:"outline",children:""})]})]}),e.jsxs("div",{children:[e.jsx(b,{className:"text-muted-foreground",children:""}),e.jsx("div",{className:"mt-1 font-mono text-lg",children:n.usage_count})]})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(b,{className:"text-muted-foreground",children:""}),e.jsx("div",{className:"mt-1 text-sm",children:d(n.record_time)})]}),e.jsxs("div",{children:[e.jsx(b,{className:"text-muted-foreground",children:""}),e.jsx("div",{className:"mt-1 text-sm",children:d(n.register_time)})]})]}),e.jsxs("div",{children:[e.jsx(b,{className:"text-muted-foreground",children:""}),e.jsx("div",{className:"mt-1 text-sm",children:d(n.last_used_time)})]})]})})]})})}function Iw({emoji:n,open:r,onOpenChange:c,onSuccess:d}){const[h,x]=u.useState(""),[f,j]=u.useState(!1),[g,_]=u.useState(!1),[v,k]=u.useState(!1),{toast:z}=Bs();u.useEffect(()=>{n&&(x(n.emotion||""),j(n.is_registered),_(n.is_banned))},[n]);const T=async()=>{if(n)try{k(!0);const L=h.split(/[,,]/).map(K=>K.trim()).filter(Boolean).join(",");await Gw(n.id,{emotion:L||void 0,is_registered:f,is_banned:g}),z({title:"",description:""}),c(!1),d()}catch(L){const K=L instanceof Error?L.message:"";z({title:"",description:K,variant:"destructive"})}finally{k(!1)}};return n?e.jsx(Os,{open:r,onOpenChange:c,children:e.jsxs(Es,{className:"max-w-2xl",children:[e.jsxs(zs,{children:[e.jsx(Ms,{children:""}),e.jsx($s,{children:""})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(b,{children:""}),e.jsx(Us,{value:h,onChange:L=>x(L.target.value),placeholder:"...",rows:2,className:"mt-1"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:""})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(yt,{id:"is_registered",checked:f,onCheckedChange:L=>{L===!0?(j(!0),_(!1)):j(!1)}}),e.jsx(b,{htmlFor:"is_registered",className:"cursor-pointer",children:""})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(yt,{id:"is_banned",checked:g,onCheckedChange:L=>{L===!0?(_(!0),j(!1)):_(!1)}}),e.jsx(b,{htmlFor:"is_banned",className:"cursor-pointer",children:""})]})]})]}),e.jsxs(Is,{children:[e.jsx(N,{variant:"outline",onClick:()=>c(!1),children:""}),e.jsx(N,{onClick:T,disabled:v,children:v?"...":""})]})]})}):null}function Jw({open:n,onOpenChange:r,onSuccess:c}){const[d,h]=u.useState("select"),[x,f]=u.useState([]),[j,g]=u.useState(null),[_,v]=u.useState(!1),{toast:k}=Bs(),z=u.useMemo(()=>new yb({id:"emoji-uploader",autoProceed:!1,restrictions:{maxFileSize:10485760,allowedFileTypes:["image/jpeg","image/png","image/gif","image/webp"],maxNumberOfFiles:20},locale:{pluralize:()=>0,strings:{addMoreFiles:"",addingMoreFiles:"",allowedFileTypes:"%{types}",cancel:"",closeModal:"",complete:"",connectedToInternet:"",copyLink:"",copyLinkToClipboardFallback:"",copyLinkToClipboardSuccess:"",dashboardTitle:"",dashboardWindowTitle:" ESC ",done:"",dropHereOr:" %{browse}",dropHint:"",dropPasteFiles:" %{browseFiles}",dropPasteFolders:" %{browseFolders}",dropPasteBoth:"%{browseFiles}  %{browseFolders}",dropPasteImportFiles:"%{browseFiles} ",dropPasteImportFolders:"%{browseFolders} ",dropPasteImportBoth:"%{browseFiles}%{browseFolders} ",editFile:"",editing:" %{file}",emptyFolderAdded:"",exceedsSize:"%{file}  %{size}",failedToUpload:" %{file} ",fileSource:"%{name}",filesUploadedOfTotal:{0:" %{complete} / %{smart_count} ",1:" %{complete} / %{smart_count} "},filter:"",finishEditingFile:"",folderAdded:{0:" %{folder}  %{smart_count} ",1:" %{folder}  %{smart_count} "},generatingThumbnails:"...",import:"",importFiles:"",importFrom:" %{name} ",loading:"...",logOut:"",myDevice:"",noFilesFound:"",noInternetConnection:"",openFolderNamed:" %{name}",pause:"",pauseUpload:"",paused:"",poweredBy:"%{uppy}",processingXFiles:{0:" %{smart_count} ",1:" %{smart_count} "},recording:"",removeFile:"",resetFilter:"",resume:"",resumeUpload:"",retry:"",retryUpload:"",save:"",saveChanges:"",selectFileNamed:" %{name}",selectX:{0:" %{smart_count}",1:" %{smart_count}"},smile:"",startRecording:"",stopRecording:"",takePicture:"",timedOut:" %{seconds} ",upload:"",uploadComplete:"",uploadFailed:"",uploadPaused:"",uploadXFiles:{0:"%{smart_count} ",1:"%{smart_count} "},uploadXNewFiles:{0:"+%{smart_count} ",1:"+%{smart_count} "},uploading:"",uploadingXFiles:{0:" %{smart_count} ",1:" %{smart_count} "},xFilesSelected:{0:" %{smart_count} ",1:" %{smart_count} "},xMoreFilesAdded:{0:" %{smart_count} ",1:" %{smart_count} "},xTimeLeft:" %{time}",youCanOnlyUploadFileTypes:"%{types}",youCanOnlyUploadX:{0:" %{smart_count} ",1:" %{smart_count} "},youHaveToAtLeastSelectX:{0:" %{smart_count} ",1:" %{smart_count} "},browseFiles:"",browseFolders:"",cancelUpload:"",addMore:"",back:"",editFileWithFilename:" %{file}"}}}),[]);u.useEffect(()=>{const X=()=>{const w=z.getFiles();if(w.length===0)return;const D=w.map(te=>({id:te.id,name:te.name,previewUrl:te.preview||URL.createObjectURL(te.data),emotion:"",description:"",isRegistered:!0,file:te.data}));f(D),w.length===1?(g(D[0].id),h("edit-single")):h("edit-multiple")};return z.on("upload",X),()=>{z.off("upload",X)}},[z]),u.useEffect(()=>{n||(z.cancelAll(),h("select"),f([]),g(null),v(!1))},[n,z]);const T=u.useCallback((X,w)=>{f(D=>D.map(te=>te.id===X?{...te,...w}:te))},[]),L=u.useCallback(X=>X.emotion.trim().length>0,[]),K=u.useMemo(()=>x.length>0&&x.every(L),[x,L]),U=u.useMemo(()=>x.find(X=>X.id===j)||null,[x,j]),R=u.useCallback(()=>{(d==="edit-single"||d==="edit-multiple")&&(h("select"),f([]),g(null))},[d]),ee=u.useCallback(async()=>{if(!K){k({title:"",description:"",variant:"destructive"});return}v(!0);const X=localStorage.getItem("access-token")||"";let w=0,D=0;try{for(const te of x){const xe=new FormData;xe.append("file",te.file),xe.append("emotion",te.emotion),xe.append("description",te.description),xe.append("is_registered",te.isRegistered.toString());try{(await fetch(Xw(),{method:"POST",headers:{Authorization:`Bearer ${X}`},body:xe})).ok?w++:D++}catch{D++}}D===0?(k({title:"",description:` ${w} `}),r(!1),c()):(k({title:"",description:` ${w}  ${D} `,variant:"destructive"}),c())}finally{v(!1)}},[K,x,k,r,c]),V=()=>e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"border rounded-lg overflow-hidden w-full",children:e.jsx(Lw,{uppy:z,proudlyDisplayPoweredByUppy:!1,hideProgressDetails:!0,height:350,width:"100%",theme:"auto",note:" JPGPNGGIFWebP  20 "})})}),E=()=>{const X=x[0];return X?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(N,{variant:"ghost",size:"sm",onClick:R,children:[e.jsx(ti,{className:"h-4 w-4 mr-1"}),""]}),e.jsx("span",{className:"text-sm text-muted-foreground",children:""})]}),e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("div",{className:"flex-shrink-0",children:[e.jsx("div",{className:"w-32 h-32 rounded-lg border overflow-hidden bg-muted flex items-center justify-center",children:e.jsx("img",{src:X.previewUrl,alt:X.name,className:"max-w-full max-h-full object-contain"})}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2 text-center truncate max-w-32",children:X.name})]}),e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(b,{htmlFor:"single-emotion",children:[" ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(ce,{id:"single-emotion",value:X.emotion,onChange:w=>T(X.id,{emotion:w.target.value}),placeholder:",",className:X.emotion.trim()?"":"border-destructive"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"single-description",children:""}),e.jsx(ce,{id:"single-description",value:X.description,onChange:w=>T(X.id,{description:w.target.value}),placeholder:"..."})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(yt,{id:"single-is-registered",checked:X.isRegistered,onCheckedChange:w=>T(X.id,{isRegistered:w===!0})}),e.jsx(b,{htmlFor:"single-is-registered",className:"cursor-pointer",children:""})]})]})]}),e.jsx(Is,{children:e.jsx(N,{onClick:ee,disabled:!K||_,children:_?"...":""})})]}):null},B=()=>{const X=x.filter(L).length,w=x.length;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(N,{variant:"ghost",size:"sm",onClick:R,children:[e.jsx(ti,{className:"h-4 w-4 mr-1"}),""]}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["",X,"/",w," "]})]}),e.jsx(Xe,{variant:K?"default":"secondary",children:K?e.jsxs(e.Fragment,{children:[e.jsx(ha,{className:"h-3 w-3 mr-1"}),""]}):e.jsxs(e.Fragment,{children:[e.jsx(li,{className:"h-3 w-3 mr-1"}),""]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(es,{className:"h-[350px] pr-2",children:e.jsx("div",{className:"space-y-2",children:x.map(D=>{const te=L(D),xe=j===D.id;return e.jsxs("div",{onClick:()=>g(D.id),className:`
                      flex items-center gap-3 p-3 rounded-lg border-2 cursor-pointer transition-all
                      ${xe?"ring-2 ring-primary":""}
                      ${te?"border-green-500 bg-green-50 dark:bg-green-950/20":"border-border hover:border-muted-foreground/50"}
                    `,children:[e.jsx("div",{className:"w-12 h-12 rounded border overflow-hidden bg-muted flex-shrink-0 flex items-center justify-center",children:e.jsx("img",{src:D.previewUrl,alt:D.name,className:"max-w-full max-h-full object-contain"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:D.name}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:D.emotion||""})]}),te?e.jsx(xa,{className:"h-5 w-5 text-green-500 flex-shrink-0"}):e.jsx("div",{className:"h-5 w-5 rounded-full border-2 border-muted-foreground/30 flex-shrink-0"})]},D.id)})})}),e.jsx("div",{className:"border rounded-lg p-4",children:U?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-16 h-16 rounded border overflow-hidden bg-muted flex items-center justify-center",children:e.jsx("img",{src:U.previewUrl,alt:U.name,className:"max-w-full max-h-full object-contain"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium truncate",children:U.name}),L(U)&&e.jsxs(Xe,{variant:"outline",className:"text-green-600 border-green-600",children:[e.jsx(ha,{className:"h-3 w-3 mr-1"}),""]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(b,{htmlFor:"multi-emotion",children:[" ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(ce,{id:"multi-emotion",value:U.emotion,onChange:D=>T(U.id,{emotion:D.target.value}),placeholder:",",className:U.emotion.trim()?"":"border-destructive"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"multi-description",children:""}),e.jsx(ce,{id:"multi-description",value:U.description,onChange:D=>T(U.id,{description:D.target.value}),placeholder:"..."})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(yt,{id:"multi-is-registered",checked:U.isRegistered,onCheckedChange:D=>T(U.id,{isRegistered:D===!0})}),e.jsx(b,{htmlFor:"multi-is-registered",className:"cursor-pointer text-sm",children:""})]})]}):e.jsx("div",{className:"h-full flex items-center justify-center text-muted-foreground",children:e.jsxs("div",{className:"text-center",children:[e.jsx(BN,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:""})]})})})]}),e.jsx(Is,{children:e.jsx(N,{onClick:ee,disabled:!K||_,children:_?"...":` (${w})`})})]})};return e.jsx(Os,{open:n,onOpenChange:r,children:e.jsxs(Es,{className:"max-w-3xl max-h-[90vh] overflow-hidden",children:[e.jsxs(zs,{children:[e.jsxs(Ms,{className:"flex items-center gap-2",children:[e.jsx(hr,{className:"h-5 w-5"}),d==="select"&&" - ",d==="edit-single"&&" - ",d==="edit-multiple"&&" - "]}),e.jsxs($s,{children:[d==="select"&&" JPGPNGGIFWebP  10MB",d==="edit-single"&&"",d==="edit-multiple"&&""]})]}),e.jsxs("div",{className:"overflow-y-auto pr-1",children:[d==="select"&&V(),d==="edit-single"&&E(),d==="edit-multiple"&&B()]})]})})}const Bl="/api/webui/expression";async function Pw(){const n=await ke(`${Bl}/chats`,{headers:ze()});if(!n.ok){const r=await n.json();throw new Error(r.detail||"")}return n.json()}async function Ww(n){const r=new URLSearchParams;n.page&&r.append("page",n.page.toString()),n.page_size&&r.append("page_size",n.page_size.toString()),n.search&&r.append("search",n.search),n.chat_id&&r.append("chat_id",n.chat_id);const c=await ke(`${Bl}/list?${r}`,{headers:ze()});if(!c.ok){const d=await c.json();throw new Error(d.detail||"")}return c.json()}async function e1(n){const r=await ke(`${Bl}/${n}`,{headers:ze()});if(!r.ok){const c=await r.json();throw new Error(c.detail||"")}return r.json()}async function s1(n){const r=await ke(`${Bl}/`,{method:"POST",headers:ze(),body:JSON.stringify(n)});if(!r.ok){const c=await r.json();throw new Error(c.detail||"")}return r.json()}async function t1(n,r){const c=await ke(`${Bl}/${n}`,{method:"PATCH",headers:ze(),body:JSON.stringify(r)});if(!c.ok){const d=await c.json();throw new Error(d.detail||"")}return c.json()}async function a1(n){const r=await ke(`${Bl}/${n}`,{method:"DELETE",headers:ze()});if(!r.ok){const c=await r.json();throw new Error(c.detail||"")}return r.json()}async function l1(n){const r=await ke(`${Bl}/batch/delete`,{method:"POST",headers:ze(),body:JSON.stringify({ids:n})});if(!r.ok){const c=await r.json();throw new Error(c.detail||"")}return r.json()}async function n1(){const n=await ke(`${Bl}/stats/summary`,{headers:ze()});if(!n.ok){const r=await n.json();throw new Error(r.detail||"")}return n.json()}function i1(){const[n,r]=u.useState([]),[c,d]=u.useState(!0),[h,x]=u.useState(0),[f,j]=u.useState(1),[g,_]=u.useState(20),[v,k]=u.useState(""),[z,T]=u.useState(null),[L,K]=u.useState(!1),[U,R]=u.useState(!1),[ee,V]=u.useState(!1),[E,B]=u.useState(null),[X,w]=u.useState(new Set),[D,te]=u.useState(!1),[xe,be]=u.useState(""),[ye,ve]=u.useState({total:0,recent_7days:0,chat_count:0,top_chats:{}}),[pe,Ne]=u.useState([]),[y,q]=u.useState(new Map),{toast:H}=Bs(),ne=async()=>{try{d(!0);const W=await Ww({page:f,page_size:g,search:v||void 0});r(W.data),x(W.total)}catch(W){H({title:"",description:W instanceof Error?W.message:"",variant:"destructive"})}finally{d(!1)}},S=async()=>{try{const W=await n1();W?.data&&ve(W.data)}catch(W){console.error(":",W)}},me=async()=>{try{const W=await Pw();if(W?.data){Ne(W.data);const _e=new Map;W.data.forEach(Me=>{_e.set(Me.chat_id,Me.chat_name)}),q(_e)}}catch(W){console.error(":",W)}},he=W=>y.get(W)||W;u.useEffect(()=>{ne(),S(),me()},[f,g,v]);const Q=async W=>{try{const _e=await e1(W.id);T(_e.data),K(!0)}catch(_e){H({title:"",description:_e instanceof Error?_e.message:"",variant:"destructive"})}},oe=W=>{T(W),R(!0)},ge=async W=>{try{await a1(W.id),H({title:"",description:`: ${W.situation}`}),B(null),ne(),S()}catch(_e){H({title:"",description:_e instanceof Error?_e.message:"",variant:"destructive"})}},le=W=>{const _e=new Set(X);_e.has(W)?_e.delete(W):_e.add(W),w(_e)},O=()=>{X.size===n.length&&n.length>0?w(new Set):w(new Set(n.map(W=>W.id)))},F=async()=>{try{await l1(Array.from(X)),H({title:"",description:` ${X.size} `}),w(new Set),te(!1),ne(),S()}catch(W){H({title:"",description:W instanceof Error?W.message:"",variant:"destructive"})}},A=()=>{const W=parseInt(xe),_e=Math.ceil(h/g);W>=1&&W<=_e?(j(W),be("")):H({title:"",description:`1-${_e}`,variant:"destructive"})};return e.jsxs("div",{className:"h-[calc(100vh-4rem)] flex flex-col p-4 sm:p-6",children:[e.jsx("div",{className:"mb-4 sm:mb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold flex items-center gap-2",children:[e.jsx(si,{className:"h-8 w-8",strokeWidth:2}),""]}),e.jsx("p",{className:"text-muted-foreground mt-1 text-sm sm:text-base",children:""})]}),e.jsxs(N,{onClick:()=>V(!0),className:"gap-2",children:[e.jsx(gt,{className:"h-4 w-4"}),""]})]})}),e.jsx(es,{className:"flex-1",children:e.jsxs("div",{className:"space-y-4 sm:space-y-6 pr-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"rounded-lg border bg-card p-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:""}),e.jsx("div",{className:"text-2xl font-bold mt-1",children:ye.total})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"7"}),e.jsx("div",{className:"text-2xl font-bold mt-1 text-green-600",children:ye.recent_7days})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:""}),e.jsx("div",{className:"text-2xl font-bold mt-1 text-blue-600",children:ye.chat_count})]})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4",children:[e.jsx(b,{htmlFor:"search",children:""}),e.jsx("div",{className:"flex flex-col sm:flex-row gap-2 mt-1.5",children:e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(St,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(ce,{id:"search",placeholder:"...",value:v,onChange:W=>k(W.target.value),className:"pl-9"})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 mt-4 pt-4 border-t",children:[e.jsx("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:X.size>0&&e.jsxs("span",{children:[" ",X.size," "]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{htmlFor:"page-size",className:"text-sm whitespace-nowrap",children:""}),e.jsxs(Qe,{value:g.toString(),onValueChange:W=>{_(parseInt(W)),j(1),w(new Set)},children:[e.jsx(Ge,{id:"page-size",className:"w-20",children:e.jsx($e,{})}),e.jsxs(Ve,{children:[e.jsx(ue,{value:"10",children:"10"}),e.jsx(ue,{value:"20",children:"20"}),e.jsx(ue,{value:"50",children:"50"}),e.jsx(ue,{value:"100",children:"100"})]})]}),X.size>0&&e.jsxs(e.Fragment,{children:[e.jsx(N,{variant:"outline",size:"sm",onClick:()=>w(new Set),children:""}),e.jsxs(N,{variant:"destructive",size:"sm",onClick:()=>te(!0),children:[e.jsx(ns,{className:"h-4 w-4 mr-1"}),""]})]})]})]})]}),e.jsxs("div",{className:"rounded-lg border bg-card",children:[e.jsx("div",{className:"hidden md:block",children:e.jsxs(ii,{children:[e.jsx(ri,{children:e.jsxs(pt,{children:[e.jsx(ls,{className:"w-12",children:e.jsx(yt,{checked:X.size===n.length&&n.length>0,onCheckedChange:O})}),e.jsx(ls,{children:""}),e.jsx(ls,{children:""}),e.jsx(ls,{children:""}),e.jsx(ls,{className:"text-right",children:""})]})}),e.jsx(ci,{children:c?e.jsx(pt,{children:e.jsx(Ye,{colSpan:5,className:"text-center py-8 text-muted-foreground",children:"..."})}):n.length===0?e.jsx(pt,{children:e.jsx(Ye,{colSpan:5,className:"text-center py-8 text-muted-foreground",children:""})}):n.map(W=>e.jsxs(pt,{children:[e.jsx(Ye,{children:e.jsx(yt,{checked:X.has(W.id),onCheckedChange:()=>le(W.id)})}),e.jsx(Ye,{className:"font-medium max-w-xs truncate",children:W.situation}),e.jsx(Ye,{className:"max-w-xs truncate",children:W.style}),e.jsx(Ye,{className:"max-w-[200px] truncate",title:he(W.chat_id),style:{wordBreak:"keep-all"},children:e.jsx("span",{className:"whitespace-nowrap overflow-hidden text-ellipsis block",children:he(W.chat_id)})}),e.jsx(Ye,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsxs(N,{variant:"default",size:"sm",onClick:()=>oe(W),children:[e.jsx(pr,{className:"h-4 w-4 mr-1"}),""]}),e.jsx(N,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>Q(W),title:"",children:e.jsx(Zt,{className:"h-4 w-4"})}),e.jsxs(N,{size:"sm",onClick:()=>B(W),className:"bg-red-600 hover:bg-red-700 text-white",children:[e.jsx(ns,{className:"h-4 w-4 mr-1"}),""]})]})})]},W.id))})]})}),e.jsx("div",{className:"md:hidden space-y-3 p-4",children:c?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"..."}):n.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:""}):n.map(W=>e.jsxs("div",{className:"rounded-lg border bg-card p-4 space-y-3 overflow-hidden",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(yt,{checked:X.has(W.id),onCheckedChange:()=>le(W.id),className:"mt-1"}),e.jsxs("div",{className:"min-w-0 flex-1 overflow-hidden space-y-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:""}),e.jsx("h3",{className:"font-semibold text-sm line-clamp-2 w-full break-all",title:W.situation,children:W.situation})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:""}),e.jsx("p",{className:"text-sm line-clamp-2 w-full break-all",title:W.style,children:W.style})]})]})]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:""}),e.jsx("p",{className:"text-sm truncate",title:he(W.chat_id),style:{wordBreak:"keep-all"},children:he(W.chat_id)})]}),e.jsxs("div",{className:"flex flex-wrap gap-1 pt-2 border-t overflow-hidden",children:[e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>oe(W),className:"text-xs px-2 py-1 h-auto flex-shrink-0",children:[e.jsx(pr,{className:"h-3 w-3 mr-1"}),""]}),e.jsx(N,{variant:"outline",size:"sm",onClick:()=>Q(W),className:"text-xs px-2 py-1 h-auto flex-shrink-0",children:e.jsx(Zt,{className:"h-3 w-3"})}),e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>B(W),className:"text-xs px-2 py-1 h-auto flex-shrink-0 text-destructive hover:text-destructive",children:[e.jsx(ns,{className:"h-3 w-3 mr-1"}),""]})]})]},W.id))}),h>0&&e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 px-4 py-3 border-t",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:[" ",h,"  ",f," / ",Math.ceil(h/g)," "]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{variant:"outline",size:"sm",onClick:()=>j(1),disabled:f===1,className:"hidden sm:flex",children:e.jsx(wr,{className:"h-4 w-4"})}),e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>j(f-1),disabled:f===1,children:[e.jsx(cn,{className:"h-4 w-4 sm:mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ce,{type:"number",value:xe,onChange:W=>be(W.target.value),onKeyDown:W=>W.key==="Enter"&&A(),placeholder:f.toString(),className:"w-16 h-8 text-center",min:1,max:Math.ceil(h/g)}),e.jsx(N,{variant:"outline",size:"sm",onClick:A,disabled:!xe,className:"h-8",children:""})]}),e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>j(f+1),disabled:f>=Math.ceil(h/g),children:[e.jsx("span",{className:"hidden sm:inline",children:""}),e.jsx(il,{className:"h-4 w-4 sm:ml-1"})]}),e.jsx(N,{variant:"outline",size:"sm",onClick:()=>j(Math.ceil(h/g)),disabled:f>=Math.ceil(h/g),className:"hidden sm:flex",children:e.jsx(_r,{className:"h-4 w-4"})})]})]})]})]})}),e.jsx(r1,{expression:z,open:L,onOpenChange:K,chatNameMap:y}),e.jsx(c1,{open:ee,onOpenChange:V,chatList:pe,onSuccess:()=>{ne(),S(),V(!1)}}),e.jsx(o1,{expression:z,open:U,onOpenChange:R,chatList:pe,onSuccess:()=>{ne(),S(),R(!1)}}),e.jsx(ps,{open:!!E,onOpenChange:()=>B(null),children:e.jsxs(cs,{children:[e.jsxs(os,{children:[e.jsx(us,{children:""}),e.jsxs(ms,{children:[' "',E?.situation,'"  ']})]}),e.jsxs(ds,{children:[e.jsx(xs,{children:""}),e.jsx(hs,{onClick:()=>E&&ge(E),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:""})]})]})}),e.jsx(d1,{open:D,onOpenChange:te,onConfirm:F,count:X.size})]})}function r1({expression:n,open:r,onOpenChange:c,chatNameMap:d}){if(!n)return null;const h=f=>f?new Date(f*1e3).toLocaleString("zh-CN"):"-",x=f=>d.get(f)||f;return e.jsx(Os,{open:r,onOpenChange:c,children:e.jsxs(Es,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(zs,{children:[e.jsx(Ms,{children:""}),e.jsx($s,{children:""})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(nr,{label:"",value:n.situation}),e.jsx(nr,{label:"",value:n.style}),e.jsx(nr,{label:"",value:x(n.chat_id)}),e.jsx(nr,{icon:Uu,label:"ID",value:n.id.toString(),mono:!0})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:e.jsx(nr,{icon:Wn,label:"",value:h(n.create_date)})})]}),e.jsx(Is,{children:e.jsx(N,{onClick:()=>c(!1),children:""})})]})})}function nr({icon:n,label:r,value:c,mono:d=!1}){return e.jsxs("div",{className:"space-y-1",children:[e.jsxs(b,{className:"text-xs text-muted-foreground flex items-center gap-1",children:[n&&e.jsx(n,{className:"h-3 w-3"}),r]}),e.jsx("div",{className:$("text-sm",d&&"font-mono",!c&&"text-muted-foreground"),children:c||"-"})]})}function c1({open:n,onOpenChange:r,chatList:c,onSuccess:d}){const[h,x]=u.useState({situation:"",style:"",chat_id:""}),[f,j]=u.useState(!1),{toast:g}=Bs(),_=async()=>{if(!h.situation||!h.style||!h.chat_id){g({title:"",description:"",variant:"destructive"});return}try{j(!0),await s1(h),g({title:"",description:""}),x({situation:"",style:"",chat_id:""}),d()}catch(v){g({title:"",description:v instanceof Error?v.message:"",variant:"destructive"})}finally{j(!1)}};return e.jsx(Os,{open:n,onOpenChange:r,children:e.jsxs(Es,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(zs,{children:[e.jsx(Ms,{children:""}),e.jsx($s,{children:""})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(b,{htmlFor:"situation",children:[" ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(ce,{id:"situation",value:h.situation,onChange:v=>x({...h,situation:v.target.value}),placeholder:""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(b,{htmlFor:"style",children:[" ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(ce,{id:"style",value:h.style,onChange:v=>x({...h,style:v.target.value}),placeholder:""})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(b,{htmlFor:"chat_id",children:[" ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs(Qe,{value:h.chat_id,onValueChange:v=>x({...h,chat_id:v}),children:[e.jsx(Ge,{children:e.jsx($e,{placeholder:""})}),e.jsx(Ve,{children:c.map(v=>e.jsx(ue,{value:v.chat_id,children:e.jsxs("span",{className:"truncate",style:{wordBreak:"keep-all"},children:[v.chat_name,v.is_group&&e.jsx("span",{className:"text-muted-foreground ml-1",children:"()"})]})},v.chat_id))})]})]})]}),e.jsxs(Is,{children:[e.jsx(N,{variant:"outline",onClick:()=>r(!1),children:""}),e.jsx(N,{onClick:_,disabled:f,children:f?"...":""})]})]})})}function o1({expression:n,open:r,onOpenChange:c,chatList:d,onSuccess:h}){const[x,f]=u.useState({}),[j,g]=u.useState(!1),{toast:_}=Bs();u.useEffect(()=>{n&&f({situation:n.situation,style:n.style,chat_id:n.chat_id})},[n]);const v=async()=>{if(n)try{g(!0),await t1(n.id,x),_({title:"",description:""}),h()}catch(k){_({title:"",description:k instanceof Error?k.message:"",variant:"destructive"})}finally{g(!1)}};return n?e.jsx(Os,{open:r,onOpenChange:c,children:e.jsxs(Es,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(zs,{children:[e.jsx(Ms,{children:""}),e.jsx($s,{children:""})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"edit_situation",children:""}),e.jsx(ce,{id:"edit_situation",value:x.situation||"",onChange:k=>f({...x,situation:k.target.value}),placeholder:""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"edit_style",children:""}),e.jsx(ce,{id:"edit_style",value:x.style||"",onChange:k=>f({...x,style:k.target.value}),placeholder:""})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"edit_chat_id",children:""}),e.jsxs(Qe,{value:x.chat_id||"",onValueChange:k=>f({...x,chat_id:k}),children:[e.jsx(Ge,{children:e.jsx($e,{placeholder:""})}),e.jsx(Ve,{children:d.map(k=>e.jsx(ue,{value:k.chat_id,children:e.jsxs("span",{className:"truncate",style:{wordBreak:"keep-all"},children:[k.chat_name,k.is_group&&e.jsx("span",{className:"text-muted-foreground ml-1",children:"()"})]})},k.chat_id))})]})]})]}),e.jsxs(Is,{children:[e.jsx(N,{variant:"outline",onClick:()=>c(!1),children:""}),e.jsx(N,{onClick:v,disabled:j,children:j?"...":""})]})]})}):null}function d1({open:n,onOpenChange:r,onConfirm:c,count:d}){return e.jsx(ps,{open:n,onOpenChange:r,children:e.jsxs(cs,{children:[e.jsxs(os,{children:[e.jsx(us,{children:""}),e.jsxs(ms,{children:[" ",d," "]})]}),e.jsxs(ds,{children:[e.jsx(xs,{children:""}),e.jsx(hs,{onClick:c,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:""})]})]})})}const oi="/api/webui/person";async function u1(n){const r=new URLSearchParams;n.page&&r.append("page",n.page.toString()),n.page_size&&r.append("page_size",n.page_size.toString()),n.search&&r.append("search",n.search),n.is_known!==void 0&&r.append("is_known",n.is_known.toString()),n.platform&&r.append("platform",n.platform);const c=await ke(`${oi}/list?${r}`,{headers:ze()});if(!c.ok){const d=await c.json();throw new Error(d.detail||"")}return c.json()}async function m1(n){const r=await ke(`${oi}/${n}`,{headers:ze()});if(!r.ok){const c=await r.json();throw new Error(c.detail||"")}return r.json()}async function h1(n,r){const c=await ke(`${oi}/${n}`,{method:"PATCH",headers:ze(),body:JSON.stringify(r)});if(!c.ok){const d=await c.json();throw new Error(d.detail||"")}return c.json()}async function x1(n){const r=await ke(`${oi}/${n}`,{method:"DELETE",headers:ze()});if(!r.ok){const c=await r.json();throw new Error(c.detail||"")}return r.json()}async function f1(){const n=await ke(`${oi}/stats/summary`,{headers:ze()});if(!n.ok){const r=await n.json();throw new Error(r.detail||"")}return n.json()}async function p1(n){const r=await ke(`${oi}/batch/delete`,{method:"POST",headers:ze(),body:JSON.stringify({person_ids:n})});if(!r.ok){const c=await r.json();throw new Error(c.detail||"")}return r.json()}function g1(){const[n,r]=u.useState([]),[c,d]=u.useState(!0),[h,x]=u.useState(0),[f,j]=u.useState(1),[g,_]=u.useState(20),[v,k]=u.useState(""),[z,T]=u.useState(void 0),[L,K]=u.useState(void 0),[U,R]=u.useState(null),[ee,V]=u.useState(!1),[E,B]=u.useState(!1),[X,w]=u.useState(null),[D,te]=u.useState({total:0,known:0,unknown:0,platforms:{}}),[xe,be]=u.useState(new Set),[ye,ve]=u.useState(!1),[pe,Ne]=u.useState(""),{toast:y}=Bs(),q=async()=>{try{d(!0);const A=await u1({page:f,page_size:g,search:v||void 0,is_known:z,platform:L});r(A.data),x(A.total)}catch(A){y({title:"",description:A instanceof Error?A.message:"",variant:"destructive"})}finally{d(!1)}},H=async()=>{try{const A=await f1();A?.data&&te(A.data)}catch(A){console.error(":",A)}};u.useEffect(()=>{q(),H()},[f,g,v,z,L]);const ne=async A=>{try{const W=await m1(A.person_id);R(W.data),V(!0)}catch(W){y({title:"",description:W instanceof Error?W.message:"",variant:"destructive"})}},S=A=>{R(A),B(!0)},me=async A=>{try{await x1(A.person_id),y({title:"",description:`: ${A.person_name||A.nickname||A.user_id}`}),w(null),q(),H()}catch(W){y({title:"",description:W instanceof Error?W.message:"",variant:"destructive"})}},he=u.useMemo(()=>Object.keys(D.platforms),[D.platforms]),Q=A=>{const W=new Set(xe);W.has(A)?W.delete(A):W.add(A),be(W)},oe=()=>{xe.size===n.length&&n.length>0?be(new Set):be(new Set(n.map(A=>A.person_id)))},ge=()=>{if(xe.size===0){y({title:"",description:"",variant:"destructive"});return}ve(!0)},le=async()=>{try{const A=await p1(Array.from(xe));y({title:"",description:A.message}),be(new Set),ve(!1),q(),H()}catch(A){y({title:"",description:A instanceof Error?A.message:"",variant:"destructive"})}},O=()=>{const A=parseInt(pe),W=Math.ceil(h/g);A>=1&&A<=W?(j(A),Ne("")):y({title:"",description:`1-${W}`,variant:"destructive"})},F=A=>A?new Date(A*1e3).toLocaleString("zh-CN"):"-";return e.jsxs("div",{className:"h-[calc(100vh-4rem)] flex flex-col p-4 sm:p-6",children:[e.jsx("div",{className:"mb-4 sm:mb-6",children:e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold flex items-center gap-2",children:[e.jsx(HN,{className:"h-8 w-8",strokeWidth:2}),""]}),e.jsx("p",{className:"text-muted-foreground mt-1 text-sm sm:text-base",children:""})]})})}),e.jsx(es,{className:"flex-1",children:e.jsxs("div",{className:"space-y-4 sm:space-y-6 pr-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"rounded-lg border bg-card p-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:""}),e.jsx("div",{className:"text-2xl font-bold mt-1",children:D.total})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:""}),e.jsx("div",{className:"text-2xl font-bold mt-1 text-green-600",children:D.known})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:""}),e.jsx("div",{className:"text-2xl font-bold mt-1 text-muted-foreground",children:D.unknown})]})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx(b,{htmlFor:"search",children:""}),e.jsxs("div",{className:"relative mt-1.5",children:[e.jsx(St,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(ce,{id:"search",placeholder:"ID...",value:v,onChange:A=>k(A.target.value),className:"pl-9"})]})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"filter-known",children:""}),e.jsxs(Qe,{value:z===void 0?"all":z.toString(),onValueChange:A=>{T(A==="all"?void 0:A==="true"),j(1)},children:[e.jsx(Ge,{id:"filter-known",className:"mt-1.5",children:e.jsx($e,{})}),e.jsxs(Ve,{children:[e.jsx(ue,{value:"all",children:""}),e.jsx(ue,{value:"true",children:""}),e.jsx(ue,{value:"false",children:""})]})]})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"filter-platform",children:""}),e.jsxs(Qe,{value:L||"all",onValueChange:A=>{K(A==="all"?void 0:A),j(1)},children:[e.jsx(Ge,{id:"filter-platform",className:"mt-1.5",children:e.jsx($e,{})}),e.jsxs(Ve,{children:[e.jsx(ue,{value:"all",children:""}),he.map(A=>e.jsxs(ue,{value:A,children:[A," (",D.platforms[A],")"]},A))]})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 mt-4 pt-4 border-t",children:[e.jsx("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:xe.size>0&&e.jsxs("span",{children:[" ",xe.size," "]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{htmlFor:"page-size",className:"text-sm whitespace-nowrap",children:""}),e.jsxs(Qe,{value:g.toString(),onValueChange:A=>{_(parseInt(A)),j(1),be(new Set)},children:[e.jsx(Ge,{id:"page-size",className:"w-20",children:e.jsx($e,{})}),e.jsxs(Ve,{children:[e.jsx(ue,{value:"10",children:"10"}),e.jsx(ue,{value:"20",children:"20"}),e.jsx(ue,{value:"50",children:"50"}),e.jsx(ue,{value:"100",children:"100"})]})]}),xe.size>0&&e.jsxs(e.Fragment,{children:[e.jsx(N,{variant:"outline",size:"sm",onClick:()=>be(new Set),children:""}),e.jsxs(N,{variant:"destructive",size:"sm",onClick:ge,children:[e.jsx(ns,{className:"h-4 w-4 mr-1"}),""]})]})]})]})]}),e.jsxs("div",{className:"rounded-lg border bg-card",children:[e.jsx("div",{className:"hidden md:block",children:e.jsxs(ii,{children:[e.jsx(ri,{children:e.jsxs(pt,{children:[e.jsx(ls,{className:"w-12",children:e.jsx(yt,{checked:n.length>0&&xe.size===n.length,onCheckedChange:oe,"aria-label":""})}),e.jsx(ls,{children:""}),e.jsx(ls,{children:""}),e.jsx(ls,{children:""}),e.jsx(ls,{children:""}),e.jsx(ls,{children:"ID"}),e.jsx(ls,{children:""}),e.jsx(ls,{className:"text-right",children:""})]})}),e.jsx(ci,{children:c?e.jsx(pt,{children:e.jsx(Ye,{colSpan:8,className:"text-center py-8 text-muted-foreground",children:"..."})}):n.length===0?e.jsx(pt,{children:e.jsx(Ye,{colSpan:8,className:"text-center py-8 text-muted-foreground",children:""})}):n.map(A=>e.jsxs(pt,{children:[e.jsx(Ye,{children:e.jsx(yt,{checked:xe.has(A.person_id),onCheckedChange:()=>Q(A.person_id),"aria-label":` ${A.person_name||A.nickname||A.user_id}`})}),e.jsx(Ye,{children:e.jsx("div",{className:$("inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium",A.is_known?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-400"),children:A.is_known?"":""})}),e.jsx(Ye,{className:"font-medium",children:A.person_name||e.jsx("span",{className:"text-muted-foreground",children:"-"})}),e.jsx(Ye,{children:A.nickname||"-"}),e.jsx(Ye,{children:A.platform}),e.jsx(Ye,{className:"font-mono text-sm",children:A.user_id}),e.jsx(Ye,{className:"text-sm text-muted-foreground",children:F(A.last_know)}),e.jsx(Ye,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsxs(N,{variant:"default",size:"sm",onClick:()=>ne(A),children:[e.jsx(Zt,{className:"h-4 w-4 mr-1"}),""]}),e.jsxs(N,{variant:"default",size:"sm",onClick:()=>S(A),children:[e.jsx(pr,{className:"h-4 w-4 mr-1"}),""]}),e.jsxs(N,{size:"sm",onClick:()=>w(A),className:"bg-red-600 hover:bg-red-700 text-white",children:[e.jsx(ns,{className:"h-4 w-4 mr-1"}),""]})]})})]},A.id))})]})}),e.jsx("div",{className:"md:hidden space-y-3 p-4",children:c?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"..."}):n.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:""}):n.map(A=>e.jsxs("div",{className:"rounded-lg border bg-card p-4 space-y-3 overflow-hidden",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(yt,{checked:xe.has(A.person_id),onCheckedChange:()=>Q(A.person_id),className:"mt-1"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:$("inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium mb-2",A.is_known?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-400"),children:A.is_known?"":""}),e.jsx("h3",{className:"font-semibold text-sm line-clamp-1 w-full break-all",children:A.person_name||e.jsx("span",{className:"text-muted-foreground",children:""})}),A.nickname&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1 line-clamp-1 w-full break-all",children:[": ",A.nickname]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:""}),e.jsx("p",{className:"font-medium text-xs",children:A.platform})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"ID"}),e.jsx("p",{className:"font-mono text-xs truncate",title:A.user_id,children:A.user_id})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:""}),e.jsx("p",{className:"text-xs",children:F(A.last_know)})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-1 pt-2 border-t overflow-hidden",children:[e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>ne(A),className:"text-xs px-2 py-1 h-auto flex-shrink-0",children:[e.jsx(Zt,{className:"h-3 w-3 mr-1"}),""]}),e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>S(A),className:"text-xs px-2 py-1 h-auto flex-shrink-0",children:[e.jsx(pr,{className:"h-3 w-3 mr-1"}),""]}),e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>w(A),className:"text-xs px-2 py-1 h-auto flex-shrink-0 text-destructive hover:text-destructive",children:[e.jsx(ns,{className:"h-3 w-3 mr-1"}),""]})]})]},A.id))}),h>0&&e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 px-4 py-3 border-t",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:[" ",h,"  ",f," / ",Math.ceil(h/g)," "]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{variant:"outline",size:"sm",onClick:()=>j(1),disabled:f===1,className:"hidden sm:flex",children:e.jsx(wr,{className:"h-4 w-4"})}),e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>j(f-1),disabled:f===1,children:[e.jsx(cn,{className:"h-4 w-4 sm:mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ce,{type:"number",value:pe,onChange:A=>Ne(A.target.value),onKeyDown:A=>A.key==="Enter"&&O(),placeholder:f.toString(),className:"w-16 h-8 text-center",min:1,max:Math.ceil(h/g)}),e.jsx(N,{variant:"outline",size:"sm",onClick:O,disabled:!pe,className:"h-8",children:""})]}),e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>j(f+1),disabled:f>=Math.ceil(h/g),children:[e.jsx("span",{className:"hidden sm:inline",children:""}),e.jsx(il,{className:"h-4 w-4 sm:ml-1"})]}),e.jsx(N,{variant:"outline",size:"sm",onClick:()=>j(Math.ceil(h/g)),disabled:f>=Math.ceil(h/g),className:"hidden sm:flex",children:e.jsx(_r,{className:"h-4 w-4"})})]})]})]})]})}),e.jsx(j1,{person:U,open:ee,onOpenChange:V}),e.jsx(v1,{person:U,open:E,onOpenChange:B,onSuccess:()=>{q(),H(),B(!1)}}),e.jsx(ps,{open:!!X,onOpenChange:()=>w(null),children:e.jsxs(cs,{children:[e.jsxs(os,{children:[e.jsx(us,{children:""}),e.jsxs(ms,{children:[' "',X?.person_name||X?.nickname||X?.user_id,'"  ']})]}),e.jsxs(ds,{children:[e.jsx(xs,{children:""}),e.jsx(hs,{onClick:()=>X&&me(X),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:""})]})]})}),e.jsx(ps,{open:ye,onOpenChange:ve,children:e.jsxs(cs,{children:[e.jsxs(os,{children:[e.jsx(us,{children:""}),e.jsxs(ms,{children:[" ",xe.size,"  "]})]}),e.jsxs(ds,{children:[e.jsx(xs,{children:""}),e.jsx(hs,{onClick:le,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:""})]})]})})]})}function j1({person:n,open:r,onOpenChange:c}){if(!n)return null;const d=h=>h?new Date(h*1e3).toLocaleString("zh-CN"):"-";return e.jsx(Os,{open:r,onOpenChange:c,children:e.jsxs(Es,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(zs,{children:[e.jsx(Ms,{children:""}),e.jsxs($s,{children:[" ",n.person_name||n.nickname||n.user_id," "]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(al,{icon:to,label:"",value:n.person_name}),e.jsx(al,{icon:si,label:"",value:n.nickname}),e.jsx(al,{icon:Uu,label:"ID",value:n.user_id,mono:!0}),e.jsx(al,{icon:Uu,label:"ID",value:n.person_id,mono:!0}),e.jsx(al,{label:"",value:n.platform}),e.jsx(al,{label:"",value:n.is_known?"":""})]}),n.name_reason&&e.jsxs("div",{className:"rounded-lg border bg-muted/50 p-3",children:[e.jsx(b,{className:"text-xs text-muted-foreground",children:""}),e.jsx("p",{className:"mt-1 text-sm",children:n.name_reason})]}),n.memory_points&&e.jsxs("div",{className:"rounded-lg border bg-muted/50 p-3",children:[e.jsx(b,{className:"text-xs text-muted-foreground",children:""}),e.jsx("p",{className:"mt-1 text-sm whitespace-pre-wrap",children:n.memory_points})]}),n.group_nick_name&&n.group_nick_name.length>0&&e.jsxs("div",{className:"rounded-lg border bg-muted/50 p-3",children:[e.jsx(b,{className:"text-xs text-muted-foreground",children:""}),e.jsx("div",{className:"mt-2 space-y-1",children:n.group_nick_name.map((h,x)=>e.jsxs("div",{className:"text-sm flex items-center gap-2",children:[e.jsx("span",{className:"font-mono text-xs text-muted-foreground",children:h.group_id}),e.jsx("span",{children:""}),e.jsx("span",{children:h.group_nick_name})]},x))})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx(al,{icon:Wn,label:"",value:d(n.know_times)}),e.jsx(al,{icon:Wn,label:"",value:d(n.know_since)}),e.jsx(al,{icon:Wn,label:"",value:d(n.last_know)})]})]}),e.jsx(Is,{children:e.jsx(N,{onClick:()=>c(!1),children:""})})]})})}function al({icon:n,label:r,value:c,mono:d=!1}){return e.jsxs("div",{className:"space-y-1",children:[e.jsxs(b,{className:"text-xs text-muted-foreground flex items-center gap-1",children:[n&&e.jsx(n,{className:"h-3 w-3"}),r]}),e.jsx("div",{className:$("text-sm",d&&"font-mono",!c&&"text-muted-foreground"),children:c||"-"})]})}function v1({person:n,open:r,onOpenChange:c,onSuccess:d}){const[h,x]=u.useState({}),[f,j]=u.useState(!1),{toast:g}=Bs();u.useEffect(()=>{n&&x({person_name:n.person_name||"",name_reason:n.name_reason||"",nickname:n.nickname||"",memory_points:n.memory_points||"",is_known:n.is_known})},[n]);const _=async()=>{if(n)try{j(!0),await h1(n.person_id,h),g({title:"",description:""}),d()}catch(v){g({title:"",description:v instanceof Error?v.message:"",variant:"destructive"})}finally{j(!1)}};return n?e.jsx(Os,{open:r,onOpenChange:c,children:e.jsxs(Es,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(zs,{children:[e.jsx(Ms,{children:""}),e.jsxs($s,{children:[" ",n.person_name||n.nickname||n.user_id," "]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"person_name",children:""}),e.jsx(ce,{id:"person_name",value:h.person_name||"",onChange:v=>x({...h,person_name:v.target.value}),placeholder:""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"nickname",children:""}),e.jsx(ce,{id:"nickname",value:h.nickname||"",onChange:v=>x({...h,nickname:v.target.value}),placeholder:""})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"name_reason",children:""}),e.jsx(Us,{id:"name_reason",value:h.name_reason||"",onChange:v=>x({...h,name_reason:v.target.value}),placeholder:"",rows:2})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"memory_points",children:""}),e.jsx(Us,{id:"memory_points",value:h.memory_points||"",onChange:v=>x({...h,memory_points:v.target.value}),placeholder:"...",rows:4})]}),e.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3",children:[e.jsxs("div",{children:[e.jsx(b,{htmlFor:"is_known",className:"text-base font-medium",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),e.jsx(qe,{id:"is_known",checked:h.is_known,onCheckedChange:v=>x({...h,is_known:v})})]})]}),e.jsxs(Is,{children:[e.jsx(N,{variant:"outline",onClick:()=>c(!1),children:""}),e.jsx(N,{onClick:_,disabled:f,children:f?"...":""})]})]})}):null}var y1=Sb();const xp=wy(y1),Pu="/api/webui";async function N1(n=100,r="all"){const c=`${Pu}/knowledge/graph?limit=${n}&node_type=${r}`,d=await fetch(c);if(!d.ok)throw new Error(`: ${d.status}`);return d.json()}async function b1(){const n=await fetch(`${Pu}/knowledge/stats`);if(!n.ok)throw new Error("");return n.json()}async function w1(n){const r=await fetch(`${Pu}/knowledge/search?query=${encodeURIComponent(n)}`);if(!r.ok)throw new Error("");return r.json()}const Fg=u.memo(({data:n})=>e.jsxs("div",{className:"px-4 py-2 shadow-md rounded-lg bg-gradient-to-br from-blue-500 to-blue-600 border-2 border-blue-700 min-w-[120px]",children:[e.jsx(lo,{type:"target",position:no.Top}),e.jsx("div",{className:"font-semibold text-white text-sm truncate max-w-[200px]",title:n.content,children:n.label}),e.jsx(lo,{type:"source",position:no.Bottom})]}));Fg.displayName="EntityNode";const Qg=u.memo(({data:n})=>e.jsxs("div",{className:"px-3 py-2 shadow-md rounded-md bg-gradient-to-br from-green-500 to-green-600 border-2 border-green-700 min-w-[100px]",children:[e.jsx(lo,{type:"target",position:no.Top}),e.jsx("div",{className:"font-medium text-white text-xs truncate max-w-[150px]",title:n.content,children:n.label}),e.jsx(lo,{type:"source",position:no.Bottom})]}));Qg.displayName="ParagraphNode";const _1={entity:Fg,paragraph:Qg};function S1(n,r){const c=new xp.graphlib.Graph;c.setDefaultEdgeLabel(()=>({})),c.setGraph({rankdir:"TB",ranksep:100,nodesep:80});const d=[],h=[];return n.forEach(x=>{c.setNode(x.id,{width:150,height:50})}),r.forEach(x=>{c.setEdge(x.source,x.target)}),xp.layout(c),n.forEach(x=>{const f=c.node(x.id);d.push({id:x.id,type:x.type,position:{x:f.x-75,y:f.y-25},data:{label:x.content.slice(0,20)+(x.content.length>20?"...":""),content:x.content}})}),r.forEach((x,f)=>{const j={id:`edge-${f}`,source:x.source,target:x.target,animated:n.length<=200&&x.weight>5,style:{strokeWidth:Math.min(x.weight/2,5),opacity:.6}};x.weight>10&&n.length<100&&(j.label=`${x.weight.toFixed(0)}`),h.push(j)}),{nodes:d,edges:h}}function C1(){const n=It(),[r,c]=u.useState(!1),[d,h]=u.useState(null),[x,f]=u.useState(""),[j,g]=u.useState("all"),[_,v]=u.useState(50),[k,z]=u.useState("50"),[T,L]=u.useState(!1),[K,U]=u.useState(!0),[R,ee]=u.useState(!1),[V,E]=u.useState(!1),[B,X,w]=Cb([]),[D,te,xe]=kb([]),[be,ye]=u.useState(0),[ve,pe]=u.useState(null),[Ne,y]=u.useState(null),{toast:q}=Bs(),H=u.useCallback(le=>le.type==="entity"?"#6366f1":le.type==="paragraph"?"#10b981":"#6b7280",[]),ne=u.useCallback(async(le=!1)=>{try{if(!le&&_>200){E(!0);return}c(!0);const[O,F]=await Promise.all([N1(_,j),b1()]);if(h(F),O.nodes.length===0){q({title:"",description:""}),X([]),te([]);return}const{nodes:A,edges:W}=S1(O.nodes,O.edges);X(A),te(W),ye(A.length),F&&F.total_nodes>_&&q({title:"",description:` ${F.total_nodes}  ${A.length} `}),q({title:"",description:` ${A.length} ${W.length} `})}catch(O){console.error(":",O),q({title:"",description:O instanceof Error?O.message:"",variant:"destructive"})}finally{c(!1)}},[_,j,q]),S=u.useCallback(async()=>{if(!x.trim()){q({title:"",description:""});return}try{const le=await w1(x);if(le.length===0){q({title:"",description:""});return}const O=new Set(le.map(F=>F.id));X(F=>F.map(A=>({...A,style:{...A.style,opacity:O.has(A.id)?1:.3,filter:O.has(A.id)?"brightness(1.2)":"brightness(0.8)"}}))),q({title:"",description:` ${le.length} `})}catch(le){console.error(":",le),q({title:"",description:le instanceof Error?le.message:"",variant:"destructive"})}},[x,q]),me=u.useCallback(()=>{X(le=>le.map(O=>({...O,style:{...O.style,opacity:1,filter:"brightness(1)"}})))},[]),he=u.useCallback(()=>{U(!1),ee(!0),ne()},[ne]),Q=u.useCallback(()=>{E(!1),setTimeout(()=>{ne(!0)},0)},[ne]),oe=u.useCallback((le,O)=>{B.find(A=>A.id===O.id)&&pe({id:O.id,type:O.type,content:O.data.content})},[B]);u.useEffect(()=>{K||R&&ne()},[_,j,K,R]);const ge=u.useCallback((le,O)=>{const F=B.find(_e=>_e.id===O.source),A=B.find(_e=>_e.id===O.target),W=D.find(_e=>_e.id===O.id);F&&A&&W&&y({source:{id:F.id,type:F.type,content:F.data.content},target:{id:A.id,type:A.type,content:A.data.content},edge:{source:O.source,target:O.target,weight:parseFloat(O.label||"0")}})},[B,D]);return e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"flex-shrink-0 p-4 border-b bg-background",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:""}),e.jsx("p",{className:"text-muted-foreground mt-1",children:""})]}),d&&e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs(Xe,{variant:"outline",className:"gap-1",children:[e.jsx(eo,{className:"h-3 w-3"}),": ",d.total_nodes]}),e.jsxs(Xe,{variant:"outline",className:"gap-1",children:[e.jsx(jg,{className:"h-3 w-3"}),": ",d.total_edges]}),e.jsxs(Xe,{variant:"outline",className:"gap-1",children:[e.jsx(Xt,{className:"h-3 w-3"}),": ",d.entity_nodes]}),e.jsxs(Xe,{variant:"outline",className:"gap-1",children:[e.jsx(Ma,{className:"h-3 w-3"}),": ",d.paragraph_nodes]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mt-4",children:[e.jsxs("div",{className:"flex-1 flex gap-2",children:[e.jsx(ce,{placeholder:"...",value:x,onChange:le=>f(le.target.value),onKeyDown:le=>le.key==="Enter"&&S(),className:"flex-1"}),e.jsx(N,{onClick:S,size:"sm",children:e.jsx(St,{className:"h-4 w-4"})}),e.jsx(N,{onClick:me,variant:"outline",size:"sm",children:""})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Qe,{value:j,onValueChange:le=>g(le),children:[e.jsx(Ge,{className:"w-[120px]",children:e.jsx($e,{})}),e.jsxs(Ve,{children:[e.jsx(ue,{value:"all",children:""}),e.jsx(ue,{value:"entity",children:""}),e.jsx(ue,{value:"paragraph",children:""})]})]}),e.jsxs(Qe,{value:_===1e4?"all":T?"custom":_.toString(),onValueChange:le=>{le==="custom"?(L(!0),z(_.toString())):le==="all"?(L(!1),v(1e4)):(L(!1),v(Number(le)))},children:[e.jsx(Ge,{className:"w-[120px]",children:e.jsx($e,{})}),e.jsxs(Ve,{children:[e.jsx(ue,{value:"50",children:"50 "}),e.jsx(ue,{value:"100",children:"100 "}),e.jsx(ue,{value:"200",children:"200 "}),e.jsx(ue,{value:"500",children:"500 "}),e.jsx(ue,{value:"1000",children:"1000 "}),e.jsx(ue,{value:"all",children:" (10000)"}),e.jsx(ue,{value:"custom",children:"..."})]})]}),T&&e.jsx(ce,{type:"number",min:"50",value:k,onChange:le=>z(le.target.value),onBlur:()=>{const le=parseInt(k);!isNaN(le)&&le>=50?v(le):(z("50"),v(50))},onKeyDown:le=>{if(le.key==="Enter"){const O=parseInt(k);!isNaN(O)&&O>=50?v(O):(z("50"),v(50))}},placeholder:"50",className:"w-[120px]"}),e.jsx(N,{onClick:()=>ne(),variant:"outline",size:"sm",disabled:r,children:e.jsx(ft,{className:$("h-4 w-4",r&&"animate-spin")})})]})]})]}),e.jsx("div",{className:"flex-1 relative",children:r?e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ft,{className:"h-8 w-8 animate-spin mx-auto mb-2 text-muted-foreground"}),e.jsx("p",{className:"text-muted-foreground",children:"..."})]})}):B.length===0?e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(eo,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:""}),e.jsx("p",{className:"text-muted-foreground",children:""})]})}):e.jsxs(Tb,{nodes:B,edges:D,onNodesChange:w,onEdgesChange:xe,onNodeClick:oe,onEdgeClick:ge,nodeTypes:_1,fitView:!0,minZoom:.05,maxZoom:1.5,defaultViewport:{x:0,y:0,zoom:.5},elevateNodesOnSelect:be<=500,nodesDraggable:be<=1e3,attributionPosition:"bottom-left",children:[e.jsx(Eb,{variant:zb.Dots,gap:12,size:1}),e.jsx(Mb,{}),be<=500&&e.jsx(Ab,{nodeColor:H,nodeBorderRadius:8,pannable:!0,zoomable:!0}),e.jsxs(Db,{position:"top-right",className:"bg-background/95 backdrop-blur-sm rounded-lg border p-3 shadow-lg",children:[e.jsx("div",{className:"text-sm font-semibold mb-2",children:""}),e.jsxs("div",{className:"space-y-2 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded bg-gradient-to-br from-blue-500 to-blue-600 border-2 border-blue-700"}),e.jsx("span",{children:""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded bg-gradient-to-br from-green-500 to-green-600 border-2 border-green-700"}),e.jsx("span",{children:""})]}),be>200&&e.jsxs("div",{className:"mt-2 pt-2 border-t text-yellow-600 dark:text-yellow-500",children:[e.jsx("div",{className:"font-semibold",children:""}),e.jsx("div",{children:""}),be>500&&e.jsx("div",{children:""})]})]})]})]})}),e.jsx(Os,{open:!!ve,onOpenChange:le=>!le&&pe(null),children:e.jsxs(Es,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsx(zs,{children:e.jsx(Ms,{children:""})}),ve&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"grid grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:""}),e.jsx("div",{className:"mt-1",children:e.jsx(Xe,{variant:ve.type==="entity"?"default":"secondary",children:ve.type==="entity"?" ":" "})})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"ID"}),e.jsx("code",{className:"mt-1 block p-2 bg-muted rounded text-xs break-all",children:ve.id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:""}),e.jsx(es,{className:"mt-1 h-40 p-3 bg-muted rounded",children:e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:ve.content})})]})]})]})}),e.jsx(Os,{open:!!Ne,onOpenChange:le=>!le&&y(null),children:e.jsxs(Es,{className:"max-w-2xl max-h-[80vh] overflow-hidden flex flex-col",children:[e.jsx(zs,{children:e.jsx(Ms,{children:""})}),Ne&&e.jsx(es,{className:"flex-1 pr-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0 p-3 bg-blue-50 dark:bg-blue-950 rounded border-2 border-blue-200 dark:border-blue-800",children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:""}),e.jsx("div",{className:"font-medium text-sm mb-2 truncate",children:Ne.source.content}),e.jsxs("code",{className:"text-xs text-muted-foreground truncate block",children:[Ne.source.id.slice(0,40),"..."]})]}),e.jsx("div",{className:"text-2xl text-muted-foreground flex-shrink-0",children:""}),e.jsxs("div",{className:"flex-1 min-w-0 p-3 bg-green-50 dark:bg-green-950 rounded border-2 border-green-200 dark:border-green-800",children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:""}),e.jsx("div",{className:"font-medium text-sm mb-2 truncate",children:Ne.target.content}),e.jsxs("code",{className:"text-xs text-muted-foreground truncate block",children:[Ne.target.id.slice(0,40),"..."]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:""}),e.jsx("div",{className:"mt-1",children:e.jsx(Xe,{variant:"outline",className:"text-base font-mono",children:Ne.edge.weight.toFixed(4)})})]})]})})]})}),e.jsx(ps,{open:K,onOpenChange:U,children:e.jsxs(cs,{children:[e.jsxs(os,{children:[e.jsx(us,{children:""}),e.jsxs(ms,{children:["",e.jsx("br",{}),"?"]})]}),e.jsxs(ds,{children:[e.jsx(xs,{onClick:()=>n({to:"/"}),children:" ()"}),e.jsx(hs,{onClick:he,children:""})]})]})}),e.jsx(ps,{open:V,onOpenChange:E,children:e.jsxs(cs,{children:[e.jsxs(os,{children:[e.jsx(us,{children:" "}),e.jsx(ms,{asChild:!0,children:e.jsxs("div",{children:[e.jsxs("p",{children:[" ",e.jsx("strong",{className:"text-orange-600",children:_>=1e4?" (10000)":_})," "]}),e.jsx("p",{className:"mt-4",children:":"}),e.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[e.jsx("li",{children:""}),e.jsx("li",{children:""}),e.jsx("li",{children:""})]}),e.jsx("p",{className:"mt-4",children:" (50-200 )"})]})})]}),e.jsxs(ds,{children:[e.jsx(xs,{onClick:()=>{E(!1),_>200&&(v(50),L(!1))},children:""}),e.jsx(hs,{onClick:Q,className:"bg-orange-600 hover:bg-orange-700",children:""})]})]})})]})}function fp({className:n,classNames:r,showOutsideDays:c=!0,captionLayout:d="label",buttonVariant:h="ghost",formatters:x,components:f,...j}){const g=bg();return e.jsx(rb,{showOutsideDays:c,className:$("bg-background group/calendar p-3 [--cell-size:2rem] [[data-slot=card-content]_&]:bg-transparent [[data-slot=popover-content]_&]:bg-transparent",String.raw`rtl:**:[.rdp-button\_next>svg]:rotate-180`,String.raw`rtl:**:[.rdp-button\_previous>svg]:rotate-180`,n),captionLayout:d,formatters:{formatMonthDropdown:_=>_.toLocaleString("default",{month:"short"}),...x},classNames:{root:$("w-fit",g.root),months:$("relative flex flex-col gap-4 md:flex-row",g.months),month:$("flex w-full flex-col gap-4",g.month),nav:$("absolute inset-x-0 top-0 flex w-full items-center justify-between gap-1",g.nav),button_previous:$(gr({variant:h}),"h-[--cell-size] w-[--cell-size] select-none p-0 aria-disabled:opacity-50",g.button_previous),button_next:$(gr({variant:h}),"h-[--cell-size] w-[--cell-size] select-none p-0 aria-disabled:opacity-50",g.button_next),month_caption:$("flex h-[--cell-size] w-full items-center justify-center px-[--cell-size]",g.month_caption),dropdowns:$("flex h-[--cell-size] w-full items-center justify-center gap-1.5 text-sm font-medium",g.dropdowns),dropdown_root:$("has-focus:border-ring border-input shadow-xs has-focus:ring-ring/50 has-focus:ring-[3px] relative rounded-md border",g.dropdown_root),dropdown:$("bg-popover absolute inset-0 opacity-0",g.dropdown),caption_label:$("select-none font-medium",d==="label"?"text-sm":"[&>svg]:text-muted-foreground flex h-8 items-center gap-1 rounded-md pl-2 pr-1 text-sm [&>svg]:size-3.5",g.caption_label),table:"w-full border-collapse",weekdays:$("flex",g.weekdays),weekday:$("text-muted-foreground flex-1 select-none rounded-md text-[0.8rem] font-normal",g.weekday),week:$("mt-2 flex w-full",g.week),week_number_header:$("w-[--cell-size] select-none",g.week_number_header),week_number:$("text-muted-foreground select-none text-[0.8rem]",g.week_number),day:$("group/day relative aspect-square h-full w-full select-none p-0 text-center [&:first-child[data-selected=true]_button]:rounded-l-md [&:last-child[data-selected=true]_button]:rounded-r-md",g.day),range_start:$("bg-accent rounded-l-md",g.range_start),range_middle:$("rounded-none",g.range_middle),range_end:$("bg-accent rounded-r-md",g.range_end),today:$("bg-accent text-accent-foreground rounded-md data-[selected=true]:rounded-none",g.today),outside:$("text-muted-foreground aria-selected:text-muted-foreground",g.outside),disabled:$("text-muted-foreground opacity-50",g.disabled),hidden:$("invisible",g.hidden),...r},components:{Root:({className:_,rootRef:v,...k})=>e.jsx("div",{"data-slot":"calendar",ref:v,className:$(_),...k}),Chevron:({className:_,orientation:v,...k})=>v==="left"?e.jsx(cn,{className:$("size-4",_),...k}):v==="right"?e.jsx(il,{className:$("size-4",_),...k}):e.jsx(Ll,{className:$("size-4",_),...k}),DayButton:k1,WeekNumber:({children:_,...v})=>e.jsx("td",{...v,children:e.jsx("div",{className:"flex size-[--cell-size] items-center justify-center text-center",children:_})}),...f},...j})}function k1({className:n,day:r,modifiers:c,...d}){const h=bg(),x=u.useRef(null);return u.useEffect(()=>{c.focused&&x.current?.focus()},[c.focused]),e.jsx(N,{ref:x,variant:"ghost",size:"icon","data-day":r.date.toLocaleDateString(),"data-selected-single":c.selected&&!c.range_start&&!c.range_end&&!c.range_middle,"data-range-start":c.range_start,"data-range-end":c.range_end,"data-range-middle":c.range_middle,className:$("data-[selected-single=true]:bg-primary data-[selected-single=true]:text-primary-foreground data-[range-middle=true]:bg-accent data-[range-middle=true]:text-accent-foreground data-[range-start=true]:bg-primary data-[range-start=true]:text-primary-foreground data-[range-end=true]:bg-primary data-[range-end=true]:text-primary-foreground group-data-[focused=true]/day:border-ring group-data-[focused=true]/day:ring-ring/50 flex aspect-square h-auto w-full min-w-[--cell-size] flex-col gap-1 font-normal leading-none data-[range-end=true]:rounded-md data-[range-middle=true]:rounded-none data-[range-start=true]:rounded-md group-data-[focused=true]/day:relative group-data-[focused=true]/day:z-10 group-data-[focused=true]/day:ring-[3px] [&>span]:text-xs [&>span]:opacity-70",h.day,n),...d})}const T1={lessThanXSeconds:{one:" 1 ",other:" {{count}} "},xSeconds:{one:"1 ",other:"{{count}} "},halfAMinute:"",lessThanXMinutes:{one:" 1 ",other:" {{count}} "},xMinutes:{one:"1 ",other:"{{count}} "},xHours:{one:"1 ",other:"{{count}} "},aboutXHours:{one:" 1 ",other:" {{count}} "},xDays:{one:"1 ",other:"{{count}} "},aboutXWeeks:{one:" 1 ",other:" {{count}} "},xWeeks:{one:"1 ",other:"{{count}} "},aboutXMonths:{one:" 1 ",other:" {{count}} "},xMonths:{one:"1 ",other:"{{count}} "},aboutXYears:{one:" 1 ",other:" {{count}} "},xYears:{one:"1 ",other:"{{count}} "},overXYears:{one:" 1 ",other:" {{count}} "},almostXYears:{one:" 1 ",other:" {{count}} "}},E1=(n,r,c)=>{let d;const h=T1[n];return typeof h=="string"?d=h:r===1?d=h.one:d=h.other.replace("{{count}}",String(r)),c?.addSuffix?c.comparison&&c.comparison>0?d+"":d+"":d},z1={full:"y''M''d'' EEEE",long:"y''M''d''",medium:"yyyy-MM-dd",short:"yy-MM-dd"},M1={full:"zzzz a h:mm:ss",long:"z a h:mm:ss",medium:"a h:mm:ss",short:"a h:mm"},A1={full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},D1={date:wu({formats:z1,defaultWidth:"full"}),time:wu({formats:M1,defaultWidth:"full"}),dateTime:wu({formats:A1,defaultWidth:"full"})};function pp(n,r,c){const d="eeee p";return Cy(n,r,c)?d:n.getTime()>r.getTime()?"''"+d:"''"+d}const O1={lastWeek:pp,yesterday:"'' p",today:"'' p",tomorrow:"'' p",nextWeek:pp,other:"PP p"},R1=(n,r,c,d)=>{const h=O1[n];return typeof h=="function"?h(r,c,d):h},L1={narrow:["",""],abbreviated:["",""],wide:["",""]},U1={narrow:["1","2","3","4"],abbreviated:["","","",""],wide:["","","",""]},B1={narrow:["","","","","","","","","","","",""],abbreviated:["1","2","3","4","5","6","7","8","9","10","11","12"],wide:["","","","","","","","","","","",""]},H1={narrow:["","","","","","",""],short:["","","","","","",""],abbreviated:["","","","","","",""],wide:["","","","","","",""]},q1={narrow:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},abbreviated:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},wide:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""}},G1={narrow:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},abbreviated:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},wide:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""}},V1=(n,r)=>{const c=Number(n);switch(r?.unit){case"date":return c.toString()+"";case"hour":return c.toString()+"";case"minute":return c.toString()+"";case"second":return c.toString()+"";default:return" "+c.toString()}},F1={ordinalNumber:V1,era:er({values:L1,defaultWidth:"wide"}),quarter:er({values:U1,defaultWidth:"wide",argumentCallback:n=>n-1}),month:er({values:B1,defaultWidth:"wide"}),day:er({values:H1,defaultWidth:"wide"}),dayPeriod:er({values:q1,defaultWidth:"wide",formattingValues:G1,defaultFormattingWidth:"wide"})},Q1=/^(\s*)?\d+(|||)?/i,$1=/\d+/i,Y1={narrow:/^()/i,abbreviated:/^()/i,wide:/^(|)/i},X1={any:[/^()/i,/^()/i]},K1={narrow:/^[1234]/i,abbreviated:/^[]/i,wide:/^[]/i},Z1={any:[/(1|)/i,/(2|)/i,/(3|)/i,/(4|)/i]},I1={narrow:/^(|||||||||[])/i,abbreviated:/^(|||||||||[]|\d|1[12])/i,wide:/^(|||||||||[])/i},J1={narrow:[/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^(?!(|))/i,/^/i,/^/i],any:[/^|1/i,/^|2/i,/^|3/i,/^|4/i,/^|5/i,/^|6/i,/^|7/i,/^|8/i,/^|9/i,/^(?!(|))|10/i,/^|11/i,/^|12/i]},P1={narrow:/^[]/i,short:/^[]/i,abbreviated:/^[]/i,wide:/^[]/i},W1={any:[//i,//i,//i,//i,//i,//i,//i]},e2={any:/^(?|?||[]|?||?||)/i},s2={any:{am:/^?/i,pm:/^?/i,midnight:/^/i,noon:/^[]/i,morning:/^/i,afternoon:/^/i,evening:/^?/i,night:/^/i}},t2={ordinalNumber:ky({matchPattern:Q1,parsePattern:$1,valueCallback:n=>parseInt(n,10)}),era:sr({matchPatterns:Y1,defaultMatchWidth:"wide",parsePatterns:X1,defaultParseWidth:"any"}),quarter:sr({matchPatterns:K1,defaultMatchWidth:"wide",parsePatterns:Z1,defaultParseWidth:"any",valueCallback:n=>n+1}),month:sr({matchPatterns:I1,defaultMatchWidth:"wide",parsePatterns:J1,defaultParseWidth:"any"}),day:sr({matchPatterns:P1,defaultMatchWidth:"wide",parsePatterns:W1,defaultParseWidth:"any"}),dayPeriod:sr({matchPatterns:e2,defaultMatchWidth:"any",parsePatterns:s2,defaultParseWidth:"any"})},Qc={code:"zh-CN",formatDistance:E1,formatLong:D1,formatRelative:R1,localize:F1,match:t2,options:{weekStartsOn:1,firstWeekContainsDate:4}},$c={xs:{label:"",rowHeight:28,class:"text-[10px] sm:text-xs"},sm:{label:"",rowHeight:36,class:"text-xs sm:text-sm"},base:{label:"",rowHeight:44,class:"text-sm sm:text-base"}};function a2(){const[n,r]=u.useState([]),[c,d]=u.useState(""),[h,x]=u.useState("all"),[f,j]=u.useState("all"),[g,_]=u.useState(void 0),[v,k]=u.useState(void 0),[z,T]=u.useState(!0),[L,K]=u.useState(!1),[U,R]=u.useState("xs"),[ee,V]=u.useState(4),E=u.useRef(null);u.useEffect(()=>{const y=an.getAllLogs();r(y);const q=an.onLog(()=>{r(an.getAllLogs())}),H=an.onConnectionChange(ne=>{K(ne)});return()=>{q(),H()}},[]);const B=u.useMemo(()=>{const y=new Set(n.map(q=>q.module).filter(q=>q&&q.trim()!==""));return Array.from(y).sort()},[n]),X=y=>{switch(y){case"DEBUG":return"text-muted-foreground";case"INFO":return"text-blue-500 dark:text-blue-400";case"WARNING":return"text-yellow-600 dark:text-yellow-500";case"ERROR":return"text-red-600 dark:text-red-500";case"CRITICAL":return"text-red-700 dark:text-red-400 font-bold";default:return"text-foreground"}},w=y=>{switch(y){case"DEBUG":return"bg-gray-800/30 dark:bg-gray-800/50";case"INFO":return"bg-blue-900/20 dark:bg-blue-500/20";case"WARNING":return"bg-yellow-900/20 dark:bg-yellow-500/20";case"ERROR":return"bg-red-900/20 dark:bg-red-500/20";case"CRITICAL":return"bg-red-900/30 dark:bg-red-600/30";default:return"bg-gray-800/20 dark:bg-gray-800/30"}},D=()=>{window.location.reload()},te=()=>{an.clearLogs(),r([])},xe=()=>{const y=ve.map(S=>`${S.timestamp} [${S.level.padEnd(8)}] [${S.module}] ${S.message}`).join(`
`),q=new Blob([y],{type:"text/plain;charset=utf-8"}),H=URL.createObjectURL(q),ne=document.createElement("a");ne.href=H,ne.download=`logs-${_u(new Date,"yyyy-MM-dd-HHmmss")}.txt`,ne.click(),URL.revokeObjectURL(H)},be=()=>{T(!z)},ye=()=>{_(void 0),k(void 0)},ve=u.useMemo(()=>n.filter(y=>{const q=c===""||y.message.toLowerCase().includes(c.toLowerCase())||y.module.toLowerCase().includes(c.toLowerCase()),H=h==="all"||y.level===h,ne=f==="all"||y.module===f;let S=!0;if(g||v){const me=new Date(y.timestamp);if(g){const he=new Date(g);he.setHours(0,0,0,0),S=S&&me>=he}if(v){const he=new Date(v);he.setHours(23,59,59,999),S=S&&me<=he}}return q&&H&&ne&&S}),[n,c,h,f,g,v]),pe=$c[U].rowHeight+ee,Ne=fy({count:ve.length,getScrollElement:()=>E.current,estimateSize:()=>pe,overscan:15});return u.useEffect(()=>{z&&ve.length>0&&Ne.scrollToIndex(ve.length-1,{align:"end",behavior:"auto"})},[ve.length,z,Ne]),e.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"flex-shrink-0 space-y-4 p-3 sm:p-4 lg:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold",children:""}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mt-1",children:""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:$("h-2.5 w-2.5 sm:h-3 sm:w-3 rounded-full",L?"bg-green-500 animate-pulse":"bg-red-500")}),e.jsx("span",{className:"text-xs sm:text-sm text-muted-foreground",children:L?"":""})]})]}),e.jsx(Be,{className:"p-3 sm:p-4",children:e.jsxs("div",{className:"flex flex-col gap-3 sm:gap-4",children:[e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(St,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(ce,{placeholder:"...",value:c,onChange:y=>d(y.target.value),className:"pl-9 h-9 text-sm"})]}),e.jsxs(Qe,{value:h,onValueChange:x,children:[e.jsxs(Ge,{className:"w-full sm:w-[140px] lg:w-[180px] h-9 text-sm",children:[e.jsx(Lu,{className:"h-4 w-4 mr-2"}),e.jsx($e,{placeholder:""})]}),e.jsxs(Ve,{children:[e.jsx(ue,{value:"all",children:""}),e.jsx(ue,{value:"DEBUG",children:"DEBUG"}),e.jsx(ue,{value:"INFO",children:"INFO"}),e.jsx(ue,{value:"WARNING",children:"WARNING"}),e.jsx(ue,{value:"ERROR",children:"ERROR"}),e.jsx(ue,{value:"CRITICAL",children:"CRITICAL"})]})]}),e.jsxs(Qe,{value:f,onValueChange:j,children:[e.jsxs(Ge,{className:"w-full sm:w-[160px] lg:w-[200px] h-9 text-sm",children:[e.jsx(Lu,{className:"h-4 w-4 mr-2"}),e.jsx($e,{placeholder:""})]}),e.jsxs(Ve,{children:[e.jsx(ue,{value:"all",children:""}),B.map(y=>e.jsx(ue,{value:y,children:y},y))]})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:gap-4",children:[e.jsxs(Da,{children:[e.jsx(Oa,{asChild:!0,children:e.jsxs(N,{variant:"outline",size:"sm",className:$("w-full sm:w-[200px] lg:w-[240px] justify-start text-left font-normal h-9",!g&&"text-muted-foreground"),children:[e.jsx(Yf,{className:"mr-2 h-4 w-4"}),e.jsx("span",{className:"text-xs sm:text-sm",children:g?_u(g,"PPP",{locale:Qc}):""})]})}),e.jsx(Na,{className:"w-auto p-0",align:"start",children:e.jsx(fp,{mode:"single",selected:g,onSelect:_,initialFocus:!0,locale:Qc})})]}),e.jsxs(Da,{children:[e.jsx(Oa,{asChild:!0,children:e.jsxs(N,{variant:"outline",size:"sm",className:$("w-full sm:w-[200px] lg:w-[240px] justify-start text-left font-normal h-9",!v&&"text-muted-foreground"),children:[e.jsx(Yf,{className:"mr-2 h-4 w-4"}),e.jsx("span",{className:"text-xs sm:text-sm",children:v?_u(v,"PPP",{locale:Qc}):""})]})}),e.jsx(Na,{className:"w-auto p-0",align:"start",children:e.jsx(fp,{mode:"single",selected:v,onSelect:k,initialFocus:!0,locale:Qc})})]}),(g||v)&&e.jsxs(N,{variant:"outline",size:"sm",onClick:ye,className:"w-full sm:w-auto h-9",children:[e.jsx(li,{className:"h-4 w-4 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline text-sm",children:""}),e.jsx("span",{className:"sm:hidden text-sm",children:""})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:flex-wrap sm:items-center",children:[e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs(N,{variant:z?"default":"outline",size:"sm",onClick:be,className:"flex-1 sm:flex-none h-9",children:[z?e.jsx(qN,{className:"h-4 w-4"}):e.jsx(GN,{className:"h-4 w-4"}),e.jsx("span",{className:"ml-2 text-sm",children:z?"":""})]}),e.jsxs(N,{variant:"outline",size:"sm",onClick:D,className:"flex-1 sm:flex-none h-9",children:[e.jsx(ft,{className:"h-4 w-4"}),e.jsx("span",{className:"ml-2 text-sm",children:""})]}),e.jsxs(N,{variant:"outline",size:"sm",onClick:te,className:"flex-1 sm:flex-none h-9",children:[e.jsx(ns,{className:"h-4 w-4"}),e.jsx("span",{className:"ml-2 text-sm",children:""})]}),e.jsxs(N,{variant:"outline",size:"sm",onClick:xe,className:"flex-1 sm:flex-none h-9",children:[e.jsx(nl,{className:"h-4 w-4"}),e.jsx("span",{className:"ml-2 text-sm",children:""})]})]}),e.jsx("div",{className:"flex-1 hidden sm:block"}),e.jsxs("div",{className:"text-xs sm:text-sm text-muted-foreground flex items-center justify-center sm:justify-end",children:[e.jsxs("span",{className:"font-mono",children:[ve.length," / ",n.length]}),e.jsx("span",{className:"ml-1",children:""})]})]}),e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:gap-6 pt-2 border-t border-border/50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(VN,{className:"h-4 w-4"}),e.jsx("span",{children:""})]}),e.jsx("div",{className:"flex gap-1",children:Object.keys($c).map(y=>e.jsx(N,{variant:U===y?"default":"outline",size:"sm",onClick:()=>R(y),className:"h-7 px-3 text-xs",children:$c[y].label},y))})]}),e.jsxs("div",{className:"flex items-center gap-3 flex-1 max-w-xs",children:[e.jsx("span",{className:"text-sm text-muted-foreground whitespace-nowrap",children:""}),e.jsx(za,{value:[ee],onValueChange:([y])=>V(y),min:0,max:12,step:2,className:"flex-1"}),e.jsxs("span",{className:"text-xs text-muted-foreground w-8",children:[ee,"px"]})]})]})]})})]}),e.jsx("div",{className:"flex-1 min-h-0 px-3 sm:px-4 lg:px-6 pb-3 sm:pb-4 lg:pb-6",children:e.jsx(Be,{className:"bg-black dark:bg-gray-950 border-gray-800 dark:border-gray-900 h-full",children:e.jsx(es,{viewportRef:E,className:"h-full",children:e.jsx("div",{className:$("p-2 sm:p-3 font-mono relative",$c[U].class),style:{height:`${Ne.getTotalSize()}px`},children:ve.length===0?e.jsx("div",{className:"text-gray-500 dark:text-gray-600 text-center py-8 text-sm",children:""}):Ne.getVirtualItems().map(y=>{const q=ve[y.index];return e.jsxs("div",{"data-index":y.index,ref:Ne.measureElement,className:$("absolute top-0 left-0 w-full px-2 sm:px-3 rounded hover:bg-white/5 transition-colors group",w(q.level)),style:{transform:`translateY(${y.start}px)`,paddingTop:`${ee/2}px`,paddingBottom:`${ee/2}px`},children:[e.jsxs("div",{className:"flex flex-col gap-0.5 sm:hidden",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-600",children:q.timestamp}),e.jsxs("span",{className:$("font-semibold",X(q.level)),children:["[",q.level,"]"]})]}),e.jsx("div",{className:"text-cyan-400 dark:text-cyan-500 truncate",children:q.module}),e.jsx("div",{className:"text-gray-300 dark:text-gray-400 whitespace-pre-wrap break-words",children:q.message})]}),e.jsxs("div",{className:"hidden sm:flex gap-2 items-start",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-600 flex-shrink-0 w-[130px] lg:w-[160px]",children:q.timestamp}),e.jsxs("span",{className:$("flex-shrink-0 w-[65px] lg:w-[75px] font-semibold",X(q.level)),children:["[",q.level,"]"]}),e.jsx("span",{className:"text-cyan-400 dark:text-cyan-500 flex-shrink-0 w-[100px] lg:w-[130px] truncate",children:q.module}),e.jsx("span",{className:"text-gray-300 dark:text-gray-400 flex-1 whitespace-pre-wrap break-words",children:q.message})]})]},y.key)})})})})})]})}const l2="Mai-with-u",n2="plugin-repo",i2="main",r2="plugin_details.json";async function c2(){try{const n=await ke("/api/webui/plugins/fetch-raw",{method:"POST",headers:ze(),body:JSON.stringify({owner:l2,repo:n2,branch:i2,file_path:r2})});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const r=await n.json();if(!r.success||!r.data)throw new Error(r.error||"");return JSON.parse(r.data).filter(h=>!h?.id||!h?.manifest?(console.warn(":",h),!1):!h.manifest.name||!h.manifest.version?(console.warn(":",h.id),!1):!0).map(h=>({id:h.id,manifest:{manifest_version:h.manifest.manifest_version||1,name:h.manifest.name,version:h.manifest.version,description:h.manifest.description||"",author:h.manifest.author||{name:"Unknown"},license:h.manifest.license||"Unknown",host_application:h.manifest.host_application||{min_version:"0.0.0"},homepage_url:h.manifest.homepage_url,repository_url:h.manifest.repository_url,keywords:h.manifest.keywords||[],categories:h.manifest.categories||[],default_locale:h.manifest.default_locale||"zh-CN",locales_path:h.manifest.locales_path},downloads:0,rating:0,review_count:0,installed:!1,published_at:new Date().toISOString(),updated_at:new Date().toISOString()}))}catch(n){throw console.error("Failed to fetch plugin list:",n),n}}async function o2(){try{const n=await ke("/api/webui/plugins/git-status");if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return await n.json()}catch(n){return console.error("Failed to check Git status:",n),{installed:!1,error:" Git "}}}async function d2(){try{const n=await ke("/api/webui/plugins/version");if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return await n.json()}catch(n){return console.error("Failed to get Maimai version:",n),{version:"0.0.0",version_major:0,version_minor:0,version_patch:0}}}function u2(n,r,c){const d=n.split(".").map(j=>parseInt(j)||0),h=d[0]||0,x=d[1]||0,f=d[2]||0;if(c.version_major<h||c.version_major===h&&c.version_minor<x||c.version_major===h&&c.version_minor===x&&c.version_patch<f)return!1;if(r){const j=r.split(".").map(k=>parseInt(k)||0),g=j[0]||0,_=j[1]||0,v=j[2]||0;if(c.version_major>g||c.version_major===g&&c.version_minor>_||c.version_major===g&&c.version_minor===_&&c.version_patch>v)return!1}return!0}function m2(n,r){const c=window.location.protocol==="https:"?"wss:":"ws:",d=window.location.host,h=new WebSocket(`${c}//${d}/api/webui/ws/plugin-progress`);return h.onopen=()=>{console.log("Plugin progress WebSocket connected");const x=setInterval(()=>{h.readyState===WebSocket.OPEN?h.send("ping"):clearInterval(x)},3e4)},h.onmessage=x=>{try{if(x.data==="pong")return;const f=JSON.parse(x.data);n(f)}catch(f){console.error("Failed to parse progress data:",f)}},h.onerror=x=>{console.error("Plugin progress WebSocket error:",x),r?.(x)},h.onclose=()=>{console.log("Plugin progress WebSocket disconnected")},h}async function cr(){try{const n=await ke("/api/webui/plugins/installed",{headers:ze()});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const r=await n.json();if(!r.success)throw new Error(r.message||"");return r.plugins||[]}catch(n){return console.error("Failed to get installed plugins:",n),[]}}function Yc(n,r){return r.some(c=>c.id===n)}function Xc(n,r){const c=r.find(d=>d.id===n);if(c)return c.manifest?.version||c.version}async function h2(n,r,c="main"){const d=await ke("/api/webui/plugins/install",{method:"POST",headers:ze(),body:JSON.stringify({plugin_id:n,repository_url:r,branch:c})});if(!d.ok){const h=await d.json();throw new Error(h.detail||"")}return await d.json()}async function x2(n){const r=await ke("/api/webui/plugins/uninstall",{method:"POST",headers:ze(),body:JSON.stringify({plugin_id:n})});if(!r.ok){const c=await r.json();throw new Error(c.detail||"")}return await r.json()}async function f2(n,r,c="main"){const d=await ke("/api/webui/plugins/update",{method:"POST",headers:ze(),body:JSON.stringify({plugin_id:n,repository_url:r,branch:c})});if(!d.ok){const h=await d.json();throw new Error(h.detail||"")}return await d.json()}async function p2(n){const r=await ke(`/api/webui/plugins/config/${n}/schema`,{headers:ze()});if(!r.ok){const d=await r.json();throw new Error(d.detail||" Schema ")}const c=await r.json();if(!c.success)throw new Error(c.message||" Schema ");return c.schema}async function g2(n){const r=await ke(`/api/webui/plugins/config/${n}`,{headers:ze()});if(!r.ok){const d=await r.json();throw new Error(d.detail||"")}const c=await r.json();if(!c.success)throw new Error(c.message||"");return c.config}async function j2(n,r){const c=await ke(`/api/webui/plugins/config/${n}`,{method:"PUT",headers:ze(),body:JSON.stringify({config:r})});if(!c.ok){const d=await c.json();throw new Error(d.detail||"")}return await c.json()}async function v2(n){const r=await ke(`/api/webui/plugins/config/${n}/reset`,{method:"POST",headers:ze()});if(!r.ok){const c=await r.json();throw new Error(c.detail||"")}return await r.json()}async function y2(n){const r=await ke(`/api/webui/plugins/config/${n}/toggle`,{method:"POST",headers:ze()});if(!r.ok){const c=await r.json();throw new Error(c.detail||"")}return await r.json()}const Cr="https://maibot-plugin-stats.maibot-webui.workers.dev";async function $g(n){try{const r=await fetch(`${Cr}/stats/${n}`);return r.ok?await r.json():(console.error("Failed to fetch plugin stats:",r.statusText),null)}catch(r){return console.error("Error fetching plugin stats:",r),null}}async function N2(n,r){try{const c=r||Wu(),d=await fetch(`${Cr}/stats/like`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({plugin_id:n,user_id:c})}),h=await d.json();return d.status===429?{success:!1,error:""}:d.ok?{success:!0,...h}:{success:!1,error:h.error||""}}catch(c){return console.error("Error liking plugin:",c),{success:!1,error:""}}}async function b2(n,r){try{const c=r||Wu(),d=await fetch(`${Cr}/stats/dislike`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({plugin_id:n,user_id:c})}),h=await d.json();return d.status===429?{success:!1,error:""}:d.ok?{success:!0,...h}:{success:!1,error:h.error||""}}catch(c){return console.error("Error disliking plugin:",c),{success:!1,error:""}}}async function w2(n,r,c,d){if(r<1||r>5)return{success:!1,error:" 1-5 "};try{const h=d||Wu(),x=await fetch(`${Cr}/stats/rate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({plugin_id:n,rating:r,comment:c,user_id:h})}),f=await x.json();return x.status===429?{success:!1,error:" 3 "}:x.ok?{success:!0,...f}:{success:!1,error:f.error||""}}catch(h){return console.error("Error rating plugin:",h),{success:!1,error:""}}}async function _2(n){try{const r=await fetch(`${Cr}/stats/download`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({plugin_id:n})}),c=await r.json();return r.status===429?(console.warn("Download recording rate limited"),{success:!0}):r.ok?{success:!0,...c}:(console.error("Failed to record download:",c.error),{success:!1,error:c.error})}catch(r){return console.error("Error recording download:",r),{success:!1,error:""}}}function S2(){const n=navigator,r=[navigator.userAgent,navigator.language,navigator.languages?.join(",")||"",navigator.platform,navigator.hardwareConcurrency||0,screen.width,screen.height,screen.colorDepth,screen.pixelDepth,new Date().getTimezoneOffset(),Intl.DateTimeFormat().resolvedOptions().timeZone,navigator.maxTouchPoints||0,n.deviceMemory||0].join("|");let c=0;for(let d=0;d<r.length;d++){const h=r.charCodeAt(d);c=(c<<5)-c+h,c=c&c}return`fp_${Math.abs(c).toString(36)}`}function Wu(){const n="maibot_user_id";let r=localStorage.getItem(n);if(!r){const c=S2(),d=Date.now().toString(36),h=Math.random().toString(36).substring(2,15);r=`${c}_${d}_${h}`,localStorage.setItem(n,r)}return r}function C2({pluginId:n,compact:r=!1}){const[c,d]=u.useState(null),[h,x]=u.useState(!0),[f,j]=u.useState(0),[g,_]=u.useState(""),[v,k]=u.useState(!1),{toast:z}=Bs(),T=async()=>{x(!0);const R=await $g(n);R&&d(R),x(!1)};u.useEffect(()=>{T()},[n]);const L=async()=>{const R=await N2(n);R.success?(z({title:"",description:""}),T()):z({title:"",description:R.error||"",variant:"destructive"})},K=async()=>{const R=await b2(n);R.success?(z({title:"",description:""}),T()):z({title:"",description:R.error||"",variant:"destructive"})},U=async()=>{if(f===0){z({title:"",description:" 1 ",variant:"destructive"});return}const R=await w2(n,f,g||void 0);R.success?(z({title:"",description:""}),k(!1),j(0),_(""),T()):z({title:"",description:R.error||"",variant:"destructive"})};return h?e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(nl,{className:"h-4 w-4"}),e.jsx("span",{children:"-"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ol,{className:"h-4 w-4"}),e.jsx("span",{children:"-"})]})]}):c?r?e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",title:`: ${c.downloads.toLocaleString()}`,children:[e.jsx(nl,{className:"h-4 w-4"}),e.jsx("span",{children:c.downloads.toLocaleString()})]}),e.jsxs("div",{className:"flex items-center gap-1",title:`: ${c.rating.toFixed(1)} (${c.rating_count} )`,children:[e.jsx(Ol,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),e.jsx("span",{children:c.rating.toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-1",title:`: ${c.likes}`,children:[e.jsx(Cu,{className:"h-4 w-4"}),e.jsx("span",{children:c.likes})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"flex flex-col items-center p-3 rounded-lg border bg-card",children:[e.jsx(nl,{className:"h-5 w-5 text-muted-foreground mb-1"}),e.jsx("span",{className:"text-2xl font-bold",children:c.downloads.toLocaleString()}),e.jsx("span",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"flex flex-col items-center p-3 rounded-lg border bg-card",children:[e.jsx(Ol,{className:"h-5 w-5 text-yellow-400 mb-1 fill-yellow-400"}),e.jsx("span",{className:"text-2xl font-bold",children:c.rating.toFixed(1)}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[c.rating_count," "]})]}),e.jsxs("div",{className:"flex flex-col items-center p-3 rounded-lg border bg-card",children:[e.jsx(Cu,{className:"h-5 w-5 text-green-500 mb-1"}),e.jsx("span",{className:"text-2xl font-bold",children:c.likes}),e.jsx("span",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"flex flex-col items-center p-3 rounded-lg border bg-card",children:[e.jsx(Xf,{className:"h-5 w-5 text-red-500 mb-1"}),e.jsx("span",{className:"text-2xl font-bold",children:c.dislikes}),e.jsx("span",{className:"text-xs text-muted-foreground",children:""})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(N,{variant:"outline",size:"sm",onClick:L,children:[e.jsx(Cu,{className:"h-4 w-4 mr-1"}),""]}),e.jsxs(N,{variant:"outline",size:"sm",onClick:K,children:[e.jsx(Xf,{className:"h-4 w-4 mr-1"}),""]}),e.jsxs(Os,{open:v,onOpenChange:k,children:[e.jsx(ni,{asChild:!0,children:e.jsxs(N,{variant:"default",size:"sm",children:[e.jsx(Ol,{className:"h-4 w-4 mr-1"}),""]})}),e.jsxs(Es,{children:[e.jsxs(zs,{children:[e.jsx(Ms,{children:""}),e.jsx($s,{children:""})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:"flex gap-2",children:[1,2,3,4,5].map(R=>e.jsx("button",{onClick:()=>j(R),className:"focus:outline-none",children:e.jsx(Ol,{className:`h-8 w-8 transition-colors ${R<=f?"fill-yellow-400 text-yellow-400":"text-muted-foreground hover:text-yellow-300"}`})},R))}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[f===0&&"",f===1&&"",f===2&&"",f===3&&"",f===4&&"",f===5&&""]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:""}),e.jsx(Us,{value:g,onChange:R=>_(R.target.value),placeholder:"...",rows:4,maxLength:500}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-1 text-right",children:[g.length," / 500"]})]})]}),e.jsxs(Is,{children:[e.jsx(N,{variant:"outline",onClick:()=>k(!1),children:""}),e.jsx(N,{onClick:U,disabled:f===0,children:""})]})]})]})]}),c.recent_ratings&&c.recent_ratings.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-semibold",children:""}),e.jsx("div",{className:"space-y-3",children:c.recent_ratings.map((R,ee)=>e.jsxs("div",{className:"p-3 rounded-lg border bg-muted/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(V=>e.jsx(Ol,{className:`h-3 w-3 ${V<=R.rating?"fill-yellow-400 text-yellow-400":"text-muted-foreground"}`},V))}),e.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(R.created_at).toLocaleDateString()})]}),R.comment&&e.jsx("p",{className:"text-sm text-muted-foreground",children:R.comment})]},ee))})]})]}):null}const gp={"Group Management":"","Entertainment & Interaction":"","Utility Tools":"","Content Generation":"",Multimedia:"","External Integration":"","Data Analysis & Insights":"",Other:""};function k2(){const n=It(),[r,c]=u.useState(null),[d,h]=u.useState(""),[x,f]=u.useState("all"),[j,g]=u.useState("all"),[_,v]=u.useState(!0),[k,z]=u.useState([]),[T,L]=u.useState(!0),[K,U]=u.useState(null),[R,ee]=u.useState(null),[V,E]=u.useState(null),[B,X]=u.useState(null),[,w]=u.useState([]),[D,te]=u.useState({}),{toast:xe}=Bs(),be=async S=>{const me=S.map(async oe=>{try{const ge=await $g(oe.id);return{id:oe.id,stats:ge}}catch(ge){return console.warn(`Failed to load stats for ${oe.id}:`,ge),{id:oe.id,stats:null}}}),he=await Promise.all(me),Q={};he.forEach(({id:oe,stats:ge})=>{ge&&(Q[oe]=ge)}),te(Q)};u.useEffect(()=>{let S=null,me=!1;return(async()=>{if(S=m2(Q=>{me||(E(Q),Q.stage==="success"?setTimeout(()=>{me||E(null)},2e3):Q.stage==="error"&&(L(!1),U(Q.error||"")))},Q=>{console.error("WebSocket error:",Q),me||xe({title:"WebSocket ",description:"",variant:"destructive"})}),await new Promise(Q=>{if(!S){Q();return}const oe=()=>{S&&S.readyState===WebSocket.OPEN?(console.log("WebSocket connected, starting to load plugins"),Q()):S&&S.readyState===WebSocket.CLOSED?(console.warn("WebSocket closed before loading plugins"),Q()):setTimeout(oe,100)};oe()}),!me){const Q=await o2();ee(Q),Q.installed||xe({title:"Git ",description:Q.error||" Git ",variant:"destructive"})}if(!me){const Q=await d2();X(Q)}if(!me)try{L(!0),U(null);const Q=await c2();if(!me){const oe=await cr();w(oe);const ge=Q.map(le=>{const O=Yc(le.id,oe),F=Xc(le.id,oe);return{...le,installed:O,installed_version:F}});for(const le of oe)!ge.some(F=>F.id===le.id)&&le.manifest&&ge.push({id:le.id,manifest:{manifest_version:le.manifest.manifest_version||1,name:le.manifest.name,version:le.manifest.version,description:le.manifest.description||"",author:le.manifest.author,license:le.manifest.license||"Unknown",host_application:le.manifest.host_application,homepage_url:le.manifest.homepage_url,repository_url:le.manifest.repository_url,keywords:le.manifest.keywords||[],categories:le.manifest.categories||[],default_locale:le.manifest.default_locale||"zh-CN",locales_path:le.manifest.locales_path},downloads:0,rating:0,review_count:0,installed:!0,installed_version:le.manifest.version,published_at:new Date().toISOString(),updated_at:new Date().toISOString()});z(ge),be(ge)}}catch(Q){if(!me){const oe=Q instanceof Error?Q.message:"";U(oe),xe({title:"",description:oe,variant:"destructive"})}}finally{me||L(!1)}})(),()=>{me=!0,S&&S.close()}},[xe]);const ye=S=>{if(!S.installed&&B&&!ve(S))return e.jsxs(Xe,{variant:"destructive",className:"gap-1",children:[e.jsx(Aa,{className:"h-3 w-3"}),""]});if(S.installed){const me=S.installed_version?.trim(),he=S.manifest.version?.trim();if(me!==he){const Q=me?.split(".").map(Number)||[0,0,0],oe=he?.split(".").map(Number)||[0,0,0];for(let ge=0;ge<3;ge++){if((oe[ge]||0)>(Q[ge]||0))return e.jsxs(Xe,{variant:"outline",className:"gap-1 text-orange-600 border-orange-600",children:[e.jsx(Aa,{className:"h-3 w-3"}),""]});if((oe[ge]||0)<(Q[ge]||0))break}}return e.jsxs(Xe,{variant:"default",className:"gap-1",children:[e.jsx(xa,{className:"h-3 w-3"}),""]})}return null},ve=S=>!B||!S.manifest?.host_application?!0:u2(S.manifest.host_application.min_version,S.manifest.host_application.max_version,B),pe=S=>{if(!S.installed||!S.installed_version||!S.manifest?.version)return!1;const me=S.installed_version.trim(),he=S.manifest.version.trim();if(me===he)return!1;const Q=me.split(".").map(Number),oe=he.split(".").map(Number);for(let ge=0;ge<3;ge++){if((oe[ge]||0)>(Q[ge]||0))return!0;if((oe[ge]||0)<(Q[ge]||0))return!1}return!1},Ne=k.filter(S=>{if(!S.manifest)return console.warn("[]  manifest :",S.id),!1;const me=d===""||S.manifest.name?.toLowerCase().includes(d.toLowerCase())||S.manifest.description?.toLowerCase().includes(d.toLowerCase())||S.manifest.keywords&&S.manifest.keywords.some(ge=>ge.toLowerCase().includes(d.toLowerCase())),he=x==="all"||S.manifest.categories&&S.manifest.categories.includes(x);let Q=!0;j==="installed"?Q=S.installed===!0:j==="updates"&&(Q=S.installed===!0&&pe(S));const oe=!_||!B||ve(S);return me&&he&&Q&&oe}),y=()=>{c(null)},q=async S=>{if(!R?.installed){xe({title:"",description:"Git ",variant:"destructive"});return}if(B&&!ve(S)){xe({title:"",description:"",variant:"destructive"});return}try{await h2(S.id,S.manifest.repository_url||"","main"),_2(S.id).catch(he=>{console.warn("Failed to record download:",he)}),xe({title:"",description:`${S.manifest.name} `});const me=await cr();w(me),z(he=>he.map(Q=>{if(Q.id===S.id){const oe=Yc(Q.id,me),ge=Xc(Q.id,me);return{...Q,installed:oe,installed_version:ge}}return Q}))}catch(me){xe({title:"",description:me instanceof Error?me.message:"",variant:"destructive"})}},H=async S=>{try{await x2(S.id),xe({title:"",description:`${S.manifest.name} `});const me=await cr();w(me),z(he=>he.map(Q=>{if(Q.id===S.id){const oe=Yc(Q.id,me),ge=Xc(Q.id,me);return{...Q,installed:oe,installed_version:ge}}return Q}))}catch(me){xe({title:"",description:me instanceof Error?me.message:"",variant:"destructive"})}},ne=async S=>{if(!R?.installed){xe({title:"",description:"Git ",variant:"destructive"});return}try{const me=await f2(S.id,S.manifest.repository_url||"","main");xe({title:"",description:`${S.manifest.name}  ${me.old_version}  ${me.new_version}`});const he=await cr();w(he),z(Q=>Q.map(oe=>{if(oe.id===S.id){const ge=Yc(oe.id,he),le=Xc(oe.id,he);return{...oe,installed:ge,installed_version:le}}return oe}))}catch(me){xe({title:"",description:me instanceof Error?me.message:"",variant:"destructive"})}};return e.jsx(es,{className:"h-full",children:e.jsxs("div",{className:"space-y-6 p-4 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:""}),e.jsx("p",{className:"text-muted-foreground mt-2",children:""})]}),e.jsxs(N,{onClick:()=>n({to:"/plugin-mirrors"}),children:[e.jsx(FN,{className:"h-4 w-4 mr-2"}),""]})]}),R&&!R.installed&&e.jsxs(Be,{className:"border-orange-600 bg-orange-50 dark:bg-orange-950/20",children:[e.jsx(gs,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ya,{className:"h-5 w-5 text-orange-600"}),e.jsxs("div",{children:[e.jsx(js,{className:"text-lg text-orange-900 dark:text-orange-100",children:"Git "}),e.jsx(Zs,{className:"text-orange-800 dark:text-orange-200",children:R.error||" Git "})]})]})}),e.jsx(bs,{children:e.jsxs("p",{className:"text-sm text-orange-800 dark:text-orange-200",children:[" ",e.jsx("a",{href:"https://git-scm.com/downloads",target:"_blank",rel:"noopener noreferrer",className:"underline font-medium",children:"git-scm.com"}),"  Git "]})})]}),e.jsx(Be,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(St,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(ce,{placeholder:"...",value:d,onChange:S=>h(S.target.value),className:"pl-9"})]}),e.jsxs(Qe,{value:x,onValueChange:f,children:[e.jsx(Ge,{className:"w-full sm:w-[200px]",children:e.jsx($e,{placeholder:""})}),e.jsxs(Ve,{children:[e.jsx(ue,{value:"all",children:""}),e.jsx(ue,{value:"Group Management",children:""}),e.jsx(ue,{value:"Entertainment & Interaction",children:""}),e.jsx(ue,{value:"Utility Tools",children:""}),e.jsx(ue,{value:"Content Generation",children:""}),e.jsx(ue,{value:"Multimedia",children:""}),e.jsx(ue,{value:"External Integration",children:""}),e.jsx(ue,{value:"Data Analysis & Insights",children:""}),e.jsx(ue,{value:"Other",children:""})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(yt,{id:"compatible-only",checked:_,onCheckedChange:S=>v(S===!0)}),e.jsx("label",{htmlFor:"compatible-only",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer",children:""})]})]})}),e.jsx(Kt,{value:j,onValueChange:g,className:"w-full",children:e.jsxs(Rt,{className:"grid w-full grid-cols-3",children:[e.jsxs(He,{value:"all",children:[" (",k.filter(S=>{if(!S.manifest)return!1;const me=d===""||S.manifest.name?.toLowerCase().includes(d.toLowerCase())||S.manifest.description?.toLowerCase().includes(d.toLowerCase())||S.manifest.keywords&&S.manifest.keywords.some(oe=>oe.toLowerCase().includes(d.toLowerCase())),he=x==="all"||S.manifest.categories&&S.manifest.categories.includes(x),Q=!_||!B||ve(S);return me&&he&&Q}).length,")"]}),e.jsxs(He,{value:"installed",children:[" (",k.filter(S=>{if(!S.manifest)return!1;const me=d===""||S.manifest.name?.toLowerCase().includes(d.toLowerCase())||S.manifest.description?.toLowerCase().includes(d.toLowerCase())||S.manifest.keywords&&S.manifest.keywords.some(oe=>oe.toLowerCase().includes(d.toLowerCase())),he=x==="all"||S.manifest.categories&&S.manifest.categories.includes(x),Q=!_||!B||ve(S);return S.installed&&me&&he&&Q}).length,")"]}),e.jsxs(He,{value:"updates",children:[" (",k.filter(S=>{if(!S.manifest)return!1;const me=d===""||S.manifest.name?.toLowerCase().includes(d.toLowerCase())||S.manifest.description?.toLowerCase().includes(d.toLowerCase())||S.manifest.keywords&&S.manifest.keywords.some(oe=>oe.toLowerCase().includes(d.toLowerCase())),he=x==="all"||S.manifest.categories&&S.manifest.categories.includes(x),Q=!_||!B||ve(S);return S.installed&&pe(S)&&me&&he&&Q}).length,")"]})]})}),V&&V.stage==="loading"&&e.jsx(Be,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(vt,{className:"h-4 w-4 animate-spin"}),e.jsxs("span",{className:"text-sm font-medium",children:[V.operation==="fetch"&&"",V.operation==="install"&&`${V.plugin_id?`: ${V.plugin_id}`:""}`,V.operation==="uninstall"&&`${V.plugin_id?`: ${V.plugin_id}`:""}`,V.operation==="update"&&`${V.plugin_id?`: ${V.plugin_id}`:""}`]})]}),e.jsxs("span",{className:"text-sm font-medium",children:[V.progress,"%"]})]}),e.jsx(Sr,{value:V.progress,className:"h-2"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:V.message}),V.operation==="fetch"&&V.total_plugins>0&&e.jsxs("div",{className:"text-xs text-muted-foreground text-center",children:[" ",V.loaded_plugins," / ",V.total_plugins," "]})]})}),V&&V.stage==="error"&&V.error&&e.jsx(Be,{className:"border-destructive bg-destructive/10",children:e.jsx(gs,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ya,{className:"h-5 w-5 text-destructive"}),e.jsxs("div",{children:[e.jsx(js,{className:"text-lg text-destructive",children:""}),e.jsx(Zs,{className:"text-destructive/80",children:V.error})]})]})})}),T?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx(vt,{className:"h-8 w-8 animate-spin text-muted-foreground"}),e.jsx("span",{className:"ml-3 text-muted-foreground",children:"..."})]}):K?e.jsx(Be,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[e.jsx(ya,{className:"h-12 w-12 text-destructive mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:K}),e.jsx(N,{onClick:()=>window.location.reload(),children:""})]})}):Ne.length===0?e.jsx(Be,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[e.jsx(St,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:d||x!=="all"?"":""})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Ne.map(S=>e.jsxs(Be,{className:"flex flex-col hover:shadow-lg transition-shadow h-full",children:[e.jsxs(gs,{children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx(js,{className:"text-xl",children:S.manifest?.name||S.id}),e.jsxs("div",{className:"flex flex-col gap-1",children:[S.manifest?.categories&&S.manifest.categories[0]&&e.jsx(Xe,{variant:"secondary",className:"text-xs whitespace-nowrap",children:gp[S.manifest.categories[0]]||S.manifest.categories[0]}),ye(S)]})]}),e.jsx(Zs,{className:"line-clamp-2",children:S.manifest?.description||""})]}),e.jsx(bs,{className:"flex-1",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(nl,{className:"h-4 w-4"}),e.jsx("span",{children:(D[S.id]?.downloads??S.downloads??0).toLocaleString()})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ol,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),e.jsx("span",{children:(D[S.id]?.rating??S.rating??0).toFixed(1)})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[S.manifest?.keywords&&S.manifest.keywords.slice(0,3).map(me=>e.jsx(Xe,{variant:"outline",className:"text-xs",children:me},me)),S.manifest?.keywords&&S.manifest.keywords.length>3&&e.jsxs(Xe,{variant:"outline",className:"text-xs",children:["+",S.manifest.keywords.length-3]})]}),e.jsxs("div",{className:"text-xs text-muted-foreground pt-2 border-t space-y-1",children:[e.jsxs("div",{children:["v",S.manifest?.version||"unknown","  ",S.manifest?.author?.name||"Unknown"]}),S.manifest?.host_application&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{children:":"}),e.jsxs("span",{className:"font-medium",children:[S.manifest.host_application.min_version,S.manifest.host_application.max_version?` - ${S.manifest.host_application.max_version}`:" - "]})]})]})]})}),e.jsx(wg,{className:"pt-4",children:e.jsxs("div",{className:"flex items-center justify-end gap-2 w-full",children:[e.jsx(N,{variant:"outline",size:"sm",onClick:()=>c(S),children:""}),S.installed?pe(S)?e.jsxs(N,{size:"sm",disabled:!R?.installed,title:R?.installed?void 0:"Git ",onClick:()=>ne(S),children:[e.jsx(ft,{className:"h-4 w-4 mr-1"}),""]}):e.jsxs(N,{variant:"destructive",size:"sm",disabled:!R?.installed,title:R?.installed?void 0:"Git ",onClick:()=>H(S),children:[e.jsx(ns,{className:"h-4 w-4 mr-1"}),""]}):e.jsxs(N,{size:"sm",disabled:!R?.installed||V?.operation==="install"||B!==null&&!ve(S),title:R?.installed?B!==null&&!ve(S)?` ( ${S.manifest?.host_application?.min_version||""}${S.manifest?.host_application?.max_version?` - ${S.manifest.host_application.max_version}`:"+"} ${B?.version})`:void 0:"Git ",onClick:()=>q(S),children:[e.jsx(nl,{className:"h-4 w-4 mr-1"}),V?.operation==="install"&&V?.plugin_id===S.id?"...":""]})]})})]},S.id))}),e.jsx(Os,{open:r!==null,onOpenChange:y,children:r&&r.manifest&&e.jsxs(Es,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsx(zs,{children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"space-y-2 flex-1",children:[e.jsx(Ms,{className:"text-2xl",children:r.manifest.name}),e.jsxs($s,{children:[": ",r.manifest.author?.name||"Unknown",r.manifest.author?.url&&e.jsx("a",{href:r.manifest.author.url,target:"_blank",rel:"noopener noreferrer",className:"ml-2 text-primary hover:underline",children:e.jsx(dr,{className:"h-3 w-3 inline"})})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[r.manifest.categories&&r.manifest.categories[0]&&e.jsx(Xe,{variant:"secondary",children:gp[r.manifest.categories[0]]||r.manifest.categories[0]}),ye(r)]})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(C2,{pluginId:r.id}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:""}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["v",r.manifest?.version||"unknown"]}),r.installed&&r.installed_version&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:[": v",r.installed_version]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:(D[r.id]?.downloads??r.downloads??0).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:""}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ol,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[(D[r.id]?.rating??r.rating??0).toFixed(1)," (",D[r.id]?.rating_count??r.review_count??0,")"]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:r.manifest.license||"Unknown"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("p",{className:"text-sm font-medium",children:""}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[r.manifest.host_application?.min_version||"",r.manifest.host_application?.max_version?` - ${r.manifest.host_application.max_version}`:" - "]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:""}),e.jsx("div",{className:"flex flex-wrap gap-2",children:r.manifest.keywords&&r.manifest.keywords.map(S=>e.jsx(Xe,{variant:"outline",children:S},S))})]}),r.detailed_description&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-line",children:r.detailed_description})]}),!r.detailed_description&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:r.manifest.description||""})]}),e.jsxs("div",{className:"space-y-2",children:[r.manifest.homepage_url&&e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:": "}),e.jsx("a",{href:r.manifest.homepage_url,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:r.manifest.homepage_url})]}),r.manifest.repository_url&&e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:": "}),e.jsx("a",{href:r.manifest.repository_url,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:r.manifest.repository_url})]})]})]}),e.jsxs(Is,{children:[r.manifest.homepage_url&&e.jsxs(N,{onClick:()=>window.open(r.manifest.homepage_url,"_blank"),children:[e.jsx(dr,{className:"h-4 w-4 mr-2"}),""]}),r.manifest.repository_url&&e.jsxs(N,{variant:"outline",onClick:()=>window.open(r.manifest.repository_url,"_blank"),children:[e.jsx(dr,{className:"h-4 w-4 mr-2"}),""]})]})]})})]})})}const Gu=Fy,Vu=Qy,Fu=$y;function T2({field:n,value:r,onChange:c}){const[d,h]=u.useState(!1);switch(n.ui_type){case"switch":return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(b,{children:n.label}),n.hint&&e.jsx("p",{className:"text-xs text-muted-foreground",children:n.hint})]}),e.jsx(qe,{checked:!!r,onCheckedChange:c,disabled:n.disabled})]});case"number":return e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{children:n.label}),e.jsx(ce,{type:"number",value:r??n.default,onChange:x=>c(parseFloat(x.target.value)||0),min:n.min,max:n.max,step:n.step??1,placeholder:n.placeholder,disabled:n.disabled}),n.hint&&e.jsx("p",{className:"text-xs text-muted-foreground",children:n.hint})]});case"slider":return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(b,{children:n.label}),e.jsx("span",{className:"text-sm text-muted-foreground",children:r??n.default})]}),e.jsx(za,{value:[r??n.default],onValueChange:x=>c(x[0]),min:n.min??0,max:n.max??100,step:n.step??1,disabled:n.disabled}),n.hint&&e.jsx("p",{className:"text-xs text-muted-foreground",children:n.hint})]});case"select":return e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{children:n.label}),e.jsxs(Qe,{value:String(r??n.default),onValueChange:c,disabled:n.disabled,children:[e.jsx(Ge,{children:e.jsx($e,{placeholder:n.placeholder??""})}),e.jsx(Ve,{children:n.choices?.map(x=>e.jsx(ue,{value:String(x),children:String(x)},String(x)))})]}),n.hint&&e.jsx("p",{className:"text-xs text-muted-foreground",children:n.hint})]});case"textarea":return e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{children:n.label}),e.jsx(Us,{value:r??n.default,onChange:x=>c(x.target.value),placeholder:n.placeholder,rows:n.rows??3,disabled:n.disabled}),n.hint&&e.jsx("p",{className:"text-xs text-muted-foreground",children:n.hint})]});case"password":return e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{children:n.label}),e.jsxs("div",{className:"relative",children:[e.jsx(ce,{type:d?"text":"password",value:r??"",onChange:x=>c(x.target.value),placeholder:n.placeholder,disabled:n.disabled,className:"pr-10"}),e.jsx(N,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full px-3",onClick:()=>h(!d),children:d?e.jsx(mr,{className:"h-4 w-4"}):e.jsx(Zt,{className:"h-4 w-4"})})]}),n.hint&&e.jsx("p",{className:"text-xs text-muted-foreground",children:n.hint})]});case"text":default:return e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{children:n.label}),e.jsx(ce,{type:"text",value:r??n.default??"",onChange:x=>c(x.target.value),placeholder:n.placeholder,maxLength:n.max_length,disabled:n.disabled}),n.hint&&e.jsx("p",{className:"text-xs text-muted-foreground",children:n.hint})]})}}function jp({section:n,config:r,onChange:c}){const[d,h]=u.useState(!n.collapsed),x=Object.entries(n.fields).filter(([,f])=>!f.hidden).sort(([,f],[,j])=>f.order-j.order);return e.jsx(Gu,{open:d,onOpenChange:h,children:e.jsxs(Be,{children:[e.jsx(Vu,{asChild:!0,children:e.jsxs(gs,{className:"cursor-pointer hover:bg-muted/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[d?e.jsx(Ll,{className:"h-4 w-4 text-muted-foreground"}):e.jsx(il,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(js,{className:"text-lg",children:n.title})]}),e.jsxs(Xe,{variant:"secondary",className:"text-xs",children:[x.length," "]})]}),n.description&&e.jsx(Zs,{className:"ml-6",children:n.description})]})}),e.jsx(Fu,{children:e.jsx(bs,{className:"space-y-4 pt-0",children:x.map(([f,j])=>e.jsx(T2,{field:j,value:r[n.name]?.[f],onChange:g=>c(n.name,f,g),sectionName:n.name},f))})})]})})}function E2({plugin:n,onBack:r}){const{toast:c}=Bs(),[d,h]=u.useState(null),[x,f]=u.useState({}),[j,g]=u.useState({}),[_,v]=u.useState(!0),[k,z]=u.useState(!1),[T,L]=u.useState(!1),[K,U]=u.useState(!1),R=u.useCallback(async()=>{v(!0);try{const[D,te]=await Promise.all([p2(n.id),g2(n.id)]);h(D),f(te),g(JSON.parse(JSON.stringify(te)))}catch(D){c({title:"",description:D instanceof Error?D.message:"",variant:"destructive"})}finally{v(!1)}},[n.id,c]);u.useEffect(()=>{R()},[R]),u.useEffect(()=>{L(JSON.stringify(x)!==JSON.stringify(j))},[x,j]);const ee=(D,te,xe)=>{f(be=>({...be,[D]:{...be[D]||{},[te]:xe}}))},V=async()=>{z(!0);try{await j2(n.id,x),g(JSON.parse(JSON.stringify(x))),c({title:"",description:""})}catch(D){c({title:"",description:D instanceof Error?D.message:"",variant:"destructive"})}finally{z(!1)}},E=async()=>{try{await v2(n.id),c({title:"",description:""}),U(!1),R()}catch(D){c({title:"",description:D instanceof Error?D.message:"",variant:"destructive"})}},B=async()=>{try{const D=await y2(n.id);c({title:D.message,description:D.note}),R()}catch(D){c({title:"",description:D instanceof Error?D.message:"",variant:"destructive"})}};if(_)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(vt,{className:"h-8 w-8 animate-spin text-muted-foreground"})});if(!d)return e.jsxs("div",{className:"flex flex-col items-center justify-center h-64 space-y-4",children:[e.jsx(Aa,{className:"h-12 w-12 text-muted-foreground"}),e.jsx("p",{className:"text-muted-foreground",children:""}),e.jsxs(N,{onClick:r,variant:"outline",children:[e.jsx(ti,{className:"h-4 w-4 mr-2"}),""]})]});const X=Object.values(d.sections).sort((D,te)=>D.order-te.order),w=x.plugin?.enabled!==!1;return e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(N,{variant:"ghost",size:"icon",onClick:r,children:e.jsx(ti,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:d.plugin_info.name||n.manifest.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(Xe,{variant:w?"default":"secondary",children:w?"":""}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["v",d.plugin_info.version||n.manifest.version]})]})]})]}),e.jsxs("div",{className:"flex gap-2 ml-10 sm:ml-0",children:[e.jsxs(N,{variant:"outline",size:"sm",onClick:B,children:[e.jsx(Nr,{className:"h-4 w-4 mr-2"}),w?"":""]}),e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>U(!0),children:[e.jsx(Wc,{className:"h-4 w-4 mr-2"}),""]}),e.jsxs(N,{size:"sm",onClick:V,disabled:!T||k,children:[k?e.jsx(vt,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(br,{className:"h-4 w-4 mr-2"}),""]})]})]}),T&&e.jsx(Be,{className:"border-orange-200 bg-orange-50 dark:bg-orange-950/20 dark:border-orange-900",children:e.jsx(bs,{className:"py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Xt,{className:"h-4 w-4 text-orange-600"}),e.jsx("p",{className:"text-sm text-orange-800 dark:text-orange-200",children:""})]})})}),d.layout.type==="tabs"&&d.layout.tabs.length>0?e.jsxs(Kt,{defaultValue:d.layout.tabs[0]?.id,children:[e.jsx(Rt,{children:d.layout.tabs.map(D=>e.jsxs(He,{value:D.id,children:[D.title,D.badge&&e.jsx(Xe,{variant:"secondary",className:"ml-2 text-xs",children:D.badge})]},D.id))}),d.layout.tabs.map(D=>e.jsx(We,{value:D.id,className:"space-y-4 mt-4",children:D.sections.map(te=>{const xe=d.sections[te];return xe?e.jsx(jp,{section:xe,config:x,onChange:ee},te):null})},D.id))]}):e.jsx("div",{className:"space-y-4",children:X.map(D=>e.jsx(jp,{section:D,config:x,onChange:ee},D.name))}),e.jsx(Os,{open:K,onOpenChange:U,children:e.jsxs(Es,{children:[e.jsxs(zs,{children:[e.jsx(Ms,{children:""}),e.jsx($s,{children:""})]}),e.jsxs(Is,{children:[e.jsx(N,{variant:"outline",onClick:()=>U(!1),children:""}),e.jsx(N,{variant:"destructive",onClick:E,children:""})]})]})})]})}function z2(){const{toast:n}=Bs(),[r,c]=u.useState([]),[d,h]=u.useState(!0),[x,f]=u.useState(""),[j,g]=u.useState(null),_=async()=>{h(!0);try{const T=await cr();c(T)}catch(T){n({title:"",description:T instanceof Error?T.message:"",variant:"destructive"})}finally{h(!1)}};u.useEffect(()=>{_()},[]);const v=r.filter(T=>{const L=x.toLowerCase();return T.id.toLowerCase().includes(L)||T.manifest.name.toLowerCase().includes(L)||T.manifest.description?.toLowerCase().includes(L)}),k=r.length,z=0;return j?e.jsx(es,{className:"h-full",children:e.jsx("div",{className:"p-4 sm:p-6",children:e.jsx(E2,{plugin:j,onBack:()=>g(null)})})}):e.jsx(es,{className:"h-full",children:e.jsxs("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:""}),e.jsx("p",{className:"text-muted-foreground mt-1 sm:mt-2 text-sm sm:text-base",children:""})]}),e.jsxs(N,{variant:"outline",size:"sm",onClick:_,children:[e.jsx(ft,{className:`h-4 w-4 mr-2 ${d?"animate-spin":""}`}),""]})]}),e.jsxs("div",{className:"grid gap-4 grid-cols-1 xs:grid-cols-2 lg:grid-cols-3",children:[e.jsxs(Be,{children:[e.jsxs(gs,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(js,{className:"text-sm font-medium",children:""}),e.jsx(rn,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(bs,{children:[e.jsx("div",{className:"text-2xl font-bold",children:r.length}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:d?"...":""})]})]}),e.jsxs(Be,{children:[e.jsxs(gs,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(js,{className:"text-sm font-medium",children:""}),e.jsx(xa,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(bs,{children:[e.jsx("div",{className:"text-2xl font-bold",children:k}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:""})]})]}),e.jsxs(Be,{children:[e.jsxs(gs,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(js,{className:"text-sm font-medium",children:""}),e.jsx(Aa,{className:"h-4 w-4 text-orange-600"})]}),e.jsxs(bs,{children:[e.jsx("div",{className:"text-2xl font-bold",children:z}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:""})]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(St,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(ce,{placeholder:"...",value:x,onChange:T=>f(T.target.value),className:"pl-9"})]}),e.jsxs(Be,{children:[e.jsxs(gs,{children:[e.jsx(js,{children:""}),e.jsx(Zs,{children:""})]}),e.jsx(bs,{children:d?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(vt,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):v.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 space-y-4",children:[e.jsx(rn,{className:"h-16 w-16 text-muted-foreground/50"}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("p",{className:"text-lg font-medium text-muted-foreground",children:x?"":""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:x?"":""})]})]}):e.jsx("div",{className:"space-y-2",children:v.map(T=>e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border hover:bg-muted/50 cursor-pointer transition-colors",onClick:()=>g(T),children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsx("div",{className:"h-10 w-10 rounded-lg bg-primary/10 flex items-center justify-center flex-shrink-0",children:e.jsx(rn,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-medium truncate",children:T.manifest.name}),e.jsxs(Xe,{variant:"secondary",className:"text-xs flex-shrink-0",children:["v",T.manifest.version]})]}),e.jsx("p",{className:"text-sm text-muted-foreground truncate",children:T.manifest.description||""})]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e.jsx(N,{variant:"ghost",size:"sm",children:e.jsx(Rl,{className:"h-4 w-4"})}),e.jsx(il,{className:"h-4 w-4 text-muted-foreground"})]})]},T.id))})})]})]})})}function M2(){const n=It(),{toast:r}=Bs(),[c,d]=u.useState([]),[h,x]=u.useState(!0),[f,j]=u.useState(null),[g,_]=u.useState(null),[v,k]=u.useState(!1),[z,T]=u.useState(!1),[L,K]=u.useState({id:"",name:"",raw_prefix:"",clone_prefix:"",enabled:!0,priority:1}),U=u.useCallback(async()=>{try{x(!0),j(null);const w=localStorage.getItem("access-token"),D=await fetch("/api/webui/plugins/mirrors",{headers:{Authorization:`Bearer ${w}`}});if(!D.ok)throw new Error("");const te=await D.json();d(te.mirrors||[])}catch(w){const D=w instanceof Error?w.message:"";j(D),r({title:"",description:D,variant:"destructive"})}finally{x(!1)}},[r]);u.useEffect(()=>{U()},[U]);const R=async()=>{try{const w=localStorage.getItem("access-token"),D=await fetch("/api/webui/plugins/mirrors",{method:"POST",headers:{Authorization:`Bearer ${w}`,"Content-Type":"application/json"},body:JSON.stringify(L)});if(!D.ok){const te=await D.json();throw new Error(te.detail||"")}r({title:"",description:""}),k(!1),K({id:"",name:"",raw_prefix:"",clone_prefix:"",enabled:!0,priority:1}),U()}catch(w){r({title:"",description:w instanceof Error?w.message:"",variant:"destructive"})}},ee=async()=>{if(g)try{const w=localStorage.getItem("access-token");if(!(await fetch(`/api/webui/plugins/mirrors/${g.id}`,{method:"PUT",headers:{Authorization:`Bearer ${w}`,"Content-Type":"application/json"},body:JSON.stringify({name:L.name,raw_prefix:L.raw_prefix,clone_prefix:L.clone_prefix,enabled:L.enabled,priority:L.priority})})).ok)throw new Error("");r({title:"",description:""}),T(!1),_(null),U()}catch(w){r({title:"",description:w instanceof Error?w.message:"",variant:"destructive"})}},V=async w=>{if(confirm(""))try{const D=localStorage.getItem("access-token");if(!(await fetch(`/api/webui/plugins/mirrors/${w}`,{method:"DELETE",headers:{Authorization:`Bearer ${D}`}})).ok)throw new Error("");r({title:"",description:""}),U()}catch(D){r({title:"",description:D instanceof Error?D.message:"",variant:"destructive"})}},E=async w=>{try{const D=localStorage.getItem("access-token");if(!(await fetch(`/api/webui/plugins/mirrors/${w.id}`,{method:"PUT",headers:{Authorization:`Bearer ${D}`,"Content-Type":"application/json"},body:JSON.stringify({enabled:!w.enabled})})).ok)throw new Error("");U()}catch(D){r({title:"",description:D instanceof Error?D.message:"",variant:"destructive"})}},B=w=>{_(w),K({id:w.id,name:w.name,raw_prefix:w.raw_prefix,clone_prefix:w.clone_prefix,enabled:w.enabled,priority:w.priority}),T(!0)},X=async(w,D)=>{const te=D==="up"?w.priority-1:w.priority+1;if(!(te<1))try{const xe=localStorage.getItem("access-token");if(!(await fetch(`/api/webui/plugins/mirrors/${w.id}`,{method:"PUT",headers:{Authorization:`Bearer ${xe}`,"Content-Type":"application/json"},body:JSON.stringify({priority:te})})).ok)throw new Error("");U()}catch(xe){r({title:"",description:xe instanceof Error?xe.message:"",variant:"destructive"})}};return e.jsx(es,{className:"h-full",children:e.jsxs("div",{className:"space-y-6 p-4 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(N,{variant:"ghost",size:"icon",onClick:()=>n({to:"/plugins"}),children:e.jsx(ti,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:" Git "})]})]}),e.jsxs(N,{onClick:()=>k(!0),children:[e.jsx(gt,{className:"h-4 w-4 mr-2"}),""]})]}),h?e.jsx(Be,{className:"p-6",children:e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(vt,{className:"h-8 w-8 animate-spin text-primary"})})}):f?e.jsx(Be,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[e.jsx(ya,{className:"h-12 w-12 text-destructive mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:f}),e.jsx(N,{onClick:U,children:""})]})}):e.jsxs(Be,{children:[e.jsx("div",{className:"hidden md:block",children:e.jsxs(ii,{children:[e.jsx(ri,{children:e.jsxs(pt,{children:[e.jsx(ls,{children:""}),e.jsx(ls,{children:""}),e.jsx(ls,{children:"ID"}),e.jsx(ls,{children:""}),e.jsx(ls,{className:"text-right",children:""})]})}),e.jsx(ci,{children:c.map(w=>e.jsxs(pt,{children:[e.jsx(Ye,{children:e.jsx(qe,{checked:w.enabled,onCheckedChange:()=>E(w)})}),e.jsx(Ye,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:w.name}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Raw: ",w.raw_prefix]})]})}),e.jsx(Ye,{children:e.jsx(Xe,{variant:"outline",children:w.id})}),e.jsx(Ye,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-mono",children:w.priority}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx(N,{variant:"ghost",size:"icon",className:"h-5 w-5",onClick:()=>X(w,"up"),disabled:w.priority===1,children:e.jsx(fr,{className:"h-3 w-3"})}),e.jsx(N,{variant:"ghost",size:"icon",className:"h-5 w-5",onClick:()=>X(w,"down"),children:e.jsx(Ll,{className:"h-3 w-3"})})]})]})}),e.jsx(Ye,{className:"text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(N,{variant:"ghost",size:"icon",onClick:()=>B(w),children:e.jsx(nn,{className:"h-4 w-4"})}),e.jsx(N,{variant:"ghost",size:"icon",onClick:()=>V(w.id),children:e.jsx(ns,{className:"h-4 w-4 text-destructive"})})]})})]},w.id))})]})}),e.jsx("div",{className:"md:hidden p-4 space-y-4",children:c.map(w=>e.jsx(Be,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-semibold",children:w.name}),w.enabled&&e.jsx(Xe,{variant:"default",className:"text-xs",children:""})]}),e.jsx(Xe,{variant:"outline",className:"mt-1 text-xs",children:w.id})]}),e.jsx(qe,{checked:w.enabled,onCheckedChange:()=>E(w)})]}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{className:"text-muted-foreground",children:[e.jsx("span",{className:"font-medium",children:"Raw: "}),e.jsx("span",{className:"break-all",children:w.raw_prefix})]}),e.jsxs("div",{className:"text-muted-foreground",children:[e.jsx("span",{className:"font-medium",children:": "}),e.jsx("span",{className:"font-mono",children:w.priority})]})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t",children:[e.jsxs(N,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>B(w),children:[e.jsx(nn,{className:"h-4 w-4 mr-1"}),""]}),e.jsx(N,{variant:"outline",size:"sm",onClick:()=>X(w,"up"),disabled:w.priority===1,children:e.jsx(fr,{className:"h-4 w-4"})}),e.jsx(N,{variant:"outline",size:"sm",onClick:()=>X(w,"down"),children:e.jsx(Ll,{className:"h-4 w-4"})}),e.jsx(N,{variant:"destructive",size:"sm",onClick:()=>V(w.id),children:e.jsx(ns,{className:"h-4 w-4"})})]})]})},w.id))})]}),e.jsx(Os,{open:v,onOpenChange:k,children:e.jsxs(Es,{className:"max-w-lg",children:[e.jsxs(zs,{children:[e.jsx(Ms,{children:""}),e.jsx($s,{children:" Git "})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"add-id",children:" ID *"}),e.jsx(ce,{id:"add-id",placeholder:": my-mirror",value:L.id,onChange:w=>K({...L,id:w.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"add-name",children:" *"}),e.jsx(ce,{id:"add-name",placeholder:": ",value:L.name,onChange:w=>K({...L,name:w.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"add-raw",children:"Raw  *"}),e.jsx(ce,{id:"add-raw",placeholder:"https://example.com/raw",value:L.raw_prefix,onChange:w=>K({...L,raw_prefix:w.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"add-clone",children:" *"}),e.jsx(ce,{id:"add-clone",placeholder:"https://example.com/clone",value:L.clone_prefix,onChange:w=>K({...L,clone_prefix:w.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"add-priority",children:""}),e.jsx(ce,{id:"add-priority",type:"number",min:"1",value:L.priority,onChange:w=>K({...L,priority:parseInt(w.target.value)||1})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(qe,{id:"add-enabled",checked:L.enabled,onCheckedChange:w=>K({...L,enabled:w})}),e.jsx(b,{htmlFor:"add-enabled",children:""})]})]}),e.jsxs(Is,{children:[e.jsx(N,{variant:"outline",onClick:()=>k(!1),children:""}),e.jsx(N,{onClick:R,children:""})]})]})}),e.jsx(Os,{open:z,onOpenChange:T,children:e.jsxs(Es,{className:"max-w-lg",children:[e.jsxs(zs,{children:[e.jsx(Ms,{children:""}),e.jsx($s,{children:""})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{children:" ID"}),e.jsx(ce,{value:L.id,disabled:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"edit-name",children:" *"}),e.jsx(ce,{id:"edit-name",value:L.name,onChange:w=>K({...L,name:w.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"edit-raw",children:"Raw  *"}),e.jsx(ce,{id:"edit-raw",value:L.raw_prefix,onChange:w=>K({...L,raw_prefix:w.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"edit-clone",children:" *"}),e.jsx(ce,{id:"edit-clone",value:L.clone_prefix,onChange:w=>K({...L,clone_prefix:w.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"edit-priority",children:""}),e.jsx(ce,{id:"edit-priority",type:"number",min:"1",value:L.priority,onChange:w=>K({...L,priority:parseInt(w.target.value)||1})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(qe,{id:"edit-enabled",checked:L.enabled,onCheckedChange:w=>K({...L,enabled:w})}),e.jsx(b,{htmlFor:"edit-enabled",children:""})]})]}),e.jsxs(Is,{children:[e.jsx(N,{variant:"outline",onClick:()=>T(!1),children:""}),e.jsx(N,{onClick:ee,children:""})]})]})})]})})}const Jc=u.forwardRef(({className:n,...r},c)=>e.jsx(Lp,{ref:c,className:$("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",n),...r}));Jc.displayName=Lp.displayName;const A2=u.forwardRef(({className:n,...r},c)=>e.jsx(Up,{ref:c,className:$("aspect-square h-full w-full",n),...r}));A2.displayName=Up.displayName;const Pc=u.forwardRef(({className:n,...r},c)=>e.jsx(Bp,{ref:c,className:$("flex h-full w-full items-center justify-center rounded-full bg-muted",n),...r}));Pc.displayName=Bp.displayName;function D2(){return"webui_"+Math.random().toString(36).substr(2,9)+"_"+Date.now().toString(36)}function O2(){const n="maibot_webui_user_id";let r=localStorage.getItem(n);return r||(r=D2(),localStorage.setItem(n,r)),r}function R2(){return localStorage.getItem("maibot_webui_user_name")||"WebUI"}function L2(n){localStorage.setItem("maibot_webui_user_name",n)}function U2(){const[n,r]=u.useState([]),[c,d]=u.useState(""),[h,x]=u.useState(!1),[f,j]=u.useState(!1),[g,_]=u.useState(!1),[v,k]=u.useState(!0),[z,T]=u.useState(R2()),[L,K]=u.useState(!1),[U,R]=u.useState(""),[ee,V]=u.useState({}),E=u.useRef(O2()),B=u.useRef(null),X=u.useRef(null),w=u.useRef(null),D=u.useRef(0),te=u.useRef(new Set),{toast:xe}=Bs(),be=Q=>(D.current+=1,`${Q}-${Date.now()}-${D.current}-${Math.random().toString(36).substr(2,9)}`),ye=u.useCallback(()=>{X.current?.scrollIntoView({behavior:"smooth"})},[]);u.useEffect(()=>{ye()},[n,ye]);const ve=u.useCallback(async()=>{k(!0);try{const Q=`/api/chat/history?user_id=${E.current}&limit=50`;console.log("[Chat] :",Q);const oe=await fetch(Q);if(console.log("[Chat] :",oe.status,oe.statusText),console.log("[Chat]  Content-Type:",oe.headers.get("content-type")),oe.ok){const ge=await oe.text();console.log("[Chat] 100:",ge.substring(0,100));try{const le=JSON.parse(ge);if(console.log("[Chat] :",le),le.messages&&le.messages.length>0){const O=le.messages.map(F=>({id:F.id,type:F.type,content:F.content,timestamp:F.timestamp,sender:{name:F.sender_name||(F.is_bot?"":"WebUI"),user_id:F.user_id,is_bot:F.is_bot}}));r(O),console.log("[Chat] :",O.length),O.forEach(F=>{if(F.type==="bot"){const A=`bot-${F.content}-${Math.floor(F.timestamp*1e3)}`;te.current.add(A)}})}else console.log("[Chat] ")}catch(le){console.error("[Chat] JSON :",le),console.error("[Chat] :",ge)}}else{console.error("[Chat] :",oe.status);const ge=await oe.text();console.error("[Chat] :",ge.substring(0,200))}}catch(Q){console.error("[Chat] :",Q)}finally{k(!1)}},[]),pe=u.useCallback(()=>{if(B.current?.readyState===WebSocket.OPEN||B.current?.readyState===WebSocket.CONNECTING){console.log("WebSocket ");return}j(!0);const oe=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/api/chat/ws?user_id=${encodeURIComponent(E.current)}&user_name=${encodeURIComponent(z)}`;console.log(" WebSocket:",oe);try{const ge=new WebSocket(oe);B.current=ge,ge.onopen=()=>{x(!0),j(!1),console.log("WebSocket ")},ge.onmessage=le=>{try{const O=JSON.parse(le.data);switch(O.type){case"session_info":V({session_id:O.session_id,user_id:O.user_id,user_name:O.user_name,bot_name:O.bot_name});break;case"system":r(F=>[...F,{id:be("sys"),type:"system",content:O.content||"",timestamp:O.timestamp||Date.now()/1e3}]);break;case"user_message":r(F=>[...F,{id:O.message_id||be("user"),type:"user",content:O.content||"",timestamp:O.timestamp||Date.now()/1e3,sender:O.sender}]);break;case"bot_message":{_(!1);const F=`bot-${O.content}-${Math.floor((O.timestamp||0)*1e3)}`;if(te.current.has(F)){console.log("");break}if(te.current.add(F),te.current.size>100){const A=te.current.values().next().value;A&&te.current.delete(A)}r(A=>[...A,{id:be("bot"),type:"bot",content:O.content||"",timestamp:O.timestamp||Date.now()/1e3,sender:O.sender}]);break}case"typing":_(O.is_typing||!1);break;case"error":r(F=>[...F,{id:be("error"),type:"error",content:O.content||"",timestamp:O.timestamp||Date.now()/1e3}]),xe({title:"",description:O.content,variant:"destructive"});break;case"pong":break;default:console.log(":",O.type)}}catch(O){console.error(":",O)}},ge.onclose=()=>{x(!1),j(!1),B.current=null,console.log("WebSocket "),w.current&&clearTimeout(w.current),w.current=window.setTimeout(()=>{Ne.current||pe()},5e3)},ge.onerror=le=>{console.error("WebSocket :",le),j(!1)}}catch(ge){console.error(" WebSocket :",ge),j(!1)}},[xe,z]),Ne=u.useRef(!1);u.useEffect(()=>{Ne.current=!1,ve();const Q=setTimeout(()=>{Ne.current||pe()},100),oe=setInterval(()=>{B.current?.readyState===WebSocket.OPEN&&B.current.send(JSON.stringify({type:"ping"}))},3e4);return()=>{Ne.current=!0,clearTimeout(Q),clearInterval(oe),w.current&&(clearTimeout(w.current),w.current=null),B.current&&(B.current.close(),B.current=null)}},[pe,ve]);const y=u.useCallback(()=>{!c.trim()||!B.current||B.current.readyState!==WebSocket.OPEN||(B.current.send(JSON.stringify({type:"message",content:c.trim(),user_name:z})),d(""))},[c,z]),q=Q=>{Q.key==="Enter"&&!Q.shiftKey&&(Q.preventDefault(),y())},H=()=>{R(z),K(!0)},ne=()=>{const Q=U.trim()||"WebUI";T(Q),L2(Q),K(!1),B.current?.readyState===WebSocket.OPEN&&B.current.send(JSON.stringify({type:"update_nickname",user_name:Q}))},S=()=>{R(""),K(!1)},me=Q=>new Date(Q*1e3).toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"}),he=()=>{B.current&&B.current.close(),pe()};return e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsx("div",{className:"shrink-0 border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:e.jsxs("div",{className:"p-3 sm:p-4 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0",children:[e.jsx(Jc,{className:"h-8 w-8 sm:h-10 sm:w-10 shrink-0",children:e.jsx(Pc,{className:"bg-primary/10 text-primary",children:e.jsx(ir,{className:"h-4 w-4 sm:h-5 sm:w-5"})})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-base sm:text-lg font-semibold truncate",children:ee.bot_name||""}),e.jsx("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground",children:h?e.jsxs(e.Fragment,{children:[e.jsx(QN,{className:"h-3 w-3 text-green-500"}),e.jsx("span",{className:"text-green-600 dark:text-green-400",children:""})]}):f?e.jsxs(e.Fragment,{children:[e.jsx(vt,{className:"h-3 w-3 animate-spin"}),e.jsx("span",{children:"..."})]}):e.jsxs(e.Fragment,{children:[e.jsx($N,{className:"h-3 w-3 text-red-500"}),e.jsx("span",{className:"text-red-600 dark:text-red-400",children:""})]})})]})]}),e.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[v&&e.jsx(vt,{className:"h-4 w-4 animate-spin text-muted-foreground"}),e.jsx(N,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:he,disabled:f,title:"",children:e.jsx(ft,{className:$("h-4 w-4",f&&"animate-spin")})})]})]}),e.jsxs("div",{className:"hidden sm:flex items-center gap-2 mt-2 text-sm text-muted-foreground",children:[e.jsx(to,{className:"h-3 w-3"}),e.jsx("span",{children:""}),L?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ce,{value:U,onChange:Q=>R(Q.target.value),onKeyDown:Q=>{Q.key==="Enter"&&ne(),Q.key==="Escape"&&S()},className:"h-7 w-32",placeholder:"",autoFocus:!0}),e.jsx(N,{size:"sm",variant:"ghost",className:"h-7 px-2",onClick:ne,children:""}),e.jsx(N,{size:"sm",variant:"ghost",className:"h-7 px-2",onClick:S,children:""})]}):e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"font-medium text-foreground",children:z}),e.jsx(N,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0",onClick:H,title:"",children:e.jsx(YN,{className:"h-3 w-3"})})]})]})]})}),e.jsx("div",{className:"flex-1 overflow-hidden",children:e.jsx(es,{className:"h-full",children:e.jsxs("div",{className:"p-3 sm:p-4 max-w-4xl mx-auto space-y-3 sm:space-y-4",children:[n.length===0&&!v&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-muted-foreground",children:[e.jsx(ir,{className:"h-12 w-12 mb-4 opacity-50"}),e.jsxs("p",{className:"text-sm",children:[" ",ee.bot_name||""," "]})]}),n.map(Q=>e.jsxs("div",{className:$("flex gap-2 sm:gap-3",Q.type==="user"&&"flex-row-reverse",Q.type==="system"&&"justify-center",Q.type==="error"&&"justify-center"),children:[Q.type==="system"&&e.jsx("div",{className:"text-xs text-muted-foreground bg-muted/50 px-3 py-1 rounded-full max-w-[90%]",children:Q.content}),Q.type==="error"&&e.jsx("div",{className:"text-xs text-red-600 dark:text-red-400 bg-red-100 dark:bg-red-900/30 px-3 py-1 rounded-full max-w-[90%]",children:Q.content}),(Q.type==="user"||Q.type==="bot")&&e.jsxs(e.Fragment,{children:[e.jsx(Jc,{className:"h-7 w-7 sm:h-8 sm:w-8 shrink-0",children:e.jsx(Pc,{className:$("text-xs",Q.type==="bot"?"bg-primary/10 text-primary":"bg-secondary text-secondary-foreground"),children:Q.type==="bot"?e.jsx(ir,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}):e.jsx(to,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})})}),e.jsxs("div",{className:$("flex flex-col gap-1 max-w-[75%] sm:max-w-[70%]",Q.type==="user"&&"items-end"),children:[e.jsxs("div",{className:"flex items-center gap-2 text-[10px] sm:text-xs text-muted-foreground",children:[e.jsx("span",{className:"hidden sm:inline",children:Q.sender?.name||(Q.type==="bot"?ee.bot_name:z)}),e.jsx("span",{children:me(Q.timestamp)})]}),e.jsx("div",{className:$("rounded-2xl px-3 py-2 text-sm whitespace-pre-wrap break-words",Q.type==="bot"?"bg-muted rounded-tl-sm":"bg-primary text-primary-foreground rounded-tr-sm"),children:Q.content})]})]})]},Q.id)),g&&e.jsxs("div",{className:"flex gap-2 sm:gap-3",children:[e.jsx(Jc,{className:"h-7 w-7 sm:h-8 sm:w-8 shrink-0",children:e.jsx(Pc,{className:"bg-primary/10 text-primary",children:e.jsx(ir,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})})}),e.jsx("div",{className:"bg-muted rounded-2xl rounded-tl-sm px-4 py-3",children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx("span",{className:"w-2 h-2 bg-muted-foreground/50 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),e.jsx("span",{className:"w-2 h-2 bg-muted-foreground/50 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),e.jsx("span",{className:"w-2 h-2 bg-muted-foreground/50 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})]}),e.jsx("div",{ref:X})]})})}),e.jsx("div",{className:"shrink-0 border-t bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:e.jsx("div",{className:"p-3 sm:p-4 max-w-4xl mx-auto",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ce,{value:c,onChange:Q=>d(Q.target.value),onKeyDown:q,placeholder:h?"...":"...",disabled:!h,className:"flex-1 h-10 sm:h-10"}),e.jsx(N,{onClick:y,disabled:!h||!c.trim(),size:"icon",className:"h-10 w-10 shrink-0",children:e.jsx(XN,{className:"h-4 w-4"})})]})})})]})}const B2=ai("pointer-events-none inline-flex select-none items-center gap-1 rounded border bg-muted px-1.5 font-mono font-medium opacity-100",{variants:{size:{sm:"h-5 text-[10px]",default:"h-6 text-xs",lg:"h-7 text-sm"}},defaultVariants:{size:"default"}}),Yg=u.forwardRef(({className:n,size:r,abbrTitle:c,children:d,...h},x)=>e.jsx("kbd",{className:$(B2({size:r,className:n})),ref:x,...h,children:c?e.jsx("abbr",{title:c,children:d}):d}));Yg.displayName="Kbd";const H2=[{icon:xr,title:"",description:"",path:"/",category:""},{icon:Ma,title:"",description:"",path:"/config/bot",category:""},{icon:vg,title:"",description:"",path:"/config/modelProvider",category:""},{icon:yg,title:"",description:"",path:"/config/model",category:""},{icon:Qu,title:"",description:"",path:"/resource/emoji",category:""},{icon:si,title:"",description:"",path:"/resource/expression",category:""},{icon:Ng,title:"",description:"",path:"/resource/person",category:""},{icon:KN,title:"",description:"",path:"/statistics",category:""},{icon:rn,title:"",description:"",path:"/plugins",category:""},{icon:ao,title:"",description:"",path:"/logs",category:""},{icon:Rl,title:"",description:"",path:"/settings",category:""}];function q2({open:n,onOpenChange:r}){const[c,d]=u.useState(""),[h,x]=u.useState(0),f=It(),j=H2.filter(v=>v.title.toLowerCase().includes(c.toLowerCase())||v.description.toLowerCase().includes(c.toLowerCase())||v.category.toLowerCase().includes(c.toLowerCase()));u.useEffect(()=>{n&&(d(""),x(0))},[n]);const g=u.useCallback(v=>{f({to:v}),r(!1)},[f,r]),_=u.useCallback(v=>{v.key==="ArrowDown"?(v.preventDefault(),x(k=>(k+1)%j.length)):v.key==="ArrowUp"?(v.preventDefault(),x(k=>(k-1+j.length)%j.length)):v.key==="Enter"&&j[h]&&(v.preventDefault(),g(j[h].path))},[j,h,g]);return e.jsx(Os,{open:n,onOpenChange:r,children:e.jsxs(Es,{className:"max-w-2xl p-0 gap-0",children:[e.jsxs(zs,{className:"px-4 pt-4 pb-0",children:[e.jsx(Ms,{className:"sr-only",children:""}),e.jsxs("div",{className:"relative",children:[e.jsx(St,{className:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 text-muted-foreground"}),e.jsx(ce,{value:c,onChange:v=>{d(v.target.value),x(0)},onKeyDown:_,placeholder:"...",className:"h-12 pl-11 text-base border-0 focus-visible:ring-0 shadow-none",autoFocus:!0})]})]}),e.jsx("div",{className:"border-t",children:e.jsx(es,{className:"h-[400px]",children:j.length>0?e.jsx("div",{className:"p-2",children:j.map((v,k)=>{const z=v.icon;return e.jsxs("button",{onClick:()=>g(v.path),onMouseEnter:()=>x(k),className:$("w-full flex items-center gap-3 px-3 py-2.5 rounded-md text-left transition-colors",k===h?"bg-accent text-accent-foreground":"hover:bg-accent/50"),children:[e.jsx(z,{className:"h-5 w-5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-sm",children:v.title}),e.jsx("div",{className:"text-xs text-muted-foreground truncate",children:v.description})]}),e.jsx("div",{className:"text-xs text-muted-foreground px-2 py-1 bg-muted rounded",children:v.category})]},v.path)})}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx(St,{className:"h-12 w-12 text-muted-foreground/50 mb-4"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:c?"":""})]})})}),e.jsx("div",{className:"border-t px-4 py-3 flex items-center justify-between text-xs text-muted-foreground",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("kbd",{className:"px-1.5 py-0.5 bg-muted rounded border",children:""}),e.jsx("kbd",{className:"px-1.5 py-0.5 bg-muted rounded border",children:""}),""]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("kbd",{className:"px-1.5 py-0.5 bg-muted rounded border",children:"Enter"}),""]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("kbd",{className:"px-1.5 py-0.5 bg-muted rounded border",children:"Esc"}),""]})]})})]})})}const G2=Xy,V2=Ky,F2=Zy,Xg=u.forwardRef(({className:n,inset:r,children:c,...d},h)=>e.jsxs(Hp,{ref:h,className:$("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",r&&"pl-8",n),...d,children:[c,e.jsx(il,{className:"ml-auto h-4 w-4"})]}));Xg.displayName=Hp.displayName;const Kg=u.forwardRef(({className:n,...r},c)=>e.jsx(qp,{ref:c,className:$("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]",n),...r}));Kg.displayName=qp.displayName;const Zg=u.forwardRef(({className:n,...r},c)=>e.jsx(Yy,{children:e.jsx(Gp,{ref:c,className:$("z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]",n),...r})}));Zg.displayName=Gp.displayName;const va=u.forwardRef(({className:n,inset:r,...c},d)=>e.jsx(Vp,{ref:d,className:$("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r&&"pl-8",n),...c}));va.displayName=Vp.displayName;const Q2=u.forwardRef(({className:n,children:r,checked:c,...d},h)=>e.jsxs(Fp,{ref:h,className:$("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),checked:c,...d,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Qp,{children:e.jsx(ha,{className:"h-4 w-4"})})}),r]}));Q2.displayName=Fp.displayName;const $2=u.forwardRef(({className:n,children:r,...c},d)=>e.jsxs($p,{ref:d,className:$("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...c,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Qp,{children:e.jsx(ZN,{className:"h-2 w-2 fill-current"})})}),r]}));$2.displayName=$p.displayName;const Y2=u.forwardRef(({className:n,inset:r,...c},d)=>e.jsx(Yp,{ref:d,className:$("px-2 py-1.5 text-sm font-semibold text-foreground",r&&"pl-8",n),...c}));Y2.displayName=Yp.displayName;const or=u.forwardRef(({className:n,...r},c)=>e.jsx(Xp,{ref:c,className:$("-mx-1 my-1 h-px bg-border",n),...r}));or.displayName=Xp.displayName;const Jn=({className:n,...r})=>e.jsx("span",{className:$("ml-auto text-xs tracking-widest text-muted-foreground",n),...r});Jn.displayName="ContextMenuShortcut";const X2=gN,K2=jN,Z2=vN,Ig=u.forwardRef(({className:n,sideOffset:r=4,...c},d)=>e.jsx(pN,{children:e.jsx(cg,{ref:d,sideOffset:r,className:$("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",n),...c})}));Ig.displayName=cg.displayName;function I2({children:n}){y0();const[r,c]=u.useState(!0),[d,h]=u.useState(!1),[x,f]=u.useState(!1),{theme:j,setTheme:g}=Yu(),_=py(),v=It();u.useEffect(()=>{const K=U=>{(U.metaKey||U.ctrlKey)&&U.key==="k"&&(U.preventDefault(),f(!0))};return window.addEventListener("keydown",K),()=>window.removeEventListener("keydown",K)},[]);const k=[{title:"",items:[{icon:xr,label:"",path:"/"}]},{title:"",items:[{icon:Ma,label:"",path:"/config/bot"},{icon:vg,label:"AI",path:"/config/modelProvider",tourId:"sidebar-model-provider"},{icon:yg,label:"",path:"/config/model",tourId:"sidebar-model-management"},{icon:Kf,label:"",path:"/config/adapter"}]},{title:"",items:[{icon:Qu,label:"",path:"/resource/emoji"},{icon:si,label:"",path:"/resource/expression"},{icon:Ng,label:"",path:"/resource/person"},{icon:jg,label:"",path:"/resource/knowledge-graph"}]},{title:"",items:[{icon:rn,label:"",path:"/plugins"},{icon:Kf,label:"",path:"/plugin-config"},{icon:ao,label:"",path:"/logs"},{icon:si,label:"",path:"/chat"}]},{title:"",items:[{icon:Rl,label:"",path:"/settings"}]}],T=j==="system"?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":j,L=()=>{localStorage.removeItem("access-token"),v({to:"/auth"})};return e.jsx(X2,{delayDuration:300,children:e.jsxs("div",{className:"flex h-screen overflow-hidden",children:[e.jsxs("aside",{className:$("fixed inset-y-0 left-0 z-50 flex flex-col border-r bg-card transition-all duration-300 lg:relative lg:z-0","w-64 lg:w-auto",r?"lg:w-64":"lg:w-16",d?"translate-x-0":"-translate-x-full lg:translate-x-0"),children:[e.jsx("div",{className:"flex h-16 items-center border-b px-4",children:e.jsxs("div",{className:$("relative flex items-center justify-center flex-1 transition-all overflow-hidden","lg:flex-1",!r&&"lg:flex-none lg:w-8"),children:[e.jsxs("div",{className:$("flex items-baseline gap-2",!r&&"lg:hidden"),children:[e.jsx("span",{className:"font-bold text-xl text-primary-gradient whitespace-nowrap",children:"MaiBot WebUI"}),e.jsx("span",{className:"text-xs text-primary/60 whitespace-nowrap",children:a0()})]}),!r&&e.jsx("span",{className:"hidden lg:block font-bold text-primary-gradient text-2xl",children:"M"})]})}),e.jsx(es,{className:$("flex-1 overflow-x-hidden",!r&&"lg:w-16"),children:e.jsx("nav",{className:$("p-4",!r&&"lg:p-2 lg:w-16"),children:e.jsx("ul",{className:$("space-y-6",!r&&"lg:space-y-3 lg:w-full"),children:k.map((K,U)=>e.jsxs("li",{children:[e.jsx("div",{className:$("px-3 h-[1.25rem]","mb-2",!r&&"lg:mb-1 lg:invisible"),children:e.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground/60 whitespace-nowrap",children:K.title})}),!r&&U>0&&e.jsx("div",{className:"hidden lg:block mb-2 border-t border-border"}),e.jsx("ul",{className:"space-y-1",children:K.items.map(R=>{const ee=_({to:R.path}),V=R.icon,E=e.jsxs(e.Fragment,{children:[ee&&e.jsx("div",{className:"absolute left-0 top-1/2 h-8 w-1 -translate-y-1/2 rounded-r-full bg-primary transition-opacity duration-300"}),e.jsxs("div",{className:$("flex items-center transition-all duration-300",r?"gap-3":"gap-3 lg:gap-0"),children:[e.jsx(V,{className:$("h-5 w-5 flex-shrink-0",ee&&"text-primary"),strokeWidth:2,fill:"none"}),e.jsx("span",{className:$("text-sm font-medium whitespace-nowrap transition-all duration-300",ee&&"font-semibold",r?"opacity-100 max-w-[200px]":"opacity-100 max-w-[200px] lg:opacity-0 lg:max-w-0 lg:overflow-hidden"),children:R.label})]})]});return e.jsx("li",{className:"relative",children:e.jsxs(K2,{children:[e.jsx(Z2,{asChild:!0,children:e.jsx(Kc,{to:R.path,"data-tour":R.tourId,className:$("relative flex items-center rounded-lg py-2 transition-all duration-300","hover:bg-accent hover:text-accent-foreground",ee?"bg-accent text-foreground":"text-muted-foreground hover:text-foreground",r?"px-3":"px-3 lg:px-0 lg:justify-center lg:w-12 lg:mx-auto"),onClick:()=>h(!1),children:E})}),!r&&e.jsx(Ig,{side:"right",className:"hidden lg:block",children:e.jsx("p",{children:R.label})})]})},R.path)})})]},K.title))})})})]}),d&&e.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 lg:hidden",onClick:()=>h(!1)}),e.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[e.jsxs("header",{className:"flex h-16 items-center justify-between border-b bg-card/80 backdrop-blur-md px-4 sticky top-0 z-10",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>h(!d),className:"rounded-lg p-2 hover:bg-accent lg:hidden",children:e.jsx(IN,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>c(!r),className:"hidden rounded-lg p-2 hover:bg-accent lg:block",title:r?"":"",children:e.jsx(cn,{className:$("h-5 w-5 transition-transform",!r&&"rotate-180")})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>f(!0),className:"relative hidden md:flex items-center w-64 h-9 pl-9 pr-16 bg-background/50 border rounded-md hover:bg-accent/50 transition-colors text-left",children:[e.jsx(St,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"..."}),e.jsxs(Yg,{size:"sm",className:"absolute right-2 top-1/2 -translate-y-1/2",children:[e.jsx("span",{className:"text-xs",children:""}),"K"]})]}),e.jsx(q2,{open:x,onOpenChange:f}),e.jsxs(N,{variant:"ghost",size:"sm",onClick:()=>window.open("https://docs.mai-mai.org","_blank"),className:"gap-2",title:"",children:[e.jsx(JN,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:""})]}),e.jsx("button",{onClick:K=>{Pb(T==="dark"?"light":"dark",g,K)},className:"rounded-lg p-2 hover:bg-accent",title:T==="dark"?"":"",children:T==="dark"?e.jsx(Ou,{className:"h-5 w-5"}):e.jsx(Ru,{className:"h-5 w-5"})}),e.jsx("div",{className:"h-6 w-px bg-border"}),e.jsxs(N,{variant:"ghost",size:"sm",onClick:L,className:"gap-2",title:"",children:[e.jsx(Zf,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:""})]})]})]}),e.jsxs(G2,{children:[e.jsx(V2,{asChild:!0,children:e.jsx("main",{className:"flex-1 overflow-hidden bg-background",children:n})}),e.jsxs(Zg,{className:"w-64",children:[e.jsxs(va,{onClick:()=>v({to:"/"}),children:[e.jsx(xr,{className:"mr-2 h-4 w-4"}),""]}),e.jsxs(va,{onClick:()=>v({to:"/settings"}),children:[e.jsx(Rl,{className:"mr-2 h-4 w-4"}),""]}),e.jsxs(va,{onClick:()=>v({to:"/logs"}),children:[e.jsx(ao,{className:"mr-2 h-4 w-4"}),""]}),e.jsx(or,{}),e.jsxs(F2,{children:[e.jsxs(Xg,{children:[e.jsx(fg,{className:"mr-2 h-4 w-4"}),""]}),e.jsxs(Kg,{className:"w-48",children:[e.jsxs(va,{onClick:()=>g("light"),disabled:j==="light",children:[e.jsx(Ou,{className:"mr-2 h-4 w-4"}),"",j==="light"&&e.jsx(Jn,{children:""})]}),e.jsxs(va,{onClick:()=>g("dark"),disabled:j==="dark",children:[e.jsx(Ru,{className:"mr-2 h-4 w-4"}),"",j==="dark"&&e.jsx(Jn,{children:""})]}),e.jsxs(va,{onClick:()=>g("system"),disabled:j==="system",children:[e.jsx(Rl,{className:"mr-2 h-4 w-4"}),"",j==="system"&&e.jsx(Jn,{children:""})]})]})]}),e.jsx(or,{}),e.jsxs(va,{onClick:()=>window.location.reload(),children:[e.jsx(PN,{className:"mr-2 h-4 w-4"}),"",e.jsx(Jn,{children:"R"})]}),e.jsxs(va,{onClick:()=>f(!0),children:[e.jsx(St,{className:"mr-2 h-4 w-4"}),"",e.jsx(Jn,{children:"K"})]}),e.jsx(or,{}),e.jsxs(va,{onClick:()=>window.open("https://docs.mai-mai.org","_blank"),children:[e.jsx(dr,{className:"mr-2 h-4 w-4"}),""]}),e.jsx(or,{}),e.jsxs(va,{onClick:L,className:"text-destructive focus:text-destructive",children:[e.jsx(Zf,{className:"mr-2 h-4 w-4"}),""]})]})]})]})]})})}function J2(n){const r=n.split(`
`).slice(1),c=[];for(const d of r){const h=d.trim();if(!h.startsWith("at "))continue;const x=h.match(/at\s+(?:(.+?)\s+\()?(.+?):(\d+):(\d+)\)?$/);x?c.push({functionName:x[1]||"<anonymous>",fileName:x[2],lineNumber:x[3],columnNumber:x[4],raw:h}):c.push({functionName:"<unknown>",fileName:"",lineNumber:"",columnNumber:"",raw:h})}return c}function P2({error:n,errorInfo:r}){const[c,d]=u.useState(!0),[h,x]=u.useState(!1),[f,j]=u.useState(!1),g=n.stack?J2(n.stack):[],_=async()=>{const v=`
Error: ${n.name}
Message: ${n.message}

Stack Trace:
${n.stack||"No stack trace available"}

Component Stack:
${r?.componentStack||"No component stack available"}

URL: ${window.location.href}
User Agent: ${navigator.userAgent}
Time: ${new Date().toISOString()}
    `.trim();try{await navigator.clipboard.writeText(v),j(!0),setTimeout(()=>j(!1),2e3)}catch(k){console.error("Failed to copy:",k)}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs(ua,{variant:"destructive",className:"border-red-500/50 bg-red-500/10",children:[e.jsx(ya,{className:"h-4 w-4"}),e.jsxs(ma,{className:"font-mono text-sm",children:[e.jsxs("span",{className:"font-semibold",children:[n.name,":"]})," ",n.message]})]}),g.length>0&&e.jsxs(Gu,{open:c,onOpenChange:d,children:[e.jsx(Vu,{asChild:!0,children:e.jsxs(N,{variant:"ghost",className:"w-full justify-between p-3 h-auto",children:[e.jsxs("span",{className:"font-semibold text-sm flex items-center gap-2",children:[e.jsx(WN,{className:"h-4 w-4"}),"Stack Trace (",g.length," frames)"]}),c?e.jsx(fr,{className:"h-4 w-4"}):e.jsx(Ll,{className:"h-4 w-4"})]})}),e.jsx(Fu,{children:e.jsx(es,{className:"h-[280px] rounded-md border bg-muted/30",children:e.jsx("div",{className:"p-3 space-y-1",children:g.map((v,k)=>e.jsx("div",{className:"font-mono text-xs p-2 rounded hover:bg-muted/50 transition-colors",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsxs("span",{className:"text-muted-foreground w-6 text-right flex-shrink-0",children:[k+1,"."]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("span",{className:"text-primary font-medium",children:v.functionName}),v.fileName&&e.jsxs("div",{className:"text-muted-foreground mt-0.5 break-all",children:[v.fileName,v.lineNumber&&e.jsxs("span",{className:"text-yellow-600 dark:text-yellow-400",children:[":",v.lineNumber,":",v.columnNumber]})]})]})]})},k))})})})]}),r?.componentStack&&e.jsxs(Gu,{open:h,onOpenChange:x,children:[e.jsx(Vu,{asChild:!0,children:e.jsxs(N,{variant:"ghost",className:"w-full justify-between p-3 h-auto",children:[e.jsxs("span",{className:"font-semibold text-sm flex items-center gap-2",children:[e.jsx(ya,{className:"h-4 w-4"}),"Component Stack"]}),h?e.jsx(fr,{className:"h-4 w-4"}):e.jsx(Ll,{className:"h-4 w-4"})]})}),e.jsx(Fu,{children:e.jsx(es,{className:"h-[200px] rounded-md border bg-muted/30",children:e.jsx("pre",{className:"p-3 font-mono text-xs whitespace-pre-wrap text-muted-foreground",children:r.componentStack})})})]}),e.jsx(N,{variant:"outline",size:"sm",onClick:_,className:"w-full",children:f?e.jsxs(e.Fragment,{children:[e.jsx(ha,{className:"mr-2 h-4 w-4 text-green-500"}),""]}):e.jsxs(e.Fragment,{children:[e.jsx(so,{className:"mr-2 h-4 w-4"}),""]})})]})}function Jg({error:n,errorInfo:r}){const c=()=>{window.location.href="/"},d=()=>{window.location.reload()};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:e.jsxs(Be,{className:"w-full max-w-2xl shadow-lg",children:[e.jsxs(gs,{className:"text-center pb-2",children:[e.jsx("div",{className:"mx-auto flex h-16 w-16 items-center justify-center rounded-full bg-red-100 dark:bg-red-900/30 mb-4",children:e.jsx(ya,{className:"h-8 w-8 text-red-600 dark:text-red-400"})}),e.jsx(js,{className:"text-2xl font-bold",children:""}),e.jsx(Zs,{className:"text-base mt-2",children:""})]}),e.jsxs(bs,{className:"space-y-4",children:[e.jsx(P2,{error:n,errorInfo:r}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 pt-2",children:[e.jsxs(N,{onClick:d,className:"flex-1",children:[e.jsx(ft,{className:"mr-2 h-4 w-4"}),""]}),e.jsxs(N,{onClick:c,variant:"outline",className:"flex-1",children:[e.jsx(xr,{className:"mr-2 h-4 w-4"}),""]})]}),e.jsx("p",{className:"text-xs text-center text-muted-foreground pt-2",children:""})]})]})})}class W2 extends u.Component{constructor(r){super(r),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,c){console.error("ErrorBoundary caught an error:",r,c),this.setState({errorInfo:c})}handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};render(){return this.state.hasError&&this.state.error?this.props.fallback?this.props.fallback:e.jsx(Jg,{error:this.state.error,errorInfo:this.state.errorInfo}):this.props.children}}function Pg({error:n}){return e.jsx(Jg,{error:n,errorInfo:null})}const kr=gy({component:()=>e.jsxs(e.Fragment,{children:[e.jsx(vp,{}),!1]}),beforeLoad:()=>{if(window.location.pathname==="/"&&!Dg())throw vy({to:"/auth"})}}),e_=lt({getParentRoute:()=>kr,path:"/auth",component:N0}),s_=lt({getParentRoute:()=>kr,path:"/setup",component:B0}),Nt=lt({getParentRoute:()=>kr,id:"protected",component:()=>e.jsx(I2,{children:e.jsx(vp,{})}),errorComponent:({error:n})=>e.jsx(Pg,{error:n})}),t_=lt({getParentRoute:()=>Nt,path:"/",component:Ib}),a_=lt({getParentRoute:()=>Nt,path:"/config/bot",component:J0}),l_=lt({getParentRoute:()=>Nt,path:"/config/modelProvider",component:Nw}),n_=lt({getParentRoute:()=>Nt,path:"/config/model",component:Sw}),i_=lt({getParentRoute:()=>Nt,path:"/config/adapter",component:kw}),r_=lt({getParentRoute:()=>Nt,path:"/resource/emoji",component:Kw}),c_=lt({getParentRoute:()=>Nt,path:"/resource/expression",component:i1}),o_=lt({getParentRoute:()=>Nt,path:"/resource/person",component:g1}),d_=lt({getParentRoute:()=>Nt,path:"/resource/knowledge-graph",component:C1}),u_=lt({getParentRoute:()=>Nt,path:"/logs",component:a2}),m_=lt({getParentRoute:()=>Nt,path:"/chat",component:U2}),h_=lt({getParentRoute:()=>Nt,path:"/plugins",component:k2}),x_=lt({getParentRoute:()=>Nt,path:"/plugin-config",component:z2}),f_=lt({getParentRoute:()=>Nt,path:"/plugin-mirrors",component:M2}),p_=lt({getParentRoute:()=>Nt,path:"/settings",component:h0}),g_=lt({getParentRoute:()=>kr,path:"*",component:Og}),j_=kr.addChildren([e_,s_,Nt.addChildren([t_,a_,l_,n_,i_,r_,c_,o_,d_,h_,x_,f_,u_,m_,p_]),g_]),v_=jy({routeTree:j_,defaultNotFoundComponent:Og,defaultErrorComponent:({error:n})=>e.jsx(Pg,{error:n})});function y_({children:n,defaultTheme:r="system",storageKey:c="ui-theme",...d}){const[h,x]=u.useState(()=>localStorage.getItem(c)||r);u.useEffect(()=>{const j=window.document.documentElement;if(j.classList.remove("light","dark"),h==="system"){const g=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";j.classList.add(g);return}j.classList.add(h)},[h]),u.useEffect(()=>{const j=localStorage.getItem("accent-color");if(j){const g=document.documentElement,v={blue:{hsl:"221.2 83.2% 53.3%",darkHsl:"217.2 91.2% 59.8%",gradient:null},purple:{hsl:"271 91% 65%",darkHsl:"270 95% 75%",gradient:null},green:{hsl:"142 71% 45%",darkHsl:"142 76% 36%",gradient:null},orange:{hsl:"25 95% 53%",darkHsl:"20 90% 48%",gradient:null},pink:{hsl:"330 81% 60%",darkHsl:"330 85% 70%",gradient:null},red:{hsl:"0 84% 60%",darkHsl:"0 90% 70%",gradient:null},"gradient-sunset":{hsl:"15 95% 60%",darkHsl:"15 95% 65%",gradient:"linear-gradient(135deg, hsl(25 95% 53%) 0%, hsl(330 81% 60%) 100%)"},"gradient-ocean":{hsl:"200 90% 55%",darkHsl:"200 90% 60%",gradient:"linear-gradient(135deg, hsl(221.2 83.2% 53.3%) 0%, hsl(189 94% 43%) 100%)"},"gradient-forest":{hsl:"150 70% 45%",darkHsl:"150 75% 40%",gradient:"linear-gradient(135deg, hsl(142 71% 45%) 0%, hsl(158 64% 52%) 100%)"},"gradient-aurora":{hsl:"310 85% 65%",darkHsl:"310 90% 70%",gradient:"linear-gradient(135deg, hsl(271 91% 65%) 0%, hsl(330 81% 60%) 100%)"},"gradient-fire":{hsl:"15 95% 55%",darkHsl:"15 95% 60%",gradient:"linear-gradient(135deg, hsl(0 84% 60%) 0%, hsl(25 95% 53%) 100%)"},"gradient-twilight":{hsl:"250 90% 60%",darkHsl:"250 95% 65%",gradient:"linear-gradient(135deg, hsl(239 84% 67%) 0%, hsl(271 91% 65%) 100%)"}}[j];v&&(g.style.setProperty("--primary",v.hsl),v.gradient?(g.style.setProperty("--primary-gradient",v.gradient),g.classList.add("has-gradient")):(g.style.removeProperty("--primary-gradient"),g.classList.remove("has-gradient")))}},[]);const f={theme:h,setTheme:j=>{localStorage.setItem(c,j),x(j)}};return e.jsx(kg.Provider,{...d,value:f,children:n})}function N_({children:n,defaultEnabled:r=!0,defaultWavesEnabled:c=!0,storageKey:d="enable-animations",wavesStorageKey:h="enable-waves-background"}){const[x,f]=u.useState(()=>{const v=localStorage.getItem(d);return v!==null?v==="true":r}),[j,g]=u.useState(()=>{const v=localStorage.getItem(h);return v!==null?v==="true":c});u.useEffect(()=>{const v=document.documentElement;x?v.classList.remove("no-animations"):v.classList.add("no-animations"),localStorage.setItem(d,String(x))},[x,d]),u.useEffect(()=>{localStorage.setItem(h,String(j))},[j,h]);const _={enableAnimations:x,setEnableAnimations:f,enableWavesBackground:j,setEnableWavesBackground:g};return e.jsx(Tg.Provider,{value:_,children:n})}const b_=yN,Wg=u.forwardRef(({className:n,...r},c)=>e.jsx(og,{ref:c,className:$("fixed bottom-0 right-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:max-w-[420px] gap-2",n),...r}));Wg.displayName=og.displayName;const w_=ai("group pointer-events-auto relative flex w-full items-center justify-between space-x-2 overflow-hidden rounded-md border p-4 pr-6 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-slide-in-from-right data-[state=open]:animate-fade-in data-[state=closed]:animate-slide-out-to-right data-[state=closed]:animate-fade-out data-[swipe=end]:animate-slide-out-to-right",{variants:{variant:{default:"border bg-primary/5 text-foreground backdrop-blur-sm",destructive:"destructive group border-destructive bg-destructive/10 text-destructive-foreground backdrop-blur-sm"}},defaultVariants:{variant:"default"}}),ej=u.forwardRef(({className:n,variant:r,...c},d)=>e.jsx(dg,{ref:d,className:$(w_({variant:r}),n),...c}));ej.displayName=dg.displayName;const __=u.forwardRef(({className:n,...r},c)=>e.jsx(ug,{ref:c,className:$("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium transition-colors hover:bg-secondary focus:outline-none focus:ring-1 focus:ring-ring disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...r}));__.displayName=ug.displayName;const sj=u.forwardRef(({className:n,...r},c)=>e.jsx(mg,{ref:c,className:$("absolute right-1 top-1 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-1 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...r,children:e.jsx(li,{className:"h-4 w-4"})}));sj.displayName=mg.displayName;const tj=u.forwardRef(({className:n,...r},c)=>e.jsx(hg,{ref:c,className:$("text-sm font-semibold [&+div]:text-xs",n),...r}));tj.displayName=hg.displayName;const aj=u.forwardRef(({className:n,...r},c)=>e.jsx(xg,{ref:c,className:$("text-sm opacity-90",n),...r}));aj.displayName=xg.displayName;function S_(){const{toasts:n}=Bs();return e.jsxs(b_,{children:[n.map(function({id:r,title:c,description:d,action:h,...x}){return e.jsxs(ej,{...x,children:[e.jsxs("div",{className:"grid gap-1",children:[c&&e.jsx(tj,{children:c}),d&&e.jsx(aj,{children:d})]}),h,e.jsx(sj,{})]},r)}),e.jsx(Wg,{})]})}Bb.createRoot(document.getElementById("root")).render(e.jsx(u.StrictMode,{children:e.jsx(W2,{children:e.jsx(y_,{defaultTheme:"system",children:e.jsx(N_,{children:e.jsxs(pw,{children:[e.jsx(yy,{router:v_}),e.jsx(vw,{}),e.jsx(S_,{})]})})})})}));
