import{r as u,j as e,L as Yn,e as ja,R as pt,b as Hb,f as qb,g as Gb,h as Fb,k as at,l as Vb,m as $b,O as Tp,n as Qb}from"./router-CWhjJi2n.js";import{a as Ib,b as Yb,g as Xb}from"./react-vendor-Dtc2IqVY.js";import{I as Kb,c as Jb,J as si,K as Ac,L as vu,M as Pb,N as Pi,O as Zi,P as Zb,n as bu}from"./utils-CCeOswSm.js";import{L as Ep,T as zp,C as Mp,R as Wb,a as Ap,V as eN,b as sN,S as Dp,c as tN,d as Op,I as aN,e as Rp,f as lN,g as Lp,h as nN,i as iN,j as rN,O as Up,P as cN,k as Bp,l as Hp,D as qp,A as Gp,m as Fp,n as oN,o as dN,p as Vp,q as uN,r as $p,s as mN,t as hN,u as xN,v as fN,w as pN,x as Qp,y as Ip,F as Yp,z as Xp,B as gN,E as jN}from"./radix-extra-DnIxMvW0.js";import{aj as vN,ak as bN,al as NN,am as yN,an as Dc,ao as Oc,ap as Wi,aq as wN,ar as Nu,as as Rc,at as _N,au as SN,av as CN}from"./charts-Dhri-zxi.js";import{S as kN,G as Kp,O as Jp,o as TN,C as Pp,p as EN,T as Zp,D as Wp,R as zN,q as MN,H as eg,I as AN,J as sg,K as tg,L as DN,M as ag,V as ON,N as lg,Q as ng,U as RN,X as LN,Y as ig,Z as UN,_ as BN,$ as rg,a0 as HN,e as qN,f as GN,c as cg,P as Jc,d as Qu,b as Ru,h as FN,l as VN,m as $N,a1 as QN,a2 as og,a3 as IN,a4 as YN,a5 as XN,a6 as dg,a7 as ug,a8 as mg,a9 as hg,aa as xg,ab as fg,ac as KN}from"./radix-core-C3XKqQJw.js";import{R as Et,P as pr,C as ta,a as zt,Z as sn,b as Vc,F as wa,c as JN,S as ti,d as PN,M as Dl,A as ZN,D as WN,e as $c,f as Pn,T as ey,X as il,g as sy,h as ty,I as Oa,i as _a,j as Vt,k as Qc,E as or,l as Ot,m as pg,H as ay,n as Pe,o as nl,U as dr,p as gg,q as jg,L as Wf,K as vg,r as bg,s as ly,t as qc,u as st,v as ny,B as ar,w as Ic,x as Iu,y as iy,z as ry,G as Mt,J as Pc,N as Wn,O as rt,Q as Ol,V as ur,W as Yu,Y as gr,_ as cy,$ as oy,a0 as an,a1 as ai,a2 as rl,a3 as Ua,a4 as li,a5 as Xu,a6 as dy,a7 as uy,a8 as my,a9 as tn,aa as hy,ab as Ng,ac as Lu,ad as ln,ae as xy,af as ei,ag as fy,ah as Uu,ai as Bu,aj as yg,ak as ep,al as py,am as gy,an as jy,ao as ll,ap as yu,aq as sp,ar as vy,as as wu,at as by,au as Ny,av as yy,aw as wy,ax as _y,ay as wg,az as _g,aA as Sg,aB as Cg,aC as Sy,aD as tp,aE as Cy,aF as ky,aG as Ty,aH as Ey}from"./icons-Dkibu3bQ.js";import{S as zy,p as My,j as Ay,a as Dy,E as ap,R as Oy,o as Ry}from"./codemirror-BHeANvwm.js";import{_ as It,c as Ly,g as kg,D as Uy}from"./misc-DyBU7ISD.js";import{u as By,a as lp,D as Hy,c as qy,S as Gy,h as Fy,b as Vy,s as $y,K as Qy,P as Iy,d as Yy,C as Xy}from"./dnd-Dyi3CnuX.js";import{D as Ky,U as Jy}from"./uppy-DUr9_tfX.js";import{M as Py,r as Zy,a as Wy,b as e0}from"./markdown-A1ShuLvG.js";import{r as s0,H as Yc,P as Xc,u as t0,a as a0,R as l0,B as n0,b as i0,C as r0,M as c0,c as o0}from"./reactflow-B3n3_Vkw.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const m of document.querySelectorAll('link[rel="modulepreload"]'))d(m);new MutationObserver(m=>{for(const h of m)if(h.type==="childList")for(const f of h.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&d(f)}).observe(document,{childList:!0,subtree:!0});function r(m){const h={};return m.integrity&&(h.integrity=m.integrity),m.referrerPolicy&&(h.referrerPolicy=m.referrerPolicy),m.crossOrigin==="use-credentials"?h.credentials="include":m.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function d(m){if(m.ep)return;m.ep=!0;const h=r(m);fetch(m.href,h)}})();var _u={exports:{}},er={},Su={exports:{}},Cu={};var np;function d0(){return np||(np=1,(function(n){function i(R,X){var C=R.length;R.push(X);e:for(;0<C;){var $=C-1>>>1,k=R[$];if(0<m(k,X))R[$]=X,R[C]=k,C=$;else break e}}function r(R){return R.length===0?null:R[0]}function d(R){if(R.length===0)return null;var X=R[0],C=R.pop();if(C!==X){R[0]=C;e:for(var $=0,k=R.length,ce=k>>>1;$<ce;){var ue=2*($+1)-1,ie=R[ue],fe=ue+1,Ne=R[fe];if(0>m(ie,C))fe<k&&0>m(Ne,ie)?(R[$]=Ne,R[fe]=C,$=fe):(R[$]=ie,R[ue]=C,$=ue);else if(fe<k&&0>m(Ne,C))R[$]=Ne,R[fe]=C,$=fe;else break e}}return X}function m(R,X){var C=R.sortIndex-X.sortIndex;return C!==0?C:R.id-X.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var h=performance;n.unstable_now=function(){return h.now()}}else{var f=Date,p=f.now();n.unstable_now=function(){return f.now()-p}}var g=[],b=[],j=1,y=null,N=3,T=!1,w=!1,U=!1,O=!1,B=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;function M(R){for(var X=r(b);X!==null;){if(X.callback===null)d(b);else if(X.startTime<=R)d(b),X.sortIndex=X.expirationTime,i(g,X);else break;X=r(b)}}function Y(R){if(U=!1,M(R),!w)if(r(g)!==null)w=!0,Q||(Q=!0,_e());else{var X=r(b);X!==null&&we(Y,X.startTime-R)}}var Q=!1,z=-1,A=5,W=-1;function xe(){return O?!0:!(n.unstable_now()-W<A)}function be(){if(O=!1,Q){var R=n.unstable_now();W=R;var X=!0;try{e:{w=!1,U&&(U=!1,I(z),z=-1),T=!0;var C=N;try{s:{for(M(R),y=r(g);y!==null&&!(y.expirationTime>R&&xe());){var $=y.callback;if(typeof $=="function"){y.callback=null,N=y.priorityLevel;var k=$(y.expirationTime<=R);if(R=n.unstable_now(),typeof k=="function"){y.callback=k,M(R),X=!0;break s}y===r(g)&&d(g),M(R)}else d(g);y=r(g)}if(y!==null)X=!0;else{var ce=r(b);ce!==null&&we(Y,ce.startTime-R),X=!1}}break e}finally{y=null,N=C,T=!1}X=void 0}}finally{X?_e():Q=!1}}}var _e;if(typeof L=="function")_e=function(){L(be)};else if(typeof MessageChannel<"u"){var pe=new MessageChannel,ye=pe.port2;pe.port1.onmessage=be,_e=function(){ye.postMessage(null)}}else _e=function(){B(be,0)};function we(R,X){z=B(function(){R(n.unstable_now())},X)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(R){R.callback=null},n.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<R?Math.floor(1e3/R):5},n.unstable_getCurrentPriorityLevel=function(){return N},n.unstable_next=function(R){switch(N){case 1:case 2:case 3:var X=3;break;default:X=N}var C=N;N=X;try{return R()}finally{N=C}},n.unstable_requestPaint=function(){O=!0},n.unstable_runWithPriority=function(R,X){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var C=N;N=R;try{return X()}finally{N=C}},n.unstable_scheduleCallback=function(R,X,C){var $=n.unstable_now();switch(typeof C=="object"&&C!==null?(C=C.delay,C=typeof C=="number"&&0<C?$+C:$):C=$,R){case 1:var k=-1;break;case 2:k=250;break;case 5:k=1073741823;break;case 4:k=1e4;break;default:k=5e3}return k=C+k,R={id:j++,callback:X,priorityLevel:R,startTime:C,expirationTime:k,sortIndex:-1},C>$?(R.sortIndex=C,i(b,R),r(g)===null&&R===r(b)&&(U?(I(z),z=-1):U=!0,we(Y,C-$))):(R.sortIndex=k,i(g,R),w||T||(w=!0,Q||(Q=!0,_e()))),R},n.unstable_shouldYield=xe,n.unstable_wrapCallback=function(R){var X=N;return function(){var C=N;N=X;try{return R.apply(this,arguments)}finally{N=C}}}})(Cu)),Cu}var ip;function u0(){return ip||(ip=1,Su.exports=d0()),Su.exports}var rp;function m0(){if(rp)return er;rp=1;var n=u0(),i=Ib(),r=Yb();function d(s){var t="https://react.dev/errors/"+s;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+s+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function m(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function h(s){var t=s,a=s;if(s.alternate)for(;t.return;)t=t.return;else{s=t;do t=s,(t.flags&4098)!==0&&(a=t.return),s=t.return;while(s)}return t.tag===3?a:null}function f(s){if(s.tag===13){var t=s.memoizedState;if(t===null&&(s=s.alternate,s!==null&&(t=s.memoizedState)),t!==null)return t.dehydrated}return null}function p(s){if(s.tag===31){var t=s.memoizedState;if(t===null&&(s=s.alternate,s!==null&&(t=s.memoizedState)),t!==null)return t.dehydrated}return null}function g(s){if(h(s)!==s)throw Error(d(188))}function b(s){var t=s.alternate;if(!t){if(t=h(s),t===null)throw Error(d(188));return t!==s?null:s}for(var a=s,l=t;;){var c=a.return;if(c===null)break;var o=c.alternate;if(o===null){if(l=c.return,l!==null){a=l;continue}break}if(c.child===o.child){for(o=c.child;o;){if(o===a)return g(c),s;if(o===l)return g(c),t;o=o.sibling}throw Error(d(188))}if(a.return!==l.return)a=c,l=o;else{for(var x=!1,v=c.child;v;){if(v===a){x=!0,a=c,l=o;break}if(v===l){x=!0,l=c,a=o;break}v=v.sibling}if(!x){for(v=o.child;v;){if(v===a){x=!0,a=o,l=c;break}if(v===l){x=!0,l=o,a=c;break}v=v.sibling}if(!x)throw Error(d(189))}}if(a.alternate!==l)throw Error(d(190))}if(a.tag!==3)throw Error(d(188));return a.stateNode.current===a?s:t}function j(s){var t=s.tag;if(t===5||t===26||t===27||t===6)return s;for(s=s.child;s!==null;){if(t=j(s),t!==null)return t;s=s.sibling}return null}var y=Object.assign,N=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),I=Symbol.for("react.consumer"),L=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),Y=Symbol.for("react.suspense"),Q=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),W=Symbol.for("react.activity"),xe=Symbol.for("react.memo_cache_sentinel"),be=Symbol.iterator;function _e(s){return s===null||typeof s!="object"?null:(s=be&&s[be]||s["@@iterator"],typeof s=="function"?s:null)}var pe=Symbol.for("react.client.reference");function ye(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===pe?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case U:return"Fragment";case B:return"Profiler";case O:return"StrictMode";case Y:return"Suspense";case Q:return"SuspenseList";case W:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case w:return"Portal";case L:return s.displayName||"Context";case I:return(s._context.displayName||"Context")+".Consumer";case M:var t=s.render;return s=s.displayName,s||(s=t.displayName||t.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case z:return t=s.displayName||null,t!==null?t:ye(s.type)||"Memo";case A:t=s._payload,s=s._init;try{return ye(s(t))}catch{}}return null}var we=Array.isArray,R=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,C={pending:!1,data:null,method:null,action:null},$=[],k=-1;function ce(s){return{current:s}}function ue(s){0>k||(s.current=$[k],$[k]=null,k--)}function ie(s,t){k++,$[k]=s.current,s.current=t}var fe=ce(null),Ne=ce(null),me=ce(null),ee=ce(null);function ae(s,t){switch(ie(me,t),ie(Ne,s),ie(fe,null),t.nodeType){case 9:case 11:s=(s=t.documentElement)&&(s=s.namespaceURI)?yf(s):0;break;default:if(s=t.tagName,t=t.namespaceURI)t=yf(t),s=wf(t,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}ue(fe),ie(fe,s)}function V(){ue(fe),ue(Ne),ue(me)}function P(s){s.memoizedState!==null&&ie(ee,s);var t=fe.current,a=wf(t,s.type);t!==a&&(ie(Ne,s),ie(fe,a))}function Ce(s){Ne.current===s&&(ue(fe),ue(Ne)),ee.current===s&&(ue(ee),Yi._currentValue=C)}var Le,ge;function Me(s){if(Le===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);Le=t&&t[1]||"",ge=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Le+s+ge}var $s=!1;function gt(s,t){if(!s||$s)return"";$s=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(t){var he=function(){throw Error()};if(Object.defineProperty(he.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(he,[])}catch(se){var Z=se}Reflect.construct(s,[],he)}else{try{he.call()}catch(se){Z=se}s.call(he.prototype)}}else{try{throw Error()}catch(se){Z=se}(he=s())&&typeof he.catch=="function"&&he.catch(function(){})}}catch(se){if(se&&Z&&typeof se.stack=="string")return[se.stack,Z.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var o=l.DetermineComponentFrameRoot(),x=o[0],v=o[1];if(x&&v){var D=x.split(`
`),J=v.split(`
`);for(c=l=0;l<D.length&&!D[l].includes("DetermineComponentFrameRoot");)l++;for(;c<J.length&&!J[c].includes("DetermineComponentFrameRoot");)c++;if(l===D.length||c===J.length)for(l=D.length-1,c=J.length-1;1<=l&&0<=c&&D[l]!==J[c];)c--;for(;1<=l&&0<=c;l--,c--)if(D[l]!==J[c]){if(l!==1||c!==1)do if(l--,c--,0>c||D[l]!==J[c]){var re=`
`+D[l].replace(" at new "," at ");return s.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",s.displayName)),re}while(1<=l&&0<=c);break}}}finally{$s=!1,Error.prepareStackTrace=a}return(a=s?s.displayName||s.name:"")?Me(a):""}function oe(s,t){switch(s.tag){case 26:case 27:case 5:return Me(s.type);case 16:return Me("Lazy");case 13:return s.child!==t&&t!==null?Me("Suspense Fallback"):Me("Suspense");case 19:return Me("SuspenseList");case 0:case 15:return gt(s.type,!1);case 11:return gt(s.type.render,!1);case 1:return gt(s.type,!0);case 31:return Me("Activity");default:return""}}function Fe(s){try{var t="",a=null;do t+=oe(s,a),a=s,s=s.return;while(s);return t}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Qe=Object.prototype.hasOwnProperty,Qs=n.unstable_scheduleCallback,Hs=n.unstable_cancelCallback,bt=n.unstable_shouldYield,ot=n.unstable_requestPaint,Ds=n.unstable_now,G=n.unstable_getCurrentPriorityLevel,Be=n.unstable_ImmediatePriority,ze=n.unstable_UserBlockingPriority,Ie=n.unstable_NormalPriority,ks=n.unstable_LowPriority,Ye=n.unstable_IdlePriority,dt=n.log,gs=n.unstable_setDisableYieldValue,Is=null,ve=null;function We(s){if(typeof dt=="function"&&gs(s),ve&&typeof ve.setStrictMode=="function")try{ve.setStrictMode(Is,s)}catch{}}var vs=Math.clz32?Math.clz32:js,At=Math.log,lt=Math.LN2;function js(s){return s>>>=0,s===0?32:31-(At(s)/lt|0)|0}var Ys=256,aa=262144,ka=4194304;function Yt(s){var t=s&42;if(t!==0)return t;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Ba(s,t,a){var l=s.pendingLanes;if(l===0)return 0;var c=0,o=s.suspendedLanes,x=s.pingedLanes;s=s.warmLanes;var v=l&134217727;return v!==0?(l=v&~o,l!==0?c=Yt(l):(x&=v,x!==0?c=Yt(x):a||(a=v&~s,a!==0&&(c=Yt(a))))):(v=l&~o,v!==0?c=Yt(v):x!==0?c=Yt(x):a||(a=l&~s,a!==0&&(c=Yt(a)))),c===0?0:t!==0&&t!==c&&(t&o)===0&&(o=c&-c,a=t&-t,o>=a||o===32&&(a&4194048)!==0)?t:c}function le(s,t){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&t)===0}function E(s,t){switch(s){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function je(){var s=ka;return ka<<=1,(ka&62914560)===0&&(ka=4194304),s}function Te(s){for(var t=[],a=0;31>a;a++)t.push(s);return t}function ys(s,t){s.pendingLanes|=t,t!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function io(s,t,a,l,c,o){var x=s.pendingLanes;s.pendingLanes=a,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=a,s.entangledLanes&=a,s.errorRecoveryDisabledLanes&=a,s.shellSuspendCounter=0;var v=s.entanglements,D=s.expirationTimes,J=s.hiddenUpdates;for(a=x&~a;0<a;){var re=31-vs(a),he=1<<re;v[re]=0,D[re]=-1;var Z=J[re];if(Z!==null)for(J[re]=null,re=0;re<Z.length;re++){var se=Z[re];se!==null&&(se.lane&=-536870913)}a&=~he}l!==0&&ri(s,l,0),o!==0&&c===0&&s.tag!==0&&(s.suspendedLanes|=o&~(x&~t))}function ri(s,t,a){s.pendingLanes|=t,s.suspendedLanes&=~t;var l=31-vs(t);s.entangledLanes|=t,s.entanglements[l]=s.entanglements[l]|1073741824|a&261930}function lm(s,t){var a=s.entangledLanes|=t;for(s=s.entanglements;a;){var l=31-vs(a),c=1<<l;c&t|s[l]&t&&(s[l]|=t),a&=~c}}function nm(s,t){var a=t&-t;return a=(a&42)!==0?1:ro(a),(a&(s.suspendedLanes|t))!==0?0:a}function ro(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function co(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function im(){var s=X.p;return s!==0?s:(s=window.event,s===void 0?32:If(s.type))}function rm(s,t){var a=X.p;try{return X.p=s,t()}finally{X.p=a}}var ol=Math.random().toString(36).slice(2),_t="__reactFiber$"+ol,Rt="__reactProps$"+ol,on="__reactContainer$"+ol,oo="__reactEvents$"+ol,Tj="__reactListeners$"+ol,Ej="__reactHandles$"+ol,cm="__reactResources$"+ol,ci="__reactMarker$"+ol;function uo(s){delete s[_t],delete s[Rt],delete s[oo],delete s[Tj],delete s[Ej]}function dn(s){var t=s[_t];if(t)return t;for(var a=s.parentNode;a;){if(t=a[on]||a[_t]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(s=zf(s);s!==null;){if(a=s[_t])return a;s=zf(s)}return t}s=a,a=s.parentNode}return null}function un(s){if(s=s[_t]||s[on]){var t=s.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return s}return null}function oi(s){var t=s.tag;if(t===5||t===26||t===27||t===6)return s.stateNode;throw Error(d(33))}function mn(s){var t=s[cm];return t||(t=s[cm]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Nt(s){s[ci]=!0}var om=new Set,dm={};function Ul(s,t){hn(s,t),hn(s+"Capture",t)}function hn(s,t){for(dm[s]=t,s=0;s<t.length;s++)om.add(t[s])}var zj=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),um={},mm={};function Mj(s){return Qe.call(mm,s)?!0:Qe.call(um,s)?!1:zj.test(s)?mm[s]=!0:(um[s]=!0,!1)}function br(s,t,a){if(Mj(t))if(a===null)s.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":s.removeAttribute(t);return;case"boolean":var l=t.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){s.removeAttribute(t);return}}s.setAttribute(t,""+a)}}function Nr(s,t,a){if(a===null)s.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(t);return}s.setAttribute(t,""+a)}}function Ha(s,t,a,l){if(l===null)s.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttributeNS(t,a,""+l)}}function la(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function hm(s){var t=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Aj(s,t,a){var l=Object.getOwnPropertyDescriptor(s.constructor.prototype,t);if(!s.hasOwnProperty(t)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var c=l.get,o=l.set;return Object.defineProperty(s,t,{configurable:!0,get:function(){return c.call(this)},set:function(x){a=""+x,o.call(this,x)}}),Object.defineProperty(s,t,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(x){a=""+x},stopTracking:function(){s._valueTracker=null,delete s[t]}}}}function mo(s){if(!s._valueTracker){var t=hm(s)?"checked":"value";s._valueTracker=Aj(s,t,""+s[t])}}function xm(s){if(!s)return!1;var t=s._valueTracker;if(!t)return!0;var a=t.getValue(),l="";return s&&(l=hm(s)?s.checked?"true":"false":s.value),s=l,s!==a?(t.setValue(s),!0):!1}function yr(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Dj=/[\n"\\]/g;function na(s){return s.replace(Dj,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function ho(s,t,a,l,c,o,x,v){s.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?s.type=x:s.removeAttribute("type"),t!=null?x==="number"?(t===0&&s.value===""||s.value!=t)&&(s.value=""+la(t)):s.value!==""+la(t)&&(s.value=""+la(t)):x!=="submit"&&x!=="reset"||s.removeAttribute("value"),t!=null?xo(s,x,la(t)):a!=null?xo(s,x,la(a)):l!=null&&s.removeAttribute("value"),c==null&&o!=null&&(s.defaultChecked=!!o),c!=null&&(s.checked=c&&typeof c!="function"&&typeof c!="symbol"),v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?s.name=""+la(v):s.removeAttribute("name")}function fm(s,t,a,l,c,o,x,v){if(o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(s.type=o),t!=null||a!=null){if(!(o!=="submit"&&o!=="reset"||t!=null)){mo(s);return}a=a!=null?""+la(a):"",t=t!=null?""+la(t):a,v||t===s.value||(s.value=t),s.defaultValue=t}l=l??c,l=typeof l!="function"&&typeof l!="symbol"&&!!l,s.checked=v?s.checked:!!l,s.defaultChecked=!!l,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(s.name=x),mo(s)}function xo(s,t,a){t==="number"&&yr(s.ownerDocument)===s||s.defaultValue===""+a||(s.defaultValue=""+a)}function xn(s,t,a,l){if(s=s.options,t){t={};for(var c=0;c<a.length;c++)t["$"+a[c]]=!0;for(a=0;a<s.length;a++)c=t.hasOwnProperty("$"+s[a].value),s[a].selected!==c&&(s[a].selected=c),c&&l&&(s[a].defaultSelected=!0)}else{for(a=""+la(a),t=null,c=0;c<s.length;c++){if(s[c].value===a){s[c].selected=!0,l&&(s[c].defaultSelected=!0);return}t!==null||s[c].disabled||(t=s[c])}t!==null&&(t.selected=!0)}}function pm(s,t,a){if(t!=null&&(t=""+la(t),t!==s.value&&(s.value=t),a==null)){s.defaultValue!==t&&(s.defaultValue=t);return}s.defaultValue=a!=null?""+la(a):""}function gm(s,t,a,l){if(t==null){if(l!=null){if(a!=null)throw Error(d(92));if(we(l)){if(1<l.length)throw Error(d(93));l=l[0]}a=l}a==null&&(a=""),t=a}a=la(t),s.defaultValue=a,l=s.textContent,l===a&&l!==""&&l!==null&&(s.value=l),mo(s)}function fn(s,t){if(t){var a=s.firstChild;if(a&&a===s.lastChild&&a.nodeType===3){a.nodeValue=t;return}}s.textContent=t}var Oj=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function jm(s,t,a){var l=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?s.setProperty(t,""):t==="float"?s.cssFloat="":s[t]="":l?s.setProperty(t,a):typeof a!="number"||a===0||Oj.has(t)?t==="float"?s.cssFloat=a:s[t]=(""+a).trim():s[t]=a+"px"}function vm(s,t,a){if(t!=null&&typeof t!="object")throw Error(d(62));if(s=s.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||t!=null&&t.hasOwnProperty(l)||(l.indexOf("--")===0?s.setProperty(l,""):l==="float"?s.cssFloat="":s[l]="");for(var c in t)l=t[c],t.hasOwnProperty(c)&&a[c]!==l&&jm(s,c,l)}else for(var o in t)t.hasOwnProperty(o)&&jm(s,o,t[o])}function fo(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rj=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Lj=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function wr(s){return Lj.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function qa(){}var po=null;function go(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var pn=null,gn=null;function bm(s){var t=un(s);if(t&&(s=t.stateNode)){var a=s[Rt]||null;e:switch(s=t.stateNode,t.type){case"input":if(ho(s,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=s;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+na(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var l=a[t];if(l!==s&&l.form===s.form){var c=l[Rt]||null;if(!c)throw Error(d(90));ho(l,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(t=0;t<a.length;t++)l=a[t],l.form===s.form&&xm(l)}break e;case"textarea":pm(s,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&xn(s,!!a.multiple,t,!1)}}}var jo=!1;function Nm(s,t,a){if(jo)return s(t,a);jo=!0;try{var l=s(t);return l}finally{if(jo=!1,(pn!==null||gn!==null)&&(dc(),pn&&(t=pn,s=gn,gn=pn=null,bm(t),s)))for(t=0;t<s.length;t++)bm(s[t])}}function di(s,t){var a=s.stateNode;if(a===null)return null;var l=a[Rt]||null;if(l===null)return null;a=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(s=s.type,l=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!l;break e;default:s=!1}if(s)return null;if(a&&typeof a!="function")throw Error(d(231,t,typeof a));return a}var Ga=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vo=!1;if(Ga)try{var ui={};Object.defineProperty(ui,"passive",{get:function(){vo=!0}}),window.addEventListener("test",ui,ui),window.removeEventListener("test",ui,ui)}catch{vo=!1}var dl=null,bo=null,_r=null;function ym(){if(_r)return _r;var s,t=bo,a=t.length,l,c="value"in dl?dl.value:dl.textContent,o=c.length;for(s=0;s<a&&t[s]===c[s];s++);var x=a-s;for(l=1;l<=x&&t[a-l]===c[o-l];l++);return _r=c.slice(s,1<l?1-l:void 0)}function Sr(s){var t=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&t===13&&(s=13)):s=t,s===10&&(s=13),32<=s||s===13?s:0}function Cr(){return!0}function wm(){return!1}function Lt(s){function t(a,l,c,o,x){this._reactName=a,this._targetInst=c,this.type=l,this.nativeEvent=o,this.target=x,this.currentTarget=null;for(var v in s)s.hasOwnProperty(v)&&(a=s[v],this[v]=a?a(o):o[v]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Cr:wm,this.isPropagationStopped=wm,this}return y(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Cr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Cr)},persist:function(){},isPersistent:Cr}),t}var Bl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kr=Lt(Bl),mi=y({},Bl,{view:0,detail:0}),Uj=Lt(mi),No,yo,hi,Tr=y({},mi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_o,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==hi&&(hi&&s.type==="mousemove"?(No=s.screenX-hi.screenX,yo=s.screenY-hi.screenY):yo=No=0,hi=s),No)},movementY:function(s){return"movementY"in s?s.movementY:yo}}),_m=Lt(Tr),Bj=y({},Tr,{dataTransfer:0}),Hj=Lt(Bj),qj=y({},mi,{relatedTarget:0}),wo=Lt(qj),Gj=y({},Bl,{animationName:0,elapsedTime:0,pseudoElement:0}),Fj=Lt(Gj),Vj=y({},Bl,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),$j=Lt(Vj),Qj=y({},Bl,{data:0}),Sm=Lt(Qj),Ij={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Yj={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xj={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Kj(s){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(s):(s=Xj[s])?!!t[s]:!1}function _o(){return Kj}var Jj=y({},mi,{key:function(s){if(s.key){var t=Ij[s.key]||s.key;if(t!=="Unidentified")return t}return s.type==="keypress"?(s=Sr(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Yj[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_o,charCode:function(s){return s.type==="keypress"?Sr(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Sr(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Pj=Lt(Jj),Zj=y({},Tr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Cm=Lt(Zj),Wj=y({},mi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_o}),ev=Lt(Wj),sv=y({},Bl,{propertyName:0,elapsedTime:0,pseudoElement:0}),tv=Lt(sv),av=y({},Tr,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),lv=Lt(av),nv=y({},Bl,{newState:0,oldState:0}),iv=Lt(nv),rv=[9,13,27,32],So=Ga&&"CompositionEvent"in window,xi=null;Ga&&"documentMode"in document&&(xi=document.documentMode);var cv=Ga&&"TextEvent"in window&&!xi,km=Ga&&(!So||xi&&8<xi&&11>=xi),Tm=" ",Em=!1;function zm(s,t){switch(s){case"keyup":return rv.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mm(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var jn=!1;function ov(s,t){switch(s){case"compositionend":return Mm(t);case"keypress":return t.which!==32?null:(Em=!0,Tm);case"textInput":return s=t.data,s===Tm&&Em?null:s;default:return null}}function dv(s,t){if(jn)return s==="compositionend"||!So&&zm(s,t)?(s=ym(),_r=bo=dl=null,jn=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return km&&t.locale!=="ko"?null:t.data;default:return null}}var uv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Am(s){var t=s&&s.nodeName&&s.nodeName.toLowerCase();return t==="input"?!!uv[s.type]:t==="textarea"}function Dm(s,t,a,l){pn?gn?gn.push(l):gn=[l]:pn=l,t=gc(t,"onChange"),0<t.length&&(a=new kr("onChange","change",null,a,l),s.push({event:a,listeners:t}))}var fi=null,pi=null;function mv(s){pf(s,0)}function Er(s){var t=oi(s);if(xm(t))return s}function Om(s,t){if(s==="change")return t}var Rm=!1;if(Ga){var Co;if(Ga){var ko="oninput"in document;if(!ko){var Lm=document.createElement("div");Lm.setAttribute("oninput","return;"),ko=typeof Lm.oninput=="function"}Co=ko}else Co=!1;Rm=Co&&(!document.documentMode||9<document.documentMode)}function Um(){fi&&(fi.detachEvent("onpropertychange",Bm),pi=fi=null)}function Bm(s){if(s.propertyName==="value"&&Er(pi)){var t=[];Dm(t,pi,s,go(s)),Nm(mv,t)}}function hv(s,t,a){s==="focusin"?(Um(),fi=t,pi=a,fi.attachEvent("onpropertychange",Bm)):s==="focusout"&&Um()}function xv(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Er(pi)}function fv(s,t){if(s==="click")return Er(t)}function pv(s,t){if(s==="input"||s==="change")return Er(t)}function gv(s,t){return s===t&&(s!==0||1/s===1/t)||s!==s&&t!==t}var Xt=typeof Object.is=="function"?Object.is:gv;function gi(s,t){if(Xt(s,t))return!0;if(typeof s!="object"||s===null||typeof t!="object"||t===null)return!1;var a=Object.keys(s),l=Object.keys(t);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var c=a[l];if(!Qe.call(t,c)||!Xt(s[c],t[c]))return!1}return!0}function Hm(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function qm(s,t){var a=Hm(s);s=0;for(var l;a;){if(a.nodeType===3){if(l=s+a.textContent.length,s<=t&&l>=t)return{node:a,offset:t-s};s=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Hm(a)}}function Gm(s,t){return s&&t?s===t?!0:s&&s.nodeType===3?!1:t&&t.nodeType===3?Gm(s,t.parentNode):"contains"in s?s.contains(t):s.compareDocumentPosition?!!(s.compareDocumentPosition(t)&16):!1:!1}function Fm(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var t=yr(s.document);t instanceof s.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)s=t.contentWindow;else break;t=yr(s.document)}return t}function To(s){var t=s&&s.nodeName&&s.nodeName.toLowerCase();return t&&(t==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||t==="textarea"||s.contentEditable==="true")}var jv=Ga&&"documentMode"in document&&11>=document.documentMode,vn=null,Eo=null,ji=null,zo=!1;function Vm(s,t,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;zo||vn==null||vn!==yr(l)||(l=vn,"selectionStart"in l&&To(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),ji&&gi(ji,l)||(ji=l,l=gc(Eo,"onSelect"),0<l.length&&(t=new kr("onSelect","select",null,t,a),s.push({event:t,listeners:l}),t.target=vn)))}function Hl(s,t){var a={};return a[s.toLowerCase()]=t.toLowerCase(),a["Webkit"+s]="webkit"+t,a["Moz"+s]="moz"+t,a}var bn={animationend:Hl("Animation","AnimationEnd"),animationiteration:Hl("Animation","AnimationIteration"),animationstart:Hl("Animation","AnimationStart"),transitionrun:Hl("Transition","TransitionRun"),transitionstart:Hl("Transition","TransitionStart"),transitioncancel:Hl("Transition","TransitionCancel"),transitionend:Hl("Transition","TransitionEnd")},Mo={},$m={};Ga&&($m=document.createElement("div").style,"AnimationEvent"in window||(delete bn.animationend.animation,delete bn.animationiteration.animation,delete bn.animationstart.animation),"TransitionEvent"in window||delete bn.transitionend.transition);function ql(s){if(Mo[s])return Mo[s];if(!bn[s])return s;var t=bn[s],a;for(a in t)if(t.hasOwnProperty(a)&&a in $m)return Mo[s]=t[a];return s}var Qm=ql("animationend"),Im=ql("animationiteration"),Ym=ql("animationstart"),vv=ql("transitionrun"),bv=ql("transitionstart"),Nv=ql("transitioncancel"),Xm=ql("transitionend"),Km=new Map,Ao="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ao.push("scrollEnd");function va(s,t){Km.set(s,t),Ul(t,[s])}var zr=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},ia=[],Nn=0,Do=0;function Mr(){for(var s=Nn,t=Do=Nn=0;t<s;){var a=ia[t];ia[t++]=null;var l=ia[t];ia[t++]=null;var c=ia[t];ia[t++]=null;var o=ia[t];if(ia[t++]=null,l!==null&&c!==null){var x=l.pending;x===null?c.next=c:(c.next=x.next,x.next=c),l.pending=c}o!==0&&Jm(a,c,o)}}function Ar(s,t,a,l){ia[Nn++]=s,ia[Nn++]=t,ia[Nn++]=a,ia[Nn++]=l,Do|=l,s.lanes|=l,s=s.alternate,s!==null&&(s.lanes|=l)}function Oo(s,t,a,l){return Ar(s,t,a,l),Dr(s)}function Gl(s,t){return Ar(s,null,null,t),Dr(s)}function Jm(s,t,a){s.lanes|=a;var l=s.alternate;l!==null&&(l.lanes|=a);for(var c=!1,o=s.return;o!==null;)o.childLanes|=a,l=o.alternate,l!==null&&(l.childLanes|=a),o.tag===22&&(s=o.stateNode,s===null||s._visibility&1||(c=!0)),s=o,o=o.return;return s.tag===3?(o=s.stateNode,c&&t!==null&&(c=31-vs(a),s=o.hiddenUpdates,l=s[c],l===null?s[c]=[t]:l.push(t),t.lane=a|536870912),o):null}function Dr(s){if(50<qi)throw qi=0,Vd=null,Error(d(185));for(var t=s.return;t!==null;)s=t,t=s.return;return s.tag===3?s.stateNode:null}var yn={};function yv(s,t,a,l){this.tag=s,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kt(s,t,a,l){return new yv(s,t,a,l)}function Ro(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Fa(s,t){var a=s.alternate;return a===null?(a=Kt(s.tag,t,s.key,s.mode),a.elementType=s.elementType,a.type=s.type,a.stateNode=s.stateNode,a.alternate=s,s.alternate=a):(a.pendingProps=t,a.type=s.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=s.flags&65011712,a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,t=s.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=s.sibling,a.index=s.index,a.ref=s.ref,a.refCleanup=s.refCleanup,a}function Pm(s,t){s.flags&=65011714;var a=s.alternate;return a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),s}function Or(s,t,a,l,c,o){var x=0;if(l=s,typeof s=="function")Ro(s)&&(x=1);else if(typeof s=="string")x=kb(s,a,fe.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case W:return s=Kt(31,a,t,c),s.elementType=W,s.lanes=o,s;case U:return Fl(a.children,c,o,t);case O:x=8,c|=24;break;case B:return s=Kt(12,a,t,c|2),s.elementType=B,s.lanes=o,s;case Y:return s=Kt(13,a,t,c),s.elementType=Y,s.lanes=o,s;case Q:return s=Kt(19,a,t,c),s.elementType=Q,s.lanes=o,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case L:x=10;break e;case I:x=9;break e;case M:x=11;break e;case z:x=14;break e;case A:x=16,l=null;break e}x=29,a=Error(d(130,s===null?"null":typeof s,"")),l=null}return t=Kt(x,a,t,c),t.elementType=s,t.type=l,t.lanes=o,t}function Fl(s,t,a,l){return s=Kt(7,s,l,t),s.lanes=a,s}function Lo(s,t,a){return s=Kt(6,s,null,t),s.lanes=a,s}function Zm(s){var t=Kt(18,null,null,0);return t.stateNode=s,t}function Uo(s,t,a){return t=Kt(4,s.children!==null?s.children:[],s.key,t),t.lanes=a,t.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},t}var Wm=new WeakMap;function ra(s,t){if(typeof s=="object"&&s!==null){var a=Wm.get(s);return a!==void 0?a:(t={value:s,source:t,stack:Fe(t)},Wm.set(s,t),t)}return{value:s,source:t,stack:Fe(t)}}var wn=[],_n=0,Rr=null,vi=0,ca=[],oa=0,ul=null,Ta=1,Ea="";function Va(s,t){wn[_n++]=vi,wn[_n++]=Rr,Rr=s,vi=t}function eh(s,t,a){ca[oa++]=Ta,ca[oa++]=Ea,ca[oa++]=ul,ul=s;var l=Ta;s=Ea;var c=32-vs(l)-1;l&=~(1<<c),a+=1;var o=32-vs(t)+c;if(30<o){var x=c-c%5;o=(l&(1<<x)-1).toString(32),l>>=x,c-=x,Ta=1<<32-vs(t)+c|a<<c|l,Ea=o+s}else Ta=1<<o|a<<c|l,Ea=s}function Bo(s){s.return!==null&&(Va(s,1),eh(s,1,0))}function Ho(s){for(;s===Rr;)Rr=wn[--_n],wn[_n]=null,vi=wn[--_n],wn[_n]=null;for(;s===ul;)ul=ca[--oa],ca[oa]=null,Ea=ca[--oa],ca[oa]=null,Ta=ca[--oa],ca[oa]=null}function sh(s,t){ca[oa++]=Ta,ca[oa++]=Ea,ca[oa++]=ul,Ta=t.id,Ea=t.overflow,ul=s}var St=null,Gs=null,ps=!1,ml=null,da=!1,qo=Error(d(519));function hl(s){var t=Error(d(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw bi(ra(t,s)),qo}function th(s){var t=s.stateNode,a=s.type,l=s.memoizedProps;switch(t[_t]=s,t[Rt]=l,a){case"dialog":us("cancel",t),us("close",t);break;case"iframe":case"object":case"embed":us("load",t);break;case"video":case"audio":for(a=0;a<Fi.length;a++)us(Fi[a],t);break;case"source":us("error",t);break;case"img":case"image":case"link":us("error",t),us("load",t);break;case"details":us("toggle",t);break;case"input":us("invalid",t),fm(t,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":us("invalid",t);break;case"textarea":us("invalid",t),gm(t,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||l.suppressHydrationWarning===!0||bf(t.textContent,a)?(l.popover!=null&&(us("beforetoggle",t),us("toggle",t)),l.onScroll!=null&&us("scroll",t),l.onScrollEnd!=null&&us("scrollend",t),l.onClick!=null&&(t.onclick=qa),t=!0):t=!1,t||hl(s,!0)}function ah(s){for(St=s.return;St;)switch(St.tag){case 5:case 31:case 13:da=!1;return;case 27:case 3:da=!0;return;default:St=St.return}}function Sn(s){if(s!==St)return!1;if(!ps)return ah(s),ps=!0,!1;var t=s.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=s.type,a=!(a!=="form"&&a!=="button")||lu(s.type,s.memoizedProps)),a=!a),a&&Gs&&hl(s),ah(s),t===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(d(317));Gs=Ef(s)}else if(t===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(d(317));Gs=Ef(s)}else t===27?(t=Gs,kl(s.type)?(s=ou,ou=null,Gs=s):Gs=t):Gs=St?ma(s.stateNode.nextSibling):null;return!0}function Vl(){Gs=St=null,ps=!1}function Go(){var s=ml;return s!==null&&(qt===null?qt=s:qt.push.apply(qt,s),ml=null),s}function bi(s){ml===null?ml=[s]:ml.push(s)}var Fo=ce(null),$l=null,$a=null;function xl(s,t,a){ie(Fo,t._currentValue),t._currentValue=a}function Qa(s){s._currentValue=Fo.current,ue(Fo)}function Vo(s,t,a){for(;s!==null;){var l=s.alternate;if((s.childLanes&t)!==t?(s.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),s===a)break;s=s.return}}function $o(s,t,a,l){var c=s.child;for(c!==null&&(c.return=s);c!==null;){var o=c.dependencies;if(o!==null){var x=c.child;o=o.firstContext;e:for(;o!==null;){var v=o;o=c;for(var D=0;D<t.length;D++)if(v.context===t[D]){o.lanes|=a,v=o.alternate,v!==null&&(v.lanes|=a),Vo(o.return,a,s),l||(x=null);break e}o=v.next}}else if(c.tag===18){if(x=c.return,x===null)throw Error(d(341));x.lanes|=a,o=x.alternate,o!==null&&(o.lanes|=a),Vo(x,a,s),x=null}else x=c.child;if(x!==null)x.return=c;else for(x=c;x!==null;){if(x===s){x=null;break}if(c=x.sibling,c!==null){c.return=x.return,x=c;break}x=x.return}c=x}}function Cn(s,t,a,l){s=null;for(var c=t,o=!1;c!==null;){if(!o){if((c.flags&524288)!==0)o=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var x=c.alternate;if(x===null)throw Error(d(387));if(x=x.memoizedProps,x!==null){var v=c.type;Xt(c.pendingProps.value,x.value)||(s!==null?s.push(v):s=[v])}}else if(c===ee.current){if(x=c.alternate,x===null)throw Error(d(387));x.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(s!==null?s.push(Yi):s=[Yi])}c=c.return}s!==null&&$o(t,s,a,l),t.flags|=262144}function Lr(s){for(s=s.firstContext;s!==null;){if(!Xt(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Ql(s){$l=s,$a=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Ct(s){return lh($l,s)}function Ur(s,t){return $l===null&&Ql(s),lh(s,t)}function lh(s,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},$a===null){if(s===null)throw Error(d(308));$a=t,s.dependencies={lanes:0,firstContext:t},s.flags|=524288}else $a=$a.next=t;return a}var wv=typeof AbortController<"u"?AbortController:function(){var s=[],t=this.signal={aborted:!1,addEventListener:function(a,l){s.push(l)}};this.abort=function(){t.aborted=!0,s.forEach(function(a){return a()})}},_v=n.unstable_scheduleCallback,Sv=n.unstable_NormalPriority,ut={$$typeof:L,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Qo(){return{controller:new wv,data:new Map,refCount:0}}function Ni(s){s.refCount--,s.refCount===0&&_v(Sv,function(){s.controller.abort()})}var yi=null,Io=0,kn=0,Tn=null;function Cv(s,t){if(yi===null){var a=yi=[];Io=0,kn=Kd(),Tn={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Io++,t.then(nh,nh),t}function nh(){if(--Io===0&&yi!==null){Tn!==null&&(Tn.status="fulfilled");var s=yi;yi=null,kn=0,Tn=null;for(var t=0;t<s.length;t++)(0,s[t])()}}function kv(s,t){var a=[],l={status:"pending",value:null,reason:null,then:function(c){a.push(c)}};return s.then(function(){l.status="fulfilled",l.value=t;for(var c=0;c<a.length;c++)(0,a[c])(t)},function(c){for(l.status="rejected",l.reason=c,c=0;c<a.length;c++)(0,a[c])(void 0)}),l}var ih=R.S;R.S=function(s,t){Vx=Ds(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&Cv(s,t),ih!==null&&ih(s,t)};var Il=ce(null);function Yo(){var s=Il.current;return s!==null?s:Os.pooledCache}function Br(s,t){t===null?ie(Il,Il.current):ie(Il,t.pool)}function rh(){var s=Yo();return s===null?null:{parent:ut._currentValue,pool:s}}var En=Error(d(460)),Xo=Error(d(474)),Hr=Error(d(542)),qr={then:function(){}};function ch(s){return s=s.status,s==="fulfilled"||s==="rejected"}function oh(s,t,a){switch(a=s[a],a===void 0?s.push(t):a!==t&&(t.then(qa,qa),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw s=t.reason,uh(s),s;default:if(typeof t.status=="string")t.then(qa,qa);else{if(s=Os,s!==null&&100<s.shellSuspendCounter)throw Error(d(482));s=t,s.status="pending",s.then(function(l){if(t.status==="pending"){var c=t;c.status="fulfilled",c.value=l}},function(l){if(t.status==="pending"){var c=t;c.status="rejected",c.reason=l}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw s=t.reason,uh(s),s}throw Xl=t,En}}function Yl(s){try{var t=s._init;return t(s._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Xl=a,En):a}}var Xl=null;function dh(){if(Xl===null)throw Error(d(459));var s=Xl;return Xl=null,s}function uh(s){if(s===En||s===Hr)throw Error(d(483))}var zn=null,wi=0;function Gr(s){var t=wi;return wi+=1,zn===null&&(zn=[]),oh(zn,s,t)}function _i(s,t){t=t.props.ref,s.ref=t!==void 0?t:null}function Fr(s,t){throw t.$$typeof===N?Error(d(525)):(s=Object.prototype.toString.call(t),Error(d(31,s==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":s)))}function mh(s){function t(F,H){if(s){var K=F.deletions;K===null?(F.deletions=[H],F.flags|=16):K.push(H)}}function a(F,H){if(!s)return null;for(;H!==null;)t(F,H),H=H.sibling;return null}function l(F){for(var H=new Map;F!==null;)F.key!==null?H.set(F.key,F):H.set(F.index,F),F=F.sibling;return H}function c(F,H){return F=Fa(F,H),F.index=0,F.sibling=null,F}function o(F,H,K){return F.index=K,s?(K=F.alternate,K!==null?(K=K.index,K<H?(F.flags|=67108866,H):K):(F.flags|=67108866,H)):(F.flags|=1048576,H)}function x(F){return s&&F.alternate===null&&(F.flags|=67108866),F}function v(F,H,K,de){return H===null||H.tag!==6?(H=Lo(K,F.mode,de),H.return=F,H):(H=c(H,K),H.return=F,H)}function D(F,H,K,de){var Ue=K.type;return Ue===U?re(F,H,K.props.children,de,K.key):H!==null&&(H.elementType===Ue||typeof Ue=="object"&&Ue!==null&&Ue.$$typeof===A&&Yl(Ue)===H.type)?(H=c(H,K.props),_i(H,K),H.return=F,H):(H=Or(K.type,K.key,K.props,null,F.mode,de),_i(H,K),H.return=F,H)}function J(F,H,K,de){return H===null||H.tag!==4||H.stateNode.containerInfo!==K.containerInfo||H.stateNode.implementation!==K.implementation?(H=Uo(K,F.mode,de),H.return=F,H):(H=c(H,K.children||[]),H.return=F,H)}function re(F,H,K,de,Ue){return H===null||H.tag!==7?(H=Fl(K,F.mode,de,Ue),H.return=F,H):(H=c(H,K),H.return=F,H)}function he(F,H,K){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return H=Lo(""+H,F.mode,K),H.return=F,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case T:return K=Or(H.type,H.key,H.props,null,F.mode,K),_i(K,H),K.return=F,K;case w:return H=Uo(H,F.mode,K),H.return=F,H;case A:return H=Yl(H),he(F,H,K)}if(we(H)||_e(H))return H=Fl(H,F.mode,K,null),H.return=F,H;if(typeof H.then=="function")return he(F,Gr(H),K);if(H.$$typeof===L)return he(F,Ur(F,H),K);Fr(F,H)}return null}function Z(F,H,K,de){var Ue=H!==null?H.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return Ue!==null?null:v(F,H,""+K,de);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case T:return K.key===Ue?D(F,H,K,de):null;case w:return K.key===Ue?J(F,H,K,de):null;case A:return K=Yl(K),Z(F,H,K,de)}if(we(K)||_e(K))return Ue!==null?null:re(F,H,K,de,null);if(typeof K.then=="function")return Z(F,H,Gr(K),de);if(K.$$typeof===L)return Z(F,H,Ur(F,K),de);Fr(F,K)}return null}function se(F,H,K,de,Ue){if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return F=F.get(K)||null,v(H,F,""+de,Ue);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case T:return F=F.get(de.key===null?K:de.key)||null,D(H,F,de,Ue);case w:return F=F.get(de.key===null?K:de.key)||null,J(H,F,de,Ue);case A:return de=Yl(de),se(F,H,K,de,Ue)}if(we(de)||_e(de))return F=F.get(K)||null,re(H,F,de,Ue,null);if(typeof de.then=="function")return se(F,H,K,Gr(de),Ue);if(de.$$typeof===L)return se(F,H,K,Ur(H,de),Ue);Fr(H,de)}return null}function ke(F,H,K,de){for(var Ue=null,bs=null,Ee=H,Ze=H=0,xs=null;Ee!==null&&Ze<K.length;Ze++){Ee.index>Ze?(xs=Ee,Ee=null):xs=Ee.sibling;var Ns=Z(F,Ee,K[Ze],de);if(Ns===null){Ee===null&&(Ee=xs);break}s&&Ee&&Ns.alternate===null&&t(F,Ee),H=o(Ns,H,Ze),bs===null?Ue=Ns:bs.sibling=Ns,bs=Ns,Ee=xs}if(Ze===K.length)return a(F,Ee),ps&&Va(F,Ze),Ue;if(Ee===null){for(;Ze<K.length;Ze++)Ee=he(F,K[Ze],de),Ee!==null&&(H=o(Ee,H,Ze),bs===null?Ue=Ee:bs.sibling=Ee,bs=Ee);return ps&&Va(F,Ze),Ue}for(Ee=l(Ee);Ze<K.length;Ze++)xs=se(Ee,F,Ze,K[Ze],de),xs!==null&&(s&&xs.alternate!==null&&Ee.delete(xs.key===null?Ze:xs.key),H=o(xs,H,Ze),bs===null?Ue=xs:bs.sibling=xs,bs=xs);return s&&Ee.forEach(function(Al){return t(F,Al)}),ps&&Va(F,Ze),Ue}function Ve(F,H,K,de){if(K==null)throw Error(d(151));for(var Ue=null,bs=null,Ee=H,Ze=H=0,xs=null,Ns=K.next();Ee!==null&&!Ns.done;Ze++,Ns=K.next()){Ee.index>Ze?(xs=Ee,Ee=null):xs=Ee.sibling;var Al=Z(F,Ee,Ns.value,de);if(Al===null){Ee===null&&(Ee=xs);break}s&&Ee&&Al.alternate===null&&t(F,Ee),H=o(Al,H,Ze),bs===null?Ue=Al:bs.sibling=Al,bs=Al,Ee=xs}if(Ns.done)return a(F,Ee),ps&&Va(F,Ze),Ue;if(Ee===null){for(;!Ns.done;Ze++,Ns=K.next())Ns=he(F,Ns.value,de),Ns!==null&&(H=o(Ns,H,Ze),bs===null?Ue=Ns:bs.sibling=Ns,bs=Ns);return ps&&Va(F,Ze),Ue}for(Ee=l(Ee);!Ns.done;Ze++,Ns=K.next())Ns=se(Ee,F,Ze,Ns.value,de),Ns!==null&&(s&&Ns.alternate!==null&&Ee.delete(Ns.key===null?Ze:Ns.key),H=o(Ns,H,Ze),bs===null?Ue=Ns:bs.sibling=Ns,bs=Ns);return s&&Ee.forEach(function(Bb){return t(F,Bb)}),ps&&Va(F,Ze),Ue}function zs(F,H,K,de){if(typeof K=="object"&&K!==null&&K.type===U&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case T:e:{for(var Ue=K.key;H!==null;){if(H.key===Ue){if(Ue=K.type,Ue===U){if(H.tag===7){a(F,H.sibling),de=c(H,K.props.children),de.return=F,F=de;break e}}else if(H.elementType===Ue||typeof Ue=="object"&&Ue!==null&&Ue.$$typeof===A&&Yl(Ue)===H.type){a(F,H.sibling),de=c(H,K.props),_i(de,K),de.return=F,F=de;break e}a(F,H);break}else t(F,H);H=H.sibling}K.type===U?(de=Fl(K.props.children,F.mode,de,K.key),de.return=F,F=de):(de=Or(K.type,K.key,K.props,null,F.mode,de),_i(de,K),de.return=F,F=de)}return x(F);case w:e:{for(Ue=K.key;H!==null;){if(H.key===Ue)if(H.tag===4&&H.stateNode.containerInfo===K.containerInfo&&H.stateNode.implementation===K.implementation){a(F,H.sibling),de=c(H,K.children||[]),de.return=F,F=de;break e}else{a(F,H);break}else t(F,H);H=H.sibling}de=Uo(K,F.mode,de),de.return=F,F=de}return x(F);case A:return K=Yl(K),zs(F,H,K,de)}if(we(K))return ke(F,H,K,de);if(_e(K)){if(Ue=_e(K),typeof Ue!="function")throw Error(d(150));return K=Ue.call(K),Ve(F,H,K,de)}if(typeof K.then=="function")return zs(F,H,Gr(K),de);if(K.$$typeof===L)return zs(F,H,Ur(F,K),de);Fr(F,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,H!==null&&H.tag===6?(a(F,H.sibling),de=c(H,K),de.return=F,F=de):(a(F,H),de=Lo(K,F.mode,de),de.return=F,F=de),x(F)):a(F,H)}return function(F,H,K,de){try{wi=0;var Ue=zs(F,H,K,de);return zn=null,Ue}catch(Ee){if(Ee===En||Ee===Hr)throw Ee;var bs=Kt(29,Ee,null,F.mode);return bs.lanes=de,bs.return=F,bs}finally{}}}var Kl=mh(!0),hh=mh(!1),fl=!1;function Ko(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Jo(s,t){s=s.updateQueue,t.updateQueue===s&&(t.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function pl(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function gl(s,t,a){var l=s.updateQueue;if(l===null)return null;if(l=l.shared,(ws&2)!==0){var c=l.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),l.pending=t,t=Dr(s),Jm(s,null,a),t}return Ar(s,l,t,a),Dr(s)}function Si(s,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var l=t.lanes;l&=s.pendingLanes,a|=l,t.lanes=a,lm(s,a)}}function Po(s,t){var a=s.updateQueue,l=s.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var c=null,o=null;if(a=a.firstBaseUpdate,a!==null){do{var x={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};o===null?c=o=x:o=o.next=x,a=a.next}while(a!==null);o===null?c=o=t:o=o.next=t}else c=o=t;a={baseState:l.baseState,firstBaseUpdate:c,lastBaseUpdate:o,shared:l.shared,callbacks:l.callbacks},s.updateQueue=a;return}s=a.lastBaseUpdate,s===null?a.firstBaseUpdate=t:s.next=t,a.lastBaseUpdate=t}var Zo=!1;function Ci(){if(Zo){var s=Tn;if(s!==null)throw s}}function ki(s,t,a,l){Zo=!1;var c=s.updateQueue;fl=!1;var o=c.firstBaseUpdate,x=c.lastBaseUpdate,v=c.shared.pending;if(v!==null){c.shared.pending=null;var D=v,J=D.next;D.next=null,x===null?o=J:x.next=J,x=D;var re=s.alternate;re!==null&&(re=re.updateQueue,v=re.lastBaseUpdate,v!==x&&(v===null?re.firstBaseUpdate=J:v.next=J,re.lastBaseUpdate=D))}if(o!==null){var he=c.baseState;x=0,re=J=D=null,v=o;do{var Z=v.lane&-536870913,se=Z!==v.lane;if(se?(hs&Z)===Z:(l&Z)===Z){Z!==0&&Z===kn&&(Zo=!0),re!==null&&(re=re.next={lane:0,tag:v.tag,payload:v.payload,callback:null,next:null});e:{var ke=s,Ve=v;Z=t;var zs=a;switch(Ve.tag){case 1:if(ke=Ve.payload,typeof ke=="function"){he=ke.call(zs,he,Z);break e}he=ke;break e;case 3:ke.flags=ke.flags&-65537|128;case 0:if(ke=Ve.payload,Z=typeof ke=="function"?ke.call(zs,he,Z):ke,Z==null)break e;he=y({},he,Z);break e;case 2:fl=!0}}Z=v.callback,Z!==null&&(s.flags|=64,se&&(s.flags|=8192),se=c.callbacks,se===null?c.callbacks=[Z]:se.push(Z))}else se={lane:Z,tag:v.tag,payload:v.payload,callback:v.callback,next:null},re===null?(J=re=se,D=he):re=re.next=se,x|=Z;if(v=v.next,v===null){if(v=c.shared.pending,v===null)break;se=v,v=se.next,se.next=null,c.lastBaseUpdate=se,c.shared.pending=null}}while(!0);re===null&&(D=he),c.baseState=D,c.firstBaseUpdate=J,c.lastBaseUpdate=re,o===null&&(c.shared.lanes=0),yl|=x,s.lanes=x,s.memoizedState=he}}function xh(s,t){if(typeof s!="function")throw Error(d(191,s));s.call(t)}function fh(s,t){var a=s.callbacks;if(a!==null)for(s.callbacks=null,s=0;s<a.length;s++)xh(a[s],t)}var Mn=ce(null),Vr=ce(0);function ph(s,t){s=el,ie(Vr,s),ie(Mn,t),el=s|t.baseLanes}function Wo(){ie(Vr,el),ie(Mn,Mn.current)}function ed(){el=Vr.current,ue(Mn),ue(Vr)}var Jt=ce(null),ua=null;function jl(s){var t=s.alternate;ie(nt,nt.current&1),ie(Jt,s),ua===null&&(t===null||Mn.current!==null||t.memoizedState!==null)&&(ua=s)}function sd(s){ie(nt,nt.current),ie(Jt,s),ua===null&&(ua=s)}function gh(s){s.tag===22?(ie(nt,nt.current),ie(Jt,s),ua===null&&(ua=s)):vl()}function vl(){ie(nt,nt.current),ie(Jt,Jt.current)}function Pt(s){ue(Jt),ua===s&&(ua=null),ue(nt)}var nt=ce(0);function $r(s){for(var t=s;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||ru(a)||cu(a)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break;for(;t.sibling===null;){if(t.return===null||t.return===s)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ia=0,Je=null,Ts=null,mt=null,Qr=!1,An=!1,Jl=!1,Ir=0,Ti=0,Dn=null,Tv=0;function Js(){throw Error(d(321))}function td(s,t){if(t===null)return!1;for(var a=0;a<t.length&&a<s.length;a++)if(!Xt(s[a],t[a]))return!1;return!0}function ad(s,t,a,l,c,o){return Ia=o,Je=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,R.H=s===null||s.memoizedState===null?ex:jd,Jl=!1,o=a(l,c),Jl=!1,An&&(o=vh(t,a,l,c)),jh(s),o}function jh(s){R.H=Mi;var t=Ts!==null&&Ts.next!==null;if(Ia=0,mt=Ts=Je=null,Qr=!1,Ti=0,Dn=null,t)throw Error(d(300));s===null||ht||(s=s.dependencies,s!==null&&Lr(s)&&(ht=!0))}function vh(s,t,a,l){Je=s;var c=0;do{if(An&&(Dn=null),Ti=0,An=!1,25<=c)throw Error(d(301));if(c+=1,mt=Ts=null,s.updateQueue!=null){var o=s.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,o.memoCache!=null&&(o.memoCache.index=0)}R.H=sx,o=t(a,l)}while(An);return o}function Ev(){var s=R.H,t=s.useState()[0];return t=typeof t.then=="function"?Ei(t):t,s=s.useState()[0],(Ts!==null?Ts.memoizedState:null)!==s&&(Je.flags|=1024),t}function ld(){var s=Ir!==0;return Ir=0,s}function nd(s,t,a){t.updateQueue=s.updateQueue,t.flags&=-2053,s.lanes&=~a}function id(s){if(Qr){for(s=s.memoizedState;s!==null;){var t=s.queue;t!==null&&(t.pending=null),s=s.next}Qr=!1}Ia=0,mt=Ts=Je=null,An=!1,Ti=Ir=0,Dn=null}function Dt(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mt===null?Je.memoizedState=mt=s:mt=mt.next=s,mt}function it(){if(Ts===null){var s=Je.alternate;s=s!==null?s.memoizedState:null}else s=Ts.next;var t=mt===null?Je.memoizedState:mt.next;if(t!==null)mt=t,Ts=s;else{if(s===null)throw Je.alternate===null?Error(d(467)):Error(d(310));Ts=s,s={memoizedState:Ts.memoizedState,baseState:Ts.baseState,baseQueue:Ts.baseQueue,queue:Ts.queue,next:null},mt===null?Je.memoizedState=mt=s:mt=mt.next=s}return mt}function Yr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ei(s){var t=Ti;return Ti+=1,Dn===null&&(Dn=[]),s=oh(Dn,s,t),t=Je,(mt===null?t.memoizedState:mt.next)===null&&(t=t.alternate,R.H=t===null||t.memoizedState===null?ex:jd),s}function Xr(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Ei(s);if(s.$$typeof===L)return Ct(s)}throw Error(d(438,String(s)))}function rd(s){var t=null,a=Je.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var l=Je.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(t={data:l.data.map(function(c){return c.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=Yr(),Je.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(s),l=0;l<s;l++)a[l]=xe;return t.index++,a}function Ya(s,t){return typeof t=="function"?t(s):t}function Kr(s){var t=it();return cd(t,Ts,s)}function cd(s,t,a){var l=s.queue;if(l===null)throw Error(d(311));l.lastRenderedReducer=a;var c=s.baseQueue,o=l.pending;if(o!==null){if(c!==null){var x=c.next;c.next=o.next,o.next=x}t.baseQueue=c=o,l.pending=null}if(o=s.baseState,c===null)s.memoizedState=o;else{t=c.next;var v=x=null,D=null,J=t,re=!1;do{var he=J.lane&-536870913;if(he!==J.lane?(hs&he)===he:(Ia&he)===he){var Z=J.revertLane;if(Z===0)D!==null&&(D=D.next={lane:0,revertLane:0,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),he===kn&&(re=!0);else if((Ia&Z)===Z){J=J.next,Z===kn&&(re=!0);continue}else he={lane:0,revertLane:J.revertLane,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},D===null?(v=D=he,x=o):D=D.next=he,Je.lanes|=Z,yl|=Z;he=J.action,Jl&&a(o,he),o=J.hasEagerState?J.eagerState:a(o,he)}else Z={lane:he,revertLane:J.revertLane,gesture:J.gesture,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},D===null?(v=D=Z,x=o):D=D.next=Z,Je.lanes|=he,yl|=he;J=J.next}while(J!==null&&J!==t);if(D===null?x=o:D.next=v,!Xt(o,s.memoizedState)&&(ht=!0,re&&(a=Tn,a!==null)))throw a;s.memoizedState=o,s.baseState=x,s.baseQueue=D,l.lastRenderedState=o}return c===null&&(l.lanes=0),[s.memoizedState,l.dispatch]}function od(s){var t=it(),a=t.queue;if(a===null)throw Error(d(311));a.lastRenderedReducer=s;var l=a.dispatch,c=a.pending,o=t.memoizedState;if(c!==null){a.pending=null;var x=c=c.next;do o=s(o,x.action),x=x.next;while(x!==c);Xt(o,t.memoizedState)||(ht=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),a.lastRenderedState=o}return[o,l]}function bh(s,t,a){var l=Je,c=it(),o=ps;if(o){if(a===void 0)throw Error(d(407));a=a()}else a=t();var x=!Xt((Ts||c).memoizedState,a);if(x&&(c.memoizedState=a,ht=!0),c=c.queue,md(wh.bind(null,l,c,s),[s]),c.getSnapshot!==t||x||mt!==null&&mt.memoizedState.tag&1){if(l.flags|=2048,On(9,{destroy:void 0},yh.bind(null,l,c,a,t),null),Os===null)throw Error(d(349));o||(Ia&127)!==0||Nh(l,t,a)}return a}function Nh(s,t,a){s.flags|=16384,s={getSnapshot:t,value:a},t=Je.updateQueue,t===null?(t=Yr(),Je.updateQueue=t,t.stores=[s]):(a=t.stores,a===null?t.stores=[s]:a.push(s))}function yh(s,t,a,l){t.value=a,t.getSnapshot=l,_h(t)&&Sh(s)}function wh(s,t,a){return a(function(){_h(t)&&Sh(s)})}function _h(s){var t=s.getSnapshot;s=s.value;try{var a=t();return!Xt(s,a)}catch{return!0}}function Sh(s){var t=Gl(s,2);t!==null&&Gt(t,s,2)}function dd(s){var t=Dt();if(typeof s=="function"){var a=s;if(s=a(),Jl){We(!0);try{a()}finally{We(!1)}}}return t.memoizedState=t.baseState=s,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ya,lastRenderedState:s},t}function Ch(s,t,a,l){return s.baseState=a,cd(s,Ts,typeof l=="function"?l:Ya)}function zv(s,t,a,l,c){if(Zr(s))throw Error(d(485));if(s=t.action,s!==null){var o={payload:c,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){o.listeners.push(x)}};R.T!==null?a(!0):o.isTransition=!1,l(o),a=t.pending,a===null?(o.next=t.pending=o,kh(t,o)):(o.next=a.next,t.pending=a.next=o)}}function kh(s,t){var a=t.action,l=t.payload,c=s.state;if(t.isTransition){var o=R.T,x={};R.T=x;try{var v=a(c,l),D=R.S;D!==null&&D(x,v),Th(s,t,v)}catch(J){ud(s,t,J)}finally{o!==null&&x.types!==null&&(o.types=x.types),R.T=o}}else try{o=a(c,l),Th(s,t,o)}catch(J){ud(s,t,J)}}function Th(s,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Eh(s,t,l)},function(l){return ud(s,t,l)}):Eh(s,t,a)}function Eh(s,t,a){t.status="fulfilled",t.value=a,zh(t),s.state=a,t=s.pending,t!==null&&(a=t.next,a===t?s.pending=null:(a=a.next,t.next=a,kh(s,a)))}function ud(s,t,a){var l=s.pending;if(s.pending=null,l!==null){l=l.next;do t.status="rejected",t.reason=a,zh(t),t=t.next;while(t!==l)}s.action=null}function zh(s){s=s.listeners;for(var t=0;t<s.length;t++)(0,s[t])()}function Mh(s,t){return t}function Ah(s,t){if(ps){var a=Os.formState;if(a!==null){e:{var l=Je;if(ps){if(Gs){s:{for(var c=Gs,o=da;c.nodeType!==8;){if(!o){c=null;break s}if(c=ma(c.nextSibling),c===null){c=null;break s}}o=c.data,c=o==="F!"||o==="F"?c:null}if(c){Gs=ma(c.nextSibling),l=c.data==="F!";break e}}hl(l)}l=!1}l&&(t=a[0])}}return a=Dt(),a.memoizedState=a.baseState=t,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mh,lastRenderedState:t},a.queue=l,a=Ph.bind(null,Je,l),l.dispatch=a,l=dd(!1),o=gd.bind(null,Je,!1,l.queue),l=Dt(),c={state:t,dispatch:null,action:s,pending:null},l.queue=c,a=zv.bind(null,Je,c,o,a),c.dispatch=a,l.memoizedState=s,[t,a,!1]}function Dh(s){var t=it();return Oh(t,Ts,s)}function Oh(s,t,a){if(t=cd(s,t,Mh)[0],s=Kr(Ya)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var l=Ei(t)}catch(x){throw x===En?Hr:x}else l=t;t=it();var c=t.queue,o=c.dispatch;return a!==t.memoizedState&&(Je.flags|=2048,On(9,{destroy:void 0},Mv.bind(null,c,a),null)),[l,o,s]}function Mv(s,t){s.action=t}function Rh(s){var t=it(),a=Ts;if(a!==null)return Oh(t,a,s);it(),t=t.memoizedState,a=it();var l=a.queue.dispatch;return a.memoizedState=s,[t,l,!1]}function On(s,t,a,l){return s={tag:s,create:a,deps:l,inst:t,next:null},t=Je.updateQueue,t===null&&(t=Yr(),Je.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=s.next=s:(l=a.next,a.next=s,s.next=l,t.lastEffect=s),s}function Lh(){return it().memoizedState}function Jr(s,t,a,l){var c=Dt();Je.flags|=s,c.memoizedState=On(1|t,{destroy:void 0},a,l===void 0?null:l)}function Pr(s,t,a,l){var c=it();l=l===void 0?null:l;var o=c.memoizedState.inst;Ts!==null&&l!==null&&td(l,Ts.memoizedState.deps)?c.memoizedState=On(t,o,a,l):(Je.flags|=s,c.memoizedState=On(1|t,o,a,l))}function Uh(s,t){Jr(8390656,8,s,t)}function md(s,t){Pr(2048,8,s,t)}function Av(s){Je.flags|=4;var t=Je.updateQueue;if(t===null)t=Yr(),Je.updateQueue=t,t.events=[s];else{var a=t.events;a===null?t.events=[s]:a.push(s)}}function Bh(s){var t=it().memoizedState;return Av({ref:t,nextImpl:s}),function(){if((ws&2)!==0)throw Error(d(440));return t.impl.apply(void 0,arguments)}}function Hh(s,t){return Pr(4,2,s,t)}function qh(s,t){return Pr(4,4,s,t)}function Gh(s,t){if(typeof t=="function"){s=s();var a=t(s);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return s=s(),t.current=s,function(){t.current=null}}function Fh(s,t,a){a=a!=null?a.concat([s]):null,Pr(4,4,Gh.bind(null,t,s),a)}function hd(){}function Vh(s,t){var a=it();t=t===void 0?null:t;var l=a.memoizedState;return t!==null&&td(t,l[1])?l[0]:(a.memoizedState=[s,t],s)}function $h(s,t){var a=it();t=t===void 0?null:t;var l=a.memoizedState;if(t!==null&&td(t,l[1]))return l[0];if(l=s(),Jl){We(!0);try{s()}finally{We(!1)}}return a.memoizedState=[l,t],l}function xd(s,t,a){return a===void 0||(Ia&1073741824)!==0&&(hs&261930)===0?s.memoizedState=t:(s.memoizedState=a,s=Qx(),Je.lanes|=s,yl|=s,a)}function Qh(s,t,a,l){return Xt(a,t)?a:Mn.current!==null?(s=xd(s,a,l),Xt(s,t)||(ht=!0),s):(Ia&42)===0||(Ia&1073741824)!==0&&(hs&261930)===0?(ht=!0,s.memoizedState=a):(s=Qx(),Je.lanes|=s,yl|=s,t)}function Ih(s,t,a,l,c){var o=X.p;X.p=o!==0&&8>o?o:8;var x=R.T,v={};R.T=v,gd(s,!1,t,a);try{var D=c(),J=R.S;if(J!==null&&J(v,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var re=kv(D,l);zi(s,t,re,ea(s))}else zi(s,t,l,ea(s))}catch(he){zi(s,t,{then:function(){},status:"rejected",reason:he},ea())}finally{X.p=o,x!==null&&v.types!==null&&(x.types=v.types),R.T=x}}function Dv(){}function fd(s,t,a,l){if(s.tag!==5)throw Error(d(476));var c=Yh(s).queue;Ih(s,c,t,C,a===null?Dv:function(){return Xh(s),a(l)})}function Yh(s){var t=s.memoizedState;if(t!==null)return t;t={memoizedState:C,baseState:C,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ya,lastRenderedState:C},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ya,lastRenderedState:a},next:null},s.memoizedState=t,s=s.alternate,s!==null&&(s.memoizedState=t),t}function Xh(s){var t=Yh(s);t.next===null&&(t=s.alternate.memoizedState),zi(s,t.next.queue,{},ea())}function pd(){return Ct(Yi)}function Kh(){return it().memoizedState}function Jh(){return it().memoizedState}function Ov(s){for(var t=s.return;t!==null;){switch(t.tag){case 24:case 3:var a=ea();s=pl(a);var l=gl(t,s,a);l!==null&&(Gt(l,t,a),Si(l,t,a)),t={cache:Qo()},s.payload=t;return}t=t.return}}function Rv(s,t,a){var l=ea();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Zr(s)?Zh(t,a):(a=Oo(s,t,a,l),a!==null&&(Gt(a,s,l),Wh(a,t,l)))}function Ph(s,t,a){var l=ea();zi(s,t,a,l)}function zi(s,t,a,l){var c={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Zr(s))Zh(t,c);else{var o=s.alternate;if(s.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var x=t.lastRenderedState,v=o(x,a);if(c.hasEagerState=!0,c.eagerState=v,Xt(v,x))return Ar(s,t,c,0),Os===null&&Mr(),!1}catch{}finally{}if(a=Oo(s,t,c,l),a!==null)return Gt(a,s,l),Wh(a,t,l),!0}return!1}function gd(s,t,a,l){if(l={lane:2,revertLane:Kd(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Zr(s)){if(t)throw Error(d(479))}else t=Oo(s,a,l,2),t!==null&&Gt(t,s,2)}function Zr(s){var t=s.alternate;return s===Je||t!==null&&t===Je}function Zh(s,t){An=Qr=!0;var a=s.pending;a===null?t.next=t:(t.next=a.next,a.next=t),s.pending=t}function Wh(s,t,a){if((a&4194048)!==0){var l=t.lanes;l&=s.pendingLanes,a|=l,t.lanes=a,lm(s,a)}}var Mi={readContext:Ct,use:Xr,useCallback:Js,useContext:Js,useEffect:Js,useImperativeHandle:Js,useLayoutEffect:Js,useInsertionEffect:Js,useMemo:Js,useReducer:Js,useRef:Js,useState:Js,useDebugValue:Js,useDeferredValue:Js,useTransition:Js,useSyncExternalStore:Js,useId:Js,useHostTransitionStatus:Js,useFormState:Js,useActionState:Js,useOptimistic:Js,useMemoCache:Js,useCacheRefresh:Js};Mi.useEffectEvent=Js;var ex={readContext:Ct,use:Xr,useCallback:function(s,t){return Dt().memoizedState=[s,t===void 0?null:t],s},useContext:Ct,useEffect:Uh,useImperativeHandle:function(s,t,a){a=a!=null?a.concat([s]):null,Jr(4194308,4,Gh.bind(null,t,s),a)},useLayoutEffect:function(s,t){return Jr(4194308,4,s,t)},useInsertionEffect:function(s,t){Jr(4,2,s,t)},useMemo:function(s,t){var a=Dt();t=t===void 0?null:t;var l=s();if(Jl){We(!0);try{s()}finally{We(!1)}}return a.memoizedState=[l,t],l},useReducer:function(s,t,a){var l=Dt();if(a!==void 0){var c=a(t);if(Jl){We(!0);try{a(t)}finally{We(!1)}}}else c=t;return l.memoizedState=l.baseState=c,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:c},l.queue=s,s=s.dispatch=Rv.bind(null,Je,s),[l.memoizedState,s]},useRef:function(s){var t=Dt();return s={current:s},t.memoizedState=s},useState:function(s){s=dd(s);var t=s.queue,a=Ph.bind(null,Je,t);return t.dispatch=a,[s.memoizedState,a]},useDebugValue:hd,useDeferredValue:function(s,t){var a=Dt();return xd(a,s,t)},useTransition:function(){var s=dd(!1);return s=Ih.bind(null,Je,s.queue,!0,!1),Dt().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,t,a){var l=Je,c=Dt();if(ps){if(a===void 0)throw Error(d(407));a=a()}else{if(a=t(),Os===null)throw Error(d(349));(hs&127)!==0||Nh(l,t,a)}c.memoizedState=a;var o={value:a,getSnapshot:t};return c.queue=o,Uh(wh.bind(null,l,o,s),[s]),l.flags|=2048,On(9,{destroy:void 0},yh.bind(null,l,o,a,t),null),a},useId:function(){var s=Dt(),t=Os.identifierPrefix;if(ps){var a=Ea,l=Ta;a=(l&~(1<<32-vs(l)-1)).toString(32)+a,t="_"+t+"R_"+a,a=Ir++,0<a&&(t+="H"+a.toString(32)),t+="_"}else a=Tv++,t="_"+t+"r_"+a.toString(32)+"_";return s.memoizedState=t},useHostTransitionStatus:pd,useFormState:Ah,useActionState:Ah,useOptimistic:function(s){var t=Dt();t.memoizedState=t.baseState=s;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=gd.bind(null,Je,!0,a),a.dispatch=t,[s,t]},useMemoCache:rd,useCacheRefresh:function(){return Dt().memoizedState=Ov.bind(null,Je)},useEffectEvent:function(s){var t=Dt(),a={impl:s};return t.memoizedState=a,function(){if((ws&2)!==0)throw Error(d(440));return a.impl.apply(void 0,arguments)}}},jd={readContext:Ct,use:Xr,useCallback:Vh,useContext:Ct,useEffect:md,useImperativeHandle:Fh,useInsertionEffect:Hh,useLayoutEffect:qh,useMemo:$h,useReducer:Kr,useRef:Lh,useState:function(){return Kr(Ya)},useDebugValue:hd,useDeferredValue:function(s,t){var a=it();return Qh(a,Ts.memoizedState,s,t)},useTransition:function(){var s=Kr(Ya)[0],t=it().memoizedState;return[typeof s=="boolean"?s:Ei(s),t]},useSyncExternalStore:bh,useId:Kh,useHostTransitionStatus:pd,useFormState:Dh,useActionState:Dh,useOptimistic:function(s,t){var a=it();return Ch(a,Ts,s,t)},useMemoCache:rd,useCacheRefresh:Jh};jd.useEffectEvent=Bh;var sx={readContext:Ct,use:Xr,useCallback:Vh,useContext:Ct,useEffect:md,useImperativeHandle:Fh,useInsertionEffect:Hh,useLayoutEffect:qh,useMemo:$h,useReducer:od,useRef:Lh,useState:function(){return od(Ya)},useDebugValue:hd,useDeferredValue:function(s,t){var a=it();return Ts===null?xd(a,s,t):Qh(a,Ts.memoizedState,s,t)},useTransition:function(){var s=od(Ya)[0],t=it().memoizedState;return[typeof s=="boolean"?s:Ei(s),t]},useSyncExternalStore:bh,useId:Kh,useHostTransitionStatus:pd,useFormState:Rh,useActionState:Rh,useOptimistic:function(s,t){var a=it();return Ts!==null?Ch(a,Ts,s,t):(a.baseState=s,[s,a.queue.dispatch])},useMemoCache:rd,useCacheRefresh:Jh};sx.useEffectEvent=Bh;function vd(s,t,a,l){t=s.memoizedState,a=a(l,t),a=a==null?t:y({},t,a),s.memoizedState=a,s.lanes===0&&(s.updateQueue.baseState=a)}var bd={enqueueSetState:function(s,t,a){s=s._reactInternals;var l=ea(),c=pl(l);c.payload=t,a!=null&&(c.callback=a),t=gl(s,c,l),t!==null&&(Gt(t,s,l),Si(t,s,l))},enqueueReplaceState:function(s,t,a){s=s._reactInternals;var l=ea(),c=pl(l);c.tag=1,c.payload=t,a!=null&&(c.callback=a),t=gl(s,c,l),t!==null&&(Gt(t,s,l),Si(t,s,l))},enqueueForceUpdate:function(s,t){s=s._reactInternals;var a=ea(),l=pl(a);l.tag=2,t!=null&&(l.callback=t),t=gl(s,l,a),t!==null&&(Gt(t,s,a),Si(t,s,a))}};function tx(s,t,a,l,c,o,x){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(l,o,x):t.prototype&&t.prototype.isPureReactComponent?!gi(a,l)||!gi(c,o):!0}function ax(s,t,a,l){s=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,l),t.state!==s&&bd.enqueueReplaceState(t,t.state,null)}function Pl(s,t){var a=t;if("ref"in t){a={};for(var l in t)l!=="ref"&&(a[l]=t[l])}if(s=s.defaultProps){a===t&&(a=y({},a));for(var c in s)a[c]===void 0&&(a[c]=s[c])}return a}function lx(s){zr(s)}function nx(s){console.error(s)}function ix(s){zr(s)}function Wr(s,t){try{var a=s.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(l){setTimeout(function(){throw l})}}function rx(s,t,a){try{var l=s.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function Nd(s,t,a){return a=pl(a),a.tag=3,a.payload={element:null},a.callback=function(){Wr(s,t)},a}function cx(s){return s=pl(s),s.tag=3,s}function ox(s,t,a,l){var c=a.type.getDerivedStateFromError;if(typeof c=="function"){var o=l.value;s.payload=function(){return c(o)},s.callback=function(){rx(t,a,l)}}var x=a.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(s.callback=function(){rx(t,a,l),typeof c!="function"&&(wl===null?wl=new Set([this]):wl.add(this));var v=l.stack;this.componentDidCatch(l.value,{componentStack:v!==null?v:""})})}function Lv(s,t,a,l,c){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(t=a.alternate,t!==null&&Cn(t,a,c,!0),a=Jt.current,a!==null){switch(a.tag){case 31:case 13:return ua===null?uc():a.alternate===null&&Ps===0&&(Ps=3),a.flags&=-257,a.flags|=65536,a.lanes=c,l===qr?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([l]):t.add(l),Id(s,l,c)),!1;case 22:return a.flags|=65536,l===qr?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([l]):a.add(l)),Id(s,l,c)),!1}throw Error(d(435,a.tag))}return Id(s,l,c),uc(),!1}if(ps)return t=Jt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=c,l!==qo&&(s=Error(d(422),{cause:l}),bi(ra(s,a)))):(l!==qo&&(t=Error(d(423),{cause:l}),bi(ra(t,a))),s=s.current.alternate,s.flags|=65536,c&=-c,s.lanes|=c,l=ra(l,a),c=Nd(s.stateNode,l,c),Po(s,c),Ps!==4&&(Ps=2)),!1;var o=Error(d(520),{cause:l});if(o=ra(o,a),Hi===null?Hi=[o]:Hi.push(o),Ps!==4&&(Ps=2),t===null)return!0;l=ra(l,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,s=c&-c,a.lanes|=s,s=Nd(a.stateNode,l,s),Po(a,s),!1;case 1:if(t=a.type,o=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||o!==null&&typeof o.componentDidCatch=="function"&&(wl===null||!wl.has(o))))return a.flags|=65536,c&=-c,a.lanes|=c,c=cx(c),ox(c,s,a,l),Po(a,c),!1}a=a.return}while(a!==null);return!1}var yd=Error(d(461)),ht=!1;function kt(s,t,a,l){t.child=s===null?hh(t,null,a,l):Kl(t,s.child,a,l)}function dx(s,t,a,l,c){a=a.render;var o=t.ref;if("ref"in l){var x={};for(var v in l)v!=="ref"&&(x[v]=l[v])}else x=l;return Ql(t),l=ad(s,t,a,x,o,c),v=ld(),s!==null&&!ht?(nd(s,t,c),Xa(s,t,c)):(ps&&v&&Bo(t),t.flags|=1,kt(s,t,l,c),t.child)}function ux(s,t,a,l,c){if(s===null){var o=a.type;return typeof o=="function"&&!Ro(o)&&o.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=o,mx(s,t,o,l,c)):(s=Or(a.type,null,l,t,t.mode,c),s.ref=t.ref,s.return=t,t.child=s)}if(o=s.child,!zd(s,c)){var x=o.memoizedProps;if(a=a.compare,a=a!==null?a:gi,a(x,l)&&s.ref===t.ref)return Xa(s,t,c)}return t.flags|=1,s=Fa(o,l),s.ref=t.ref,s.return=t,t.child=s}function mx(s,t,a,l,c){if(s!==null){var o=s.memoizedProps;if(gi(o,l)&&s.ref===t.ref)if(ht=!1,t.pendingProps=l=o,zd(s,c))(s.flags&131072)!==0&&(ht=!0);else return t.lanes=s.lanes,Xa(s,t,c)}return wd(s,t,a,l,c)}function hx(s,t,a,l){var c=l.children,o=s!==null?s.memoizedState:null;if(s===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((t.flags&128)!==0){if(o=o!==null?o.baseLanes|a:a,s!==null){for(l=t.child=s.child,c=0;l!==null;)c=c|l.lanes|l.childLanes,l=l.sibling;l=c&~o}else l=0,t.child=null;return xx(s,t,o,a,l)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},s!==null&&Br(t,o!==null?o.cachePool:null),o!==null?ph(t,o):Wo(),gh(t);else return l=t.lanes=536870912,xx(s,t,o!==null?o.baseLanes|a:a,a,l)}else o!==null?(Br(t,o.cachePool),ph(t,o),vl(),t.memoizedState=null):(s!==null&&Br(t,null),Wo(),vl());return kt(s,t,c,a),t.child}function Ai(s,t){return s!==null&&s.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function xx(s,t,a,l,c){var o=Yo();return o=o===null?null:{parent:ut._currentValue,pool:o},t.memoizedState={baseLanes:a,cachePool:o},s!==null&&Br(t,null),Wo(),gh(t),s!==null&&Cn(s,t,l,!0),t.childLanes=c,null}function ec(s,t){return t=tc({mode:t.mode,children:t.children},s.mode),t.ref=s.ref,s.child=t,t.return=s,t}function fx(s,t,a){return Kl(t,s.child,null,a),s=ec(t,t.pendingProps),s.flags|=2,Pt(t),t.memoizedState=null,s}function Uv(s,t,a){var l=t.pendingProps,c=(t.flags&128)!==0;if(t.flags&=-129,s===null){if(ps){if(l.mode==="hidden")return s=ec(t,l),t.lanes=536870912,Ai(null,s);if(sd(t),(s=Gs)?(s=Tf(s,da),s=s!==null&&s.data==="&"?s:null,s!==null&&(t.memoizedState={dehydrated:s,treeContext:ul!==null?{id:Ta,overflow:Ea}:null,retryLane:536870912,hydrationErrors:null},a=Zm(s),a.return=t,t.child=a,St=t,Gs=null)):s=null,s===null)throw hl(t);return t.lanes=536870912,null}return ec(t,l)}var o=s.memoizedState;if(o!==null){var x=o.dehydrated;if(sd(t),c)if(t.flags&256)t.flags&=-257,t=fx(s,t,a);else if(t.memoizedState!==null)t.child=s.child,t.flags|=128,t=null;else throw Error(d(558));else if(ht||Cn(s,t,a,!1),c=(a&s.childLanes)!==0,ht||c){if(l=Os,l!==null&&(x=nm(l,a),x!==0&&x!==o.retryLane))throw o.retryLane=x,Gl(s,x),Gt(l,s,x),yd;uc(),t=fx(s,t,a)}else s=o.treeContext,Gs=ma(x.nextSibling),St=t,ps=!0,ml=null,da=!1,s!==null&&sh(t,s),t=ec(t,l),t.flags|=4096;return t}return s=Fa(s.child,{mode:l.mode,children:l.children}),s.ref=t.ref,t.child=s,s.return=t,s}function sc(s,t){var a=t.ref;if(a===null)s!==null&&s.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(d(284));(s===null||s.ref!==a)&&(t.flags|=4194816)}}function wd(s,t,a,l,c){return Ql(t),a=ad(s,t,a,l,void 0,c),l=ld(),s!==null&&!ht?(nd(s,t,c),Xa(s,t,c)):(ps&&l&&Bo(t),t.flags|=1,kt(s,t,a,c),t.child)}function px(s,t,a,l,c,o){return Ql(t),t.updateQueue=null,a=vh(t,l,a,c),jh(s),l=ld(),s!==null&&!ht?(nd(s,t,o),Xa(s,t,o)):(ps&&l&&Bo(t),t.flags|=1,kt(s,t,a,o),t.child)}function gx(s,t,a,l,c){if(Ql(t),t.stateNode===null){var o=yn,x=a.contextType;typeof x=="object"&&x!==null&&(o=Ct(x)),o=new a(l,o),t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=bd,t.stateNode=o,o._reactInternals=t,o=t.stateNode,o.props=l,o.state=t.memoizedState,o.refs={},Ko(t),x=a.contextType,o.context=typeof x=="object"&&x!==null?Ct(x):yn,o.state=t.memoizedState,x=a.getDerivedStateFromProps,typeof x=="function"&&(vd(t,a,x,l),o.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(x=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),x!==o.state&&bd.enqueueReplaceState(o,o.state,null),ki(t,l,o,c),Ci(),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308),l=!0}else if(s===null){o=t.stateNode;var v=t.memoizedProps,D=Pl(a,v);o.props=D;var J=o.context,re=a.contextType;x=yn,typeof re=="object"&&re!==null&&(x=Ct(re));var he=a.getDerivedStateFromProps;re=typeof he=="function"||typeof o.getSnapshotBeforeUpdate=="function",v=t.pendingProps!==v,re||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(v||J!==x)&&ax(t,o,l,x),fl=!1;var Z=t.memoizedState;o.state=Z,ki(t,l,o,c),Ci(),J=t.memoizedState,v||Z!==J||fl?(typeof he=="function"&&(vd(t,a,he,l),J=t.memoizedState),(D=fl||tx(t,a,D,l,Z,J,x))?(re||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=J),o.props=l,o.state=J,o.context=x,l=D):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{o=t.stateNode,Jo(s,t),x=t.memoizedProps,re=Pl(a,x),o.props=re,he=t.pendingProps,Z=o.context,J=a.contextType,D=yn,typeof J=="object"&&J!==null&&(D=Ct(J)),v=a.getDerivedStateFromProps,(J=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(x!==he||Z!==D)&&ax(t,o,l,D),fl=!1,Z=t.memoizedState,o.state=Z,ki(t,l,o,c),Ci();var se=t.memoizedState;x!==he||Z!==se||fl||s!==null&&s.dependencies!==null&&Lr(s.dependencies)?(typeof v=="function"&&(vd(t,a,v,l),se=t.memoizedState),(re=fl||tx(t,a,re,l,Z,se,D)||s!==null&&s.dependencies!==null&&Lr(s.dependencies))?(J||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(l,se,D),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(l,se,D)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||x===s.memoizedProps&&Z===s.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||x===s.memoizedProps&&Z===s.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=se),o.props=l,o.state=se,o.context=D,l=re):(typeof o.componentDidUpdate!="function"||x===s.memoizedProps&&Z===s.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||x===s.memoizedProps&&Z===s.memoizedState||(t.flags|=1024),l=!1)}return o=l,sc(s,t),l=(t.flags&128)!==0,o||l?(o=t.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:o.render(),t.flags|=1,s!==null&&l?(t.child=Kl(t,s.child,null,c),t.child=Kl(t,null,a,c)):kt(s,t,a,c),t.memoizedState=o.state,s=t.child):s=Xa(s,t,c),s}function jx(s,t,a,l){return Vl(),t.flags|=256,kt(s,t,a,l),t.child}var _d={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Sd(s){return{baseLanes:s,cachePool:rh()}}function Cd(s,t,a){return s=s!==null?s.childLanes&~a:0,t&&(s|=Wt),s}function vx(s,t,a){var l=t.pendingProps,c=!1,o=(t.flags&128)!==0,x;if((x=o)||(x=s!==null&&s.memoizedState===null?!1:(nt.current&2)!==0),x&&(c=!0,t.flags&=-129),x=(t.flags&32)!==0,t.flags&=-33,s===null){if(ps){if(c?jl(t):vl(),(s=Gs)?(s=Tf(s,da),s=s!==null&&s.data!=="&"?s:null,s!==null&&(t.memoizedState={dehydrated:s,treeContext:ul!==null?{id:Ta,overflow:Ea}:null,retryLane:536870912,hydrationErrors:null},a=Zm(s),a.return=t,t.child=a,St=t,Gs=null)):s=null,s===null)throw hl(t);return cu(s)?t.lanes=32:t.lanes=536870912,null}var v=l.children;return l=l.fallback,c?(vl(),c=t.mode,v=tc({mode:"hidden",children:v},c),l=Fl(l,c,a,null),v.return=t,l.return=t,v.sibling=l,t.child=v,l=t.child,l.memoizedState=Sd(a),l.childLanes=Cd(s,x,a),t.memoizedState=_d,Ai(null,l)):(jl(t),kd(t,v))}var D=s.memoizedState;if(D!==null&&(v=D.dehydrated,v!==null)){if(o)t.flags&256?(jl(t),t.flags&=-257,t=Td(s,t,a)):t.memoizedState!==null?(vl(),t.child=s.child,t.flags|=128,t=null):(vl(),v=l.fallback,c=t.mode,l=tc({mode:"visible",children:l.children},c),v=Fl(v,c,a,null),v.flags|=2,l.return=t,v.return=t,l.sibling=v,t.child=l,Kl(t,s.child,null,a),l=t.child,l.memoizedState=Sd(a),l.childLanes=Cd(s,x,a),t.memoizedState=_d,t=Ai(null,l));else if(jl(t),cu(v)){if(x=v.nextSibling&&v.nextSibling.dataset,x)var J=x.dgst;x=J,l=Error(d(419)),l.stack="",l.digest=x,bi({value:l,source:null,stack:null}),t=Td(s,t,a)}else if(ht||Cn(s,t,a,!1),x=(a&s.childLanes)!==0,ht||x){if(x=Os,x!==null&&(l=nm(x,a),l!==0&&l!==D.retryLane))throw D.retryLane=l,Gl(s,l),Gt(x,s,l),yd;ru(v)||uc(),t=Td(s,t,a)}else ru(v)?(t.flags|=192,t.child=s.child,t=null):(s=D.treeContext,Gs=ma(v.nextSibling),St=t,ps=!0,ml=null,da=!1,s!==null&&sh(t,s),t=kd(t,l.children),t.flags|=4096);return t}return c?(vl(),v=l.fallback,c=t.mode,D=s.child,J=D.sibling,l=Fa(D,{mode:"hidden",children:l.children}),l.subtreeFlags=D.subtreeFlags&65011712,J!==null?v=Fa(J,v):(v=Fl(v,c,a,null),v.flags|=2),v.return=t,l.return=t,l.sibling=v,t.child=l,Ai(null,l),l=t.child,v=s.child.memoizedState,v===null?v=Sd(a):(c=v.cachePool,c!==null?(D=ut._currentValue,c=c.parent!==D?{parent:D,pool:D}:c):c=rh(),v={baseLanes:v.baseLanes|a,cachePool:c}),l.memoizedState=v,l.childLanes=Cd(s,x,a),t.memoizedState=_d,Ai(s.child,l)):(jl(t),a=s.child,s=a.sibling,a=Fa(a,{mode:"visible",children:l.children}),a.return=t,a.sibling=null,s!==null&&(x=t.deletions,x===null?(t.deletions=[s],t.flags|=16):x.push(s)),t.child=a,t.memoizedState=null,a)}function kd(s,t){return t=tc({mode:"visible",children:t},s.mode),t.return=s,s.child=t}function tc(s,t){return s=Kt(22,s,null,t),s.lanes=0,s}function Td(s,t,a){return Kl(t,s.child,null,a),s=kd(t,t.pendingProps.children),s.flags|=2,t.memoizedState=null,s}function bx(s,t,a){s.lanes|=t;var l=s.alternate;l!==null&&(l.lanes|=t),Vo(s.return,t,a)}function Ed(s,t,a,l,c,o){var x=s.memoizedState;x===null?s.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:c,treeForkCount:o}:(x.isBackwards=t,x.rendering=null,x.renderingStartTime=0,x.last=l,x.tail=a,x.tailMode=c,x.treeForkCount=o)}function Nx(s,t,a){var l=t.pendingProps,c=l.revealOrder,o=l.tail;l=l.children;var x=nt.current,v=(x&2)!==0;if(v?(x=x&1|2,t.flags|=128):x&=1,ie(nt,x),kt(s,t,l,a),l=ps?vi:0,!v&&s!==null&&(s.flags&128)!==0)e:for(s=t.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&bx(s,a,t);else if(s.tag===19)bx(s,a,t);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(c){case"forwards":for(a=t.child,c=null;a!==null;)s=a.alternate,s!==null&&$r(s)===null&&(c=a),a=a.sibling;a=c,a===null?(c=t.child,t.child=null):(c=a.sibling,a.sibling=null),Ed(t,!1,c,a,o,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,c=t.child,t.child=null;c!==null;){if(s=c.alternate,s!==null&&$r(s)===null){t.child=c;break}s=c.sibling,c.sibling=a,a=c,c=s}Ed(t,!0,a,null,o,l);break;case"together":Ed(t,!1,null,null,void 0,l);break;default:t.memoizedState=null}return t.child}function Xa(s,t,a){if(s!==null&&(t.dependencies=s.dependencies),yl|=t.lanes,(a&t.childLanes)===0)if(s!==null){if(Cn(s,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(s!==null&&t.child!==s.child)throw Error(d(153));if(t.child!==null){for(s=t.child,a=Fa(s,s.pendingProps),t.child=a,a.return=t;s.sibling!==null;)s=s.sibling,a=a.sibling=Fa(s,s.pendingProps),a.return=t;a.sibling=null}return t.child}function zd(s,t){return(s.lanes&t)!==0?!0:(s=s.dependencies,!!(s!==null&&Lr(s)))}function Bv(s,t,a){switch(t.tag){case 3:ae(t,t.stateNode.containerInfo),xl(t,ut,s.memoizedState.cache),Vl();break;case 27:case 5:P(t);break;case 4:ae(t,t.stateNode.containerInfo);break;case 10:xl(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,sd(t),null;break;case 13:var l=t.memoizedState;if(l!==null)return l.dehydrated!==null?(jl(t),t.flags|=128,null):(a&t.child.childLanes)!==0?vx(s,t,a):(jl(t),s=Xa(s,t,a),s!==null?s.sibling:null);jl(t);break;case 19:var c=(s.flags&128)!==0;if(l=(a&t.childLanes)!==0,l||(Cn(s,t,a,!1),l=(a&t.childLanes)!==0),c){if(l)return Nx(s,t,a);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),ie(nt,nt.current),l)break;return null;case 22:return t.lanes=0,hx(s,t,a,t.pendingProps);case 24:xl(t,ut,s.memoizedState.cache)}return Xa(s,t,a)}function yx(s,t,a){if(s!==null)if(s.memoizedProps!==t.pendingProps)ht=!0;else{if(!zd(s,a)&&(t.flags&128)===0)return ht=!1,Bv(s,t,a);ht=(s.flags&131072)!==0}else ht=!1,ps&&(t.flags&1048576)!==0&&eh(t,vi,t.index);switch(t.lanes=0,t.tag){case 16:e:{var l=t.pendingProps;if(s=Yl(t.elementType),t.type=s,typeof s=="function")Ro(s)?(l=Pl(s,l),t.tag=1,t=gx(null,t,s,l,a)):(t.tag=0,t=wd(null,t,s,l,a));else{if(s!=null){var c=s.$$typeof;if(c===M){t.tag=11,t=dx(null,t,s,l,a);break e}else if(c===z){t.tag=14,t=ux(null,t,s,l,a);break e}}throw t=ye(s)||s,Error(d(306,t,""))}}return t;case 0:return wd(s,t,t.type,t.pendingProps,a);case 1:return l=t.type,c=Pl(l,t.pendingProps),gx(s,t,l,c,a);case 3:e:{if(ae(t,t.stateNode.containerInfo),s===null)throw Error(d(387));l=t.pendingProps;var o=t.memoizedState;c=o.element,Jo(s,t),ki(t,l,null,a);var x=t.memoizedState;if(l=x.cache,xl(t,ut,l),l!==o.cache&&$o(t,[ut],a,!0),Ci(),l=x.element,o.isDehydrated)if(o={element:l,isDehydrated:!1,cache:x.cache},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){t=jx(s,t,l,a);break e}else if(l!==c){c=ra(Error(d(424)),t),bi(c),t=jx(s,t,l,a);break e}else{switch(s=t.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Gs=ma(s.firstChild),St=t,ps=!0,ml=null,da=!0,a=hh(t,null,l,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Vl(),l===c){t=Xa(s,t,a);break e}kt(s,t,l,a)}t=t.child}return t;case 26:return sc(s,t),s===null?(a=Of(t.type,null,t.pendingProps,null))?t.memoizedState=a:ps||(a=t.type,s=t.pendingProps,l=jc(me.current).createElement(a),l[_t]=t,l[Rt]=s,Tt(l,a,s),Nt(l),t.stateNode=l):t.memoizedState=Of(t.type,s.memoizedProps,t.pendingProps,s.memoizedState),null;case 27:return P(t),s===null&&ps&&(l=t.stateNode=Mf(t.type,t.pendingProps,me.current),St=t,da=!0,c=Gs,kl(t.type)?(ou=c,Gs=ma(l.firstChild)):Gs=c),kt(s,t,t.pendingProps.children,a),sc(s,t),s===null&&(t.flags|=4194304),t.child;case 5:return s===null&&ps&&((c=l=Gs)&&(l=xb(l,t.type,t.pendingProps,da),l!==null?(t.stateNode=l,St=t,Gs=ma(l.firstChild),da=!1,c=!0):c=!1),c||hl(t)),P(t),c=t.type,o=t.pendingProps,x=s!==null?s.memoizedProps:null,l=o.children,lu(c,o)?l=null:x!==null&&lu(c,x)&&(t.flags|=32),t.memoizedState!==null&&(c=ad(s,t,Ev,null,null,a),Yi._currentValue=c),sc(s,t),kt(s,t,l,a),t.child;case 6:return s===null&&ps&&((s=a=Gs)&&(a=fb(a,t.pendingProps,da),a!==null?(t.stateNode=a,St=t,Gs=null,s=!0):s=!1),s||hl(t)),null;case 13:return vx(s,t,a);case 4:return ae(t,t.stateNode.containerInfo),l=t.pendingProps,s===null?t.child=Kl(t,null,l,a):kt(s,t,l,a),t.child;case 11:return dx(s,t,t.type,t.pendingProps,a);case 7:return kt(s,t,t.pendingProps,a),t.child;case 8:return kt(s,t,t.pendingProps.children,a),t.child;case 12:return kt(s,t,t.pendingProps.children,a),t.child;case 10:return l=t.pendingProps,xl(t,t.type,l.value),kt(s,t,l.children,a),t.child;case 9:return c=t.type._context,l=t.pendingProps.children,Ql(t),c=Ct(c),l=l(c),t.flags|=1,kt(s,t,l,a),t.child;case 14:return ux(s,t,t.type,t.pendingProps,a);case 15:return mx(s,t,t.type,t.pendingProps,a);case 19:return Nx(s,t,a);case 31:return Uv(s,t,a);case 22:return hx(s,t,a,t.pendingProps);case 24:return Ql(t),l=Ct(ut),s===null?(c=Yo(),c===null&&(c=Os,o=Qo(),c.pooledCache=o,o.refCount++,o!==null&&(c.pooledCacheLanes|=a),c=o),t.memoizedState={parent:l,cache:c},Ko(t),xl(t,ut,c)):((s.lanes&a)!==0&&(Jo(s,t),ki(t,null,null,a),Ci()),c=s.memoizedState,o=t.memoizedState,c.parent!==l?(c={parent:l,cache:l},t.memoizedState=c,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=c),xl(t,ut,l)):(l=o.cache,xl(t,ut,l),l!==c.cache&&$o(t,[ut],a,!0))),kt(s,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(d(156,t.tag))}function Ka(s){s.flags|=4}function Md(s,t,a,l,c){if((t=(s.mode&32)!==0)&&(t=!1),t){if(s.flags|=16777216,(c&335544128)===c)if(s.stateNode.complete)s.flags|=8192;else if(Kx())s.flags|=8192;else throw Xl=qr,Xo}else s.flags&=-16777217}function wx(s,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!Hf(t))if(Kx())s.flags|=8192;else throw Xl=qr,Xo}function ac(s,t){t!==null&&(s.flags|=4),s.flags&16384&&(t=s.tag!==22?je():536870912,s.lanes|=t,Bn|=t)}function Di(s,t){if(!ps)switch(s.tailMode){case"hidden":t=s.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?s.tail=null:a.sibling=null;break;case"collapsed":a=s.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?t||s.tail===null?s.tail=null:s.tail.sibling=null:l.sibling=null}}function Fs(s){var t=s.alternate!==null&&s.alternate.child===s.child,a=0,l=0;if(t)for(var c=s.child;c!==null;)a|=c.lanes|c.childLanes,l|=c.subtreeFlags&65011712,l|=c.flags&65011712,c.return=s,c=c.sibling;else for(c=s.child;c!==null;)a|=c.lanes|c.childLanes,l|=c.subtreeFlags,l|=c.flags,c.return=s,c=c.sibling;return s.subtreeFlags|=l,s.childLanes=a,t}function Hv(s,t,a){var l=t.pendingProps;switch(Ho(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fs(t),null;case 1:return Fs(t),null;case 3:return a=t.stateNode,l=null,s!==null&&(l=s.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),Qa(ut),V(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(s===null||s.child===null)&&(Sn(t)?Ka(t):s===null||s.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Go())),Fs(t),null;case 26:var c=t.type,o=t.memoizedState;return s===null?(Ka(t),o!==null?(Fs(t),wx(t,o)):(Fs(t),Md(t,c,null,l,a))):o?o!==s.memoizedState?(Ka(t),Fs(t),wx(t,o)):(Fs(t),t.flags&=-16777217):(s=s.memoizedProps,s!==l&&Ka(t),Fs(t),Md(t,c,s,l,a)),null;case 27:if(Ce(t),a=me.current,c=t.type,s!==null&&t.stateNode!=null)s.memoizedProps!==l&&Ka(t);else{if(!l){if(t.stateNode===null)throw Error(d(166));return Fs(t),null}s=fe.current,Sn(t)?th(t):(s=Mf(c,l,a),t.stateNode=s,Ka(t))}return Fs(t),null;case 5:if(Ce(t),c=t.type,s!==null&&t.stateNode!=null)s.memoizedProps!==l&&Ka(t);else{if(!l){if(t.stateNode===null)throw Error(d(166));return Fs(t),null}if(o=fe.current,Sn(t))th(t);else{var x=jc(me.current);switch(o){case 1:o=x.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:o=x.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":o=x.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":o=x.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":o=x.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof l.is=="string"?x.createElement("select",{is:l.is}):x.createElement("select"),l.multiple?o.multiple=!0:l.size&&(o.size=l.size);break;default:o=typeof l.is=="string"?x.createElement(c,{is:l.is}):x.createElement(c)}}o[_t]=t,o[Rt]=l;e:for(x=t.child;x!==null;){if(x.tag===5||x.tag===6)o.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===t)break e;for(;x.sibling===null;){if(x.return===null||x.return===t)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}t.stateNode=o;e:switch(Tt(o,c,l),c){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Ka(t)}}return Fs(t),Md(t,t.type,s===null?null:s.memoizedProps,t.pendingProps,a),null;case 6:if(s&&t.stateNode!=null)s.memoizedProps!==l&&Ka(t);else{if(typeof l!="string"&&t.stateNode===null)throw Error(d(166));if(s=me.current,Sn(t)){if(s=t.stateNode,a=t.memoizedProps,l=null,c=St,c!==null)switch(c.tag){case 27:case 5:l=c.memoizedProps}s[_t]=t,s=!!(s.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||bf(s.nodeValue,a)),s||hl(t,!0)}else s=jc(s).createTextNode(l),s[_t]=t,t.stateNode=s}return Fs(t),null;case 31:if(a=t.memoizedState,s===null||s.memoizedState!==null){if(l=Sn(t),a!==null){if(s===null){if(!l)throw Error(d(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(d(557));s[_t]=t}else Vl(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Fs(t),s=!1}else a=Go(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=a),s=!0;if(!s)return t.flags&256?(Pt(t),t):(Pt(t),null);if((t.flags&128)!==0)throw Error(d(558))}return Fs(t),null;case 13:if(l=t.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(c=Sn(t),l!==null&&l.dehydrated!==null){if(s===null){if(!c)throw Error(d(318));if(c=t.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(d(317));c[_t]=t}else Vl(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Fs(t),c=!1}else c=Go(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=c),c=!0;if(!c)return t.flags&256?(Pt(t),t):(Pt(t),null)}return Pt(t),(t.flags&128)!==0?(t.lanes=a,t):(a=l!==null,s=s!==null&&s.memoizedState!==null,a&&(l=t.child,c=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(c=l.alternate.memoizedState.cachePool.pool),o=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(o=l.memoizedState.cachePool.pool),o!==c&&(l.flags|=2048)),a!==s&&a&&(t.child.flags|=8192),ac(t,t.updateQueue),Fs(t),null);case 4:return V(),s===null&&Wd(t.stateNode.containerInfo),Fs(t),null;case 10:return Qa(t.type),Fs(t),null;case 19:if(ue(nt),l=t.memoizedState,l===null)return Fs(t),null;if(c=(t.flags&128)!==0,o=l.rendering,o===null)if(c)Di(l,!1);else{if(Ps!==0||s!==null&&(s.flags&128)!==0)for(s=t.child;s!==null;){if(o=$r(s),o!==null){for(t.flags|=128,Di(l,!1),s=o.updateQueue,t.updateQueue=s,ac(t,s),t.subtreeFlags=0,s=a,a=t.child;a!==null;)Pm(a,s),a=a.sibling;return ie(nt,nt.current&1|2),ps&&Va(t,l.treeForkCount),t.child}s=s.sibling}l.tail!==null&&Ds()>cc&&(t.flags|=128,c=!0,Di(l,!1),t.lanes=4194304)}else{if(!c)if(s=$r(o),s!==null){if(t.flags|=128,c=!0,s=s.updateQueue,t.updateQueue=s,ac(t,s),Di(l,!0),l.tail===null&&l.tailMode==="hidden"&&!o.alternate&&!ps)return Fs(t),null}else 2*Ds()-l.renderingStartTime>cc&&a!==536870912&&(t.flags|=128,c=!0,Di(l,!1),t.lanes=4194304);l.isBackwards?(o.sibling=t.child,t.child=o):(s=l.last,s!==null?s.sibling=o:t.child=o,l.last=o)}return l.tail!==null?(s=l.tail,l.rendering=s,l.tail=s.sibling,l.renderingStartTime=Ds(),s.sibling=null,a=nt.current,ie(nt,c?a&1|2:a&1),ps&&Va(t,l.treeForkCount),s):(Fs(t),null);case 22:case 23:return Pt(t),ed(),l=t.memoizedState!==null,s!==null?s.memoizedState!==null!==l&&(t.flags|=8192):l&&(t.flags|=8192),l?(a&536870912)!==0&&(t.flags&128)===0&&(Fs(t),t.subtreeFlags&6&&(t.flags|=8192)):Fs(t),a=t.updateQueue,a!==null&&ac(t,a.retryQueue),a=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(a=s.memoizedState.cachePool.pool),l=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),l!==a&&(t.flags|=2048),s!==null&&ue(Il),null;case 24:return a=null,s!==null&&(a=s.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),Qa(ut),Fs(t),null;case 25:return null;case 30:return null}throw Error(d(156,t.tag))}function qv(s,t){switch(Ho(t),t.tag){case 1:return s=t.flags,s&65536?(t.flags=s&-65537|128,t):null;case 3:return Qa(ut),V(),s=t.flags,(s&65536)!==0&&(s&128)===0?(t.flags=s&-65537|128,t):null;case 26:case 27:case 5:return Ce(t),null;case 31:if(t.memoizedState!==null){if(Pt(t),t.alternate===null)throw Error(d(340));Vl()}return s=t.flags,s&65536?(t.flags=s&-65537|128,t):null;case 13:if(Pt(t),s=t.memoizedState,s!==null&&s.dehydrated!==null){if(t.alternate===null)throw Error(d(340));Vl()}return s=t.flags,s&65536?(t.flags=s&-65537|128,t):null;case 19:return ue(nt),null;case 4:return V(),null;case 10:return Qa(t.type),null;case 22:case 23:return Pt(t),ed(),s!==null&&ue(Il),s=t.flags,s&65536?(t.flags=s&-65537|128,t):null;case 24:return Qa(ut),null;case 25:return null;default:return null}}function _x(s,t){switch(Ho(t),t.tag){case 3:Qa(ut),V();break;case 26:case 27:case 5:Ce(t);break;case 4:V();break;case 31:t.memoizedState!==null&&Pt(t);break;case 13:Pt(t);break;case 19:ue(nt);break;case 10:Qa(t.type);break;case 22:case 23:Pt(t),ed(),s!==null&&ue(Il);break;case 24:Qa(ut)}}function Oi(s,t){try{var a=t.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var c=l.next;a=c;do{if((a.tag&s)===s){l=void 0;var o=a.create,x=a.inst;l=o(),x.destroy=l}a=a.next}while(a!==c)}}catch(v){Cs(t,t.return,v)}}function bl(s,t,a){try{var l=t.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var o=c.next;l=o;do{if((l.tag&s)===s){var x=l.inst,v=x.destroy;if(v!==void 0){x.destroy=void 0,c=t;var D=a,J=v;try{J()}catch(re){Cs(c,D,re)}}}l=l.next}while(l!==o)}}catch(re){Cs(t,t.return,re)}}function Sx(s){var t=s.updateQueue;if(t!==null){var a=s.stateNode;try{fh(t,a)}catch(l){Cs(s,s.return,l)}}}function Cx(s,t,a){a.props=Pl(s.type,s.memoizedProps),a.state=s.memoizedState;try{a.componentWillUnmount()}catch(l){Cs(s,t,l)}}function Ri(s,t){try{var a=s.ref;if(a!==null){switch(s.tag){case 26:case 27:case 5:var l=s.stateNode;break;case 30:l=s.stateNode;break;default:l=s.stateNode}typeof a=="function"?s.refCleanup=a(l):a.current=l}}catch(c){Cs(s,t,c)}}function za(s,t){var a=s.ref,l=s.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(c){Cs(s,t,c)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(c){Cs(s,t,c)}else a.current=null}function kx(s){var t=s.type,a=s.memoizedProps,l=s.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(c){Cs(s,s.return,c)}}function Ad(s,t,a){try{var l=s.stateNode;cb(l,s.type,a,t),l[Rt]=t}catch(c){Cs(s,s.return,c)}}function Tx(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&kl(s.type)||s.tag===4}function Dd(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Tx(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&kl(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Od(s,t,a){var l=s.tag;if(l===5||l===6)s=s.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(s,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(s),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=qa));else if(l!==4&&(l===27&&kl(s.type)&&(a=s.stateNode,t=null),s=s.child,s!==null))for(Od(s,t,a),s=s.sibling;s!==null;)Od(s,t,a),s=s.sibling}function lc(s,t,a){var l=s.tag;if(l===5||l===6)s=s.stateNode,t?a.insertBefore(s,t):a.appendChild(s);else if(l!==4&&(l===27&&kl(s.type)&&(a=s.stateNode),s=s.child,s!==null))for(lc(s,t,a),s=s.sibling;s!==null;)lc(s,t,a),s=s.sibling}function Ex(s){var t=s.stateNode,a=s.memoizedProps;try{for(var l=s.type,c=t.attributes;c.length;)t.removeAttributeNode(c[0]);Tt(t,l,a),t[_t]=s,t[Rt]=a}catch(o){Cs(s,s.return,o)}}var Ja=!1,xt=!1,Rd=!1,zx=typeof WeakSet=="function"?WeakSet:Set,yt=null;function Gv(s,t){if(s=s.containerInfo,tu=Sc,s=Fm(s),To(s)){if("selectionStart"in s)var a={start:s.selectionStart,end:s.selectionEnd};else e:{a=(a=s.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var c=l.anchorOffset,o=l.focusNode;l=l.focusOffset;try{a.nodeType,o.nodeType}catch{a=null;break e}var x=0,v=-1,D=-1,J=0,re=0,he=s,Z=null;s:for(;;){for(var se;he!==a||c!==0&&he.nodeType!==3||(v=x+c),he!==o||l!==0&&he.nodeType!==3||(D=x+l),he.nodeType===3&&(x+=he.nodeValue.length),(se=he.firstChild)!==null;)Z=he,he=se;for(;;){if(he===s)break s;if(Z===a&&++J===c&&(v=x),Z===o&&++re===l&&(D=x),(se=he.nextSibling)!==null)break;he=Z,Z=he.parentNode}he=se}a=v===-1||D===-1?null:{start:v,end:D}}else a=null}a=a||{start:0,end:0}}else a=null;for(au={focusedElem:s,selectionRange:a},Sc=!1,yt=t;yt!==null;)if(t=yt,s=t.child,(t.subtreeFlags&1028)!==0&&s!==null)s.return=t,yt=s;else for(;yt!==null;){switch(t=yt,o=t.alternate,s=t.flags,t.tag){case 0:if((s&4)!==0&&(s=t.updateQueue,s=s!==null?s.events:null,s!==null))for(a=0;a<s.length;a++)c=s[a],c.ref.impl=c.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&o!==null){s=void 0,a=t,c=o.memoizedProps,o=o.memoizedState,l=a.stateNode;try{var ke=Pl(a.type,c);s=l.getSnapshotBeforeUpdate(ke,o),l.__reactInternalSnapshotBeforeUpdate=s}catch(Ve){Cs(a,a.return,Ve)}}break;case 3:if((s&1024)!==0){if(s=t.stateNode.containerInfo,a=s.nodeType,a===9)iu(s);else if(a===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":iu(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(d(163))}if(s=t.sibling,s!==null){s.return=t.return,yt=s;break}yt=t.return}}function Mx(s,t,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Za(s,a),l&4&&Oi(5,a);break;case 1:if(Za(s,a),l&4)if(s=a.stateNode,t===null)try{s.componentDidMount()}catch(x){Cs(a,a.return,x)}else{var c=Pl(a.type,t.memoizedProps);t=t.memoizedState;try{s.componentDidUpdate(c,t,s.__reactInternalSnapshotBeforeUpdate)}catch(x){Cs(a,a.return,x)}}l&64&&Sx(a),l&512&&Ri(a,a.return);break;case 3:if(Za(s,a),l&64&&(s=a.updateQueue,s!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{fh(s,t)}catch(x){Cs(a,a.return,x)}}break;case 27:t===null&&l&4&&Ex(a);case 26:case 5:Za(s,a),t===null&&l&4&&kx(a),l&512&&Ri(a,a.return);break;case 12:Za(s,a);break;case 31:Za(s,a),l&4&&Ox(s,a);break;case 13:Za(s,a),l&4&&Rx(s,a),l&64&&(s=a.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(a=Jv.bind(null,a),pb(s,a))));break;case 22:if(l=a.memoizedState!==null||Ja,!l){t=t!==null&&t.memoizedState!==null||xt,c=Ja;var o=xt;Ja=l,(xt=t)&&!o?Wa(s,a,(a.subtreeFlags&8772)!==0):Za(s,a),Ja=c,xt=o}break;case 30:break;default:Za(s,a)}}function Ax(s){var t=s.alternate;t!==null&&(s.alternate=null,Ax(t)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(t=s.stateNode,t!==null&&uo(t)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Vs=null,Ut=!1;function Pa(s,t,a){for(a=a.child;a!==null;)Dx(s,t,a),a=a.sibling}function Dx(s,t,a){if(ve&&typeof ve.onCommitFiberUnmount=="function")try{ve.onCommitFiberUnmount(Is,a)}catch{}switch(a.tag){case 26:xt||za(a,t),Pa(s,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:xt||za(a,t);var l=Vs,c=Ut;kl(a.type)&&(Vs=a.stateNode,Ut=!1),Pa(s,t,a),$i(a.stateNode),Vs=l,Ut=c;break;case 5:xt||za(a,t);case 6:if(l=Vs,c=Ut,Vs=null,Pa(s,t,a),Vs=l,Ut=c,Vs!==null)if(Ut)try{(Vs.nodeType===9?Vs.body:Vs.nodeName==="HTML"?Vs.ownerDocument.body:Vs).removeChild(a.stateNode)}catch(o){Cs(a,t,o)}else try{Vs.removeChild(a.stateNode)}catch(o){Cs(a,t,o)}break;case 18:Vs!==null&&(Ut?(s=Vs,Cf(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,a.stateNode),In(s)):Cf(Vs,a.stateNode));break;case 4:l=Vs,c=Ut,Vs=a.stateNode.containerInfo,Ut=!0,Pa(s,t,a),Vs=l,Ut=c;break;case 0:case 11:case 14:case 15:bl(2,a,t),xt||bl(4,a,t),Pa(s,t,a);break;case 1:xt||(za(a,t),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Cx(a,t,l)),Pa(s,t,a);break;case 21:Pa(s,t,a);break;case 22:xt=(l=xt)||a.memoizedState!==null,Pa(s,t,a),xt=l;break;default:Pa(s,t,a)}}function Ox(s,t){if(t.memoizedState===null&&(s=t.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{In(s)}catch(a){Cs(t,t.return,a)}}}function Rx(s,t){if(t.memoizedState===null&&(s=t.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{In(s)}catch(a){Cs(t,t.return,a)}}function Fv(s){switch(s.tag){case 31:case 13:case 19:var t=s.stateNode;return t===null&&(t=s.stateNode=new zx),t;case 22:return s=s.stateNode,t=s._retryCache,t===null&&(t=s._retryCache=new zx),t;default:throw Error(d(435,s.tag))}}function nc(s,t){var a=Fv(s);t.forEach(function(l){if(!a.has(l)){a.add(l);var c=Pv.bind(null,s,l);l.then(c,c)}})}function Bt(s,t){var a=t.deletions;if(a!==null)for(var l=0;l<a.length;l++){var c=a[l],o=s,x=t,v=x;e:for(;v!==null;){switch(v.tag){case 27:if(kl(v.type)){Vs=v.stateNode,Ut=!1;break e}break;case 5:Vs=v.stateNode,Ut=!1;break e;case 3:case 4:Vs=v.stateNode.containerInfo,Ut=!0;break e}v=v.return}if(Vs===null)throw Error(d(160));Dx(o,x,c),Vs=null,Ut=!1,o=c.alternate,o!==null&&(o.return=null),c.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Lx(t,s),t=t.sibling}var ba=null;function Lx(s,t){var a=s.alternate,l=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Bt(t,s),Ht(s),l&4&&(bl(3,s,s.return),Oi(3,s),bl(5,s,s.return));break;case 1:Bt(t,s),Ht(s),l&512&&(xt||a===null||za(a,a.return)),l&64&&Ja&&(s=s.updateQueue,s!==null&&(l=s.callbacks,l!==null&&(a=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var c=ba;if(Bt(t,s),Ht(s),l&512&&(xt||a===null||za(a,a.return)),l&4){var o=a!==null?a.memoizedState:null;if(l=s.memoizedState,a===null)if(l===null)if(s.stateNode===null){e:{l=s.type,a=s.memoizedProps,c=c.ownerDocument||c;s:switch(l){case"title":o=c.getElementsByTagName("title")[0],(!o||o[ci]||o[_t]||o.namespaceURI==="http://www.w3.org/2000/svg"||o.hasAttribute("itemprop"))&&(o=c.createElement(l),c.head.insertBefore(o,c.querySelector("head > title"))),Tt(o,l,a),o[_t]=s,Nt(o),l=o;break e;case"link":var x=Uf("link","href",c).get(l+(a.href||""));if(x){for(var v=0;v<x.length;v++)if(o=x[v],o.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&o.getAttribute("rel")===(a.rel==null?null:a.rel)&&o.getAttribute("title")===(a.title==null?null:a.title)&&o.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){x.splice(v,1);break s}}o=c.createElement(l),Tt(o,l,a),c.head.appendChild(o);break;case"meta":if(x=Uf("meta","content",c).get(l+(a.content||""))){for(v=0;v<x.length;v++)if(o=x[v],o.getAttribute("content")===(a.content==null?null:""+a.content)&&o.getAttribute("name")===(a.name==null?null:a.name)&&o.getAttribute("property")===(a.property==null?null:a.property)&&o.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&o.getAttribute("charset")===(a.charSet==null?null:a.charSet)){x.splice(v,1);break s}}o=c.createElement(l),Tt(o,l,a),c.head.appendChild(o);break;default:throw Error(d(468,l))}o[_t]=s,Nt(o),l=o}s.stateNode=l}else Bf(c,s.type,s.stateNode);else s.stateNode=Lf(c,l,s.memoizedProps);else o!==l?(o===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):o.count--,l===null?Bf(c,s.type,s.stateNode):Lf(c,l,s.memoizedProps)):l===null&&s.stateNode!==null&&Ad(s,s.memoizedProps,a.memoizedProps)}break;case 27:Bt(t,s),Ht(s),l&512&&(xt||a===null||za(a,a.return)),a!==null&&l&4&&Ad(s,s.memoizedProps,a.memoizedProps);break;case 5:if(Bt(t,s),Ht(s),l&512&&(xt||a===null||za(a,a.return)),s.flags&32){c=s.stateNode;try{fn(c,"")}catch(ke){Cs(s,s.return,ke)}}l&4&&s.stateNode!=null&&(c=s.memoizedProps,Ad(s,c,a!==null?a.memoizedProps:c)),l&1024&&(Rd=!0);break;case 6:if(Bt(t,s),Ht(s),l&4){if(s.stateNode===null)throw Error(d(162));l=s.memoizedProps,a=s.stateNode;try{a.nodeValue=l}catch(ke){Cs(s,s.return,ke)}}break;case 3:if(Nc=null,c=ba,ba=vc(t.containerInfo),Bt(t,s),ba=c,Ht(s),l&4&&a!==null&&a.memoizedState.isDehydrated)try{In(t.containerInfo)}catch(ke){Cs(s,s.return,ke)}Rd&&(Rd=!1,Ux(s));break;case 4:l=ba,ba=vc(s.stateNode.containerInfo),Bt(t,s),Ht(s),ba=l;break;case 12:Bt(t,s),Ht(s);break;case 31:Bt(t,s),Ht(s),l&4&&(l=s.updateQueue,l!==null&&(s.updateQueue=null,nc(s,l)));break;case 13:Bt(t,s),Ht(s),s.child.flags&8192&&s.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(rc=Ds()),l&4&&(l=s.updateQueue,l!==null&&(s.updateQueue=null,nc(s,l)));break;case 22:c=s.memoizedState!==null;var D=a!==null&&a.memoizedState!==null,J=Ja,re=xt;if(Ja=J||c,xt=re||D,Bt(t,s),xt=re,Ja=J,Ht(s),l&8192)e:for(t=s.stateNode,t._visibility=c?t._visibility&-2:t._visibility|1,c&&(a===null||D||Ja||xt||Zl(s)),a=null,t=s;;){if(t.tag===5||t.tag===26){if(a===null){D=a=t;try{if(o=D.stateNode,c)x=o.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{v=D.stateNode;var he=D.memoizedProps.style,Z=he!=null&&he.hasOwnProperty("display")?he.display:null;v.style.display=Z==null||typeof Z=="boolean"?"":(""+Z).trim()}}catch(ke){Cs(D,D.return,ke)}}}else if(t.tag===6){if(a===null){D=t;try{D.stateNode.nodeValue=c?"":D.memoizedProps}catch(ke){Cs(D,D.return,ke)}}}else if(t.tag===18){if(a===null){D=t;try{var se=D.stateNode;c?kf(se,!0):kf(D.stateNode,!1)}catch(ke){Cs(D,D.return,ke)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===s)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}l&4&&(l=s.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,nc(s,a))));break;case 19:Bt(t,s),Ht(s),l&4&&(l=s.updateQueue,l!==null&&(s.updateQueue=null,nc(s,l)));break;case 30:break;case 21:break;default:Bt(t,s),Ht(s)}}function Ht(s){var t=s.flags;if(t&2){try{for(var a,l=s.return;l!==null;){if(Tx(l)){a=l;break}l=l.return}if(a==null)throw Error(d(160));switch(a.tag){case 27:var c=a.stateNode,o=Dd(s);lc(s,o,c);break;case 5:var x=a.stateNode;a.flags&32&&(fn(x,""),a.flags&=-33);var v=Dd(s);lc(s,v,x);break;case 3:case 4:var D=a.stateNode.containerInfo,J=Dd(s);Od(s,J,D);break;default:throw Error(d(161))}}catch(re){Cs(s,s.return,re)}s.flags&=-3}t&4096&&(s.flags&=-4097)}function Ux(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var t=s;Ux(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),s=s.sibling}}function Za(s,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Mx(s,t.alternate,t),t=t.sibling}function Zl(s){for(s=s.child;s!==null;){var t=s;switch(t.tag){case 0:case 11:case 14:case 15:bl(4,t,t.return),Zl(t);break;case 1:za(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&Cx(t,t.return,a),Zl(t);break;case 27:$i(t.stateNode);case 26:case 5:za(t,t.return),Zl(t);break;case 22:t.memoizedState===null&&Zl(t);break;case 30:Zl(t);break;default:Zl(t)}s=s.sibling}}function Wa(s,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var l=t.alternate,c=s,o=t,x=o.flags;switch(o.tag){case 0:case 11:case 15:Wa(c,o,a),Oi(4,o);break;case 1:if(Wa(c,o,a),l=o,c=l.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(J){Cs(l,l.return,J)}if(l=o,c=l.updateQueue,c!==null){var v=l.stateNode;try{var D=c.shared.hiddenCallbacks;if(D!==null)for(c.shared.hiddenCallbacks=null,c=0;c<D.length;c++)xh(D[c],v)}catch(J){Cs(l,l.return,J)}}a&&x&64&&Sx(o),Ri(o,o.return);break;case 27:Ex(o);case 26:case 5:Wa(c,o,a),a&&l===null&&x&4&&kx(o),Ri(o,o.return);break;case 12:Wa(c,o,a);break;case 31:Wa(c,o,a),a&&x&4&&Ox(c,o);break;case 13:Wa(c,o,a),a&&x&4&&Rx(c,o);break;case 22:o.memoizedState===null&&Wa(c,o,a),Ri(o,o.return);break;case 30:break;default:Wa(c,o,a)}t=t.sibling}}function Ld(s,t){var a=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(a=s.memoizedState.cachePool.pool),s=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),s!==a&&(s!=null&&s.refCount++,a!=null&&Ni(a))}function Ud(s,t){s=null,t.alternate!==null&&(s=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==s&&(t.refCount++,s!=null&&Ni(s))}function Na(s,t,a,l){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Bx(s,t,a,l),t=t.sibling}function Bx(s,t,a,l){var c=t.flags;switch(t.tag){case 0:case 11:case 15:Na(s,t,a,l),c&2048&&Oi(9,t);break;case 1:Na(s,t,a,l);break;case 3:Na(s,t,a,l),c&2048&&(s=null,t.alternate!==null&&(s=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==s&&(t.refCount++,s!=null&&Ni(s)));break;case 12:if(c&2048){Na(s,t,a,l),s=t.stateNode;try{var o=t.memoizedProps,x=o.id,v=o.onPostCommit;typeof v=="function"&&v(x,t.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(D){Cs(t,t.return,D)}}else Na(s,t,a,l);break;case 31:Na(s,t,a,l);break;case 13:Na(s,t,a,l);break;case 23:break;case 22:o=t.stateNode,x=t.alternate,t.memoizedState!==null?o._visibility&2?Na(s,t,a,l):Li(s,t):o._visibility&2?Na(s,t,a,l):(o._visibility|=2,Rn(s,t,a,l,(t.subtreeFlags&10256)!==0||!1)),c&2048&&Ld(x,t);break;case 24:Na(s,t,a,l),c&2048&&Ud(t.alternate,t);break;default:Na(s,t,a,l)}}function Rn(s,t,a,l,c){for(c=c&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var o=s,x=t,v=a,D=l,J=x.flags;switch(x.tag){case 0:case 11:case 15:Rn(o,x,v,D,c),Oi(8,x);break;case 23:break;case 22:var re=x.stateNode;x.memoizedState!==null?re._visibility&2?Rn(o,x,v,D,c):Li(o,x):(re._visibility|=2,Rn(o,x,v,D,c)),c&&J&2048&&Ld(x.alternate,x);break;case 24:Rn(o,x,v,D,c),c&&J&2048&&Ud(x.alternate,x);break;default:Rn(o,x,v,D,c)}t=t.sibling}}function Li(s,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=s,l=t,c=l.flags;switch(l.tag){case 22:Li(a,l),c&2048&&Ld(l.alternate,l);break;case 24:Li(a,l),c&2048&&Ud(l.alternate,l);break;default:Li(a,l)}t=t.sibling}}var Ui=8192;function Ln(s,t,a){if(s.subtreeFlags&Ui)for(s=s.child;s!==null;)Hx(s,t,a),s=s.sibling}function Hx(s,t,a){switch(s.tag){case 26:Ln(s,t,a),s.flags&Ui&&s.memoizedState!==null&&Tb(a,ba,s.memoizedState,s.memoizedProps);break;case 5:Ln(s,t,a);break;case 3:case 4:var l=ba;ba=vc(s.stateNode.containerInfo),Ln(s,t,a),ba=l;break;case 22:s.memoizedState===null&&(l=s.alternate,l!==null&&l.memoizedState!==null?(l=Ui,Ui=16777216,Ln(s,t,a),Ui=l):Ln(s,t,a));break;default:Ln(s,t,a)}}function qx(s){var t=s.alternate;if(t!==null&&(s=t.child,s!==null)){t.child=null;do t=s.sibling,s.sibling=null,s=t;while(s!==null)}}function Bi(s){var t=s.deletions;if((s.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var l=t[a];yt=l,Fx(l,s)}qx(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Gx(s),s=s.sibling}function Gx(s){switch(s.tag){case 0:case 11:case 15:Bi(s),s.flags&2048&&bl(9,s,s.return);break;case 3:Bi(s);break;case 12:Bi(s);break;case 22:var t=s.stateNode;s.memoizedState!==null&&t._visibility&2&&(s.return===null||s.return.tag!==13)?(t._visibility&=-3,ic(s)):Bi(s);break;default:Bi(s)}}function ic(s){var t=s.deletions;if((s.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var l=t[a];yt=l,Fx(l,s)}qx(s)}for(s=s.child;s!==null;){switch(t=s,t.tag){case 0:case 11:case 15:bl(8,t,t.return),ic(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,ic(t));break;default:ic(t)}s=s.sibling}}function Fx(s,t){for(;yt!==null;){var a=yt;switch(a.tag){case 0:case 11:case 15:bl(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Ni(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,yt=l;else e:for(a=s;yt!==null;){l=yt;var c=l.sibling,o=l.return;if(Ax(l),l===a){yt=null;break e}if(c!==null){c.return=o,yt=c;break e}yt=o}}}var Vv={getCacheForType:function(s){var t=Ct(ut),a=t.data.get(s);return a===void 0&&(a=s(),t.data.set(s,a)),a},cacheSignal:function(){return Ct(ut).controller.signal}},$v=typeof WeakMap=="function"?WeakMap:Map,ws=0,Os=null,ds=null,hs=0,Ss=0,Zt=null,Nl=!1,Un=!1,Bd=!1,el=0,Ps=0,yl=0,Wl=0,Hd=0,Wt=0,Bn=0,Hi=null,qt=null,qd=!1,rc=0,Vx=0,cc=1/0,oc=null,wl=null,jt=0,_l=null,Hn=null,sl=0,Gd=0,Fd=null,$x=null,qi=0,Vd=null;function ea(){return(ws&2)!==0&&hs!==0?hs&-hs:R.T!==null?Kd():im()}function Qx(){if(Wt===0)if((hs&536870912)===0||ps){var s=aa;aa<<=1,(aa&3932160)===0&&(aa=262144),Wt=s}else Wt=536870912;return s=Jt.current,s!==null&&(s.flags|=32),Wt}function Gt(s,t,a){(s===Os&&(Ss===2||Ss===9)||s.cancelPendingCommit!==null)&&(qn(s,0),Sl(s,hs,Wt,!1)),ys(s,a),((ws&2)===0||s!==Os)&&(s===Os&&((ws&2)===0&&(Wl|=a),Ps===4&&Sl(s,hs,Wt,!1)),Ma(s))}function Ix(s,t,a){if((ws&6)!==0)throw Error(d(327));var l=!a&&(t&127)===0&&(t&s.expiredLanes)===0||le(s,t),c=l?Yv(s,t):Qd(s,t,!0),o=l;do{if(c===0){Un&&!l&&Sl(s,t,0,!1);break}else{if(a=s.current.alternate,o&&!Qv(a)){c=Qd(s,t,!1),o=!1;continue}if(c===2){if(o=t,s.errorRecoveryDisabledLanes&o)var x=0;else x=s.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){t=x;e:{var v=s;c=Hi;var D=v.current.memoizedState.isDehydrated;if(D&&(qn(v,x).flags|=256),x=Qd(v,x,!1),x!==2){if(Bd&&!D){v.errorRecoveryDisabledLanes|=o,Wl|=o,c=4;break e}o=qt,qt=c,o!==null&&(qt===null?qt=o:qt.push.apply(qt,o))}c=x}if(o=!1,c!==2)continue}}if(c===1){qn(s,0),Sl(s,t,0,!0);break}e:{switch(l=s,o=c,o){case 0:case 1:throw Error(d(345));case 4:if((t&4194048)!==t)break;case 6:Sl(l,t,Wt,!Nl);break e;case 2:qt=null;break;case 3:case 5:break;default:throw Error(d(329))}if((t&62914560)===t&&(c=rc+300-Ds(),10<c)){if(Sl(l,t,Wt,!Nl),Ba(l,0,!0)!==0)break e;sl=t,l.timeoutHandle=_f(Yx.bind(null,l,a,qt,oc,qd,t,Wt,Wl,Bn,Nl,o,"Throttled",-0,0),c);break e}Yx(l,a,qt,oc,qd,t,Wt,Wl,Bn,Nl,o,null,-0,0)}}break}while(!0);Ma(s)}function Yx(s,t,a,l,c,o,x,v,D,J,re,he,Z,se){if(s.timeoutHandle=-1,he=t.subtreeFlags,he&8192||(he&16785408)===16785408){he={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:qa},Hx(t,o,he);var ke=(o&62914560)===o?rc-Ds():(o&4194048)===o?Vx-Ds():0;if(ke=Eb(he,ke),ke!==null){sl=o,s.cancelPendingCommit=ke(sf.bind(null,s,t,o,a,l,c,x,v,D,re,he,null,Z,se)),Sl(s,o,x,!J);return}}sf(s,t,o,a,l,c,x,v,D)}function Qv(s){for(var t=s;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var c=a[l],o=c.getSnapshot;c=c.value;try{if(!Xt(o(),c))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===s)break;for(;t.sibling===null;){if(t.return===null||t.return===s)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Sl(s,t,a,l){t&=~Hd,t&=~Wl,s.suspendedLanes|=t,s.pingedLanes&=~t,l&&(s.warmLanes|=t),l=s.expirationTimes;for(var c=t;0<c;){var o=31-vs(c),x=1<<o;l[o]=-1,c&=~x}a!==0&&ri(s,a,t)}function dc(){return(ws&6)===0?(Gi(0),!1):!0}function $d(){if(ds!==null){if(Ss===0)var s=ds.return;else s=ds,$a=$l=null,id(s),zn=null,wi=0,s=ds;for(;s!==null;)_x(s.alternate,s),s=s.return;ds=null}}function qn(s,t){var a=s.timeoutHandle;a!==-1&&(s.timeoutHandle=-1,ub(a)),a=s.cancelPendingCommit,a!==null&&(s.cancelPendingCommit=null,a()),sl=0,$d(),Os=s,ds=a=Fa(s.current,null),hs=t,Ss=0,Zt=null,Nl=!1,Un=le(s,t),Bd=!1,Bn=Wt=Hd=Wl=yl=Ps=0,qt=Hi=null,qd=!1,(t&8)!==0&&(t|=t&32);var l=s.entangledLanes;if(l!==0)for(s=s.entanglements,l&=t;0<l;){var c=31-vs(l),o=1<<c;t|=s[c],l&=~o}return el=t,Mr(),a}function Xx(s,t){Je=null,R.H=Mi,t===En||t===Hr?(t=dh(),Ss=3):t===Xo?(t=dh(),Ss=4):Ss=t===yd?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Zt=t,ds===null&&(Ps=1,Wr(s,ra(t,s.current)))}function Kx(){var s=Jt.current;return s===null?!0:(hs&4194048)===hs?ua===null:(hs&62914560)===hs||(hs&536870912)!==0?s===ua:!1}function Jx(){var s=R.H;return R.H=Mi,s===null?Mi:s}function Px(){var s=R.A;return R.A=Vv,s}function uc(){Ps=4,Nl||(hs&4194048)!==hs&&Jt.current!==null||(Un=!0),(yl&134217727)===0&&(Wl&134217727)===0||Os===null||Sl(Os,hs,Wt,!1)}function Qd(s,t,a){var l=ws;ws|=2;var c=Jx(),o=Px();(Os!==s||hs!==t)&&(oc=null,qn(s,t)),t=!1;var x=Ps;e:do try{if(Ss!==0&&ds!==null){var v=ds,D=Zt;switch(Ss){case 8:$d(),x=6;break e;case 3:case 2:case 9:case 6:Jt.current===null&&(t=!0);var J=Ss;if(Ss=0,Zt=null,Gn(s,v,D,J),a&&Un){x=0;break e}break;default:J=Ss,Ss=0,Zt=null,Gn(s,v,D,J)}}Iv(),x=Ps;break}catch(re){Xx(s,re)}while(!0);return t&&s.shellSuspendCounter++,$a=$l=null,ws=l,R.H=c,R.A=o,ds===null&&(Os=null,hs=0,Mr()),x}function Iv(){for(;ds!==null;)Zx(ds)}function Yv(s,t){var a=ws;ws|=2;var l=Jx(),c=Px();Os!==s||hs!==t?(oc=null,cc=Ds()+500,qn(s,t)):Un=le(s,t);e:do try{if(Ss!==0&&ds!==null){t=ds;var o=Zt;s:switch(Ss){case 1:Ss=0,Zt=null,Gn(s,t,o,1);break;case 2:case 9:if(ch(o)){Ss=0,Zt=null,Wx(t);break}t=function(){Ss!==2&&Ss!==9||Os!==s||(Ss=7),Ma(s)},o.then(t,t);break e;case 3:Ss=7;break e;case 4:Ss=5;break e;case 7:ch(o)?(Ss=0,Zt=null,Wx(t)):(Ss=0,Zt=null,Gn(s,t,o,7));break;case 5:var x=null;switch(ds.tag){case 26:x=ds.memoizedState;case 5:case 27:var v=ds;if(x?Hf(x):v.stateNode.complete){Ss=0,Zt=null;var D=v.sibling;if(D!==null)ds=D;else{var J=v.return;J!==null?(ds=J,mc(J)):ds=null}break s}}Ss=0,Zt=null,Gn(s,t,o,5);break;case 6:Ss=0,Zt=null,Gn(s,t,o,6);break;case 8:$d(),Ps=6;break e;default:throw Error(d(462))}}Xv();break}catch(re){Xx(s,re)}while(!0);return $a=$l=null,R.H=l,R.A=c,ws=a,ds!==null?0:(Os=null,hs=0,Mr(),Ps)}function Xv(){for(;ds!==null&&!bt();)Zx(ds)}function Zx(s){var t=yx(s.alternate,s,el);s.memoizedProps=s.pendingProps,t===null?mc(s):ds=t}function Wx(s){var t=s,a=t.alternate;switch(t.tag){case 15:case 0:t=px(a,t,t.pendingProps,t.type,void 0,hs);break;case 11:t=px(a,t,t.pendingProps,t.type.render,t.ref,hs);break;case 5:id(t);default:_x(a,t),t=ds=Pm(t,el),t=yx(a,t,el)}s.memoizedProps=s.pendingProps,t===null?mc(s):ds=t}function Gn(s,t,a,l){$a=$l=null,id(t),zn=null,wi=0;var c=t.return;try{if(Lv(s,c,t,a,hs)){Ps=1,Wr(s,ra(a,s.current)),ds=null;return}}catch(o){if(c!==null)throw ds=c,o;Ps=1,Wr(s,ra(a,s.current)),ds=null;return}t.flags&32768?(ps||l===1?s=!0:Un||(hs&536870912)!==0?s=!1:(Nl=s=!0,(l===2||l===9||l===3||l===6)&&(l=Jt.current,l!==null&&l.tag===13&&(l.flags|=16384))),ef(t,s)):mc(t)}function mc(s){var t=s;do{if((t.flags&32768)!==0){ef(t,Nl);return}s=t.return;var a=Hv(t.alternate,t,el);if(a!==null){ds=a;return}if(t=t.sibling,t!==null){ds=t;return}ds=t=s}while(t!==null);Ps===0&&(Ps=5)}function ef(s,t){do{var a=qv(s.alternate,s);if(a!==null){a.flags&=32767,ds=a;return}if(a=s.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(s=s.sibling,s!==null)){ds=s;return}ds=s=a}while(s!==null);Ps=6,ds=null}function sf(s,t,a,l,c,o,x,v,D){s.cancelPendingCommit=null;do hc();while(jt!==0);if((ws&6)!==0)throw Error(d(327));if(t!==null){if(t===s.current)throw Error(d(177));if(o=t.lanes|t.childLanes,o|=Do,io(s,a,o,x,v,D),s===Os&&(ds=Os=null,hs=0),Hn=t,_l=s,sl=a,Gd=o,Fd=c,$x=l,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,Zv(Ie,function(){return rf(),null})):(s.callbackNode=null,s.callbackPriority=0),l=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||l){l=R.T,R.T=null,c=X.p,X.p=2,x=ws,ws|=4;try{Gv(s,t,a)}finally{ws=x,X.p=c,R.T=l}}jt=1,tf(),af(),lf()}}function tf(){if(jt===1){jt=0;var s=_l,t=Hn,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=R.T,R.T=null;var l=X.p;X.p=2;var c=ws;ws|=4;try{Lx(t,s);var o=au,x=Fm(s.containerInfo),v=o.focusedElem,D=o.selectionRange;if(x!==v&&v&&v.ownerDocument&&Gm(v.ownerDocument.documentElement,v)){if(D!==null&&To(v)){var J=D.start,re=D.end;if(re===void 0&&(re=J),"selectionStart"in v)v.selectionStart=J,v.selectionEnd=Math.min(re,v.value.length);else{var he=v.ownerDocument||document,Z=he&&he.defaultView||window;if(Z.getSelection){var se=Z.getSelection(),ke=v.textContent.length,Ve=Math.min(D.start,ke),zs=D.end===void 0?Ve:Math.min(D.end,ke);!se.extend&&Ve>zs&&(x=zs,zs=Ve,Ve=x);var F=qm(v,Ve),H=qm(v,zs);if(F&&H&&(se.rangeCount!==1||se.anchorNode!==F.node||se.anchorOffset!==F.offset||se.focusNode!==H.node||se.focusOffset!==H.offset)){var K=he.createRange();K.setStart(F.node,F.offset),se.removeAllRanges(),Ve>zs?(se.addRange(K),se.extend(H.node,H.offset)):(K.setEnd(H.node,H.offset),se.addRange(K))}}}}for(he=[],se=v;se=se.parentNode;)se.nodeType===1&&he.push({element:se,left:se.scrollLeft,top:se.scrollTop});for(typeof v.focus=="function"&&v.focus(),v=0;v<he.length;v++){var de=he[v];de.element.scrollLeft=de.left,de.element.scrollTop=de.top}}Sc=!!tu,au=tu=null}finally{ws=c,X.p=l,R.T=a}}s.current=t,jt=2}}function af(){if(jt===2){jt=0;var s=_l,t=Hn,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=R.T,R.T=null;var l=X.p;X.p=2;var c=ws;ws|=4;try{Mx(s,t.alternate,t)}finally{ws=c,X.p=l,R.T=a}}jt=3}}function lf(){if(jt===4||jt===3){jt=0,ot();var s=_l,t=Hn,a=sl,l=$x;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?jt=5:(jt=0,Hn=_l=null,nf(s,s.pendingLanes));var c=s.pendingLanes;if(c===0&&(wl=null),co(a),t=t.stateNode,ve&&typeof ve.onCommitFiberRoot=="function")try{ve.onCommitFiberRoot(Is,t,void 0,(t.current.flags&128)===128)}catch{}if(l!==null){t=R.T,c=X.p,X.p=2,R.T=null;try{for(var o=s.onRecoverableError,x=0;x<l.length;x++){var v=l[x];o(v.value,{componentStack:v.stack})}}finally{R.T=t,X.p=c}}(sl&3)!==0&&hc(),Ma(s),c=s.pendingLanes,(a&261930)!==0&&(c&42)!==0?s===Vd?qi++:(qi=0,Vd=s):qi=0,Gi(0)}}function nf(s,t){(s.pooledCacheLanes&=t)===0&&(t=s.pooledCache,t!=null&&(s.pooledCache=null,Ni(t)))}function hc(){return tf(),af(),lf(),rf()}function rf(){if(jt!==5)return!1;var s=_l,t=Gd;Gd=0;var a=co(sl),l=R.T,c=X.p;try{X.p=32>a?32:a,R.T=null,a=Fd,Fd=null;var o=_l,x=sl;if(jt=0,Hn=_l=null,sl=0,(ws&6)!==0)throw Error(d(331));var v=ws;if(ws|=4,Gx(o.current),Bx(o,o.current,x,a),ws=v,Gi(0,!1),ve&&typeof ve.onPostCommitFiberRoot=="function")try{ve.onPostCommitFiberRoot(Is,o)}catch{}return!0}finally{X.p=c,R.T=l,nf(s,t)}}function cf(s,t,a){t=ra(a,t),t=Nd(s.stateNode,t,2),s=gl(s,t,2),s!==null&&(ys(s,2),Ma(s))}function Cs(s,t,a){if(s.tag===3)cf(s,s,a);else for(;t!==null;){if(t.tag===3){cf(t,s,a);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(wl===null||!wl.has(l))){s=ra(a,s),a=cx(2),l=gl(t,a,2),l!==null&&(ox(a,l,t,s),ys(l,2),Ma(l));break}}t=t.return}}function Id(s,t,a){var l=s.pingCache;if(l===null){l=s.pingCache=new $v;var c=new Set;l.set(t,c)}else c=l.get(t),c===void 0&&(c=new Set,l.set(t,c));c.has(a)||(Bd=!0,c.add(a),s=Kv.bind(null,s,t,a),t.then(s,s))}function Kv(s,t,a){var l=s.pingCache;l!==null&&l.delete(t),s.pingedLanes|=s.suspendedLanes&a,s.warmLanes&=~a,Os===s&&(hs&a)===a&&(Ps===4||Ps===3&&(hs&62914560)===hs&&300>Ds()-rc?(ws&2)===0&&qn(s,0):Hd|=a,Bn===hs&&(Bn=0)),Ma(s)}function of(s,t){t===0&&(t=je()),s=Gl(s,t),s!==null&&(ys(s,t),Ma(s))}function Jv(s){var t=s.memoizedState,a=0;t!==null&&(a=t.retryLane),of(s,a)}function Pv(s,t){var a=0;switch(s.tag){case 31:case 13:var l=s.stateNode,c=s.memoizedState;c!==null&&(a=c.retryLane);break;case 19:l=s.stateNode;break;case 22:l=s.stateNode._retryCache;break;default:throw Error(d(314))}l!==null&&l.delete(t),of(s,a)}function Zv(s,t){return Qs(s,t)}var xc=null,Fn=null,Yd=!1,fc=!1,Xd=!1,Cl=0;function Ma(s){s!==Fn&&s.next===null&&(Fn===null?xc=Fn=s:Fn=Fn.next=s),fc=!0,Yd||(Yd=!0,eb())}function Gi(s,t){if(!Xd&&fc){Xd=!0;do for(var a=!1,l=xc;l!==null;){if(s!==0){var c=l.pendingLanes;if(c===0)var o=0;else{var x=l.suspendedLanes,v=l.pingedLanes;o=(1<<31-vs(42|s)+1)-1,o&=c&~(x&~v),o=o&201326741?o&201326741|1:o?o|2:0}o!==0&&(a=!0,hf(l,o))}else o=hs,o=Ba(l,l===Os?o:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(o&3)===0||le(l,o)||(a=!0,hf(l,o));l=l.next}while(a);Xd=!1}}function Wv(){df()}function df(){fc=Yd=!1;var s=0;Cl!==0&&db()&&(s=Cl);for(var t=Ds(),a=null,l=xc;l!==null;){var c=l.next,o=uf(l,t);o===0?(l.next=null,a===null?xc=c:a.next=c,c===null&&(Fn=a)):(a=l,(s!==0||(o&3)!==0)&&(fc=!0)),l=c}jt!==0&&jt!==5||Gi(s),Cl!==0&&(Cl=0)}function uf(s,t){for(var a=s.suspendedLanes,l=s.pingedLanes,c=s.expirationTimes,o=s.pendingLanes&-62914561;0<o;){var x=31-vs(o),v=1<<x,D=c[x];D===-1?((v&a)===0||(v&l)!==0)&&(c[x]=E(v,t)):D<=t&&(s.expiredLanes|=v),o&=~v}if(t=Os,a=hs,a=Ba(s,s===t?a:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),l=s.callbackNode,a===0||s===t&&(Ss===2||Ss===9)||s.cancelPendingCommit!==null)return l!==null&&l!==null&&Hs(l),s.callbackNode=null,s.callbackPriority=0;if((a&3)===0||le(s,a)){if(t=a&-a,t===s.callbackPriority)return t;switch(l!==null&&Hs(l),co(a)){case 2:case 8:a=ze;break;case 32:a=Ie;break;case 268435456:a=Ye;break;default:a=Ie}return l=mf.bind(null,s),a=Qs(a,l),s.callbackPriority=t,s.callbackNode=a,t}return l!==null&&l!==null&&Hs(l),s.callbackPriority=2,s.callbackNode=null,2}function mf(s,t){if(jt!==0&&jt!==5)return s.callbackNode=null,s.callbackPriority=0,null;var a=s.callbackNode;if(hc()&&s.callbackNode!==a)return null;var l=hs;return l=Ba(s,s===Os?l:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),l===0?null:(Ix(s,l,t),uf(s,Ds()),s.callbackNode!=null&&s.callbackNode===a?mf.bind(null,s):null)}function hf(s,t){if(hc())return null;Ix(s,t,!0)}function eb(){mb(function(){(ws&6)!==0?Qs(Be,Wv):df()})}function Kd(){if(Cl===0){var s=kn;s===0&&(s=Ys,Ys<<=1,(Ys&261888)===0&&(Ys=256)),Cl=s}return Cl}function xf(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:wr(""+s)}function ff(s,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,s.id&&a.setAttribute("form",s.id),t.parentNode.insertBefore(a,t),s=new FormData(s),a.parentNode.removeChild(a),s}function sb(s,t,a,l,c){if(t==="submit"&&a&&a.stateNode===c){var o=xf((c[Rt]||null).action),x=l.submitter;x&&(t=(t=x[Rt]||null)?xf(t.formAction):x.getAttribute("formAction"),t!==null&&(o=t,x=null));var v=new kr("action","action",null,l,c);s.push({event:v,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Cl!==0){var D=x?ff(c,x):new FormData(c);fd(a,{pending:!0,data:D,method:c.method,action:o},null,D)}}else typeof o=="function"&&(v.preventDefault(),D=x?ff(c,x):new FormData(c),fd(a,{pending:!0,data:D,method:c.method,action:o},o,D))},currentTarget:c}]})}}for(var Jd=0;Jd<Ao.length;Jd++){var Pd=Ao[Jd],tb=Pd.toLowerCase(),ab=Pd[0].toUpperCase()+Pd.slice(1);va(tb,"on"+ab)}va(Qm,"onAnimationEnd"),va(Im,"onAnimationIteration"),va(Ym,"onAnimationStart"),va("dblclick","onDoubleClick"),va("focusin","onFocus"),va("focusout","onBlur"),va(vv,"onTransitionRun"),va(bv,"onTransitionStart"),va(Nv,"onTransitionCancel"),va(Xm,"onTransitionEnd"),hn("onMouseEnter",["mouseout","mouseover"]),hn("onMouseLeave",["mouseout","mouseover"]),hn("onPointerEnter",["pointerout","pointerover"]),hn("onPointerLeave",["pointerout","pointerover"]),Ul("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ul("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ul("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ul("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ul("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ul("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Fi));function pf(s,t){t=(t&4)!==0;for(var a=0;a<s.length;a++){var l=s[a],c=l.event;l=l.listeners;e:{var o=void 0;if(t)for(var x=l.length-1;0<=x;x--){var v=l[x],D=v.instance,J=v.currentTarget;if(v=v.listener,D!==o&&c.isPropagationStopped())break e;o=v,c.currentTarget=J;try{o(c)}catch(re){zr(re)}c.currentTarget=null,o=D}else for(x=0;x<l.length;x++){if(v=l[x],D=v.instance,J=v.currentTarget,v=v.listener,D!==o&&c.isPropagationStopped())break e;o=v,c.currentTarget=J;try{o(c)}catch(re){zr(re)}c.currentTarget=null,o=D}}}}function us(s,t){var a=t[oo];a===void 0&&(a=t[oo]=new Set);var l=s+"__bubble";a.has(l)||(gf(t,s,2,!1),a.add(l))}function Zd(s,t,a){var l=0;t&&(l|=4),gf(a,s,l,t)}var pc="_reactListening"+Math.random().toString(36).slice(2);function Wd(s){if(!s[pc]){s[pc]=!0,om.forEach(function(a){a!=="selectionchange"&&(lb.has(a)||Zd(a,!1,s),Zd(a,!0,s))});var t=s.nodeType===9?s:s.ownerDocument;t===null||t[pc]||(t[pc]=!0,Zd("selectionchange",!1,t))}}function gf(s,t,a,l){switch(If(t)){case 2:var c=Ab;break;case 8:c=Db;break;default:c=xu}a=c.bind(null,t,a,s),c=void 0,!vo||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),l?c!==void 0?s.addEventListener(t,a,{capture:!0,passive:c}):s.addEventListener(t,a,!0):c!==void 0?s.addEventListener(t,a,{passive:c}):s.addEventListener(t,a,!1)}function eu(s,t,a,l,c){var o=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var x=l.tag;if(x===3||x===4){var v=l.stateNode.containerInfo;if(v===c)break;if(x===4)for(x=l.return;x!==null;){var D=x.tag;if((D===3||D===4)&&x.stateNode.containerInfo===c)return;x=x.return}for(;v!==null;){if(x=dn(v),x===null)return;if(D=x.tag,D===5||D===6||D===26||D===27){l=o=x;continue e}v=v.parentNode}}l=l.return}Nm(function(){var J=o,re=go(a),he=[];e:{var Z=Km.get(s);if(Z!==void 0){var se=kr,ke=s;switch(s){case"keypress":if(Sr(a)===0)break e;case"keydown":case"keyup":se=Pj;break;case"focusin":ke="focus",se=wo;break;case"focusout":ke="blur",se=wo;break;case"beforeblur":case"afterblur":se=wo;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=_m;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=Hj;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=ev;break;case Qm:case Im:case Ym:se=Fj;break;case Xm:se=tv;break;case"scroll":case"scrollend":se=Uj;break;case"wheel":se=lv;break;case"copy":case"cut":case"paste":se=$j;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=Cm;break;case"toggle":case"beforetoggle":se=iv}var Ve=(t&4)!==0,zs=!Ve&&(s==="scroll"||s==="scrollend"),F=Ve?Z!==null?Z+"Capture":null:Z;Ve=[];for(var H=J,K;H!==null;){var de=H;if(K=de.stateNode,de=de.tag,de!==5&&de!==26&&de!==27||K===null||F===null||(de=di(H,F),de!=null&&Ve.push(Vi(H,de,K))),zs)break;H=H.return}0<Ve.length&&(Z=new se(Z,ke,null,a,re),he.push({event:Z,listeners:Ve}))}}if((t&7)===0){e:{if(Z=s==="mouseover"||s==="pointerover",se=s==="mouseout"||s==="pointerout",Z&&a!==po&&(ke=a.relatedTarget||a.fromElement)&&(dn(ke)||ke[on]))break e;if((se||Z)&&(Z=re.window===re?re:(Z=re.ownerDocument)?Z.defaultView||Z.parentWindow:window,se?(ke=a.relatedTarget||a.toElement,se=J,ke=ke?dn(ke):null,ke!==null&&(zs=h(ke),Ve=ke.tag,ke!==zs||Ve!==5&&Ve!==27&&Ve!==6)&&(ke=null)):(se=null,ke=J),se!==ke)){if(Ve=_m,de="onMouseLeave",F="onMouseEnter",H="mouse",(s==="pointerout"||s==="pointerover")&&(Ve=Cm,de="onPointerLeave",F="onPointerEnter",H="pointer"),zs=se==null?Z:oi(se),K=ke==null?Z:oi(ke),Z=new Ve(de,H+"leave",se,a,re),Z.target=zs,Z.relatedTarget=K,de=null,dn(re)===J&&(Ve=new Ve(F,H+"enter",ke,a,re),Ve.target=K,Ve.relatedTarget=zs,de=Ve),zs=de,se&&ke)s:{for(Ve=nb,F=se,H=ke,K=0,de=F;de;de=Ve(de))K++;de=0;for(var Ue=H;Ue;Ue=Ve(Ue))de++;for(;0<K-de;)F=Ve(F),K--;for(;0<de-K;)H=Ve(H),de--;for(;K--;){if(F===H||H!==null&&F===H.alternate){Ve=F;break s}F=Ve(F),H=Ve(H)}Ve=null}else Ve=null;se!==null&&jf(he,Z,se,Ve,!1),ke!==null&&zs!==null&&jf(he,zs,ke,Ve,!0)}}e:{if(Z=J?oi(J):window,se=Z.nodeName&&Z.nodeName.toLowerCase(),se==="select"||se==="input"&&Z.type==="file")var bs=Om;else if(Am(Z))if(Rm)bs=pv;else{bs=xv;var Ee=hv}else se=Z.nodeName,!se||se.toLowerCase()!=="input"||Z.type!=="checkbox"&&Z.type!=="radio"?J&&fo(J.elementType)&&(bs=Om):bs=fv;if(bs&&(bs=bs(s,J))){Dm(he,bs,a,re);break e}Ee&&Ee(s,Z,J),s==="focusout"&&J&&Z.type==="number"&&J.memoizedProps.value!=null&&xo(Z,"number",Z.value)}switch(Ee=J?oi(J):window,s){case"focusin":(Am(Ee)||Ee.contentEditable==="true")&&(vn=Ee,Eo=J,ji=null);break;case"focusout":ji=Eo=vn=null;break;case"mousedown":zo=!0;break;case"contextmenu":case"mouseup":case"dragend":zo=!1,Vm(he,a,re);break;case"selectionchange":if(jv)break;case"keydown":case"keyup":Vm(he,a,re)}var Ze;if(So)e:{switch(s){case"compositionstart":var xs="onCompositionStart";break e;case"compositionend":xs="onCompositionEnd";break e;case"compositionupdate":xs="onCompositionUpdate";break e}xs=void 0}else jn?zm(s,a)&&(xs="onCompositionEnd"):s==="keydown"&&a.keyCode===229&&(xs="onCompositionStart");xs&&(km&&a.locale!=="ko"&&(jn||xs!=="onCompositionStart"?xs==="onCompositionEnd"&&jn&&(Ze=ym()):(dl=re,bo="value"in dl?dl.value:dl.textContent,jn=!0)),Ee=gc(J,xs),0<Ee.length&&(xs=new Sm(xs,s,null,a,re),he.push({event:xs,listeners:Ee}),Ze?xs.data=Ze:(Ze=Mm(a),Ze!==null&&(xs.data=Ze)))),(Ze=cv?ov(s,a):dv(s,a))&&(xs=gc(J,"onBeforeInput"),0<xs.length&&(Ee=new Sm("onBeforeInput","beforeinput",null,a,re),he.push({event:Ee,listeners:xs}),Ee.data=Ze)),sb(he,s,J,a,re)}pf(he,t)})}function Vi(s,t,a){return{instance:s,listener:t,currentTarget:a}}function gc(s,t){for(var a=t+"Capture",l=[];s!==null;){var c=s,o=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||o===null||(c=di(s,a),c!=null&&l.unshift(Vi(s,c,o)),c=di(s,t),c!=null&&l.push(Vi(s,c,o))),s.tag===3)return l;s=s.return}return[]}function nb(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function jf(s,t,a,l,c){for(var o=t._reactName,x=[];a!==null&&a!==l;){var v=a,D=v.alternate,J=v.stateNode;if(v=v.tag,D!==null&&D===l)break;v!==5&&v!==26&&v!==27||J===null||(D=J,c?(J=di(a,o),J!=null&&x.unshift(Vi(a,J,D))):c||(J=di(a,o),J!=null&&x.push(Vi(a,J,D)))),a=a.return}x.length!==0&&s.push({event:t,listeners:x})}var ib=/\r\n?/g,rb=/\u0000|\uFFFD/g;function vf(s){return(typeof s=="string"?s:""+s).replace(ib,`
`).replace(rb,"")}function bf(s,t){return t=vf(t),vf(s)===t}function Es(s,t,a,l,c,o){switch(a){case"children":typeof l=="string"?t==="body"||t==="textarea"&&l===""||fn(s,l):(typeof l=="number"||typeof l=="bigint")&&t!=="body"&&fn(s,""+l);break;case"className":Nr(s,"class",l);break;case"tabIndex":Nr(s,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Nr(s,a,l);break;case"style":vm(s,l,o);break;case"data":if(t!=="object"){Nr(s,"data",l);break}case"src":case"href":if(l===""&&(t!=="a"||a!=="href")){s.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){s.removeAttribute(a);break}l=wr(""+l),s.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){s.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof o=="function"&&(a==="formAction"?(t!=="input"&&Es(s,t,"name",c.name,c,null),Es(s,t,"formEncType",c.formEncType,c,null),Es(s,t,"formMethod",c.formMethod,c,null),Es(s,t,"formTarget",c.formTarget,c,null)):(Es(s,t,"encType",c.encType,c,null),Es(s,t,"method",c.method,c,null),Es(s,t,"target",c.target,c,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){s.removeAttribute(a);break}l=wr(""+l),s.setAttribute(a,l);break;case"onClick":l!=null&&(s.onclick=qa);break;case"onScroll":l!=null&&us("scroll",s);break;case"onScrollEnd":l!=null&&us("scrollend",s);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(d(61));if(a=l.__html,a!=null){if(c.children!=null)throw Error(d(60));s.innerHTML=a}}break;case"multiple":s.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":s.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){s.removeAttribute("xlink:href");break}a=wr(""+l),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?s.setAttribute(a,""+l):s.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?s.setAttribute(a,""):s.removeAttribute(a);break;case"capture":case"download":l===!0?s.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?s.setAttribute(a,l):s.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?s.setAttribute(a,l):s.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?s.removeAttribute(a):s.setAttribute(a,l);break;case"popover":us("beforetoggle",s),us("toggle",s),br(s,"popover",l);break;case"xlinkActuate":Ha(s,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Ha(s,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Ha(s,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Ha(s,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Ha(s,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Ha(s,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Ha(s,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Ha(s,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Ha(s,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":br(s,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Rj.get(a)||a,br(s,a,l))}}function su(s,t,a,l,c,o){switch(a){case"style":vm(s,l,o);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(d(61));if(a=l.__html,a!=null){if(c.children!=null)throw Error(d(60));s.innerHTML=a}}break;case"children":typeof l=="string"?fn(s,l):(typeof l=="number"||typeof l=="bigint")&&fn(s,""+l);break;case"onScroll":l!=null&&us("scroll",s);break;case"onScrollEnd":l!=null&&us("scrollend",s);break;case"onClick":l!=null&&(s.onclick=qa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!dm.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(c=a.endsWith("Capture"),t=a.slice(2,c?a.length-7:void 0),o=s[Rt]||null,o=o!=null?o[a]:null,typeof o=="function"&&s.removeEventListener(t,o,c),typeof l=="function")){typeof o!="function"&&o!==null&&(a in s?s[a]=null:s.hasAttribute(a)&&s.removeAttribute(a)),s.addEventListener(t,l,c);break e}a in s?s[a]=l:l===!0?s.setAttribute(a,""):br(s,a,l)}}}function Tt(s,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":us("error",s),us("load",s);var l=!1,c=!1,o;for(o in a)if(a.hasOwnProperty(o)){var x=a[o];if(x!=null)switch(o){case"src":l=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(d(137,t));default:Es(s,t,o,x,a,null)}}c&&Es(s,t,"srcSet",a.srcSet,a,null),l&&Es(s,t,"src",a.src,a,null);return;case"input":us("invalid",s);var v=o=x=c=null,D=null,J=null;for(l in a)if(a.hasOwnProperty(l)){var re=a[l];if(re!=null)switch(l){case"name":c=re;break;case"type":x=re;break;case"checked":D=re;break;case"defaultChecked":J=re;break;case"value":o=re;break;case"defaultValue":v=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(d(137,t));break;default:Es(s,t,l,re,a,null)}}fm(s,o,v,D,J,x,c,!1);return;case"select":us("invalid",s),l=x=o=null;for(c in a)if(a.hasOwnProperty(c)&&(v=a[c],v!=null))switch(c){case"value":o=v;break;case"defaultValue":x=v;break;case"multiple":l=v;default:Es(s,t,c,v,a,null)}t=o,a=x,s.multiple=!!l,t!=null?xn(s,!!l,t,!1):a!=null&&xn(s,!!l,a,!0);return;case"textarea":us("invalid",s),o=c=l=null;for(x in a)if(a.hasOwnProperty(x)&&(v=a[x],v!=null))switch(x){case"value":l=v;break;case"defaultValue":c=v;break;case"children":o=v;break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(d(91));break;default:Es(s,t,x,v,a,null)}gm(s,l,c,o);return;case"option":for(D in a)if(a.hasOwnProperty(D)&&(l=a[D],l!=null))switch(D){case"selected":s.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Es(s,t,D,l,a,null)}return;case"dialog":us("beforetoggle",s),us("toggle",s),us("cancel",s),us("close",s);break;case"iframe":case"object":us("load",s);break;case"video":case"audio":for(l=0;l<Fi.length;l++)us(Fi[l],s);break;case"image":us("error",s),us("load",s);break;case"details":us("toggle",s);break;case"embed":case"source":case"link":us("error",s),us("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in a)if(a.hasOwnProperty(J)&&(l=a[J],l!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(d(137,t));default:Es(s,t,J,l,a,null)}return;default:if(fo(t)){for(re in a)a.hasOwnProperty(re)&&(l=a[re],l!==void 0&&su(s,t,re,l,a,void 0));return}}for(v in a)a.hasOwnProperty(v)&&(l=a[v],l!=null&&Es(s,t,v,l,a,null))}function cb(s,t,a,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,o=null,x=null,v=null,D=null,J=null,re=null;for(se in a){var he=a[se];if(a.hasOwnProperty(se)&&he!=null)switch(se){case"checked":break;case"value":break;case"defaultValue":D=he;default:l.hasOwnProperty(se)||Es(s,t,se,null,l,he)}}for(var Z in l){var se=l[Z];if(he=a[Z],l.hasOwnProperty(Z)&&(se!=null||he!=null))switch(Z){case"type":o=se;break;case"name":c=se;break;case"checked":J=se;break;case"defaultChecked":re=se;break;case"value":x=se;break;case"defaultValue":v=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(d(137,t));break;default:se!==he&&Es(s,t,Z,se,l,he)}}ho(s,x,v,D,J,re,o,c);return;case"select":se=x=v=Z=null;for(o in a)if(D=a[o],a.hasOwnProperty(o)&&D!=null)switch(o){case"value":break;case"multiple":se=D;default:l.hasOwnProperty(o)||Es(s,t,o,null,l,D)}for(c in l)if(o=l[c],D=a[c],l.hasOwnProperty(c)&&(o!=null||D!=null))switch(c){case"value":Z=o;break;case"defaultValue":v=o;break;case"multiple":x=o;default:o!==D&&Es(s,t,c,o,l,D)}t=v,a=x,l=se,Z!=null?xn(s,!!a,Z,!1):!!l!=!!a&&(t!=null?xn(s,!!a,t,!0):xn(s,!!a,a?[]:"",!1));return;case"textarea":se=Z=null;for(v in a)if(c=a[v],a.hasOwnProperty(v)&&c!=null&&!l.hasOwnProperty(v))switch(v){case"value":break;case"children":break;default:Es(s,t,v,null,l,c)}for(x in l)if(c=l[x],o=a[x],l.hasOwnProperty(x)&&(c!=null||o!=null))switch(x){case"value":Z=c;break;case"defaultValue":se=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(d(91));break;default:c!==o&&Es(s,t,x,c,l,o)}pm(s,Z,se);return;case"option":for(var ke in a)if(Z=a[ke],a.hasOwnProperty(ke)&&Z!=null&&!l.hasOwnProperty(ke))switch(ke){case"selected":s.selected=!1;break;default:Es(s,t,ke,null,l,Z)}for(D in l)if(Z=l[D],se=a[D],l.hasOwnProperty(D)&&Z!==se&&(Z!=null||se!=null))switch(D){case"selected":s.selected=Z&&typeof Z!="function"&&typeof Z!="symbol";break;default:Es(s,t,D,Z,l,se)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ve in a)Z=a[Ve],a.hasOwnProperty(Ve)&&Z!=null&&!l.hasOwnProperty(Ve)&&Es(s,t,Ve,null,l,Z);for(J in l)if(Z=l[J],se=a[J],l.hasOwnProperty(J)&&Z!==se&&(Z!=null||se!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(d(137,t));break;default:Es(s,t,J,Z,l,se)}return;default:if(fo(t)){for(var zs in a)Z=a[zs],a.hasOwnProperty(zs)&&Z!==void 0&&!l.hasOwnProperty(zs)&&su(s,t,zs,void 0,l,Z);for(re in l)Z=l[re],se=a[re],!l.hasOwnProperty(re)||Z===se||Z===void 0&&se===void 0||su(s,t,re,Z,l,se);return}}for(var F in a)Z=a[F],a.hasOwnProperty(F)&&Z!=null&&!l.hasOwnProperty(F)&&Es(s,t,F,null,l,Z);for(he in l)Z=l[he],se=a[he],!l.hasOwnProperty(he)||Z===se||Z==null&&se==null||Es(s,t,he,Z,l,se)}function Nf(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function ob(){if(typeof performance.getEntriesByType=="function"){for(var s=0,t=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var c=a[l],o=c.transferSize,x=c.initiatorType,v=c.duration;if(o&&v&&Nf(x)){for(x=0,v=c.responseEnd,l+=1;l<a.length;l++){var D=a[l],J=D.startTime;if(J>v)break;var re=D.transferSize,he=D.initiatorType;re&&Nf(he)&&(D=D.responseEnd,x+=re*(D<v?1:(v-J)/(D-J)))}if(--l,t+=8*(o+x)/(c.duration/1e3),s++,10<s)break}}if(0<s)return t/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var tu=null,au=null;function jc(s){return s.nodeType===9?s:s.ownerDocument}function yf(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function wf(s,t){if(s===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&t==="foreignObject"?0:s}function lu(s,t){return s==="textarea"||s==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var nu=null;function db(){var s=window.event;return s&&s.type==="popstate"?s===nu?!1:(nu=s,!0):(nu=null,!1)}var _f=typeof setTimeout=="function"?setTimeout:void 0,ub=typeof clearTimeout=="function"?clearTimeout:void 0,Sf=typeof Promise=="function"?Promise:void 0,mb=typeof queueMicrotask=="function"?queueMicrotask:typeof Sf<"u"?function(s){return Sf.resolve(null).then(s).catch(hb)}:_f;function hb(s){setTimeout(function(){throw s})}function kl(s){return s==="head"}function Cf(s,t){var a=t,l=0;do{var c=a.nextSibling;if(s.removeChild(a),c&&c.nodeType===8)if(a=c.data,a==="/$"||a==="/&"){if(l===0){s.removeChild(c),In(t);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")$i(s.ownerDocument.documentElement);else if(a==="head"){a=s.ownerDocument.head,$i(a);for(var o=a.firstChild;o;){var x=o.nextSibling,v=o.nodeName;o[ci]||v==="SCRIPT"||v==="STYLE"||v==="LINK"&&o.rel.toLowerCase()==="stylesheet"||a.removeChild(o),o=x}}else a==="body"&&$i(s.ownerDocument.body);a=c}while(a);In(t)}function kf(s,t){var a=s;s=0;do{var l=a.nextSibling;if(a.nodeType===1?t?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(t?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(s===0)break;s--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||s++;a=l}while(a)}function iu(s){var t=s.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":iu(a),uo(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}s.removeChild(a)}}function xb(s,t,a,l){for(;s.nodeType===1;){var c=a;if(s.nodeName.toLowerCase()!==t.toLowerCase()){if(!l&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(l){if(!s[ci])switch(t){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(o=s.getAttribute("rel"),o==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(o!==c.rel||s.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||s.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||s.getAttribute("title")!==(c.title==null?null:c.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(o=s.getAttribute("src"),(o!==(c.src==null?null:c.src)||s.getAttribute("type")!==(c.type==null?null:c.type)||s.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&o&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(t==="input"&&s.type==="hidden"){var o=c.name==null?null:""+c.name;if(c.type==="hidden"&&s.getAttribute("name")===o)return s}else return s;if(s=ma(s.nextSibling),s===null)break}return null}function fb(s,t,a){if(t==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!a||(s=ma(s.nextSibling),s===null))return null;return s}function Tf(s,t){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!t||(s=ma(s.nextSibling),s===null))return null;return s}function ru(s){return s.data==="$?"||s.data==="$~"}function cu(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function pb(s,t){var a=s.ownerDocument;if(s.data==="$~")s._reactRetry=t;else if(s.data!=="$?"||a.readyState!=="loading")t();else{var l=function(){t(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),s._reactRetry=l}}function ma(s){for(;s!=null;s=s.nextSibling){var t=s.nodeType;if(t===1||t===3)break;if(t===8){if(t=s.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return s}var ou=null;function Ef(s){s=s.nextSibling;for(var t=0;s;){if(s.nodeType===8){var a=s.data;if(a==="/$"||a==="/&"){if(t===0)return ma(s.nextSibling);t--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||t++}s=s.nextSibling}return null}function zf(s){s=s.previousSibling;for(var t=0;s;){if(s.nodeType===8){var a=s.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(t===0)return s;t--}else a!=="/$"&&a!=="/&"||t++}s=s.previousSibling}return null}function Mf(s,t,a){switch(t=jc(a),s){case"html":if(s=t.documentElement,!s)throw Error(d(452));return s;case"head":if(s=t.head,!s)throw Error(d(453));return s;case"body":if(s=t.body,!s)throw Error(d(454));return s;default:throw Error(d(451))}}function $i(s){for(var t=s.attributes;t.length;)s.removeAttributeNode(t[0]);uo(s)}var ha=new Map,Af=new Set;function vc(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var tl=X.d;X.d={f:gb,r:jb,D:vb,C:bb,L:Nb,m:yb,X:_b,S:wb,M:Sb};function gb(){var s=tl.f(),t=dc();return s||t}function jb(s){var t=un(s);t!==null&&t.tag===5&&t.type==="form"?Xh(t):tl.r(s)}var Vn=typeof document>"u"?null:document;function Df(s,t,a){var l=Vn;if(l&&typeof t=="string"&&t){var c=na(t);c='link[rel="'+s+'"][href="'+c+'"]',typeof a=="string"&&(c+='[crossorigin="'+a+'"]'),Af.has(c)||(Af.add(c),s={rel:s,crossOrigin:a,href:t},l.querySelector(c)===null&&(t=l.createElement("link"),Tt(t,"link",s),Nt(t),l.head.appendChild(t)))}}function vb(s){tl.D(s),Df("dns-prefetch",s,null)}function bb(s,t){tl.C(s,t),Df("preconnect",s,t)}function Nb(s,t,a){tl.L(s,t,a);var l=Vn;if(l&&s&&t){var c='link[rel="preload"][as="'+na(t)+'"]';t==="image"&&a&&a.imageSrcSet?(c+='[imagesrcset="'+na(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(c+='[imagesizes="'+na(a.imageSizes)+'"]')):c+='[href="'+na(s)+'"]';var o=c;switch(t){case"style":o=$n(s);break;case"script":o=Qn(s)}ha.has(o)||(s=y({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:s,as:t},a),ha.set(o,s),l.querySelector(c)!==null||t==="style"&&l.querySelector(Qi(o))||t==="script"&&l.querySelector(Ii(o))||(t=l.createElement("link"),Tt(t,"link",s),Nt(t),l.head.appendChild(t)))}}function yb(s,t){tl.m(s,t);var a=Vn;if(a&&s){var l=t&&typeof t.as=="string"?t.as:"script",c='link[rel="modulepreload"][as="'+na(l)+'"][href="'+na(s)+'"]',o=c;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":o=Qn(s)}if(!ha.has(o)&&(s=y({rel:"modulepreload",href:s},t),ha.set(o,s),a.querySelector(c)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Ii(o)))return}l=a.createElement("link"),Tt(l,"link",s),Nt(l),a.head.appendChild(l)}}}function wb(s,t,a){tl.S(s,t,a);var l=Vn;if(l&&s){var c=mn(l).hoistableStyles,o=$n(s);t=t||"default";var x=c.get(o);if(!x){var v={loading:0,preload:null};if(x=l.querySelector(Qi(o)))v.loading=5;else{s=y({rel:"stylesheet",href:s,"data-precedence":t},a),(a=ha.get(o))&&du(s,a);var D=x=l.createElement("link");Nt(D),Tt(D,"link",s),D._p=new Promise(function(J,re){D.onload=J,D.onerror=re}),D.addEventListener("load",function(){v.loading|=1}),D.addEventListener("error",function(){v.loading|=2}),v.loading|=4,bc(x,t,l)}x={type:"stylesheet",instance:x,count:1,state:v},c.set(o,x)}}}function _b(s,t){tl.X(s,t);var a=Vn;if(a&&s){var l=mn(a).hoistableScripts,c=Qn(s),o=l.get(c);o||(o=a.querySelector(Ii(c)),o||(s=y({src:s,async:!0},t),(t=ha.get(c))&&uu(s,t),o=a.createElement("script"),Nt(o),Tt(o,"link",s),a.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},l.set(c,o))}}function Sb(s,t){tl.M(s,t);var a=Vn;if(a&&s){var l=mn(a).hoistableScripts,c=Qn(s),o=l.get(c);o||(o=a.querySelector(Ii(c)),o||(s=y({src:s,async:!0,type:"module"},t),(t=ha.get(c))&&uu(s,t),o=a.createElement("script"),Nt(o),Tt(o,"link",s),a.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},l.set(c,o))}}function Of(s,t,a,l){var c=(c=me.current)?vc(c):null;if(!c)throw Error(d(446));switch(s){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=$n(a.href),a=mn(c).hoistableStyles,l=a.get(t),l||(l={type:"style",instance:null,count:0,state:null},a.set(t,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){s=$n(a.href);var o=mn(c).hoistableStyles,x=o.get(s);if(x||(c=c.ownerDocument||c,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},o.set(s,x),(o=c.querySelector(Qi(s)))&&!o._p&&(x.instance=o,x.state.loading=5),ha.has(s)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},ha.set(s,a),o||Cb(c,s,a,x.state))),t&&l===null)throw Error(d(528,""));return x}if(t&&l!==null)throw Error(d(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Qn(a),a=mn(c).hoistableScripts,l=a.get(t),l||(l={type:"script",instance:null,count:0,state:null},a.set(t,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(d(444,s))}}function $n(s){return'href="'+na(s)+'"'}function Qi(s){return'link[rel="stylesheet"]['+s+"]"}function Rf(s){return y({},s,{"data-precedence":s.precedence,precedence:null})}function Cb(s,t,a,l){s.querySelector('link[rel="preload"][as="style"]['+t+"]")?l.loading=1:(t=s.createElement("link"),l.preload=t,t.addEventListener("load",function(){return l.loading|=1}),t.addEventListener("error",function(){return l.loading|=2}),Tt(t,"link",a),Nt(t),s.head.appendChild(t))}function Qn(s){return'[src="'+na(s)+'"]'}function Ii(s){return"script[async]"+s}function Lf(s,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var l=s.querySelector('style[data-href~="'+na(a.href)+'"]');if(l)return t.instance=l,Nt(l),l;var c=y({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(s.ownerDocument||s).createElement("style"),Nt(l),Tt(l,"style",c),bc(l,a.precedence,s),t.instance=l;case"stylesheet":c=$n(a.href);var o=s.querySelector(Qi(c));if(o)return t.state.loading|=4,t.instance=o,Nt(o),o;l=Rf(a),(c=ha.get(c))&&du(l,c),o=(s.ownerDocument||s).createElement("link"),Nt(o);var x=o;return x._p=new Promise(function(v,D){x.onload=v,x.onerror=D}),Tt(o,"link",l),t.state.loading|=4,bc(o,a.precedence,s),t.instance=o;case"script":return o=Qn(a.src),(c=s.querySelector(Ii(o)))?(t.instance=c,Nt(c),c):(l=a,(c=ha.get(o))&&(l=y({},a),uu(l,c)),s=s.ownerDocument||s,c=s.createElement("script"),Nt(c),Tt(c,"link",l),s.head.appendChild(c),t.instance=c);case"void":return null;default:throw Error(d(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(l=t.instance,t.state.loading|=4,bc(l,a.precedence,s));return t.instance}function bc(s,t,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=l.length?l[l.length-1]:null,o=c,x=0;x<l.length;x++){var v=l[x];if(v.dataset.precedence===t)o=v;else if(o!==c)break}o?o.parentNode.insertBefore(s,o.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(s,t.firstChild))}function du(s,t){s.crossOrigin==null&&(s.crossOrigin=t.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=t.referrerPolicy),s.title==null&&(s.title=t.title)}function uu(s,t){s.crossOrigin==null&&(s.crossOrigin=t.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=t.referrerPolicy),s.integrity==null&&(s.integrity=t.integrity)}var Nc=null;function Uf(s,t,a){if(Nc===null){var l=new Map,c=Nc=new Map;c.set(a,l)}else c=Nc,l=c.get(a),l||(l=new Map,c.set(a,l));if(l.has(s))return l;for(l.set(s,null),a=a.getElementsByTagName(s),c=0;c<a.length;c++){var o=a[c];if(!(o[ci]||o[_t]||s==="link"&&o.getAttribute("rel")==="stylesheet")&&o.namespaceURI!=="http://www.w3.org/2000/svg"){var x=o.getAttribute(t)||"";x=s+x;var v=l.get(x);v?v.push(o):l.set(x,[o])}}return l}function Bf(s,t,a){s=s.ownerDocument||s,s.head.insertBefore(a,t==="title"?s.querySelector("head > title"):null)}function kb(s,t,a){if(a===1||t.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return s=t.disabled,typeof t.precedence=="string"&&s==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Hf(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function Tb(s,t,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var c=$n(l.href),o=t.querySelector(Qi(c));if(o){t=o._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(s.count++,s=yc.bind(s),t.then(s,s)),a.state.loading|=4,a.instance=o,Nt(o);return}o=t.ownerDocument||t,l=Rf(l),(c=ha.get(c))&&du(l,c),o=o.createElement("link"),Nt(o);var x=o;x._p=new Promise(function(v,D){x.onload=v,x.onerror=D}),Tt(o,"link",l),a.instance=o}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(a,t),(t=a.state.preload)&&(a.state.loading&3)===0&&(s.count++,a=yc.bind(s),t.addEventListener("load",a),t.addEventListener("error",a))}}var mu=0;function Eb(s,t){return s.stylesheets&&s.count===0&&_c(s,s.stylesheets),0<s.count||0<s.imgCount?function(a){var l=setTimeout(function(){if(s.stylesheets&&_c(s,s.stylesheets),s.unsuspend){var o=s.unsuspend;s.unsuspend=null,o()}},6e4+t);0<s.imgBytes&&mu===0&&(mu=62500*ob());var c=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&_c(s,s.stylesheets),s.unsuspend)){var o=s.unsuspend;s.unsuspend=null,o()}},(s.imgBytes>mu?50:800)+t);return s.unsuspend=a,function(){s.unsuspend=null,clearTimeout(l),clearTimeout(c)}}:null}function yc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)_c(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var wc=null;function _c(s,t){s.stylesheets=null,s.unsuspend!==null&&(s.count++,wc=new Map,t.forEach(zb,s),wc=null,yc.call(s))}function zb(s,t){if(!(t.state.loading&4)){var a=wc.get(s);if(a)var l=a.get(null);else{a=new Map,wc.set(s,a);for(var c=s.querySelectorAll("link[data-precedence],style[data-precedence]"),o=0;o<c.length;o++){var x=c[o];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(a.set(x.dataset.precedence,x),l=x)}l&&a.set(null,l)}c=t.instance,x=c.getAttribute("data-precedence"),o=a.get(x)||l,o===l&&a.set(null,c),a.set(x,c),this.count++,l=yc.bind(this),c.addEventListener("load",l),c.addEventListener("error",l),o?o.parentNode.insertBefore(c,o.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(c,s.firstChild)),t.state.loading|=4}}var Yi={$$typeof:L,Provider:null,Consumer:null,_currentValue:C,_currentValue2:C,_threadCount:0};function Mb(s,t,a,l,c,o,x,v,D){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Te(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Te(0),this.hiddenUpdates=Te(null),this.identifierPrefix=l,this.onUncaughtError=c,this.onCaughtError=o,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function qf(s,t,a,l,c,o,x,v,D,J,re,he){return s=new Mb(s,t,a,x,D,J,re,he,v),t=1,o===!0&&(t|=24),o=Kt(3,null,null,t),s.current=o,o.stateNode=s,t=Qo(),t.refCount++,s.pooledCache=t,t.refCount++,o.memoizedState={element:l,isDehydrated:a,cache:t},Ko(o),s}function Gf(s){return s?(s=yn,s):yn}function Ff(s,t,a,l,c,o){c=Gf(c),l.context===null?l.context=c:l.pendingContext=c,l=pl(t),l.payload={element:a},o=o===void 0?null:o,o!==null&&(l.callback=o),a=gl(s,l,t),a!==null&&(Gt(a,s,t),Si(a,s,t))}function Vf(s,t){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var a=s.retryLane;s.retryLane=a!==0&&a<t?a:t}}function hu(s,t){Vf(s,t),(s=s.alternate)&&Vf(s,t)}function $f(s){if(s.tag===13||s.tag===31){var t=Gl(s,67108864);t!==null&&Gt(t,s,67108864),hu(s,67108864)}}function Qf(s){if(s.tag===13||s.tag===31){var t=ea();t=ro(t);var a=Gl(s,t);a!==null&&Gt(a,s,t),hu(s,t)}}var Sc=!0;function Ab(s,t,a,l){var c=R.T;R.T=null;var o=X.p;try{X.p=2,xu(s,t,a,l)}finally{X.p=o,R.T=c}}function Db(s,t,a,l){var c=R.T;R.T=null;var o=X.p;try{X.p=8,xu(s,t,a,l)}finally{X.p=o,R.T=c}}function xu(s,t,a,l){if(Sc){var c=fu(l);if(c===null)eu(s,t,l,Cc,a),Yf(s,l);else if(Rb(c,s,t,a,l))l.stopPropagation();else if(Yf(s,l),t&4&&-1<Ob.indexOf(s)){for(;c!==null;){var o=un(c);if(o!==null)switch(o.tag){case 3:if(o=o.stateNode,o.current.memoizedState.isDehydrated){var x=Yt(o.pendingLanes);if(x!==0){var v=o;for(v.pendingLanes|=2,v.entangledLanes|=2;x;){var D=1<<31-vs(x);v.entanglements[1]|=D,x&=~D}Ma(o),(ws&6)===0&&(cc=Ds()+500,Gi(0))}}break;case 31:case 13:v=Gl(o,2),v!==null&&Gt(v,o,2),dc(),hu(o,2)}if(o=fu(l),o===null&&eu(s,t,l,Cc,a),o===c)break;c=o}c!==null&&l.stopPropagation()}else eu(s,t,l,null,a)}}function fu(s){return s=go(s),pu(s)}var Cc=null;function pu(s){if(Cc=null,s=dn(s),s!==null){var t=h(s);if(t===null)s=null;else{var a=t.tag;if(a===13){if(s=f(t),s!==null)return s;s=null}else if(a===31){if(s=p(t),s!==null)return s;s=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;s=null}else t!==s&&(s=null)}}return Cc=s,null}function If(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(G()){case Be:return 2;case ze:return 8;case Ie:case ks:return 32;case Ye:return 268435456;default:return 32}default:return 32}}var gu=!1,Tl=null,El=null,zl=null,Xi=new Map,Ki=new Map,Ml=[],Ob="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Yf(s,t){switch(s){case"focusin":case"focusout":Tl=null;break;case"dragenter":case"dragleave":El=null;break;case"mouseover":case"mouseout":zl=null;break;case"pointerover":case"pointerout":Xi.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ki.delete(t.pointerId)}}function Ji(s,t,a,l,c,o){return s===null||s.nativeEvent!==o?(s={blockedOn:t,domEventName:a,eventSystemFlags:l,nativeEvent:o,targetContainers:[c]},t!==null&&(t=un(t),t!==null&&$f(t)),s):(s.eventSystemFlags|=l,t=s.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),s)}function Rb(s,t,a,l,c){switch(t){case"focusin":return Tl=Ji(Tl,s,t,a,l,c),!0;case"dragenter":return El=Ji(El,s,t,a,l,c),!0;case"mouseover":return zl=Ji(zl,s,t,a,l,c),!0;case"pointerover":var o=c.pointerId;return Xi.set(o,Ji(Xi.get(o)||null,s,t,a,l,c)),!0;case"gotpointercapture":return o=c.pointerId,Ki.set(o,Ji(Ki.get(o)||null,s,t,a,l,c)),!0}return!1}function Xf(s){var t=dn(s.target);if(t!==null){var a=h(t);if(a!==null){if(t=a.tag,t===13){if(t=f(a),t!==null){s.blockedOn=t,rm(s.priority,function(){Qf(a)});return}}else if(t===31){if(t=p(a),t!==null){s.blockedOn=t,rm(s.priority,function(){Qf(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){s.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}s.blockedOn=null}function kc(s){if(s.blockedOn!==null)return!1;for(var t=s.targetContainers;0<t.length;){var a=fu(s.nativeEvent);if(a===null){a=s.nativeEvent;var l=new a.constructor(a.type,a);po=l,a.target.dispatchEvent(l),po=null}else return t=un(a),t!==null&&$f(t),s.blockedOn=a,!1;t.shift()}return!0}function Kf(s,t,a){kc(s)&&a.delete(t)}function Lb(){gu=!1,Tl!==null&&kc(Tl)&&(Tl=null),El!==null&&kc(El)&&(El=null),zl!==null&&kc(zl)&&(zl=null),Xi.forEach(Kf),Ki.forEach(Kf)}function Tc(s,t){s.blockedOn===t&&(s.blockedOn=null,gu||(gu=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Lb)))}var Ec=null;function Jf(s){Ec!==s&&(Ec=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Ec===s&&(Ec=null);for(var t=0;t<s.length;t+=3){var a=s[t],l=s[t+1],c=s[t+2];if(typeof l!="function"){if(pu(l||a)===null)continue;break}var o=un(a);o!==null&&(s.splice(t,3),t-=3,fd(o,{pending:!0,data:c,method:a.method,action:l},l,c))}}))}function In(s){function t(D){return Tc(D,s)}Tl!==null&&Tc(Tl,s),El!==null&&Tc(El,s),zl!==null&&Tc(zl,s),Xi.forEach(t),Ki.forEach(t);for(var a=0;a<Ml.length;a++){var l=Ml[a];l.blockedOn===s&&(l.blockedOn=null)}for(;0<Ml.length&&(a=Ml[0],a.blockedOn===null);)Xf(a),a.blockedOn===null&&Ml.shift();if(a=(s.ownerDocument||s).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var c=a[l],o=a[l+1],x=c[Rt]||null;if(typeof o=="function")x||Jf(a);else if(x){var v=null;if(o&&o.hasAttribute("formAction")){if(c=o,x=o[Rt]||null)v=x.formAction;else if(pu(c)!==null)continue}else v=x.action;typeof v=="function"?a[l+1]=v:(a.splice(l,3),l-=3),Jf(a)}}}function Pf(){function s(o){o.canIntercept&&o.info==="react-transition"&&o.intercept({handler:function(){return new Promise(function(x){return c=x})},focusReset:"manual",scroll:"manual"})}function t(){c!==null&&(c(),c=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var o=navigation.currentEntry;o&&o.url!=null&&navigation.navigate(o.url,{state:o.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,c=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),c!==null&&(c(),c=null)}}}function ju(s){this._internalRoot=s}zc.prototype.render=ju.prototype.render=function(s){var t=this._internalRoot;if(t===null)throw Error(d(409));var a=t.current,l=ea();Ff(a,l,s,t,null,null)},zc.prototype.unmount=ju.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var t=s.containerInfo;Ff(s.current,2,null,s,null,null),dc(),t[on]=null}};function zc(s){this._internalRoot=s}zc.prototype.unstable_scheduleHydration=function(s){if(s){var t=im();s={blockedOn:null,target:s,priority:t};for(var a=0;a<Ml.length&&t!==0&&t<Ml[a].priority;a++);Ml.splice(a,0,s),a===0&&Xf(s)}};var Zf=i.version;if(Zf!=="19.2.0")throw Error(d(527,Zf,"19.2.0"));X.findDOMNode=function(s){var t=s._reactInternals;if(t===void 0)throw typeof s.render=="function"?Error(d(188)):(s=Object.keys(s).join(","),Error(d(268,s)));return s=b(t),s=s!==null?j(s):null,s=s===null?null:s.stateNode,s};var Ub={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mc.isDisabled&&Mc.supportsFiber)try{Is=Mc.inject(Ub),ve=Mc}catch{}}return er.createRoot=function(s,t){if(!m(s))throw Error(d(299));var a=!1,l="",c=lx,o=nx,x=ix;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onUncaughtError!==void 0&&(c=t.onUncaughtError),t.onCaughtError!==void 0&&(o=t.onCaughtError),t.onRecoverableError!==void 0&&(x=t.onRecoverableError)),t=qf(s,1,!1,null,null,a,l,null,c,o,x,Pf),s[on]=t.current,Wd(s),new ju(t)},er.hydrateRoot=function(s,t,a){if(!m(s))throw Error(d(299));var l=!1,c="",o=lx,x=nx,v=ix,D=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(c=a.identifierPrefix),a.onUncaughtError!==void 0&&(o=a.onUncaughtError),a.onCaughtError!==void 0&&(x=a.onCaughtError),a.onRecoverableError!==void 0&&(v=a.onRecoverableError),a.formState!==void 0&&(D=a.formState)),t=qf(s,1,!0,t,a??null,l,c,D,o,x,v,Pf),t.context=Gf(null),a=t.current,l=ea(),l=ro(l),c=pl(l),c.callback=null,gl(a,c,l),a=l,t.current.lanes=a,ys(t,a),Ma(t),s[on]=t.current,Wd(s),new zc(t)},er.version="19.2.0",er}var cp;function h0(){if(cp)return _u.exports;cp=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(i){console.error(i)}}return n(),_u.exports=m0(),_u.exports}var x0=h0();function q(...n){return Kb(Jb(n))}const $e=u.forwardRef(({className:n,...i},r)=>e.jsx("div",{ref:r,className:q("rounded-xl border bg-card text-card-foreground shadow",n),...i}));$e.displayName="Card";const ss=u.forwardRef(({className:n,...i},r)=>e.jsx("div",{ref:r,className:q("flex flex-col space-y-1.5 p-6",n),...i}));ss.displayName="CardHeader";const ts=u.forwardRef(({className:n,...i},r)=>e.jsx("div",{ref:r,className:q("font-semibold leading-none tracking-tight",n),...i}));ts.displayName="CardTitle";const Ws=u.forwardRef(({className:n,...i},r)=>e.jsx("div",{ref:r,className:q("text-sm text-muted-foreground",n),...i}));Ws.displayName="CardDescription";const fs=u.forwardRef(({className:n,...i},r)=>e.jsx("div",{ref:r,className:q("p-6 pt-0",n),...i}));fs.displayName="CardContent";const Tg=u.forwardRef(({className:n,...i},r)=>e.jsx("div",{ref:r,className:q("flex items-center p-6 pt-0",n),...i}));Tg.displayName="CardFooter";const Sa=Wb,pa=u.forwardRef(({className:n,...i},r)=>e.jsx(Ep,{ref:r,className:q("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",n),...i}));pa.displayName=Ep.displayName;const es=u.forwardRef(({className:n,...i},r)=>e.jsx(zp,{ref:r,className:q("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all duration-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",n),...i}));es.displayName=zp.displayName;const _s=u.forwardRef(({className:n,...i},r)=>e.jsx(Mp,{ref:r,className:q("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 data-[state=active]:animate-in data-[state=active]:fade-in data-[state=active]:duration-300",n),...i}));_s.displayName=Mp.displayName;const Ke=u.forwardRef(({className:n,children:i,viewportRef:r,...d},m)=>e.jsxs(Ap,{ref:m,className:q("relative overflow-hidden",n),...d,children:[e.jsx(eN,{ref:r,className:"h-full w-full rounded-[inherit]",children:i}),e.jsx(Hu,{}),e.jsx(Hu,{orientation:"horizontal"}),e.jsx(sN,{})]}));Ke.displayName=Ap.displayName;const Hu=u.forwardRef(({className:n,orientation:i="vertical",...r},d)=>e.jsx(Dp,{ref:d,orientation:i,className:q("flex touch-none select-none transition-colors",i==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",i==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",n),...r,children:e.jsx(tN,{className:"relative flex-1 rounded-full bg-border"})}));Hu.displayName=Dp.displayName;function Eg({className:n,...i}){return e.jsx("div",{className:q("animate-pulse rounded-md bg-primary/10",n),...i})}const ni=u.forwardRef(({className:n,value:i,...r},d)=>e.jsx(Op,{ref:d,className:q("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",n),...r,children:e.jsx(aN,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(i||0)}%)`}})}));ni.displayName=Op.displayName;const f0={light:"",dark:".dark"},zg=u.createContext(null);function Mg(){const n=u.useContext(zg);if(!n)throw new Error("useChart must be used within a <ChartContainer />");return n}const Xn=u.forwardRef(({id:n,className:i,children:r,config:d,...m},h)=>{const f=u.useId(),p=`chart-${n||f.replace(/:/g,"")}`;return e.jsx(zg.Provider,{value:{config:d},children:e.jsxs("div",{"data-chart":p,ref:h,className:q("flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none",i),...m,children:[e.jsx(p0,{id:p,config:d}),e.jsx(vN,{children:r})]})})});Xn.displayName="Chart";const p0=({id:n,config:i})=>{const r=Object.entries(i).filter(([,d])=>d.theme||d.color);return r.length?e.jsx("style",{dangerouslySetInnerHTML:{__html:Object.entries(f0).map(([d,m])=>`
${m} [data-chart=${n}] {
${r.map(([h,f])=>{const p=f.theme?.[d]||f.color;return p?`  --color-${h}: ${p};`:null}).join(`
`)}
}
`).join(`
`)}}):null},sr=bN,Kn=u.forwardRef(({active:n,payload:i,className:r,indicator:d="dot",hideLabel:m=!1,hideIndicator:h=!1,label:f,labelFormatter:p,labelClassName:g,formatter:b,color:j,nameKey:y,labelKey:N},T)=>{const{config:w}=Mg(),U=u.useMemo(()=>{if(m||!i?.length)return null;const[B]=i,I=`${N||B?.dataKey||B?.name||"value"}`,L=qu(w,B,I),M=!N&&typeof f=="string"?w[f]?.label||f:L?.label;return p?e.jsx("div",{className:q("font-medium",g),children:p(M,i)}):M?e.jsx("div",{className:q("font-medium",g),children:M}):null},[f,p,i,m,g,w,N]);if(!n||!i?.length)return null;const O=i.length===1&&d!=="dot";return e.jsxs("div",{ref:T,className:q("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",r),children:[O?null:U,e.jsx("div",{className:"grid gap-1.5",children:i.filter(B=>B.type!=="none").map((B,I)=>{const L=`${y||B.name||B.dataKey||"value"}`,M=qu(w,B,L),Y=j||B.payload.fill||B.color;return e.jsx("div",{className:q("flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground",d==="dot"&&"items-center"),children:b&&B?.value!==void 0&&B.name?b(B.value,B.name,B,I,B.payload):e.jsxs(e.Fragment,{children:[M?.icon?e.jsx(M.icon,{}):!h&&e.jsx("div",{className:q("shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]",{"h-2.5 w-2.5":d==="dot","w-1":d==="line","w-0 border-[1.5px] border-dashed bg-transparent":d==="dashed","my-0.5":O&&d==="dashed"}),style:{"--color-bg":Y,"--color-border":Y}}),e.jsxs("div",{className:q("flex flex-1 justify-between leading-none",O?"items-end":"items-center"),children:[e.jsxs("div",{className:"grid gap-1.5",children:[O?U:null,e.jsx("span",{className:"text-muted-foreground",children:M?.label||B.name})]}),B.value&&e.jsx("span",{className:"font-mono font-medium tabular-nums text-foreground",children:B.value.toLocaleString()})]})]})},B.dataKey)})})]})});Kn.displayName="ChartTooltip";const g0=NN,Ag=u.forwardRef(({className:n,hideIcon:i=!1,payload:r,verticalAlign:d="bottom",nameKey:m},h)=>{const{config:f}=Mg();return r?.length?e.jsx("div",{ref:h,className:q("flex items-center justify-center gap-4",d==="top"?"pb-3":"pt-3",n),children:r.filter(p=>p.type!=="none").map(p=>{const g=`${m||p.dataKey||"value"}`,b=qu(f,p,g);return e.jsxs("div",{className:q("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground"),children:[b?.icon&&!i?e.jsx(b.icon,{}):e.jsx("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:p.color}}),b?.label]},p.value)})}):null});Ag.displayName="ChartLegend";function qu(n,i,r){if(typeof i!="object"||i===null)return;const d="payload"in i&&typeof i.payload=="object"&&i.payload!==null?i.payload:void 0;let m=r;return r in i&&typeof i[r]=="string"?m=i[r]:d&&r in d&&typeof d[r]=="string"&&(m=d[r]),m in n?n[m]:n[r]}const mr=si("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),_=u.forwardRef(({className:n,variant:i,size:r,asChild:d=!1,...m},h)=>{const f=d?kN:"button";return e.jsx(f,{className:q(mr({variant:i,size:r,className:n})),ref:h,...m})});_.displayName="Button";const j0=si("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function qe({className:n,variant:i,...r}){return e.jsx("div",{className:q(j0({variant:i}),n),...r})}const v0=5,b0=5e3;let ku=0;function N0(){return ku=(ku+1)%Number.MAX_SAFE_INTEGER,ku.toString()}const Tu=new Map,op=n=>{if(Tu.has(n))return;const i=setTimeout(()=>{Tu.delete(n),cr({type:"REMOVE_TOAST",toastId:n})},b0);Tu.set(n,i)},y0=(n,i)=>{switch(i.type){case"ADD_TOAST":return{...n,toasts:[i.toast,...n.toasts].slice(0,v0)};case"UPDATE_TOAST":return{...n,toasts:n.toasts.map(r=>r.id===i.toast.id?{...r,...i.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=i;return r?op(r):n.toasts.forEach(d=>{op(d.id)}),{...n,toasts:n.toasts.map(d=>d.id===r||r===void 0?{...d,open:!1}:d)}}case"REMOVE_TOAST":return i.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(r=>r.id!==i.toastId)}}},Gc=[];let Fc={toasts:[]};function cr(n){Fc=y0(Fc,n),Gc.forEach(i=>{i(Fc)})}function w0({...n}){const i=N0(),r=m=>cr({type:"UPDATE_TOAST",toast:{...m,id:i}}),d=()=>cr({type:"DISMISS_TOAST",toastId:i});return cr({type:"ADD_TOAST",toast:{...n,id:i,open:!0,onOpenChange:m=>{m||d()}}}),{id:i,dismiss:d,update:r}}function Bs(){const[n,i]=u.useState(Fc);return u.useEffect(()=>(Gc.push(i),()=>{const r=Gc.indexOf(i);r>-1&&Gc.splice(r,1)}),[n]),{...n,toast:w0,dismiss:r=>cr({type:"DISMISS_TOAST",toastId:r})}}const _0=n=>{const i=[];for(let r=0;r<n;r++){const d=r*137.508%360;i.push(`hsl(${d}, 70%, 55%)`)}return i};function S0(){const[n,i]=u.useState(null),[r,d]=u.useState(!0),[m,h]=u.useState(0),[f,p]=u.useState(24),[g,b]=u.useState(!0),[j,y]=u.useState(null),[N,T]=u.useState(!0),[w,U]=u.useState(null),[O,B]=u.useState(!1),{toast:I}=Bs(),L=u.useCallback(async()=>{try{T(!0);const C=await Ac.get("https://v1.hitokoto.cn/?c=a&c=b&c=c&c=d&c=h&c=i&c=k");y({hitokoto:C.data.hitokoto,from:C.data.from||C.data.from_who||""})}catch(C){console.error(":",C),y({hitokoto:"",from:""})}finally{T(!1)}},[]),M=u.useCallback(async()=>{try{const C=localStorage.getItem("access-token"),$=await Ac.get("/api/webui/system/status",{headers:{Authorization:`Bearer ${C}`}});U($.data)}catch(C){console.error(":",C),U(null)}},[]),Y=async()=>{if(!O)try{B(!0);const C=localStorage.getItem("access-token");await Ac.post("/api/webui/system/restart",{},{headers:{Authorization:`Bearer ${C}`}}),I({title:"",description:"..."}),setTimeout(()=>{M(),B(!1)},3e3)}catch(C){console.error(":",C),I({title:"",description:"",variant:"destructive"}),B(!1)}},Q=u.useCallback(async()=>{try{const C=localStorage.getItem("access-token"),$=await Ac.get(`/api/webui/statistics/dashboard?hours=${f}`,{headers:{Authorization:`Bearer ${C}`}});i($.data),d(!1),h(100)}catch(C){console.error("Failed to fetch dashboard data:",C),d(!1),h(100)}},[f]);if(u.useEffect(()=>{if(!r)return;h(0);const C=setTimeout(()=>h(15),200),$=setTimeout(()=>h(30),800),k=setTimeout(()=>h(45),2e3),ce=setTimeout(()=>h(60),4e3),ue=setTimeout(()=>h(75),6500),ie=setTimeout(()=>h(85),9e3),fe=setTimeout(()=>h(92),11e3);return()=>{clearTimeout(C),clearTimeout($),clearTimeout(k),clearTimeout(ce),clearTimeout(ue),clearTimeout(ie),clearTimeout(fe)}},[r]),u.useEffect(()=>{Q(),L(),M()},[Q,L,M]),u.useEffect(()=>{if(!g)return;const C=setInterval(()=>{Q(),M()},3e4);return()=>clearInterval(C)},[g,Q,M]),r||!n)return e.jsx("div",{className:"flex items-center justify-center h-[calc(100vh-200px)]",children:e.jsxs("div",{className:"text-center space-y-6 w-full max-w-md px-4",children:[e.jsx(Et,{className:"h-12 w-12 animate-spin mx-auto text-primary"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-lg font-medium",children:"..."}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ni,{value:m,className:"h-2"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[m,"%"]})]})]})});const{summary:z,model_stats:A=[],hourly_data:W=[],daily_data:xe=[],recent_activity:be=[]}=n,_e=z??{total_requests:0,total_cost:0,total_tokens:0,online_time:0,total_messages:0,total_replies:0,avg_response_time:0,cost_per_hour:0,tokens_per_hour:0},pe=C=>{const $=Math.floor(C/3600),k=Math.floor(C%3600/60);return`${$}${k}`},ye=C=>new Date(C).toLocaleString("zh-CN",{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),we=_0(A.length),R=A.map((C,$)=>({name:C.model_name,value:C.request_count,fill:we[$]})),X={requests:{label:"",color:"hsl(var(--chart-1))"},cost:{label:"()",color:"hsl(var(--chart-2))"},tokens:{label:"Tokens",color:"hsl(var(--chart-3))"}};return e.jsx(Ke,{className:"h-full",children:e.jsxs("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:""})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(Sa,{value:f.toString(),onValueChange:C=>p(Number(C)),children:e.jsxs(pa,{className:"grid grid-cols-3 w-full sm:w-auto",children:[e.jsx(es,{value:"24",children:"24"}),e.jsx(es,{value:"168",children:"7"}),e.jsx(es,{value:"720",children:"30"})]})}),e.jsxs(_,{variant:g?"default":"outline",size:"sm",onClick:()=>b(!g),className:"gap-2",children:[e.jsx(Et,{className:`h-4 w-4 ${g?"animate-spin":""}`}),e.jsx("span",{className:"hidden sm:inline",children:""})]}),e.jsx(_,{variant:"outline",size:"sm",onClick:Q,children:e.jsx(Et,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"flex items-center gap-3 px-4 py-2 rounded-lg border border-dashed border-muted-foreground/30 bg-muted/20",children:[N?e.jsx(Eg,{className:"h-5 flex-1"}):j?e.jsxs("p",{className:"flex-1 text-sm text-muted-foreground italic truncate",children:['"',j.hitokoto,'"  ',j.from]}):null,e.jsx(_,{variant:"ghost",size:"icon",className:"h-7 w-7 shrink-0",onClick:L,disabled:N,children:e.jsx(Et,{className:`h-3.5 w-3.5 ${N?"animate-spin":""}`})})]}),e.jsxs("div",{className:"grid gap-4 grid-cols-1 lg:grid-cols-3",children:[e.jsxs($e,{className:"lg:col-span-1",children:[e.jsx(ss,{className:"pb-3",children:e.jsxs(ts,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(pr,{className:"h-4 w-4"}),""]})}),e.jsx(fs,{children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex items-center gap-2",children:w?.running?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-3 w-3 rounded-full bg-green-500 animate-pulse"}),e.jsxs(qe,{variant:"outline",className:"text-green-600 border-green-300 bg-green-50",children:[e.jsx(ta,{className:"h-3 w-3 mr-1"}),""]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-3 w-3 rounded-full bg-red-500"}),e.jsxs(qe,{variant:"outline",className:"text-red-600 border-red-300 bg-red-50",children:[e.jsx(zt,{className:"h-3 w-3 mr-1"}),""]})]})}),w&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.jsxs("span",{children:["v",w.version]}),e.jsx("span",{className:"mx-2",children:"|"}),e.jsxs("span",{children:[" ",pe(w.uptime)]})]})]})})]}),e.jsxs($e,{children:[e.jsx(ss,{className:"pb-3",children:e.jsxs(ts,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(sn,{className:"h-4 w-4"}),""]})}),e.jsx(fs,{children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(_,{variant:"outline",size:"sm",onClick:Y,disabled:O,className:"gap-2",children:[e.jsx(Vc,{className:`h-4 w-4 ${O?"animate-spin":""}`}),O?"...":""]}),e.jsx(_,{variant:"outline",size:"sm",asChild:!0,className:"gap-2",children:e.jsxs(Yn,{to:"/logs",children:[e.jsx(wa,{className:"h-4 w-4"}),""]})}),e.jsx(_,{variant:"outline",size:"sm",asChild:!0,className:"gap-2",children:e.jsxs(Yn,{to:"/plugins",children:[e.jsx(JN,{className:"h-4 w-4"}),""]})}),e.jsx(_,{variant:"outline",size:"sm",asChild:!0,className:"gap-2",children:e.jsxs(Yn,{to:"/settings",children:[e.jsx(ti,{className:"h-4 w-4"}),""]})})]})})]}),e.jsxs($e,{children:[e.jsxs(ss,{className:"pb-3",children:[e.jsxs(ts,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(PN,{className:"h-4 w-4"}),""]}),e.jsx(Ws,{className:"text-xs",children:""})]}),e.jsx(fs,{children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(_,{variant:"outline",size:"sm",asChild:!0,className:"gap-2",children:e.jsxs(Yn,{to:"/survey/webui-feedback",children:[e.jsx(wa,{className:"h-4 w-4"}),"WebUI "]})}),e.jsx(_,{variant:"outline",size:"sm",asChild:!0,className:"gap-2",children:e.jsxs(Yn,{to:"/survey/maibot-feedback",children:[e.jsx(Dl,{className:"h-4 w-4"}),""]})})]})})]})]}),e.jsxs("div",{className:"grid gap-4 grid-cols-1 xs:grid-cols-2 lg:grid-cols-4",children:[e.jsxs($e,{children:[e.jsxs(ss,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ts,{className:"text-sm font-medium",children:""}),e.jsx(ZN,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(fs,{children:[e.jsx("div",{className:"text-2xl font-bold",children:_e.total_requests.toLocaleString()}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["",f<48?f+"":Math.floor(f/24)+""]})]})]}),e.jsxs($e,{children:[e.jsxs(ss,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ts,{className:"text-sm font-medium",children:""}),e.jsx(WN,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(fs,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["",_e.total_cost.toFixed(2)]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:_e.cost_per_hour>0?`${_e.cost_per_hour.toFixed(2)}/`:""})]})]}),e.jsxs($e,{children:[e.jsxs(ss,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ts,{className:"text-sm font-medium",children:"Token"}),e.jsx($c,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(fs,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[(_e.total_tokens/1e3).toFixed(1),"K"]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:_e.tokens_per_hour>0?`${(_e.tokens_per_hour/1e3).toFixed(1)}K/`:""})]})]}),e.jsxs($e,{children:[e.jsxs(ss,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ts,{className:"text-sm font-medium",children:""}),e.jsx(sn,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(fs,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[_e.avg_response_time.toFixed(2),"s"]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"API"})]})]})]}),e.jsxs("div",{className:"grid gap-4 grid-cols-1 sm:grid-cols-3",children:[e.jsxs($e,{children:[e.jsxs(ss,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ts,{className:"text-sm font-medium",children:""}),e.jsx(Pn,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(fs,{children:e.jsx("div",{className:"text-xl font-bold",children:pe(_e.online_time)})})]}),e.jsxs($e,{children:[e.jsxs(ss,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ts,{className:"text-sm font-medium",children:""}),e.jsx(Dl,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(fs,{children:[e.jsx("div",{className:"text-xl font-bold",children:_e.total_messages.toLocaleString()}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[" ",_e.total_replies.toLocaleString()," "]})]})]}),e.jsxs($e,{children:[e.jsxs(ss,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ts,{className:"text-sm font-medium",children:""}),e.jsx(ey,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(fs,{children:[e.jsx("div",{className:"text-xl font-bold",children:_e.total_messages>0?`${(_e.total_cost/_e.total_messages*100).toFixed(2)}`:"0.00"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"100"})]})]})]}),e.jsxs(Sa,{defaultValue:"trends",className:"space-y-4",children:[e.jsxs(pa,{className:"grid w-full grid-cols-2 sm:grid-cols-4",children:[e.jsx(es,{value:"trends",children:""}),e.jsx(es,{value:"models",children:""}),e.jsx(es,{value:"activity",children:""}),e.jsx(es,{value:"daily",children:""})]}),e.jsxs(_s,{value:"trends",className:"space-y-4",children:[e.jsxs($e,{children:[e.jsxs(ss,{children:[e.jsx(ts,{children:""}),e.jsxs(Ws,{children:["",f,""]})]}),e.jsx(fs,{children:e.jsx(Xn,{config:X,className:"h-[300px] sm:h-[400px] w-full aspect-auto",children:e.jsxs(yN,{data:W,children:[e.jsx(Dc,{strokeDasharray:"3 3",stroke:"hsl(var(--muted-foreground) / 0.2)"}),e.jsx(Oc,{dataKey:"timestamp",tickFormatter:C=>ye(C),angle:-45,textAnchor:"end",height:60,stroke:"hsl(var(--muted-foreground))",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(Wi,{stroke:"hsl(var(--muted-foreground))",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(sr,{content:e.jsx(Kn,{labelFormatter:C=>ye(C)})}),e.jsx(wN,{type:"monotone",dataKey:"requests",stroke:"var(--color-requests)",strokeWidth:2})]})})})]}),e.jsxs("div",{className:"grid gap-4 grid-cols-1 lg:grid-cols-2",children:[e.jsxs($e,{children:[e.jsxs(ss,{children:[e.jsx(ts,{children:""}),e.jsx(Ws,{children:"API"})]}),e.jsx(fs,{children:e.jsx(Xn,{config:X,className:"h-[250px] sm:h-[300px] w-full aspect-auto",children:e.jsxs(Nu,{data:W,children:[e.jsx(Dc,{strokeDasharray:"3 3",stroke:"hsl(var(--muted-foreground) / 0.2)"}),e.jsx(Oc,{dataKey:"timestamp",tickFormatter:C=>ye(C),angle:-45,textAnchor:"end",height:60,stroke:"hsl(var(--muted-foreground))",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(Wi,{stroke:"hsl(var(--muted-foreground))",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(sr,{content:e.jsx(Kn,{labelFormatter:C=>ye(C)})}),e.jsx(Rc,{dataKey:"cost",fill:"var(--color-cost)"})]})})})]}),e.jsxs($e,{children:[e.jsxs(ss,{children:[e.jsx(ts,{children:"Token"}),e.jsx(Ws,{children:"Token"})]}),e.jsx(fs,{children:e.jsx(Xn,{config:X,className:"h-[250px] sm:h-[300px] w-full aspect-auto",children:e.jsxs(Nu,{data:W,children:[e.jsx(Dc,{strokeDasharray:"3 3",stroke:"hsl(var(--muted-foreground) / 0.2)"}),e.jsx(Oc,{dataKey:"timestamp",tickFormatter:C=>ye(C),angle:-45,textAnchor:"end",height:60,stroke:"hsl(var(--muted-foreground))",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(Wi,{stroke:"hsl(var(--muted-foreground))",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(sr,{content:e.jsx(Kn,{labelFormatter:C=>ye(C)})}),e.jsx(Rc,{dataKey:"tokens",fill:"var(--color-tokens)"})]})})})]})]})]}),e.jsx(_s,{value:"models",className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4 grid-cols-1 lg:grid-cols-2",children:[e.jsxs($e,{children:[e.jsxs(ss,{children:[e.jsx(ts,{children:""}),e.jsxs(Ws,{children:[" ( ",A.length," )"]})]}),e.jsx(fs,{children:e.jsx(Xn,{config:Object.fromEntries(A.map((C,$)=>[C.model_name,{label:C.model_name,color:we[$]}])),className:"h-[300px] sm:h-[400px] w-full aspect-auto",children:e.jsxs(_N,{children:[e.jsx(sr,{content:e.jsx(Kn,{})}),e.jsx(SN,{data:R,cx:"50%",cy:"50%",labelLine:!1,label:({name:C,percent:$})=>$&&$<.05?"":`${C} ${$?($*100).toFixed(0):0}%`,outerRadius:100,dataKey:"value",children:R.map((C,$)=>e.jsx(CN,{fill:C.fill},`cell-${$}`))})]})})})]}),e.jsxs($e,{children:[e.jsxs(ss,{children:[e.jsx(ts,{children:""}),e.jsx(Ws,{children:""})]}),e.jsx(fs,{children:e.jsx(Ke,{className:"h-[300px] sm:h-[400px]",children:e.jsx("div",{className:"space-y-3",children:A.map((C,$)=>e.jsxs("div",{className:"p-4 rounded-lg border bg-card hover:bg-accent/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-semibold text-sm truncate flex-1 min-w-0",children:C.model_name}),e.jsx("div",{className:"w-3 h-3 rounded-full ml-2 flex-shrink-0",style:{backgroundColor:`hsl(var(--chart-${$%5+1}))`}})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:":"}),e.jsx("span",{className:"ml-1 font-medium",children:C.request_count.toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:":"}),e.jsxs("span",{className:"ml-1 font-medium",children:["",C.total_cost.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Tokens:"}),e.jsxs("span",{className:"ml-1 font-medium",children:[(C.total_tokens/1e3).toFixed(1),"K"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:":"}),e.jsxs("span",{className:"ml-1 font-medium",children:[C.avg_response_time.toFixed(2),"s"]})]})]})]},$))})})})]})]})}),e.jsx(_s,{value:"activity",children:e.jsxs($e,{children:[e.jsxs(ss,{children:[e.jsx(ts,{children:""}),e.jsx(Ws,{children:"API"})]}),e.jsx(fs,{children:e.jsx(Ke,{className:"h-[400px] sm:h-[500px]",children:e.jsx("div",{className:"space-y-2",children:be.map((C,$)=>e.jsxs("div",{className:"p-3 sm:p-4 rounded-lg border bg-card hover:bg-accent/50 transition-colors",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-2 mb-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-sm truncate",children:C.model}),e.jsx("div",{className:"text-xs text-muted-foreground",children:C.request_type})]}),e.jsx("div",{className:"text-xs text-muted-foreground flex-shrink-0",children:ye(C.timestamp)})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Tokens:"}),e.jsx("span",{className:"ml-1",children:C.tokens})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:":"}),e.jsxs("span",{className:"ml-1",children:["",C.cost.toFixed(4)]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:":"}),e.jsxs("span",{className:"ml-1",children:[C.time_cost.toFixed(2),"s"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:":"}),e.jsx("span",{className:`ml-1 ${C.status==="success"?"text-green-600":"text-red-600"}`,children:C.status})]})]})]},$))})})})]})}),e.jsx(_s,{value:"daily",children:e.jsxs($e,{children:[e.jsxs(ss,{children:[e.jsx(ts,{children:""}),e.jsx(Ws,{children:"7"})]}),e.jsx(fs,{children:e.jsx(Xn,{config:{requests:{label:"",color:"hsl(var(--chart-1))"},cost:{label:"()",color:"hsl(var(--chart-2))"}},className:"h-[400px] sm:h-[500px] w-full aspect-auto",children:e.jsxs(Nu,{data:xe,children:[e.jsx(Dc,{strokeDasharray:"3 3",stroke:"hsl(var(--muted-foreground) / 0.2)"}),e.jsx(Oc,{dataKey:"timestamp",tickFormatter:C=>{const $=new Date(C);return`${$.getMonth()+1}/${$.getDate()}`},stroke:"hsl(var(--muted-foreground))",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(Wi,{yAxisId:"left",stroke:"hsl(var(--muted-foreground))",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(Wi,{yAxisId:"right",orientation:"right",stroke:"hsl(var(--muted-foreground))",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(sr,{content:e.jsx(Kn,{labelFormatter:C=>new Date(C).toLocaleDateString("zh-CN")})}),e.jsx(g0,{content:e.jsx(Ag,{})}),e.jsx(Rc,{yAxisId:"left",dataKey:"requests",fill:"var(--color-requests)"}),e.jsx(Rc,{yAxisId:"right",dataKey:"cost",fill:"var(--color-cost)"})]})})})]})})]})]})})}const C0={theme:"system",setTheme:()=>null},Dg=u.createContext(C0),Ku=()=>{const n=u.useContext(Dg);if(n===void 0)throw new Error("useTheme must be used within a ThemeProvider");return n},k0=(n,i,r)=>{const d=document.documentElement.classList.contains("no-animations");if(!document.startViewTransition||d){i(n);return}const m=r.clientX,h=r.clientY,f=Math.hypot(Math.max(m,innerWidth-m),Math.max(h,innerHeight-h));document.startViewTransition(()=>{i(n)}).ready.then(()=>{document.documentElement.animate({clipPath:[`circle(0px at ${m}px ${h}px)`,`circle(${f}px at ${m}px ${h}px)`]},{duration:500,easing:"ease-in-out",pseudoElement:"::view-transition-new(root)"})})},Og=u.createContext(void 0),Rg=()=>{const n=u.useContext(Og);if(n===void 0)throw new Error("useAnimation must be used within an AnimationProvider");return n},Ge=u.forwardRef(({className:n,...i},r)=>e.jsx(Rp,{className:q("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",n),...i,ref:r,children:e.jsx(lN,{className:q("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));Ge.displayName=Rp.displayName;const T0=si("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),S=u.forwardRef(({className:n,...i},r)=>e.jsx(Kp,{ref:r,className:q(T0(),n),...i}));S.displayName=Kp.displayName;const ne=u.forwardRef(({className:n,type:i,...r},d)=>e.jsx("input",{type:i,className:q("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:d,...r}));ne.displayName="Input";const E0=[{id:"minLength",label:" 10 ",description:"Token  10 ",validate:n=>n.length>=10},{id:"hasUppercase",label:"",description:" (A-Z)",validate:n=>/[A-Z]/.test(n)},{id:"hasLowercase",label:"",description:" (a-z)",validate:n=>/[a-z]/.test(n)},{id:"hasSpecialChar",label:"",description:" (!@#$%^&*()_+-=[]{}|;:,.<>?/)",validate:n=>/[!@#$%^&*()_+\-=[\]{}|;:,.<>?/]/.test(n)}];function z0(n){const i=E0.map(d=>({id:d.id,label:d.label,description:d.description,passed:d.validate(n)}));return{isValid:i.every(d=>d.passed),rules:i}}const Zc="0.11.7 Beta",Ju="MaiBot Dashboard",M0=`${Ju} v${Zc}`,A0=(n="v")=>`${n}${Zc}`,Ft={THEME:"maibot-ui-theme",ACCENT_COLOR:"accent-color",ENABLE_ANIMATIONS:"maibot-animations",ENABLE_WAVES_BACKGROUND:"maibot-waves-background",LOG_CACHE_SIZE:"maibot-log-cache-size",LOG_AUTO_SCROLL:"maibot-log-auto-scroll",LOG_FONT_SIZE:"maibot-log-font-size",LOG_LINE_SPACING:"maibot-log-line-spacing",DATA_SYNC_INTERVAL:"maibot-data-sync-interval",WS_RECONNECT_INTERVAL:"maibot-ws-reconnect-interval",WS_MAX_RECONNECT_ATTEMPTS:"maibot-ws-max-reconnect-attempts",COMPLETED_TOURS:"maibot-completed-tours"},Da={theme:"system",accentColor:"blue",enableAnimations:!0,enableWavesBackground:!0,logCacheSize:1e3,logAutoScroll:!0,logFontSize:"xs",logLineSpacing:4,dataSyncInterval:30,wsReconnectInterval:3e3,wsMaxReconnectAttempts:10};function Zs(n){const i=Lg(n),r=localStorage.getItem(i);if(r===null)return Da[n];const d=Da[n];if(typeof d=="boolean")return r==="true";if(typeof d=="number"){const m=parseFloat(r);return isNaN(m)?d:m}return r}function Jn(n,i){const r=Lg(n);localStorage.setItem(r,String(i)),window.dispatchEvent(new CustomEvent("maibot-settings-change",{detail:{key:n,value:i}}))}function D0(){return{theme:Zs("theme"),accentColor:Zs("accentColor"),enableAnimations:Zs("enableAnimations"),enableWavesBackground:Zs("enableWavesBackground"),logCacheSize:Zs("logCacheSize"),logAutoScroll:Zs("logAutoScroll"),logFontSize:Zs("logFontSize"),logLineSpacing:Zs("logLineSpacing"),dataSyncInterval:Zs("dataSyncInterval"),wsReconnectInterval:Zs("wsReconnectInterval"),wsMaxReconnectAttempts:Zs("wsMaxReconnectAttempts")}}function O0(){const n=D0(),i=localStorage.getItem(Ft.COMPLETED_TOURS),r=i?JSON.parse(i):[];return{...n,completedTours:r}}function R0(n){const i=[],r=[];for(const[d,m]of Object.entries(n)){if(d==="completedTours"){Array.isArray(m)?(localStorage.setItem(Ft.COMPLETED_TOURS,JSON.stringify(m)),i.push("completedTours")):r.push("completedTours");continue}if(d in Da){const h=d,f=Da[h];if(typeof m==typeof f){if(h==="theme"&&!["light","dark","system"].includes(m)){r.push(d);continue}if(h==="logFontSize"&&!["xs","sm","base"].includes(m)){r.push(d);continue}Jn(h,m),i.push(d)}else r.push(d)}else r.push(d)}return{success:i.length>0,imported:i,skipped:r}}function L0(){for(const n of Object.keys(Da))Jn(n,Da[n]);localStorage.removeItem(Ft.COMPLETED_TOURS),window.dispatchEvent(new CustomEvent("maibot-settings-reset"))}function U0(){const n=[],i=[],r=[];for(let d=0;d<localStorage.length;d++){const m=localStorage.key(d);m&&(m.startsWith("maibot")||m.startsWith("accent-color")||m==="access-token")&&r.push(m)}for(const d of r)localStorage.removeItem(d),n.push(d);return{clearedKeys:n,preservedKeys:i}}function dp(){let n=0;const i=[];for(let r=0;r<localStorage.length;r++){const d=localStorage.key(r);if(d){const m=localStorage.getItem(d)||"",h=(d.length+m.length)*2;n+=h,i.push({key:d,size:h})}}return i.sort((r,d)=>d.size-r.size),{used:n,items:localStorage.length,details:i}}function B0(n){if(n===0)return"0 B";const i=1024,r=["B","KB","MB"],d=Math.floor(Math.log(n)/Math.log(i));return parseFloat((n/Math.pow(i,d)).toFixed(2))+" "+r[d]}function Lg(n){return{theme:Ft.THEME,accentColor:Ft.ACCENT_COLOR,enableAnimations:Ft.ENABLE_ANIMATIONS,enableWavesBackground:Ft.ENABLE_WAVES_BACKGROUND,logCacheSize:Ft.LOG_CACHE_SIZE,logAutoScroll:Ft.LOG_AUTO_SCROLL,logFontSize:Ft.LOG_FONT_SIZE,logLineSpacing:Ft.LOG_LINE_SPACING,dataSyncInterval:Ft.DATA_SYNC_INTERVAL,wsReconnectInterval:Ft.WS_RECONNECT_INTERVAL,wsMaxReconnectAttempts:Ft.WS_MAX_RECONNECT_ATTEMPTS}[n]}const fa=u.forwardRef(({className:n,...i},r)=>e.jsxs(Lp,{ref:r,className:q("relative flex w-full touch-none select-none items-center",n),...i,children:[e.jsx(nN,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:e.jsx(iN,{className:"absolute h-full bg-primary"})}),e.jsx(rN,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}));fa.displayName=Lp.displayName;class H0{ws=null;reconnectTimeout=null;reconnectAttempts=0;heartbeatInterval=null;logCallbacks=new Set;connectionCallbacks=new Set;isConnected=!1;logCache=[];getMaxCacheSize(){return Zs("logCacheSize")}getMaxReconnectAttempts(){return Zs("wsMaxReconnectAttempts")}getReconnectInterval(){return Zs("wsReconnectInterval")}getWebSocketUrl(){{const i=window.location.protocol==="https:"?"wss:":"ws:",r=window.location.host;return`${i}//${r}/ws/logs`}}connect(){if(this.ws?.readyState===WebSocket.OPEN||this.ws?.readyState===WebSocket.CONNECTING)return;const i=this.getWebSocketUrl();try{this.ws=new WebSocket(i),this.ws.onopen=()=>{this.isConnected=!0,this.reconnectAttempts=0,this.notifyConnection(!0),this.startHeartbeat()},this.ws.onmessage=r=>{try{if(r.data==="pong")return;const d=JSON.parse(r.data);this.notifyLog(d)}catch(d){console.error(":",d)}},this.ws.onerror=r=>{console.error(" WebSocket :",r),this.isConnected=!1,this.notifyConnection(!1)},this.ws.onclose=()=>{this.isConnected=!1,this.notifyConnection(!1),this.stopHeartbeat(),this.attemptReconnect()}}catch(r){console.error(" WebSocket :",r),this.attemptReconnect()}}attemptReconnect(){const i=this.getMaxReconnectAttempts();if(this.reconnectAttempts>=i)return;this.reconnectAttempts+=1;const r=this.getReconnectInterval(),d=Math.min(r*this.reconnectAttempts,3e4);this.reconnectTimeout=window.setTimeout(()=>{this.connect()},d)}startHeartbeat(){this.heartbeatInterval=window.setInterval(()=>{this.ws?.readyState===WebSocket.OPEN&&this.ws.send("ping")},3e4)}stopHeartbeat(){this.heartbeatInterval!==null&&(clearInterval(this.heartbeatInterval),this.heartbeatInterval=null)}disconnect(){this.reconnectTimeout!==null&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),this.stopHeartbeat(),this.ws&&(this.ws.close(),this.ws=null),this.isConnected=!1,this.reconnectAttempts=0}onLog(i){return this.logCallbacks.add(i),()=>this.logCallbacks.delete(i)}onConnectionChange(i){return this.connectionCallbacks.add(i),i(this.isConnected),()=>this.connectionCallbacks.delete(i)}notifyLog(i){if(!this.logCache.some(d=>d.id===i.id)){this.logCache.push(i);const d=this.getMaxCacheSize();this.logCache.length>d&&(this.logCache=this.logCache.slice(-d)),this.logCallbacks.forEach(m=>{try{m(i)}catch(h){console.error(":",h)}})}}notifyConnection(i){this.connectionCallbacks.forEach(r=>{try{r(i)}catch(d){console.error(":",d)}})}getAllLogs(){return[...this.logCache]}clearLogs(){this.logCache=[]}getConnectionStatus(){return this.isConnected}}const en=new H0;typeof window<"u"&&en.connect();const qs=zN,Pu=MN,q0=TN,Ug=u.forwardRef(({className:n,...i},r)=>e.jsx(Jp,{ref:r,className:q("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...i}));Ug.displayName=Jp.displayName;const Rs=u.forwardRef(({className:n,children:i,preventOutsideClose:r=!1,...d},m)=>e.jsxs(q0,{children:[e.jsx(Ug,{}),e.jsxs(Pp,{ref:m,className:q("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),onPointerDownOutside:r?h=>h.preventDefault():void 0,onInteractOutside:r?h=>h.preventDefault():void 0,...d,children:[i,e.jsxs(EN,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(il,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Rs.displayName=Pp.displayName;const Ls=({className:n,...i})=>e.jsx("div",{className:q("flex flex-col space-y-1.5 text-center sm:text-left",n),...i});Ls.displayName="DialogHeader";const tt=({className:n,...i})=>e.jsx("div",{className:q("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",n),...i});tt.displayName="DialogFooter";const Us=u.forwardRef(({className:n,...i},r)=>e.jsx(Zp,{ref:r,className:q("text-lg font-semibold leading-none tracking-tight",n),...i}));Us.displayName=Zp.displayName;const Ks=u.forwardRef(({className:n,...i},r)=>e.jsx(Wp,{ref:r,className:q("text-sm text-muted-foreground",n),...i}));Ks.displayName=Wp.displayName;const ms=oN,et=dN,G0=cN,Bg=u.forwardRef(({className:n,...i},r)=>e.jsx(Up,{className:q("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...i,ref:r}));Bg.displayName=Up.displayName;const as=u.forwardRef(({className:n,...i},r)=>e.jsxs(G0,{children:[e.jsx(Bg,{}),e.jsx(Bp,{ref:r,className:q("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...i})]}));as.displayName=Bp.displayName;const ls=({className:n,...i})=>e.jsx("div",{className:q("flex flex-col space-y-2 text-center sm:text-left",n),...i});ls.displayName="AlertDialogHeader";const ns=({className:n,...i})=>e.jsx("div",{className:q("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",n),...i});ns.displayName="AlertDialogFooter";const is=u.forwardRef(({className:n,...i},r)=>e.jsx(Hp,{ref:r,className:q("text-lg font-semibold",n),...i}));is.displayName=Hp.displayName;const rs=u.forwardRef(({className:n,...i},r)=>e.jsx(qp,{ref:r,className:q("text-sm text-muted-foreground",n),...i}));rs.displayName=qp.displayName;const cs=u.forwardRef(({className:n,...i},r)=>e.jsx(Gp,{ref:r,className:q(mr(),n),...i}));cs.displayName=Gp.displayName;const os=u.forwardRef(({className:n,...i},r)=>e.jsx(Fp,{ref:r,className:q(mr({variant:"outline"}),"mt-2 sm:mt-0",n),...i}));os.displayName=Fp.displayName;function F0(){return e.jsxs("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:""}),e.jsx("p",{className:"text-muted-foreground mt-1 sm:mt-2 text-sm sm:text-base",children:""})]})}),e.jsxs(Sa,{defaultValue:"appearance",className:"w-full",children:[e.jsxs(pa,{className:"grid w-full grid-cols-2 sm:grid-cols-4 gap-0.5 sm:gap-1 h-auto p-1",children:[e.jsxs(es,{value:"appearance",className:"gap-1 sm:gap-2 text-xs sm:text-sm px-2 sm:px-3 py-2",children:[e.jsx(sy,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4",strokeWidth:2,fill:"none"}),e.jsx("span",{children:""})]}),e.jsxs(es,{value:"security",className:"gap-1 sm:gap-2 text-xs sm:text-sm px-2 sm:px-3 py-2",children:[e.jsx(ty,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4",strokeWidth:2,fill:"none"}),e.jsx("span",{children:""})]}),e.jsxs(es,{value:"other",className:"gap-1 sm:gap-2 text-xs sm:text-sm px-2 sm:px-3 py-2",children:[e.jsx(ti,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4",strokeWidth:2,fill:"none"}),e.jsx("span",{children:""})]}),e.jsxs(es,{value:"about",className:"gap-1 sm:gap-2 text-xs sm:text-sm px-2 sm:px-3 py-2",children:[e.jsx(Oa,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4",strokeWidth:2,fill:"none"}),e.jsx("span",{children:""})]})]}),e.jsxs(Ke,{className:"h-[calc(100vh-240px)] sm:h-[calc(100vh-280px)] mt-4 sm:mt-6",children:[e.jsx(_s,{value:"appearance",className:"mt-0",children:e.jsx(V0,{})}),e.jsx(_s,{value:"security",className:"mt-0",children:e.jsx($0,{})}),e.jsx(_s,{value:"other",className:"mt-0",children:e.jsx(Q0,{})}),e.jsx(_s,{value:"about",className:"mt-0",children:e.jsx(I0,{})})]})]})]})}function up(n){const i=document.documentElement,d={blue:{hsl:"221.2 83.2% 53.3%",darkHsl:"217.2 91.2% 59.8%",gradient:null},purple:{hsl:"271 91% 65%",darkHsl:"270 95% 75%",gradient:null},green:{hsl:"142 71% 45%",darkHsl:"142 76% 36%",gradient:null},orange:{hsl:"25 95% 53%",darkHsl:"20 90% 48%",gradient:null},pink:{hsl:"330 81% 60%",darkHsl:"330 85% 70%",gradient:null},red:{hsl:"0 84% 60%",darkHsl:"0 90% 70%",gradient:null},"gradient-sunset":{hsl:"15 95% 60%",darkHsl:"15 95% 65%",gradient:"linear-gradient(135deg, hsl(25 95% 53%) 0%, hsl(330 81% 60%) 100%)"},"gradient-ocean":{hsl:"200 90% 55%",darkHsl:"200 90% 60%",gradient:"linear-gradient(135deg, hsl(221.2 83.2% 53.3%) 0%, hsl(189 94% 43%) 100%)"},"gradient-forest":{hsl:"150 70% 45%",darkHsl:"150 75% 40%",gradient:"linear-gradient(135deg, hsl(142 71% 45%) 0%, hsl(158 64% 52%) 100%)"},"gradient-aurora":{hsl:"310 85% 65%",darkHsl:"310 90% 70%",gradient:"linear-gradient(135deg, hsl(271 91% 65%) 0%, hsl(330 81% 60%) 100%)"},"gradient-fire":{hsl:"15 95% 55%",darkHsl:"15 95% 60%",gradient:"linear-gradient(135deg, hsl(0 84% 60%) 0%, hsl(25 95% 53%) 100%)"},"gradient-twilight":{hsl:"250 90% 60%",darkHsl:"250 95% 65%",gradient:"linear-gradient(135deg, hsl(239 84% 67%) 0%, hsl(271 91% 65%) 100%)"}}[n];if(d)i.style.setProperty("--primary",d.hsl),d.gradient?(i.style.setProperty("--primary-gradient",d.gradient),i.classList.add("has-gradient")):(i.style.removeProperty("--primary-gradient"),i.classList.remove("has-gradient"));else if(n.startsWith("#")){const m=h=>{h=h.replace("#","");const f=parseInt(h.substring(0,2),16)/255,p=parseInt(h.substring(2,4),16)/255,g=parseInt(h.substring(4,6),16)/255,b=Math.max(f,p,g),j=Math.min(f,p,g);let y=0,N=0;const T=(b+j)/2;if(b!==j){const w=b-j;switch(N=T>.5?w/(2-b-j):w/(b+j),b){case f:y=((p-g)/w+(p<g?6:0))/6;break;case p:y=((g-f)/w+2)/6;break;case g:y=((f-p)/w+4)/6;break}}return`${Math.round(y*360)} ${Math.round(N*100)}% ${Math.round(T*100)}%`};i.style.setProperty("--primary",m(n)),i.style.removeProperty("--primary-gradient"),i.classList.remove("has-gradient")}}function V0(){const{theme:n,setTheme:i}=Ku(),{enableAnimations:r,setEnableAnimations:d,enableWavesBackground:m,setEnableWavesBackground:h}=Rg(),[f,p]=u.useState(()=>localStorage.getItem("accent-color")||"blue");u.useEffect(()=>{const b=localStorage.getItem("accent-color")||"blue";up(b)},[]);const g=b=>{p(b),localStorage.setItem("accent-color",b),up(b)};return e.jsxs("div",{className:"space-y-6 sm:space-y-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:""}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 sm:gap-4",children:[e.jsx(Eu,{value:"light",current:n,onChange:i,label:"",description:""}),e.jsx(Eu,{value:"dark",current:n,onChange:i,label:"",description:""}),e.jsx(Eu,{value:"system",current:n,onChange:i,label:"",description:""})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:""}),e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs sm:text-sm font-medium mb-2 sm:mb-3",children:""}),e.jsxs("div",{className:"grid grid-cols-3 sm:grid-cols-6 gap-2 sm:gap-3",children:[e.jsx(xa,{value:"blue",current:f,onChange:g,label:"",colorClass:"bg-blue-500"}),e.jsx(xa,{value:"purple",current:f,onChange:g,label:"",colorClass:"bg-purple-500"}),e.jsx(xa,{value:"green",current:f,onChange:g,label:"",colorClass:"bg-green-500"}),e.jsx(xa,{value:"orange",current:f,onChange:g,label:"",colorClass:"bg-orange-500"}),e.jsx(xa,{value:"pink",current:f,onChange:g,label:"",colorClass:"bg-pink-500"}),e.jsx(xa,{value:"red",current:f,onChange:g,label:"",colorClass:"bg-red-500"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs sm:text-sm font-medium mb-2 sm:mb-3",children:""}),e.jsxs("div",{className:"grid grid-cols-3 sm:grid-cols-6 gap-2 sm:gap-3",children:[e.jsx(xa,{value:"gradient-sunset",current:f,onChange:g,label:"",colorClass:"bg-gradient-to-r from-orange-500 to-pink-500"}),e.jsx(xa,{value:"gradient-ocean",current:f,onChange:g,label:"",colorClass:"bg-gradient-to-r from-blue-500 to-cyan-500"}),e.jsx(xa,{value:"gradient-forest",current:f,onChange:g,label:"",colorClass:"bg-gradient-to-r from-green-500 to-emerald-500"}),e.jsx(xa,{value:"gradient-aurora",current:f,onChange:g,label:"",colorClass:"bg-gradient-to-r from-purple-500 to-pink-500"}),e.jsx(xa,{value:"gradient-fire",current:f,onChange:g,label:"",colorClass:"bg-gradient-to-r from-red-500 to-orange-500"}),e.jsx(xa,{value:"gradient-twilight",current:f,onChange:g,label:"",colorClass:"bg-gradient-to-r from-indigo-500 to-purple-500"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs sm:text-sm font-medium mb-2 sm:mb-3",children:""}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"color",value:f.startsWith("#")?f:"#3b82f6",onChange:b=>g(b.target.value),className:"h-10 sm:h-12 w-full rounded-lg border-2 border-border cursor-pointer",title:""})}),e.jsx("div",{className:"flex-1",children:e.jsx(ne,{type:"text",value:f,onChange:b=>g(b.target.value),placeholder:"#3b82f6",className:"font-mono text-sm"})})]}),e.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground mt-2",children:" HEX "})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:""}),e.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[e.jsx("div",{className:"rounded-lg border bg-card p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5 flex-1",children:[e.jsx(S,{htmlFor:"animations",className:"text-base font-medium cursor-pointer",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),e.jsx(Ge,{id:"animations",checked:r,onCheckedChange:d})]})}),e.jsx("div",{className:"rounded-lg border bg-card p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5 flex-1",children:[e.jsx(S,{htmlFor:"waves-background",className:"text-base font-medium cursor-pointer",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),e.jsx(Ge,{id:"waves-background",checked:m,onCheckedChange:h})]})})]})]})]})}function $0(){const n=ja(),[i,r]=u.useState(""),[d,m]=u.useState(""),[h,f]=u.useState(!1),[p,g]=u.useState(!1),[b,j]=u.useState(!1),[y,N]=u.useState(!1),[T,w]=u.useState(!1),[U,O]=u.useState(!1),[B,I]=u.useState(""),[L,M]=u.useState(!1),{toast:Y}=Bs(),Q=u.useMemo(()=>z0(d),[d]),z=async pe=>{if(!i){Y({title:"",description:"Token  Cookie  Token",variant:"destructive"});return}try{await navigator.clipboard.writeText(pe),w(!0),Y({title:"",description:"Token "}),setTimeout(()=>w(!1),2e3)}catch{Y({title:"",description:" Token",variant:"destructive"})}},A=async()=>{if(!d.trim()){Y({title:"",description:" Token",variant:"destructive"});return}if(!Q.isValid){const pe=Q.rules.filter(ye=>!ye.passed).map(ye=>ye.label).join(", ");Y({title:"",description:`Token : ${pe}`,variant:"destructive"});return}j(!0);try{const pe=await fetch("/api/webui/auth/update",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({new_token:d.trim()})}),ye=await pe.json();pe.ok&&ye.success?(m(""),r(d.trim()),Y({title:"",description:"Access Token "}),setTimeout(()=>{n({to:"/auth"})},1500)):Y({title:"",description:ye.message||" Token",variant:"destructive"})}catch(pe){console.error(" Token :",pe),Y({title:"",description:"",variant:"destructive"})}finally{j(!1)}},W=async()=>{N(!0);try{const pe=await fetch("/api/webui/auth/regenerate",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"}),ye=await pe.json();pe.ok&&ye.success?(r(ye.token),I(ye.token),O(!0),M(!1),Y({title:"",description:" Access Token "})):Y({title:"",description:ye.message||" Token",variant:"destructive"})}catch(pe){console.error(" Token :",pe),Y({title:"",description:"",variant:"destructive"})}finally{N(!1)}},xe=async()=>{try{await navigator.clipboard.writeText(B),M(!0),Y({title:"",description:"Token "})}catch{Y({title:"",description:" Token",variant:"destructive"})}},be=()=>{O(!1),setTimeout(()=>{I(""),M(!1)},300),setTimeout(()=>{n({to:"/auth"})},500)},_e=pe=>{pe||be()};return e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsx(qs,{open:U,onOpenChange:_e,children:e.jsxs(Rs,{className:"sm:max-w-md",children:[e.jsxs(Ls,{children:[e.jsxs(Us,{className:"flex items-center gap-2",children:[e.jsx(_a,{className:"h-5 w-5 text-yellow-500"})," Access Token"]}),e.jsx(Ks,{children:" Token"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"rounded-lg border-2 border-primary/20 bg-primary/5 p-4",children:[e.jsx(S,{className:"text-xs text-muted-foreground mb-2 block",children:" Token (64)"}),e.jsx("div",{className:"font-mono text-sm break-all select-all bg-background p-3 rounded border",children:B})]}),e.jsx("div",{className:"rounded-lg border border-yellow-200 dark:border-yellow-900 bg-yellow-50 dark:bg-yellow-950/30 p-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(_a,{className:"h-4 w-4 text-yellow-600 dark:text-yellow-500 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-yellow-800 dark:text-yellow-300 space-y-1",children:[e.jsx("p",{className:"font-semibold",children:""}),e.jsxs("ul",{className:"list-disc list-inside space-y-0.5 text-xs",children:[e.jsx("li",{children:" Token "}),e.jsx("li",{children:""}),e.jsx("li",{children:""}),e.jsx("li",{children:" Token "})]})]})]})})]}),e.jsxs(tt,{className:"gap-2 sm:gap-0",children:[e.jsx(_,{variant:"outline",onClick:xe,className:"gap-2",children:L?e.jsxs(e.Fragment,{children:[e.jsx(Vt,{className:"h-4 w-4 text-green-500"}),""]}):e.jsxs(e.Fragment,{children:[e.jsx(Qc,{className:"h-4 w-4"})," Token"]})}),e.jsx(_,{onClick:be,children:""})]})]})}),e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:" Access Token"}),e.jsx("div",{className:"space-y-3 sm:space-y-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"current-token",className:"text-sm",children:""}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ne,{id:"current-token",type:h?"text":"password",value:i||"",readOnly:!0,className:"pr-10 font-mono text-sm",placeholder:"Token  Cookie "}),e.jsx("button",{onClick:()=>{i?f(!h):Y({title:"",description:'Token  Cookie  Token ""'})},className:"absolute right-2 top-1/2 -translate-y-1/2 p-1.5 hover:bg-accent rounded",title:h?"":"",children:h?e.jsx(or,{className:"h-4 w-4 text-muted-foreground"}):e.jsx(Ot,{className:"h-4 w-4 text-muted-foreground"})})]}),e.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[e.jsx(_,{variant:"outline",size:"icon",onClick:()=>z(i),title:"",className:"flex-shrink-0",disabled:!i,children:T?e.jsx(Vt,{className:"h-4 w-4 text-green-500"}):e.jsx(Qc,{className:"h-4 w-4"})}),e.jsxs(ms,{children:[e.jsx(et,{asChild:!0,children:e.jsxs(_,{variant:"outline",disabled:y,className:"gap-2 flex-1 sm:flex-none",children:[e.jsx(Et,{className:q("h-4 w-4",y&&"animate-spin")}),e.jsx("span",{className:"hidden sm:inline",children:""}),e.jsx("span",{className:"sm:hidden",children:""})]})}),e.jsxs(as,{children:[e.jsxs(ls,{children:[e.jsx(is,{children:" Token"}),e.jsx(rs,{children:" 64  Token   Token "})]}),e.jsxs(ns,{children:[e.jsx(os,{children:""}),e.jsx(cs,{onClick:W,children:""})]})]})]})]})]}),e.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:" Access Token"})]})})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:" Access Token"}),e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"new-token",className:"text-sm",children:""}),e.jsxs("div",{className:"relative",children:[e.jsx(ne,{id:"new-token",type:p?"text":"password",value:d,onChange:pe=>m(pe.target.value),className:"pr-10 font-mono text-sm",placeholder:" Token"}),e.jsx("button",{onClick:()=>g(!p),className:"absolute right-2 top-1/2 -translate-y-1/2 p-1.5 hover:bg-accent rounded",title:p?"":"",children:p?e.jsx(or,{className:"h-4 w-4 text-muted-foreground"}):e.jsx(Ot,{className:"h-4 w-4 text-muted-foreground"})})]}),d&&e.jsxs("div",{className:"mt-3 space-y-2 p-3 rounded-lg bg-muted/50",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:"Token :"}),e.jsx("div",{className:"space-y-1.5",children:Q.rules.map(pe=>e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[pe.passed?e.jsx(ta,{className:"h-4 w-4 text-green-500 flex-shrink-0"}):e.jsx(pg,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),e.jsx("span",{className:q(pe.passed?"text-green-600 dark:text-green-400":"text-muted-foreground"),children:pe.label})]},pe.id))}),Q.isValid&&e.jsx("div",{className:"mt-2 pt-2 border-t border-border",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-600 dark:text-green-400",children:[e.jsx(Vt,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:"Token "})]})})]})]}),e.jsx(_,{onClick:A,disabled:b||!Q.isValid||!d,className:"w-full sm:w-auto",children:b?"...":" Token"})]})]}),e.jsxs("div",{className:"rounded-lg border border-yellow-200 dark:border-yellow-900 bg-yellow-50 dark:bg-yellow-950/30 p-3 sm:p-4",children:[e.jsx("h4",{className:"text-sm sm:text-base font-semibold text-yellow-900 dark:text-yellow-200 mb-2",children:""}),e.jsxs("ul",{className:"text-xs sm:text-sm text-yellow-800 dark:text-yellow-300 space-y-1 list-disc list-inside",children:[e.jsx("li",{children:" Token  64 "}),e.jsx("li",{children:" Token "}),e.jsx("li",{children:" Token  Token "}),e.jsx("li",{children:" Token"}),e.jsx("li",{children:" Token "}),e.jsx("li",{children:" Token "})]})]})]})}function Q0(){const n=ja(),{toast:i}=Bs(),[r,d]=u.useState(!1),[m,h]=u.useState(!1),[f,p]=u.useState(()=>Zs("logCacheSize")),[g,b]=u.useState(()=>Zs("wsReconnectInterval")),[j,y]=u.useState(()=>Zs("wsMaxReconnectAttempts")),[N,T]=u.useState(()=>Zs("dataSyncInterval")),[w,U]=u.useState(()=>dp()),[O,B]=u.useState(!1),[I,L]=u.useState(!1),M=u.useRef(null);if(m)throw new Error("");const Y=()=>{U(dp())},Q=R=>{const X=R[0];p(X),Jn("logCacheSize",X)},z=R=>{const X=R[0];b(X),Jn("wsReconnectInterval",X)},A=R=>{const X=R[0];y(X),Jn("wsMaxReconnectAttempts",X)},W=R=>{const X=R[0];T(X),Jn("dataSyncInterval",X)},xe=()=>{en.clearLogs(),i({title:"",description:""})},be=()=>{const R=U0();Y(),i({title:"",description:` ${R.clearedKeys.length} `})},_e=()=>{B(!0);try{const R=O0(),X=JSON.stringify(R,null,2),C=new Blob([X],{type:"application/json"}),$=URL.createObjectURL(C),k=document.createElement("a");k.href=$,k.download=`maibot-webui-settings-${new Date().toISOString().slice(0,10)}.json`,document.body.appendChild(k),k.click(),document.body.removeChild(k),URL.revokeObjectURL($),i({title:"",description:" JSON "})}catch(R){console.error(":",R),i({title:"",description:"",variant:"destructive"})}finally{B(!1)}},pe=R=>{const X=R.target.files?.[0];if(!X)return;L(!0);const C=new FileReader;C.onload=$=>{try{const k=$.target?.result,ce=JSON.parse(k),ue=R0(ce);ue.success?(p(Zs("logCacheSize")),b(Zs("wsReconnectInterval")),y(Zs("wsMaxReconnectAttempts")),T(Zs("dataSyncInterval")),Y(),i({title:"",description:` ${ue.imported.length} ${ue.skipped.length>0?` ${ue.skipped.length} `:""}`}),(ue.imported.includes("theme")||ue.imported.includes("accentColor"))&&i({title:"",description:""})):i({title:"",description:"",variant:"destructive"})}catch(k){console.error(":",k),i({title:"",description:"",variant:"destructive"})}finally{L(!1),M.current&&(M.current.value="")}},C.readAsText(X)},ye=()=>{L0(),p(Da.logCacheSize),b(Da.wsReconnectInterval),y(Da.wsMaxReconnectAttempts),T(Da.dataSyncInterval),Y(),i({title:"",description:""})},we=async()=>{d(!0);try{const R=localStorage.getItem("access-token"),X=await fetch("/api/webui/setup/reset",{method:"POST",headers:{Authorization:`Bearer ${R}`}}),C=await X.json();X.ok&&C.success?(i({title:"",description:""}),setTimeout(()=>{n({to:"/setup"})},1e3)):i({title:"",description:C.message||"",variant:"destructive"})}catch(R){console.error(":",R),i({title:"",description:"",variant:"destructive"})}finally{d(!1)}};return e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6",children:[e.jsxs("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4 flex items-center gap-2",children:[e.jsx($c,{className:"h-5 w-5"}),""]}),e.jsxs("div",{className:"space-y-4 sm:space-y-5",children:[e.jsxs("div",{className:"rounded-lg bg-muted/50 p-3 sm:p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(ay,{className:"h-4 w-4"}),""]}),e.jsx(_,{variant:"ghost",size:"sm",onClick:Y,className:"h-7 px-2",children:e.jsx(Et,{className:"h-3 w-3"})})]}),e.jsx("div",{className:"text-2xl font-bold text-primary",children:B0(w.used)}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[w.items," "]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(S,{className:"text-sm font-medium",children:""}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[f," "]})]}),e.jsx(fa,{value:[f],onValueChange:Q,min:100,max:5e3,step:100,className:"w-full"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(S,{className:"text-sm font-medium",children:""}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[N," "]})]}),e.jsx(fa,{value:[N],onValueChange:W,min:10,max:120,step:5,className:"w-full"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(S,{className:"text-sm font-medium",children:"WebSocket "}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[g/1e3," "]})]}),e.jsx(fa,{value:[g],onValueChange:z,min:1e3,max:1e4,step:500,className:"w-full"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" WebSocket "})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(S,{className:"text-sm font-medium",children:"WebSocket "}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[j," "]})]}),e.jsx(fa,{value:[j],onValueChange:A,min:3,max:30,step:1,className:"w-full"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 pt-2",children:[e.jsxs(_,{variant:"outline",size:"sm",onClick:xe,className:"gap-2",children:[e.jsx(Pe,{className:"h-4 w-4"}),""]}),e.jsxs(ms,{children:[e.jsx(et,{asChild:!0,children:e.jsxs(_,{variant:"outline",size:"sm",className:"gap-2",children:[e.jsx(Pe,{className:"h-4 w-4"}),""]})}),e.jsxs(as,{children:[e.jsxs(ls,{children:[e.jsx(is,{children:""}),e.jsx(rs,{children:" "})]}),e.jsxs(ns,{children:[e.jsx(os,{children:""}),e.jsx(cs,{onClick:be,children:""})]})]})]})]})]})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6",children:[e.jsxs("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4 flex items-center gap-2",children:[e.jsx(nl,{className:"h-5 w-5"}),"/"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:""}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(_,{variant:"outline",onClick:_e,disabled:O,className:"gap-2",children:[e.jsx(nl,{className:"h-4 w-4"}),O?"...":""]}),e.jsx("input",{ref:M,type:"file",accept:".json",onChange:pe,className:"hidden"}),e.jsxs(_,{variant:"outline",onClick:()=>M.current?.click(),disabled:I,className:"gap-2",children:[e.jsx(dr,{className:"h-4 w-4"}),I?"...":""]})]}),e.jsx("div",{className:"pt-2 border-t",children:e.jsxs(ms,{children:[e.jsx(et,{asChild:!0,children:e.jsxs(_,{variant:"outline",size:"sm",className:"gap-2 text-destructive hover:text-destructive",children:[e.jsx(Vc,{className:"h-4 w-4"}),""]})}),e.jsxs(as,{children:[e.jsxs(ls,{children:[e.jsx(is,{children:""}),e.jsx(rs,{children:" "})]}),e.jsxs(ns,{children:[e.jsx(os,{children:""}),e.jsx(cs,{onClick:ye,children:""})]})]})]})})]})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:""}),e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsx("div",{className:"space-y-2",children:e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:""})}),e.jsxs(ms,{children:[e.jsx(et,{asChild:!0,children:e.jsxs(_,{variant:"outline",disabled:r,className:"gap-2",children:[e.jsx(Vc,{className:q("h-4 w-4",r&&"animate-spin")}),""]})}),e.jsxs(as,{children:[e.jsxs(ls,{children:[e.jsx(is,{children:""}),e.jsx(rs,{children:""})]}),e.jsxs(ns,{children:[e.jsx(os,{children:""}),e.jsx(cs,{onClick:we,children:""})]})]})]})]})]}),e.jsxs("div",{className:"rounded-lg border border-dashed border-yellow-500/50 bg-yellow-500/5 p-4 sm:p-6",children:[e.jsxs("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4 flex items-center gap-2",children:[e.jsx(_a,{className:"h-5 w-5 text-yellow-500"}),""]}),e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsx("div",{className:"space-y-2",children:e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:""})}),e.jsxs(ms,{children:[e.jsx(et,{asChild:!0,children:e.jsxs(_,{variant:"destructive",className:"gap-2",children:[e.jsx(_a,{className:"h-4 w-4"}),""]})}),e.jsxs(as,{children:[e.jsxs(ls,{children:[e.jsx(is,{children:""}),e.jsx(rs,{children:" React  "})]}),e.jsxs(ns,{children:[e.jsx(os,{children:""}),e.jsx(cs,{onClick:()=>h(!0),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:""})]})]})]})]})]})]})}function I0(){return e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsx("div",{className:"rounded-lg border-2 border-primary/30 bg-gradient-to-r from-primary/5 to-primary/10 p-4 sm:p-6",children:e.jsxs("div",{className:"flex items-start gap-3 sm:gap-4",children:[e.jsx("div",{className:"flex-shrink-0 rounded-lg bg-primary/10 p-2 sm:p-3",children:e.jsx("svg",{className:"h-6 w-6 sm:h-8 sm:w-8 text-primary",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-foreground mb-2",children:""}),e.jsx("p",{className:"text-sm sm:text-base text-muted-foreground mb-3",children:" GitHub  Star  "}),e.jsxs("a",{href:"https://github.com/Mai-with-u/MaiBot-Dashboard",target:"_blank",rel:"noopener noreferrer",className:q("inline-flex items-center gap-2 px-4 py-2 rounded-lg","bg-primary text-primary-foreground font-medium text-sm","hover:bg-primary/90 transition-colors","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"),children:[e.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z",clipRule:"evenodd"})})," GitHub",e.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})]})]})}),e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6",children:[e.jsxs("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:[" ",Ju]}),e.jsxs("div",{className:"space-y-2 text-xs sm:text-sm text-muted-foreground",children:[e.jsxs("p",{children:[": ",Zc]}),e.jsx("p",{children:"MaiBot Web "})]})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:""}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"MaiBot "}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Mai-with-u"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"WebUI"}),e.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground",children:["Mai-with-u ",e.jsx("a",{href:"https://github.com/DrSmoothl",target:"_blank",rel:"noopener noreferrer",className:"text-primary underline",children:"@MotricSeven"})]})]})]})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:""}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-xs sm:text-sm text-muted-foreground",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("p",{className:"font-medium text-foreground",children:""}),e.jsxs("ul",{className:"space-y-0.5 list-disc list-inside",children:[e.jsx("li",{children:"React 19.2.0"}),e.jsx("li",{children:"TypeScript 5.7.2"}),e.jsx("li",{children:"Vite 6.0.7"}),e.jsx("li",{children:"TanStack Router 1.94.2"})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("p",{className:"font-medium text-foreground",children:"UI "}),e.jsxs("ul",{className:"space-y-0.5 list-disc list-inside",children:[e.jsx("li",{children:"shadcn/ui"}),e.jsx("li",{children:"Radix UI"}),e.jsx("li",{children:"Tailwind CSS 3.4.17"}),e.jsx("li",{children:"Lucide Icons"})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("p",{className:"font-medium text-foreground",children:""}),e.jsxs("ul",{className:"space-y-0.5 list-disc list-inside",children:[e.jsx("li",{children:"Python 3.12+"}),e.jsx("li",{children:"FastAPI"}),e.jsx("li",{children:"Uvicorn"}),e.jsx("li",{children:"WebSocket"})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("p",{className:"font-medium text-foreground",children:""}),e.jsxs("ul",{className:"space-y-0.5 list-disc list-inside",children:[e.jsx("li",{children:"Bun / npm"}),e.jsx("li",{children:"ESLint 9.17.0"}),e.jsx("li",{children:"PostCSS"})]})]})]})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:""}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mb-3",children:""}),e.jsx(Ke,{className:"h-[300px] sm:h-[400px]",children:e.jsxs("div",{className:"space-y-4 pr-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:"UI "}),e.jsxs("div",{className:"grid gap-2 text-xs sm:text-sm",children:[e.jsx(Xs,{name:"React",description:"",license:"MIT"}),e.jsx(Xs,{name:"shadcn/ui",description:" React ",license:"MIT"}),e.jsx(Xs,{name:"Radix UI",description:"",license:"MIT"}),e.jsx(Xs,{name:"Tailwind CSS",description:" CSS ",license:"MIT"}),e.jsx(Xs,{name:"Lucide React",description:"",license:"ISC"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:""}),e.jsxs("div",{className:"grid gap-2 text-xs sm:text-sm",children:[e.jsx(Xs,{name:"TanStack Router",description:"",license:"MIT"}),e.jsx(Xs,{name:"Zustand",description:"",license:"MIT"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:""}),e.jsxs("div",{className:"grid gap-2 text-xs sm:text-sm",children:[e.jsx(Xs,{name:"React Hook Form",description:"",license:"MIT"}),e.jsx(Xs,{name:"Zod",description:"TypeScript  schema ",license:"MIT"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:""}),e.jsxs("div",{className:"grid gap-2 text-xs sm:text-sm",children:[e.jsx(Xs,{name:"clsx",description:" className ",license:"MIT"}),e.jsx(Xs,{name:"tailwind-merge",description:"Tailwind ",license:"MIT"}),e.jsx(Xs,{name:"class-variance-authority",description:"",license:"Apache-2.0"}),e.jsx(Xs,{name:"date-fns",description:"",license:"MIT"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:""}),e.jsxs("div",{className:"grid gap-2 text-xs sm:text-sm",children:[e.jsx(Xs,{name:"Framer Motion",description:"React ",license:"MIT"}),e.jsx(Xs,{name:"vaul",description:"",license:"MIT"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:""}),e.jsxs("div",{className:"grid gap-2 text-xs sm:text-sm",children:[e.jsx(Xs,{name:"FastAPI",description:" Python Web ",license:"MIT"}),e.jsx(Xs,{name:"Uvicorn",description:"ASGI ",license:"BSD-3-Clause"}),e.jsx(Xs,{name:"Pydantic",description:"",license:"MIT"}),e.jsx(Xs,{name:"python-multipart",description:"",license:"Apache-2.0"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:""}),e.jsxs("div",{className:"grid gap-2 text-xs sm:text-sm",children:[e.jsx(Xs,{name:"TypeScript",description:"JavaScript ",license:"Apache-2.0"}),e.jsx(Xs,{name:"Vite",description:"",license:"MIT"}),e.jsx(Xs,{name:"ESLint",description:"JavaScript ",license:"MIT"}),e.jsx(Xs,{name:"PostCSS",description:"CSS ",license:"MIT"})]})]})]})})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:""}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"rounded-lg bg-primary/5 border border-primary/20 p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-start gap-2 sm:gap-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:e.jsx("div",{className:"rounded-md bg-primary/10 px-2 py-1",children:e.jsx("span",{className:"text-xs sm:text-sm font-bold text-primary",children:"GPLv3"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm sm:text-base font-semibold text-foreground mb-1",children:"MaiBot WebUI"}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:" GNU General Public License v3.0  "})]})]})}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"MITApache-2.0BSD  "})]})]})]})}function Xs({name:n,description:i,license:r}){return e.jsxs("div",{className:"flex items-start justify-between gap-2 rounded-lg border bg-muted/30 p-2.5 sm:p-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-foreground truncate",children:n}),e.jsx("p",{className:"text-muted-foreground text-xs mt-0.5",children:i})]}),e.jsx("span",{className:"inline-flex items-center rounded-full bg-primary/10 px-2 py-0.5 text-[10px] font-medium text-primary flex-shrink-0",children:r})]})}function Eu({value:n,current:i,onChange:r,label:d,description:m}){const h=i===n;return e.jsxs("button",{onClick:()=>r(n),className:q("relative rounded-lg border-2 p-3 sm:p-4 text-left transition-all","hover:border-primary/50 hover:bg-accent/50",h?"border-primary bg-accent":"border-border"),children:[h&&e.jsx("div",{className:"absolute top-2 right-2 sm:top-3 sm:right-3 h-2 w-2 rounded-full bg-primary"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-sm sm:text-base font-medium",children:d}),e.jsx("div",{className:"text-[10px] sm:text-xs text-muted-foreground",children:m})]}),e.jsxs("div",{className:"mt-2 sm:mt-3 flex gap-1",children:[n==="light"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-slate-200"}),e.jsx("div",{className:"h-2 w-2 rounded-full bg-slate-300"}),e.jsx("div",{className:"h-2 w-2 rounded-full bg-slate-400"})]}),n==="dark"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-slate-700"}),e.jsx("div",{className:"h-2 w-2 rounded-full bg-slate-800"}),e.jsx("div",{className:"h-2 w-2 rounded-full bg-slate-900"})]}),n==="system"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-gradient-to-r from-slate-200 to-slate-700"}),e.jsx("div",{className:"h-2 w-2 rounded-full bg-gradient-to-r from-slate-300 to-slate-800"}),e.jsx("div",{className:"h-2 w-2 rounded-full bg-gradient-to-r from-slate-400 to-slate-900"})]})]})]})}function xa({value:n,current:i,onChange:r,label:d,colorClass:m}){const h=i===n;return e.jsxs("button",{onClick:()=>r(n),className:q("relative rounded-lg border-2 p-2 sm:p-3 text-left transition-all","hover:border-primary/50 hover:bg-accent/50",h?"border-primary bg-accent":"border-border"),children:[h&&e.jsx("div",{className:"absolute top-1.5 right-1.5 sm:top-2 sm:right-2 h-1.5 w-1.5 sm:h-2 sm:w-2 rounded-full bg-primary"}),e.jsxs("div",{className:"flex flex-col items-center gap-1.5 sm:gap-2",children:[e.jsx("div",{className:q("h-8 w-8 sm:h-10 sm:w-10 rounded-full",m)}),e.jsx("div",{className:"text-[10px] sm:text-xs font-medium text-center",children:d})]})]})}class Y0{grad3;p;perm;constructor(i=0){this.grad3=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],this.p=[];for(let r=0;r<256;r++)this.p[r]=Math.floor(Math.random()*256);this.perm=[];for(let r=0;r<512;r++)this.perm[r]=this.p[r&255]}dot(i,r,d){return i[0]*r+i[1]*d}mix(i,r,d){return(1-d)*i+d*r}fade(i){return i*i*i*(i*(i*6-15)+10)}perlin2(i,r){const d=Math.floor(i)&255,m=Math.floor(r)&255;i-=Math.floor(i),r-=Math.floor(r);const h=this.fade(i),f=this.fade(r),p=this.perm[d]+m,g=this.perm[p],b=this.perm[p+1],j=this.perm[d+1]+m,y=this.perm[j],N=this.perm[j+1];return this.mix(this.mix(this.dot(this.grad3[g%12],i,r),this.dot(this.grad3[y%12],i-1,r),h),this.mix(this.dot(this.grad3[b%12],i,r-1),this.dot(this.grad3[N%12],i-1,r-1),h),f)}}function mp(){const n=u.useRef(null),i=u.useRef(null),r=u.useRef(void 0),d=u.useRef({mouse:{x:-10,y:0,lx:0,ly:0,sx:0,sy:0,v:0,vs:0,a:0,set:!1},lines:[],paths:[],noise:new Y0(Math.random()),bounding:null});return u.useEffect(()=>{const m=i.current,h=n.current;if(!m||!h)return;const f=d.current,p=()=>{const U=m.getBoundingClientRect();f.bounding=U,h.style.width=`${U.width}px`,h.style.height=`${U.height}px`},g=()=>{if(!f.bounding)return;const{width:U,height:O}=f.bounding;f.lines=[],f.paths.forEach(W=>W.remove()),f.paths=[];const B=10,I=32,L=U+200,M=O+30,Y=Math.ceil(L/B),Q=Math.ceil(M/I),z=(U-B*Y)/2,A=(O-I*Q)/2;for(let W=0;W<=Y;W++){const xe=[];for(let _e=0;_e<=Q;_e++){const pe={x:z+B*W,y:A+I*_e,wave:{x:0,y:0},cursor:{x:0,y:0,vx:0,vy:0}};xe.push(pe)}const be=document.createElementNS("http://www.w3.org/2000/svg","path");h.appendChild(be),f.paths.push(be),f.lines.push(xe)}},b=U=>{const{lines:O,mouse:B,noise:I}=f;O.forEach(L=>{L.forEach(M=>{const Y=I.perlin2((M.x+U*.0125)*.002,(M.y+U*.005)*.0015)*12;M.wave.x=Math.cos(Y)*32,M.wave.y=Math.sin(Y)*16;const Q=M.x-B.sx,z=M.y-B.sy,A=Math.hypot(Q,z),W=Math.max(175,B.vs);if(A<W){const xe=1-A/W,be=Math.cos(A*.001)*xe;M.cursor.vx+=Math.cos(B.a)*be*W*B.vs*65e-5,M.cursor.vy+=Math.sin(B.a)*be*W*B.vs*65e-5}M.cursor.vx+=(0-M.cursor.x)*.005,M.cursor.vy+=(0-M.cursor.y)*.005,M.cursor.vx*=.925,M.cursor.vy*=.925,M.cursor.x+=M.cursor.vx*2,M.cursor.y+=M.cursor.vy*2,M.cursor.x=Math.min(100,Math.max(-100,M.cursor.x)),M.cursor.y=Math.min(100,Math.max(-100,M.cursor.y))})})},j=(U,O=!0)=>{const B={x:U.x+U.wave.x+(O?U.cursor.x:0),y:U.y+U.wave.y+(O?U.cursor.y:0)};return B.x=Math.round(B.x*10)/10,B.y=Math.round(B.y*10)/10,B},y=()=>{const{lines:U,paths:O}=f;U.forEach((B,I)=>{let L=j(B[0],!1),M=`M ${L.x} ${L.y}`;B.forEach((Y,Q)=>{const z=Q===B.length-1;L=j(Y,!z),M+=`L ${L.x} ${L.y}`}),O[I].setAttribute("d",M)})},N=U=>{const{mouse:O}=f;O.sx+=(O.x-O.sx)*.1,O.sy+=(O.y-O.sy)*.1;const B=O.x-O.lx,I=O.y-O.ly,L=Math.hypot(B,I);O.v=L,O.vs+=(L-O.vs)*.1,O.vs=Math.min(100,O.vs),O.lx=O.x,O.ly=O.y,O.a=Math.atan2(I,B),m&&(m.style.setProperty("--x",`${O.sx}px`),m.style.setProperty("--y",`${O.sy}px`)),b(U),y(),r.current=requestAnimationFrame(N)},T=U=>{if(!f.bounding)return;const{mouse:O}=f;O.x=U.pageX-f.bounding.left,O.y=U.pageY-f.bounding.top+window.scrollY,O.set||(O.sx=O.x,O.sy=O.y,O.lx=O.x,O.ly=O.y,O.set=!0)},w=()=>{p(),g()};return p(),g(),window.addEventListener("resize",w),window.addEventListener("mousemove",T),r.current=requestAnimationFrame(N),()=>{window.removeEventListener("resize",w),window.removeEventListener("mousemove",T),r.current&&cancelAnimationFrame(r.current)}},[]),e.jsxs("div",{ref:i,className:"waves-background",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",overflow:"hidden",pointerEvents:"none"},children:[e.jsx("div",{className:"waves-cursor",style:{position:"absolute",top:0,left:0,width:"0.5rem",height:"0.5rem",background:"hsl(var(--primary) / 0.3)",borderRadius:"50%",transform:"translate3d(calc(var(--x, -0.5rem) - 50%), calc(var(--y, 50%) - 50%), 0)",willChange:"transform",pointerEvents:"none"}}),e.jsx("svg",{ref:n,style:{display:"block",width:"100%",height:"100%"},children:e.jsx("style",{children:`
          path {
            fill: none;
            stroke: hsl(var(--primary) / 0.20);
            stroke-width: 1px;
          }
        `})})]})}async function Se(n,i){const r={...i,credentials:"include",headers:{"Content-Type":"application/json",...i?.headers}},d=await fetch(n,r);if(d.status===401)throw window.location.href="/auth",new Error("");return d}function As(){return{"Content-Type":"application/json"}}async function X0(){try{await fetch("/api/webui/auth/logout",{method:"POST",credentials:"include"})}catch(n){console.error(":",n)}window.location.href="/auth"}async function Zu(){try{return(await(await fetch("/api/webui/auth/check",{method:"GET",credentials:"include"})).json()).authenticated===!0}catch{return!1}}function K0(){const[n,i]=u.useState(""),[r,d]=u.useState(!1),[m,h]=u.useState(""),[f,p]=u.useState(!0),g=ja(),{enableWavesBackground:b,setEnableWavesBackground:j}=Rg(),{theme:y,setTheme:N}=Ku();u.useEffect(()=>{(async()=>{try{await Zu()&&g({to:"/"})}catch{}finally{p(!1)}})()},[g]);const w=y==="system"?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":y,U=()=>{N(w==="dark"?"light":"dark")},O=async B=>{if(B.preventDefault(),h(""),!n.trim()){h(" Access Token");return}d(!0);try{const I=await fetch("/api/webui/auth/verify",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({token:n.trim()})}),L=await I.json();I.ok&&L.valid?L.is_first_setup?g({to:"/setup"}):g({to:"/"}):h(L.message||"Token ")}catch(I){console.error("Token :",I),h("")}finally{d(!1)}};return f?e.jsxs("div",{className:"relative flex min-h-screen items-center justify-center overflow-hidden bg-background p-4",children:[b&&e.jsx(mp,{}),e.jsx("div",{className:"text-muted-foreground",children:"..."})]}):e.jsxs("div",{className:"relative flex min-h-screen items-center justify-center overflow-hidden bg-background p-4",children:[b&&e.jsx(mp,{}),e.jsxs($e,{className:"relative z-10 w-full max-w-md shadow-2xl backdrop-blur-xl bg-card/80 border-border/50",children:[e.jsx("button",{onClick:U,className:"absolute right-4 top-4 rounded-lg p-2 hover:bg-accent transition-colors z-10 text-foreground",title:w==="dark"?"":"",children:w==="dark"?e.jsx(gg,{className:"h-5 w-5",strokeWidth:2.5,fill:"none"}):e.jsx(jg,{className:"h-5 w-5",strokeWidth:2.5,fill:"none"})}),e.jsxs(ss,{className:"space-y-4 text-center",children:[e.jsx("div",{className:"mx-auto flex h-16 w-16 items-center justify-center rounded-2xl bg-primary/10",children:e.jsx(Wf,{className:"h-8 w-8 text-primary",strokeWidth:2,fill:"none"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ts,{className:"text-2xl font-bold",children:" MaiBot"}),e.jsx(Ws,{className:"text-base",children:" Access Token "})]})]}),e.jsx(fs,{children:e.jsxs("form",{onSubmit:O,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"token",className:"text-sm font-medium",children:"Access Token"}),e.jsxs("div",{className:"relative",children:[e.jsx(vg,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground",strokeWidth:2,fill:"none"}),e.jsx(ne,{id:"token",type:"password",placeholder:" Access Token",value:n,onChange:B=>i(B.target.value),className:q("pl-10",m&&"border-red-500 focus-visible:ring-red-500"),disabled:r,autoFocus:!0,autoComplete:"off"})]})]}),m&&e.jsxs("div",{className:"flex items-center gap-2 rounded-md bg-red-50 p-3 text-sm text-red-600 dark:bg-red-950/50 dark:text-red-400",children:[e.jsx(zt,{className:"h-4 w-4 flex-shrink-0",strokeWidth:2,fill:"none"}),e.jsx("span",{children:m})]}),e.jsx(_,{type:"submit",className:"w-full",disabled:r,children:r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}),"..."]}):""}),e.jsxs(qs,{children:[e.jsx(Pu,{asChild:!0,children:e.jsxs("button",{className:"w-full text-center text-sm text-primary hover:text-primary/80 transition-colors underline-offset-4 hover:underline flex items-center justify-center gap-1",children:[e.jsx(bg,{className:"h-4 w-4",strokeWidth:2,fill:"none"})," Token Token"]})}),e.jsxs(Rs,{className:"sm:max-w-md",children:[e.jsxs(Ls,{children:[e.jsxs(Us,{className:"flex items-center gap-2",children:[e.jsx(Wf,{className:"h-5 w-5 text-primary",strokeWidth:2,fill:"none"})," Access Token"]}),e.jsx(Ks,{children:"Access Token  MaiBot WebUI "})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"rounded-lg border bg-muted/50 p-4 space-y-2",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ly,{className:"h-5 w-5 text-primary flex-shrink-0 mt-0.5",strokeWidth:2,fill:"none"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("h4",{className:"font-semibold text-sm",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:" MaiBot  WebUI Access Token"}),e.jsxs("div",{className:"rounded bg-background p-2 font-mono text-xs",children:[e.jsx("p",{className:"text-muted-foreground",children:" WebUI Access Token: abc123..."}),e.jsx("p",{className:"text-muted-foreground",children:"  Token  WebUI"})]})]})]})}),e.jsx("div",{className:"rounded-lg border bg-muted/50 p-4 space-y-2",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(wa,{className:"h-5 w-5 text-primary flex-shrink-0 mt-0.5",strokeWidth:2,fill:"none"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("h4",{className:"font-semibold text-sm",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Token "}),e.jsx("div",{className:"rounded bg-background p-2 font-mono text-xs break-all",children:e.jsx("code",{className:"text-primary",children:"data/webui.json"})}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[" ",e.jsx("code",{className:"px-1 py-0.5 bg-background rounded",children:"access_token"})," "]})]})]})}),e.jsx("div",{className:"rounded-lg border border-yellow-200 dark:border-yellow-900 bg-yellow-50 dark:bg-yellow-950/30 p-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(zt,{className:"h-4 w-4 text-yellow-600 dark:text-yellow-500 flex-shrink-0 mt-0.5",strokeWidth:2,fill:"none"}),e.jsxs("div",{className:"text-sm text-yellow-800 dark:text-yellow-300 space-y-1",children:[e.jsx("p",{className:"font-semibold",children:""}),e.jsxs("ul",{className:"list-disc list-inside space-y-0.5 text-xs",children:[e.jsx("li",{children:" Token"}),e.jsx("li",{children:" Token"})]})]})]})})]})]})]}),e.jsxs(ms,{children:[e.jsx(et,{asChild:!0,children:e.jsxs("button",{className:"w-full text-center text-sm text-muted-foreground hover:text-foreground transition-colors underline-offset-4 hover:underline flex items-center justify-center gap-1",children:[e.jsx(sn,{className:"h-4 w-4",strokeWidth:2,fill:"none"}),""]})}),e.jsxs(as,{children:[e.jsxs(ls,{children:[e.jsxs(is,{className:"flex items-center gap-2",children:[e.jsx(sn,{className:"h-5 w-5 text-primary",strokeWidth:2,fill:"none"}),""]}),e.jsx(rs,{children:""})]}),e.jsx("div",{className:"rounded-lg border bg-muted/50 p-4 space-y-2",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:""})}),e.jsxs(ns,{children:[e.jsx(os,{children:""}),e.jsx(cs,{onClick:()=>j(!1),children:""})]})]})]})]})})]}),e.jsx("div",{className:"absolute bottom-4 left-0 right-0 text-center text-xs text-muted-foreground",children:e.jsx("p",{children:M0})})]})}const Ms=u.forwardRef(({className:n,...i},r)=>e.jsx("textarea",{className:q("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:r,...i}));Ms.displayName="Textarea";const hr=u.forwardRef(({className:n,orientation:i="horizontal",decorative:r=!0,...d},m)=>e.jsx(Vp,{ref:m,decorative:r,orientation:i,className:q("shrink-0 bg-border",i==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",n),...d}));hr.displayName=Vp.displayName;function J0({config:n,onChange:i}){const r=m=>{m.trim()&&!n.alias_names.includes(m.trim())&&i({...n,alias_names:[...n.alias_names,m.trim()]})},d=m=>{i({...n,alias_names:n.alias_names.filter((h,f)=>f!==m)})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(S,{htmlFor:"qq_account",children:"QQ *"}),e.jsx(ne,{id:"qq_account",type:"number",placeholder:"QQ",value:n.qq_account||"",onChange:m=>i({...n,qq_account:Number(m.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"QQ"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(S,{htmlFor:"nickname",children:" *"}),e.jsx(ne,{id:"nickname",placeholder:"",value:n.nickname,onChange:m=>i({...n,nickname:m.target.value})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(S,{children:""}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:n.alias_names.map((m,h)=>e.jsxs(qe,{variant:"secondary",className:"gap-1",children:[m,e.jsx("button",{type:"button",onClick:()=>d(h),className:"ml-1 hover:text-destructive",children:e.jsx(il,{className:"h-3 w-3"})})]},h))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ne,{id:"alias_input",placeholder:"",onKeyPress:m=>{m.key==="Enter"&&(r(m.target.value),m.target.value="")}}),e.jsx(_,{type:"button",variant:"outline",onClick:()=>{const m=document.getElementById("alias_input");m&&(r(m.value),m.value="")},children:""})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})]})}function P0({config:n,onChange:i}){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(S,{htmlFor:"personality",children:" *"}),e.jsx(Ms,{id:"personality",placeholder:"120",value:n.personality,onChange:r=>i({...n,personality:r.target.value}),rows:3}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(S,{htmlFor:"reply_style",children:" *"}),e.jsx(Ms,{id:"reply_style",placeholder:"",value:n.reply_style,onChange:r=>i({...n,reply_style:r.target.value}),rows:3}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(S,{htmlFor:"interest",children:" *"}),e.jsx(Ms,{id:"interest",placeholder:"",value:n.interest,onChange:r=>i({...n,interest:r.target.value}),rows:2}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsx(hr,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(S,{htmlFor:"plan_style",children:" *"}),e.jsx(Ms,{id:"plan_style",placeholder:"",value:n.plan_style,onChange:r=>i({...n,plan_style:r.target.value}),rows:4}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(S,{htmlFor:"private_plan_style",children:" *"}),e.jsx(Ms,{id:"private_plan_style",placeholder:"",value:n.private_plan_style,onChange:r=>i({...n,private_plan_style:r.target.value}),rows:3}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})]})}function Z0({config:n,onChange:i}){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(S,{htmlFor:"emoji_chance",children:""}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[(n.emoji_chance*100).toFixed(0),"%"]})]}),e.jsx(ne,{id:"emoji_chance",type:"range",min:"0",max:"1",step:"0.1",value:n.emoji_chance,onChange:r=>i({...n,emoji_chance:Number(r.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(S,{htmlFor:"max_reg_num",children:""}),e.jsx(ne,{id:"max_reg_num",type:"number",min:"1",max:"200",value:n.max_reg_num,onChange:r=>i({...n,max_reg_num:Number(r.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(S,{htmlFor:"do_replace",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsx(Ge,{id:"do_replace",checked:n.do_replace,onCheckedChange:r=>i({...n,do_replace:r})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(S,{htmlFor:"check_interval",children:""}),e.jsx(ne,{id:"check_interval",type:"number",min:"1",max:"120",value:n.check_interval,onChange:r=>i({...n,check_interval:Number(r.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsx(hr,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(S,{htmlFor:"steal_emoji",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsx(Ge,{id:"steal_emoji",checked:n.steal_emoji,onCheckedChange:r=>i({...n,steal_emoji:r})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(S,{htmlFor:"content_filtration",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsx(Ge,{id:"content_filtration",checked:n.content_filtration,onCheckedChange:r=>i({...n,content_filtration:r})})]}),n.content_filtration&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(S,{htmlFor:"filtration_prompt",children:""}),e.jsx(ne,{id:"filtration_prompt",placeholder:"",value:n.filtration_prompt,onChange:r=>i({...n,filtration_prompt:r.target.value})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})]})}function W0({config:n,onChange:i}){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(S,{htmlFor:"enable_tool",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsx(Ge,{id:"enable_tool",checked:n.enable_tool,onCheckedChange:r=>i({...n,enable_tool:r})})]}),e.jsx(hr,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(S,{htmlFor:"enable_mood",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsx(Ge,{id:"enable_mood",checked:n.enable_mood,onCheckedChange:r=>i({...n,enable_mood:r})})]}),n.enable_mood&&e.jsxs("div",{className:"ml-6 space-y-6 border-l-2 border-primary/20 pl-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(S,{htmlFor:"mood_update_threshold",children:""}),e.jsx(ne,{id:"mood_update_threshold",type:"number",min:"0.1",max:"10",step:"0.1",value:n.mood_update_threshold||1,onChange:r=>i({...n,mood_update_threshold:Number(r.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(S,{htmlFor:"emotion_style",children:""}),e.jsx(Ms,{id:"emotion_style",placeholder:"",value:n.emotion_style||"",onChange:r=>i({...n,emotion_style:r.target.value}),rows:2}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})]}),e.jsx(hr,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(S,{htmlFor:"all_global",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsx(Ge,{id:"all_global",checked:n.all_global,onCheckedChange:r=>i({...n,all_global:r})})]})]})}function ew({config:n,onChange:i}){const[r,d]=u.useState(!1);return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"rounded-lg bg-blue-50 dark:bg-blue-950/30 border border-blue-200 dark:border-blue-800 p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-0.5",children:e.jsx("svg",{className:"h-5 w-5 text-blue-600 dark:text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{className:"flex-1 text-sm",children:[e.jsx("p",{className:"font-medium text-blue-900 dark:text-blue-100 mb-1",children:" (SiliconFlow)"}),e.jsx("p",{className:"text-blue-700 dark:text-blue-300 mb-2",children:" DeepSeek V3Qwen  API Key "}),e.jsxs("a",{href:"https://cloud.siliconflow.cn",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-blue-600 dark:text-blue-400 hover:underline font-medium",children:[" API Key",e.jsx(qc,{className:"h-3 w-3"})]})]})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(S,{htmlFor:"siliconflow_api_key",children:"SiliconFlow API Key *"}),e.jsxs("div",{className:"relative",children:[e.jsx(ne,{id:"siliconflow_api_key",type:r?"text":"password",placeholder:"sk-...",value:n.api_key,onChange:m=>i({api_key:m.target.value}),className:"font-mono pr-10"}),e.jsx(_,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 hover:bg-transparent",onClick:()=>d(!r),children:r?e.jsx(or,{className:"h-4 w-4 text-muted-foreground"}):e.jsx(Ot,{className:"h-4 w-4 text-muted-foreground"})})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" API "})]}),e.jsxs("div",{className:"rounded-lg bg-muted/50 p-4 text-sm space-y-2",children:[e.jsx("p",{className:"font-medium",children:""}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-muted-foreground ml-2",children:[e.jsx("li",{children:"DeepSeek V3 - "}),e.jsx("li",{children:"Qwen3 30B - "}),e.jsx("li",{children:"Qwen3 VL 30B - "}),e.jsx("li",{children:"SenseVoice - "}),e.jsx("li",{children:"BGE-M3 - "}),e.jsx("li",{children:" (LPMM)"})]})]}),e.jsx("div",{className:"rounded-lg border border-amber-200 dark:border-amber-800 bg-amber-50 dark:bg-amber-950/30 p-4",children:e.jsxs("p",{className:"text-sm text-amber-900 dark:text-amber-100",children:[e.jsx("span",{className:"font-medium",children:" "}),'"  " API ']})})]})}async function sw(){const n=await Se("/api/webui/config/bot",{method:"GET",headers:As()});if(!n.ok)throw new Error("Bot");const r=(await n.json()).config.bot||{};return{qq_account:r.qq_account||0,nickname:r.nickname||"",alias_names:r.alias_names||[]}}async function tw(){const n=await Se("/api/webui/config/bot",{method:"GET",headers:As()});if(!n.ok)throw new Error("");const r=(await n.json()).config.personality||{};return{personality:r.personality||"",reply_style:r.reply_style||"",interest:r.interest||"",plan_style:r.plan_style||"",private_plan_style:r.private_plan_style||""}}async function aw(){const n=await Se("/api/webui/config/bot",{method:"GET",headers:As()});if(!n.ok)throw new Error("");const r=(await n.json()).config.emoji||{};return{emoji_chance:r.emoji_chance??.4,max_reg_num:r.max_reg_num??40,do_replace:r.do_replace??!0,check_interval:r.check_interval??10,steal_emoji:r.steal_emoji??!0,content_filtration:r.content_filtration??!1,filtration_prompt:r.filtration_prompt||""}}async function lw(){const n=await Se("/api/webui/config/bot",{method:"GET",headers:As()});if(!n.ok)throw new Error("");const r=(await n.json()).config,d=r.tool||{},m=r.mood||{},h=r.jargon||{};return{enable_tool:d.enable_tool??!0,enable_mood:m.enable_mood??!1,mood_update_threshold:m.mood_update_threshold,emotion_style:m.emotion_style,all_global:h.all_global??!0}}async function nw(){const n=await Se("/api/webui/config/model",{method:"GET",headers:As()});if(!n.ok)throw new Error("");return{api_key:((await n.json()).config.api_providers||[]).find(h=>h.name==="SiliconFlow")?.api_key||""}}async function iw(n){const i=await Se("/api/webui/config/bot/section/bot",{method:"POST",headers:As(),body:JSON.stringify(n)});if(!i.ok){const r=await i.json();throw new Error(r.detail||"Bot")}return await i.json()}async function rw(n){const i=await Se("/api/webui/config/bot/section/personality",{method:"POST",headers:As(),body:JSON.stringify(n)});if(!i.ok){const r=await i.json();throw new Error(r.detail||"")}return await i.json()}async function cw(n){const i=await Se("/api/webui/config/bot/section/emoji",{method:"POST",headers:As(),body:JSON.stringify(n)});if(!i.ok){const r=await i.json();throw new Error(r.detail||"")}return await i.json()}async function ow(n){const i=[];i.push(Se("/api/webui/config/bot/section/tool",{method:"POST",headers:As(),body:JSON.stringify({enable_tool:n.enable_tool})})),i.push(Se("/api/webui/config/bot/section/jargon",{method:"POST",headers:As(),body:JSON.stringify({all_global:n.all_global})}));const r={enable_mood:n.enable_mood};n.enable_mood&&(r.mood_update_threshold=n.mood_update_threshold||1,r.emotion_style=n.emotion_style||""),i.push(Se("/api/webui/config/bot/section/mood",{method:"POST",headers:As(),body:JSON.stringify(r)}));const d=await Promise.all(i);for(const m of d)if(!m.ok){const h=await m.json();throw new Error(h.detail||"")}return{success:!0}}async function dw(n){const i=await Se("/api/webui/config/model",{method:"GET",headers:As()});if(!i.ok)throw new Error("");const d=(await i.json()).config,m=d.api_providers||[],h=m.findIndex(g=>g.name==="SiliconFlow");h>=0?m[h]={...m[h],api_key:n.api_key}:m.push({name:"SiliconFlow",base_url:"https://api.siliconflow.cn/v1",api_key:n.api_key,client_type:"openai",max_retry:3,timeout:120,retry_interval:5});const f={...d,api_providers:m},p=await Se("/api/webui/config/model",{method:"POST",headers:As(),body:JSON.stringify(f)});if(!p.ok){const g=await p.json();throw new Error(g.detail||"")}return await p.json()}async function hp(){const n=localStorage.getItem("access-token"),i=await Se("/api/webui/setup/complete",{method:"POST",headers:{Authorization:`Bearer ${n}`}});if(!i.ok){const r=await i.json();throw new Error(r.message||"")}return await i.json()}async function Wc(){const n=await Se("/api/webui/system/restart",{method:"POST",headers:As()});if(!n.ok){const i=await n.json();throw new Error(i.detail||"")}return await n.json()}async function Hg(){const n=await Se("/api/webui/system/status",{method:"GET",headers:As()});if(!n.ok){const i=await n.json();throw new Error(i.detail||"")}return await n.json()}function uw(){const n=ja(),{toast:i}=Bs(),[r,d]=u.useState(0),[m,h]=u.useState(!1),[f,p]=u.useState(!1),[g,b]=u.useState(!0),[j,y]=u.useState({qq_account:0,nickname:"",alias_names:[]}),[N,T]=u.useState({personality:"",reply_style:"",interest:"",plan_style:`1.****action****
2.
3.
4.
5.`,private_plan_style:`1.****action****
2.
3.`}),[w,U]=u.useState({emoji_chance:.4,max_reg_num:40,do_replace:!0,check_interval:10,steal_emoji:!0,content_filtration:!1,filtration_prompt:""}),[O,B]=u.useState({enable_tool:!0,enable_mood:!1,mood_update_threshold:1,emotion_style:"",all_global:!0}),[I,L]=u.useState({api_key:""}),[M,Y]=u.useState(!1),[Q,z]=u.useState(""),A=[{id:"bot-basic",title:"Bot",description:"",icon:ar},{id:"personality",title:"",description:"",icon:Ic},{id:"emoji",title:"",description:"",icon:Iu},{id:"other",title:"",description:"",icon:ti},{id:"siliconflow",title:"API",description:"API",icon:vg}],W=(r+1)/A.length*100;u.useEffect(()=>{(async()=>{try{b(!0);const[X,C,$,k,ce]=await Promise.all([sw(),tw(),aw(),lw(),nw()]);y(X),T(C),U($),B(k),L(ce)}catch(X){i({title:"",description:X instanceof Error?X.message:"",variant:"destructive"})}finally{b(!1)}})()},[i]);const xe=async()=>{p(!0);try{switch(r){case 0:await iw(j);break;case 1:await rw(N);break;case 2:await cw(w);break;case 3:await ow(O);break;case 4:await dw(I);break}return i({title:"",description:`${A[r].title}`}),!0}catch(R){return i({title:"",description:R instanceof Error?R.message:"",variant:"destructive"}),!1}finally{p(!1)}},be=async()=>{await xe()&&r<A.length-1&&d(r+1)},_e=()=>{r>0&&d(r-1)},pe=async()=>{h(!0),Y(!0);try{if(z("API..."),!await xe()){h(!1),Y(!1);return}z("..."),await hp(),z("..."),await Wc(),i({title:"",description:"..."}),z("...");const X=60;let C=0,$=!1;for(;C<X&&!$;){await new Promise(k=>setTimeout(k,1e3));try{(await Hg()).running&&($=!0,z("..."))}catch{C++}}if(!$)throw new Error(",");setTimeout(()=>{n({to:"/"})},1e3)}catch(R){Y(!1),i({title:"",description:R instanceof Error?R.message:"",variant:"destructive"})}finally{h(!1)}},ye=async()=>{try{await hp(),n({to:"/"})}catch(R){i({title:"",description:R instanceof Error?R.message:"",variant:"destructive"})}},we=()=>{switch(r){case 0:return e.jsx(J0,{config:j,onChange:y});case 1:return e.jsx(P0,{config:N,onChange:T});case 2:return e.jsx(Z0,{config:w,onChange:U});case 3:return e.jsx(W0,{config:O,onChange:B});case 4:return e.jsx(ew,{config:I,onChange:L});default:return null}};return e.jsxs("div",{className:"relative flex min-h-screen flex-col items-center justify-center overflow-hidden bg-gradient-to-br from-primary/5 via-background to-secondary/5 p-4 md:p-6",children:[M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-background/80 backdrop-blur-sm",children:e.jsxs("div",{className:"mx-auto flex max-w-md flex-col items-center space-y-6 rounded-lg border bg-card p-8 text-center shadow-lg",children:[e.jsx("div",{className:"flex h-20 w-20 items-center justify-center rounded-full bg-primary/10",children:e.jsx(st,{className:"h-10 w-10 animate-spin text-primary"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-2xl font-bold",children:""}),e.jsx("p",{className:"text-muted-foreground",children:Q})]}),e.jsx("div",{className:"w-full",children:e.jsx("div",{className:"h-2 w-full overflow-hidden rounded-full bg-secondary",children:e.jsx("div",{className:"h-full w-full animate-pulse bg-primary",style:{animation:"pulse 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite"}})})}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"..."})]})}),e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute left-1/4 top-1/4 h-64 w-64 md:h-96 md:w-96 rounded-full bg-primary/5 blur-3xl"}),e.jsx("div",{className:"absolute right-1/4 bottom-1/4 h-64 w-64 md:h-96 md:w-96 rounded-full bg-secondary/5 blur-3xl"})]}),g?e.jsxs("div",{className:"relative z-10 text-center",children:[e.jsx("div",{className:"mx-auto mb-4 flex h-16 w-16 items-center justify-center",children:e.jsx("div",{className:"h-12 w-12 animate-spin rounded-full border-4 border-primary border-t-transparent"})}),e.jsx("p",{className:"text-lg font-medium",children:"..."}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:""})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative z-10 w-full max-w-4xl",children:[e.jsxs("div",{className:"mb-6 md:mb-8 text-center",children:[e.jsx("div",{className:"mx-auto mb-4 flex h-12 w-12 md:h-16 md:w-16 items-center justify-center rounded-2xl bg-primary/10",children:e.jsx(ny,{className:"h-6 w-6 md:h-8 md:w-8 text-primary",strokeWidth:2,fill:"none"})}),e.jsx("h1",{className:"mb-2 text-2xl md:text-3xl font-bold",children:""}),e.jsxs("p",{className:"text-sm md:text-base text-muted-foreground",children:[" ",Ju," "]})]}),e.jsxs("div",{className:"mb-6 md:mb-8",children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between text-xs md:text-sm",children:[e.jsxs("span",{className:"text-muted-foreground",children:[" ",r+1," / ",A.length]}),e.jsxs("span",{className:"font-medium text-primary",children:[Math.round(W),"%"]})]}),e.jsx(ni,{value:W,className:"h-2"})]}),e.jsx("div",{className:"mb-6 md:mb-8 flex justify-between",children:A.map((R,X)=>{const C=R.icon;return e.jsxs("div",{className:q("flex flex-1 flex-col items-center gap-1 md:gap-2",X<A.length-1&&"relative"),children:[X<A.length-1&&e.jsx("div",{className:q("absolute left-1/2 top-3 md:top-4 h-0.5 w-full",X<r?"bg-primary":"bg-border")}),e.jsx("div",{className:q("relative z-10 flex h-6 w-6 md:h-8 md:w-8 items-center justify-center rounded-full border-2 transition-all",X===r||X<r?"border-primary bg-primary text-primary-foreground":"border-border bg-background text-muted-foreground"),children:X<r?e.jsx(ta,{className:"h-3 w-3 md:h-4 md:w-4",strokeWidth:2.5,fill:"none"}):e.jsx(C,{className:"h-3 w-3 md:h-4 md:w-4"})}),e.jsx("span",{className:q("text-[10px] md:text-xs text-center max-w-[60px] md:max-w-none truncate md:whitespace-normal",X===r?"font-medium text-foreground":"text-muted-foreground"),title:R.title,children:R.title})]},R.id)})}),e.jsx($e,{className:"mb-6 md:mb-8 shadow-lg",children:e.jsx(fs,{className:"p-4 md:p-8",children:e.jsxs("div",{className:"min-h-[300px] md:min-h-[400px]",children:[e.jsxs("div",{className:"mb-4 md:mb-6",children:[e.jsx("h2",{className:"mb-2 text-xl md:text-2xl font-semibold",children:A[r].title}),e.jsx("p",{className:"text-sm md:text-base text-muted-foreground",children:A[r].description})]}),e.jsx(Ke,{className:"h-[400px] md:h-[500px]",children:e.jsx("div",{className:"pr-2",children:we()})})]})})}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-3 sm:gap-0",children:[e.jsx(_,{variant:"outline",onClick:_e,disabled:r===0||f,className:"w-full sm:w-auto order-2 sm:order-1",children:""}),e.jsxs("div",{className:"flex gap-2 w-full sm:w-auto order-1 sm:order-2",children:[e.jsxs(ms,{children:[e.jsx(et,{asChild:!0,children:e.jsxs(_,{variant:"ghost",className:"flex-1 sm:flex-none gap-2",disabled:f||m,children:[e.jsx(iy,{className:"h-4 w-4",strokeWidth:2,fill:"none"}),""]})}),e.jsxs(as,{children:[e.jsxs(ls,{children:[e.jsx(is,{children:""}),e.jsx(rs,{children:""})]}),e.jsxs(ns,{children:[e.jsx(os,{children:""}),e.jsx(cs,{onClick:ye,children:""})]})]})]}),r===A.length-1?e.jsx(_,{onClick:pe,disabled:m||f,className:"flex-1 sm:flex-none",children:m||f?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}),f?"...":"..."]}):e.jsxs(e.Fragment,{children:["",e.jsx(ta,{className:"ml-2 h-4 w-4",strokeWidth:2,fill:"none"})]})}):e.jsx(_,{onClick:be,disabled:f,className:"flex-1 sm:flex-none",children:f?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}),"..."]}):e.jsxs(e.Fragment,{children:["",e.jsx(ry,{className:"ml-2 h-4 w-4",strokeWidth:2,fill:"none"})]})})]})]})]}),e.jsx("div",{className:"relative z-10 mt-6 md:mt-8 text-center text-xs text-muted-foreground",children:e.jsx("p",{children:""})})]})]})}function qg(){const n=ja();return e.jsx("div",{className:"flex min-h-screen items-center justify-center bg-background p-4",children:e.jsxs("div",{className:"w-full max-w-2xl text-center",children:[e.jsxs("div",{className:"relative mb-8",children:[e.jsx("h1",{className:"text-[150px] font-black leading-none text-primary/10 select-none sm:text-[200px]",children:"404"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx(Mt,{className:"h-20 w-20 text-primary/30 sm:h-24 sm:w-24"})})]}),e.jsxs("div",{className:"space-y-4 mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground sm:text-3xl",children:""}),e.jsx("p",{className:"text-base text-muted-foreground sm:text-lg max-w-md mx-auto",children:" URL "})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[e.jsxs(_,{size:"lg",onClick:()=>n({to:"/"}),className:"gap-2 w-full sm:w-auto",children:[e.jsx(Pc,{className:"h-4 w-4"}),""]}),e.jsxs(_,{size:"lg",variant:"outline",onClick:()=>window.history.back(),className:"gap-2 w-full sm:w-auto",children:[e.jsx(Wn,{className:"h-4 w-4"}),""]})]}),e.jsx("div",{className:"mt-12 pt-8 border-t border-border",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:""})})]})})}const mw=pt.memo(function({config:i,onChange:r}){const d=()=>{r({...i,platforms:[...i.platforms,""]})},m=b=>{r({...i,platforms:i.platforms.filter((j,y)=>y!==b)})},h=(b,j)=>{const y=[...i.platforms];y[b]=j,r({...i,platforms:y})},f=()=>{r({...i,alias_names:[...i.alias_names,""]})},p=b=>{r({...i,alias_names:i.alias_names.filter((j,y)=>y!==b)})},g=(b,j)=>{const y=[...i.alias_names];y[b]=j,r({...i,alias_names:y})};return e.jsx("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:""}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"platform",children:""}),e.jsx(ne,{id:"platform",value:i.platform,onChange:b=>r({...i,platform:b.target.value}),placeholder:"qq"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"qq_account",children:"QQ"}),e.jsx(ne,{id:"qq_account",value:i.qq_account,onChange:b=>r({...i,qq_account:b.target.value}),placeholder:"123456789"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"nickname",children:""}),e.jsx(ne,{id:"nickname",value:i.nickname,onChange:b=>r({...i,nickname:b.target.value}),placeholder:""})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(S,{children:""}),e.jsxs(_,{onClick:d,size:"sm",variant:"outline",children:[e.jsx(rt,{className:"h-4 w-4 mr-1"}),""]})]}),e.jsxs("div",{className:"space-y-2",children:[i.platforms.map((b,j)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ne,{value:b,onChange:y=>h(j,y.target.value),placeholder:"wx:114514"}),e.jsxs(ms,{children:[e.jsx(et,{asChild:!0,children:e.jsx(_,{size:"icon",variant:"outline",children:e.jsx(Pe,{className:"h-4 w-4"})})}),e.jsxs(as,{children:[e.jsxs(ls,{children:[e.jsx(is,{children:""}),e.jsxs(rs,{children:[' "',b||"()",'" ']})]}),e.jsxs(ns,{children:[e.jsx(os,{children:""}),e.jsx(cs,{onClick:()=>m(j),children:""})]})]})]})]},j)),i.platforms.length===0&&e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(S,{children:""}),e.jsxs(_,{onClick:f,size:"sm",variant:"outline",children:[e.jsx(rt,{className:"h-4 w-4 mr-1"}),""]})]}),e.jsxs("div",{className:"space-y-2",children:[i.alias_names.map((b,j)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ne,{value:b,onChange:y=>g(j,y.target.value),placeholder:""}),e.jsxs(ms,{children:[e.jsx(et,{asChild:!0,children:e.jsx(_,{size:"icon",variant:"outline",children:e.jsx(Pe,{className:"h-4 w-4"})})}),e.jsxs(as,{children:[e.jsxs(ls,{children:[e.jsx(is,{children:""}),e.jsxs(rs,{children:[' "',b||"()",'" ']})]}),e.jsxs(ns,{children:[e.jsx(os,{children:""}),e.jsx(cs,{onClick:()=>p(j),children:""})]})]})]})]},j)),i.alias_names.length===0&&e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]})]})]})]})})}),hw=pt.memo(function({config:i,onChange:r}){const d=()=>{r({...i,states:[...i.states,""]})},m=f=>{r({...i,states:i.states.filter((p,g)=>g!==f)})},h=(f,p)=>{const g=[...i.states];g[f]=p,r({...i,states:g})};return e.jsx("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:""}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"personality",children:""}),e.jsx(Ms,{id:"personality",value:i.personality,onChange:f=>r({...i,personality:f.target.value}),placeholder:"120",rows:3}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"120"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"reply_style",children:""}),e.jsx(Ms,{id:"reply_style",value:i.reply_style,onChange:f=>r({...i,reply_style:f.target.value}),placeholder:"",rows:3})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"interest",children:""}),e.jsx(Ms,{id:"interest",value:i.interest,onChange:f=>r({...i,interest:f.target.value}),placeholder:"",rows:2})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"plan_style",children:""}),e.jsx(Ms,{id:"plan_style",value:i.plan_style,onChange:f=>r({...i,plan_style:f.target.value}),placeholder:"",rows:5})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"visual_style",children:""}),e.jsx(Ms,{id:"visual_style",value:i.visual_style,onChange:f=>r({...i,visual_style:f.target.value}),placeholder:"",rows:3})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"private_plan_style",children:""}),e.jsx(Ms,{id:"private_plan_style",value:i.private_plan_style,onChange:f=>r({...i,private_plan_style:f.target.value}),placeholder:"",rows:4})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(S,{children:""}),e.jsxs(_,{onClick:d,size:"sm",variant:"outline",children:[e.jsx(rt,{className:"h-4 w-4 mr-1"}),""]})]}),e.jsx("div",{className:"space-y-2",children:i.states.map((f,p)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ms,{value:f,onChange:g=>h(p,g.target.value),placeholder:"",rows:2}),e.jsxs(ms,{children:[e.jsx(et,{asChild:!0,children:e.jsx(_,{size:"icon",variant:"outline",children:e.jsx(Pe,{className:"h-4 w-4"})})}),e.jsxs(as,{children:[e.jsxs(ls,{children:[e.jsx(is,{children:""}),e.jsx(rs,{children:""})]}),e.jsxs(ns,{children:[e.jsx(os,{children:""}),e.jsx(cs,{onClick:()=>m(p),children:""})]})]})]})]},p))})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"state_probability",children:""}),e.jsx(ne,{id:"state_probability",type:"number",step:"0.1",min:"0",max:"1",value:i.state_probability,onChange:f=>r({...i,state_probability:parseFloat(f.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" personality 0.0-1.0"})]})]})]})})}),Oe=UN,Re=BN,Ae=u.forwardRef(({className:n,children:i,...r},d)=>e.jsxs(eg,{ref:d,className:q("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",n),...r,children:[i,e.jsx(AN,{asChild:!0,children:e.jsx(Ol,{className:"h-4 w-4 opacity-50"})})]}));Ae.displayName=eg.displayName;const Gg=u.forwardRef(({className:n,...i},r)=>e.jsx(sg,{ref:r,className:q("flex cursor-default items-center justify-center py-1",n),...i,children:e.jsx(ur,{className:"h-4 w-4"})}));Gg.displayName=sg.displayName;const Fg=u.forwardRef(({className:n,...i},r)=>e.jsx(tg,{ref:r,className:q("flex cursor-default items-center justify-center py-1",n),...i,children:e.jsx(Ol,{className:"h-4 w-4"})}));Fg.displayName=tg.displayName;const De=u.forwardRef(({className:n,children:i,position:r="popper",...d},m)=>e.jsx(DN,{children:e.jsxs(ag,{ref:m,className:q("relative z-[100] max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-hidden rounded-md border border-border bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:r,...d,children:[e.jsx(Gg,{}),e.jsx(ON,{className:q("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:i}),e.jsx(Fg,{})]})}));De.displayName=ag.displayName;const xw=u.forwardRef(({className:n,...i},r)=>e.jsx(lg,{ref:r,className:q("px-2 py-1.5 text-sm font-semibold",n),...i}));xw.displayName=lg.displayName;const te=u.forwardRef(({className:n,children:i,...r},d)=>e.jsxs(ng,{ref:d,className:q("relative flex w-full cursor-default select-none items-center rounded-sm py-2 pl-2 pr-8 text-sm outline-none bg-white dark:bg-gray-900 hover:bg-gray-100 dark:hover:bg-gray-800 focus:bg-gray-100 dark:focus:bg-gray-800 data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...r,children:[e.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(RN,{children:e.jsx(Vt,{className:"h-4 w-4"})})}),e.jsx(LN,{children:i})]}));te.displayName=ng.displayName;const fw=u.forwardRef(({className:n,...i},r)=>e.jsx(ig,{ref:r,className:q("-mx-1 my-1 h-px bg-muted",n),...i}));fw.displayName=ig.displayName;const Ra=mN,La=hN,Ca=u.forwardRef(({className:n,align:i="center",sideOffset:r=4,...d},m)=>e.jsx(uN,{children:e.jsx($p,{ref:m,align:i,sideOffset:r,className:q("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",n),...d})}));Ca.displayName=$p.displayName;const pw=pt.memo(function({value:i,onChange:r}){const[d,m]=u.useState("00"),[h,f]=u.useState("00"),[p,g]=u.useState("23"),[b,j]=u.useState("59");u.useEffect(()=>{const N=i.split("-");if(N.length===2){const[T,w]=N,[U,O]=T.split(":"),[B,I]=w.split(":");U&&m(U.padStart(2,"0")),O&&f(O.padStart(2,"0")),B&&g(B.padStart(2,"0")),I&&j(I.padStart(2,"0"))}},[i]);const y=(N,T,w,U)=>{const O=`${N}:${T}-${w}:${U}`;r(O)};return e.jsxs(Ra,{children:[e.jsx(La,{asChild:!0,children:e.jsxs(_,{variant:"outline",className:"w-full justify-start font-mono text-sm",children:[e.jsx(Pn,{className:"h-4 w-4 mr-2"}),i||""]})}),e.jsx(Ca,{className:"w-72 sm:w-80",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm mb-3",children:""}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:gap-3",children:[e.jsxs("div",{children:[e.jsx(S,{className:"text-xs",children:""}),e.jsxs(Oe,{value:d,onValueChange:N=>{m(N),y(N,h,p,b)},children:[e.jsx(Ae,{children:e.jsx(Re,{})}),e.jsx(De,{children:Array.from({length:24},(N,T)=>T).map(N=>e.jsx(te,{value:N.toString().padStart(2,"0"),children:N.toString().padStart(2,"0")},N))})]})]}),e.jsxs("div",{children:[e.jsx(S,{className:"text-xs",children:""}),e.jsxs(Oe,{value:h,onValueChange:N=>{f(N),y(d,N,p,b)},children:[e.jsx(Ae,{children:e.jsx(Re,{})}),e.jsx(De,{children:Array.from({length:60},(N,T)=>T).map(N=>e.jsx(te,{value:N.toString().padStart(2,"0"),children:N.toString().padStart(2,"0")},N))})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm mb-3",children:""}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:gap-3",children:[e.jsxs("div",{children:[e.jsx(S,{className:"text-xs",children:""}),e.jsxs(Oe,{value:p,onValueChange:N=>{g(N),y(d,h,N,b)},children:[e.jsx(Ae,{children:e.jsx(Re,{})}),e.jsx(De,{children:Array.from({length:24},(N,T)=>T).map(N=>e.jsx(te,{value:N.toString().padStart(2,"0"),children:N.toString().padStart(2,"0")},N))})]})]}),e.jsxs("div",{children:[e.jsx(S,{className:"text-xs",children:""}),e.jsxs(Oe,{value:b,onValueChange:N=>{j(N),y(d,h,p,N)},children:[e.jsx(Ae,{children:e.jsx(Re,{})}),e.jsx(De,{children:Array.from({length:60},(N,T)=>T).map(N=>e.jsx(te,{value:N.toString().padStart(2,"0"),children:N.toString().padStart(2,"0")},N))})]})]})]})]})]})})]})}),gw=pt.memo(function({rule:i}){const r=`{ target = "${i.target}", time = "${i.time}", value = ${i.value.toFixed(1)} }`;return e.jsxs(Ra,{children:[e.jsx(La,{asChild:!0,children:e.jsxs(_,{variant:"outline",size:"sm",children:[e.jsx(Ot,{className:"h-4 w-4 mr-1"}),""]})}),e.jsx(Ca,{className:"w-80 sm:w-96",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-sm",children:""}),e.jsx("div",{className:"rounded-md bg-muted p-3 font-mono text-xs break-all",children:r}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" bot_config.toml "})]})})]})}),jw=pt.memo(function({config:i,onChange:r}){const d=()=>{r({...i,talk_value_rules:[...i.talk_value_rules,{target:"",time:"00:00-23:59",value:1}]})},m=f=>{r({...i,talk_value_rules:i.talk_value_rules.filter((p,g)=>g!==f)})},h=(f,p,g)=>{const b=[...i.talk_value_rules];b[f]={...b[f],[p]:g},r({...i,talk_value_rules:b})};return e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:""}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"talk_value",children:""}),e.jsx(ne,{id:"talk_value",type:"number",step:"0.1",min:"0",max:"1",value:i.talk_value,onChange:f=>r({...i,talk_value:parseFloat(f.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" 0-1"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{id:"mentioned_bot_reply",checked:i.mentioned_bot_reply,onCheckedChange:f=>r({...i,mentioned_bot_reply:f})}),e.jsx(S,{htmlFor:"mentioned_bot_reply",className:"cursor-pointer",children:""})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"max_context_size",children:""}),e.jsx(ne,{id:"max_context_size",type:"number",min:"1",value:i.max_context_size,onChange:f=>r({...i,max_context_size:parseInt(f.target.value)})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"planner_smooth",children:""}),e.jsx(ne,{id:"planner_smooth",type:"number",step:"1",min:"0",value:i.planner_smooth,onChange:f=>r({...i,planner_smooth:parseFloat(f.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" planner  1-50 "})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{id:"enable_talk_value_rules",checked:i.enable_talk_value_rules,onCheckedChange:f=>r({...i,enable_talk_value_rules:f})}),e.jsx(S,{htmlFor:"enable_talk_value_rules",className:"cursor-pointer",children:""})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{id:"include_planner_reasoning",checked:i.include_planner_reasoning,onCheckedChange:f=>r({...i,include_planner_reasoning:f})}),e.jsx(S,{htmlFor:"include_planner_reasoning",className:"cursor-pointer",children:" planner  replyer"})]})]})]}),i.enable_talk_value_rules&&e.jsxs("div",{className:"border-t pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-base font-semibold",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"ID"})]}),e.jsxs(_,{onClick:d,size:"sm",children:[e.jsx(rt,{className:"h-4 w-4 mr-1"}),""]})]}),i.talk_value_rules&&i.talk_value_rules.length>0?e.jsx("div",{className:"space-y-4",children:i.talk_value_rules.map((f,p)=>e.jsxs("div",{className:"rounded-lg border p-4 bg-muted/50 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm font-medium text-muted-foreground",children:[" #",p+1]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(gw,{rule:f}),e.jsxs(ms,{children:[e.jsx(et,{asChild:!0,children:e.jsx(_,{variant:"ghost",size:"sm",children:e.jsx(Pe,{className:"h-4 w-4 text-destructive"})})}),e.jsxs(as,{children:[e.jsxs(ls,{children:[e.jsx(is,{children:""}),e.jsxs(rs,{children:[" #",p+1," "]})]}),e.jsxs(ns,{children:[e.jsx(os,{children:""}),e.jsx(cs,{onClick:()=>m(p),children:""})]})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{className:"text-xs font-medium",children:""}),e.jsxs(Oe,{value:f.target===""?"global":"specific",onValueChange:g=>{g==="global"?h(p,"target",""):h(p,"target","qq::group")},children:[e.jsx(Ae,{children:e.jsx(Re,{})}),e.jsxs(De,{children:[e.jsx(te,{value:"global",children:""}),e.jsx(te,{value:"specific",children:""})]})]})]}),f.target!==""&&(()=>{const g=f.target.split(":"),b=g[0]||"qq",j=g[1]||"",y=g[2]||"group";return e.jsxs("div",{className:"grid gap-4 p-3 sm:p-4 rounded-lg bg-muted/50",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{className:"text-xs font-medium",children:""}),e.jsxs(Oe,{value:b,onValueChange:N=>{h(p,"target",`${N}:${j}:${y}`)},children:[e.jsx(Ae,{children:e.jsx(Re,{})}),e.jsxs(De,{children:[e.jsx(te,{value:"qq",children:"QQ"}),e.jsx(te,{value:"wx",children:""})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{className:"text-xs font-medium",children:" ID"}),e.jsx(ne,{value:j,onChange:N=>{h(p,"target",`${b}:${N.target.value}:${y}`)},placeholder:" ID",className:"font-mono text-sm"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{className:"text-xs font-medium",children:""}),e.jsxs(Oe,{value:y,onValueChange:N=>{h(p,"target",`${b}:${j}:${N}`)},children:[e.jsx(Ae,{children:e.jsx(Re,{})}),e.jsxs(De,{children:[e.jsx(te,{value:"group",children:"group"}),e.jsx(te,{value:"private",children:"private"})]})]})]})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[" ID",f.target||""]})]})})(),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{className:"text-xs font-medium",children:" (Time)"}),e.jsx(pw,{value:f.time,onChange:g=>h(p,"time",g)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" 23:00-02:00"})]}),e.jsxs("div",{className:"grid gap-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(S,{htmlFor:`rule-value-${p}`,className:"text-xs font-medium",children:" (Value)"}),e.jsx(ne,{id:`rule-value-${p}`,type:"number",step:"0.01",min:"0.01",max:"1",value:f.value,onChange:g=>{const b=parseFloat(g.target.value);isNaN(b)||h(p,"value",Math.max(.01,Math.min(1,b)))},className:"w-20 h-8 text-xs"})]}),e.jsx(fa,{value:[f.value],onValueChange:g=>h(p,"value",g[0]),min:.01,max:1,step:.01,className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsx("span",{children:"0.01 ()"}),e.jsx("span",{children:"0.5"}),e.jsx("span",{children:"1.0 ()"})]})]})]})]},p))}):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:e.jsx("p",{className:"text-sm",children:'""'})}),e.jsxs("div",{className:"mt-4 p-4 bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:[e.jsx("h5",{className:"text-sm font-semibold text-blue-900 dark:text-blue-100 mb-2",children:" "}),e.jsxs("ul",{className:"text-xs text-blue-800 dark:text-blue-200 space-y-1",children:[e.jsxs("li",{children:[" ",e.jsx("strong",{children:"Target "}),""]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"Target "}),"platform:id:type"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:""}),""]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:""})," 23:00-02:00 112"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:""})," 0-10 1 "]})]})]})]})]})}),vw=pt.memo(function({config:i,onChange:r}){return e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:""}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{checked:i.enable_mood,onCheckedChange:d=>r({...i,enable_mood:d})}),e.jsx(S,{className:"cursor-pointer",children:""})]}),i.enable_mood&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{children:""}),e.jsx(ne,{type:"number",min:"1",value:i.mood_update_threshold,onChange:d=>r({...i,mood_update_threshold:parseInt(d.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{children:""}),e.jsx(Ms,{value:i.emotion_style,onChange:d=>r({...i,emotion_style:d.target.value}),placeholder:"",rows:2})]})]})]})]})}),bw=pt.memo(function({config:i,onChange:r}){return e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:""}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{checked:i.enable_asr,onCheckedChange:d=>r({...i,enable_asr:d})}),e.jsx(S,{className:"cursor-pointer",children:""})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})}),Nw=pt.memo(function({config:i,onChange:r}){return e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"LPMM "}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{checked:i.enable,onCheckedChange:d=>r({...i,enable:d})}),e.jsx(S,{className:"cursor-pointer",children:" LPMM "})]}),i.enable&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{children:"LPMM "}),e.jsxs(Oe,{value:i.lpmm_mode,onValueChange:d=>r({...i,lpmm_mode:d}),children:[e.jsx(Ae,{children:e.jsx(Re,{placeholder:" LPMM "})}),e.jsxs(De,{children:[e.jsx(te,{value:"classic",children:""}),e.jsx(te,{value:"agent",children:"Agent "})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{children:" TopK"}),e.jsx(ne,{type:"number",min:"1",value:i.rag_synonym_search_top_k,onChange:d=>r({...i,rag_synonym_search_top_k:parseInt(d.target.value)})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{children:""}),e.jsx(ne,{type:"number",step:"0.1",min:"0",max:"1",value:i.rag_synonym_threshold,onChange:d=>r({...i,rag_synonym_threshold:parseFloat(d.target.value)})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{children:""}),e.jsx(ne,{type:"number",min:"1",value:i.info_extraction_workers,onChange:d=>r({...i,info_extraction_workers:parseInt(d.target.value)})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{children:""}),e.jsx(ne,{type:"number",min:"1",value:i.embedding_dimension,onChange:d=>r({...i,embedding_dimension:parseInt(d.target.value)})})]})]})]})]})]})}),yw=pt.memo(function({config:i,onChange:r}){const[d,m]=u.useState(""),[h,f]=u.useState("WARNING"),p=()=>{d&&!i.suppress_libraries.includes(d)&&(r({...i,suppress_libraries:[...i.suppress_libraries,d]}),m(""))},g=w=>{r({...i,suppress_libraries:i.suppress_libraries.filter(U=>U!==w)})},b=()=>{d&&!i.library_log_levels[d]&&(r({...i,library_log_levels:{...i.library_log_levels,[d]:h}}),m(""),f("WARNING"))},j=w=>{const U={...i.library_log_levels};delete U[w],r({...i,library_log_levels:U})},y=["DEBUG","INFO","WARNING","ERROR","CRITICAL"],N=["FULL","compact","lite"],T=["none","title","full"];return e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:""}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{children:""}),e.jsx(ne,{value:i.date_style,onChange:w=>r({...i,date_style:w.target.value}),placeholder:": m-d H:i:s"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"m=, d=, H=, i=, s="})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{children:""}),e.jsxs(Oe,{value:i.log_level_style,onValueChange:w=>r({...i,log_level_style:w}),children:[e.jsx(Ae,{children:e.jsx(Re,{})}),e.jsx(De,{children:N.map(w=>e.jsx(te,{value:w,children:w},w))})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{children:""}),e.jsxs(Oe,{value:i.color_text,onValueChange:w=>r({...i,color_text:w}),children:[e.jsx(Ae,{children:e.jsx(Re,{})}),e.jsx(De,{children:T.map(w=>e.jsx(te,{value:w,children:w},w))})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{children:""}),e.jsxs(Oe,{value:i.log_level,onValueChange:w=>r({...i,log_level:w}),children:[e.jsx(Ae,{children:e.jsx(Re,{})}),e.jsx(De,{children:y.map(w=>e.jsx(te,{value:w,children:w},w))})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{children:""}),e.jsxs(Oe,{value:i.console_log_level,onValueChange:w=>r({...i,console_log_level:w}),children:[e.jsx(Ae,{children:e.jsx(Re,{})}),e.jsx(De,{children:y.map(w=>e.jsx(te,{value:w,children:w},w))})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{children:""}),e.jsxs(Oe,{value:i.file_log_level,onValueChange:w=>r({...i,file_log_level:w}),children:[e.jsx(Ae,{children:e.jsx(Re,{})}),e.jsx(De,{children:y.map(w=>e.jsx(te,{value:w,children:w},w))})]})]})]})]}),e.jsxs("div",{children:[e.jsx(S,{className:"mb-2 block",children:""}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx(ne,{value:d,onChange:w=>m(w.target.value),placeholder:"",className:"flex-1",onKeyDown:w=>{w.key==="Enter"&&(w.preventDefault(),p())}}),e.jsx(_,{onClick:p,size:"sm",className:"flex-shrink-0",children:e.jsx(rt,{className:"h-4 w-4",strokeWidth:2,fill:"none"})})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:i.suppress_libraries.map(w=>e.jsxs("div",{className:"flex items-center gap-1 bg-secondary px-3 py-1 rounded-md",children:[e.jsx("span",{className:"text-sm",children:w}),e.jsx(_,{variant:"ghost",size:"sm",className:"h-5 w-5 p-0",onClick:()=>g(w),children:e.jsx(Pe,{className:"h-3 w-3",strokeWidth:2,fill:"none"})})]},w))})]}),e.jsxs("div",{children:[e.jsx(S,{className:"mb-2 block",children:""}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx(ne,{value:d,onChange:w=>m(w.target.value),placeholder:"",className:"flex-1"}),e.jsxs(Oe,{value:h,onValueChange:f,children:[e.jsx(Ae,{className:"w-32",children:e.jsx(Re,{})}),e.jsx(De,{children:y.map(w=>e.jsx(te,{value:w,children:w},w))})]}),e.jsx(_,{onClick:b,size:"sm",children:e.jsx(rt,{className:"h-4 w-4",strokeWidth:2,fill:"none"})})]}),e.jsx("div",{className:"space-y-2",children:Object.entries(i.library_log_levels).map(([w,U])=>e.jsxs("div",{className:"flex items-center justify-between bg-secondary px-3 py-2 rounded-md",children:[e.jsx("span",{className:"text-sm font-medium",children:w}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:U}),e.jsx(_,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>j(w),children:e.jsx(Pe,{className:"h-3 w-3",strokeWidth:2,fill:"none"})})]})]},w))})]})]})}),ww=pt.memo(function({config:i,onChange:r}){return e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:""}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(S,{children:" Prompt"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),e.jsx(Ge,{checked:i.show_prompt,onCheckedChange:d=>r({...i,show_prompt:d})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(S,{children:" Prompt"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),e.jsx(Ge,{checked:i.show_replyer_prompt,onCheckedChange:d=>r({...i,show_replyer_prompt:d})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(S,{children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),e.jsx(Ge,{checked:i.show_replyer_reasoning,onCheckedChange:d=>r({...i,show_replyer_reasoning:d})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(S,{children:" Jargon Prompt"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),e.jsx(Ge,{checked:i.show_jargon_prompt,onCheckedChange:d=>r({...i,show_jargon_prompt:d})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(S,{children:" Prompt"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),e.jsx(Ge,{checked:i.show_memory_prompt,onCheckedChange:d=>r({...i,show_memory_prompt:d})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(S,{children:" Planner Prompt"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:" Planner "})]}),e.jsx(Ge,{checked:i.show_planner_prompt,onCheckedChange:d=>r({...i,show_planner_prompt:d})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(S,{children:" LPMM "}),e.jsx("p",{className:"text-sm text-muted-foreground",children:" LPMM "})]}),e.jsx(Ge,{checked:i.show_lpmm_paragraph,onCheckedChange:d=>r({...i,show_lpmm_paragraph:d})})]})]})]})}),_w=pt.memo(function({config:i,onChange:r}){const[d,m]=u.useState(""),h=()=>{d&&!i.auth_token.includes(d)&&(r({...i,auth_token:[...i.auth_token,d]}),m(""))},f=p=>{r({...i,auth_token:i.auth_token.filter((g,b)=>b!==p)})};return e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"MaimMessage "}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(S,{children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:" MaimMessage "})]}),e.jsx(Ge,{checked:i.use_custom,onCheckedChange:p=>r({...i,use_custom:p})})]}),i.use_custom&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{children:""}),e.jsx(ne,{value:i.host,onChange:p=>r({...i,host:p.target.value}),placeholder:"127.0.0.1"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{children:""}),e.jsx(ne,{type:"number",value:i.port,onChange:p=>r({...i,port:parseInt(p.target.value)}),placeholder:"8090"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{children:""}),e.jsxs(Oe,{value:i.mode,onValueChange:p=>r({...i,mode:p}),children:[e.jsx(Ae,{children:e.jsx(Re,{})}),e.jsxs(De,{children:[e.jsx(te,{value:"ws",children:"WebSocket (ws)"}),e.jsx(te,{value:"tcp",children:"TCP"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{checked:i.use_wss,onCheckedChange:p=>r({...i,use_wss:p}),disabled:i.mode!=="ws"}),e.jsx(S,{children:" WSS "})]})]}),i.use_wss&&i.mode==="ws"&&e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{children:"SSL "}),e.jsx(ne,{value:i.cert_file,onChange:p=>r({...i,cert_file:p.target.value}),placeholder:"cert.pem"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{children:"SSL "}),e.jsx(ne,{value:i.key_file,onChange:p=>r({...i,key_file:p.target.value}),placeholder:"key.pem"})]})]})]})]})]}),e.jsxs("div",{children:[e.jsx(S,{className:"mb-2 block",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:" API "}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx(ne,{value:d,onChange:p=>m(p.target.value),placeholder:"",onKeyDown:p=>{p.key==="Enter"&&(p.preventDefault(),h())}}),e.jsx(_,{onClick:h,size:"sm",children:e.jsx(rt,{className:"h-4 w-4",strokeWidth:2,fill:"none"})})]}),e.jsx("div",{className:"space-y-2",children:i.auth_token.map((p,g)=>e.jsxs("div",{className:"flex items-center justify-between bg-secondary px-3 py-2 rounded-md",children:[e.jsx("span",{className:"text-sm font-mono",children:p}),e.jsx(_,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>f(g),children:e.jsx(Pe,{className:"h-3 w-3",strokeWidth:2,fill:"none"})})]},g))})]})]})}),Sw=pt.memo(function({config:i,onChange:r}){return e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:""}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(S,{children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),e.jsx(Ge,{checked:i.enable,onCheckedChange:d=>r({...i,enable:d})})]})]})}),Cw=pt.memo(function({emojiConfig:i,memoryConfig:r,toolConfig:d,onEmojiChange:m,onMemoryChange:h,onToolChange:f}){return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-4",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:""}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{id:"enable_tool",checked:d.enable_tool,onCheckedChange:p=>f({...d,enable_tool:p})}),e.jsx(S,{htmlFor:"enable_tool",className:"cursor-pointer",children:""})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:""})]})}),e.jsx("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-4",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:""}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"max_agent_iterations",children:""}),e.jsx(ne,{id:"max_agent_iterations",type:"number",min:"1",value:r.max_agent_iterations,onChange:p=>h({...r,max_agent_iterations:parseInt(p.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" 1"})]})]})}),e.jsx("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-4",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:""}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"emoji_chance",children:""}),e.jsx(ne,{id:"emoji_chance",type:"number",step:"0.1",min:"0",max:"1",value:i.emoji_chance,onChange:p=>m({...i,emoji_chance:parseFloat(p.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" 0-1"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"max_reg_num",children:""}),e.jsx(ne,{id:"max_reg_num",type:"number",min:"1",value:i.max_reg_num,onChange:p=>m({...i,max_reg_num:parseInt(p.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"check_interval",children:""}),e.jsx(ne,{id:"check_interval",type:"number",min:"1",value:i.check_interval,onChange:p=>m({...i,check_interval:parseInt(p.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{id:"do_replace",checked:i.do_replace,onCheckedChange:p=>m({...i,do_replace:p})}),e.jsx(S,{htmlFor:"do_replace",className:"cursor-pointer",children:""})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{id:"steal_emoji",checked:i.steal_emoji,onCheckedChange:p=>m({...i,steal_emoji:p})}),e.jsx(S,{htmlFor:"steal_emoji",className:"cursor-pointer",children:""})]}),e.jsx("p",{className:"text-xs text-muted-foreground -mt-2",children:""}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{id:"content_filtration",checked:i.content_filtration,onCheckedChange:p=>m({...i,content_filtration:p})}),e.jsx(S,{htmlFor:"content_filtration",className:"cursor-pointer",children:""})]}),i.content_filtration&&e.jsxs("div",{className:"grid gap-2 pl-6 border-l-2 border-primary/20",children:[e.jsx(S,{htmlFor:"filtration_prompt",children:""}),e.jsx(ne,{id:"filtration_prompt",value:i.filtration_prompt,onChange:p=>m({...i,filtration_prompt:p.target.value}),placeholder:""}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})]})]})})]})}),kw=pt.memo(function({member:i,groupIndex:r,memberIndex:d,availableChatIds:m,onUpdate:h,onRemove:f}){const p=m.includes(i)||i==="*",[g,b]=u.useState(!p);return e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"flex-1 flex gap-2",children:g?e.jsxs(e.Fragment,{children:[e.jsx(ne,{value:i,onChange:j=>h(r,d,j.target.value),placeholder:' "*"  "qq:123456:group"',className:"flex-1"}),m.length>0&&e.jsx(_,{size:"sm",variant:"outline",onClick:()=>b(!1),title:"",children:""})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Oe,{value:i,onValueChange:j=>h(r,d,j),children:[e.jsx(Ae,{className:"flex-1",children:e.jsx(Re,{placeholder:""})}),e.jsxs(De,{children:[e.jsx(te,{value:"*",children:"* ()"}),m.map((j,y)=>e.jsx(te,{value:j,children:j},y))]})]}),e.jsx(_,{size:"sm",variant:"outline",onClick:()=>b(!0),title:"",children:""})]})}),e.jsxs(ms,{children:[e.jsx(et,{asChild:!0,children:e.jsx(_,{size:"icon",variant:"outline",children:e.jsx(Pe,{className:"h-4 w-4"})})}),e.jsxs(as,{children:[e.jsxs(ls,{children:[e.jsx(is,{children:""}),e.jsxs(rs,{children:[' "',i||"()",'" ']})]}),e.jsxs(ns,{children:[e.jsx(os,{children:""}),e.jsx(cs,{onClick:()=>f(r,d),children:""})]})]})]})]})}),Tw=pt.memo(function({config:i,onChange:r}){const d=()=>{r({...i,learning_list:[...i.learning_list,["","enable","enable","1.0"]]})},m=N=>{r({...i,learning_list:i.learning_list.filter((T,w)=>w!==N)})},h=(N,T,w)=>{const U=[...i.learning_list];U[N][T]=w,r({...i,learning_list:U})},f=({rule:N})=>{const T=`["${N[0]}", "${N[1]}", "${N[2]}", "${N[3]}"]`;return e.jsxs(Ra,{children:[e.jsx(La,{asChild:!0,children:e.jsxs(_,{variant:"outline",size:"sm",children:[e.jsx(Ot,{className:"h-4 w-4 mr-1"}),""]})}),e.jsx(Ca,{className:"w-80 sm:w-96",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-sm",children:""}),e.jsx("div",{className:"rounded-md bg-muted p-3 font-mono text-xs break-all",children:T}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" bot_config.toml "})]})})]})},p=()=>{r({...i,expression_groups:[...i.expression_groups,[]]})},g=N=>{r({...i,expression_groups:i.expression_groups.filter((T,w)=>w!==N)})},b=N=>{const T=[...i.expression_groups];T[N]=[...T[N],""],r({...i,expression_groups:T})},j=(N,T)=>{const w=[...i.expression_groups];w[N]=w[N].filter((U,O)=>O!==T),r({...i,expression_groups:w})},y=(N,T,w)=>{const U=[...i.expression_groups];U[N][T]=w,r({...i,expression_groups:U})};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-6",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:""})]}),e.jsxs(_,{onClick:d,size:"sm",variant:"outline",children:[e.jsx(rt,{className:"h-4 w-4 mr-1"}),""]})]}),e.jsxs("div",{className:"space-y-4",children:[i.learning_list.map((N,T)=>{const w=i.learning_list.some((M,Y)=>Y!==T&&M[0]===""),U=N[0]==="",O=N[0].split(":"),B=O[0]||"qq",I=O[1]||"",L=O[2]||"group";return e.jsxs("div",{className:"rounded-lg border p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm font-medium",children:[" ",T+1," ",U&&""]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(f,{rule:N}),e.jsxs(ms,{children:[e.jsx(et,{asChild:!0,children:e.jsx(_,{size:"sm",variant:"ghost",children:e.jsx(Pe,{className:"h-4 w-4"})})}),e.jsxs(as,{children:[e.jsxs(ls,{children:[e.jsx(is,{children:""}),e.jsxs(rs,{children:[" ",T+1," "]})]}),e.jsxs(ns,{children:[e.jsx(os,{children:""}),e.jsx(cs,{onClick:()=>m(T),children:""})]})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{className:"text-xs font-medium",children:""}),e.jsxs(Oe,{value:U?"global":"specific",onValueChange:M=>{M==="global"?h(T,0,""):h(T,0,"qq::group")},disabled:w&&!U,children:[e.jsx(Ae,{children:e.jsx(Re,{})}),e.jsxs(De,{children:[e.jsx(te,{value:"global",children:""}),e.jsx(te,{value:"specific",disabled:w&&!U,children:""})]})]}),w&&!U&&e.jsx("p",{className:"text-xs text-amber-600",children:""})]}),!U&&e.jsxs("div",{className:"grid gap-4 p-3 sm:p-4 rounded-lg bg-muted/50",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{className:"text-xs font-medium",children:""}),e.jsxs(Oe,{value:B,onValueChange:M=>{h(T,0,`${M}:${I}:${L}`)},children:[e.jsx(Ae,{children:e.jsx(Re,{})}),e.jsxs(De,{children:[e.jsx(te,{value:"qq",children:"QQ"}),e.jsx(te,{value:"wx",children:""})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{className:"text-xs font-medium",children:" ID"}),e.jsx(ne,{value:I,onChange:M=>{h(T,0,`${B}:${M.target.value}:${L}`)},placeholder:" ID",className:"font-mono text-sm"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{className:"text-xs font-medium",children:""}),e.jsxs(Oe,{value:L,onValueChange:M=>{h(T,0,`${B}:${I}:${M}`)},children:[e.jsx(Ae,{children:e.jsx(Re,{})}),e.jsxs(De,{children:[e.jsx(te,{value:"group",children:"group"}),e.jsx(te,{value:"private",children:"private"})]})]})]})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[" ID",N[0]||""]})]}),e.jsx("div",{className:"grid gap-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(S,{className:"text-xs font-medium",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:""})]}),e.jsx(Ge,{checked:N[1]==="enable",onCheckedChange:M=>h(T,1,M?"enable":"disable")})]})}),e.jsx("div",{className:"grid gap-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(S,{className:"text-xs font-medium",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:""})]}),e.jsx(Ge,{checked:N[2]==="enable",onCheckedChange:M=>h(T,2,M?"enable":"disable")})]})}),e.jsxs("div",{className:"grid gap-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(S,{className:"text-xs font-medium",children:""}),e.jsx(ne,{type:"number",step:"0.1",min:"0",max:"5",value:N[3],onChange:M=>{const Y=parseFloat(M.target.value);isNaN(Y)||h(T,3,Math.max(0,Math.min(5,Y)).toFixed(1))},className:"w-20 h-8 text-xs"})]}),e.jsx(fa,{value:[parseFloat(N[3])||1],onValueChange:M=>h(T,3,M[0].toFixed(1)),min:0,max:5,step:.1,className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsx("span",{children:"0 ()"}),e.jsx("span",{children:"2.5"}),e.jsx("span",{children:"5.0 ()"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" = 300/"})]})]})]},T)}),i.learning_list.length===0&&e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:'""'})]})]})}),e.jsx("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-6",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:""})]}),e.jsx(Ge,{checked:i.reflect,onCheckedChange:N=>r({...i,reflect:N})})]}),i.reflect&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"rounded-lg border p-4 space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("span",{className:"text-sm font-medium",children:""})}),e.jsx("div",{className:"space-y-4",children:(()=>{const T=(i.reflect_operator_id||"").split(":"),w=T[0]||"qq",U=T[1]||"",O=T[2]||"private";return e.jsxs("div",{className:"grid gap-4 p-3 sm:p-4 rounded-lg bg-muted/50",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{className:"text-xs font-medium",children:""}),e.jsxs(Oe,{value:w,onValueChange:B=>{r({...i,reflect_operator_id:`${B}:${U}:${O}`})},children:[e.jsx(Ae,{children:e.jsx(Re,{})}),e.jsxs(De,{children:[e.jsx(te,{value:"qq",children:"QQ"}),e.jsx(te,{value:"wx",children:""})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{className:"text-xs font-medium",children:"/ ID"}),e.jsx(ne,{value:U,onChange:B=>{r({...i,reflect_operator_id:`${w}:${B.target.value}:${O}`})},placeholder:" ID",className:"font-mono text-sm"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{className:"text-xs font-medium",children:""}),e.jsxs(Oe,{value:O,onValueChange:B=>{r({...i,reflect_operator_id:`${w}:${U}:${B}`})},children:[e.jsx(Ae,{children:e.jsx(Re,{})}),e.jsxs(De,{children:[e.jsx(te,{value:"private",children:"private"}),e.jsx(te,{value:"group",children:"group"})]})]})]})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[" ID",i.reflect_operator_id||""]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})})()})]}),e.jsxs("div",{className:"rounded-lg border p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:""})]}),e.jsxs(_,{onClick:()=>{r({...i,allow_reflect:[...i.allow_reflect||[],"qq::group"]})},size:"sm",variant:"outline",children:[e.jsx(rt,{className:"h-4 w-4 mr-1"}),""]})]}),e.jsxs("div",{className:"space-y-2",children:[(i.allow_reflect||[]).map((N,T)=>{const w=N.split(":"),U=w[0]||"qq",O=w[1]||"",B=w[2]||"group";return e.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-lg bg-muted/50",children:[e.jsxs(Oe,{value:U,onValueChange:I=>{const L=[...i.allow_reflect];L[T]=`${I}:${O}:${B}`,r({...i,allow_reflect:L})},children:[e.jsx(Ae,{className:"w-24",children:e.jsx(Re,{})}),e.jsxs(De,{children:[e.jsx(te,{value:"qq",children:"QQ"}),e.jsx(te,{value:"wx",children:""})]})]}),e.jsx(ne,{value:O,onChange:I=>{const L=[...i.allow_reflect];L[T]=`${U}:${I.target.value}:${B}`,r({...i,allow_reflect:L})},placeholder:"ID",className:"flex-1 font-mono text-sm"}),e.jsxs(Oe,{value:B,onValueChange:I=>{const L=[...i.allow_reflect];L[T]=`${U}:${O}:${I}`,r({...i,allow_reflect:L})},children:[e.jsx(Ae,{className:"w-32",children:e.jsx(Re,{})}),e.jsxs(De,{children:[e.jsx(te,{value:"group",children:""}),e.jsx(te,{value:"private",children:""})]})]}),e.jsx(_,{onClick:()=>{r({...i,allow_reflect:i.allow_reflect.filter((I,L)=>L!==T)})},size:"sm",variant:"ghost",children:e.jsx(Pe,{className:"h-4 w-4"})})]},T)}),(!i.allow_reflect||i.allow_reflect.length===0)&&e.jsx("div",{className:"text-center py-4 text-muted-foreground text-sm",children:""})]})]})]})]})}),e.jsx("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-6",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:""})]}),e.jsxs(_,{onClick:p,size:"sm",variant:"outline",children:[e.jsx(rt,{className:"h-4 w-4 mr-1"}),""]})]}),e.jsxs("div",{className:"space-y-4",children:[i.expression_groups.map((N,T)=>{const w=i.learning_list.map(U=>U[0]).filter(U=>U!=="");return e.jsxs("div",{className:"rounded-lg border p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm font-medium",children:[" ",T+1,N.length===1&&N[0]==="*"&&""]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(_,{onClick:()=>b(T),size:"sm",variant:"outline",children:e.jsx(rt,{className:"h-4 w-4"})}),e.jsxs(ms,{children:[e.jsx(et,{asChild:!0,children:e.jsx(_,{size:"sm",variant:"ghost",children:e.jsx(Pe,{className:"h-4 w-4"})})}),e.jsxs(as,{children:[e.jsxs(ls,{children:[e.jsx(is,{children:""}),e.jsxs(rs,{children:[" ",T+1," "]})]}),e.jsxs(ns,{children:[e.jsx(os,{children:""}),e.jsx(cs,{onClick:()=>g(T),children:""})]})]})]})]})]}),e.jsx("div",{className:"space-y-2",children:N.map((U,O)=>e.jsx(kw,{member:U,groupIndex:T,memberIndex:O,availableChatIds:w,onUpdate:y,onRemove:j},`${T}-${O}`))}),e.jsx("p",{className:"text-xs text-muted-foreground",children:' "*" '})]},T)}),i.expression_groups.length===0&&e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:'""'})]})]})})]})});function Ew({regex:n,reaction:i,onRegexChange:r,onReactionChange:d}){const[m,h]=u.useState(!1),[f,p]=u.useState(""),[g,b]=u.useState(null),[j,y]=u.useState(""),[N,T]=u.useState({}),[w,U]=u.useState(""),O=u.useRef(null),[B,I]=u.useState("build"),L=z=>z.replace(/\(\?P<([^>]+)>/g,"(?<$1>"),M=(z,A=0)=>{const W=O.current;if(!W)return;const xe=W.selectionStart||0,be=W.selectionEnd||0,_e=n.substring(0,xe)+z+n.substring(be);r(_e),setTimeout(()=>{const pe=xe+z.length+A;W.setSelectionRange(pe,pe),W.focus()},0)};u.useEffect(()=>{if(!n||!f){b(null),T({}),U(i),y("");return}try{const z=L(n),A=new RegExp(z,"g"),W=f.match(A);b(W),y("");const be=new RegExp(z).exec(f);if(be&&be.groups){T(be.groups);let _e=i;Object.entries(be.groups).forEach(([pe,ye])=>{_e=_e.replace(new RegExp(`\\[${pe}\\]`,"g"),ye||"")}),U(_e)}else T({}),U(i)}catch(z){y(z.message),b(null),T({}),U(i)}},[n,f,i]);const Y=()=>{if(!f||!g||g.length===0)return e.jsx("span",{className:"text-muted-foreground",children:f||""});try{const z=L(n),A=new RegExp(z,"g");let W=0;const xe=[];let be;for(;(be=A.exec(f))!==null;)be.index>W&&xe.push(e.jsx("span",{children:f.substring(W,be.index)},`text-${W}`)),xe.push(e.jsx("span",{className:"bg-yellow-200 dark:bg-yellow-900 font-semibold",children:be[0]},`match-${be.index}`)),W=be.index+be[0].length;return W<f.length&&xe.push(e.jsx("span",{children:f.substring(W)},`text-${W}`)),e.jsx(e.Fragment,{children:xe})}catch{return e.jsx("span",{children:f})}},Q=[{category:"",items:[{label:"",pattern:".",desc:""},{label:"",pattern:"\\d",desc:" 0-9"},{label:"",pattern:"\\D",desc:""},{label:"",pattern:"\\w",desc:""},{label:"",pattern:"\\W",desc:""},{label:"",pattern:"\\s",desc:""},{label:"",pattern:"\\S",desc:""}]},{category:"",items:[{label:"",pattern:"^",desc:""},{label:"",pattern:"$",desc:""},{label:"",pattern:"\\b",desc:""}]},{category:"",items:[{label:"0",pattern:"*",desc:"0"},{label:"1",pattern:"+",desc:"1"},{label:"01",pattern:"?",desc:"01"},{label:"",pattern:"{n}",desc:"nn"},{label:"",pattern:"{m,n}",desc:"mn"}]},{category:"",items:[{label:"",pattern:"()",desc:"",moveCursor:-1},{label:"",pattern:"(?P<name>)",desc:"Python",moveCursor:-1},{label:"",pattern:"(?:)",desc:"",moveCursor:-1}]},{category:"",items:[{label:"",pattern:"[]",desc:"",moveCursor:-1},{label:"",pattern:"[^]",desc:"",moveCursor:-1},{label:"",pattern:"[a-z]",desc:"az"},{label:"",pattern:"[\\u4e00-\\u9fa5]",desc:""}]},{category:"",items:[{label:"",pattern:"(?P<word>\\S+)",desc:""},{label:"",pattern:"(?P<sentence>.+)",desc:""},{label:"",pattern:"(?P<num>\\d+)",desc:""},{label:"",pattern:"(?:1|2)",desc:""}]}];return e.jsxs(qs,{open:m,onOpenChange:h,children:[e.jsx(Pu,{asChild:!0,children:e.jsxs(_,{variant:"outline",size:"sm",children:[e.jsx(Yu,{className:"h-4 w-4 mr-1"}),""]})}),e.jsxs(Rs,{className:"max-w-[95vw] sm:max-w-[900px] max-h-[90vh]",children:[e.jsxs(Ls,{children:[e.jsx(Us,{children:""}),e.jsx(Ks,{className:"text-sm",children:""})]}),e.jsx(Ke,{className:"max-h-[calc(90vh-120px)]",children:e.jsxs(Sa,{value:B,onValueChange:z=>I(z),className:"w-full",children:[e.jsxs(pa,{className:"grid w-full grid-cols-2",children:[e.jsx(es,{value:"build",children:" "}),e.jsx(es,{value:"test",children:" "})]}),e.jsxs(_s,{value:"build",className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{className:"text-sm font-medium",children:""}),e.jsx(ne,{ref:O,value:n,onChange:z=>r(z.target.value),className:"font-mono text-sm",placeholder:"..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{className:"text-sm font-medium",children:"Reaction "}),e.jsx(Ms,{value:i,onChange:z=>d(z.target.value),placeholder:" [] ...",rows:3,className:"text-sm"})]}),e.jsxs("div",{className:"space-y-4 border-t pt-4",children:[Q.map(z=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("h5",{className:"text-xs font-semibold text-primary",children:z.category}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:z.items.map(A=>e.jsx(_,{variant:"outline",size:"sm",className:"justify-start h-auto py-2 px-3",onClick:()=>M(A.pattern,A.moveCursor||0),children:e.jsxs("div",{className:"flex flex-col items-start w-full",children:[e.jsxs("div",{className:"flex items-center gap-2 w-full",children:[e.jsx("span",{className:"text-xs font-medium",children:A.label}),e.jsx("code",{className:"ml-auto text-xs bg-muted px-1.5 py-0.5 rounded font-mono",children:A.pattern})]}),e.jsx("span",{className:"text-xs text-muted-foreground mt-0.5",children:A.desc})]})},A.label))})]},z.category)),e.jsxs("div",{className:"space-y-2 border-t pt-4",children:[e.jsx("h5",{className:"text-xs font-semibold text-primary",children:""}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{variant:"outline",size:"sm",className:"w-full justify-start h-auto py-2 px-3",onClick:()=>r("^(?P<n>\\S{1,20})$"),children:e.jsxs("div",{className:"flex flex-col items-start w-full",children:[e.jsxs("code",{className:"text-xs font-mono bg-muted px-2 py-1 rounded w-full overflow-x-auto",children:["^(?P<n>\\S","{1,20}",")$"]}),e.jsx("span",{className:"text-xs text-muted-foreground mt-1",children:""})]})}),e.jsx(_,{variant:"outline",size:"sm",className:"w-full justify-start h-auto py-2 px-3",onClick:()=>r("(?:[^.\\s]+\\s*)?(?:)?[]\\s*(?P<action>.+?)[.,]?$"),children:e.jsxs("div",{className:"flex flex-col items-start w-full",children:[e.jsx("code",{className:"text-xs font-mono bg-muted px-2 py-1 rounded w-full overflow-x-auto",children:"(?:[^.\\s]+\\s*)?(?:)?[]\\s*(?P<action>.+?)[.,]?$"}),e.jsx("span",{className:"text-xs text-muted-foreground mt-1",children:""})]})}),e.jsx(_,{variant:"outline",size:"sm",className:"w-full justify-start h-auto py-2 px-3",onClick:()=>r("(?P<subject>.+?)(?:||)"),children:e.jsxs("div",{className:"flex flex-col items-start w-full",children:[e.jsx("code",{className:"text-xs font-mono bg-muted px-2 py-1 rounded w-full overflow-x-auto",children:"(?P<subject>.+?)(?:||)"}),e.jsx("span",{className:"text-xs text-muted-foreground mt-1",children:""})]})})]})]})]}),e.jsxs("div",{className:"rounded-md bg-blue-50 dark:bg-blue-950/30 border border-blue-200 dark:border-blue-800 p-3 space-y-1",children:[e.jsx("p",{className:"text-xs font-medium text-blue-900 dark:text-blue-100",children:" "}),e.jsxs("ul",{className:"text-xs text-blue-700 dark:text-blue-300 space-y-1 list-disc list-inside",children:[e.jsx("li",{children:""}),e.jsxs("li",{children:["",e.jsx("code",{className:"bg-blue-100 dark:bg-blue-900 px-1 rounded",children:"(?P<>)"})]}),e.jsxs("li",{children:[" reaction  ",e.jsx("code",{className:"bg-blue-100 dark:bg-blue-900 px-1 rounded",children:"[]"})," "]}),e.jsx("li",{children:""})]})]})]}),e.jsxs(_s,{value:"test",className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{className:"text-sm font-medium",children:""}),e.jsx("div",{className:"rounded-md bg-muted p-3 font-mono text-xs break-all",children:n||"()"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"test-text",className:"text-sm font-medium",children:""}),e.jsx(Ms,{id:"test-text",value:f,onChange:z=>p(z.target.value),placeholder:`...
`,className:"min-h-[100px] text-sm"})]}),j&&e.jsxs("div",{className:"rounded-md bg-destructive/10 border border-destructive/20 p-3",children:[e.jsx("p",{className:"text-sm text-destructive font-medium",children:""}),e.jsx("p",{className:"text-xs text-destructive/80 mt-1",children:j})]}),!j&&f&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex items-center gap-2",children:g&&g.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-green-500"}),e.jsxs("span",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:[" (",g.length," )"]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:""})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{className:"text-sm font-medium",children:""}),e.jsx(Ke,{className:"h-40 rounded-md bg-muted p-3",children:e.jsx("div",{className:"text-sm break-words",children:Y()})})]}),Object.keys(N).length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{className:"text-sm font-medium",children:""}),e.jsx(Ke,{className:"h-32 rounded-md border p-3",children:e.jsx("div",{className:"space-y-2",children:Object.entries(N).map(([z,A])=>e.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[e.jsxs("span",{className:"font-mono font-semibold text-primary min-w-[80px]",children:["[",z,"]"]}),e.jsx("span",{className:"text-muted-foreground",children:"="}),e.jsx("span",{className:"font-mono bg-muted px-2 py-0.5 rounded",children:A})]},z))})})]}),Object.keys(N).length>0&&i&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{className:"text-sm font-medium",children:"Reaction "}),e.jsx(Ke,{className:"h-48 rounded-md bg-blue-50 dark:bg-blue-950/30 border border-blue-200 dark:border-blue-800 p-3",children:e.jsx("div",{className:"text-sm break-words",children:w})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"reaction  [name] "})]})]}),e.jsxs("div",{className:"rounded-md bg-blue-50 dark:bg-blue-950/30 border border-blue-200 dark:border-blue-800 p-3 space-y-1",children:[e.jsx("p",{className:"text-xs font-medium text-blue-900 dark:text-blue-100",children:" "}),e.jsxs("ul",{className:"text-xs text-blue-700 dark:text-blue-300 space-y-1 list-disc list-inside",children:[e.jsx("li",{children:""}),e.jsx("li",{children:""}),e.jsx("li",{children:"Reaction "}),e.jsx("li",{children:""})]})]})]})]})})]})]})}const zw=pt.memo(function({keywordReactionConfig:i,responsePostProcessConfig:r,chineseTypoConfig:d,responseSplitterConfig:m,onKeywordReactionChange:h,onResponsePostProcessChange:f,onChineseTypoChange:p,onResponseSplitterChange:g}){const b=()=>{h({...i,regex_rules:[...i.regex_rules,{regex:[""],reaction:""}]})},j=M=>{h({...i,regex_rules:i.regex_rules.filter((Y,Q)=>Q!==M)})},y=(M,Y,Q)=>{const z=[...i.regex_rules];Y==="regex"&&typeof Q=="string"?z[M]={...z[M],regex:[Q]}:Y==="reaction"&&typeof Q=="string"&&(z[M]={...z[M],reaction:Q}),h({...i,regex_rules:z})},N=()=>{h({...i,keyword_rules:[...i.keyword_rules,{keywords:[],reaction:""}]})},T=M=>{h({...i,keyword_rules:i.keyword_rules.filter((Y,Q)=>Q!==M)})},w=(M,Y,Q)=>{const z=[...i.keyword_rules];typeof Q=="string"&&(z[M]={...z[M],reaction:Q}),h({...i,keyword_rules:z})},U=M=>{const Y=[...i.keyword_rules];Y[M]={...Y[M],keywords:[...Y[M].keywords||[],""]},h({...i,keyword_rules:Y})},O=(M,Y)=>{const Q=[...i.keyword_rules];Q[M]={...Q[M],keywords:(Q[M].keywords||[]).filter((z,A)=>A!==Y)},h({...i,keyword_rules:Q})},B=(M,Y,Q)=>{const z=[...i.keyword_rules],A=[...z[M].keywords||[]];A[Y]=Q,z[M]={...z[M],keywords:A},h({...i,keyword_rules:z})},I=({rule:M})=>{const Y=`{ regex = [${(M.regex||[]).map(Q=>`"${Q}"`).join(", ")}], reaction = "${M.reaction}" }`;return e.jsxs(Ra,{children:[e.jsx(La,{asChild:!0,children:e.jsxs(_,{variant:"outline",size:"sm",children:[e.jsx(Ot,{className:"h-4 w-4 mr-1"}),""]})}),e.jsx(Ca,{className:"w-[95vw] sm:w-[500px]",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-sm",children:""}),e.jsx(Ke,{className:"h-60 rounded-md bg-muted p-3",children:e.jsx("pre",{className:"font-mono text-xs break-all",children:Y})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" bot_config.toml "})]})})]})},L=({rule:M})=>{const Y=`[[keyword_reaction.keyword_rules]]
keywords = [${(M.keywords||[]).map(Q=>`"${Q}"`).join(", ")}]
reaction = "${M.reaction}"`;return e.jsxs(Ra,{children:[e.jsx(La,{asChild:!0,children:e.jsxs(_,{variant:"outline",size:"sm",children:[e.jsx(Ot,{className:"h-4 w-4 mr-1"}),""]})}),e.jsx(Ca,{className:"w-[95vw] sm:w-[500px]",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-sm",children:""}),e.jsx(Ke,{className:"h-60 rounded-md bg-muted p-3",children:e.jsx("pre",{className:"font-mono text-xs whitespace-pre-wrap break-all",children:Y})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" bot_config.toml "})]})})]})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-base font-semibold",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:""})]}),e.jsxs(_,{onClick:b,size:"sm",variant:"outline",children:[e.jsx(rt,{className:"h-4 w-4 mr-1"}),""]})]}),e.jsxs("div",{className:"space-y-3",children:[i.regex_rules.map((M,Y)=>e.jsxs("div",{className:"rounded-lg border p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm font-medium",children:[" ",Y+1]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ew,{regex:M.regex&&M.regex[0]||"",reaction:M.reaction,onRegexChange:Q=>y(Y,"regex",Q),onReactionChange:Q=>y(Y,"reaction",Q)}),e.jsx(I,{rule:M}),e.jsxs(ms,{children:[e.jsx(et,{asChild:!0,children:e.jsx(_,{size:"sm",variant:"ghost",children:e.jsx(Pe,{className:"h-4 w-4"})})}),e.jsxs(as,{children:[e.jsxs(ls,{children:[e.jsx(is,{children:""}),e.jsxs(rs,{children:[" ",Y+1," "]})]}),e.jsxs(ns,{children:[e.jsx(os,{children:""}),e.jsx(cs,{onClick:()=>j(Y),children:""})]})]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{className:"text-xs font-medium",children:"Python "}),e.jsx(ne,{value:M.regex&&M.regex[0]||"",onChange:Q=>y(Y,"regex",Q.target.value),placeholder:"^(?P<n>\\\\S{1,20})$ ",className:"font-mono text-sm"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:' (?P<name>pattern) reaction  [name] ""'})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{className:"text-xs font-medium",children:""}),e.jsx(Ms,{value:M.reaction,onChange:Q=>y(Y,"reaction",Q.target.value),placeholder:`...
 [] `,rows:3,className:"text-sm"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" []  [n] "})]})]})]},Y)),i.regex_rules.length===0&&e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:'""'})]})]}),e.jsxs("div",{className:"space-y-4 border-t pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-base font-semibold",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:""})]}),e.jsxs(_,{onClick:N,size:"sm",variant:"outline",children:[e.jsx(rt,{className:"h-4 w-4 mr-1"}),""]})]}),e.jsxs("div",{className:"space-y-3",children:[i.keyword_rules.map((M,Y)=>e.jsxs("div",{className:"rounded-lg border p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm font-medium",children:[" ",Y+1]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{rule:M}),e.jsxs(ms,{children:[e.jsx(et,{asChild:!0,children:e.jsx(_,{size:"sm",variant:"ghost",children:e.jsx(Pe,{className:"h-4 w-4"})})}),e.jsxs(as,{children:[e.jsxs(ls,{children:[e.jsx(is,{children:""}),e.jsxs(rs,{children:[" ",Y+1," "]})]}),e.jsxs(ns,{children:[e.jsx(os,{children:""}),e.jsx(cs,{onClick:()=>T(Y),children:""})]})]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(S,{className:"text-xs font-medium",children:""}),e.jsxs(_,{onClick:()=>U(Y),size:"sm",variant:"ghost",children:[e.jsx(rt,{className:"h-3 w-3 mr-1"}),""]})]}),e.jsxs("div",{className:"space-y-2",children:[(M.keywords||[]).map((Q,z)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{value:Q,onChange:A=>B(Y,z,A.target.value),placeholder:"",className:"flex-1"}),e.jsx(_,{onClick:()=>O(Y,z),size:"sm",variant:"ghost",children:e.jsx(Pe,{className:"h-4 w-4"})})]},z)),(!M.keywords||M.keywords.length===0)&&e.jsx("p",{className:"text-xs text-muted-foreground text-center py-2",children:'""'})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{className:"text-xs font-medium",children:""}),e.jsx(Ms,{value:M.reaction,onChange:Q=>w(Y,"reaction",Q.target.value),placeholder:"...",rows:3,className:"text-sm"})]})]})]},Y)),i.keyword_rules.length===0&&e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:'""'})]})]})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:""}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{id:"enable_response_post_process",checked:r.enable_response_post_process,onCheckedChange:M=>f({...r,enable_response_post_process:M})}),e.jsx(S,{htmlFor:"enable_response_post_process",className:"cursor-pointer",children:""})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:""})]}),r.enable_response_post_process&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"border-t pt-6 space-y-4",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(Ge,{id:"enable_chinese_typo",checked:d.enable,onCheckedChange:M=>p({...d,enable:M})}),e.jsx(S,{htmlFor:"enable_chinese_typo",className:"cursor-pointer font-semibold",children:""})]}),e.jsx("p",{className:"text-xs text-muted-foreground mb-4",children:""}),d.enable&&e.jsxs("div",{className:"grid gap-4 pl-6 border-l-2 border-primary/20",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"error_rate",className:"text-xs font-medium",children:""}),e.jsx(ne,{id:"error_rate",type:"number",step:"0.001",min:"0",max:"1",value:d.error_rate,onChange:M=>p({...d,error_rate:parseFloat(M.target.value)})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"min_freq",className:"text-xs font-medium",children:""}),e.jsx(ne,{id:"min_freq",type:"number",min:"0",value:d.min_freq,onChange:M=>p({...d,min_freq:parseInt(M.target.value)})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"tone_error_rate",className:"text-xs font-medium",children:""}),e.jsx(ne,{id:"tone_error_rate",type:"number",step:"0.01",min:"0",max:"1",value:d.tone_error_rate,onChange:M=>p({...d,tone_error_rate:parseFloat(M.target.value)})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"word_replace_rate",className:"text-xs font-medium",children:""}),e.jsx(ne,{id:"word_replace_rate",type:"number",step:"0.001",min:"0",max:"1",value:d.word_replace_rate,onChange:M=>p({...d,word_replace_rate:parseFloat(M.target.value)})})]})]})]})}),e.jsx("div",{className:"border-t pt-6 space-y-4",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(Ge,{id:"enable_response_splitter",checked:m.enable,onCheckedChange:M=>g({...m,enable:M})}),e.jsx(S,{htmlFor:"enable_response_splitter",className:"cursor-pointer font-semibold",children:""})]}),e.jsx("p",{className:"text-xs text-muted-foreground mb-4",children:""}),m.enable&&e.jsxs("div",{className:"grid gap-4 pl-6 border-l-2 border-primary/20",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"max_length",className:"text-xs font-medium",children:""}),e.jsx(ne,{id:"max_length",type:"number",min:"1",value:m.max_length,onChange:M=>g({...m,max_length:parseInt(M.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"max_sentence_num",className:"text-xs font-medium",children:""}),e.jsx(ne,{id:"max_sentence_num",type:"number",min:"1",value:m.max_sentence_num,onChange:M=>g({...m,max_sentence_num:parseInt(M.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{id:"enable_kaomoji_protection",checked:m.enable_kaomoji_protection,onCheckedChange:M=>g({...m,enable_kaomoji_protection:M})}),e.jsx(S,{htmlFor:"enable_kaomoji_protection",className:"cursor-pointer",children:""})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{id:"enable_overflow_return_all",checked:m.enable_overflow_return_all,onCheckedChange:M=>g({...m,enable_overflow_return_all:M})}),e.jsx(S,{htmlFor:"enable_overflow_return_all",className:"cursor-pointer",children:""})]}),e.jsx("p",{className:"text-xs text-muted-foreground -mt-2",children:""})]})]})})]})]})]})}),Rl="/api/webui/config";async function xp(){const i=await(await Se(`${Rl}/bot`)).json();if(!i.success)throw new Error("");return i.config}async function Zn(){const i=await(await Se(`${Rl}/model`)).json();if(!i.success)throw new Error("");return i.config}async function fp(n){const r=await(await Se(`${Rl}/bot`,{method:"POST",body:JSON.stringify(n)})).json();if(!r.success)throw new Error(r.message||"")}async function Mw(){const i=await(await Se(`${Rl}/bot/raw`)).json();if(!i.success)throw new Error("");return i.content}async function Aw(n){const r=await(await Se(`${Rl}/bot/raw`,{method:"POST",body:JSON.stringify({raw_content:n})})).json();if(!r.success)throw new Error(r.message||"")}async function Kc(n){const r=await(await Se(`${Rl}/model`,{method:"POST",body:JSON.stringify(n)})).json();if(!r.success)throw new Error(r.message||"")}async function Dw(n,i){const d=await(await Se(`${Rl}/bot/section/${n}`,{method:"POST",body:JSON.stringify(i)})).json();if(!d.success)throw new Error(d.message||` ${n} `)}async function Gu(n,i){const d=await(await Se(`${Rl}/model/section/${n}`,{method:"POST",body:JSON.stringify(i)})).json();if(!d.success)throw new Error(d.message||` ${n} `)}async function Ow(n,i="openai",r="/models"){const d=new URLSearchParams({provider_name:n,parser:i,endpoint:r}),m=await Se(`/api/webui/models/list?${d}`);if(!m.ok){const f=await m.json().catch(()=>({}));throw new Error(f.detail||` (${m.status})`)}const h=await m.json();if(!h.success)throw new Error("");return h.models}async function Rw(n){const i=new URLSearchParams({provider_name:n}),r=await Se(`/api/webui/models/test-connection-by-name?${i}`,{method:"POST"});if(!r.ok){const d=await r.json().catch(()=>({}));throw new Error(d.detail||` (${r.status})`)}return await r.json()}const Lw=si("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),$t=u.forwardRef(({className:n,variant:i,...r},d)=>e.jsx("div",{ref:d,role:"alert",className:q(Lw({variant:i}),n),...r}));$t.displayName="Alert";const Uw=u.forwardRef(({className:n,...i},r)=>e.jsx("h5",{ref:r,className:q("mb-1 font-medium leading-none tracking-tight",n),...i}));Uw.displayName="AlertTitle";const Qt=u.forwardRef(({className:n,...i},r)=>e.jsx("div",{ref:r,className:q("text-sm [&_p]:leading-relaxed",n),...i}));Qt.displayName="AlertDescription";function Wu({onRestartComplete:n,onRestartFailed:i}){const[r,d]=u.useState(0),[m,h]=u.useState("restarting"),[f,p]=u.useState(0),[g,b]=u.useState(0);u.useEffect(()=>{const N=setInterval(()=>{d(U=>U>=90?U:U+1)},200),T=setInterval(()=>{p(U=>U+1)},1e3),w=setTimeout(()=>{h("checking"),j()},3e3);return()=>{clearInterval(N),clearInterval(T),clearTimeout(w)}},[]);const j=()=>{const T=async()=>{try{if(b(U=>U+1),(await fetch("/api/webui/system/status",{method:"GET",headers:{"Content-Type":"application/json"},signal:AbortSignal.timeout(3e3)})).ok)d(100),h("success"),setTimeout(()=>{n?.()},1500);else throw new Error("Status check failed")}catch{g<60?setTimeout(T,2e3):(h("failed"),i?.())}};T()},y=N=>{const T=Math.floor(N/60),w=N%60;return`${T}:${w.toString().padStart(2,"0")}`};return e.jsx("div",{className:"fixed inset-0 bg-background/95 backdrop-blur-sm z-50 flex items-center justify-center",children:e.jsxs("div",{className:"max-w-md w-full mx-4 space-y-8",children:[e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[m==="restarting"&&e.jsxs(e.Fragment,{children:[e.jsx(st,{className:"h-16 w-16 text-primary animate-spin"}),e.jsx("h2",{className:"text-2xl font-bold",children:""}),e.jsx("p",{className:"text-muted-foreground text-center",children:"..."})]}),m==="checking"&&e.jsxs(e.Fragment,{children:[e.jsx(st,{className:"h-16 w-16 text-primary animate-spin"}),e.jsx("h2",{className:"text-2xl font-bold",children:""}),e.jsxs("p",{className:"text-muted-foreground text-center",children:["... ( ",g,"/60)"]})]}),m==="success"&&e.jsxs(e.Fragment,{children:[e.jsx(ta,{className:"h-16 w-16 text-green-500"}),e.jsx("h2",{className:"text-2xl font-bold",children:""}),e.jsx("p",{className:"text-muted-foreground text-center",children:"..."})]}),m==="failed"&&e.jsxs(e.Fragment,{children:[e.jsx(zt,{className:"h-16 w-16 text-destructive"}),e.jsx("h2",{className:"text-2xl font-bold",children:""}),e.jsx("p",{className:"text-muted-foreground text-center",children:""})]})]}),m!=="failed"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(ni,{value:r,className:"h-2"}),e.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground",children:[e.jsxs("span",{children:[r,"%"]}),e.jsxs("span",{children:[": ",y(f)]})]})]}),e.jsx("div",{className:"bg-muted/50 rounded-lg p-4 space-y-2",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:[m==="restarting"&&" ...",m==="checking"&&" ...",m==="success"&&" ",m==="failed"&&" "]})}),m==="failed"&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>window.location.reload(),className:"flex-1 px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90",children:""}),e.jsx("button",{onClick:()=>{h("checking"),b(0),j()},className:"flex-1 px-4 py-2 bg-secondary text-secondary-foreground rounded-md hover:bg-secondary/90",children:""})]})]})})}const Bw={name:"toml",startState:function(){return{inString:!1,stringType:"",lhs:!0,inArray:0}},token:function(n,i){let r;if(!i.inString&&(r=n.match(/^('''|"""|'|")/))&&(i.stringType=r[0],i.inString=!0),n.sol()&&!i.inString&&i.inArray===0&&(i.lhs=!0),i.inString){for(;i.inString;)if(n.match(i.stringType))i.inString=!1;else if(n.peek()==="\\")n.next(),n.next();else{if(n.eol())break;n.match(/^.[^\\\"\']*/)}return i.lhs?"property":"string"}else{if(i.inArray&&n.peek()==="]")return n.next(),i.inArray--,"bracket";if(i.lhs&&n.peek()==="["&&n.skipTo("]"))return n.next(),n.peek()==="]"&&n.next(),"atom";if(n.peek()==="#")return n.skipToEnd(),"comment";if(n.eatSpace())return null;if(i.lhs&&n.eatWhile(function(d){return d!="="&&d!=" "}))return"property";if(i.lhs&&n.peek()==="=")return n.next(),i.lhs=!1,null;if(!i.lhs&&n.match(/^\d\d\d\d[\d\-\:\.T]*Z/))return"atom";if(!i.lhs&&(n.match("true")||n.match("false")))return"atom";if(!i.lhs&&n.peek()==="[")return i.inArray++,n.next(),"bracket";if(!i.lhs&&n.match(/^\-?\d+(?:\.\d+)?/))return"number";n.eatSpace()||n.next()}return null},languageData:{commentTokens:{line:"#"}}},Hw={python:[My()],json:[Ay(),Dy()],toml:[zy.define(Bw)],text:[]};function qw({value:n,onChange:i,language:r="text",readOnly:d=!1,height:m="400px",minHeight:h,maxHeight:f,placeholder:p,theme:g="dark",className:b=""}){const[j,y]=u.useState(!1);if(u.useEffect(()=>{y(!0)},[]),!j)return e.jsx("div",{className:`rounded-md border bg-muted animate-pulse ${b}`,style:{height:m,minHeight:h,maxHeight:f}});const N=[...Hw[r]||[],ap.lineWrapping];return d&&N.push(ap.editable.of(!1)),e.jsx("div",{className:`rounded-md overflow-hidden border ${b}`,children:e.jsx(Oy,{value:n,height:m,minHeight:h,maxHeight:f,theme:g==="dark"?Ry:void 0,extensions:N,onChange:i,placeholder:p,basicSetup:{lineNumbers:!0,highlightActiveLineGutter:!0,highlightSpecialChars:!0,history:!0,foldGutter:!0,drawSelection:!0,dropCursor:!0,allowMultipleSelections:!0,indentOnInput:!0,syntaxHighlighting:!0,bracketMatching:!0,closeBrackets:!0,autocompletion:!0,rectangularSelection:!0,crosshairCursor:!0,highlightActiveLine:!0,highlightSelectionMatches:!0,closeBracketsKeymap:!0,defaultKeymap:!0,searchKeymap:!0,historyKeymap:!0,foldKeymap:!0,completionKeymap:!0,lintKeymap:!0}})})}function Gw(n,i,r,d={}){const{debounceMs:m=2e3,onSaveSuccess:h,onSaveError:f}=d,p=u.useRef(null),g=u.useCallback(async(N,T)=>{try{i(!0),await Dw(N,T),r(!1),h?.()}catch(w){console.error(` ${N} :`,w),r(!0),f?.(w instanceof Error?w:new Error(String(w)))}finally{i(!1)}},[i,r,h,f]),b=u.useCallback((N,T)=>{n||(r(!0),p.current&&clearTimeout(p.current),p.current=setTimeout(()=>{g(N,T)},m))},[n,r,g,m]),j=u.useCallback(async(N,T)=>{p.current&&(clearTimeout(p.current),p.current=null),await g(N,T)},[g]),y=u.useCallback(()=>{p.current&&(clearTimeout(p.current),p.current=null)},[]);return u.useEffect(()=>()=>{p.current&&clearTimeout(p.current)},[]),{triggerAutoSave:b,saveNow:j,cancelPendingAutoSave:y}}function wt(n,i,r,d){u.useEffect(()=>{n&&!r&&d(i,n)},[n])}const Fw=500;function Vw(){const[n,i]=u.useState(!0),[r,d]=u.useState(!1),[m,h]=u.useState(!1),[f,p]=u.useState(!1),[g,b]=u.useState(!1),[j,y]=u.useState(!1),[N,T]=u.useState("visual"),[w,U]=u.useState(""),[O,B]=u.useState(!1),{toast:I}=Bs(),[L,M]=u.useState(null),[Y,Q]=u.useState(null),[z,A]=u.useState(null),[W,xe]=u.useState(null),[be,_e]=u.useState(null),[pe,ye]=u.useState(null),[we,R]=u.useState(null),[X,C]=u.useState(null),[$,k]=u.useState(null),[ce,ue]=u.useState(null),[ie,fe]=u.useState(null),[Ne,me]=u.useState(null),[ee,ae]=u.useState(null),[V,P]=u.useState(null),[Ce,Le]=u.useState(null),[ge,Me]=u.useState(null),[$s,gt]=u.useState(null),[oe,Fe]=u.useState(null),Qe=u.useRef(!0),Qs=u.useRef({}),Hs=u.useCallback(ve=>{Qs.current=ve,M(ve.bot),Q(ve.personality);const We=ve.chat;We.talk_value_rules||(We.talk_value_rules=[]),A(We),xe(ve.expression),_e(ve.emoji),ye(ve.memory),R(ve.tool),C(ve.mood),k(ve.voice),ue(ve.lpmm_knowledge),fe(ve.keyword_reaction),me(ve.response_post_process),ae(ve.chinese_typo),P(ve.response_splitter),Le(ve.log),Me(ve.debug),gt(ve.maim_message),Fe(ve.telemetry)},[]),bt=u.useCallback(()=>({...Qs.current,bot:L,personality:Y,chat:z,expression:W,emoji:be,memory:pe,tool:we,mood:X,voice:$,lpmm_knowledge:ce,keyword_reaction:ie,response_post_process:Ne,chinese_typo:ee,response_splitter:V,log:Ce,debug:ge,maim_message:$s,telemetry:oe}),[L,Y,z,W,be,pe,we,X,$,ce,ie,Ne,ee,V,Ce,ge,$s,oe]),ot=u.useCallback(async()=>{try{const ve=await Mw();U(ve),B(!1)}catch(ve){I({variant:"destructive",title:"",description:ve instanceof Error?ve.message:""})}},[I]),Ds=u.useCallback(async()=>{try{i(!0);const ve=await xp();Hs(ve),p(!1),Qe.current=!1,await ot()}catch(ve){console.error(":",ve),I({title:"",description:"",variant:"destructive"})}finally{i(!1)}},[I,ot,Hs]);u.useEffect(()=>{Ds()},[Ds]);const{triggerAutoSave:G,cancelPendingAutoSave:Be}=Gw(Qe.current,h,p);wt(L,"bot",Qe.current,G),wt(Y,"personality",Qe.current,G),wt(z,"chat",Qe.current,G),wt(W,"expression",Qe.current,G),wt(be,"emoji",Qe.current,G),wt(pe,"memory",Qe.current,G),wt(we,"tool",Qe.current,G),wt(X,"mood",Qe.current,G),wt($,"voice",Qe.current,G),wt(ce,"lpmm_knowledge",Qe.current,G),wt(ie,"keyword_reaction",Qe.current,G),wt(Ne,"response_post_process",Qe.current,G),wt(ee,"chinese_typo",Qe.current,G),wt(V,"response_splitter",Qe.current,G),wt(Ce,"log",Qe.current,G),wt(ge,"debug",Qe.current,G),wt($s,"maim_message",Qe.current,G),wt(oe,"telemetry",Qe.current,G);const ze=async()=>{try{d(!0),await Aw(w),p(!1),B(!1),I({title:"",description:""}),await Ds()}catch(ve){B(!0),I({variant:"destructive",title:"",description:ve instanceof Error?ve.message:""})}finally{d(!1)}},Ie=async ve=>{if(f){I({variant:"destructive",title:"",description:""});return}if(T(ve),ve==="source")await ot();else try{const We=await xp();Hs(We),p(!1)}catch(We){console.error(":",We),I({title:"",description:"",variant:"destructive"})}},ks=async()=>{try{d(!0),Be(),await fp(bt()),p(!1),I({title:"",description:""})}catch(ve){console.error(":",ve),I({title:"",description:ve.message,variant:"destructive"})}finally{d(!1)}},Ye=async()=>{try{b(!0),Wc().catch(()=>{}),y(!0)}catch(ve){console.error(":",ve),y(!1),I({title:"",description:"",variant:"destructive"}),b(!1)}},dt=async()=>{try{d(!0),Be(),await fp(bt()),p(!1),I({title:"",description:"..."}),await new Promise(ve=>setTimeout(ve,Fw)),await Ye()}catch(ve){console.error(":",ve),I({title:"",description:ve.message,variant:"destructive"})}finally{d(!1)}},gs=()=>{localStorage.removeItem("access-token"),window.location.href="/auth"},Is=()=>{y(!1),b(!1),I({title:"",description:"",variant:"destructive"})};return n?e.jsx(Ke,{className:"h-full",children:e.jsx("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("p",{className:"text-muted-foreground",children:"..."})})})}):e.jsx(Ke,{className:"h-full",children:e.jsxs("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col gap-3 sm:gap-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl font-bold",children:""}),e.jsx("p",{className:"text-muted-foreground mt-1 text-xs sm:text-sm",children:""})]}),e.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[e.jsxs(_,{onClick:N==="visual"?ks:ze,disabled:r||m||!f||g,size:"sm",variant:"outline",className:"w-20 sm:w-24",children:[e.jsx(gr,{className:"h-4 w-4 flex-shrink-0",strokeWidth:2,fill:"none"}),e.jsx("span",{className:"ml-1 truncate text-xs sm:text-sm",children:r?"":m?"":f?"":""})]}),e.jsxs(ms,{children:[e.jsx(et,{asChild:!0,children:e.jsxs(_,{disabled:r||m||g,size:"sm",className:"w-20 sm:w-28",children:[e.jsx(pr,{className:"h-4 w-4 flex-shrink-0"}),e.jsx("span",{className:"ml-1 truncate text-xs sm:text-sm",children:g?"":f?"":""})]})}),e.jsxs(as,{children:[e.jsxs(ls,{children:[e.jsx(is,{children:""}),e.jsx(rs,{asChild:!0,children:e.jsx("div",{children:e.jsx("p",{children:f?",":","})})})]}),e.jsxs(ns,{children:[e.jsx(os,{children:""}),e.jsx(cs,{onClick:f?dt:Ye,children:f?"":""})]})]})]})]})]}),e.jsx("div",{className:"flex",children:e.jsx(Sa,{value:N,onValueChange:ve=>Ie(ve),className:"w-full",children:e.jsxs(pa,{className:"h-8 sm:h-9 w-full grid grid-cols-2",children:[e.jsxs(es,{value:"visual",className:"text-xs sm:text-sm",children:[e.jsx(cy,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1"}),""]}),e.jsxs(es,{value:"source",className:"text-xs sm:text-sm",children:[e.jsx(oy,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1"}),""]})]})})})]}),e.jsxs($t,{children:[e.jsx(Oa,{className:"h-4 w-4"}),e.jsxs(Qt,{children:["",e.jsx("strong",{children:""}),'""']})]}),N==="source"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs($t,{children:[e.jsx(Oa,{className:"h-4 w-4"}),e.jsxs(Qt,{children:[e.jsx("strong",{children:""})," TOML  TOML ",O&&e.jsx("span",{className:"text-destructive font-semibold ml-2",children:"  TOML "})]})]}),e.jsx(qw,{value:w,onChange:ve=>{U(ve),p(!0),O&&B(!1)},language:"toml",theme:"dark",height:"calc(100vh - 280px)",minHeight:"500px",placeholder:"TOML "})]}),N==="visual"&&e.jsx(e.Fragment,{children:e.jsxs(Sa,{defaultValue:"bot",className:"w-full",children:[e.jsxs(pa,{className:"flex flex-wrap h-auto gap-1 p-1 sm:grid sm:grid-cols-5 lg:grid-cols-10",children:[e.jsx(es,{value:"bot",className:"text-xs px-2 py-1.5 sm:px-3 sm:py-2 data-[state=active]:shadow-sm",children:""}),e.jsx(es,{value:"personality",className:"text-xs px-2 py-1.5 sm:px-3 sm:py-2 data-[state=active]:shadow-sm",children:""}),e.jsx(es,{value:"chat",className:"text-xs px-2 py-1.5 sm:px-3 sm:py-2 data-[state=active]:shadow-sm",children:""}),e.jsx(es,{value:"expression",className:"text-xs px-2 py-1.5 sm:px-3 sm:py-2 data-[state=active]:shadow-sm",children:""}),e.jsx(es,{value:"features",className:"text-xs px-2 py-1.5 sm:px-3 sm:py-2 data-[state=active]:shadow-sm",children:""}),e.jsx(es,{value:"processing",className:"text-xs px-2 py-1.5 sm:px-3 sm:py-2 data-[state=active]:shadow-sm",children:""}),e.jsx(es,{value:"mood",className:"text-xs px-2 py-1.5 sm:px-3 sm:py-2 data-[state=active]:shadow-sm",children:""}),e.jsx(es,{value:"voice",className:"text-xs px-2 py-1.5 sm:px-3 sm:py-2 data-[state=active]:shadow-sm",children:""}),e.jsx(es,{value:"lpmm",className:"text-xs px-2 py-1.5 sm:px-3 sm:py-2 data-[state=active]:shadow-sm",children:""}),e.jsx(es,{value:"other",className:"text-xs px-2 py-1.5 sm:px-3 sm:py-2 data-[state=active]:shadow-sm",children:""})]}),e.jsx(_s,{value:"bot",className:"space-y-4",children:L&&e.jsx(mw,{config:L,onChange:M})}),e.jsx(_s,{value:"personality",className:"space-y-4",children:Y&&e.jsx(hw,{config:Y,onChange:Q})}),e.jsx(_s,{value:"chat",className:"space-y-4",children:z&&e.jsx(jw,{config:z,onChange:A})}),e.jsx(_s,{value:"expression",className:"space-y-4",children:W&&e.jsx(Tw,{config:W,onChange:xe})}),e.jsx(_s,{value:"features",className:"space-y-4",children:be&&pe&&we&&e.jsx(Cw,{emojiConfig:be,memoryConfig:pe,toolConfig:we,onEmojiChange:_e,onMemoryChange:ye,onToolChange:R})}),e.jsx(_s,{value:"processing",className:"space-y-4",children:ie&&Ne&&ee&&V&&e.jsx(zw,{keywordReactionConfig:ie,responsePostProcessConfig:Ne,chineseTypoConfig:ee,responseSplitterConfig:V,onKeywordReactionChange:fe,onResponsePostProcessChange:me,onChineseTypoChange:ae,onResponseSplitterChange:P})}),e.jsx(_s,{value:"mood",className:"space-y-4",children:X&&e.jsx(vw,{config:X,onChange:C})}),e.jsx(_s,{value:"voice",className:"space-y-4",children:$&&e.jsx(bw,{config:$,onChange:k})}),e.jsx(_s,{value:"lpmm",className:"space-y-4",children:ce&&e.jsx(Nw,{config:ce,onChange:ue})}),e.jsxs(_s,{value:"other",className:"space-y-4",children:[Ce&&e.jsx(yw,{config:Ce,onChange:Le}),ge&&e.jsx(ww,{config:ge,onChange:Me}),$s&&e.jsx(_w,{config:$s,onChange:gt}),oe&&e.jsx(Sw,{config:oe,onChange:Fe})]})]})}),j&&e.jsx(Wu,{onRestartComplete:gs,onRestartFailed:Is})]})})}const nn=u.forwardRef(({className:n,...i},r)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:r,className:q("w-full caption-bottom text-sm",n),...i})}));nn.displayName="Table";const rn=u.forwardRef(({className:n,...i},r)=>e.jsx("thead",{ref:r,className:q("[&_tr]:border-b",n),...i}));rn.displayName="TableHeader";const cn=u.forwardRef(({className:n,...i},r)=>e.jsx("tbody",{ref:r,className:q("[&_tr:last-child]:border-0",n),...i}));cn.displayName="TableBody";const $w=u.forwardRef(({className:n,...i},r)=>e.jsx("tfoot",{ref:r,className:q("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",n),...i}));$w.displayName="TableFooter";const ct=u.forwardRef(({className:n,...i},r)=>e.jsx("tr",{ref:r,className:q("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",n),...i}));ct.displayName="TableRow";const Xe=u.forwardRef(({className:n,...i},r)=>e.jsx("th",{ref:r,className:q("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",n),...i}));Xe.displayName="TableHead";const He=u.forwardRef(({className:n,...i},r)=>e.jsx("td",{ref:r,className:q("px-4 py-3 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",n),...i}));He.displayName="TableCell";const Qw=u.forwardRef(({className:n,...i},r)=>e.jsx("caption",{ref:r,className:q("mt-4 text-sm text-muted-foreground",n),...i}));Qw.displayName="TableCaption";const eo=u.forwardRef(({className:n,...i},r)=>e.jsx(It,{ref:r,className:q("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",n),...i}));eo.displayName=It.displayName;const so=u.forwardRef(({className:n,...i},r)=>e.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[e.jsx(Mt,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),e.jsx(It.Input,{ref:r,className:q("flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",n),...i})]}));so.displayName=It.Input.displayName;const to=u.forwardRef(({className:n,...i},r)=>e.jsx(It.List,{ref:r,className:q("max-h-[300px] overflow-y-auto overflow-x-hidden",n),...i}));to.displayName=It.List.displayName;const ao=u.forwardRef((n,i)=>e.jsx(It.Empty,{ref:i,className:"py-6 text-center text-sm",...n}));ao.displayName=It.Empty.displayName;const xr=u.forwardRef(({className:n,...i},r)=>e.jsx(It.Group,{ref:r,className:q("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",n),...i}));xr.displayName=It.Group.displayName;const Iw=u.forwardRef(({className:n,...i},r)=>e.jsx(It.Separator,{ref:r,className:q("-mx-1 h-px bg-border",n),...i}));Iw.displayName=It.Separator.displayName;const fr=u.forwardRef(({className:n,...i},r)=>e.jsx(It.Item,{ref:r,className:q("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",n),...i}));fr.displayName=It.Item.displayName;const ft=u.forwardRef(({className:n,...i},r)=>e.jsx(rg,{ref:r,className:q("grid place-content-center peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",n),...i,children:e.jsx(HN,{className:q("grid place-content-center text-current"),children:e.jsx(Vt,{className:"h-4 w-4"})})}));ft.displayName=rg.displayName;const Vg=u.createContext(null),$g="maibot-completed-tours";function Yw(){try{const n=localStorage.getItem($g);return n?new Set(JSON.parse(n)):new Set}catch{return new Set}}function pp(n){localStorage.setItem($g,JSON.stringify([...n]))}function Xw({children:n}){const[i,r]=u.useState({activeTourId:null,stepIndex:0,isRunning:!1}),d=u.useRef(new Map),[,m]=u.useState(0),[h,f]=u.useState(Yw),p=u.useCallback((L,M)=>{d.current.set(L,M),m(Y=>Y+1)},[]),g=u.useCallback(L=>{d.current.delete(L),r(M=>M.activeTourId===L?{...M,activeTourId:null,isRunning:!1,stepIndex:0}:M)},[]),b=u.useCallback((L,M=0)=>{d.current.has(L)&&r({activeTourId:L,stepIndex:M,isRunning:!0})},[]),j=u.useCallback(()=>{r(L=>({...L,isRunning:!1}))},[]),y=u.useCallback(L=>{r(M=>({...M,stepIndex:L}))},[]),N=u.useCallback(()=>{r(L=>({...L,stepIndex:L.stepIndex+1}))},[]),T=u.useCallback(()=>{r(L=>({...L,stepIndex:Math.max(0,L.stepIndex-1)}))},[]),w=u.useCallback(()=>i.activeTourId?d.current.get(i.activeTourId)||[]:[],[i.activeTourId]),U=u.useCallback(L=>{f(M=>{const Y=new Set(M);return Y.add(L),pp(Y),Y})},[]),O=u.useCallback(L=>{const{action:M,index:Y,status:Q,type:z}=L,A=["finished","skipped"];if(M==="close"){r(W=>({...W,isRunning:!1,stepIndex:0}));return}A.includes(Q)?r(W=>(Q==="finished"&&W.activeTourId&&setTimeout(()=>U(W.activeTourId),0),{...W,isRunning:!1,stepIndex:0})):z==="step:after"&&(M==="next"?r(W=>({...W,stepIndex:Y+1})):M==="prev"&&r(W=>({...W,stepIndex:Y-1})))},[U]),B=u.useCallback(L=>h.has(L),[h]),I=u.useCallback(L=>{f(M=>{const Y=new Set(M);return Y.delete(L),pp(Y),Y})},[]);return e.jsx(Vg.Provider,{value:{state:i,tours:d.current,registerTour:p,unregisterTour:g,startTour:b,stopTour:j,goToStep:y,nextStep:N,prevStep:T,getCurrentSteps:w,handleJoyrideCallback:O,isTourCompleted:B,markTourCompleted:U,resetTourCompleted:I},children:n})}function em(){const n=u.useContext(Vg);if(!n)throw new Error("useTour must be used within a TourProvider");return n}const Kw={options:{zIndex:1e4,primaryColor:"hsl(var(--primary))",textColor:"hsl(var(--foreground))",backgroundColor:"hsl(var(--background))",arrowColor:"hsl(var(--background))",overlayColor:"rgba(0, 0, 0, 0.5)"},tooltip:{borderRadius:"var(--radius)",padding:"1rem"},tooltipContainer:{textAlign:"left"},tooltipTitle:{fontSize:"1rem",fontWeight:600,marginBottom:"0.5rem"},tooltipContent:{fontSize:"0.875rem",padding:"0.5rem 0"},buttonNext:{backgroundColor:"hsl(var(--primary))",color:"hsl(var(--primary-foreground))",borderRadius:"calc(var(--radius) - 2px)",fontSize:"0.875rem",padding:"0.5rem 1rem"},buttonBack:{color:"hsl(var(--muted-foreground))",fontSize:"0.875rem",marginRight:"0.5rem"},buttonSkip:{color:"hsl(var(--muted-foreground))",fontSize:"0.875rem"},buttonClose:{color:"hsl(var(--muted-foreground))"},spotlight:{borderRadius:"var(--radius)"}},Jw={back:"",close:"",last:"",next:"",nextLabelWithProgress:" ({step}/{steps})",open:"",skip:""};function Pw(){const{state:n,getCurrentSteps:i,handleJoyrideCallback:r}=em(),d=i(),[m,h]=u.useState(!1),f=u.useRef(n.stepIndex),p=u.useRef(null);u.useEffect(()=>{f.current!==n.stepIndex&&(h(!1),f.current=n.stepIndex)},[n.stepIndex]),u.useEffect(()=>{if(!n.isRunning||d.length===0){h(!1);return}const j=d[n.stepIndex];if(!j){h(!1);return}const y=j.target;if(y==="body"){h(!0);return}h(!1);const N=setTimeout(()=>{const T=()=>{const B=document.querySelector(y);if(B){const I=B.getBoundingClientRect();if(I.width>0&&I.height>0)return!0}return!1};if(T()){setTimeout(()=>h(!0),100);return}const w=setInterval(()=>{T()&&(clearInterval(w),setTimeout(()=>h(!0),100))},100),U=setTimeout(()=>{clearInterval(w),h(!0)},5e3),O=()=>{clearInterval(w),clearTimeout(U)};p.current=O},150);return()=>{clearTimeout(N),p.current&&(p.current(),p.current=null)}},[n.isRunning,n.stepIndex,d]);const g=u.useRef(null);if(u.useEffect(()=>{let j=document.getElementById("tour-portal-container");return j||(j=document.createElement("div"),j.id="tour-portal-container",j.style.cssText="position: fixed; top: 0; left: 0; z-index: 99999; pointer-events: none;",document.body.appendChild(j)),g.current=j,()=>{}},[]),!n.isRunning||d.length===0||!m)return null;const b=e.jsx(Ly,{steps:d,stepIndex:n.stepIndex,run:n.isRunning,continuous:!0,showSkipButton:!0,showProgress:!0,disableOverlayClose:!0,disableScrolling:!1,disableScrollParentFix:!1,callback:r,styles:Kw,locale:Jw,scrollOffset:80,scrollToFirstStep:!0,floaterProps:{styles:{floater:{zIndex:99999}},disableAnimation:!0}},`tour-step-${n.stepIndex}`);return g.current?Hb.createPortal(b,g.current):b}const Aa="model-assignment-tour",Qg=[{target:"body",content:"",placement:"center",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="sidebar-model-provider"]',content:' DeepSeek Siliconflow""',placement:"right",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="add-provider-button"]',content:'""',placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!0,hideFooter:!0},{target:'[data-tour="provider-dialog"]',content:"",placement:"left",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="provider-name-input"]',content:"",placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="provider-apikey-input"]',content:" API  API ",placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="provider-url-input"]',content:" API API ",placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="provider-template-select"]',content:"",placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="provider-save-button"]',content:"",placement:"top",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="provider-cancel-button"]',content:"",placement:"top",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!0,hideFooter:!0},{target:'[data-tour="sidebar-model-management"]',content:'""',placement:"right",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="add-model-button"]',content:'""',placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!0,hideFooter:!0},{target:'[data-tour="model-dialog"]',content:"",placement:"left",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="model-name-input"]',content:"",placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="model-provider-select"]',content:"",placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="model-identifier-input"]',content:"",placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="model-save-button"]',content:"",placement:"top",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="model-cancel-button"]',content:"",placement:"top",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!0,hideFooter:!0},{target:'[data-tour="tasks-tab-trigger"]',content:'""',placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!0,hideFooter:!0},{target:'[data-tour="task-model-select"]',content:"",placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1}],Ig={0:"/config/model",1:"/config/model",2:"/config/modelProvider",3:"/config/modelProvider",4:"/config/modelProvider",5:"/config/modelProvider",6:"/config/modelProvider",7:"/config/modelProvider",8:"/config/modelProvider",9:"/config/modelProvider",10:"/config/modelProvider",11:"/config/model",12:"/config/model",13:"/config/model",14:"/config/model",15:"/config/model",16:"/config/model",17:"/config/model",18:"/config/model",19:"/config/model"},lr=[{id:"siliconflow",name:"SiliconFlow",base_url:"https://api.siliconflow.cn/v1",client_type:"openai",display_name:" (SiliconFlow)",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"deepseek",name:"DeepSeek",base_url:"https://api.deepseek.com",client_type:"openai",display_name:"DeepSeek",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"rinkoai",name:"RinkoAI",base_url:"https://rinkoai.com/v1",client_type:"openai",display_name:"RinkoAI",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"zhipu",name:"ZhipuAI",base_url:"https://open.bigmodel.cn/api/paas/v4",client_type:"openai",display_name:" AI (ZhipuAI / GLM)",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"moonshot",name:"Moonshot",base_url:"https://api.moonshot.cn/v1",client_type:"openai",display_name:" (Moonshot / Kimi)",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"doubao",name:"Doubao",base_url:"https://ark.cn-beijing.volces.com/api/v3",client_type:"openai",display_name:" (Doubao)",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"alibaba",name:"Alibaba",base_url:"https://dashscope.aliyuncs.com/compatible-mode/v1",client_type:"openai",display_name:" (Alibaba Qwen)",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"baichuan",name:"Baichuan",base_url:"https://api.baichuan-ai.com/v1",client_type:"openai",display_name:" (Baichuan)",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"minimax",name:"MiniMax",base_url:"https://api.minimax.chat/v1",client_type:"openai",display_name:"MiniMax ( AI)",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"stepfun",name:"StepFun",base_url:"https://api.stepfun.com/v1",client_type:"openai",display_name:" (StepFun)",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"lingyi",name:"Lingyi",base_url:"https://api.lingyiwanwu.com/v1",client_type:"openai",display_name:" (Lingyi / Yi)",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"openai",name:"OpenAI",base_url:"https://api.openai.com/v1",client_type:"openai",display_name:"OpenAI",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"xai",name:"xAI",base_url:"https://api.x.ai/v1",client_type:"openai",display_name:"xAI (Grok)",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"anthropic",name:"Anthropic",base_url:"https://api.anthropic.com/v1",client_type:"openai",display_name:"Anthropic (Claude)"},{id:"gemini",name:"Gemini",base_url:"https://generativelanguage.googleapis.com/v1beta",client_type:"gemini",display_name:"Google Gemini",modelFetcher:{endpoint:"/models",parser:"gemini"}},{id:"cohere",name:"Cohere",base_url:"https://api.cohere.ai/v1",client_type:"openai",display_name:"Cohere"},{id:"groq",name:"Groq",base_url:"https://api.groq.com/openai/v1",client_type:"openai",display_name:"Groq",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"together",name:"Together AI",base_url:"https://api.together.xyz/v1",client_type:"openai",display_name:"Together AI",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"fireworks",name:"Fireworks",base_url:"https://api.fireworks.ai/inference/v1",client_type:"openai",display_name:"Fireworks AI",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"mistral",name:"Mistral",base_url:"https://api.mistral.ai/v1",client_type:"openai",display_name:"Mistral AI",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"perplexity",name:"Perplexity",base_url:"https://api.perplexity.ai",client_type:"openai",display_name:"Perplexity AI"},{id:"custom",name:"",base_url:"",client_type:"openai",display_name:""}];function gp(n){return n?n.replace(/\/+$/,"").toLowerCase():""}function Zw(n){if(!n)return null;const i=gp(n);return lr.find(r=>r.id!=="custom"&&gp(r.base_url)===i)||null}function Ww(){const[n,i]=u.useState([]),[r,d]=u.useState(!0),[m,h]=u.useState(!1),[f,p]=u.useState(!1),[g,b]=u.useState(!1),[j,y]=u.useState(!1),[N,T]=u.useState(!1),[w,U]=u.useState(!1),[O,B]=u.useState(null),[I,L]=u.useState(null),[M,Y]=u.useState("custom"),[Q,z]=u.useState(!1),[A,W]=u.useState(!1),[xe,be]=u.useState(null),[_e,pe]=u.useState(!1),[ye,we]=u.useState(""),[R,X]=u.useState(new Set),[C,$]=u.useState(!1),[k,ce]=u.useState(1),[ue,ie]=u.useState(20),[fe,Ne]=u.useState(""),[me,ee]=u.useState({}),[ae,V]=u.useState(new Set),[P,Ce]=u.useState(new Map),{toast:Le}=Bs(),ge=ja(),{state:Me,goToStep:$s,registerTour:gt}=em(),oe=u.useRef(null),Fe=u.useRef(!0);u.useEffect(()=>{gt(Aa,Qg)},[gt]),u.useEffect(()=>{if(Me.activeTourId===Aa&&Me.isRunning){const E=Ig[Me.stepIndex];E&&!window.location.pathname.endsWith(E.replace("/config/",""))&&ge({to:E})}},[Me.stepIndex,Me.activeTourId,Me.isRunning,ge]);const Qe=u.useRef(Me.stepIndex);u.useEffect(()=>{if(Me.activeTourId===Aa&&Me.isRunning){const E=Qe.current,je=Me.stepIndex;E>=3&&E<=9&&je<3&&U(!1),E>=10&&je>=3&&je<=9&&(ee({}),Y("custom"),B({name:"",base_url:"",api_key:"",client_type:"openai",max_retry:2,timeout:30,retry_interval:10}),L(null),pe(!1),U(!0)),Qe.current=je}},[Me.stepIndex,Me.activeTourId,Me.isRunning]),u.useEffect(()=>{if(Me.activeTourId!==Aa||!Me.isRunning)return;const E=je=>{const Te=je.target,ys=Me.stepIndex;ys===2&&Te.closest('[data-tour="add-provider-button"]')?setTimeout(()=>$s(3),300):ys===9&&Te.closest('[data-tour="provider-cancel-button"]')&&setTimeout(()=>$s(10),300)};return document.addEventListener("click",E,!0),()=>document.removeEventListener("click",E,!0)},[Me,$s]),u.useEffect(()=>{Qs()},[]);const Qs=async()=>{try{d(!0);const E=await Zn();i(E.api_providers||[]),b(!1),Fe.current=!1}catch(E){console.error(":",E)}finally{d(!1)}},Hs=async()=>{try{y(!0),Wc().catch(()=>{}),T(!0)}catch(E){console.error(":",E),T(!1),Le({title:"",description:"",variant:"destructive"}),y(!1)}},bt=async()=>{try{h(!0),oe.current&&clearTimeout(oe.current);const E=await Zn();E.api_providers=n,await Kc(E),b(!1),Le({title:"",description:"..."}),await Hs()}catch(E){console.error(":",E),Le({title:"",description:E.message,variant:"destructive"}),h(!1)}},ot=()=>{localStorage.removeItem("access-token"),window.location.href="/auth"},Ds=()=>{T(!1),y(!1),Le({title:"",description:"",variant:"destructive"})},G=u.useCallback(async E=>{if(!Fe.current)try{p(!0),await Gu("api_providers",E),b(!1)}catch(je){console.error(":",je),b(!0)}finally{p(!1)}},[]);u.useEffect(()=>{if(!Fe.current)return b(!0),oe.current&&clearTimeout(oe.current),oe.current=setTimeout(()=>{G(n)},2e3),()=>{oe.current&&clearTimeout(oe.current)}},[n,G]);const Be=async()=>{try{h(!0),oe.current&&clearTimeout(oe.current);const E=await Zn();E.api_providers=n,await Kc(E),b(!1),Le({title:"",description:""})}catch(E){console.error(":",E),Le({title:"",description:E.message,variant:"destructive"})}finally{h(!1)}},ze=(E,je)=>{if(ee({}),E){const Te=lr.find(ys=>ys.base_url===E.base_url&&ys.client_type===E.client_type);Y(Te?.id||"custom"),B(E)}else Y("custom"),B({name:"",base_url:"",api_key:"",client_type:"openai",max_retry:2,timeout:30,retry_interval:10});L(je),pe(!1),U(!0)},Ie=E=>{Y(E),z(!1);const je=lr.find(Te=>Te.id===E);je&&je.id!=="custom"?B(Te=>({...Te,name:je.name,base_url:je.base_url,client_type:je.client_type})):je?.id==="custom"&&B(Te=>({...Te,name:"",base_url:"",client_type:"openai"}))},ks=u.useMemo(()=>M!=="custom",[M]),Ye=async()=>{if(O?.api_key)try{await navigator.clipboard.writeText(O.api_key),Le({title:"",description:"API Key "})}catch{Le({title:"",description:"",variant:"destructive"})}},dt=()=>{if(!O)return;const E={};if(O.name?.trim()||(E.name=""),O.base_url?.trim()||(E.base_url=" URL"),O.api_key?.trim()||(E.api_key=" API Key"),Object.keys(E).length>0){ee(E);return}ee({});const je={...O,max_retry:O.max_retry??2,timeout:O.timeout??30,retry_interval:O.retry_interval??10};if(I!==null){const Te=[...n];Te[I]=je,i(Te)}else i([...n,je]);U(!1),B(null),L(null)},gs=E=>{if(!E&&O){const je={...O,max_retry:O.max_retry??2,timeout:O.timeout??30,retry_interval:O.retry_interval??10};B(je)}U(E)},Is=E=>{be(E),W(!0)},ve=()=>{if(xe!==null){const E=n.filter((je,Te)=>Te!==xe);i(E),Le({title:"",description:""})}W(!1),be(null)},We=E=>{const je=new Set(R);je.has(E)?je.delete(E):je.add(E),X(je)},vs=()=>{if(R.size===js.length)X(new Set);else{const E=js.map((je,Te)=>n.findIndex(ys=>ys===js[Te]));X(new Set(E))}},At=()=>{if(R.size===0){Le({title:"",description:"",variant:"default"});return}$(!0)},lt=()=>{const E=n.filter((je,Te)=>!R.has(Te));i(E),X(new Set),$(!1),Le({title:"",description:` ${R.size} `})},js=n.filter(E=>{if(!ye)return!0;const je=ye.toLowerCase();return E.name.toLowerCase().includes(je)||E.base_url.toLowerCase().includes(je)||E.client_type.toLowerCase().includes(je)}),Ys=Math.ceil(js.length/ue),aa=js.slice((k-1)*ue,k*ue),ka=()=>{const E=parseInt(fe);E>=1&&E<=Ys&&(ce(E),Ne(""))},Yt=async E=>{V(je=>new Set(je).add(E));try{const je=await Rw(E);Ce(Te=>new Map(Te).set(E,je)),je.network_ok?je.api_key_valid===!0?Le({title:"",description:`${E} API Key  (${je.latency_ms}ms)`}):je.api_key_valid===!1?Le({title:" Key ",description:`${E}  API Key `,variant:"destructive"}):Le({title:"",description:`${E}  (${je.latency_ms}ms)`}):Le({title:"",description:je.error||"",variant:"destructive"})}catch(je){Le({title:"",description:je.message,variant:"destructive"})}finally{V(je=>{const Te=new Set(je);return Te.delete(E),Te})}},Ba=async()=>{for(const E of n)await Yt(E.name)},le=E=>{const je=ae.has(E),Te=P.get(E);return je?e.jsxs(qe,{variant:"secondary",className:"gap-1",children:[e.jsx(st,{className:"h-3 w-3 animate-spin"}),""]}):Te?Te.network_ok?Te.api_key_valid===!0?e.jsxs(qe,{className:"gap-1 bg-green-600 hover:bg-green-700",children:[e.jsx(ta,{className:"h-3 w-3"}),""]}):Te.api_key_valid===!1?e.jsxs(qe,{variant:"destructive",className:"gap-1",children:[e.jsx(zt,{className:"h-3 w-3"}),"Key"]}):e.jsxs(qe,{className:"gap-1 bg-blue-600 hover:bg-blue-700",children:[e.jsx(ta,{className:"h-3 w-3"}),""]}):e.jsxs(qe,{variant:"destructive",className:"gap-1",children:[e.jsx(pg,{className:"h-3 w-3"}),""]}):null};return r?e.jsx("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("p",{className:"text-muted-foreground",children:"..."})})}):e.jsxs("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"AI"}),e.jsx("p",{className:"text-muted-foreground mt-1 sm:mt-2 text-sm sm:text-base",children:" AI  API "})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[R.size>0&&e.jsxs(_,{onClick:At,size:"sm",variant:"destructive",className:"w-full sm:w-auto",children:[e.jsx(Pe,{className:"mr-2 h-4 w-4",strokeWidth:2,fill:"none"})," (",R.size,")"]}),e.jsxs(_,{onClick:Ba,size:"sm",variant:"outline",className:"w-full sm:w-auto",disabled:n.length===0||ae.size>0,children:[e.jsx(sn,{className:"mr-2 h-4 w-4"}),ae.size>0?` (${ae.size})`:""]}),e.jsxs(_,{onClick:()=>ze(null,null),size:"sm",className:"w-full sm:w-auto","data-tour":"add-provider-button",children:[e.jsx(rt,{className:"mr-2 h-4 w-4",strokeWidth:2,fill:"none"}),""]}),e.jsxs(_,{onClick:Be,disabled:m||f||!g||j,size:"sm",variant:"outline",className:"w-full sm:w-auto sm:min-w-[120px]",children:[e.jsx(gr,{className:"mr-2 h-4 w-4",strokeWidth:2,fill:"none"}),m?"...":f?"...":g?"":""]}),e.jsxs(ms,{children:[e.jsx(et,{asChild:!0,children:e.jsxs(_,{disabled:m||f||j,size:"sm",className:"w-full sm:w-auto sm:min-w-[120px]",children:[e.jsx(pr,{className:"mr-2 h-4 w-4"}),j?"...":g?"":""]})}),e.jsxs(as,{children:[e.jsxs(ls,{children:[e.jsx(is,{children:""}),e.jsx(rs,{asChild:!0,children:e.jsx("div",{children:e.jsx("p",{children:g?",":","})})})]}),e.jsxs(ns,{children:[e.jsx(os,{children:""}),e.jsx(cs,{onClick:g?bt:Hs,children:g?"":""})]})]})]})]})]}),e.jsxs($t,{children:[e.jsx(Oa,{className:"h-4 w-4"}),e.jsxs(Qt,{children:["",e.jsx("strong",{children:""}),'""']})]}),e.jsxs(Ke,{className:"h-[calc(100vh-260px)]",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2 mb-4",children:[e.jsxs("div",{className:"relative w-full sm:flex-1 sm:max-w-sm",children:[e.jsx(Mt,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(ne,{placeholder:"URL ...",value:ye,onChange:E=>we(E.target.value),className:"pl-9"})]}),ye&&e.jsxs("p",{className:"text-sm text-muted-foreground whitespace-nowrap",children:[" ",js.length," "]})]}),e.jsx("div",{className:"md:hidden space-y-3",children:js.length===0?e.jsx("div",{className:"text-center text-muted-foreground py-8 rounded-lg border bg-card",children:ye?"":'""'}):aa.map((E,je)=>{const Te=n.findIndex(ys=>ys===E);return e.jsxs("div",{className:"rounded-lg border bg-card p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("h3",{className:"font-semibold text-base truncate",children:E.name}),le(E.name)]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1 break-all",children:E.base_url})]}),e.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[e.jsx(_,{variant:"outline",size:"sm",onClick:()=>Yt(E.name),disabled:ae.has(E.name),title:"",children:ae.has(E.name)?e.jsx(st,{className:"h-4 w-4 animate-spin"}):e.jsx(sn,{className:"h-4 w-4"})}),e.jsx(_,{variant:"default",size:"sm",onClick:()=>ze(E,Te),children:e.jsx(an,{className:"h-4 w-4",strokeWidth:2,fill:"none"})}),e.jsx(_,{size:"sm",onClick:()=>Is(Te),className:"bg-red-600 hover:bg-red-700 text-white",children:e.jsx(Pe,{className:"h-4 w-4",strokeWidth:2,fill:"none"})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground text-xs",children:""}),e.jsx("p",{className:"font-medium",children:E.client_type})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground text-xs",children:""}),e.jsx("p",{className:"font-medium",children:E.max_retry})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground text-xs",children:"()"}),e.jsx("p",{className:"font-medium",children:E.timeout})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground text-xs",children:"()"}),e.jsx("p",{className:"font-medium",children:E.retry_interval})]})]})]},je)})}),e.jsx("div",{className:"hidden md:block rounded-lg border bg-card overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(nn,{children:[e.jsx(rn,{children:e.jsxs(ct,{children:[e.jsx(Xe,{className:"w-12",children:e.jsx(ft,{checked:R.size===js.length&&js.length>0,onCheckedChange:vs})}),e.jsx(Xe,{children:""}),e.jsx(Xe,{children:""}),e.jsx(Xe,{children:"URL"}),e.jsx(Xe,{children:""}),e.jsx(Xe,{className:"text-right",children:""}),e.jsx(Xe,{className:"text-right",children:"()"}),e.jsx(Xe,{className:"text-right",children:"()"}),e.jsx(Xe,{className:"text-right",children:""})]})}),e.jsx(cn,{children:aa.length===0?e.jsx(ct,{children:e.jsx(He,{colSpan:9,className:"text-center text-muted-foreground py-8",children:ye?"":'""'})}):aa.map((E,je)=>{const Te=n.findIndex(ys=>ys===E);return e.jsxs(ct,{children:[e.jsx(He,{children:e.jsx(ft,{checked:R.has(Te),onCheckedChange:()=>We(Te)})}),e.jsx(He,{children:le(E.name)||e.jsx(qe,{variant:"outline",className:"text-muted-foreground",children:""})}),e.jsx(He,{className:"font-medium",children:E.name}),e.jsx(He,{className:"max-w-xs truncate",title:E.base_url,children:E.base_url}),e.jsx(He,{children:E.client_type}),e.jsx(He,{className:"text-right",children:E.max_retry}),e.jsx(He,{className:"text-right",children:E.timeout}),e.jsx(He,{className:"text-right",children:E.retry_interval}),e.jsx(He,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(_,{variant:"outline",size:"sm",onClick:()=>Yt(E.name),disabled:ae.has(E.name),title:"",children:ae.has(E.name)?e.jsx(st,{className:"h-4 w-4 animate-spin"}):e.jsx(sn,{className:"h-4 w-4"})}),e.jsxs(_,{variant:"default",size:"sm",onClick:()=>ze(E,Te),children:[e.jsx(an,{className:"h-4 w-4 mr-1",strokeWidth:2,fill:"none"}),""]}),e.jsxs(_,{size:"sm",onClick:()=>Is(Te),className:"bg-red-600 hover:bg-red-700 text-white",children:[e.jsx(Pe,{className:"h-4 w-4 mr-1",strokeWidth:2,fill:"none"}),""]})]})})]},je)})})]})})}),js.length>0&&e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{htmlFor:"page-size-provider",className:"text-sm whitespace-nowrap",children:""}),e.jsxs(Oe,{value:ue.toString(),onValueChange:E=>{ie(parseInt(E)),ce(1),X(new Set)},children:[e.jsx(Ae,{id:"page-size-provider",className:"w-20",children:e.jsx(Re,{})}),e.jsxs(De,{children:[e.jsx(te,{value:"10",children:"10"}),e.jsx(te,{value:"20",children:"20"}),e.jsx(te,{value:"50",children:"50"}),e.jsx(te,{value:"100",children:"100"})]})]}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[" ",(k-1)*ue+1," "," ",Math.min(k*ue,js.length),"  ",js.length," "]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{variant:"outline",size:"sm",onClick:()=>ce(1),disabled:k===1,className:"hidden sm:flex",children:e.jsx(ai,{className:"h-4 w-4"})}),e.jsxs(_,{variant:"outline",size:"sm",onClick:()=>ce(E=>Math.max(1,E-1)),disabled:k===1,children:[e.jsx(rl,{className:"h-4 w-4 sm:mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{type:"number",value:fe,onChange:E=>Ne(E.target.value),onKeyDown:E=>E.key==="Enter"&&ka(),placeholder:k.toString(),className:"w-16 h-8 text-center",min:1,max:Ys}),e.jsx(_,{variant:"outline",size:"sm",onClick:ka,disabled:!fe,className:"h-8",children:""})]}),e.jsxs(_,{variant:"outline",size:"sm",onClick:()=>ce(E=>E+1),disabled:k>=Ys,children:[e.jsx("span",{className:"hidden sm:inline",children:""}),e.jsx(Ua,{className:"h-4 w-4 sm:ml-1"})]}),e.jsx(_,{variant:"outline",size:"sm",onClick:()=>ce(Ys),disabled:k>=Ys,className:"hidden sm:flex",children:e.jsx(li,{className:"h-4 w-4"})})]})]})]}),e.jsx(qs,{open:w,onOpenChange:gs,children:e.jsxs(Rs,{className:"max-w-[95vw] sm:max-w-2xl max-h-[90vh] overflow-y-auto","data-tour":"provider-dialog",preventOutsideClose:Me.isRunning,children:[e.jsxs(Ls,{children:[e.jsx(Us,{children:I!==null?"":""}),e.jsx(Ks,{children:" API "})]}),e.jsxs("form",{onSubmit:E=>{E.preventDefault(),dt()},autoComplete:"off",children:[e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2","data-tour":"provider-template-select",children:[e.jsx(S,{htmlFor:"template",children:""}),e.jsxs(Ra,{open:Q,onOpenChange:z,children:[e.jsx(La,{asChild:!0,children:e.jsxs(_,{variant:"outline",role:"combobox","aria-expanded":Q,className:"w-full justify-between",children:[M?lr.find(E=>E.id===M)?.display_name:"...",e.jsx(Xu,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsx(Ca,{className:"p-0",align:"start",style:{width:"var(--radix-popover-trigger-width)"},children:e.jsxs(eo,{children:[e.jsx(so,{placeholder:"..."}),e.jsx(Ke,{className:"h-[300px]",children:e.jsxs(to,{className:"max-h-none overflow-visible",children:[e.jsx(ao,{children:""}),e.jsx(xr,{children:lr.map(E=>e.jsxs(fr,{value:E.display_name,onSelect:()=>Ie(E.id),children:[e.jsx(Vt,{className:`mr-2 h-4 w-4 ${M===E.id?"opacity-100":"opacity-0"}`}),E.display_name]},E.id))})]})})]})})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" URL ,"})]}),e.jsxs("div",{className:"grid gap-2","data-tour":"provider-name-input",children:[e.jsx(S,{htmlFor:"name",className:me.name?"text-destructive":"",children:" *"}),e.jsx(ne,{id:"name",value:O?.name||"",onChange:E=>{B(je=>je?{...je,name:E.target.value}:null),me.name&&ee(je=>({...je,name:void 0}))},placeholder:": DeepSeek, SiliconFlow",className:me.name?"border-destructive focus-visible:ring-destructive":""}),me.name&&e.jsx("p",{className:"text-xs text-destructive",children:me.name})]}),e.jsxs("div",{className:"grid gap-2","data-tour":"provider-url-input",children:[e.jsx(S,{htmlFor:"base_url",className:me.base_url?"text-destructive":"",children:" URL *"}),e.jsx(ne,{id:"base_url",value:O?.base_url||"",onChange:E=>{B(je=>je?{...je,base_url:E.target.value}:null),me.base_url&&ee(je=>({...je,base_url:void 0}))},placeholder:"https://api.example.com/v1",disabled:ks,className:`${ks?"bg-muted cursor-not-allowed":""} ${me.base_url?"border-destructive focus-visible:ring-destructive":""}`}),me.base_url&&e.jsx("p",{className:"text-xs text-destructive",children:me.base_url}),ks&&!me.base_url&&e.jsx("p",{className:"text-xs text-muted-foreground",children:' URL ,""'})]}),e.jsxs("div",{className:"grid gap-2","data-tour":"provider-apikey-input",children:[e.jsx(S,{htmlFor:"api_key",className:me.api_key?"text-destructive":"",children:"API Key *"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ne,{id:"api_key",type:_e?"text":"password",value:O?.api_key||"",onChange:E=>{B(je=>je?{...je,api_key:E.target.value}:null),me.api_key&&ee(je=>({...je,api_key:void 0}))},placeholder:"sk-...",className:`flex-1 ${me.api_key?"border-destructive focus-visible:ring-destructive":""}`}),e.jsx(_,{type:"button",variant:"outline",size:"icon",onClick:()=>pe(!_e),title:_e?"":"",children:_e?e.jsx(or,{className:"h-4 w-4"}):e.jsx(Ot,{className:"h-4 w-4"})}),e.jsx(_,{type:"button",variant:"outline",size:"icon",onClick:Ye,title:"",children:e.jsx(Qc,{className:"h-4 w-4"})})]}),me.api_key&&e.jsx("p",{className:"text-xs text-destructive",children:me.api_key})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"client_type",children:""}),e.jsxs(Oe,{value:O?.client_type||"openai",onValueChange:E=>B(je=>je?{...je,client_type:E}:null),disabled:ks,children:[e.jsx(Ae,{id:"client_type",className:ks?"bg-muted cursor-not-allowed":"",children:e.jsx(Re,{placeholder:""})}),e.jsxs(De,{children:[e.jsx(te,{value:"openai",children:"OpenAI"}),e.jsx(te,{value:"gemini",children:"Gemini"})]})]}),ks&&e.jsx("p",{className:"text-xs text-muted-foreground",children:',""'})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"max_retry",children:""}),e.jsx(ne,{id:"max_retry",type:"number",min:"0",value:O?.max_retry??"",onChange:E=>{const je=E.target.value===""?null:parseInt(E.target.value);B(Te=>Te?{...Te,max_retry:je}:null)},placeholder:": 2"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"timeout",children:"()"}),e.jsx(ne,{id:"timeout",type:"number",min:"1",value:O?.timeout??"",onChange:E=>{const je=E.target.value===""?null:parseInt(E.target.value);B(Te=>Te?{...Te,timeout:je}:null)},placeholder:": 30"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"retry_interval",children:"()"}),e.jsx(ne,{id:"retry_interval",type:"number",min:"1",value:O?.retry_interval??"",onChange:E=>{const je=E.target.value===""?null:parseInt(E.target.value);B(Te=>Te?{...Te,retry_interval:je}:null)},placeholder:": 10"})]})]})]}),e.jsxs(tt,{children:[e.jsx(_,{type:"button",variant:"outline",onClick:()=>U(!1),"data-tour":"provider-cancel-button",children:""}),e.jsx(_,{type:"submit","data-tour":"provider-save-button",children:""})]})]})]})}),e.jsx(ms,{open:A,onOpenChange:W,children:e.jsxs(as,{children:[e.jsxs(ls,{children:[e.jsx(is,{children:""}),e.jsxs(rs,{children:[' "',xe!==null?n[xe]?.name:"",'"  ']})]}),e.jsxs(ns,{children:[e.jsx(os,{children:""}),e.jsx(cs,{onClick:ve,children:""})]})]})}),e.jsx(ms,{open:C,onOpenChange:$,children:e.jsxs(as,{children:[e.jsxs(ls,{children:[e.jsx(is,{children:""}),e.jsxs(rs,{children:[" ",R.size,"  "]})]}),e.jsxs(ns,{children:[e.jsx(os,{children:""}),e.jsx(cs,{onClick:lt,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:""})]})]})}),N&&e.jsx(Wu,{onRestartComplete:ot,onRestartFailed:Ds})]})}function Yg(n){return typeof n=="boolean"?"boolean":typeof n=="number"?"number":"string"}function e1(n,i){switch(i){case"boolean":return n==="true";case"number":{const r=parseFloat(n);return isNaN(r)?0:r}default:return n}}function zu(n){return Object.entries(n).map(([i,r])=>({id:crypto.randomUUID(),key:i,value:r,type:Yg(r)}))}function Mu(n){const i={};for(const r of n)r.key.trim()&&(i[r.key.trim()]=r.value);return i}function Au(n){if(!n.trim())return{valid:!0,parsed:{}};try{const i=JSON.parse(n);if(typeof i!="object"||i===null||Array.isArray(i))return{valid:!1,error:" JSON  {}"};for(const[r,d]of Object.entries(i))if(d!==null&&!["string","number","boolean"].includes(typeof d))return{valid:!1,error:` "${r}"  string/number/boolean`};return{valid:!0,parsed:i}}catch{return{valid:!1,error:"JSON "}}}function s1(n){switch(n){case"boolean":return"";case"number":return"";default:return""}}function t1(n){switch(n){case"boolean":return"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400";case"number":return"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400";default:return"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400"}}function a1({value:n,onChange:i,className:r,placeholder:d="..."}){const[m,h]=u.useState("list"),[f,p]=u.useState(()=>zu(n||{})),[g,b]=u.useState(()=>Object.keys(n||{}).length>0?JSON.stringify(n,null,2):""),[j,y]=u.useState(null);u.useEffect(()=>{const I=zu(n||{});p(I),b(Object.keys(n||{}).length>0?JSON.stringify(n,null,2):"")},[n]);const N=u.useMemo(()=>{const I=Au(g);return I.valid&&I.parsed?{success:!0,data:I.parsed}:{success:!1,data:{}}},[g]),T=u.useCallback(I=>{const L=I;if(L==="json"&&m==="list"){const M=Mu(f);b(Object.keys(M).length>0?JSON.stringify(M,null,2):""),y(null)}else if(L==="list"&&m==="json"){const M=Au(g);M.valid&&M.parsed&&(p(zu(M.parsed)),y(null))}h(L)},[m,f,g]),w=u.useCallback(()=>{const I={id:crypto.randomUUID(),key:"",value:"",type:"string"},L=[...f,I];p(L)},[f]),U=u.useCallback(I=>{const L=f.filter(M=>M.id!==I);p(L),i(Mu(L))},[f,i]),O=u.useCallback((I,L,M)=>{const Y=f.map(Q=>{if(Q.id!==I)return Q;if(L==="type"){const z=M;let A;return z==="boolean"?A=Q.value==="true"||Q.value===!0:z==="number"?A=typeof Q.value=="number"?Q.value:parseFloat(String(Q.value))||0:A=String(Q.value),{...Q,type:z,value:A}}else return L==="value"?{...Q,value:e1(M,Q.type)}:{...Q,[L]:M}});p(Y),i(Mu(Y))},[f,i]),B=u.useCallback(I=>{b(I);const L=Au(I);L.valid&&L.parsed?(y(null),i(L.parsed)):y(L.error||"JSON ")},[i]);return e.jsxs("div",{className:q("space-y-3",r),children:[e.jsx(S,{className:"text-sm font-medium",children:""}),e.jsxs(Sa,{value:m,onValueChange:T,className:"w-full",children:[e.jsxs(pa,{className:"h-8 p-0.5 bg-muted/60",children:[e.jsx(es,{value:"list",className:"h-7 px-3 text-xs data-[state=active]:bg-background data-[state=active]:shadow-sm",children:""}),e.jsx(es,{value:"json",className:"h-7 px-3 text-xs data-[state=active]:bg-background data-[state=active]:shadow-sm",children:"JSON"})]}),e.jsxs(_s,{value:"list",className:"mt-3 space-y-2",children:[f.length===0?e.jsx("div",{className:"text-sm text-muted-foreground text-center py-4 border border-dashed rounded-md",children:d}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"grid grid-cols-[1fr_1fr_90px_32px] gap-2 text-xs text-muted-foreground px-1",children:[e.jsx("span",{children:""}),e.jsx("span",{children:""}),e.jsx("span",{children:""}),e.jsx("span",{})]}),f.map(I=>e.jsxs("div",{className:"grid grid-cols-[1fr_1fr_90px_32px] gap-2 items-center",children:[e.jsx(ne,{value:I.key,onChange:L=>O(I.id,"key",L.target.value),placeholder:"key",className:"h-8 text-sm"}),I.type==="boolean"?e.jsxs("div",{className:"flex items-center h-8 px-3 border rounded-md bg-background",children:[e.jsx(Ge,{checked:I.value===!0,onCheckedChange:L=>O(I.id,"value",String(L))}),e.jsx("span",{className:"ml-2 text-sm text-muted-foreground",children:I.value?"true":"false"})]}):e.jsx(ne,{type:I.type==="number"?"number":"text",value:I.value,onChange:L=>O(I.id,"value",L.target.value),placeholder:"value",className:"h-8 text-sm",step:I.type==="number"?"any":void 0}),e.jsxs(Oe,{value:I.type,onValueChange:L=>O(I.id,"type",L),children:[e.jsx(Ae,{className:"h-8 text-xs",children:e.jsx(Re,{})}),e.jsxs(De,{children:[e.jsx(te,{value:"string",children:""}),e.jsx(te,{value:"number",children:""}),e.jsx(te,{value:"boolean",children:""})]})]}),e.jsx(_,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8 text-muted-foreground hover:text-destructive",onClick:()=>U(I.id),children:e.jsx(Pe,{className:"h-4 w-4"})})]},I.id))]}),e.jsxs(_,{type:"button",variant:"outline",size:"sm",className:"w-full h-8",onClick:w,children:[e.jsx(rt,{className:"h-4 w-4 mr-1"}),""]})]}),e.jsx(_s,{value:"json",className:"mt-3",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:""}),j?e.jsxs("div",{className:"flex items-center gap-1 text-xs text-destructive",children:[e.jsx(zt,{className:"h-3 w-3"}),e.jsx("span",{className:"truncate max-w-[150px]",children:j})]}):g.trim()&&e.jsxs("div",{className:"flex items-center gap-1 text-xs text-green-600 dark:text-green-400",children:[e.jsx(Vt,{className:"h-3 w-3"}),e.jsx("span",{children:""})]})]}),e.jsx(Ms,{value:g,onChange:I=>B(I.target.value),placeholder:`{
  "key": "value"
}`,className:q("font-mono text-sm min-h-[140px] h-[140px] resize-y flex-1",j&&"border-destructive focus-visible:ring-destructive")}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" stringnumberboolean "})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:""}),e.jsx("div",{className:"min-h-[140px] h-[140px] flex-1 rounded-md border bg-muted/30 p-3 overflow-auto",children:N.success&&Object.keys(N.data).length>0?e.jsx("div",{className:"space-y-2",children:Object.entries(N.data).map(([I,L])=>{const M=Yg(L);return e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("code",{className:"px-1.5 py-0.5 bg-background rounded text-xs font-medium",children:I}),e.jsx("span",{className:"text-muted-foreground",children:"="}),e.jsx("span",{className:q("font-mono",M==="boolean"&&(L?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),M==="number"&&"text-blue-600 dark:text-blue-400",M==="string"&&"text-amber-600 dark:text-amber-400"),children:M==="string"?`"${L}"`:String(L)}),e.jsx(qe,{variant:"secondary",className:q("h-5 text-[10px] px-1.5",t1(M)),children:s1(M)})]},I)})}):N.success?e.jsx("div",{className:"flex items-center justify-center h-full text-sm text-muted-foreground",children:""}):e.jsx("div",{className:"flex items-center justify-center h-full text-sm text-destructive",children:"JSON "})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})]})})]})]})}function l1({value:n,label:i,onRemove:r}){const{attributes:d,listeners:m,setNodeRef:h,transform:f,transition:p,isDragging:g}=Yy({id:n}),b={transform:Xy.Transform.toString(f),transition:p,opacity:g?.5:1},j=N=>{N.preventDefault(),N.stopPropagation(),r(n)},y=N=>{N.stopPropagation()};return e.jsx("div",{ref:h,style:b,className:q("inline-flex items-center gap-1",g&&"shadow-lg"),children:e.jsxs(qe,{variant:"secondary",className:"cursor-move hover:bg-secondary/80 flex items-center gap-1",children:[e.jsx("div",{...d,...m,className:"cursor-grab active:cursor-grabbing flex items-center",children:e.jsx(dy,{className:"h-3 w-3 text-muted-foreground"})}),e.jsx("span",{children:i}),e.jsx("button",{type:"button",className:"ml-1 rounded-sm hover:bg-destructive/20 focus:outline-none focus:ring-1 focus:ring-destructive",onClick:j,onPointerDown:y,onMouseDown:N=>N.stopPropagation(),children:e.jsx(il,{className:"h-3 w-3 cursor-pointer hover:text-destructive",strokeWidth:2,fill:"none"})})]})})}function n1({options:n,selected:i,onChange:r,placeholder:d="...",emptyText:m="",className:h}){const[f,p]=u.useState(!1),g=By(lp(Iy,{activationConstraint:{distance:8}}),lp(Qy,{coordinateGetter:$y})),b=N=>{i.includes(N)?r(i.filter(T=>T!==N)):r([...i,N])},j=N=>{r(i.filter(T=>T!==N))},y=N=>{const{active:T,over:w}=N;if(w&&T.id!==w.id){const U=i.indexOf(T.id),O=i.indexOf(w.id);r(Vy(i,U,O))}};return e.jsxs(Ra,{open:f,onOpenChange:p,children:[e.jsx(La,{asChild:!0,children:e.jsxs(_,{variant:"outline",role:"combobox","aria-expanded":f,className:q("w-full justify-between min-h-10 h-auto",h),children:[e.jsx(Hy,{sensors:g,collisionDetection:qy,onDragEnd:y,children:e.jsx(Gy,{items:i,strategy:Fy,children:e.jsx("div",{className:"flex gap-1 flex-wrap flex-1",children:i.length===0?e.jsx("span",{className:"text-muted-foreground",children:d}):i.map(N=>{const T=n.find(w=>w.value===N);return e.jsx(l1,{value:N,label:T?.label||N,onRemove:j},N)})})})}),e.jsx(Xu,{className:"ml-2 h-4 w-4 shrink-0 opacity-50",strokeWidth:2,fill:"none"})]})}),e.jsx(Ca,{className:"w-full p-0",align:"start",children:e.jsxs(eo,{children:[e.jsx(so,{placeholder:"...",className:"h-9"}),e.jsxs(to,{children:[e.jsx(ao,{children:m}),e.jsx(xr,{children:n.map(N=>{const T=i.includes(N.value);return e.jsxs(fr,{value:N.value,onSelect:()=>b(N.value),children:[e.jsx("div",{className:q("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",T?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"),children:e.jsx(Vt,{className:"h-3 w-3",strokeWidth:2,fill:"none"})}),e.jsx("span",{children:N.label})]},N.value)})})]})]})})]})}const ya=pt.memo(function({title:i,description:r,taskConfig:d,modelNames:m,onChange:h,hideTemperature:f=!1,hideMaxTokens:p=!1,dataTour:g}){const b=j=>{h("model_list",j)};return e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-base sm:text-lg",children:i}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mt-1",children:r})]}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-2","data-tour":g,children:[e.jsx(S,{children:""}),e.jsx(n1,{options:m.map(j=>({label:j,value:j})),selected:d.model_list||[],onChange:b,placeholder:"...",emptyText:""})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[!f&&e.jsxs("div",{className:"grid gap-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(S,{children:""}),e.jsx(ne,{type:"number",step:"0.1",min:"0",max:"1",value:d.temperature??.3,onChange:j=>{const y=parseFloat(j.target.value);!isNaN(y)&&y>=0&&y<=1&&h("temperature",y)},className:"w-20 h-8 text-sm"})]}),e.jsx(fa,{value:[d.temperature??.3],onValueChange:j=>h("temperature",j[0]),min:0,max:1,step:.1,className:"w-full"})]}),!p&&e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{children:" Token"}),e.jsx(ne,{type:"number",step:"1",min:"1",value:d.max_tokens??1024,onChange:j=>h("max_tokens",parseInt(j.target.value))})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(S,{children:" ()"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:""})]}),e.jsx(ne,{type:"number",step:"1",min:"1",value:d.slow_threshold??15,onChange:j=>{const y=parseInt(j.target.value);!isNaN(y)&&y>=1&&h("slow_threshold",y)},placeholder:"15"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})]})]})}),i1=pt.memo(function({paginatedModels:i,allModels:r,onEdit:d,onDelete:m,isModelUsed:h,searchQuery:f}){return i.length===0?e.jsx("div",{className:"md:hidden text-center text-muted-foreground py-8 rounded-lg border bg-card",children:f?"":""}):e.jsx("div",{className:"md:hidden space-y-3",children:i.map((p,g)=>{const b=r.findIndex(y=>y===p),j=h(p.name);return e.jsxs("div",{className:"rounded-lg border bg-card p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"font-semibold text-base",children:p.name}),e.jsx(qe,{variant:j?"default":"secondary",className:j?"bg-green-600 hover:bg-green-700":"",children:j?"":""})]}),e.jsx("p",{className:"text-xs text-muted-foreground break-all",title:p.model_identifier,children:p.model_identifier})]}),e.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[e.jsxs(_,{variant:"default",size:"sm",onClick:()=>d(p,b),children:[e.jsx(an,{className:"h-4 w-4 mr-1",strokeWidth:2,fill:"none"}),""]}),e.jsxs(_,{size:"sm",onClick:()=>m(b),className:"bg-red-600 hover:bg-red-700 text-white",children:[e.jsx(Pe,{className:"h-4 w-4 mr-1",strokeWidth:2,fill:"none"}),""]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground text-xs",children:""}),e.jsx("p",{className:"font-medium",children:p.api_provider})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground text-xs",children:""}),e.jsx("p",{className:"font-medium",children:p.temperature!=null?p.temperature:e.jsx("span",{className:"text-muted-foreground",children:""})})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground text-xs",children:""}),e.jsxs("p",{className:"font-medium",children:["",p.price_in,"/M"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground text-xs",children:""}),e.jsxs("p",{className:"font-medium",children:["",p.price_out,"/M"]})]})]})]},g)})})}),r1=pt.memo(function({paginatedModels:i,allModels:r,filteredModels:d,selectedModels:m,onEdit:h,onDelete:f,onToggleSelection:p,onToggleSelectAll:g,isModelUsed:b,searchQuery:j}){return e.jsx("div",{className:"hidden md:block rounded-lg border bg-card overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(nn,{children:[e.jsx(rn,{children:e.jsxs(ct,{children:[e.jsx(Xe,{className:"w-12",children:e.jsx(ft,{checked:m.size===d.length&&d.length>0,onCheckedChange:g})}),e.jsx(Xe,{className:"w-24",children:""}),e.jsx(Xe,{children:""}),e.jsx(Xe,{children:""}),e.jsx(Xe,{children:""}),e.jsx(Xe,{className:"text-center",children:""}),e.jsx(Xe,{className:"text-right",children:""}),e.jsx(Xe,{className:"text-right",children:""}),e.jsx(Xe,{className:"text-right",children:""})]})}),e.jsx(cn,{children:i.length===0?e.jsx(ct,{children:e.jsx(He,{colSpan:9,className:"text-center text-muted-foreground py-8",children:j?"":""})}):i.map((y,N)=>{const T=r.findIndex(U=>U===y),w=b(y.name);return e.jsxs(ct,{children:[e.jsx(He,{children:e.jsx(ft,{checked:m.has(T),onCheckedChange:()=>p(T)})}),e.jsx(He,{children:e.jsx(qe,{variant:w?"default":"secondary",className:w?"bg-green-600 hover:bg-green-700":"",children:w?"":""})}),e.jsx(He,{className:"font-medium",children:y.name}),e.jsx(He,{className:"max-w-xs truncate",title:y.model_identifier,children:y.model_identifier}),e.jsx(He,{children:y.api_provider}),e.jsx(He,{className:"text-center",children:y.temperature!=null?y.temperature:e.jsx("span",{className:"text-muted-foreground",children:"-"})}),e.jsxs(He,{className:"text-right",children:["",y.price_in,"/M"]}),e.jsxs(He,{className:"text-right",children:["",y.price_out,"/M"]}),e.jsx(He,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsxs(_,{variant:"default",size:"sm",onClick:()=>h(y,T),children:[e.jsx(an,{className:"h-4 w-4 mr-1",strokeWidth:2,fill:"none"}),""]}),e.jsxs(_,{size:"sm",onClick:()=>f(T),className:"bg-red-600 hover:bg-red-700 text-white",children:[e.jsx(Pe,{className:"h-4 w-4 mr-1",strokeWidth:2,fill:"none"}),""]})]})})]},N)})})]})})})}),c1=300*1e3,jp=new Map,o1=[10,20,50,100],d1=pt.memo(function({page:i,pageSize:r,totalItems:d,jumpToPage:m,onPageChange:h,onPageSizeChange:f,onJumpToPageChange:p,onJumpToPage:g,onSelectionClear:b}){const j=Math.ceil(d/r),y=T=>{f(parseInt(T)),h(1),b?.()},N=T=>{T.key==="Enter"&&g()};return d===0?null:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{htmlFor:"page-size-model",className:"text-sm whitespace-nowrap",children:""}),e.jsxs(Oe,{value:r.toString(),onValueChange:y,children:[e.jsx(Ae,{id:"page-size-model",className:"w-20",children:e.jsx(Re,{})}),e.jsx(De,{children:o1.map(T=>e.jsx(te,{value:T.toString(),children:T},T))})]}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[" ",(i-1)*r+1," "," ",Math.min(i*r,d),"  ",d," "]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{variant:"outline",size:"sm",onClick:()=>h(1),disabled:i===1,className:"hidden sm:flex",children:e.jsx(ai,{className:"h-4 w-4"})}),e.jsxs(_,{variant:"outline",size:"sm",onClick:()=>h(Math.max(1,i-1)),disabled:i===1,children:[e.jsx(rl,{className:"h-4 w-4 sm:mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{type:"number",value:m,onChange:T=>p(T.target.value),onKeyDown:N,placeholder:i.toString(),className:"w-16 h-8 text-center",min:1,max:j}),e.jsx(_,{variant:"outline",size:"sm",onClick:g,disabled:!m,className:"h-8",children:""})]}),e.jsxs(_,{variant:"outline",size:"sm",onClick:()=>h(i+1),disabled:i>=j,children:[e.jsx("span",{className:"hidden sm:inline",children:""}),e.jsx(Ua,{className:"h-4 w-4 sm:ml-1"})]}),e.jsx(_,{variant:"outline",size:"sm",onClick:()=>h(j),disabled:i>=j,className:"hidden sm:flex",children:e.jsx(li,{className:"h-4 w-4"})})]})]})});function u1(n){const{models:i,taskConfig:r,debounceMs:d=2e3,onSavingChange:m,onUnsavedChange:h}=n,f=u.useRef(null),p=u.useRef(null),g=u.useRef(!0),b=u.useCallback(()=>{f.current&&(clearTimeout(f.current),f.current=null),p.current&&(clearTimeout(p.current),p.current=null)},[]),j=u.useCallback(async N=>{try{m?.(!0),await Gu("models",N),h?.(!1)}catch(T){console.error(":",T),h?.(!0)}finally{m?.(!1)}},[m,h]),y=u.useCallback(async N=>{try{m?.(!0),await Gu("model_task_config",N),h?.(!1)}catch(T){console.error(":",T),h?.(!0)}finally{m?.(!1)}},[m,h]);return u.useEffect(()=>{if(!g.current)return h?.(!0),f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{j(i)},d),()=>{f.current&&clearTimeout(f.current)}},[i,j,d,h]),u.useEffect(()=>{if(!(g.current||!r))return h?.(!0),p.current&&clearTimeout(p.current),p.current=setTimeout(()=>{y(r)},d),()=>{p.current&&clearTimeout(p.current)}},[r,y,d,h]),u.useEffect(()=>()=>{b()},[b]),{clearTimers:b,initialLoadRef:g}}function m1(n={}){const{onCloseEditDialog:i}=n,r=ja(),{registerTour:d,startTour:m,state:h,goToStep:f}=em(),p=u.useRef(h.stepIndex);return u.useEffect(()=>{d(Aa,Qg)},[d]),u.useEffect(()=>{if(h.activeTourId===Aa&&h.isRunning){const b=Ig[h.stepIndex];b&&!window.location.pathname.endsWith(b.replace("/config/",""))&&r({to:b})}},[h.stepIndex,h.activeTourId,h.isRunning,r]),u.useEffect(()=>{if(h.activeTourId===Aa&&h.isRunning){const b=p.current,j=h.stepIndex;b>=12&&b<=17&&j<12&&i?.(),p.current=j}},[h.stepIndex,h.activeTourId,h.isRunning,i]),u.useEffect(()=>{if(h.activeTourId!==Aa||!h.isRunning)return;const b=j=>{const y=j.target,N=h.stepIndex;N===2&&y.closest('[data-tour="add-provider-button"]')?setTimeout(()=>f(3),300):N===9&&y.closest('[data-tour="provider-cancel-button"]')?setTimeout(()=>f(10),300):N===11&&y.closest('[data-tour="add-model-button"]')?setTimeout(()=>f(12),300):N===17&&y.closest('[data-tour="model-cancel-button"]')?setTimeout(()=>f(18),300):N===18&&y.closest('[data-tour="tasks-tab-trigger"]')&&setTimeout(()=>f(19),300)};return document.addEventListener("click",b,!0),()=>document.removeEventListener("click",b,!0)},[h,f]),{startTour:u.useCallback(()=>{m(Aa)},[m]),isRunning:h.isRunning&&h.activeTourId===Aa,stepIndex:h.stepIndex}}function h1(n){const{getProviderConfig:i}=n,[r,d]=u.useState([]),[m,h]=u.useState(!1),[f,p]=u.useState(null),[g,b]=u.useState(null),j=u.useCallback(()=>{d([]),p(null),b(null)},[]),y=u.useCallback(async(N,T=!1)=>{const w=i(N);if(!w?.base_url){d([]),b(null),p('""');return}if(!w.api_key){d([]),b(null),p(' API Key""');return}const U=Zw(w.base_url);if(b(U),!U?.modelFetcher){d([]),p(null);return}const O=`${N}:${w.base_url}`,B=jp.get(O);if(!T&&B&&Date.now()-B.timestamp<c1){d(B.models),p(null);return}h(!0),p(null);try{const I=await Ow(N,U.modelFetcher.parser,U.modelFetcher.endpoint);d(I),jp.set(O,{models:I,timestamp:Date.now()})}catch(I){console.error(":",I);const L=I.message||"";L.includes("")||L.includes("")||L.includes("API Key")?p('API Key ""'):L.includes("")?p(" API Key "):L.includes("timeout")||L.includes("")?p(""):L.includes("")?p(""):p(L),d([])}finally{h(!1)}},[i]);return{availableModels:r,fetchingModels:m,modelFetchError:f,matchedTemplate:g,fetchModelsForProvider:y,clearModels:j}}function x1(){const[n,i]=u.useState([]),[r,d]=u.useState([]),[m,h]=u.useState([]),[f,p]=u.useState([]),[g,b]=u.useState(null),[j,y]=u.useState(!0),[N,T]=u.useState(!1),[w,U]=u.useState(!1),[O,B]=u.useState(!1),[I,L]=u.useState(!1),[M,Y]=u.useState(!1),[Q,z]=u.useState(!1),[A,W]=u.useState(null),[xe,be]=u.useState(null),[_e,pe]=u.useState(!1),[ye,we]=u.useState(null),[R,X]=u.useState(""),[C,$]=u.useState(new Set),[k,ce]=u.useState(!1),[ue,ie]=u.useState(1),[fe,Ne]=u.useState(20),[me,ee]=u.useState(""),[ae,V]=u.useState(!1),[P,Ce]=u.useState({}),{toast:Le}=Bs(),{startTour:ge,isRunning:Me}=m1({onCloseEditDialog:()=>z(!1)}),{clearTimers:$s,initialLoadRef:gt}=u1({models:n,taskConfig:g,onSavingChange:U,onUnsavedChange:B}),oe=u.useCallback(async()=>{try{y(!0);const le=await Zn(),E=le.models||[];i(E),p(E.map(Te=>Te.name));const je=le.api_providers||[];d(je.map(Te=>Te.name)),h(je),b(le.model_task_config||null),B(!1),gt.current=!1}catch(le){console.error(":",le)}finally{y(!1)}},[gt]);u.useEffect(()=>{oe()},[oe]);const Fe=u.useCallback(le=>m.find(E=>E.name===le),[m]),{availableModels:Qe,fetchingModels:Qs,modelFetchError:Hs,matchedTemplate:bt,fetchModelsForProvider:ot,clearModels:Ds}=h1({getProviderConfig:Fe});u.useEffect(()=>{Q&&A?.api_provider&&ot(A.api_provider)},[Q,A?.api_provider,ot]);const G=async()=>{try{L(!0),Wc().catch(()=>{}),Y(!0)}catch(le){console.error(":",le),Y(!1),Le({title:"",description:"",variant:"destructive"}),L(!1)}},Be=async()=>{try{T(!0),$s();const le=await Zn();le.models=n,le.model_task_config=g,await Kc(le),B(!1),Le({title:"",description:"..."}),await G()}catch(le){console.error(":",le),Le({title:"",description:le.message,variant:"destructive"}),T(!1)}},ze=()=>{localStorage.removeItem("access-token"),window.location.href="/auth"},Ie=()=>{Y(!1),L(!1),Le({title:"",description:"",variant:"destructive"})},ks=async()=>{try{T(!0),$s();const le=await Zn();le.models=n,le.model_task_config=g,await Kc(le),B(!1),Le({title:"",description:""}),await oe()}catch(le){console.error(":",le),Le({title:"",description:le.message,variant:"destructive"})}finally{T(!1)}},Ye=(le,E)=>{Ce({}),W(le||{model_identifier:"",name:"",api_provider:r[0]||"",price_in:0,price_out:0,temperature:null,max_tokens:null,force_stream_mode:!1,extra_params:{}}),be(E),z(!0)},dt=()=>{if(!A)return;const le={};if(A.name?.trim()||(le.name=""),A.api_provider?.trim()||(le.api_provider=" API "),A.model_identifier?.trim()||(le.model_identifier=""),Object.keys(le).length>0){Ce(le);return}Ce({});const E={...A,price_in:A.price_in??0,price_out:A.price_out??0};let je,Te=null;if(xe!==null?(Te=n[xe].name,je=[...n],je[xe]=E):je=[...n,E],i(je),p(je.map(ys=>ys.name)),Te&&Te!==E.name&&g){const ys=io=>io.map(ri=>ri===Te?E.name:ri);b({...g,utils:{...g.utils,model_list:ys(g.utils?.model_list||[])},utils_small:{...g.utils_small,model_list:ys(g.utils_small?.model_list||[])},tool_use:{...g.tool_use,model_list:ys(g.tool_use?.model_list||[])},replyer:{...g.replyer,model_list:ys(g.replyer?.model_list||[])},planner:{...g.planner,model_list:ys(g.planner?.model_list||[])},vlm:{...g.vlm,model_list:ys(g.vlm?.model_list||[])},voice:{...g.voice,model_list:ys(g.voice?.model_list||[])},embedding:{...g.embedding,model_list:ys(g.embedding?.model_list||[])},lpmm_entity_extract:{...g.lpmm_entity_extract,model_list:ys(g.lpmm_entity_extract?.model_list||[])},lpmm_rdf_build:{...g.lpmm_rdf_build,model_list:ys(g.lpmm_rdf_build?.model_list||[])},lpmm_qa:{...g.lpmm_qa,model_list:ys(g.lpmm_qa?.model_list||[])}})}z(!1),W(null),be(null)},gs=le=>{if(!le&&A){const E={...A,price_in:A.price_in??0,price_out:A.price_out??0};W(E)}z(le)},Is=le=>{we(le),pe(!0)},ve=()=>{if(ye!==null){const le=n.filter((E,je)=>je!==ye);i(le),p(le.map(E=>E.name)),Le({title:"",description:""})}pe(!1),we(null)},We=le=>{const E=new Set(C);E.has(le)?E.delete(le):E.add(le),$(E)},vs=()=>{if(C.size===Ys.length)$(new Set);else{const le=Ys.map((E,je)=>n.findIndex(Te=>Te===Ys[je]));$(new Set(le))}},At=()=>{if(C.size===0){Le({title:"",description:"",variant:"default"});return}ce(!0)},lt=()=>{const le=n.filter((E,je)=>!C.has(je));i(le),p(le.map(E=>E.name)),$(new Set),ce(!1),Le({title:"",description:` ${C.size} `})},js=(le,E,je)=>{g&&b({...g,[le]:{...g[le],[E]:je}})},Ys=n.filter(le=>{if(!R)return!0;const E=R.toLowerCase();return le.name.toLowerCase().includes(E)||le.model_identifier.toLowerCase().includes(E)||le.api_provider.toLowerCase().includes(E)}),aa=Math.ceil(Ys.length/fe),ka=Ys.slice((ue-1)*fe,ue*fe),Yt=()=>{const le=parseInt(me);le>=1&&le<=aa&&(ie(le),ee(""))},Ba=le=>g?[g.utils?.model_list||[],g.utils_small?.model_list||[],g.tool_use?.model_list||[],g.replyer?.model_list||[],g.planner?.model_list||[],g.vlm?.model_list||[],g.voice?.model_list||[],g.embedding?.model_list||[],g.lpmm_entity_extract?.model_list||[],g.lpmm_rdf_build?.model_list||[],g.lpmm_qa?.model_list||[]].some(je=>je.includes(le)):!1;return j?e.jsx(Ke,{className:"h-full",children:e.jsx("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("p",{className:"text-muted-foreground",children:"..."})})})}):e.jsx(Ke,{className:"h-full",children:e.jsxs("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:""}),e.jsx("p",{className:"text-muted-foreground mt-1 sm:mt-2 text-sm sm:text-base",children:""})]}),e.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[e.jsxs(_,{onClick:ks,disabled:N||w||!O||I,size:"sm",variant:"outline",className:"flex-1 sm:flex-none sm:min-w-[120px]",children:[e.jsx(gr,{className:"mr-2 h-4 w-4",strokeWidth:2,fill:"none"}),N?"...":w?"...":O?"":""]}),e.jsxs(ms,{children:[e.jsx(et,{asChild:!0,children:e.jsxs(_,{disabled:N||w||I,size:"sm",className:"flex-1 sm:flex-none sm:min-w-[120px]",children:[e.jsx(pr,{className:"mr-2 h-4 w-4"}),I?"...":O?"":""]})}),e.jsxs(as,{children:[e.jsxs(ls,{children:[e.jsx(is,{children:""}),e.jsx(rs,{asChild:!0,children:e.jsx("div",{children:e.jsx("p",{children:O?",":","})})})]}),e.jsxs(ns,{children:[e.jsx(os,{children:""}),e.jsx(cs,{onClick:O?Be:G,children:O?"":""})]})]})]})]})]}),e.jsxs($t,{children:[e.jsx(Oa,{className:"h-4 w-4"}),e.jsxs(Qt,{children:["",e.jsx("strong",{children:""}),'""']})]}),e.jsxs($t,{className:"hidden lg:flex border-primary/30 bg-primary/5 cursor-pointer hover:bg-primary/10 transition-colors",onClick:ge,children:[e.jsx(uy,{className:"h-4 w-4 text-primary"}),e.jsxs(Qt,{className:"flex items-center justify-between",children:[e.jsxs("span",{children:[e.jsx("strong",{className:"text-primary",children:""}),""]}),e.jsx(_,{variant:"outline",size:"sm",className:"ml-4 shrink-0",children:""})]})]}),e.jsxs(Sa,{defaultValue:"models",className:"w-full",children:[e.jsxs(pa,{className:"grid w-full max-w-full sm:max-w-md grid-cols-2",children:[e.jsx(es,{value:"models",children:""}),e.jsx(es,{value:"tasks","data-tour":"tasks-tab-trigger",children:""})]}),e.jsxs(_s,{value:"models",className:"space-y-4 mt-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:""}),e.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[C.size>0&&e.jsxs(_,{onClick:At,size:"sm",variant:"destructive",className:"w-full sm:w-auto",children:[e.jsx(Pe,{className:"mr-2 h-4 w-4",strokeWidth:2,fill:"none"})," (",C.size,")"]}),e.jsxs(_,{onClick:()=>Ye(null,null),size:"sm",variant:"outline",className:"w-full sm:w-auto","data-tour":"add-model-button",children:[e.jsx(rt,{className:"mr-2 h-4 w-4",strokeWidth:2,fill:"none"}),""]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2",children:[e.jsxs("div",{className:"relative w-full sm:flex-1 sm:max-w-sm",children:[e.jsx(Mt,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(ne,{placeholder:"...",value:R,onChange:le=>X(le.target.value),className:"pl-9"})]}),R&&e.jsxs("p",{className:"text-sm text-muted-foreground whitespace-nowrap",children:[" ",Ys.length," "]})]}),e.jsx(i1,{paginatedModels:ka,allModels:n,onEdit:Ye,onDelete:Is,isModelUsed:Ba,searchQuery:R}),e.jsx(r1,{paginatedModels:ka,allModels:n,filteredModels:Ys,selectedModels:C,onEdit:Ye,onDelete:Is,onToggleSelection:We,onToggleSelectAll:vs,isModelUsed:Ba,searchQuery:R}),e.jsx(d1,{page:ue,pageSize:fe,totalItems:Ys.length,jumpToPage:me,onPageChange:ie,onPageSizeChange:Ne,onJumpToPageChange:ee,onJumpToPage:Yt,onSelectionClear:()=>$(new Set)})]}),e.jsxs(_s,{value:"tasks",className:"space-y-6 mt-0",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:""}),g&&e.jsxs("div",{className:"grid gap-4 sm:gap-6",children:[e.jsx(ya,{title:" (utils)",description:"",taskConfig:g.utils,modelNames:f,onChange:(le,E)=>js("utils",le,E),dataTour:"task-model-select"}),e.jsx(ya,{title:" (utils_small)",description:"",taskConfig:g.utils_small,modelNames:f,onChange:(le,E)=>js("utils_small",le,E)}),e.jsx(ya,{title:" (tool_use)",description:"",taskConfig:g.tool_use,modelNames:f,onChange:(le,E)=>js("tool_use",le,E)}),e.jsx(ya,{title:" (replyer)",description:"",taskConfig:g.replyer,modelNames:f,onChange:(le,E)=>js("replyer",le,E)}),e.jsx(ya,{title:" (planner)",description:"",taskConfig:g.planner,modelNames:f,onChange:(le,E)=>js("planner",le,E)}),e.jsx(ya,{title:" (vlm)",description:"",taskConfig:g.vlm,modelNames:f,onChange:(le,E)=>js("vlm",le,E),hideTemperature:!0}),e.jsx(ya,{title:" (voice)",description:"",taskConfig:g.voice,modelNames:f,onChange:(le,E)=>js("voice",le,E),hideTemperature:!0,hideMaxTokens:!0}),e.jsx(ya,{title:" (embedding)",description:"",taskConfig:g.embedding,modelNames:f,onChange:(le,E)=>js("embedding",le,E),hideTemperature:!0,hideMaxTokens:!0}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"LPMM "}),e.jsx(ya,{title:" (lpmm_entity_extract)",description:"",taskConfig:g.lpmm_entity_extract,modelNames:f,onChange:(le,E)=>js("lpmm_entity_extract",le,E)}),e.jsx(ya,{title:"RDF  (lpmm_rdf_build)",description:"",taskConfig:g.lpmm_rdf_build,modelNames:f,onChange:(le,E)=>js("lpmm_rdf_build",le,E)}),e.jsx(ya,{title:" (lpmm_qa)",description:"",taskConfig:g.lpmm_qa,modelNames:f,onChange:(le,E)=>js("lpmm_qa",le,E)})]})]})]})]}),e.jsx(qs,{open:Q,onOpenChange:gs,children:e.jsxs(Rs,{className:"max-w-[95vw] sm:max-w-2xl max-h-[90vh] overflow-y-auto","data-tour":"model-dialog",preventOutsideClose:Me,children:[e.jsxs(Ls,{children:[e.jsx(Us,{children:xe!==null?"":""}),e.jsx(Ks,{children:""})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2","data-tour":"model-name-input",children:[e.jsx(S,{htmlFor:"model_name",className:P.name?"text-destructive":"",children:" *"}),e.jsx(ne,{id:"model_name",value:A?.name||"",onChange:le=>{W(E=>E?{...E,name:le.target.value}:null),P.name&&Ce(E=>({...E,name:void 0}))},placeholder:": qwen3-30b",className:P.name?"border-destructive focus-visible:ring-destructive":""}),P.name?e.jsx("p",{className:"text-xs text-destructive",children:P.name}):e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"grid gap-2","data-tour":"model-provider-select",children:[e.jsx(S,{htmlFor:"api_provider",className:P.api_provider?"text-destructive":"",children:"API  *"}),e.jsxs(Oe,{value:A?.api_provider||"",onValueChange:le=>{W(E=>E?{...E,api_provider:le}:null),Ds(),P.api_provider&&Ce(E=>({...E,api_provider:void 0}))},children:[e.jsx(Ae,{id:"api_provider",className:P.api_provider?"border-destructive focus-visible:ring-destructive":"",children:e.jsx(Re,{placeholder:""})}),e.jsx(De,{children:r.map(le=>e.jsx(te,{value:le,children:le},le))})]}),P.api_provider&&e.jsx("p",{className:"text-xs text-destructive",children:P.api_provider})]}),e.jsxs("div",{className:"grid gap-2","data-tour":"model-identifier-input",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(S,{htmlFor:"model_identifier",className:P.model_identifier?"text-destructive":"",children:" *"}),bt?.modelFetcher&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(qe,{variant:"secondary",className:"text-xs",children:bt.display_name}),e.jsx(_,{variant:"ghost",size:"sm",className:"h-6 px-2",onClick:()=>A?.api_provider&&ot(A.api_provider,!0),disabled:Qs,children:Qs?e.jsx(st,{className:"h-3 w-3 animate-spin"}):e.jsx(Et,{className:"h-3 w-3"})})]})]}),bt?.modelFetcher?e.jsxs(Ra,{open:ae,onOpenChange:V,children:[e.jsx(La,{asChild:!0,children:e.jsxs(_,{variant:"outline",role:"combobox","aria-expanded":ae,className:"w-full justify-between font-normal",disabled:Qs||!!Hs,children:[Qs?e.jsxs("span",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(st,{className:"h-4 w-4 animate-spin"}),"..."]}):Hs?e.jsx("span",{className:"text-muted-foreground text-sm",children:""}):A?.model_identifier?e.jsx("span",{className:"truncate",children:A.model_identifier}):e.jsx("span",{className:"text-muted-foreground",children:"..."}),e.jsx(Xu,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsx(Ca,{className:"p-0",align:"start",style:{width:"var(--radix-popover-trigger-width)"},children:e.jsxs(eo,{children:[e.jsx(so,{placeholder:"..."}),e.jsx(Ke,{className:"h-[300px]",children:e.jsxs(to,{className:"max-h-none overflow-visible",children:[e.jsx(ao,{children:Hs?e.jsxs("div",{className:"py-4 px-2 text-center space-y-2",children:[e.jsx("p",{className:"text-sm text-destructive",children:Hs}),!Hs.includes("API Key")&&e.jsx(_,{variant:"link",size:"sm",onClick:()=>A?.api_provider&&ot(A.api_provider,!0),children:""})]}):""}),e.jsx(xr,{heading:"",children:Qe.map(le=>e.jsxs(fr,{value:le.id,onSelect:()=>{W(E=>E?{...E,model_identifier:le.id}:null),V(!1)},children:[e.jsx(Vt,{className:`mr-2 h-4 w-4 ${A?.model_identifier===le.id?"opacity-100":"opacity-0"}`}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{children:le.id}),le.name!==le.id&&e.jsx("span",{className:"text-xs text-muted-foreground",children:le.name})]})]},le.id))}),e.jsx(xr,{heading:"",children:e.jsxs(fr,{value:"__manual_input__",onSelect:()=>{V(!1)},children:[e.jsx(an,{className:"mr-2 h-4 w-4"}),"..."]})})]})})]})})]}):e.jsx(ne,{id:"model_identifier",value:A?.model_identifier||"",onChange:le=>{W(E=>E?{...E,model_identifier:le.target.value}:null),P.model_identifier&&Ce(E=>({...E,model_identifier:void 0}))},placeholder:"Qwen/Qwen3-30B-A3B-Instruct-2507",className:P.model_identifier?"border-destructive focus-visible:ring-destructive":""}),P.model_identifier&&e.jsx("p",{className:"text-xs text-destructive",children:P.model_identifier}),Hs&&bt?.modelFetcher&&!P.model_identifier&&e.jsxs($t,{variant:"destructive",className:"mt-2 py-2",children:[e.jsx(Oa,{className:"h-4 w-4"}),e.jsx(Qt,{className:"text-xs",children:Hs})]}),bt?.modelFetcher&&e.jsx(ne,{value:A?.model_identifier||"",onChange:le=>{W(E=>E?{...E,model_identifier:le.target.value}:null),P.model_identifier&&Ce(E=>({...E,model_identifier:void 0}))},placeholder:"",className:`mt-2 ${P.model_identifier?"border-destructive focus-visible:ring-destructive":""}`}),!P.model_identifier&&e.jsx("p",{className:"text-xs text-muted-foreground",children:Hs?'"" API Key':bt?.modelFetcher?` ${bt.display_name}`:"API  ID"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"price_in",children:" (/M token)"}),e.jsx(ne,{id:"price_in",type:"number",step:"0.1",min:"0",value:A?.price_in??"",onChange:le=>{const E=le.target.value===""?null:parseFloat(le.target.value);W(je=>je?{...je,price_in:E}:null)},placeholder:": 0"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"price_out",children:" (/M token)"}),e.jsx(ne,{id:"price_out",type:"number",step:"0.1",min:"0",value:A?.price_out??"",onChange:le=>{const E=le.target.value===""?null:parseFloat(le.target.value);W(je=>je?{...je,price_out:E}:null)},placeholder:": 0"})]})]}),e.jsxs("div",{className:"rounded-lg border p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(S,{htmlFor:"enable_model_temperature",className:"cursor-pointer",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsx(Ge,{id:"enable_model_temperature",checked:A?.temperature!=null,onCheckedChange:le=>{W(le?E=>E?{...E,temperature:.5}:null:E=>E?{...E,temperature:null}:null)}})]}),A?.temperature!=null&&e.jsxs("div",{className:"space-y-2 pt-2 border-t",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(S,{className:"text-sm",children:""}),e.jsx("span",{className:"text-sm font-medium tabular-nums",children:A.temperature.toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"0"}),e.jsx(fa,{value:[A.temperature],onValueChange:le=>W(E=>E?{...E,temperature:le[0]}:null),min:0,max:1,step:.1,className:"flex-1"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"1"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"0.1-0.30.7-1.0"})]})]}),e.jsxs("div",{className:"rounded-lg border p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(S,{htmlFor:"enable_model_max_tokens",className:"cursor-pointer",children:" Token"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" Token "})]}),e.jsx(Ge,{id:"enable_model_max_tokens",checked:A?.max_tokens!=null,onCheckedChange:le=>{W(le?E=>E?{...E,max_tokens:2048}:null:E=>E?{...E,max_tokens:null}:null)}})]}),A?.max_tokens!=null&&e.jsxs("div",{className:"space-y-2 pt-2 border-t",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(S,{className:"text-sm",children:" Token "}),e.jsx(ne,{type:"number",min:"1",max:"128000",value:A.max_tokens,onChange:le=>{const E=parseInt(le.target.value);!isNaN(E)&&E>=1&&W(je=>je?{...je,max_tokens:E}:null)},className:"w-28 h-8 text-sm"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" token "})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{id:"force_stream_mode",checked:A?.force_stream_mode||!1,onCheckedChange:le=>W(E=>E?{...E,force_stream_mode:le}:null)}),e.jsx(S,{htmlFor:"force_stream_mode",className:"cursor-pointer",children:""})]}),e.jsx(a1,{value:A?.extra_params||{},onChange:le=>W(E=>E?{...E,extra_params:le}:null),placeholder:" enable_thinkingtop_p ..."})]}),e.jsxs(tt,{children:[e.jsx(_,{variant:"outline",onClick:()=>z(!1),"data-tour":"model-cancel-button",children:""}),e.jsx(_,{onClick:dt,"data-tour":"model-save-button",children:""})]})]})}),e.jsx(ms,{open:_e,onOpenChange:pe,children:e.jsxs(as,{children:[e.jsxs(ls,{children:[e.jsx(is,{children:""}),e.jsxs(rs,{children:[' "',ye!==null?n[ye]?.name:"",'"  ']})]}),e.jsxs(ns,{children:[e.jsx(os,{children:""}),e.jsx(cs,{onClick:ve,children:""})]})]})}),e.jsx(ms,{open:k,onOpenChange:ce,children:e.jsxs(as,{children:[e.jsxs(ls,{children:[e.jsx(is,{children:""}),e.jsxs(rs,{children:[" ",C.size,"  "]})]}),e.jsxs(ns,{children:[e.jsx(os,{children:""}),e.jsx(cs,{onClick:lt,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:""})]})]})}),M&&e.jsx(Wu,{onRestartComplete:ze,onRestartFailed:Ie})]})})}const lo="/api/webui/config";async function f1(){const i=await(await Se(`${lo}/adapter-config/path`)).json();return!i.success||!i.path?null:{path:i.path,lastModified:i.lastModified}}async function vp(n){const r=await(await Se(`${lo}/adapter-config/path`,{method:"POST",headers:As(),body:JSON.stringify({path:n})})).json();if(!r.success)throw new Error(r.message||"")}async function bp(n){const r=await(await Se(`${lo}/adapter-config?path=${encodeURIComponent(n)}`)).json();if(!r.success)throw new Error("");return r.content}async function Np(n,i){const d=await(await Se(`${lo}/adapter-config`,{method:"POST",headers:As(),body:JSON.stringify({path:n,content:i})})).json();if(!d.success)throw new Error(d.message||"")}const sa={inner:{version:"0.1.2"},nickname:{nickname:""},napcat_server:{host:"localhost",port:8095,token:"",heartbeat_interval:30},maibot_server:{host:"localhost",port:8e3},chat:{group_list_type:"whitelist",group_list:[],private_list_type:"whitelist",private_list:[],ban_user_id:[],ban_qq_bot:!1,enable_poke:!0},voice:{use_tts:!1},debug:{level:"INFO"}},Du={oneclick:{name:"",description:"",path:"../MaiBot-Napcat-Adapter/config.toml",icon:tn},docker:{name:"Docker",description:"Docker Compose ",path:"/MaiMBot/adapters-config/config.toml",icon:my}};function p1(){const[n,i]=u.useState("upload"),[r,d]=u.useState(null),[m,h]=u.useState(""),[f,p]=u.useState(""),[g,b]=u.useState("oneclick"),[j,y]=u.useState(""),[N,T]=u.useState(!1),[w,U]=u.useState(!1),[O,B]=u.useState(!1),[I,L]=u.useState(!1),[M,Y]=u.useState(null),Q=u.useRef(null),{toast:z}=Bs(),A=u.useRef(null),W=ee=>{if(!ee.trim())return{valid:!1,error:""};if(!ee.toLowerCase().endsWith(".toml"))return{valid:!1,error:" .toml "};const ae=/^([a-zA-Z]:\\|\\\\[^\\]+\\[^\\]+\\).+\.toml$/i,V=/^(\/|~\/).+\.toml$/i,P=/^(\.{1,2}[\\/]|[^:\\/]).+\.toml$/i,Ce=ae.test(ee),Le=V.test(ee),ge=P.test(ee);return!Ce&&!Le&&!ge?{valid:!1,error:""}:/[<>"|?*\x00-\x1F]/.test(ee)?{valid:!1,error:""}:{valid:!0,error:""}},xe=ee=>{if(p(ee),ee.trim()){const ae=W(ee);y(ae.error)}else y("")},be=u.useCallback(async ee=>{const ae=Du[ee];U(!0);try{const V=await bp(ae.path),P=ue(V);d(P),b(ee),p(ae.path),await vp(ae.path),z({title:"",description:`${ae.name}`})}catch(V){console.error(":",V),z({title:"",description:V instanceof Error?V.message:"",variant:"destructive"})}finally{U(!1)}},[z]),_e=u.useCallback(async ee=>{const ae=W(ee);if(!ae.valid){y(ae.error),z({title:"",description:ae.error,variant:"destructive"});return}y(""),U(!0);try{const V=await bp(ee),P=ue(V);d(P),p(ee),await vp(ee),z({title:"",description:""})}catch(V){console.error(":",V),z({title:"",description:V instanceof Error?V.message:"",variant:"destructive"})}finally{U(!1)}},[z]);u.useEffect(()=>{(async()=>{try{const ae=await f1();if(ae&&ae.path){p(ae.path);const V=Object.entries(Du).find(([,P])=>P.path===ae.path);V?(i("preset"),b(V[0]),await be(V[0])):(i("path"),await _e(ae.path))}}catch(ae){console.error(":",ae)}})()},[_e,be]);const pe=u.useCallback(ee=>{n!=="path"&&n!=="preset"||!f||(A.current&&clearTimeout(A.current),A.current=setTimeout(async()=>{T(!0);try{const ae=ie(ee);await Np(f,ae),z({title:"",description:""})}catch(ae){console.error(":",ae),z({title:"",description:ae instanceof Error?ae.message:"",variant:"destructive"})}finally{T(!1)}},1e3))},[n,f,z]),ye=async()=>{if(!r||!f)return;const ee=W(f);if(!ee.valid){z({title:"",description:ee.error,variant:"destructive"});return}T(!0);try{const ae=ie(r);await Np(f,ae),z({title:"",description:""})}catch(ae){console.error(":",ae),z({title:"",description:ae instanceof Error?ae.message:"",variant:"destructive"})}finally{T(!1)}},we=async()=>{f&&await _e(f)},R=ee=>{if(ee!==n){if(r){Y(ee),B(!0);return}X(ee)}},X=ee=>{d(null),h(""),y(""),i(ee),ee==="preset"&&be("oneclick"),z({title:"",description:{upload:"",path:"",preset:""}[ee]})},C=()=>{M&&(X(M),Y(null)),B(!1)},$=()=>{if(r){L(!0);return}k()},k=()=>{p(""),d(null),y(""),z({title:"",description:""})},ce=()=>{k(),L(!1)},ue=ee=>{const ae=JSON.parse(JSON.stringify(sa)),V=ee.split(`
`);let P="";for(const Ce of V){const Le=Ce.trim();if(!Le||Le.startsWith("#"))continue;const ge=Le.match(/^\[(\w+)\]/);if(ge){P=ge[1];continue}const Me=Le.match(/^(\w+)\s*=\s*(.+)$/);if(Me&&P){const[,$s,gt]=Me;let oe=gt.trim();const Fe=oe.match(/^("[^"]*")/);if(Fe)oe=Fe[1];else{const Qs=oe.indexOf("#");Qs!==-1&&(oe=oe.substring(0,Qs).trim())}let Qe;if(oe==="true")Qe=!0;else if(oe==="false")Qe=!1;else if(oe.startsWith("[")&&oe.endsWith("]")){const Qs=oe.slice(1,-1).trim();if(Qs){const Hs=Qs.split(",").map(ot=>{const Ds=ot.trim();return isNaN(Number(Ds))?Ds.replace(/"/g,""):Number(Ds)}),bt=typeof Hs[0];Qe=Hs.every(ot=>typeof ot===bt)?Hs:Hs.filter(ot=>typeof ot=="number")}else Qe=[]}else oe.startsWith('"')&&oe.endsWith('"')?Qe=oe.slice(1,-1):isNaN(Number(oe))?Qe=oe.replace(/"/g,""):Qe=Number(oe);if(P in ae){const Qs=ae[P];Qs[$s]=Qe}}}return ae},ie=ee=>{const ae=[],V=(P,Ce)=>P===""||P===null||P===void 0?Ce:P;return ae.push("[inner]"),ae.push(`version = "${V(ee.inner.version,sa.inner.version)}" # `),ae.push("# "),ae.push(""),ae.push("[nickname] # "),ae.push(`nickname = "${V(ee.nickname.nickname,sa.nickname.nickname)}"`),ae.push(""),ae.push("[napcat_server] # Napcatws"),ae.push(`host = "${V(ee.napcat_server.host,sa.napcat_server.host)}"      # Napcat`),ae.push(`port = ${V(ee.napcat_server.port||0,sa.napcat_server.port)}             # Napcat`),ae.push(`token = "${V(ee.napcat_server.token,sa.napcat_server.token)}"              # Napcat`),ae.push(`heartbeat_interval = ${V(ee.napcat_server.heartbeat_interval||0,sa.napcat_server.heartbeat_interval)} # Napcat`),ae.push(""),ae.push("[maibot_server] # ws"),ae.push(`host = "${V(ee.maibot_server.host,sa.maibot_server.host)}" # .envHOST`),ae.push(`port = ${V(ee.maibot_server.port||0,sa.maibot_server.port)}        # .envPORT`),ae.push(""),ae.push("[chat] # "),ae.push(`group_list_type = "${V(ee.chat.group_list_type,sa.chat.group_list_type)}" # whitelist, blacklist`),ae.push(`group_list = [${ee.chat.group_list.join(", ")}]               # `),ae.push("# group_list_typewhitelist"),ae.push("# group_list_typeblacklist"),ae.push(`private_list_type = "${V(ee.chat.private_list_type,sa.chat.private_list_type)}" # whitelist, blacklist`),ae.push(`private_list = [${ee.chat.private_list.join(", ")}]               # `),ae.push("# private_list_typewhitelist"),ae.push("# private_list_typeblacklist"),ae.push(`ban_user_id = [${ee.chat.ban_user_id.join(", ")}]   # `),ae.push(`ban_qq_bot = ${ee.chat.ban_qq_bot} # QQ`),ae.push(`enable_poke = ${ee.chat.enable_poke} # `),ae.push(""),ae.push("[voice] # "),ae.push(`use_tts = ${ee.voice.use_tts} # ttsttsadapter`),ae.push(""),ae.push("[debug]"),ae.push(`level = "${V(ee.debug.level,sa.debug.level)}" # DEBUG, INFO, WARNING, ERROR, CRITICAL`),ae.join(`
`)},fe=ee=>{const ae=ee.target.files?.[0];if(!ae)return;const V=new FileReader;V.onload=P=>{try{const Ce=P.target?.result,Le=ue(Ce);d(Le),h(ae.name),z({title:"",description:`${ae.name}`})}catch(Ce){console.error(":",Ce),z({title:"",description:"",variant:"destructive"})}},V.readAsText(ae)},Ne=()=>{if(!r)return;const ee=ie(r),ae=new Blob([ee],{type:"text/plain;charset=utf-8"}),V=URL.createObjectURL(ae),P=document.createElement("a");P.href=V,P.download=m||"config.toml",document.body.appendChild(P),P.click(),document.body.removeChild(P),URL.revokeObjectURL(V),z({title:"",description:""})},me=()=>{d(JSON.parse(JSON.stringify(sa))),h("config.toml"),z({title:"",description:""})};return e.jsx(Ke,{className:"h-full",children:e.jsxs("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:""}),e.jsx("p",{className:"text-muted-foreground mt-1 sm:mt-2 text-sm sm:text-base",children:" QQ "})]})}),e.jsxs("div",{className:"flex items-start gap-2 p-3 rounded-lg border border-amber-500/50 bg-amber-500/10 text-amber-700 dark:text-amber-400",children:[e.jsx(zt,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-sm",children:" WebUI "})]}),e.jsxs($e,{children:[e.jsxs(ss,{children:[e.jsx(ts,{children:""}),e.jsx(Ws,{children:""})]}),e.jsxs(fs,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 md:gap-4",children:[e.jsx("div",{className:`border-2 rounded-lg p-3 md:p-4 cursor-pointer transition-all ${n==="preset"?"border-primary bg-primary/5":"border-muted hover:border-primary/50 active:border-primary/70"}`,onClick:()=>R("preset"),children:e.jsxs("div",{className:"flex items-start gap-2 md:gap-3",children:[e.jsx(tn,{className:"h-4 w-4 md:h-5 md:w-5 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"font-semibold text-sm md:text-base",children:""}),e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground mt-1 line-clamp-2",children:""})]})]})}),e.jsx("div",{className:`border-2 rounded-lg p-3 md:p-4 cursor-pointer transition-all ${n==="upload"?"border-primary bg-primary/5":"border-muted hover:border-primary/50 active:border-primary/70"}`,onClick:()=>R("upload"),children:e.jsxs("div",{className:"flex items-start gap-2 md:gap-3",children:[e.jsx(dr,{className:"h-4 w-4 md:h-5 md:w-5 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"font-semibold text-sm md:text-base",children:""}),e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground mt-1 line-clamp-2",children:""})]})]})}),e.jsx("div",{className:`border-2 rounded-lg p-3 md:p-4 cursor-pointer transition-all ${n==="path"?"border-primary bg-primary/5":"border-muted hover:border-primary/50 active:border-primary/70"}`,onClick:()=>R("path"),children:e.jsxs("div",{className:"flex items-start gap-2 md:gap-3",children:[e.jsx(hy,{className:"h-4 w-4 md:h-5 md:w-5 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"font-semibold text-sm md:text-base",children:""}),e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground mt-1 line-clamp-2",children:""})]})]})})]}),n==="preset"&&e.jsxs("div",{className:"space-y-3 pt-2 border-t",children:[e.jsx(S,{className:"text-sm md:text-base",children:""}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:Object.entries(Du).map(([ee,ae])=>{const V=ae.icon,P=g===ee;return e.jsx("div",{className:`border-2 rounded-lg p-3 cursor-pointer transition-all ${P?"border-primary bg-primary/5":"border-muted hover:border-primary/50"}`,onClick:()=>{b(ee),be(ee)},children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(V,{className:"h-5 w-5 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h4",{className:"font-semibold text-sm",children:ae.name}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:ae.description}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1 font-mono break-all",children:ae.path})]})]})},ee)})})]}),n==="path"&&e.jsxs("div",{className:"space-y-3 pt-2 border-t",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"config-path",className:"text-sm md:text-base",children:""}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsx(ne,{id:"config-path",value:f,onChange:ee=>xe(ee.target.value),placeholder:": C:\\Adapter\\config.toml",className:`text-sm ${j?"border-destructive":""}`}),j&&e.jsx("p",{className:"text-xs text-destructive",children:j})]}),e.jsx(_,{onClick:()=>_e(f),disabled:w||!f||!!j,className:"w-full sm:w-auto",children:w?e.jsxs(e.Fragment,{children:[e.jsx(Et,{className:"h-4 w-4 animate-spin mr-2"}),e.jsx("span",{className:"sm:hidden",children:"..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"sm:hidden",children:""}),e.jsx("span",{className:"hidden sm:inline",children:""})]})})]})]}),e.jsxs("details",{className:"rounded-lg bg-muted/50 p-3 group",children:[e.jsxs("summary",{className:"text-xs font-medium cursor-pointer select-none list-none flex items-center justify-between",children:[e.jsx("span",{children:""}),e.jsx("svg",{className:"h-4 w-4 transition-transform group-open:rotate-180",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),e.jsxs("div",{className:"mt-2 space-y-2 text-xs text-muted-foreground",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"font-mono bg-background px-1.5 py-0.5 rounded text-[10px] md:text-xs whitespace-nowrap",children:"Windows"})}),e.jsxs("div",{className:"pl-2 space-y-0.5 text-[10px] md:text-xs break-all",children:[e.jsx("div",{children:"C:\\Adapter\\config.toml"}),e.jsx("div",{className:"hidden sm:block",children:"D:\\MaiBot\\adapter\\config.toml"}),e.jsx("div",{className:"hidden sm:block",children:"\\\\server\\share\\config.toml"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"font-mono bg-background px-1.5 py-0.5 rounded text-[10px] md:text-xs whitespace-nowrap",children:"Linux"})}),e.jsxs("div",{className:"pl-2 space-y-0.5 text-[10px] md:text-xs break-all",children:[e.jsx("div",{children:"/opt/adapter/config.toml"}),e.jsx("div",{className:"hidden sm:block",children:"/home/user/adapter/config.toml"}),e.jsx("div",{className:"hidden sm:block",children:"~/adapter/config.toml"})]})]}),e.jsx("p",{className:"pt-1 border-t text-[10px] md:text-xs",children:"  1 "})]})]})]})]})]}),e.jsxs($t,{children:[e.jsx(Oa,{className:"h-4 w-4"}),e.jsx(Qt,{children:n==="preset"?e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:""})," 1 ",N&&" (...)"]}):n==="upload"?e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:""}),"      "]}):e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:""})," 1 ",N&&" (...)"]})})]}),n==="upload"&&!r&&e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full",children:[e.jsx("input",{ref:Q,type:"file",accept:".toml",className:"hidden",onChange:fe}),e.jsxs(_,{onClick:()=>Q.current?.click(),size:"sm",variant:"outline",className:"w-full sm:w-auto",children:[e.jsx(dr,{className:"mr-2 h-4 w-4"}),""]}),e.jsxs(_,{onClick:me,size:"sm",className:"w-full sm:w-auto",children:[e.jsx(wa,{className:"mr-2 h-4 w-4"}),""]})]}),n==="upload"&&r&&e.jsx("div",{className:"flex gap-2",children:e.jsxs(_,{onClick:Ne,size:"sm",className:"w-full sm:w-auto",children:[e.jsx(nl,{className:"mr-2 h-4 w-4"}),""]})}),(n==="preset"||n==="path")&&r&&e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs(_,{onClick:ye,size:"sm",disabled:N||!!j,className:"w-full sm:w-auto",children:[e.jsx(gr,{className:"mr-2 h-4 w-4"}),N?"...":""]}),e.jsxs(_,{onClick:we,size:"sm",variant:"outline",disabled:w,className:"w-full sm:w-auto",children:[e.jsx(Et,{className:`mr-2 h-4 w-4 ${w?"animate-spin":""}`}),""]}),n==="path"&&e.jsxs(_,{onClick:$,size:"sm",variant:"destructive",className:"w-full sm:w-auto",children:[e.jsx(Pe,{className:"mr-2 h-4 w-4"}),""]})]}),r?e.jsxs(Sa,{defaultValue:"napcat",className:"w-full",children:[e.jsx("div",{className:"overflow-x-auto -mx-4 px-4 sm:mx-0 sm:px-0",children:e.jsxs(pa,{className:"inline-flex w-auto min-w-full sm:grid sm:w-full sm:grid-cols-5",children:[e.jsxs(es,{value:"napcat",className:"flex-shrink-0 text-xs sm:text-sm whitespace-nowrap",children:[e.jsx("span",{className:"hidden sm:inline",children:"Napcat "}),e.jsx("span",{className:"sm:hidden",children:"Napcat"})]}),e.jsxs(es,{value:"maibot",className:"flex-shrink-0 text-xs sm:text-sm whitespace-nowrap",children:[e.jsx("span",{className:"hidden sm:inline",children:""}),e.jsx("span",{className:"sm:hidden",children:""})]}),e.jsxs(es,{value:"chat",className:"flex-shrink-0 text-xs sm:text-sm whitespace-nowrap",children:[e.jsx("span",{className:"hidden sm:inline",children:""}),e.jsx("span",{className:"sm:hidden",children:""})]}),e.jsxs(es,{value:"voice",className:"flex-shrink-0 text-xs sm:text-sm whitespace-nowrap",children:[e.jsx("span",{className:"hidden sm:inline",children:""}),e.jsx("span",{className:"sm:hidden",children:""})]}),e.jsx(es,{value:"debug",className:"flex-shrink-0 text-xs sm:text-sm whitespace-nowrap",children:""})]})}),e.jsx(_s,{value:"napcat",className:"space-y-4",children:e.jsx(g1,{config:r,onChange:ee=>{d(ee),pe(ee)}})}),e.jsx(_s,{value:"maibot",className:"space-y-4",children:e.jsx(j1,{config:r,onChange:ee=>{d(ee),pe(ee)}})}),e.jsx(_s,{value:"chat",className:"space-y-4",children:e.jsx(v1,{config:r,onChange:ee=>{d(ee),pe(ee)}})}),e.jsx(_s,{value:"voice",className:"space-y-4",children:e.jsx(b1,{config:r,onChange:ee=>{d(ee),pe(ee)}})}),e.jsx(_s,{value:"debug",className:"space-y-4",children:e.jsx(N1,{config:r,onChange:ee=>{d(ee),pe(ee)}})})]}):e.jsx("div",{className:"rounded-lg border bg-card p-6 md:p-12",children:e.jsxs("div",{className:"text-center space-y-3 md:space-y-4",children:[e.jsx(wa,{className:"h-12 w-12 md:h-16 md:w-16 mx-auto text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold",children:""}),e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground mt-2 px-4",children:n==="preset"?"":n==="upload"?"":""})]})]})}),e.jsx(ms,{open:O,onOpenChange:B,children:e.jsxs(as,{children:[e.jsxs(ls,{children:[e.jsx(is,{children:""}),e.jsxs(rs,{children:["",e.jsx("br",{}),e.jsx("span",{className:"text-destructive font-medium",children:""})]})]}),e.jsxs(ns,{children:[e.jsx(os,{onClick:()=>{B(!1),Y(null)},children:""}),e.jsx(cs,{onClick:C,children:""})]})]})}),e.jsx(ms,{open:I,onOpenChange:L,children:e.jsxs(as,{children:[e.jsxs(ls,{children:[e.jsx(is,{children:""}),e.jsxs(rs,{children:["",e.jsx("br",{}),e.jsx("span",{className:"text-muted-foreground text-sm",children:""})]})]}),e.jsxs(ns,{children:[e.jsx(os,{onClick:()=>L(!1),children:""}),e.jsx(cs,{onClick:ce,className:"bg-destructive hover:bg-destructive/90",children:""})]})]})})]})})}function g1({config:n,onChange:i}){return e.jsx("div",{className:"rounded-lg border bg-card p-4 md:p-6 space-y-4 md:space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold mb-3 md:mb-4",children:"Napcat WebSocket "}),e.jsxs("div",{className:"grid gap-3 md:gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"napcat-host",className:"text-sm md:text-base",children:""}),e.jsx(ne,{id:"napcat-host",value:n.napcat_server.host,onChange:r=>i({...n,napcat_server:{...n.napcat_server,host:r.target.value}}),placeholder:"localhost",className:"text-sm md:text-base"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Napcat "})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"napcat-port",className:"text-sm md:text-base",children:""}),e.jsx(ne,{id:"napcat-port",type:"number",value:n.napcat_server.port||"",onChange:r=>i({...n,napcat_server:{...n.napcat_server,port:r.target.value?parseInt(r.target.value):0}}),placeholder:"8095",className:"text-sm md:text-base"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Napcat  8095"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"napcat-token",className:"text-sm md:text-base",children:"Token"}),e.jsx(ne,{id:"napcat-token",type:"password",value:n.napcat_server.token,onChange:r=>i({...n,napcat_server:{...n.napcat_server,token:r.target.value}}),placeholder:"",className:"text-sm md:text-base"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Napcat "})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"napcat-heartbeat",className:"text-sm md:text-base",children:""}),e.jsx(ne,{id:"napcat-heartbeat",type:"number",value:n.napcat_server.heartbeat_interval||"",onChange:r=>i({...n,napcat_server:{...n.napcat_server,heartbeat_interval:r.target.value?parseInt(r.target.value):0}}),placeholder:"30",className:"text-sm md:text-base"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" Napcat  30"})]})]})]})})}function j1({config:n,onChange:i}){return e.jsx("div",{className:"rounded-lg border bg-card p-4 md:p-6 space-y-4 md:space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold mb-3 md:mb-4",children:" WebSocket "}),e.jsxs("div",{className:"grid gap-3 md:gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"maibot-host",className:"text-sm md:text-base",children:""}),e.jsx(ne,{id:"maibot-host",value:n.maibot_server.host,onChange:r=>i({...n,maibot_server:{...n.maibot_server,host:r.target.value}}),placeholder:"localhost",className:"text-sm md:text-base"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" .env  HOST "})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"maibot-port",className:"text-sm md:text-base",children:""}),e.jsx(ne,{id:"maibot-port",type:"number",value:n.maibot_server.port||"",onChange:r=>i({...n,maibot_server:{...n.maibot_server,port:r.target.value?parseInt(r.target.value):0}}),placeholder:"8000",className:"text-sm md:text-base"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" .env  PORT  8000"})]})]})]})})}function v1({config:n,onChange:i}){const r=h=>{const f={...n};h==="group"?f.chat.group_list=[...f.chat.group_list,0]:h==="private"?f.chat.private_list=[...f.chat.private_list,0]:f.chat.ban_user_id=[...f.chat.ban_user_id,0],i(f)},d=(h,f)=>{const p={...n};h==="group"?p.chat.group_list=p.chat.group_list.filter((g,b)=>b!==f):h==="private"?p.chat.private_list=p.chat.private_list.filter((g,b)=>b!==f):p.chat.ban_user_id=p.chat.ban_user_id.filter((g,b)=>b!==f),i(p)},m=(h,f,p)=>{const g={...n};h==="group"?g.chat.group_list[f]=p:h==="private"?g.chat.private_list[f]=p:g.chat.ban_user_id[f]=p,i(g)};return e.jsx("div",{className:"rounded-lg border bg-card p-4 md:p-6 space-y-4 md:space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold mb-3 md:mb-4",children:""}),e.jsxs("div",{className:"grid gap-4 md:gap-6",children:[e.jsxs("div",{className:"space-y-3 md:space-y-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{className:"text-sm md:text-base",children:""}),e.jsxs(Oe,{value:n.chat.group_list_type,onValueChange:h=>i({...n,chat:{...n.chat,group_list_type:h}}),children:[e.jsx(Ae,{children:e.jsx(Re,{})}),e.jsxs(De,{children:[e.jsx(te,{value:"whitelist",children:""}),e.jsx(te,{value:"blacklist",children:""})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-0",children:[e.jsx(S,{className:"text-sm md:text-base",children:""}),e.jsxs(_,{onClick:()=>r("group"),size:"sm",variant:"outline",className:"w-full sm:w-auto",children:[e.jsx(wa,{className:"mr-1 h-4 w-4"}),""]})]}),n.chat.group_list.map((h,f)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ne,{type:"number",value:h,onChange:p=>m("group",f,parseInt(p.target.value)||0),placeholder:"",className:"text-sm md:text-base"}),e.jsxs(ms,{children:[e.jsx(et,{asChild:!0,children:e.jsx(_,{size:"icon",variant:"outline",children:e.jsx(Pe,{className:"h-4 w-4"})})}),e.jsxs(as,{children:[e.jsxs(ls,{children:[e.jsx(is,{children:""}),e.jsxs(rs,{children:[" ",h," "]})]}),e.jsxs(ns,{children:[e.jsx(os,{children:""}),e.jsx(cs,{onClick:()=>d("group",f),children:""})]})]})]})]},f)),n.chat.group_list.length===0&&e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]})]}),e.jsxs("div",{className:"space-y-3 md:space-y-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{className:"text-sm md:text-base",children:""}),e.jsxs(Oe,{value:n.chat.private_list_type,onValueChange:h=>i({...n,chat:{...n.chat,private_list_type:h}}),children:[e.jsx(Ae,{children:e.jsx(Re,{})}),e.jsxs(De,{children:[e.jsx(te,{value:"whitelist",children:""}),e.jsx(te,{value:"blacklist",children:""})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-0",children:[e.jsx(S,{className:"text-sm md:text-base",children:""}),e.jsxs(_,{onClick:()=>r("private"),size:"sm",variant:"outline",className:"w-full sm:w-auto",children:[e.jsx(wa,{className:"mr-1 h-4 w-4"}),""]})]}),n.chat.private_list.map((h,f)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ne,{type:"number",value:h,onChange:p=>m("private",f,parseInt(p.target.value)||0),placeholder:"QQ",className:"text-sm md:text-base"}),e.jsxs(ms,{children:[e.jsx(et,{asChild:!0,children:e.jsx(_,{size:"icon",variant:"outline",children:e.jsx(Pe,{className:"h-4 w-4"})})}),e.jsxs(as,{children:[e.jsxs(ls,{children:[e.jsx(is,{children:""}),e.jsxs(rs,{children:[" ",h," "]})]}),e.jsxs(ns,{children:[e.jsx(os,{children:""}),e.jsx(cs,{onClick:()=>d("private",f),children:""})]})]})]})]},f)),n.chat.private_list.length===0&&e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-0",children:[e.jsxs("div",{children:[e.jsx(S,{className:"text-sm md:text-base",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:""})]}),e.jsxs(_,{onClick:()=>r("ban"),size:"sm",variant:"outline",className:"w-full sm:w-auto",children:[e.jsx(wa,{className:"mr-1 h-4 w-4"}),""]})]}),n.chat.ban_user_id.map((h,f)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ne,{type:"number",value:h,onChange:p=>m("ban",f,parseInt(p.target.value)||0),placeholder:"QQ",className:"text-sm md:text-base"}),e.jsxs(ms,{children:[e.jsx(et,{asChild:!0,children:e.jsx(_,{size:"icon",variant:"outline",children:e.jsx(Pe,{className:"h-4 w-4"})})}),e.jsxs(as,{children:[e.jsxs(ls,{children:[e.jsx(is,{children:""}),e.jsxs(rs,{children:[" ",h," "]})]}),e.jsxs(ns,{children:[e.jsx(os,{children:""}),e.jsx(cs,{onClick:()=>d("ban",f),children:""})]})]})]})]},f)),n.chat.ban_user_id.length===0&&e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(S,{className:"text-sm md:text-base",children:"QQ"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"QQ"})]}),e.jsx(Ge,{checked:n.chat.ban_qq_bot,onCheckedChange:h=>i({...n,chat:{...n.chat,ban_qq_bot:h}})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(S,{className:"text-sm md:text-base",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:""})]}),e.jsx(Ge,{checked:n.chat.enable_poke,onCheckedChange:h=>i({...n,chat:{...n.chat,enable_poke:h}})})]})]})]})})}function b1({config:n,onChange:i}){return e.jsx("div",{className:"rounded-lg border bg-card p-4 md:p-6 space-y-4 md:space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold mb-3 md:mb-4",children:""}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(S,{className:"text-sm md:text-base",children:" TTS "}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:" TTS "})]}),e.jsx(Ge,{checked:n.voice.use_tts,onCheckedChange:r=>i({...n,voice:{use_tts:r}})})]})]})})}function N1({config:n,onChange:i}){return e.jsx("div",{className:"rounded-lg border bg-card p-4 md:p-6 space-y-4 md:space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold mb-3 md:mb-4",children:""}),e.jsx("div",{className:"grid gap-3 md:gap-4",children:e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{className:"text-sm md:text-base",children:""}),e.jsxs(Oe,{value:n.debug.level,onValueChange:r=>i({...n,debug:{level:r}}),children:[e.jsx(Ae,{children:e.jsx(Re,{})}),e.jsxs(De,{children:[e.jsx(te,{value:"DEBUG",children:"DEBUG"}),e.jsx(te,{value:"INFO",children:"INFO"}),e.jsx(te,{value:"WARNING",children:"WARNING"}),e.jsx(te,{value:"ERROR",children:"ERROR"}),e.jsx(te,{value:"CRITICAL",children:"CRITICAL"})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})})]})})}const y1=["defaultChecked","defaultValue","suppressContentEditableWarning","suppressHydrationWarning","dangerouslySetInnerHTML","accessKey","className","contentEditable","contextMenu","dir","draggable","hidden","id","lang","placeholder","slot","spellCheck","style","tabIndex","title","translate","radioGroup","role","about","datatype","inlist","prefix","property","resource","typeof","vocab","autoCapitalize","autoCorrect","autoSave","color","itemProp","itemScope","itemType","itemID","itemRef","results","security","unselectable","inputMode","is","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],w1=/^(aria-|data-)/,Xg=n=>Object.fromEntries(Object.entries(n).filter(([i])=>w1.test(i)||y1.includes(i)));function _1(n,i){const r=Xg(n);return Object.keys(n).some(d=>!Object.hasOwn(r,d)&&n[d]!==i[d])}class S1 extends u.Component{container;plugin;componentDidMount(){this.installPlugin()}componentDidUpdate(i){if(i.uppy!==this.props.uppy)this.uninstallPlugin(i),this.installPlugin();else if(_1(this.props,i)){const{uppy:r,...d}={...this.props,target:this.container};this.plugin.setOptions(d)}}componentWillUnmount(){this.uninstallPlugin()}installPlugin(){const{uppy:i,...r}={id:"Dashboard",...this.props,inline:!0,target:this.container};i.use(Ky,r),this.plugin=i.getPlugin(r.id)}uninstallPlugin(i=this.props){const{uppy:r}=i;r.removePlugin(this.plugin)}render(){return u.createElement("div",{className:"uppy-Container",ref:i=>{this.container=i},...Xg(this.props)})}}function C1({src:n,alt:i="",className:r,maxRetries:d=5,retryInterval:m=1500}){const[h,f]=u.useState("loading"),[p,g]=u.useState(0),[b,j]=u.useState(null),y=u.useCallback(async()=>{try{const N=await fetch(n,{credentials:"include"});if(N.status===202){f("generating"),p<d?setTimeout(()=>{g(U=>U+1)},m):f("error");return}if(!N.ok){f("error");return}const T=await N.blob(),w=URL.createObjectURL(T);j(w),f("loaded")}catch(N){console.error(":",N),f("error")}},[n,p,d,m]);return u.useEffect(()=>{f("loading"),g(0),j(null)},[n]),u.useEffect(()=>{y()},[y]),u.useEffect(()=>()=>{b&&URL.revokeObjectURL(b)},[b]),h==="loading"||h==="generating"?e.jsx(Eg,{className:q("w-full h-full",r)}):h==="error"||!b?e.jsx("div",{className:q("w-full h-full flex items-center justify-center bg-muted",r),children:e.jsx(Ng,{className:"h-8 w-8 text-muted-foreground"})}):e.jsx("img",{src:b,alt:i,className:q("w-full h-full object-contain",r)})}function Kg({content:n,className:i=""}){return e.jsx("div",{className:`prose prose-sm dark:prose-invert max-w-none ${i}`,children:e.jsx(Py,{remarkPlugins:[Wy,e0],rehypePlugins:[Zy],components:{code({inline:r,className:d,children:m,...h}){return r?e.jsx("code",{className:"bg-muted px-1.5 py-0.5 rounded text-sm font-mono",...h,children:m}):e.jsx("code",{className:`${d} block bg-muted p-4 rounded-lg overflow-x-auto`,...h,children:m})},table({children:r,...d}){return e.jsx("div",{className:"overflow-x-auto",children:e.jsx("table",{className:"border-collapse border border-border",...d,children:r})})},th({children:r,...d}){return e.jsx("th",{className:"border border-border bg-muted px-4 py-2 text-left font-semibold",...d,children:r})},td({children:r,...d}){return e.jsx("td",{className:"border border-border px-4 py-2",...d,children:r})},a({children:r,...d}){return e.jsx("a",{className:"text-primary hover:underline",target:"_blank",rel:"noopener noreferrer",...d,children:r})},blockquote({children:r,...d}){return e.jsx("blockquote",{className:"border-l-4 border-primary pl-4 italic text-muted-foreground",...d,children:r})},h1({children:r,...d}){return e.jsx("h1",{className:"text-3xl font-bold mt-6 mb-4",...d,children:r})},h2({children:r,...d}){return e.jsx("h2",{className:"text-2xl font-bold mt-5 mb-3",...d,children:r})},h3({children:r,...d}){return e.jsx("h3",{className:"text-xl font-bold mt-4 mb-2",...d,children:r})},h4({children:r,...d}){return e.jsx("h4",{className:"text-lg font-semibold mt-3 mb-2",...d,children:r})},ul({children:r,...d}){return e.jsx("ul",{className:"list-disc list-inside space-y-1 my-2",...d,children:r})},ol({children:r,...d}){return e.jsx("ol",{className:"list-decimal list-inside space-y-1 my-2",...d,children:r})},p({children:r,...d}){return e.jsx("p",{className:"my-2 leading-relaxed",...d,children:r})},hr({...r}){return e.jsx("hr",{className:"my-4 border-border",...r})}},children:n})})}function k1({children:n,className:i}){return e.jsx(Kg,{content:n,className:i})}const ga="/api/webui/emoji";async function T1(n){const i=new URLSearchParams;n.page&&i.append("page",n.page.toString()),n.page_size&&i.append("page_size",n.page_size.toString()),n.search&&i.append("search",n.search),n.is_registered!==void 0&&i.append("is_registered",n.is_registered.toString()),n.is_banned!==void 0&&i.append("is_banned",n.is_banned.toString()),n.format&&i.append("format",n.format),n.sort_by&&i.append("sort_by",n.sort_by),n.sort_order&&i.append("sort_order",n.sort_order);const r=await Se(`${ga}/list?${i}`,{});if(!r.ok)throw new Error(`: ${r.statusText}`);return r.json()}async function E1(n){const i=await Se(`${ga}/${n}`,{});if(!i.ok)throw new Error(`: ${i.statusText}`);return i.json()}async function z1(n,i){const r=await Se(`${ga}/${n}`,{method:"PATCH",body:JSON.stringify(i)});if(!r.ok)throw new Error(`: ${r.statusText}`);return r.json()}async function M1(n){const i=await Se(`${ga}/${n}`,{method:"DELETE"});if(!i.ok)throw new Error(`: ${i.statusText}`);return i.json()}async function A1(){const n=await Se(`${ga}/stats/summary`,{});if(!n.ok)throw new Error(`: ${n.statusText}`);return n.json()}async function D1(n){const i=await Se(`${ga}/${n}/register`,{method:"POST"});if(!i.ok)throw new Error(`: ${i.statusText}`);return i.json()}async function O1(n){const i=await Se(`${ga}/${n}/ban`,{method:"POST"});if(!i.ok)throw new Error(`: ${i.statusText}`);return i.json()}function R1(n,i=!1){return i?`${ga}/${n}/thumbnail?original=true`:`${ga}/${n}/thumbnail`}function L1(n){return`${ga}/${n}/thumbnail?original=true`}async function U1(n){const i=await Se(`${ga}/batch/delete`,{method:"POST",body:JSON.stringify({emoji_ids:n})});if(!i.ok){const r=await i.json();throw new Error(r.detail||"")}return i.json()}function B1(){return`${ga}/upload`}function H1(){const[n,i]=u.useState([]),[r,d]=u.useState(null),[m,h]=u.useState(!1),[f,p]=u.useState(1),[g,b]=u.useState(0),[j,y]=u.useState(20),[N,T]=u.useState("all"),[w,U]=u.useState("all"),[O,B]=u.useState("all"),[I,L]=u.useState("usage_count"),[M,Y]=u.useState("desc"),[Q,z]=u.useState(null),[A,W]=u.useState(!1),[xe,be]=u.useState(!1),[_e,pe]=u.useState(!1),[ye,we]=u.useState(new Set),[R,X]=u.useState(!1),[C,$]=u.useState(""),[k,ce]=u.useState("medium"),[ue,ie]=u.useState(!1),{toast:fe}=Bs(),Ne=u.useCallback(async()=>{try{h(!0);const oe=await T1({page:f,page_size:j,is_registered:N==="all"?void 0:N==="registered",is_banned:w==="all"?void 0:w==="banned",format:O==="all"?void 0:O,sort_by:I,sort_order:M});i(oe.data),b(oe.total)}catch(oe){const Fe=oe instanceof Error?oe.message:"";fe({title:"",description:Fe,variant:"destructive"})}finally{h(!1)}},[f,j,N,w,O,I,M,fe]),me=async()=>{try{const oe=await A1();d(oe.data)}catch(oe){console.error(":",oe)}};u.useEffect(()=>{Ne()},[Ne]),u.useEffect(()=>{me()},[]);const ee=async oe=>{try{const Fe=await E1(oe.id);z(Fe.data),W(!0)}catch(Fe){const Qe=Fe instanceof Error?Fe.message:"";fe({title:"",description:Qe,variant:"destructive"})}},ae=oe=>{z(oe),be(!0)},V=oe=>{z(oe),pe(!0)},P=async()=>{if(Q)try{await M1(Q.id),fe({title:"",description:""}),pe(!1),z(null),Ne(),me()}catch(oe){const Fe=oe instanceof Error?oe.message:"";fe({title:"",description:Fe,variant:"destructive"})}},Ce=async oe=>{try{await D1(oe.id),fe({title:"",description:""}),Ne(),me()}catch(Fe){const Qe=Fe instanceof Error?Fe.message:"";fe({title:"",description:Qe,variant:"destructive"})}},Le=async oe=>{try{await O1(oe.id),fe({title:"",description:""}),Ne(),me()}catch(Fe){const Qe=Fe instanceof Error?Fe.message:"";fe({title:"",description:Qe,variant:"destructive"})}},ge=oe=>{const Fe=new Set(ye);Fe.has(oe)?Fe.delete(oe):Fe.add(oe),we(Fe)},Me=async()=>{try{const oe=await U1(Array.from(ye));fe({title:"",description:oe.message}),we(new Set),X(!1),Ne(),me()}catch(oe){fe({title:"",description:oe instanceof Error?oe.message:"",variant:"destructive"})}},$s=()=>{const oe=parseInt(C),Fe=Math.ceil(g/j);oe>=1&&oe<=Fe?(p(oe),$("")):fe({title:"",description:`1-${Fe}`,variant:"destructive"})},gt=r?.formats?Object.keys(r.formats):[];return e.jsxs("div",{className:"h-[calc(100vh-4rem)] flex flex-col p-4 sm:p-6",children:[e.jsxs("div",{className:"mb-4 sm:mb-6 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:""})]}),e.jsxs(_,{onClick:()=>ie(!0),className:"gap-2",children:[e.jsx(dr,{className:"h-4 w-4"}),""]})]}),e.jsx(Ke,{className:"flex-1",children:e.jsxs("div",{className:"space-y-4 sm:space-y-6 pr-4",children:[r&&e.jsxs("div",{className:"grid gap-4 grid-cols-2 lg:grid-cols-4",children:[e.jsx($e,{children:e.jsxs(ss,{className:"pb-2",children:[e.jsx(Ws,{children:""}),e.jsx(ts,{className:"text-2xl",children:r.total})]})}),e.jsx($e,{children:e.jsxs(ss,{className:"pb-2",children:[e.jsx(Ws,{children:""}),e.jsx(ts,{className:"text-2xl text-green-600",children:r.registered})]})}),e.jsx($e,{children:e.jsxs(ss,{className:"pb-2",children:[e.jsx(Ws,{children:""}),e.jsx(ts,{className:"text-2xl text-red-600",children:r.banned})]})}),e.jsx($e,{children:e.jsxs(ss,{className:"pb-2",children:[e.jsx(Ws,{children:""}),e.jsx(ts,{className:"text-2xl text-gray-600",children:r.unregistered})]})})]}),e.jsxs($e,{children:[e.jsx(ss,{children:e.jsxs(ts,{className:"flex items-center gap-2",children:[e.jsx(Lu,{className:"h-5 w-5"}),""]})}),e.jsxs(fs,{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{children:""}),e.jsxs(Oe,{value:`${I}-${M}`,onValueChange:oe=>{const[Fe,Qe]=oe.split("-");L(Fe),Y(Qe),p(1)},children:[e.jsx(Ae,{children:e.jsx(Re,{})}),e.jsxs(De,{children:[e.jsx(te,{value:"usage_count-desc",children:" ()"}),e.jsx(te,{value:"usage_count-asc",children:" ()"}),e.jsx(te,{value:"register_time-desc",children:" ()"}),e.jsx(te,{value:"register_time-asc",children:" ()"}),e.jsx(te,{value:"record_time-desc",children:" ()"}),e.jsx(te,{value:"record_time-asc",children:" ()"}),e.jsx(te,{value:"last_used_time-desc",children:" ()"}),e.jsx(te,{value:"last_used_time-asc",children:" ()"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{children:""}),e.jsxs(Oe,{value:N,onValueChange:oe=>{T(oe),p(1)},children:[e.jsx(Ae,{children:e.jsx(Re,{})}),e.jsxs(De,{children:[e.jsx(te,{value:"all",children:""}),e.jsx(te,{value:"registered",children:""}),e.jsx(te,{value:"unregistered",children:""})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{children:""}),e.jsxs(Oe,{value:w,onValueChange:oe=>{U(oe),p(1)},children:[e.jsx(Ae,{children:e.jsx(Re,{})}),e.jsxs(De,{children:[e.jsx(te,{value:"all",children:""}),e.jsx(te,{value:"banned",children:""}),e.jsx(te,{value:"unbanned",children:""})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{children:""}),e.jsxs(Oe,{value:O,onValueChange:oe=>{B(oe),p(1)},children:[e.jsx(Ae,{children:e.jsx(Re,{})}),e.jsxs(De,{children:[e.jsx(te,{value:"all",children:""}),gt.map(oe=>e.jsxs(te,{value:oe,children:[oe.toUpperCase()," (",r?.formats[oe],")"]},oe))]})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 pt-4 border-t",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[ye.size>0&&e.jsxs("span",{className:"text-sm text-muted-foreground",children:[" ",ye.size," "]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{className:"text-sm whitespace-nowrap",children:""}),e.jsxs(Oe,{value:k,onValueChange:oe=>ce(oe),children:[e.jsx(Ae,{className:"w-24",children:e.jsx(Re,{})}),e.jsxs(De,{children:[e.jsx(te,{value:"small",children:""}),e.jsx(te,{value:"medium",children:""}),e.jsx(te,{value:"large",children:""})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{htmlFor:"emoji-page-size",className:"text-sm whitespace-nowrap",children:""}),e.jsxs(Oe,{value:j.toString(),onValueChange:oe=>{y(parseInt(oe)),p(1),we(new Set)},children:[e.jsx(Ae,{id:"emoji-page-size",className:"w-20",children:e.jsx(Re,{})}),e.jsxs(De,{children:[e.jsx(te,{value:"20",children:"20"}),e.jsx(te,{value:"40",children:"40"}),e.jsx(te,{value:"60",children:"60"}),e.jsx(te,{value:"100",children:"100"})]})]}),ye.size>0&&e.jsxs(e.Fragment,{children:[e.jsx(_,{variant:"outline",size:"sm",onClick:()=>we(new Set),children:""}),e.jsxs(_,{variant:"destructive",size:"sm",onClick:()=>X(!0),children:[e.jsx(Pe,{className:"h-4 w-4 mr-1"}),""]})]})]})]}),e.jsx("div",{className:"flex justify-end pt-4 border-t",children:e.jsxs(_,{variant:"outline",size:"sm",onClick:Ne,disabled:m,children:[e.jsx(Et,{className:`h-4 w-4 mr-2 ${m?"animate-spin":""}`}),""]})})]})]}),e.jsxs($e,{children:[e.jsxs(ss,{children:[e.jsx(ts,{children:""}),e.jsxs(Ws,{children:[" ",g,"  ",f," "]})]}),e.jsxs(fs,{children:[n.length===0?e.jsx("div",{className:"text-center py-12 text-muted-foreground",children:""}):e.jsx("div",{className:`grid gap-3 ${k==="small"?"grid-cols-3 sm:grid-cols-4 md:grid-cols-6 lg:grid-cols-8 xl:grid-cols-10":k==="medium"?"grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 xl:grid-cols-8":"grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5"}`,children:n.map(oe=>e.jsxs("div",{className:`group relative rounded-lg border bg-card overflow-hidden hover:ring-2 hover:ring-primary transition-all cursor-pointer ${ye.has(oe.id)?"ring-2 ring-primary bg-primary/5":""}`,onClick:()=>ge(oe.id),children:[e.jsx("div",{className:`absolute top-1 left-1 z-10 transition-opacity ${ye.has(oe.id)?"opacity-100":"opacity-0 group-hover:opacity-100"}`,children:e.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${ye.has(oe.id)?"bg-primary border-primary text-primary-foreground":"bg-background/80 border-muted-foreground/50"}`,children:ye.has(oe.id)&&e.jsx(ta,{className:"h-3 w-3"})})}),e.jsxs("div",{className:"absolute top-1 right-1 z-10 flex flex-col gap-0.5",children:[oe.is_registered&&e.jsx(qe,{variant:"default",className:"bg-green-600 text-[10px] px-1 py-0",children:""}),oe.is_banned&&e.jsx(qe,{variant:"destructive",className:"text-[10px] px-1 py-0",children:""})]}),e.jsx("div",{className:`aspect-square bg-muted flex items-center justify-center overflow-hidden ${k==="small"?"p-1":k==="medium"?"p-2":"p-3"}`,children:e.jsx(C1,{src:R1(oe.id),alt:""})}),e.jsxs("div",{className:`border-t bg-card ${k==="small"?"p-1":"p-2"}`,children:[e.jsxs("div",{className:"flex items-center justify-between gap-1 text-xs text-muted-foreground mb-1",children:[e.jsx(qe,{variant:"outline",className:"text-[10px] px-1 py-0",children:oe.format.toUpperCase()}),e.jsxs("span",{className:"font-mono",children:[oe.usage_count,""]})]}),e.jsxs("div",{className:`flex gap-1 justify-center opacity-0 group-hover:opacity-100 transition-opacity ${k==="small"?"flex-wrap":""}`,children:[e.jsx(_,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:Fe=>{Fe.stopPropagation(),ae(oe)},title:"",children:e.jsx(ln,{className:"h-3 w-3"})}),e.jsx(_,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:Fe=>{Fe.stopPropagation(),ee(oe)},title:"",children:e.jsx(Oa,{className:"h-3 w-3"})}),!oe.is_registered&&e.jsx(_,{variant:"ghost",size:"icon",className:"h-6 w-6 text-green-600 hover:text-green-700",onClick:Fe=>{Fe.stopPropagation(),Ce(oe)},title:"",children:e.jsx(ta,{className:"h-3 w-3"})}),!oe.is_banned&&e.jsx(_,{variant:"ghost",size:"icon",className:"h-6 w-6 text-orange-600 hover:text-orange-700",onClick:Fe=>{Fe.stopPropagation(),Le(oe)},title:"",children:e.jsx(xy,{className:"h-3 w-3"})}),e.jsx(_,{variant:"ghost",size:"icon",className:"h-6 w-6 text-red-600 hover:text-red-700",onClick:Fe=>{Fe.stopPropagation(),V(oe)},title:"",children:e.jsx(Pe,{className:"h-3 w-3"})})]})]})]},oe.id))}),g>0&&e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 mt-4",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:[" ",(f-1)*j+1," "," ",Math.min(f*j,g),"  ",g," "]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{variant:"outline",size:"sm",onClick:()=>p(1),disabled:f===1,className:"hidden sm:flex",children:e.jsx(ai,{className:"h-4 w-4"})}),e.jsxs(_,{variant:"outline",size:"sm",onClick:()=>p(oe=>Math.max(1,oe-1)),disabled:f===1,children:[e.jsx(rl,{className:"h-4 w-4 sm:mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{type:"number",value:C,onChange:oe=>$(oe.target.value),onKeyDown:oe=>oe.key==="Enter"&&$s(),placeholder:f.toString(),className:"w-16 h-8 text-center",min:1,max:Math.ceil(g/j)}),e.jsx(_,{variant:"outline",size:"sm",onClick:$s,disabled:!C,className:"h-8",children:""})]}),e.jsxs(_,{variant:"outline",size:"sm",onClick:()=>p(oe=>oe+1),disabled:f>=Math.ceil(g/j),children:[e.jsx("span",{className:"hidden sm:inline",children:""}),e.jsx(Ua,{className:"h-4 w-4 sm:ml-1"})]}),e.jsx(_,{variant:"outline",size:"sm",onClick:()=>p(Math.ceil(g/j)),disabled:f>=Math.ceil(g/j),className:"hidden sm:flex",children:e.jsx(li,{className:"h-4 w-4"})})]})]})]})]}),e.jsx(q1,{emoji:Q,open:A,onOpenChange:W}),e.jsx(G1,{emoji:Q,open:xe,onOpenChange:be,onSuccess:()=>{Ne(),me()}}),e.jsx(F1,{open:ue,onOpenChange:ie,onSuccess:()=>{Ne(),me()}})]})}),e.jsx(ms,{open:R,onOpenChange:X,children:e.jsxs(as,{children:[e.jsxs(ls,{children:[e.jsx(is,{children:""}),e.jsxs(rs,{children:[" ",ye.size," "]})]}),e.jsxs(ns,{children:[e.jsx(os,{children:""}),e.jsx(cs,{onClick:Me,children:""})]})]})}),e.jsx(qs,{open:_e,onOpenChange:pe,children:e.jsxs(Rs,{children:[e.jsxs(Ls,{children:[e.jsx(Us,{children:""}),e.jsx(Ks,{children:""})]}),e.jsxs(tt,{children:[e.jsx(_,{variant:"outline",onClick:()=>pe(!1),children:""}),e.jsx(_,{variant:"destructive",onClick:P,children:""})]})]})})]})}function q1({emoji:n,open:i,onOpenChange:r}){if(!n)return null;const d=m=>m?new Date(m*1e3).toLocaleString("zh-CN"):"-";return e.jsx(qs,{open:i,onOpenChange:r,children:e.jsxs(Rs,{className:"max-w-2xl max-h-[90vh]",children:[e.jsx(Ls,{children:e.jsx(Us,{children:""})}),e.jsx(Ke,{className:"max-h-[calc(90vh-8rem)] pr-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"w-32 h-32 bg-muted rounded-lg flex items-center justify-center overflow-hidden",children:e.jsx("img",{src:L1(n.id),alt:n.description||"",className:"w-full h-full object-cover",onError:m=>{const h=m.target;h.style.display="none";const f=h.parentElement;f&&(f.innerHTML='<svg class="h-16 w-16 text-muted-foreground" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg>')}})})}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(S,{className:"text-muted-foreground",children:"ID"}),e.jsx("div",{className:"mt-1 font-mono",children:n.id})]}),e.jsxs("div",{children:[e.jsx(S,{className:"text-muted-foreground",children:""}),e.jsx("div",{className:"mt-1",children:e.jsx(qe,{variant:"outline",children:n.format.toUpperCase()})})]})]}),e.jsxs("div",{children:[e.jsx(S,{className:"text-muted-foreground",children:""}),e.jsx("div",{className:"mt-1 font-mono text-sm break-all bg-muted p-2 rounded",children:n.full_path})]}),e.jsxs("div",{children:[e.jsx(S,{className:"text-muted-foreground",children:""}),e.jsx("div",{className:"mt-1 font-mono text-sm break-all bg-muted p-2 rounded",children:n.emoji_hash})]}),e.jsxs("div",{children:[e.jsx(S,{className:"text-muted-foreground",children:""}),n.description?e.jsx("div",{className:"mt-1 rounded-lg border bg-muted/50 p-3",children:e.jsx(k1,{className:"prose-sm",children:n.description})}):e.jsx("div",{className:"mt-1 text-sm text-muted-foreground",children:"-"})]}),e.jsxs("div",{children:[e.jsx(S,{className:"text-muted-foreground",children:""}),e.jsx("div",{className:"mt-1",children:n.emotion?e.jsx("span",{className:"text-sm",children:n.emotion}):e.jsx("span",{className:"text-sm text-muted-foreground",children:"-"})})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(S,{className:"text-muted-foreground",children:""}),e.jsxs("div",{className:"mt-2 flex gap-2",children:[n.is_registered&&e.jsx(qe,{variant:"default",className:"bg-green-600",children:""}),n.is_banned&&e.jsx(qe,{variant:"destructive",children:""}),!n.is_registered&&!n.is_banned&&e.jsx(qe,{variant:"outline",children:""})]})]}),e.jsxs("div",{children:[e.jsx(S,{className:"text-muted-foreground",children:""}),e.jsx("div",{className:"mt-1 font-mono text-lg",children:n.usage_count})]})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(S,{className:"text-muted-foreground",children:""}),e.jsx("div",{className:"mt-1 text-sm",children:d(n.record_time)})]}),e.jsxs("div",{children:[e.jsx(S,{className:"text-muted-foreground",children:""}),e.jsx("div",{className:"mt-1 text-sm",children:d(n.register_time)})]})]}),e.jsxs("div",{children:[e.jsx(S,{className:"text-muted-foreground",children:""}),e.jsx("div",{className:"mt-1 text-sm",children:d(n.last_used_time)})]})]})})]})})}function G1({emoji:n,open:i,onOpenChange:r,onSuccess:d}){const[m,h]=u.useState(""),[f,p]=u.useState(!1),[g,b]=u.useState(!1),[j,y]=u.useState(!1),{toast:N}=Bs();u.useEffect(()=>{n&&(h(n.emotion||""),p(n.is_registered),b(n.is_banned))},[n]);const T=async()=>{if(n)try{y(!0);const w=m.split(/[,,]/).map(U=>U.trim()).filter(Boolean).join(",");await z1(n.id,{emotion:w||void 0,is_registered:f,is_banned:g}),N({title:"",description:""}),r(!1),d()}catch(w){const U=w instanceof Error?w.message:"";N({title:"",description:U,variant:"destructive"})}finally{y(!1)}};return n?e.jsx(qs,{open:i,onOpenChange:r,children:e.jsxs(Rs,{className:"max-w-2xl",children:[e.jsxs(Ls,{children:[e.jsx(Us,{children:""}),e.jsx(Ks,{children:""})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(S,{children:""}),e.jsx(Ms,{value:m,onChange:w=>h(w.target.value),placeholder:"...",rows:2,className:"mt-1"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:""})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ft,{id:"is_registered",checked:f,onCheckedChange:w=>{w===!0?(p(!0),b(!1)):p(!1)}}),e.jsx(S,{htmlFor:"is_registered",className:"cursor-pointer",children:""})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ft,{id:"is_banned",checked:g,onCheckedChange:w=>{w===!0?(b(!0),p(!1)):b(!1)}}),e.jsx(S,{htmlFor:"is_banned",className:"cursor-pointer",children:""})]})]})]}),e.jsxs(tt,{children:[e.jsx(_,{variant:"outline",onClick:()=>r(!1),children:""}),e.jsx(_,{onClick:T,disabled:j,children:j?"...":""})]})]})}):null}function F1({open:n,onOpenChange:i,onSuccess:r}){const[d,m]=u.useState("select"),[h,f]=u.useState([]),[p,g]=u.useState(null),[b,j]=u.useState(!1),{toast:y}=Bs(),N=u.useMemo(()=>new Jy({id:"emoji-uploader",autoProceed:!1,restrictions:{maxFileSize:10485760,allowedFileTypes:["image/jpeg","image/png","image/gif","image/webp"],maxNumberOfFiles:20},locale:{pluralize:()=>0,strings:{addMoreFiles:"",addingMoreFiles:"",allowedFileTypes:"%{types}",cancel:"",closeModal:"",complete:"",connectedToInternet:"",copyLink:"",copyLinkToClipboardFallback:"",copyLinkToClipboardSuccess:"",dashboardTitle:"",dashboardWindowTitle:" ESC ",done:"",dropHereOr:" %{browse}",dropHint:"",dropPasteFiles:" %{browseFiles}",dropPasteFolders:" %{browseFolders}",dropPasteBoth:"%{browseFiles}  %{browseFolders}",dropPasteImportFiles:"%{browseFiles} ",dropPasteImportFolders:"%{browseFolders} ",dropPasteImportBoth:"%{browseFiles}%{browseFolders} ",editFile:"",editing:" %{file}",emptyFolderAdded:"",exceedsSize:"%{file}  %{size}",failedToUpload:" %{file} ",fileSource:"%{name}",filesUploadedOfTotal:{0:" %{complete} / %{smart_count} ",1:" %{complete} / %{smart_count} "},filter:"",finishEditingFile:"",folderAdded:{0:" %{folder}  %{smart_count} ",1:" %{folder}  %{smart_count} "},generatingThumbnails:"...",import:"",importFiles:"",importFrom:" %{name} ",loading:"...",logOut:"",myDevice:"",noFilesFound:"",noInternetConnection:"",openFolderNamed:" %{name}",pause:"",pauseUpload:"",paused:"",poweredBy:"%{uppy}",processingXFiles:{0:" %{smart_count} ",1:" %{smart_count} "},recording:"",removeFile:"",resetFilter:"",resume:"",resumeUpload:"",retry:"",retryUpload:"",save:"",saveChanges:"",selectFileNamed:" %{name}",selectX:{0:" %{smart_count}",1:" %{smart_count}"},smile:"",startRecording:"",stopRecording:"",takePicture:"",timedOut:" %{seconds} ",upload:"",uploadComplete:"",uploadFailed:"",uploadPaused:"",uploadXFiles:{0:"%{smart_count} ",1:"%{smart_count} "},uploadXNewFiles:{0:"+%{smart_count} ",1:"+%{smart_count} "},uploading:"",uploadingXFiles:{0:" %{smart_count} ",1:" %{smart_count} "},xFilesSelected:{0:" %{smart_count} ",1:" %{smart_count} "},xMoreFilesAdded:{0:" %{smart_count} ",1:" %{smart_count} "},xTimeLeft:" %{time}",youCanOnlyUploadFileTypes:"%{types}",youCanOnlyUploadX:{0:" %{smart_count} ",1:" %{smart_count} "},youHaveToAtLeastSelectX:{0:" %{smart_count} ",1:" %{smart_count} "},browseFiles:"",browseFolders:"",cancelUpload:"",addMore:"",back:"",editFileWithFilename:" %{file}"}}}),[]);u.useEffect(()=>{const Q=()=>{const z=N.getFiles();if(z.length===0)return;const A=z.map(W=>({id:W.id,name:W.name,previewUrl:W.preview||URL.createObjectURL(W.data),emotion:"",description:"",isRegistered:!0,file:W.data}));f(A),z.length===1?(g(A[0].id),m("edit-single")):m("edit-multiple")};return N.on("upload",Q),()=>{N.off("upload",Q)}},[N]),u.useEffect(()=>{n||(N.cancelAll(),m("select"),f([]),g(null),j(!1))},[n,N]);const T=u.useCallback((Q,z)=>{f(A=>A.map(W=>W.id===Q?{...W,...z}:W))},[]),w=u.useCallback(Q=>Q.emotion.trim().length>0,[]),U=u.useMemo(()=>h.length>0&&h.every(w),[h,w]),O=u.useMemo(()=>h.find(Q=>Q.id===p)||null,[h,p]),B=u.useCallback(()=>{(d==="edit-single"||d==="edit-multiple")&&(m("select"),f([]),g(null))},[d]),I=u.useCallback(async()=>{if(!U){y({title:"",description:"",variant:"destructive"});return}j(!0);const Q=localStorage.getItem("access-token")||"";let z=0,A=0;try{for(const W of h){const xe=new FormData;xe.append("file",W.file),xe.append("emotion",W.emotion),xe.append("description",W.description),xe.append("is_registered",W.isRegistered.toString());try{(await fetch(B1(),{method:"POST",headers:{Authorization:`Bearer ${Q}`},body:xe})).ok?z++:A++}catch{A++}}A===0?(y({title:"",description:` ${z} `}),i(!1),r()):(y({title:"",description:` ${z}  ${A} `,variant:"destructive"}),r())}finally{j(!1)}},[U,h,y,i,r]),L=()=>e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"border rounded-lg overflow-hidden w-full",children:e.jsx(S1,{uppy:N,proudlyDisplayPoweredByUppy:!1,hideProgressDetails:!0,height:350,width:"100%",theme:"auto",note:" JPGPNGGIFWebP  20 "})})}),M=()=>{const Q=h[0];return Q?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(_,{variant:"ghost",size:"sm",onClick:B,children:[e.jsx(Wn,{className:"h-4 w-4 mr-1"}),""]}),e.jsx("span",{className:"text-sm text-muted-foreground",children:""})]}),e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("div",{className:"flex-shrink-0",children:[e.jsx("div",{className:"w-32 h-32 rounded-lg border overflow-hidden bg-muted flex items-center justify-center",children:e.jsx("img",{src:Q.previewUrl,alt:Q.name,className:"max-w-full max-h-full object-contain"})}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2 text-center truncate max-w-32",children:Q.name})]}),e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(S,{htmlFor:"single-emotion",children:[" ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(ne,{id:"single-emotion",value:Q.emotion,onChange:z=>T(Q.id,{emotion:z.target.value}),placeholder:",",className:Q.emotion.trim()?"":"border-destructive"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"single-description",children:""}),e.jsx(ne,{id:"single-description",value:Q.description,onChange:z=>T(Q.id,{description:z.target.value}),placeholder:"..."})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ft,{id:"single-is-registered",checked:Q.isRegistered,onCheckedChange:z=>T(Q.id,{isRegistered:z===!0})}),e.jsx(S,{htmlFor:"single-is-registered",className:"cursor-pointer",children:""})]})]})]}),e.jsx(tt,{children:e.jsx(_,{onClick:I,disabled:!U||b,children:b?"...":""})})]}):null},Y=()=>{const Q=h.filter(w).length,z=h.length;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(_,{variant:"ghost",size:"sm",onClick:B,children:[e.jsx(Wn,{className:"h-4 w-4 mr-1"}),""]}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["",Q,"/",z," "]})]}),e.jsx(qe,{variant:U?"default":"secondary",children:U?e.jsxs(e.Fragment,{children:[e.jsx(Vt,{className:"h-3 w-3 mr-1"}),""]}):e.jsxs(e.Fragment,{children:[e.jsx(il,{className:"h-3 w-3 mr-1"}),""]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(Ke,{className:"h-[350px] pr-2",children:e.jsx("div",{className:"space-y-2",children:h.map(A=>{const W=w(A),xe=p===A.id;return e.jsxs("div",{onClick:()=>g(A.id),className:`
                      flex items-center gap-3 p-3 rounded-lg border-2 cursor-pointer transition-all
                      ${xe?"ring-2 ring-primary":""}
                      ${W?"border-green-500 bg-green-50 dark:bg-green-950/20":"border-border hover:border-muted-foreground/50"}
                    `,children:[e.jsx("div",{className:"w-12 h-12 rounded border overflow-hidden bg-muted flex-shrink-0 flex items-center justify-center",children:e.jsx("img",{src:A.previewUrl,alt:A.name,className:"max-w-full max-h-full object-contain"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:A.name}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:A.emotion||""})]}),W?e.jsx(ta,{className:"h-5 w-5 text-green-500 flex-shrink-0"}):e.jsx("div",{className:"h-5 w-5 rounded-full border-2 border-muted-foreground/30 flex-shrink-0"})]},A.id)})})}),e.jsx("div",{className:"border rounded-lg p-4",children:O?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-16 h-16 rounded border overflow-hidden bg-muted flex items-center justify-center",children:e.jsx("img",{src:O.previewUrl,alt:O.name,className:"max-w-full max-h-full object-contain"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium truncate",children:O.name}),w(O)&&e.jsxs(qe,{variant:"outline",className:"text-green-600 border-green-600",children:[e.jsx(Vt,{className:"h-3 w-3 mr-1"}),""]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(S,{htmlFor:"multi-emotion",children:[" ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(ne,{id:"multi-emotion",value:O.emotion,onChange:A=>T(O.id,{emotion:A.target.value}),placeholder:",",className:O.emotion.trim()?"":"border-destructive"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"multi-description",children:""}),e.jsx(ne,{id:"multi-description",value:O.description,onChange:A=>T(O.id,{description:A.target.value}),placeholder:"..."})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ft,{id:"multi-is-registered",checked:O.isRegistered,onCheckedChange:A=>T(O.id,{isRegistered:A===!0})}),e.jsx(S,{htmlFor:"multi-is-registered",className:"cursor-pointer text-sm",children:""})]})]}):e.jsx("div",{className:"h-full flex items-center justify-center text-muted-foreground",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ng,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:""})]})})})]}),e.jsx(tt,{children:e.jsx(_,{onClick:I,disabled:!U||b,children:b?"...":` (${z})`})})]})};return e.jsx(qs,{open:n,onOpenChange:i,children:e.jsxs(Rs,{className:"max-w-3xl max-h-[90vh] overflow-hidden",children:[e.jsxs(Ls,{children:[e.jsxs(Us,{className:"flex items-center gap-2",children:[e.jsx(dr,{className:"h-5 w-5"}),d==="select"&&" - ",d==="edit-single"&&" - ",d==="edit-multiple"&&" - "]}),e.jsxs(Ks,{children:[d==="select"&&" JPGPNGGIFWebP  10MB",d==="edit-single"&&"",d==="edit-multiple"&&""]})]}),e.jsxs("div",{className:"overflow-y-auto pr-1",children:[d==="select"&&L(),d==="edit-single"&&M(),d==="edit-multiple"&&Y()]})]})})}const Ll="/api/webui/expression";async function V1(){const n=await Se(`${Ll}/chats`,{});if(!n.ok){const i=await n.json();throw new Error(i.detail||"")}return n.json()}async function $1(n){const i=new URLSearchParams;n.page&&i.append("page",n.page.toString()),n.page_size&&i.append("page_size",n.page_size.toString()),n.search&&i.append("search",n.search),n.chat_id&&i.append("chat_id",n.chat_id);const r=await Se(`${Ll}/list?${i}`,{});if(!r.ok){const d=await r.json();throw new Error(d.detail||"")}return r.json()}async function Q1(n){const i=await Se(`${Ll}/${n}`,{});if(!i.ok){const r=await i.json();throw new Error(r.detail||"")}return i.json()}async function I1(n){const i=await Se(`${Ll}/`,{method:"POST",body:JSON.stringify(n)});if(!i.ok){const r=await i.json();throw new Error(r.detail||"")}return i.json()}async function Y1(n,i){const r=await Se(`${Ll}/${n}`,{method:"PATCH",body:JSON.stringify(i)});if(!r.ok){const d=await r.json();throw new Error(d.detail||"")}return r.json()}async function X1(n){const i=await Se(`${Ll}/${n}`,{method:"DELETE"});if(!i.ok){const r=await i.json();throw new Error(r.detail||"")}return i.json()}async function K1(n){const i=await Se(`${Ll}/batch/delete`,{method:"POST",body:JSON.stringify({ids:n})});if(!i.ok){const r=await i.json();throw new Error(r.detail||"")}return i.json()}async function J1(){const n=await Se(`${Ll}/stats/summary`,{});if(!n.ok){const i=await n.json();throw new Error(i.detail||"")}return n.json()}function P1(){const[n,i]=u.useState([]),[r,d]=u.useState(!0),[m,h]=u.useState(0),[f,p]=u.useState(1),[g,b]=u.useState(20),[j,y]=u.useState(""),[N,T]=u.useState(null),[w,U]=u.useState(!1),[O,B]=u.useState(!1),[I,L]=u.useState(!1),[M,Y]=u.useState(null),[Q,z]=u.useState(new Set),[A,W]=u.useState(!1),[xe,be]=u.useState(""),[_e,pe]=u.useState({total:0,recent_7days:0,chat_count:0,top_chats:{}}),[ye,we]=u.useState([]),[R,X]=u.useState(new Map),{toast:C}=Bs(),$=async()=>{try{d(!0);const P=await $1({page:f,page_size:g,search:j||void 0});i(P.data),h(P.total)}catch(P){C({title:"",description:P instanceof Error?P.message:"",variant:"destructive"})}finally{d(!1)}},k=async()=>{try{const P=await J1();P?.data&&pe(P.data)}catch(P){console.error(":",P)}},ce=async()=>{try{const P=await V1();if(P?.data){we(P.data);const Ce=new Map;P.data.forEach(Le=>{Ce.set(Le.chat_id,Le.chat_name)}),X(Ce)}}catch(P){console.error(":",P)}},ue=P=>R.get(P)||P;u.useEffect(()=>{$(),k(),ce()},[f,g,j]);const ie=async P=>{try{const Ce=await Q1(P.id);T(Ce.data),U(!0)}catch(Ce){C({title:"",description:Ce instanceof Error?Ce.message:"",variant:"destructive"})}},fe=P=>{T(P),B(!0)},Ne=async P=>{try{await X1(P.id),C({title:"",description:`: ${P.situation}`}),Y(null),$(),k()}catch(Ce){C({title:"",description:Ce instanceof Error?Ce.message:"",variant:"destructive"})}},me=P=>{const Ce=new Set(Q);Ce.has(P)?Ce.delete(P):Ce.add(P),z(Ce)},ee=()=>{Q.size===n.length&&n.length>0?z(new Set):z(new Set(n.map(P=>P.id)))},ae=async()=>{try{await K1(Array.from(Q)),C({title:"",description:` ${Q.size} `}),z(new Set),W(!1),$(),k()}catch(P){C({title:"",description:P instanceof Error?P.message:"",variant:"destructive"})}},V=()=>{const P=parseInt(xe),Ce=Math.ceil(m/g);P>=1&&P<=Ce?(p(P),be("")):C({title:"",description:`1-${Ce}`,variant:"destructive"})};return e.jsxs("div",{className:"h-[calc(100vh-4rem)] flex flex-col p-4 sm:p-6",children:[e.jsx("div",{className:"mb-4 sm:mb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold flex items-center gap-2",children:[e.jsx(Dl,{className:"h-8 w-8",strokeWidth:2}),""]}),e.jsx("p",{className:"text-muted-foreground mt-1 text-sm sm:text-base",children:""})]}),e.jsxs(_,{onClick:()=>L(!0),className:"gap-2",children:[e.jsx(rt,{className:"h-4 w-4"}),""]})]})}),e.jsx(Ke,{className:"flex-1",children:e.jsxs("div",{className:"space-y-4 sm:space-y-6 pr-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"rounded-lg border bg-card p-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:""}),e.jsx("div",{className:"text-2xl font-bold mt-1",children:_e.total})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"7"}),e.jsx("div",{className:"text-2xl font-bold mt-1 text-green-600",children:_e.recent_7days})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:""}),e.jsx("div",{className:"text-2xl font-bold mt-1 text-blue-600",children:_e.chat_count})]})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4",children:[e.jsx(S,{htmlFor:"search",children:""}),e.jsx("div",{className:"flex flex-col sm:flex-row gap-2 mt-1.5",children:e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Mt,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(ne,{id:"search",placeholder:"...",value:j,onChange:P=>y(P.target.value),className:"pl-9"})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 mt-4 pt-4 border-t",children:[e.jsx("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:Q.size>0&&e.jsxs("span",{children:[" ",Q.size," "]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{htmlFor:"page-size",className:"text-sm whitespace-nowrap",children:""}),e.jsxs(Oe,{value:g.toString(),onValueChange:P=>{b(parseInt(P)),p(1),z(new Set)},children:[e.jsx(Ae,{id:"page-size",className:"w-20",children:e.jsx(Re,{})}),e.jsxs(De,{children:[e.jsx(te,{value:"10",children:"10"}),e.jsx(te,{value:"20",children:"20"}),e.jsx(te,{value:"50",children:"50"}),e.jsx(te,{value:"100",children:"100"})]})]}),Q.size>0&&e.jsxs(e.Fragment,{children:[e.jsx(_,{variant:"outline",size:"sm",onClick:()=>z(new Set),children:""}),e.jsxs(_,{variant:"destructive",size:"sm",onClick:()=>W(!0),children:[e.jsx(Pe,{className:"h-4 w-4 mr-1"}),""]})]})]})]})]}),e.jsxs("div",{className:"rounded-lg border bg-card",children:[e.jsx("div",{className:"hidden md:block",children:e.jsxs(nn,{children:[e.jsx(rn,{children:e.jsxs(ct,{children:[e.jsx(Xe,{className:"w-12",children:e.jsx(ft,{checked:Q.size===n.length&&n.length>0,onCheckedChange:ee})}),e.jsx(Xe,{children:""}),e.jsx(Xe,{children:""}),e.jsx(Xe,{children:""}),e.jsx(Xe,{className:"text-right",children:""})]})}),e.jsx(cn,{children:r?e.jsx(ct,{children:e.jsx(He,{colSpan:5,className:"text-center py-8 text-muted-foreground",children:"..."})}):n.length===0?e.jsx(ct,{children:e.jsx(He,{colSpan:5,className:"text-center py-8 text-muted-foreground",children:""})}):n.map(P=>e.jsxs(ct,{children:[e.jsx(He,{children:e.jsx(ft,{checked:Q.has(P.id),onCheckedChange:()=>me(P.id)})}),e.jsx(He,{className:"font-medium max-w-xs truncate",children:P.situation}),e.jsx(He,{className:"max-w-xs truncate",children:P.style}),e.jsx(He,{className:"max-w-[200px] truncate",title:ue(P.chat_id),style:{wordBreak:"keep-all"},children:e.jsx("span",{className:"whitespace-nowrap overflow-hidden text-ellipsis block",children:ue(P.chat_id)})}),e.jsx(He,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsxs(_,{variant:"default",size:"sm",onClick:()=>fe(P),children:[e.jsx(ln,{className:"h-4 w-4 mr-1"}),""]}),e.jsx(_,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>ie(P),title:"",children:e.jsx(Ot,{className:"h-4 w-4"})}),e.jsxs(_,{size:"sm",onClick:()=>Y(P),className:"bg-red-600 hover:bg-red-700 text-white",children:[e.jsx(Pe,{className:"h-4 w-4 mr-1"}),""]})]})})]},P.id))})]})}),e.jsx("div",{className:"md:hidden space-y-3 p-4",children:r?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"..."}):n.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:""}):n.map(P=>e.jsxs("div",{className:"rounded-lg border bg-card p-4 space-y-3 overflow-hidden",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ft,{checked:Q.has(P.id),onCheckedChange:()=>me(P.id),className:"mt-1"}),e.jsxs("div",{className:"min-w-0 flex-1 overflow-hidden space-y-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:""}),e.jsx("h3",{className:"font-semibold text-sm line-clamp-2 w-full break-all",title:P.situation,children:P.situation})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:""}),e.jsx("p",{className:"text-sm line-clamp-2 w-full break-all",title:P.style,children:P.style})]})]})]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:""}),e.jsx("p",{className:"text-sm truncate",title:ue(P.chat_id),style:{wordBreak:"keep-all"},children:ue(P.chat_id)})]}),e.jsxs("div",{className:"flex flex-wrap gap-1 pt-2 border-t overflow-hidden",children:[e.jsxs(_,{variant:"outline",size:"sm",onClick:()=>fe(P),className:"text-xs px-2 py-1 h-auto flex-shrink-0",children:[e.jsx(ln,{className:"h-3 w-3 mr-1"}),""]}),e.jsx(_,{variant:"outline",size:"sm",onClick:()=>ie(P),className:"text-xs px-2 py-1 h-auto flex-shrink-0",children:e.jsx(Ot,{className:"h-3 w-3"})}),e.jsxs(_,{variant:"outline",size:"sm",onClick:()=>Y(P),className:"text-xs px-2 py-1 h-auto flex-shrink-0 text-destructive hover:text-destructive",children:[e.jsx(Pe,{className:"h-3 w-3 mr-1"}),""]})]})]},P.id))}),m>0&&e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 px-4 py-3 border-t",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:[" ",m,"  ",f," / ",Math.ceil(m/g)," "]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{variant:"outline",size:"sm",onClick:()=>p(1),disabled:f===1,className:"hidden sm:flex",children:e.jsx(ai,{className:"h-4 w-4"})}),e.jsxs(_,{variant:"outline",size:"sm",onClick:()=>p(f-1),disabled:f===1,children:[e.jsx(rl,{className:"h-4 w-4 sm:mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{type:"number",value:xe,onChange:P=>be(P.target.value),onKeyDown:P=>P.key==="Enter"&&V(),placeholder:f.toString(),className:"w-16 h-8 text-center",min:1,max:Math.ceil(m/g)}),e.jsx(_,{variant:"outline",size:"sm",onClick:V,disabled:!xe,className:"h-8",children:""})]}),e.jsxs(_,{variant:"outline",size:"sm",onClick:()=>p(f+1),disabled:f>=Math.ceil(m/g),children:[e.jsx("span",{className:"hidden sm:inline",children:""}),e.jsx(Ua,{className:"h-4 w-4 sm:ml-1"})]}),e.jsx(_,{variant:"outline",size:"sm",onClick:()=>p(Math.ceil(m/g)),disabled:f>=Math.ceil(m/g),className:"hidden sm:flex",children:e.jsx(li,{className:"h-4 w-4"})})]})]})]})]})}),e.jsx(Z1,{expression:N,open:w,onOpenChange:U,chatNameMap:R}),e.jsx(W1,{open:I,onOpenChange:L,chatList:ye,onSuccess:()=>{$(),k(),L(!1)}}),e.jsx(e2,{expression:N,open:O,onOpenChange:B,chatList:ye,onSuccess:()=>{$(),k(),B(!1)}}),e.jsx(ms,{open:!!M,onOpenChange:()=>Y(null),children:e.jsxs(as,{children:[e.jsxs(ls,{children:[e.jsx(is,{children:""}),e.jsxs(rs,{children:[' "',M?.situation,'"  ']})]}),e.jsxs(ns,{children:[e.jsx(os,{children:""}),e.jsx(cs,{onClick:()=>M&&Ne(M),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:""})]})]})}),e.jsx(s2,{open:A,onOpenChange:W,onConfirm:ae,count:Q.size})]})}function Z1({expression:n,open:i,onOpenChange:r,chatNameMap:d}){if(!n)return null;const m=f=>f?new Date(f*1e3).toLocaleString("zh-CN"):"-",h=f=>d.get(f)||f;return e.jsx(qs,{open:i,onOpenChange:r,children:e.jsxs(Rs,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(Ls,{children:[e.jsx(Us,{children:""}),e.jsx(Ks,{children:""})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(tr,{label:"",value:n.situation}),e.jsx(tr,{label:"",value:n.style}),e.jsx(tr,{label:"",value:h(n.chat_id)}),e.jsx(tr,{icon:ei,label:"ID",value:n.id.toString(),mono:!0})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:e.jsx(tr,{icon:Pn,label:"",value:m(n.create_date)})})]}),e.jsx(tt,{children:e.jsx(_,{onClick:()=>r(!1),children:""})})]})})}function tr({icon:n,label:i,value:r,mono:d=!1}){return e.jsxs("div",{className:"space-y-1",children:[e.jsxs(S,{className:"text-xs text-muted-foreground flex items-center gap-1",children:[n&&e.jsx(n,{className:"h-3 w-3"}),i]}),e.jsx("div",{className:q("text-sm",d&&"font-mono",!r&&"text-muted-foreground"),children:r||"-"})]})}function W1({open:n,onOpenChange:i,chatList:r,onSuccess:d}){const[m,h]=u.useState({situation:"",style:"",chat_id:""}),[f,p]=u.useState(!1),{toast:g}=Bs(),b=async()=>{if(!m.situation||!m.style||!m.chat_id){g({title:"",description:"",variant:"destructive"});return}try{p(!0),await I1(m),g({title:"",description:""}),h({situation:"",style:"",chat_id:""}),d()}catch(j){g({title:"",description:j instanceof Error?j.message:"",variant:"destructive"})}finally{p(!1)}};return e.jsx(qs,{open:n,onOpenChange:i,children:e.jsxs(Rs,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(Ls,{children:[e.jsx(Us,{children:""}),e.jsx(Ks,{children:""})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(S,{htmlFor:"situation",children:[" ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(ne,{id:"situation",value:m.situation,onChange:j=>h({...m,situation:j.target.value}),placeholder:""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(S,{htmlFor:"style",children:[" ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(ne,{id:"style",value:m.style,onChange:j=>h({...m,style:j.target.value}),placeholder:""})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(S,{htmlFor:"chat_id",children:[" ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs(Oe,{value:m.chat_id,onValueChange:j=>h({...m,chat_id:j}),children:[e.jsx(Ae,{children:e.jsx(Re,{placeholder:""})}),e.jsx(De,{children:r.map(j=>e.jsx(te,{value:j.chat_id,children:e.jsxs("span",{className:"truncate",style:{wordBreak:"keep-all"},children:[j.chat_name,j.is_group&&e.jsx("span",{className:"text-muted-foreground ml-1",children:"()"})]})},j.chat_id))})]})]})]}),e.jsxs(tt,{children:[e.jsx(_,{variant:"outline",onClick:()=>i(!1),children:""}),e.jsx(_,{onClick:b,disabled:f,children:f?"...":""})]})]})})}function e2({expression:n,open:i,onOpenChange:r,chatList:d,onSuccess:m}){const[h,f]=u.useState({}),[p,g]=u.useState(!1),{toast:b}=Bs();u.useEffect(()=>{n&&f({situation:n.situation,style:n.style,chat_id:n.chat_id})},[n]);const j=async()=>{if(n)try{g(!0),await Y1(n.id,h),b({title:"",description:""}),m()}catch(y){b({title:"",description:y instanceof Error?y.message:"",variant:"destructive"})}finally{g(!1)}};return n?e.jsx(qs,{open:i,onOpenChange:r,children:e.jsxs(Rs,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(Ls,{children:[e.jsx(Us,{children:""}),e.jsx(Ks,{children:""})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"edit_situation",children:""}),e.jsx(ne,{id:"edit_situation",value:h.situation||"",onChange:y=>f({...h,situation:y.target.value}),placeholder:""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"edit_style",children:""}),e.jsx(ne,{id:"edit_style",value:h.style||"",onChange:y=>f({...h,style:y.target.value}),placeholder:""})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"edit_chat_id",children:""}),e.jsxs(Oe,{value:h.chat_id||"",onValueChange:y=>f({...h,chat_id:y}),children:[e.jsx(Ae,{children:e.jsx(Re,{placeholder:""})}),e.jsx(De,{children:d.map(y=>e.jsx(te,{value:y.chat_id,children:e.jsxs("span",{className:"truncate",style:{wordBreak:"keep-all"},children:[y.chat_name,y.is_group&&e.jsx("span",{className:"text-muted-foreground ml-1",children:"()"})]})},y.chat_id))})]})]})]}),e.jsxs(tt,{children:[e.jsx(_,{variant:"outline",onClick:()=>r(!1),children:""}),e.jsx(_,{onClick:j,disabled:p,children:p?"...":""})]})]})}):null}function s2({open:n,onOpenChange:i,onConfirm:r,count:d}){return e.jsx(ms,{open:n,onOpenChange:i,children:e.jsxs(as,{children:[e.jsxs(ls,{children:[e.jsx(is,{children:""}),e.jsxs(rs,{children:[" ",d," "]})]}),e.jsxs(ns,{children:[e.jsx(os,{children:""}),e.jsx(cs,{onClick:r,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:""})]})]})})}const cl="/api/webui/jargon";async function t2(){const n=await Se(`${cl}/chats`,{});if(!n.ok){const i=await n.json();throw new Error(i.detail||"")}return n.json()}async function a2(n){const i=new URLSearchParams;n.page&&i.append("page",n.page.toString()),n.page_size&&i.append("page_size",n.page_size.toString()),n.search&&i.append("search",n.search),n.chat_id&&i.append("chat_id",n.chat_id),n.is_jargon!==void 0&&n.is_jargon!==null&&i.append("is_jargon",n.is_jargon.toString()),n.is_global!==void 0&&i.append("is_global",n.is_global.toString());const r=await Se(`${cl}/list?${i}`,{});if(!r.ok){const d=await r.json();throw new Error(d.detail||"")}return r.json()}async function l2(n){const i=await Se(`${cl}/${n}`,{});if(!i.ok){const r=await i.json();throw new Error(r.detail||"")}return i.json()}async function n2(n){const i=await Se(`${cl}/`,{method:"POST",body:JSON.stringify(n)});if(!i.ok){const r=await i.json();throw new Error(r.detail||"")}return i.json()}async function i2(n,i){const r=await Se(`${cl}/${n}`,{method:"PATCH",body:JSON.stringify(i)});if(!r.ok){const d=await r.json();throw new Error(d.detail||"")}return r.json()}async function r2(n){const i=await Se(`${cl}/${n}`,{method:"DELETE"});if(!i.ok){const r=await i.json();throw new Error(r.detail||"")}return i.json()}async function c2(n){const i=await Se(`${cl}/batch/delete`,{method:"POST",body:JSON.stringify({ids:n})});if(!i.ok){const r=await i.json();throw new Error(r.detail||"")}return i.json()}async function o2(){const n=await Se(`${cl}/stats/summary`,{});if(!n.ok){const i=await n.json();throw new Error(i.detail||"")}return n.json()}async function d2(n,i){const r=new URLSearchParams;n.forEach(m=>r.append("ids",m.toString())),r.append("is_jargon",i.toString());const d=await Se(`${cl}/batch/set-jargon?${r}`,{method:"POST"});if(!d.ok){const m=await d.json();throw new Error(m.detail||"")}return d.json()}function u2(){const[n,i]=u.useState([]),[r,d]=u.useState(!0),[m,h]=u.useState(0),[f,p]=u.useState(1),[g,b]=u.useState(20),[j,y]=u.useState(""),[N,T]=u.useState("all"),[w,U]=u.useState("all"),[O,B]=u.useState(null),[I,L]=u.useState(!1),[M,Y]=u.useState(!1),[Q,z]=u.useState(!1),[A,W]=u.useState(null),[xe,be]=u.useState(new Set),[_e,pe]=u.useState(!1),[ye,we]=u.useState(""),[R,X]=u.useState({total:0,confirmed_jargon:0,confirmed_not_jargon:0,pending:0,global_count:0,complete_count:0,chat_count:0,top_chats:{}}),[C,$]=u.useState([]),{toast:k}=Bs(),ce=async()=>{try{d(!0);const ge=await a2({page:f,page_size:g,search:j||void 0,chat_id:N==="all"?void 0:N,is_jargon:w==="all"?void 0:w==="true"?!0:w==="false"?!1:void 0});i(ge.data),h(ge.total)}catch(ge){k({title:"",description:ge instanceof Error?ge.message:"",variant:"destructive"})}finally{d(!1)}},ue=async()=>{try{const ge=await o2();ge?.data&&X(ge.data)}catch(ge){console.error(":",ge)}},ie=async()=>{try{const ge=await t2();ge?.data&&$(ge.data)}catch(ge){console.error(":",ge)}};u.useEffect(()=>{ce(),ue(),ie()},[f,g,j,N,w]);const fe=async ge=>{try{const Me=await l2(ge.id);B(Me.data),L(!0)}catch(Me){k({title:"",description:Me instanceof Error?Me.message:"",variant:"destructive"})}},Ne=ge=>{B(ge),Y(!0)},me=async ge=>{try{await r2(ge.id),k({title:"",description:`: ${ge.content}`}),W(null),ce(),ue()}catch(Me){k({title:"",description:Me instanceof Error?Me.message:"",variant:"destructive"})}},ee=ge=>{const Me=new Set(xe);Me.has(ge)?Me.delete(ge):Me.add(ge),be(Me)},ae=()=>{xe.size===n.length&&n.length>0?be(new Set):be(new Set(n.map(ge=>ge.id)))},V=async()=>{try{await c2(Array.from(xe)),k({title:"",description:` ${xe.size} `}),be(new Set),pe(!1),ce(),ue()}catch(ge){k({title:"",description:ge instanceof Error?ge.message:"",variant:"destructive"})}},P=async ge=>{try{await d2(Array.from(xe),ge),k({title:"",description:` ${xe.size} ${ge?"":""}`}),be(new Set),ce(),ue()}catch(Me){k({title:"",description:Me instanceof Error?Me.message:"",variant:"destructive"})}},Ce=()=>{const ge=parseInt(ye),Me=Math.ceil(m/g);ge>=1&&ge<=Me?(p(ge),we("")):k({title:"",description:`1-${Me}`,variant:"destructive"})},Le=ge=>ge===!0?e.jsxs(qe,{variant:"default",className:"bg-green-600 hover:bg-green-700",children:[e.jsx(Vt,{className:"h-3 w-3 mr-1"}),""]}):ge===!1?e.jsxs(qe,{variant:"secondary",children:[e.jsx(il,{className:"h-3 w-3 mr-1"}),""]}):e.jsxs(qe,{variant:"outline",children:[e.jsx(bg,{className:"h-3 w-3 mr-1"}),""]});return e.jsxs("div",{className:"h-[calc(100vh-4rem)] flex flex-col p-4 sm:p-6",children:[e.jsx("div",{className:"mb-4 sm:mb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold flex items-center gap-2",children:[e.jsx(fy,{className:"h-8 w-8",strokeWidth:2}),""]}),e.jsx("p",{className:"text-muted-foreground mt-1 text-sm sm:text-base",children:""})]}),e.jsxs(_,{onClick:()=>z(!0),className:"gap-2",children:[e.jsx(rt,{className:"h-4 w-4"}),""]})]})}),e.jsx(Ke,{className:"flex-1",children:e.jsxs("div",{className:"space-y-4 sm:space-y-6 pr-4",children:[e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 lg:grid-cols-7 gap-3",children:[e.jsxs("div",{className:"rounded-lg border bg-card p-3 sm:p-4",children:[e.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:""}),e.jsx("div",{className:"text-xl sm:text-2xl font-bold mt-1",children:R.total})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-3 sm:p-4",children:[e.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:""}),e.jsx("div",{className:"text-xl sm:text-2xl font-bold mt-1 text-green-600",children:R.confirmed_jargon})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-3 sm:p-4",children:[e.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:""}),e.jsx("div",{className:"text-xl sm:text-2xl font-bold mt-1 text-gray-500",children:R.confirmed_not_jargon})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-3 sm:p-4",children:[e.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:""}),e.jsx("div",{className:"text-xl sm:text-2xl font-bold mt-1 text-yellow-600",children:R.pending})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-3 sm:p-4",children:[e.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:""}),e.jsx("div",{className:"text-xl sm:text-2xl font-bold mt-1 text-blue-600",children:R.global_count})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-3 sm:p-4",children:[e.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:""}),e.jsx("div",{className:"text-xl sm:text-2xl font-bold mt-1 text-purple-600",children:R.complete_count})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-3 sm:p-4",children:[e.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:""}),e.jsx("div",{className:"text-xl sm:text-2xl font-bold mt-1",children:R.chat_count})]})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(S,{htmlFor:"search",children:""}),e.jsxs("div",{className:"relative",children:[e.jsx(Mt,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(ne,{id:"search",placeholder:"...",value:j,onChange:ge=>y(ge.target.value),className:"pl-9"})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(S,{children:""}),e.jsxs(Oe,{value:N,onValueChange:T,children:[e.jsx(Ae,{children:e.jsx(Re,{placeholder:""})}),e.jsxs(De,{children:[e.jsx(te,{value:"all",children:""}),C.map(ge=>e.jsx(te,{value:ge.chat_id,children:ge.chat_name},ge.chat_id))]})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(S,{children:""}),e.jsxs(Oe,{value:w,onValueChange:U,children:[e.jsx(Ae,{children:e.jsx(Re,{placeholder:""})}),e.jsxs(De,{children:[e.jsx(te,{value:"all",children:""}),e.jsx(te,{value:"true",children:""}),e.jsx(te,{value:"false",children:""}),e.jsx(te,{value:"null",children:""})]})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(S,{htmlFor:"page-size",children:""}),e.jsxs(Oe,{value:g.toString(),onValueChange:ge=>{b(parseInt(ge)),p(1),be(new Set)},children:[e.jsx(Ae,{id:"page-size",children:e.jsx(Re,{})}),e.jsxs(De,{children:[e.jsx(te,{value:"10",children:"10"}),e.jsx(te,{value:"20",children:"20"}),e.jsx(te,{value:"50",children:"50"}),e.jsx(te,{value:"100",children:"100"})]})]})]})]}),xe.size>0&&e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-4 pt-4 border-t",children:[e.jsxs("span",{className:"text-sm text-muted-foreground",children:[" ",xe.size," "]}),e.jsxs(_,{variant:"outline",size:"sm",onClick:()=>P(!0),children:[e.jsx(Vt,{className:"h-4 w-4 mr-1"}),""]}),e.jsxs(_,{variant:"outline",size:"sm",onClick:()=>P(!1),children:[e.jsx(il,{className:"h-4 w-4 mr-1"}),""]}),e.jsx(_,{variant:"outline",size:"sm",onClick:()=>be(new Set),children:""}),e.jsxs(_,{variant:"destructive",size:"sm",onClick:()=>pe(!0),children:[e.jsx(Pe,{className:"h-4 w-4 mr-1"}),""]})]})]}),e.jsxs("div",{className:"rounded-lg border bg-card",children:[e.jsx("div",{className:"hidden md:block",children:e.jsxs(nn,{children:[e.jsx(rn,{children:e.jsxs(ct,{children:[e.jsx(Xe,{className:"w-12",children:e.jsx(ft,{checked:xe.size===n.length&&n.length>0,onCheckedChange:ae})}),e.jsx(Xe,{children:""}),e.jsx(Xe,{children:""}),e.jsx(Xe,{children:""}),e.jsx(Xe,{children:""}),e.jsx(Xe,{className:"text-center",children:""}),e.jsx(Xe,{className:"text-right",children:""})]})}),e.jsx(cn,{children:r?e.jsx(ct,{children:e.jsx(He,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:"..."})}):n.length===0?e.jsx(ct,{children:e.jsx(He,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:""})}):n.map(ge=>e.jsxs(ct,{children:[e.jsx(He,{children:e.jsx(ft,{checked:xe.has(ge.id),onCheckedChange:()=>ee(ge.id)})}),e.jsx(He,{className:"font-medium max-w-[200px]",children:e.jsxs("div",{className:"flex items-center gap-2",children:[ge.is_global&&e.jsx("span",{title:"",children:e.jsx(Uu,{className:"h-4 w-4 text-blue-500 flex-shrink-0"})}),e.jsx("span",{className:"truncate",title:ge.content,children:ge.content})]})}),e.jsx(He,{className:"max-w-[200px] truncate",title:ge.meaning||"",children:ge.meaning||e.jsx("span",{className:"text-muted-foreground",children:"-"})}),e.jsx(He,{className:"max-w-[150px] truncate",title:ge.chat_name||ge.chat_id,children:ge.chat_name||ge.chat_id}),e.jsx(He,{children:Le(ge.is_jargon)}),e.jsx(He,{className:"text-center",children:ge.count}),e.jsx(He,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsxs(_,{variant:"default",size:"sm",onClick:()=>Ne(ge),children:[e.jsx(ln,{className:"h-4 w-4 mr-1"}),""]}),e.jsx(_,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>fe(ge),title:"",children:e.jsx(Ot,{className:"h-4 w-4"})}),e.jsxs(_,{size:"sm",onClick:()=>W(ge),className:"bg-red-600 hover:bg-red-700 text-white",children:[e.jsx(Pe,{className:"h-4 w-4 mr-1"}),""]})]})})]},ge.id))})]})}),e.jsx("div",{className:"md:hidden space-y-3 p-4",children:r?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"..."}):n.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:""}):n.map(ge=>e.jsxs("div",{className:"rounded-lg border bg-card p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ft,{checked:xe.has(ge.id),onCheckedChange:()=>ee(ge.id),className:"mt-1"}),e.jsxs("div",{className:"min-w-0 flex-1 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[ge.is_global&&e.jsx(Uu,{className:"h-4 w-4 text-blue-500 flex-shrink-0"}),e.jsx("h3",{className:"font-semibold text-sm break-all",children:ge.content})]}),ge.meaning&&e.jsx("p",{className:"text-sm text-muted-foreground break-all",children:ge.meaning}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs",children:[Le(ge.is_jargon),e.jsxs("span",{className:"text-muted-foreground",children:[": ",ge.count]})]}),e.jsxs("div",{className:"text-xs text-muted-foreground truncate",children:[": ",ge.chat_name||ge.chat_id]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-1 pt-2 border-t",children:[e.jsxs(_,{variant:"outline",size:"sm",onClick:()=>Ne(ge),className:"text-xs px-2 py-1 h-auto",children:[e.jsx(ln,{className:"h-3 w-3 mr-1"}),""]}),e.jsx(_,{variant:"outline",size:"sm",onClick:()=>fe(ge),className:"text-xs px-2 py-1 h-auto",children:e.jsx(Ot,{className:"h-3 w-3"})}),e.jsxs(_,{variant:"outline",size:"sm",onClick:()=>W(ge),className:"text-xs px-2 py-1 h-auto text-destructive hover:text-destructive",children:[e.jsx(Pe,{className:"h-3 w-3 mr-1"}),""]})]})]},ge.id))}),m>0&&e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 px-4 py-3 border-t",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:[" ",m,"  ",f," / ",Math.ceil(m/g)," "]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{variant:"outline",size:"sm",onClick:()=>p(1),disabled:f===1,className:"hidden sm:flex",children:e.jsx(ai,{className:"h-4 w-4"})}),e.jsxs(_,{variant:"outline",size:"sm",onClick:()=>p(f-1),disabled:f===1,children:[e.jsx(rl,{className:"h-4 w-4 sm:mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{type:"number",value:ye,onChange:ge=>we(ge.target.value),onKeyDown:ge=>ge.key==="Enter"&&Ce(),placeholder:f.toString(),className:"w-16 h-8 text-center",min:1,max:Math.ceil(m/g)}),e.jsx(_,{variant:"outline",size:"sm",onClick:Ce,disabled:!ye,className:"h-8",children:""})]}),e.jsxs(_,{variant:"outline",size:"sm",onClick:()=>p(f+1),disabled:f>=Math.ceil(m/g),children:[e.jsx("span",{className:"hidden sm:inline",children:""}),e.jsx(Ua,{className:"h-4 w-4 sm:ml-1"})]}),e.jsx(_,{variant:"outline",size:"sm",onClick:()=>p(Math.ceil(m/g)),disabled:f>=Math.ceil(m/g),className:"hidden sm:flex",children:e.jsx(li,{className:"h-4 w-4"})})]})]})]})]})}),e.jsx(m2,{jargon:O,open:I,onOpenChange:L}),e.jsx(h2,{open:Q,onOpenChange:z,chatList:C,onSuccess:()=>{ce(),ue(),z(!1)}}),e.jsx(x2,{jargon:O,open:M,onOpenChange:Y,chatList:C,onSuccess:()=>{ce(),ue(),Y(!1)}}),e.jsx(ms,{open:!!A,onOpenChange:()=>W(null),children:e.jsxs(as,{children:[e.jsxs(ls,{children:[e.jsx(is,{children:""}),e.jsxs(rs,{children:[' "',A?.content,'" ']})]}),e.jsxs(ns,{children:[e.jsx(os,{children:""}),e.jsx(cs,{onClick:()=>A&&me(A),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:""})]})]})}),e.jsx(ms,{open:_e,onOpenChange:pe,children:e.jsxs(as,{children:[e.jsxs(ls,{children:[e.jsx(is,{children:""}),e.jsxs(rs,{children:[" ",xe.size," "]})]}),e.jsxs(ns,{children:[e.jsx(os,{children:""}),e.jsx(cs,{onClick:V,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:""})]})]})})]})}function m2({jargon:n,open:i,onOpenChange:r}){return n?e.jsx(qs,{open:i,onOpenChange:r,children:e.jsxs(Rs,{className:"max-w-2xl max-h-[80vh] grid grid-rows-[auto_1fr_auto] overflow-hidden",children:[e.jsxs(Ls,{children:[e.jsx(Us,{children:""}),e.jsx(Ks,{children:""})]}),e.jsx(Ke,{className:"h-full pr-4",children:e.jsxs("div",{className:"space-y-4 pb-2",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(Ou,{icon:ei,label:"ID",value:n.id.toString(),mono:!0}),e.jsx(Ou,{label:"",value:n.count.toString()})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(S,{className:"text-xs text-muted-foreground",children:""}),e.jsx("div",{className:"text-sm p-2 bg-muted rounded break-all whitespace-pre-wrap",children:n.content})]}),n.raw_content&&e.jsxs("div",{className:"space-y-1",children:[e.jsx(S,{className:"text-xs text-muted-foreground",children:""}),e.jsx("div",{className:"text-sm p-2 bg-muted rounded break-all",children:(()=>{try{const d=JSON.parse(n.raw_content);return Array.isArray(d)?d.map((m,h)=>e.jsxs("div",{children:[h>0&&e.jsx("hr",{className:"my-3 border-border"}),e.jsx("div",{className:"whitespace-pre-wrap",children:m})]},h)):e.jsx("div",{className:"whitespace-pre-wrap",children:n.raw_content})}catch{return e.jsx("div",{className:"whitespace-pre-wrap",children:n.raw_content})}})()})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(S,{className:"text-xs text-muted-foreground",children:""}),e.jsx("div",{className:"text-sm p-2 bg-muted rounded break-all",children:n.meaning?e.jsx(Kg,{content:n.meaning}):"-"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(Ou,{label:"",value:n.chat_name||n.chat_id}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(S,{className:"text-xs text-muted-foreground",children:""}),e.jsxs("div",{className:"flex items-center gap-2",children:[n.is_jargon===!0&&e.jsx(qe,{variant:"default",className:"bg-green-600",children:""}),n.is_jargon===!1&&e.jsx(qe,{variant:"secondary",children:""}),n.is_jargon===null&&e.jsx(qe,{variant:"outline",children:""}),n.is_global&&e.jsx(qe,{variant:"outline",className:"border-blue-500 text-blue-500",children:""}),n.is_complete&&e.jsx(qe,{variant:"outline",className:"border-purple-500 text-purple-500",children:""})]})]})]}),n.inference_with_context&&e.jsxs("div",{className:"space-y-1",children:[e.jsx(S,{className:"text-xs text-muted-foreground",children:""}),e.jsx("div",{className:"p-2 bg-muted rounded break-all whitespace-pre-wrap font-mono text-xs max-h-[200px] overflow-y-auto",children:n.inference_with_context})]}),n.inference_content_only&&e.jsxs("div",{className:"space-y-1",children:[e.jsx(S,{className:"text-xs text-muted-foreground",children:""}),e.jsx("div",{className:"p-2 bg-muted rounded break-all whitespace-pre-wrap font-mono text-xs max-h-[200px] overflow-y-auto",children:n.inference_content_only})]})]})}),e.jsx(tt,{className:"flex-shrink-0",children:e.jsx(_,{onClick:()=>r(!1),children:""})})]})}):null}function Ou({icon:n,label:i,value:r,mono:d=!1}){return e.jsxs("div",{className:"space-y-1",children:[e.jsxs(S,{className:"text-xs text-muted-foreground flex items-center gap-1",children:[n&&e.jsx(n,{className:"h-3 w-3"}),i]}),e.jsx("div",{className:q("text-sm",d&&"font-mono",!r&&"text-muted-foreground"),children:r||"-"})]})}function h2({open:n,onOpenChange:i,chatList:r,onSuccess:d}){const[m,h]=u.useState({content:"",meaning:"",chat_id:"",is_global:!1}),[f,p]=u.useState(!1),{toast:g}=Bs(),b=async()=>{if(!m.content||!m.chat_id){g({title:"",description:"",variant:"destructive"});return}try{p(!0),await n2(m),g({title:"",description:""}),h({content:"",meaning:"",chat_id:"",is_global:!1}),d()}catch(j){g({title:"",description:j instanceof Error?j.message:"",variant:"destructive"})}finally{p(!1)}};return e.jsx(qs,{open:n,onOpenChange:i,children:e.jsxs(Rs,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(Ls,{children:[e.jsx(Us,{children:""}),e.jsx(Ks,{children:""})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(S,{htmlFor:"content",children:[" ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(ne,{id:"content",value:m.content,onChange:j=>h({...m,content:j.target.value}),placeholder:""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"meaning",children:""}),e.jsx(Ms,{id:"meaning",value:m.meaning||"",onChange:j=>h({...m,meaning:j.target.value}),placeholder:"",rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(S,{htmlFor:"chat_id",children:[" ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs(Oe,{value:m.chat_id,onValueChange:j=>h({...m,chat_id:j}),children:[e.jsx(Ae,{children:e.jsx(Re,{placeholder:""})}),e.jsx(De,{children:r.map(j=>e.jsx(te,{value:j.chat_id,children:j.chat_name},j.chat_id))})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{id:"is_global",checked:m.is_global,onCheckedChange:j=>h({...m,is_global:j})}),e.jsx(S,{htmlFor:"is_global",children:""})]})]}),e.jsxs(tt,{children:[e.jsx(_,{variant:"outline",onClick:()=>i(!1),children:""}),e.jsx(_,{onClick:b,disabled:f,children:f?"...":""})]})]})})}function x2({jargon:n,open:i,onOpenChange:r,chatList:d,onSuccess:m}){const[h,f]=u.useState({}),[p,g]=u.useState(!1),{toast:b}=Bs();u.useEffect(()=>{n&&f({content:n.content,meaning:n.meaning||"",chat_id:n.stream_id||n.chat_id,is_global:n.is_global,is_jargon:n.is_jargon})},[n]);const j=async()=>{if(n)try{g(!0),await i2(n.id,h),b({title:"",description:""}),m()}catch(y){b({title:"",description:y instanceof Error?y.message:"",variant:"destructive"})}finally{g(!1)}};return n?e.jsx(qs,{open:i,onOpenChange:r,children:e.jsxs(Rs,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(Ls,{children:[e.jsx(Us,{children:""}),e.jsx(Ks,{children:""})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"edit_content",children:""}),e.jsx(ne,{id:"edit_content",value:h.content||"",onChange:y=>f({...h,content:y.target.value}),placeholder:""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"edit_meaning",children:""}),e.jsx(Ms,{id:"edit_meaning",value:h.meaning||"",onChange:y=>f({...h,meaning:y.target.value}),placeholder:"",rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"edit_chat_id",children:""}),e.jsxs(Oe,{value:h.chat_id||"",onValueChange:y=>f({...h,chat_id:y}),children:[e.jsx(Ae,{children:e.jsx(Re,{placeholder:""})}),e.jsx(De,{children:d.map(y=>e.jsx(te,{value:y.chat_id,children:y.chat_name},y.chat_id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{children:""}),e.jsxs(Oe,{value:h.is_jargon===null?"null":h.is_jargon?.toString()||"null",onValueChange:y=>f({...h,is_jargon:y==="null"?null:y==="true"}),children:[e.jsx(Ae,{children:e.jsx(Re,{})}),e.jsxs(De,{children:[e.jsx(te,{value:"null",children:""}),e.jsx(te,{value:"true",children:""}),e.jsx(te,{value:"false",children:""})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{id:"edit_is_global",checked:h.is_global,onCheckedChange:y=>f({...h,is_global:y})}),e.jsx(S,{htmlFor:"edit_is_global",children:""})]})]}),e.jsxs(tt,{children:[e.jsx(_,{variant:"outline",onClick:()=>r(!1),children:""}),e.jsx(_,{onClick:j,disabled:p,children:p?"...":""})]})]})}):null}const ii="/api/webui/person";async function f2(n){const i=new URLSearchParams;n.page&&i.append("page",n.page.toString()),n.page_size&&i.append("page_size",n.page_size.toString()),n.search&&i.append("search",n.search),n.is_known!==void 0&&i.append("is_known",n.is_known.toString()),n.platform&&i.append("platform",n.platform);const r=await Se(`${ii}/list?${i}`,{headers:As()});if(!r.ok){const d=await r.json();throw new Error(d.detail||"")}return r.json()}async function p2(n){const i=await Se(`${ii}/${n}`,{headers:As()});if(!i.ok){const r=await i.json();throw new Error(r.detail||"")}return i.json()}async function g2(n,i){const r=await Se(`${ii}/${n}`,{method:"PATCH",headers:As(),body:JSON.stringify(i)});if(!r.ok){const d=await r.json();throw new Error(d.detail||"")}return r.json()}async function j2(n){const i=await Se(`${ii}/${n}`,{method:"DELETE",headers:As()});if(!i.ok){const r=await i.json();throw new Error(r.detail||"")}return i.json()}async function v2(){const n=await Se(`${ii}/stats/summary`,{headers:As()});if(!n.ok){const i=await n.json();throw new Error(i.detail||"")}return n.json()}async function b2(n){const i=await Se(`${ii}/batch/delete`,{method:"POST",headers:As(),body:JSON.stringify({person_ids:n})});if(!i.ok){const r=await i.json();throw new Error(r.detail||"")}return i.json()}function N2(){const[n,i]=u.useState([]),[r,d]=u.useState(!0),[m,h]=u.useState(0),[f,p]=u.useState(1),[g,b]=u.useState(20),[j,y]=u.useState(""),[N,T]=u.useState(void 0),[w,U]=u.useState(void 0),[O,B]=u.useState(null),[I,L]=u.useState(!1),[M,Y]=u.useState(!1),[Q,z]=u.useState(null),[A,W]=u.useState({total:0,known:0,unknown:0,platforms:{}}),[xe,be]=u.useState(new Set),[_e,pe]=u.useState(!1),[ye,we]=u.useState(""),{toast:R}=Bs(),X=async()=>{try{d(!0);const V=await f2({page:f,page_size:g,search:j||void 0,is_known:N,platform:w});i(V.data),h(V.total)}catch(V){R({title:"",description:V instanceof Error?V.message:"",variant:"destructive"})}finally{d(!1)}},C=async()=>{try{const V=await v2();V?.data&&W(V.data)}catch(V){console.error(":",V)}};u.useEffect(()=>{X(),C()},[f,g,j,N,w]);const $=async V=>{try{const P=await p2(V.person_id);B(P.data),L(!0)}catch(P){R({title:"",description:P instanceof Error?P.message:"",variant:"destructive"})}},k=V=>{B(V),Y(!0)},ce=async V=>{try{await j2(V.person_id),R({title:"",description:`: ${V.person_name||V.nickname||V.user_id}`}),z(null),X(),C()}catch(P){R({title:"",description:P instanceof Error?P.message:"",variant:"destructive"})}},ue=u.useMemo(()=>Object.keys(A.platforms),[A.platforms]),ie=V=>{const P=new Set(xe);P.has(V)?P.delete(V):P.add(V),be(P)},fe=()=>{xe.size===n.length&&n.length>0?be(new Set):be(new Set(n.map(V=>V.person_id)))},Ne=()=>{if(xe.size===0){R({title:"",description:"",variant:"destructive"});return}pe(!0)},me=async()=>{try{const V=await b2(Array.from(xe));R({title:"",description:V.message}),be(new Set),pe(!1),X(),C()}catch(V){R({title:"",description:V instanceof Error?V.message:"",variant:"destructive"})}},ee=()=>{const V=parseInt(ye),P=Math.ceil(m/g);V>=1&&V<=P?(p(V),we("")):R({title:"",description:`1-${P}`,variant:"destructive"})},ae=V=>V?new Date(V*1e3).toLocaleString("zh-CN"):"-";return e.jsxs("div",{className:"h-[calc(100vh-4rem)] flex flex-col p-4 sm:p-6",children:[e.jsx("div",{className:"mb-4 sm:mb-6",children:e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold flex items-center gap-2",children:[e.jsx(Bu,{className:"h-8 w-8",strokeWidth:2}),""]}),e.jsx("p",{className:"text-muted-foreground mt-1 text-sm sm:text-base",children:""})]})})}),e.jsx(Ke,{className:"flex-1",children:e.jsxs("div",{className:"space-y-4 sm:space-y-6 pr-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"rounded-lg border bg-card p-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:""}),e.jsx("div",{className:"text-2xl font-bold mt-1",children:A.total})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:""}),e.jsx("div",{className:"text-2xl font-bold mt-1 text-green-600",children:A.known})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:""}),e.jsx("div",{className:"text-2xl font-bold mt-1 text-muted-foreground",children:A.unknown})]})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx(S,{htmlFor:"search",children:""}),e.jsxs("div",{className:"relative mt-1.5",children:[e.jsx(Mt,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(ne,{id:"search",placeholder:"ID...",value:j,onChange:V=>y(V.target.value),className:"pl-9"})]})]}),e.jsxs("div",{children:[e.jsx(S,{htmlFor:"filter-known",children:""}),e.jsxs(Oe,{value:N===void 0?"all":N.toString(),onValueChange:V=>{T(V==="all"?void 0:V==="true"),p(1)},children:[e.jsx(Ae,{id:"filter-known",className:"mt-1.5",children:e.jsx(Re,{})}),e.jsxs(De,{children:[e.jsx(te,{value:"all",children:""}),e.jsx(te,{value:"true",children:""}),e.jsx(te,{value:"false",children:""})]})]})]}),e.jsxs("div",{children:[e.jsx(S,{htmlFor:"filter-platform",children:""}),e.jsxs(Oe,{value:w||"all",onValueChange:V=>{U(V==="all"?void 0:V),p(1)},children:[e.jsx(Ae,{id:"filter-platform",className:"mt-1.5",children:e.jsx(Re,{})}),e.jsxs(De,{children:[e.jsx(te,{value:"all",children:""}),ue.map(V=>e.jsxs(te,{value:V,children:[V," (",A.platforms[V],")"]},V))]})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 mt-4 pt-4 border-t",children:[e.jsx("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:xe.size>0&&e.jsxs("span",{children:[" ",xe.size," "]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{htmlFor:"page-size",className:"text-sm whitespace-nowrap",children:""}),e.jsxs(Oe,{value:g.toString(),onValueChange:V=>{b(parseInt(V)),p(1),be(new Set)},children:[e.jsx(Ae,{id:"page-size",className:"w-20",children:e.jsx(Re,{})}),e.jsxs(De,{children:[e.jsx(te,{value:"10",children:"10"}),e.jsx(te,{value:"20",children:"20"}),e.jsx(te,{value:"50",children:"50"}),e.jsx(te,{value:"100",children:"100"})]})]}),xe.size>0&&e.jsxs(e.Fragment,{children:[e.jsx(_,{variant:"outline",size:"sm",onClick:()=>be(new Set),children:""}),e.jsxs(_,{variant:"destructive",size:"sm",onClick:Ne,children:[e.jsx(Pe,{className:"h-4 w-4 mr-1"}),""]})]})]})]})]}),e.jsxs("div",{className:"rounded-lg border bg-card",children:[e.jsx("div",{className:"hidden md:block",children:e.jsxs(nn,{children:[e.jsx(rn,{children:e.jsxs(ct,{children:[e.jsx(Xe,{className:"w-12",children:e.jsx(ft,{checked:n.length>0&&xe.size===n.length,onCheckedChange:fe,"aria-label":""})}),e.jsx(Xe,{children:""}),e.jsx(Xe,{children:""}),e.jsx(Xe,{children:""}),e.jsx(Xe,{children:""}),e.jsx(Xe,{children:"ID"}),e.jsx(Xe,{children:""}),e.jsx(Xe,{className:"text-right",children:""})]})}),e.jsx(cn,{children:r?e.jsx(ct,{children:e.jsx(He,{colSpan:8,className:"text-center py-8 text-muted-foreground",children:"..."})}):n.length===0?e.jsx(ct,{children:e.jsx(He,{colSpan:8,className:"text-center py-8 text-muted-foreground",children:""})}):n.map(V=>e.jsxs(ct,{children:[e.jsx(He,{children:e.jsx(ft,{checked:xe.has(V.person_id),onCheckedChange:()=>ie(V.person_id),"aria-label":` ${V.person_name||V.nickname||V.user_id}`})}),e.jsx(He,{children:e.jsx("div",{className:q("inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium",V.is_known?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-400"),children:V.is_known?"":""})}),e.jsx(He,{className:"font-medium",children:V.person_name||e.jsx("span",{className:"text-muted-foreground",children:"-"})}),e.jsx(He,{children:V.nickname||"-"}),e.jsx(He,{children:V.platform}),e.jsx(He,{className:"font-mono text-sm",children:V.user_id}),e.jsx(He,{className:"text-sm text-muted-foreground",children:ae(V.last_know)}),e.jsx(He,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsxs(_,{variant:"default",size:"sm",onClick:()=>$(V),children:[e.jsx(Ot,{className:"h-4 w-4 mr-1"}),""]}),e.jsxs(_,{variant:"default",size:"sm",onClick:()=>k(V),children:[e.jsx(ln,{className:"h-4 w-4 mr-1"}),""]}),e.jsxs(_,{size:"sm",onClick:()=>z(V),className:"bg-red-600 hover:bg-red-700 text-white",children:[e.jsx(Pe,{className:"h-4 w-4 mr-1"}),""]})]})})]},V.id))})]})}),e.jsx("div",{className:"md:hidden space-y-3 p-4",children:r?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"..."}):n.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:""}):n.map(V=>e.jsxs("div",{className:"rounded-lg border bg-card p-4 space-y-3 overflow-hidden",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ft,{checked:xe.has(V.person_id),onCheckedChange:()=>ie(V.person_id),className:"mt-1"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:q("inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium mb-2",V.is_known?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-400"),children:V.is_known?"":""}),e.jsx("h3",{className:"font-semibold text-sm line-clamp-1 w-full break-all",children:V.person_name||e.jsx("span",{className:"text-muted-foreground",children:""})}),V.nickname&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1 line-clamp-1 w-full break-all",children:[": ",V.nickname]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:""}),e.jsx("p",{className:"font-medium text-xs",children:V.platform})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"ID"}),e.jsx("p",{className:"font-mono text-xs truncate",title:V.user_id,children:V.user_id})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:""}),e.jsx("p",{className:"text-xs",children:ae(V.last_know)})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-1 pt-2 border-t overflow-hidden",children:[e.jsxs(_,{variant:"outline",size:"sm",onClick:()=>$(V),className:"text-xs px-2 py-1 h-auto flex-shrink-0",children:[e.jsx(Ot,{className:"h-3 w-3 mr-1"}),""]}),e.jsxs(_,{variant:"outline",size:"sm",onClick:()=>k(V),className:"text-xs px-2 py-1 h-auto flex-shrink-0",children:[e.jsx(ln,{className:"h-3 w-3 mr-1"}),""]}),e.jsxs(_,{variant:"outline",size:"sm",onClick:()=>z(V),className:"text-xs px-2 py-1 h-auto flex-shrink-0 text-destructive hover:text-destructive",children:[e.jsx(Pe,{className:"h-3 w-3 mr-1"}),""]})]})]},V.id))}),m>0&&e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 px-4 py-3 border-t",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:[" ",m,"  ",f," / ",Math.ceil(m/g)," "]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{variant:"outline",size:"sm",onClick:()=>p(1),disabled:f===1,className:"hidden sm:flex",children:e.jsx(ai,{className:"h-4 w-4"})}),e.jsxs(_,{variant:"outline",size:"sm",onClick:()=>p(f-1),disabled:f===1,children:[e.jsx(rl,{className:"h-4 w-4 sm:mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{type:"number",value:ye,onChange:V=>we(V.target.value),onKeyDown:V=>V.key==="Enter"&&ee(),placeholder:f.toString(),className:"w-16 h-8 text-center",min:1,max:Math.ceil(m/g)}),e.jsx(_,{variant:"outline",size:"sm",onClick:ee,disabled:!ye,className:"h-8",children:""})]}),e.jsxs(_,{variant:"outline",size:"sm",onClick:()=>p(f+1),disabled:f>=Math.ceil(m/g),children:[e.jsx("span",{className:"hidden sm:inline",children:""}),e.jsx(Ua,{className:"h-4 w-4 sm:ml-1"})]}),e.jsx(_,{variant:"outline",size:"sm",onClick:()=>p(Math.ceil(m/g)),disabled:f>=Math.ceil(m/g),className:"hidden sm:flex",children:e.jsx(li,{className:"h-4 w-4"})})]})]})]})]})}),e.jsx(y2,{person:O,open:I,onOpenChange:L}),e.jsx(w2,{person:O,open:M,onOpenChange:Y,onSuccess:()=>{X(),C(),Y(!1)}}),e.jsx(ms,{open:!!Q,onOpenChange:()=>z(null),children:e.jsxs(as,{children:[e.jsxs(ls,{children:[e.jsx(is,{children:""}),e.jsxs(rs,{children:[' "',Q?.person_name||Q?.nickname||Q?.user_id,'"  ']})]}),e.jsxs(ns,{children:[e.jsx(os,{children:""}),e.jsx(cs,{onClick:()=>Q&&ce(Q),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:""})]})]})}),e.jsx(ms,{open:_e,onOpenChange:pe,children:e.jsxs(as,{children:[e.jsxs(ls,{children:[e.jsx(is,{children:""}),e.jsxs(rs,{children:[" ",xe.size,"  "]})]}),e.jsxs(ns,{children:[e.jsx(os,{children:""}),e.jsx(cs,{onClick:me,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:""})]})]})})]})}function y2({person:n,open:i,onOpenChange:r}){if(!n)return null;const d=m=>m?new Date(m*1e3).toLocaleString("zh-CN"):"-";return e.jsx(qs,{open:i,onOpenChange:r,children:e.jsxs(Rs,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(Ls,{children:[e.jsx(Us,{children:""}),e.jsxs(Ks,{children:[" ",n.person_name||n.nickname||n.user_id," "]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(al,{icon:Ic,label:"",value:n.person_name}),e.jsx(al,{icon:Dl,label:"",value:n.nickname}),e.jsx(al,{icon:ei,label:"ID",value:n.user_id,mono:!0}),e.jsx(al,{icon:ei,label:"ID",value:n.person_id,mono:!0}),e.jsx(al,{label:"",value:n.platform}),e.jsx(al,{label:"",value:n.is_known?"":""})]}),n.name_reason&&e.jsxs("div",{className:"rounded-lg border bg-muted/50 p-3",children:[e.jsx(S,{className:"text-xs text-muted-foreground",children:""}),e.jsx("p",{className:"mt-1 text-sm",children:n.name_reason})]}),n.memory_points&&e.jsxs("div",{className:"rounded-lg border bg-muted/50 p-3",children:[e.jsx(S,{className:"text-xs text-muted-foreground",children:""}),e.jsx("p",{className:"mt-1 text-sm whitespace-pre-wrap",children:n.memory_points})]}),n.group_nick_name&&n.group_nick_name.length>0&&e.jsxs("div",{className:"rounded-lg border bg-muted/50 p-3",children:[e.jsx(S,{className:"text-xs text-muted-foreground",children:""}),e.jsx("div",{className:"mt-2 space-y-1",children:n.group_nick_name.map((m,h)=>e.jsxs("div",{className:"text-sm flex items-center gap-2",children:[e.jsx("span",{className:"font-mono text-xs text-muted-foreground",children:m.group_id}),e.jsx("span",{children:""}),e.jsx("span",{children:m.group_nick_name})]},h))})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx(al,{icon:Pn,label:"",value:d(n.know_times)}),e.jsx(al,{icon:Pn,label:"",value:d(n.know_since)}),e.jsx(al,{icon:Pn,label:"",value:d(n.last_know)})]})]}),e.jsx(tt,{children:e.jsx(_,{onClick:()=>r(!1),children:""})})]})})}function al({icon:n,label:i,value:r,mono:d=!1}){return e.jsxs("div",{className:"space-y-1",children:[e.jsxs(S,{className:"text-xs text-muted-foreground flex items-center gap-1",children:[n&&e.jsx(n,{className:"h-3 w-3"}),i]}),e.jsx("div",{className:q("text-sm",d&&"font-mono",!r&&"text-muted-foreground"),children:r||"-"})]})}function w2({person:n,open:i,onOpenChange:r,onSuccess:d}){const[m,h]=u.useState({}),[f,p]=u.useState(!1),{toast:g}=Bs();u.useEffect(()=>{n&&h({person_name:n.person_name||"",name_reason:n.name_reason||"",nickname:n.nickname||"",memory_points:n.memory_points||"",is_known:n.is_known})},[n]);const b=async()=>{if(n)try{p(!0),await g2(n.person_id,m),g({title:"",description:""}),d()}catch(j){g({title:"",description:j instanceof Error?j.message:"",variant:"destructive"})}finally{p(!1)}};return n?e.jsx(qs,{open:i,onOpenChange:r,children:e.jsxs(Rs,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(Ls,{children:[e.jsx(Us,{children:""}),e.jsxs(Ks,{children:[" ",n.person_name||n.nickname||n.user_id," "]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"person_name",children:""}),e.jsx(ne,{id:"person_name",value:m.person_name||"",onChange:j=>h({...m,person_name:j.target.value}),placeholder:""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"nickname",children:""}),e.jsx(ne,{id:"nickname",value:m.nickname||"",onChange:j=>h({...m,nickname:j.target.value}),placeholder:""})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"name_reason",children:""}),e.jsx(Ms,{id:"name_reason",value:m.name_reason||"",onChange:j=>h({...m,name_reason:j.target.value}),placeholder:"",rows:2})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"memory_points",children:""}),e.jsx(Ms,{id:"memory_points",value:m.memory_points||"",onChange:j=>h({...m,memory_points:j.target.value}),placeholder:"...",rows:4})]}),e.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3",children:[e.jsxs("div",{children:[e.jsx(S,{htmlFor:"is_known",className:"text-base font-medium",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),e.jsx(Ge,{id:"is_known",checked:m.is_known,onCheckedChange:j=>h({...m,is_known:j})})]})]}),e.jsxs(tt,{children:[e.jsx(_,{variant:"outline",onClick:()=>r(!1),children:""}),e.jsx(_,{onClick:b,disabled:f,children:f?"...":""})]})]})}):null}var _2=s0();const yp=Xb(_2),sm="/api/webui";async function S2(n=100,i="all"){const r=`${sm}/knowledge/graph?limit=${n}&node_type=${i}`,d=await fetch(r);if(!d.ok)throw new Error(`: ${d.status}`);return d.json()}async function C2(){const n=await fetch(`${sm}/knowledge/stats`);if(!n.ok)throw new Error("");return n.json()}async function k2(n){const i=await fetch(`${sm}/knowledge/search?query=${encodeURIComponent(n)}`);if(!i.ok)throw new Error("");return i.json()}const Jg=u.memo(({data:n})=>e.jsxs("div",{className:"px-4 py-2 shadow-md rounded-lg bg-gradient-to-br from-blue-500 to-blue-600 border-2 border-blue-700 min-w-[120px]",children:[e.jsx(Yc,{type:"target",position:Xc.Top}),e.jsx("div",{className:"font-semibold text-white text-sm truncate max-w-[200px]",title:n.content,children:n.label}),e.jsx(Yc,{type:"source",position:Xc.Bottom})]}));Jg.displayName="EntityNode";const Pg=u.memo(({data:n})=>e.jsxs("div",{className:"px-3 py-2 shadow-md rounded-md bg-gradient-to-br from-green-500 to-green-600 border-2 border-green-700 min-w-[100px]",children:[e.jsx(Yc,{type:"target",position:Xc.Top}),e.jsx("div",{className:"font-medium text-white text-xs truncate max-w-[150px]",title:n.content,children:n.label}),e.jsx(Yc,{type:"source",position:Xc.Bottom})]}));Pg.displayName="ParagraphNode";const T2={entity:Jg,paragraph:Pg};function E2(n,i){const r=new yp.graphlib.Graph;r.setDefaultEdgeLabel(()=>({})),r.setGraph({rankdir:"TB",ranksep:100,nodesep:80});const d=[],m=[];return n.forEach(h=>{r.setNode(h.id,{width:150,height:50})}),i.forEach(h=>{r.setEdge(h.source,h.target)}),yp.layout(r),n.forEach(h=>{const f=r.node(h.id);d.push({id:h.id,type:h.type,position:{x:f.x-75,y:f.y-25},data:{label:h.content.slice(0,20)+(h.content.length>20?"...":""),content:h.content}})}),i.forEach((h,f)=>{const p={id:`edge-${f}`,source:h.source,target:h.target,animated:n.length<=200&&h.weight>5,style:{strokeWidth:Math.min(h.weight/2,5),opacity:.6}};h.weight>10&&n.length<100&&(p.label=`${h.weight.toFixed(0)}`),m.push(p)}),{nodes:d,edges:m}}function z2(){const n=ja(),[i,r]=u.useState(!1),[d,m]=u.useState(null),[h,f]=u.useState(""),[p,g]=u.useState("all"),[b,j]=u.useState(50),[y,N]=u.useState("50"),[T,w]=u.useState(!1),[U,O]=u.useState(!0),[B,I]=u.useState(!1),[L,M]=u.useState(!1),[Y,Q,z]=t0([]),[A,W,xe]=a0([]),[be,_e]=u.useState(0),[pe,ye]=u.useState(null),[we,R]=u.useState(null),{toast:X}=Bs(),C=u.useCallback(me=>me.type==="entity"?"#6366f1":me.type==="paragraph"?"#10b981":"#6b7280",[]),$=u.useCallback(async(me=!1)=>{try{if(!me&&b>200){M(!0);return}r(!0);const[ee,ae]=await Promise.all([S2(b,p),C2()]);if(m(ae),ee.nodes.length===0){X({title:"",description:""}),Q([]),W([]);return}const{nodes:V,edges:P}=E2(ee.nodes,ee.edges);Q(V),W(P),_e(V.length),ae&&ae.total_nodes>b&&X({title:"",description:` ${ae.total_nodes}  ${V.length} `}),X({title:"",description:` ${V.length} ${P.length} `})}catch(ee){console.error(":",ee),X({title:"",description:ee instanceof Error?ee.message:"",variant:"destructive"})}finally{r(!1)}},[b,p,X]),k=u.useCallback(async()=>{if(!h.trim()){X({title:"",description:""});return}try{const me=await k2(h);if(me.length===0){X({title:"",description:""});return}const ee=new Set(me.map(ae=>ae.id));Q(ae=>ae.map(V=>({...V,style:{...V.style,opacity:ee.has(V.id)?1:.3,filter:ee.has(V.id)?"brightness(1.2)":"brightness(0.8)"}}))),X({title:"",description:` ${me.length} `})}catch(me){console.error(":",me),X({title:"",description:me instanceof Error?me.message:"",variant:"destructive"})}},[h,X]),ce=u.useCallback(()=>{Q(me=>me.map(ee=>({...ee,style:{...ee.style,opacity:1,filter:"brightness(1)"}})))},[]),ue=u.useCallback(()=>{O(!1),I(!0),$()},[$]),ie=u.useCallback(()=>{M(!1),setTimeout(()=>{$(!0)},0)},[$]),fe=u.useCallback((me,ee)=>{Y.find(V=>V.id===ee.id)&&ye({id:ee.id,type:ee.type,content:ee.data.content})},[Y]);u.useEffect(()=>{U||B&&$()},[b,p,U,B]);const Ne=u.useCallback((me,ee)=>{const ae=Y.find(Ce=>Ce.id===ee.source),V=Y.find(Ce=>Ce.id===ee.target),P=A.find(Ce=>Ce.id===ee.id);ae&&V&&P&&R({source:{id:ae.id,type:ae.type,content:ae.data.content},target:{id:V.id,type:V.type,content:V.data.content},edge:{source:ee.source,target:ee.target,weight:parseFloat(ee.label||"0")}})},[Y,A]);return e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"flex-shrink-0 p-4 border-b bg-background",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:""}),e.jsx("p",{className:"text-muted-foreground mt-1",children:""})]}),d&&e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs(qe,{variant:"outline",className:"gap-1",children:[e.jsx($c,{className:"h-3 w-3"}),": ",d.total_nodes]}),e.jsxs(qe,{variant:"outline",className:"gap-1",children:[e.jsx(yg,{className:"h-3 w-3"}),": ",d.total_edges]}),e.jsxs(qe,{variant:"outline",className:"gap-1",children:[e.jsx(Oa,{className:"h-3 w-3"}),": ",d.entity_nodes]}),e.jsxs(qe,{variant:"outline",className:"gap-1",children:[e.jsx(wa,{className:"h-3 w-3"}),": ",d.paragraph_nodes]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mt-4",children:[e.jsxs("div",{className:"flex-1 flex gap-2",children:[e.jsx(ne,{placeholder:"...",value:h,onChange:me=>f(me.target.value),onKeyDown:me=>me.key==="Enter"&&k(),className:"flex-1"}),e.jsx(_,{onClick:k,size:"sm",children:e.jsx(Mt,{className:"h-4 w-4"})}),e.jsx(_,{onClick:ce,variant:"outline",size:"sm",children:""})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Oe,{value:p,onValueChange:me=>g(me),children:[e.jsx(Ae,{className:"w-[120px]",children:e.jsx(Re,{})}),e.jsxs(De,{children:[e.jsx(te,{value:"all",children:""}),e.jsx(te,{value:"entity",children:""}),e.jsx(te,{value:"paragraph",children:""})]})]}),e.jsxs(Oe,{value:b===1e4?"all":T?"custom":b.toString(),onValueChange:me=>{me==="custom"?(w(!0),N(b.toString())):me==="all"?(w(!1),j(1e4)):(w(!1),j(Number(me)))},children:[e.jsx(Ae,{className:"w-[120px]",children:e.jsx(Re,{})}),e.jsxs(De,{children:[e.jsx(te,{value:"50",children:"50 "}),e.jsx(te,{value:"100",children:"100 "}),e.jsx(te,{value:"200",children:"200 "}),e.jsx(te,{value:"500",children:"500 "}),e.jsx(te,{value:"1000",children:"1000 "}),e.jsx(te,{value:"all",children:" (10000)"}),e.jsx(te,{value:"custom",children:"..."})]})]}),T&&e.jsx(ne,{type:"number",min:"50",value:y,onChange:me=>N(me.target.value),onBlur:()=>{const me=parseInt(y);!isNaN(me)&&me>=50?j(me):(N("50"),j(50))},onKeyDown:me=>{if(me.key==="Enter"){const ee=parseInt(y);!isNaN(ee)&&ee>=50?j(ee):(N("50"),j(50))}},placeholder:"50",className:"w-[120px]"}),e.jsx(_,{onClick:()=>$(),variant:"outline",size:"sm",disabled:i,children:e.jsx(Et,{className:q("h-4 w-4",i&&"animate-spin")})})]})]})]}),e.jsx("div",{className:"flex-1 relative",children:i?e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Et,{className:"h-8 w-8 animate-spin mx-auto mb-2 text-muted-foreground"}),e.jsx("p",{className:"text-muted-foreground",children:"..."})]})}):Y.length===0?e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx($c,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:""}),e.jsx("p",{className:"text-muted-foreground",children:""})]})}):e.jsxs(l0,{nodes:Y,edges:A,onNodesChange:z,onEdgesChange:xe,onNodeClick:fe,onEdgeClick:Ne,nodeTypes:T2,fitView:!0,minZoom:.05,maxZoom:1.5,defaultViewport:{x:0,y:0,zoom:.5},elevateNodesOnSelect:be<=500,nodesDraggable:be<=1e3,attributionPosition:"bottom-left",children:[e.jsx(n0,{variant:i0.Dots,gap:12,size:1}),e.jsx(r0,{}),be<=500&&e.jsx(c0,{nodeColor:C,nodeBorderRadius:8,pannable:!0,zoomable:!0}),e.jsxs(o0,{position:"top-right",className:"bg-background/95 backdrop-blur-sm rounded-lg border p-3 shadow-lg",children:[e.jsx("div",{className:"text-sm font-semibold mb-2",children:""}),e.jsxs("div",{className:"space-y-2 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded bg-gradient-to-br from-blue-500 to-blue-600 border-2 border-blue-700"}),e.jsx("span",{children:""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded bg-gradient-to-br from-green-500 to-green-600 border-2 border-green-700"}),e.jsx("span",{children:""})]}),be>200&&e.jsxs("div",{className:"mt-2 pt-2 border-t text-yellow-600 dark:text-yellow-500",children:[e.jsx("div",{className:"font-semibold",children:""}),e.jsx("div",{children:""}),be>500&&e.jsx("div",{children:""})]})]})]})]})}),e.jsx(qs,{open:!!pe,onOpenChange:me=>!me&&ye(null),children:e.jsxs(Rs,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsx(Ls,{children:e.jsx(Us,{children:""})}),pe&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"grid grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:""}),e.jsx("div",{className:"mt-1",children:e.jsx(qe,{variant:pe.type==="entity"?"default":"secondary",children:pe.type==="entity"?" ":" "})})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"ID"}),e.jsx("code",{className:"mt-1 block p-2 bg-muted rounded text-xs break-all",children:pe.id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:""}),e.jsx(Ke,{className:"mt-1 h-40 p-3 bg-muted rounded",children:e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:pe.content})})]})]})]})}),e.jsx(qs,{open:!!we,onOpenChange:me=>!me&&R(null),children:e.jsxs(Rs,{className:"max-w-2xl max-h-[80vh] overflow-hidden flex flex-col",children:[e.jsx(Ls,{children:e.jsx(Us,{children:""})}),we&&e.jsx(Ke,{className:"flex-1 pr-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0 p-3 bg-blue-50 dark:bg-blue-950 rounded border-2 border-blue-200 dark:border-blue-800",children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:""}),e.jsx("div",{className:"font-medium text-sm mb-2 truncate",children:we.source.content}),e.jsxs("code",{className:"text-xs text-muted-foreground truncate block",children:[we.source.id.slice(0,40),"..."]})]}),e.jsx("div",{className:"text-2xl text-muted-foreground flex-shrink-0",children:""}),e.jsxs("div",{className:"flex-1 min-w-0 p-3 bg-green-50 dark:bg-green-950 rounded border-2 border-green-200 dark:border-green-800",children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:""}),e.jsx("div",{className:"font-medium text-sm mb-2 truncate",children:we.target.content}),e.jsxs("code",{className:"text-xs text-muted-foreground truncate block",children:[we.target.id.slice(0,40),"..."]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:""}),e.jsx("div",{className:"mt-1",children:e.jsx(qe,{variant:"outline",className:"text-base font-mono",children:we.edge.weight.toFixed(4)})})]})]})})]})}),e.jsx(ms,{open:U,onOpenChange:O,children:e.jsxs(as,{children:[e.jsxs(ls,{children:[e.jsx(is,{children:""}),e.jsxs(rs,{children:["",e.jsx("br",{}),"?"]})]}),e.jsxs(ns,{children:[e.jsx(os,{onClick:()=>n({to:"/"}),children:" ()"}),e.jsx(cs,{onClick:ue,children:""})]})]})}),e.jsx(ms,{open:L,onOpenChange:M,children:e.jsxs(as,{children:[e.jsxs(ls,{children:[e.jsx(is,{children:" "}),e.jsx(rs,{asChild:!0,children:e.jsxs("div",{children:[e.jsxs("p",{children:[" ",e.jsx("strong",{className:"text-orange-600",children:b>=1e4?" (10000)":b})," "]}),e.jsx("p",{className:"mt-4",children:":"}),e.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[e.jsx("li",{children:""}),e.jsx("li",{children:""}),e.jsx("li",{children:""})]}),e.jsx("p",{className:"mt-4",children:" (50-200 )"})]})})]}),e.jsxs(ns,{children:[e.jsx(os,{onClick:()=>{M(!1),b>200&&(j(50),w(!1))},children:""}),e.jsx(cs,{onClick:ie,className:"bg-orange-600 hover:bg-orange-700",children:""})]})]})})]})}function wp({className:n,classNames:i,showOutsideDays:r=!0,captionLayout:d="label",buttonVariant:m="ghost",formatters:h,components:f,...p}){const g=kg();return e.jsx(Uy,{showOutsideDays:r,className:q("bg-background group/calendar p-3 [--cell-size:2rem] [[data-slot=card-content]_&]:bg-transparent [[data-slot=popover-content]_&]:bg-transparent",String.raw`rtl:**:[.rdp-button\_next>svg]:rotate-180`,String.raw`rtl:**:[.rdp-button\_previous>svg]:rotate-180`,n),captionLayout:d,formatters:{formatMonthDropdown:b=>b.toLocaleString("default",{month:"short"}),...h},classNames:{root:q("w-fit",g.root),months:q("relative flex flex-col gap-4 md:flex-row",g.months),month:q("flex w-full flex-col gap-4",g.month),nav:q("absolute inset-x-0 top-0 flex w-full items-center justify-between gap-1",g.nav),button_previous:q(mr({variant:m}),"h-[--cell-size] w-[--cell-size] select-none p-0 aria-disabled:opacity-50",g.button_previous),button_next:q(mr({variant:m}),"h-[--cell-size] w-[--cell-size] select-none p-0 aria-disabled:opacity-50",g.button_next),month_caption:q("flex h-[--cell-size] w-full items-center justify-center px-[--cell-size]",g.month_caption),dropdowns:q("flex h-[--cell-size] w-full items-center justify-center gap-1.5 text-sm font-medium",g.dropdowns),dropdown_root:q("has-focus:border-ring border-input shadow-xs has-focus:ring-ring/50 has-focus:ring-[3px] relative rounded-md border",g.dropdown_root),dropdown:q("bg-popover absolute inset-0 opacity-0",g.dropdown),caption_label:q("select-none font-medium",d==="label"?"text-sm":"[&>svg]:text-muted-foreground flex h-8 items-center gap-1 rounded-md pl-2 pr-1 text-sm [&>svg]:size-3.5",g.caption_label),table:"w-full border-collapse",weekdays:q("flex",g.weekdays),weekday:q("text-muted-foreground flex-1 select-none rounded-md text-[0.8rem] font-normal",g.weekday),week:q("mt-2 flex w-full",g.week),week_number_header:q("w-[--cell-size] select-none",g.week_number_header),week_number:q("text-muted-foreground select-none text-[0.8rem]",g.week_number),day:q("group/day relative aspect-square h-full w-full select-none p-0 text-center [&:first-child[data-selected=true]_button]:rounded-l-md [&:last-child[data-selected=true]_button]:rounded-r-md",g.day),range_start:q("bg-accent rounded-l-md",g.range_start),range_middle:q("rounded-none",g.range_middle),range_end:q("bg-accent rounded-r-md",g.range_end),today:q("bg-accent text-accent-foreground rounded-md data-[selected=true]:rounded-none",g.today),outside:q("text-muted-foreground aria-selected:text-muted-foreground",g.outside),disabled:q("text-muted-foreground opacity-50",g.disabled),hidden:q("invisible",g.hidden),...i},components:{Root:({className:b,rootRef:j,...y})=>e.jsx("div",{"data-slot":"calendar",ref:j,className:q(b),...y}),Chevron:({className:b,orientation:j,...y})=>j==="left"?e.jsx(rl,{className:q("size-4",b),...y}):j==="right"?e.jsx(Ua,{className:q("size-4",b),...y}):e.jsx(Ol,{className:q("size-4",b),...y}),DayButton:M2,WeekNumber:({children:b,...j})=>e.jsx("td",{...j,children:e.jsx("div",{className:"flex size-[--cell-size] items-center justify-center text-center",children:b})}),...f},...p})}function M2({className:n,day:i,modifiers:r,...d}){const m=kg(),h=u.useRef(null);return u.useEffect(()=>{r.focused&&h.current?.focus()},[r.focused]),e.jsx(_,{ref:h,variant:"ghost",size:"icon","data-day":i.date.toLocaleDateString(),"data-selected-single":r.selected&&!r.range_start&&!r.range_end&&!r.range_middle,"data-range-start":r.range_start,"data-range-end":r.range_end,"data-range-middle":r.range_middle,className:q("data-[selected-single=true]:bg-primary data-[selected-single=true]:text-primary-foreground data-[range-middle=true]:bg-accent data-[range-middle=true]:text-accent-foreground data-[range-start=true]:bg-primary data-[range-start=true]:text-primary-foreground data-[range-end=true]:bg-primary data-[range-end=true]:text-primary-foreground group-data-[focused=true]/day:border-ring group-data-[focused=true]/day:ring-ring/50 flex aspect-square h-auto w-full min-w-[--cell-size] flex-col gap-1 font-normal leading-none data-[range-end=true]:rounded-md data-[range-middle=true]:rounded-none data-[range-start=true]:rounded-md group-data-[focused=true]/day:relative group-data-[focused=true]/day:z-10 group-data-[focused=true]/day:ring-[3px] [&>span]:text-xs [&>span]:opacity-70",m.day,n),...d})}const A2={lessThanXSeconds:{one:" 1 ",other:" {{count}} "},xSeconds:{one:"1 ",other:"{{count}} "},halfAMinute:"",lessThanXMinutes:{one:" 1 ",other:" {{count}} "},xMinutes:{one:"1 ",other:"{{count}} "},xHours:{one:"1 ",other:"{{count}} "},aboutXHours:{one:" 1 ",other:" {{count}} "},xDays:{one:"1 ",other:"{{count}} "},aboutXWeeks:{one:" 1 ",other:" {{count}} "},xWeeks:{one:"1 ",other:"{{count}} "},aboutXMonths:{one:" 1 ",other:" {{count}} "},xMonths:{one:"1 ",other:"{{count}} "},aboutXYears:{one:" 1 ",other:" {{count}} "},xYears:{one:"1 ",other:"{{count}} "},overXYears:{one:" 1 ",other:" {{count}} "},almostXYears:{one:" 1 ",other:" {{count}} "}},D2=(n,i,r)=>{let d;const m=A2[n];return typeof m=="string"?d=m:i===1?d=m.one:d=m.other.replace("{{count}}",String(i)),r?.addSuffix?r.comparison&&r.comparison>0?d+"":d+"":d},O2={full:"y''M''d'' EEEE",long:"y''M''d''",medium:"yyyy-MM-dd",short:"yy-MM-dd"},R2={full:"zzzz a h:mm:ss",long:"z a h:mm:ss",medium:"a h:mm:ss",short:"a h:mm"},L2={full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},U2={date:vu({formats:O2,defaultWidth:"full"}),time:vu({formats:R2,defaultWidth:"full"}),dateTime:vu({formats:L2,defaultWidth:"full"})};function _p(n,i,r){const d="eeee p";return Pb(n,i,r)?d:n.getTime()>i.getTime()?"''"+d:"''"+d}const B2={lastWeek:_p,yesterday:"'' p",today:"'' p",tomorrow:"'' p",nextWeek:_p,other:"PP p"},H2=(n,i,r,d)=>{const m=B2[n];return typeof m=="function"?m(i,r,d):m},q2={narrow:["",""],abbreviated:["",""],wide:["",""]},G2={narrow:["1","2","3","4"],abbreviated:["","","",""],wide:["","","",""]},F2={narrow:["","","","","","","","","","","",""],abbreviated:["1","2","3","4","5","6","7","8","9","10","11","12"],wide:["","","","","","","","","","","",""]},V2={narrow:["","","","","","",""],short:["","","","","","",""],abbreviated:["","","","","","",""],wide:["","","","","","",""]},$2={narrow:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},abbreviated:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},wide:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""}},Q2={narrow:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},abbreviated:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},wide:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""}},I2=(n,i)=>{const r=Number(n);switch(i?.unit){case"date":return r.toString()+"";case"hour":return r.toString()+"";case"minute":return r.toString()+"";case"second":return r.toString()+"";default:return" "+r.toString()}},Y2={ordinalNumber:I2,era:Pi({values:q2,defaultWidth:"wide"}),quarter:Pi({values:G2,defaultWidth:"wide",argumentCallback:n=>n-1}),month:Pi({values:F2,defaultWidth:"wide"}),day:Pi({values:V2,defaultWidth:"wide"}),dayPeriod:Pi({values:$2,defaultWidth:"wide",formattingValues:Q2,defaultFormattingWidth:"wide"})},X2=/^(\s*)?\d+(|||)?/i,K2=/\d+/i,J2={narrow:/^()/i,abbreviated:/^()/i,wide:/^(|)/i},P2={any:[/^()/i,/^()/i]},Z2={narrow:/^[1234]/i,abbreviated:/^[]/i,wide:/^[]/i},W2={any:[/(1|)/i,/(2|)/i,/(3|)/i,/(4|)/i]},e_={narrow:/^(|||||||||[])/i,abbreviated:/^(|||||||||[]|\d|1[12])/i,wide:/^(|||||||||[])/i},s_={narrow:[/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^(?!(|))/i,/^/i,/^/i],any:[/^|1/i,/^|2/i,/^|3/i,/^|4/i,/^|5/i,/^|6/i,/^|7/i,/^|8/i,/^|9/i,/^(?!(|))|10/i,/^|11/i,/^|12/i]},t_={narrow:/^[]/i,short:/^[]/i,abbreviated:/^[]/i,wide:/^[]/i},a_={any:[//i,//i,//i,//i,//i,//i,//i]},l_={any:/^(?|?||[]|?||?||)/i},n_={any:{am:/^?/i,pm:/^?/i,midnight:/^/i,noon:/^[]/i,morning:/^/i,afternoon:/^/i,evening:/^?/i,night:/^/i}},i_={ordinalNumber:Zb({matchPattern:X2,parsePattern:K2,valueCallback:n=>parseInt(n,10)}),era:Zi({matchPatterns:J2,defaultMatchWidth:"wide",parsePatterns:P2,defaultParseWidth:"any"}),quarter:Zi({matchPatterns:Z2,defaultMatchWidth:"wide",parsePatterns:W2,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Zi({matchPatterns:e_,defaultMatchWidth:"wide",parsePatterns:s_,defaultParseWidth:"any"}),day:Zi({matchPatterns:t_,defaultMatchWidth:"wide",parsePatterns:a_,defaultParseWidth:"any"}),dayPeriod:Zi({matchPatterns:l_,defaultMatchWidth:"any",parsePatterns:n_,defaultParseWidth:"any"})},Lc={code:"zh-CN",formatDistance:D2,formatLong:U2,formatRelative:H2,localize:Y2,match:i_,options:{weekStartsOn:1,firstWeekContainsDate:4}},Uc={xs:{label:"",rowHeight:28,class:"text-[10px] sm:text-xs"},sm:{label:"",rowHeight:36,class:"text-xs sm:text-sm"},base:{label:"",rowHeight:44,class:"text-sm sm:text-base"}};function r_(){const[n,i]=u.useState([]),[r,d]=u.useState(""),[m,h]=u.useState("all"),[f,p]=u.useState("all"),[g,b]=u.useState(void 0),[j,y]=u.useState(void 0),[N,T]=u.useState(!0),[w,U]=u.useState(!1),[O,B]=u.useState("xs"),[I,L]=u.useState(4),M=u.useRef(null);u.useEffect(()=>{const C=en.getAllLogs();i(C);const $=en.onLog(()=>{i(en.getAllLogs())}),k=en.onConnectionChange(ce=>{U(ce)});return()=>{$(),k()}},[]);const Y=u.useMemo(()=>{const C=new Set(n.map($=>$.module).filter($=>$&&$.trim()!==""));return Array.from(C).sort()},[n]),Q=C=>{switch(C){case"DEBUG":return"text-muted-foreground";case"INFO":return"text-blue-500 dark:text-blue-400";case"WARNING":return"text-yellow-600 dark:text-yellow-500";case"ERROR":return"text-red-600 dark:text-red-500";case"CRITICAL":return"text-red-700 dark:text-red-400 font-bold";default:return"text-foreground"}},z=C=>{switch(C){case"DEBUG":return"bg-gray-800/30 dark:bg-gray-800/50";case"INFO":return"bg-blue-900/20 dark:bg-blue-500/20";case"WARNING":return"bg-yellow-900/20 dark:bg-yellow-500/20";case"ERROR":return"bg-red-900/20 dark:bg-red-500/20";case"CRITICAL":return"bg-red-900/30 dark:bg-red-600/30";default:return"bg-gray-800/20 dark:bg-gray-800/30"}},A=()=>{window.location.reload()},W=()=>{en.clearLogs(),i([])},xe=()=>{const C=pe.map(ue=>`${ue.timestamp} [${ue.level.padEnd(8)}] [${ue.module}] ${ue.message}`).join(`
`),$=new Blob([C],{type:"text/plain;charset=utf-8"}),k=URL.createObjectURL($),ce=document.createElement("a");ce.href=k,ce.download=`logs-${bu(new Date,"yyyy-MM-dd-HHmmss")}.txt`,ce.click(),URL.revokeObjectURL(k)},be=()=>{T(!N)},_e=()=>{b(void 0),y(void 0)},pe=u.useMemo(()=>n.filter(C=>{const $=r===""||C.message.toLowerCase().includes(r.toLowerCase())||C.module.toLowerCase().includes(r.toLowerCase()),k=m==="all"||C.level===m,ce=f==="all"||C.module===f;let ue=!0;if(g||j){const ie=new Date(C.timestamp);if(g){const fe=new Date(g);fe.setHours(0,0,0,0),ue=ue&&ie>=fe}if(j){const fe=new Date(j);fe.setHours(23,59,59,999),ue=ue&&ie<=fe}}return $&&k&&ce&&ue}),[n,r,m,f,g,j]),ye=Uc[O].rowHeight+I,we=qb({count:pe.length,getScrollElement:()=>M.current,estimateSize:()=>ye,overscan:15}),R=u.useRef(!1),X=u.useRef(pe.length);return u.useEffect(()=>{const C=M.current;if(!C)return;const $=()=>{if(R.current)return;const{scrollTop:k,scrollHeight:ce,clientHeight:ue}=C,ie=ce-k-ue;ie>100&&N?T(!1):ie<50&&!N&&T(!0)};return C.addEventListener("scroll",$,{passive:!0}),()=>C.removeEventListener("scroll",$)},[N]),u.useEffect(()=>{const C=pe.length>X.current;X.current=pe.length,N&&pe.length>0&&C&&(R.current=!0,we.scrollToIndex(pe.length-1,{align:"end",behavior:"auto"}),requestAnimationFrame(()=>{requestAnimationFrame(()=>{R.current=!1})}))},[pe.length,N,we]),e.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"flex-shrink-0 space-y-4 p-3 sm:p-4 lg:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold",children:""}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mt-1",children:""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:q("h-2.5 w-2.5 sm:h-3 sm:w-3 rounded-full",w?"bg-green-500 animate-pulse":"bg-red-500")}),e.jsx("span",{className:"text-xs sm:text-sm text-muted-foreground",children:w?"":""})]})]}),e.jsx($e,{className:"p-3 sm:p-4",children:e.jsxs("div",{className:"flex flex-col gap-3 sm:gap-4",children:[e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Mt,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(ne,{placeholder:"...",value:r,onChange:C=>d(C.target.value),className:"pl-9 h-9 text-sm"})]}),e.jsxs(Oe,{value:m,onValueChange:h,children:[e.jsxs(Ae,{className:"w-full sm:w-[140px] lg:w-[180px] h-9 text-sm",children:[e.jsx(Lu,{className:"h-4 w-4 mr-2"}),e.jsx(Re,{placeholder:""})]}),e.jsxs(De,{children:[e.jsx(te,{value:"all",children:""}),e.jsx(te,{value:"DEBUG",children:"DEBUG"}),e.jsx(te,{value:"INFO",children:"INFO"}),e.jsx(te,{value:"WARNING",children:"WARNING"}),e.jsx(te,{value:"ERROR",children:"ERROR"}),e.jsx(te,{value:"CRITICAL",children:"CRITICAL"})]})]}),e.jsxs(Oe,{value:f,onValueChange:p,children:[e.jsxs(Ae,{className:"w-full sm:w-[160px] lg:w-[200px] h-9 text-sm",children:[e.jsx(Lu,{className:"h-4 w-4 mr-2"}),e.jsx(Re,{placeholder:""})]}),e.jsxs(De,{children:[e.jsx(te,{value:"all",children:""}),Y.map(C=>e.jsx(te,{value:C,children:C},C))]})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:gap-4",children:[e.jsxs(Ra,{children:[e.jsx(La,{asChild:!0,children:e.jsxs(_,{variant:"outline",size:"sm",className:q("w-full sm:w-[200px] lg:w-[240px] justify-start text-left font-normal h-9",!g&&"text-muted-foreground"),children:[e.jsx(ep,{className:"mr-2 h-4 w-4"}),e.jsx("span",{className:"text-xs sm:text-sm",children:g?bu(g,"PPP",{locale:Lc}):""})]})}),e.jsx(Ca,{className:"w-auto p-0",align:"start",children:e.jsx(wp,{mode:"single",selected:g,onSelect:b,initialFocus:!0,locale:Lc})})]}),e.jsxs(Ra,{children:[e.jsx(La,{asChild:!0,children:e.jsxs(_,{variant:"outline",size:"sm",className:q("w-full sm:w-[200px] lg:w-[240px] justify-start text-left font-normal h-9",!j&&"text-muted-foreground"),children:[e.jsx(ep,{className:"mr-2 h-4 w-4"}),e.jsx("span",{className:"text-xs sm:text-sm",children:j?bu(j,"PPP",{locale:Lc}):""})]})}),e.jsx(Ca,{className:"w-auto p-0",align:"start",children:e.jsx(wp,{mode:"single",selected:j,onSelect:y,initialFocus:!0,locale:Lc})})]}),(g||j)&&e.jsxs(_,{variant:"outline",size:"sm",onClick:_e,className:"w-full sm:w-auto h-9",children:[e.jsx(il,{className:"h-4 w-4 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline text-sm",children:""}),e.jsx("span",{className:"sm:hidden text-sm",children:""})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:flex-wrap sm:items-center",children:[e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs(_,{variant:N?"default":"outline",size:"sm",onClick:be,className:"flex-1 sm:flex-none h-9",children:[N?e.jsx(py,{className:"h-4 w-4"}):e.jsx(gy,{className:"h-4 w-4"}),e.jsx("span",{className:"ml-2 text-sm",children:N?"":""})]}),e.jsxs(_,{variant:"outline",size:"sm",onClick:A,className:"flex-1 sm:flex-none h-9",children:[e.jsx(Et,{className:"h-4 w-4"}),e.jsx("span",{className:"ml-2 text-sm",children:""})]}),e.jsxs(_,{variant:"outline",size:"sm",onClick:W,className:"flex-1 sm:flex-none h-9",children:[e.jsx(Pe,{className:"h-4 w-4"}),e.jsx("span",{className:"ml-2 text-sm",children:""})]}),e.jsxs(_,{variant:"outline",size:"sm",onClick:xe,className:"flex-1 sm:flex-none h-9",children:[e.jsx(nl,{className:"h-4 w-4"}),e.jsx("span",{className:"ml-2 text-sm",children:""})]})]}),e.jsx("div",{className:"flex-1 hidden sm:block"}),e.jsxs("div",{className:"text-xs sm:text-sm text-muted-foreground flex items-center justify-center sm:justify-end",children:[e.jsxs("span",{className:"font-mono",children:[pe.length," / ",n.length]}),e.jsx("span",{className:"ml-1",children:""})]})]}),e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:gap-6 pt-2 border-t border-border/50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(jy,{className:"h-4 w-4"}),e.jsx("span",{children:""})]}),e.jsx("div",{className:"flex gap-1",children:Object.keys(Uc).map(C=>e.jsx(_,{variant:O===C?"default":"outline",size:"sm",onClick:()=>B(C),className:"h-7 px-3 text-xs",children:Uc[C].label},C))})]}),e.jsxs("div",{className:"flex items-center gap-3 flex-1 max-w-xs",children:[e.jsx("span",{className:"text-sm text-muted-foreground whitespace-nowrap",children:""}),e.jsx(fa,{value:[I],onValueChange:([C])=>L(C),min:0,max:12,step:2,className:"flex-1"}),e.jsxs("span",{className:"text-xs text-muted-foreground w-8",children:[I,"px"]})]})]})]})})]}),e.jsx("div",{className:"flex-1 min-h-0 px-3 sm:px-4 lg:px-6 pb-3 sm:pb-4 lg:pb-6",children:e.jsx($e,{className:"bg-black dark:bg-gray-950 border-gray-800 dark:border-gray-900 h-full",children:e.jsx(Ke,{viewportRef:M,className:"h-full",children:e.jsx("div",{className:q("p-2 sm:p-3 font-mono relative",Uc[O].class),style:{height:`${we.getTotalSize()}px`},children:pe.length===0?e.jsx("div",{className:"text-gray-500 dark:text-gray-600 text-center py-8 text-sm",children:""}):we.getVirtualItems().map(C=>{const $=pe[C.index];return e.jsxs("div",{"data-index":C.index,ref:we.measureElement,className:q("absolute top-0 left-0 w-full px-2 sm:px-3 rounded hover:bg-white/5 transition-colors group",z($.level)),style:{transform:`translateY(${C.start}px)`,paddingTop:`${I/2}px`,paddingBottom:`${I/2}px`},children:[e.jsxs("div",{className:"flex flex-col gap-0.5 sm:hidden",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-600",children:$.timestamp}),e.jsxs("span",{className:q("font-semibold",Q($.level)),children:["[",$.level,"]"]})]}),e.jsx("div",{className:"text-cyan-400 dark:text-cyan-500 truncate",children:$.module}),e.jsx("div",{className:"text-gray-300 dark:text-gray-400 whitespace-pre-wrap break-words",children:$.message})]}),e.jsxs("div",{className:"hidden sm:flex gap-2 items-start",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-600 flex-shrink-0 w-[130px] lg:w-[160px]",children:$.timestamp}),e.jsxs("span",{className:q("flex-shrink-0 w-[65px] lg:w-[75px] font-semibold",Q($.level)),children:["[",$.level,"]"]}),e.jsx("span",{className:"text-cyan-400 dark:text-cyan-500 flex-shrink-0 w-[100px] lg:w-[130px] truncate",children:$.module}),e.jsx("span",{className:"text-gray-300 dark:text-gray-400 flex-1 whitespace-pre-wrap break-words",children:$.message})]})]},C.key)})})})})})]})}const c_="Mai-with-u",o_="plugin-repo",d_="main",u_="plugin_details.json";async function m_(){try{const n=await Se("/api/webui/plugins/fetch-raw",{method:"POST",body:JSON.stringify({owner:c_,repo:o_,branch:d_,file_path:u_})});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const i=await n.json();if(!i.success||!i.data)throw new Error(i.error||"");return JSON.parse(i.data).filter(m=>!m?.id||!m?.manifest?(console.warn(":",m),!1):!m.manifest.name||!m.manifest.version?(console.warn(":",m.id),!1):!0).map(m=>({id:m.id,manifest:{manifest_version:m.manifest.manifest_version||1,name:m.manifest.name,version:m.manifest.version,description:m.manifest.description||"",author:m.manifest.author||{name:"Unknown"},license:m.manifest.license||"Unknown",host_application:m.manifest.host_application||{min_version:"0.0.0"},homepage_url:m.manifest.homepage_url,repository_url:m.manifest.repository_url,keywords:m.manifest.keywords||[],categories:m.manifest.categories||[],default_locale:m.manifest.default_locale||"zh-CN",locales_path:m.manifest.locales_path},downloads:0,rating:0,review_count:0,installed:!1,published_at:new Date().toISOString(),updated_at:new Date().toISOString()}))}catch(n){throw console.error("Failed to fetch plugin list:",n),n}}async function h_(){try{const n=await Se("/api/webui/plugins/git-status");if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return await n.json()}catch(n){return console.error("Failed to check Git status:",n),{installed:!1,error:" Git "}}}async function x_(){try{const n=await Se("/api/webui/plugins/version");if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return await n.json()}catch(n){return console.error("Failed to get Maimai version:",n),{version:"0.0.0",version_major:0,version_minor:0,version_patch:0}}}function f_(n,i,r){const d=n.split(".").map(p=>parseInt(p)||0),m=d[0]||0,h=d[1]||0,f=d[2]||0;if(r.version_major<m||r.version_major===m&&r.version_minor<h||r.version_major===m&&r.version_minor===h&&r.version_patch<f)return!1;if(i){const p=i.split(".").map(y=>parseInt(y)||0),g=p[0]||0,b=p[1]||0,j=p[2]||0;if(r.version_major>g||r.version_major===g&&r.version_minor>b||r.version_major===g&&r.version_minor===b&&r.version_patch>j)return!1}return!0}function p_(n,i){const r=window.location.protocol==="https:"?"wss:":"ws:",d=window.location.host,m=new WebSocket(`${r}//${d}/api/webui/ws/plugin-progress`);return m.onopen=()=>{console.log("Plugin progress WebSocket connected");const h=setInterval(()=>{m.readyState===WebSocket.OPEN?m.send("ping"):clearInterval(h)},3e4)},m.onmessage=h=>{try{if(h.data==="pong")return;const f=JSON.parse(h.data);n(f)}catch(f){console.error("Failed to parse progress data:",f)}},m.onerror=h=>{console.error("Plugin progress WebSocket error:",h),i?.(h)},m.onclose=()=>{console.log("Plugin progress WebSocket disconnected")},m}async function nr(){try{const n=await Se("/api/webui/plugins/installed",{headers:As()});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const i=await n.json();if(!i.success)throw new Error(i.message||"");return i.plugins||[]}catch(n){return console.error("Failed to get installed plugins:",n),[]}}function Bc(n,i){return i.some(r=>r.id===n)}function Hc(n,i){const r=i.find(d=>d.id===n);if(r)return r.manifest?.version||r.version}async function g_(n,i,r="main"){const d=await Se("/api/webui/plugins/install",{method:"POST",body:JSON.stringify({plugin_id:n,repository_url:i,branch:r})});if(!d.ok){const m=await d.json();throw new Error(m.detail||"")}return await d.json()}async function j_(n){const i=await Se("/api/webui/plugins/uninstall",{method:"POST",body:JSON.stringify({plugin_id:n})});if(!i.ok){const r=await i.json();throw new Error(r.detail||"")}return await i.json()}async function v_(n,i,r="main"){const d=await Se("/api/webui/plugins/update",{method:"POST",body:JSON.stringify({plugin_id:n,repository_url:i,branch:r})});if(!d.ok){const m=await d.json();throw new Error(m.detail||"")}return await d.json()}async function b_(n){const i=await Se(`/api/webui/plugins/config/${n}/schema`,{headers:As()});if(!i.ok){const d=await i.json();throw new Error(d.detail||" Schema ")}const r=await i.json();if(!r.success)throw new Error(r.message||" Schema ");return r.schema}async function N_(n){const i=await Se(`/api/webui/plugins/config/${n}`,{headers:As()});if(!i.ok){const d=await i.json();throw new Error(d.detail||"")}const r=await i.json();if(!r.success)throw new Error(r.message||"");return r.config}async function y_(n,i){const r=await Se(`/api/webui/plugins/config/${n}`,{method:"PUT",body:JSON.stringify({config:i})});if(!r.ok){const d=await r.json();throw new Error(d.detail||"")}return await r.json()}async function w_(n){const i=await Se(`/api/webui/plugins/config/${n}/reset`,{method:"POST",headers:As()});if(!i.ok){const r=await i.json();throw new Error(r.detail||"")}return await i.json()}async function __(n){const i=await Se(`/api/webui/plugins/config/${n}/toggle`,{method:"POST",headers:As()});if(!i.ok){const r=await i.json();throw new Error(r.detail||"")}return await i.json()}const jr="https://maibot-plugin-stats.maibot-webui.workers.dev";async function Zg(n){try{const i=await fetch(`${jr}/stats/${n}`);return i.ok?await i.json():(console.error("Failed to fetch plugin stats:",i.statusText),null)}catch(i){return console.error("Error fetching plugin stats:",i),null}}async function S_(n,i){try{const r=i||tm(),d=await fetch(`${jr}/stats/like`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({plugin_id:n,user_id:r})}),m=await d.json();return d.status===429?{success:!1,error:""}:d.ok?{success:!0,...m}:{success:!1,error:m.error||""}}catch(r){return console.error("Error liking plugin:",r),{success:!1,error:""}}}async function C_(n,i){try{const r=i||tm(),d=await fetch(`${jr}/stats/dislike`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({plugin_id:n,user_id:r})}),m=await d.json();return d.status===429?{success:!1,error:""}:d.ok?{success:!0,...m}:{success:!1,error:m.error||""}}catch(r){return console.error("Error disliking plugin:",r),{success:!1,error:""}}}async function k_(n,i,r,d){if(i<1||i>5)return{success:!1,error:" 1-5 "};try{const m=d||tm(),h=await fetch(`${jr}/stats/rate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({plugin_id:n,rating:i,comment:r,user_id:m})}),f=await h.json();return h.status===429?{success:!1,error:" 3 "}:h.ok?{success:!0,...f}:{success:!1,error:f.error||""}}catch(m){return console.error("Error rating plugin:",m),{success:!1,error:""}}}async function T_(n){try{const i=await fetch(`${jr}/stats/download`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({plugin_id:n})}),r=await i.json();return i.status===429?(console.warn("Download recording rate limited"),{success:!0}):i.ok?{success:!0,...r}:(console.error("Failed to record download:",r.error),{success:!1,error:r.error})}catch(i){return console.error("Error recording download:",i),{success:!1,error:""}}}function E_(){const n=navigator,i=[navigator.userAgent,navigator.language,navigator.languages?.join(",")||"",navigator.platform,navigator.hardwareConcurrency||0,screen.width,screen.height,screen.colorDepth,screen.pixelDepth,new Date().getTimezoneOffset(),Intl.DateTimeFormat().resolvedOptions().timeZone,navigator.maxTouchPoints||0,n.deviceMemory||0].join("|");let r=0;for(let d=0;d<i.length;d++){const m=i.charCodeAt(d);r=(r<<5)-r+m,r=r&r}return`fp_${Math.abs(r).toString(36)}`}function tm(){const n="maibot_user_id";let i=localStorage.getItem(n);if(!i){const r=E_(),d=Date.now().toString(36),m=Math.random().toString(36).substring(2,15);i=`${r}_${d}_${m}`,localStorage.setItem(n,i)}return i}function z_({pluginId:n,compact:i=!1}){const[r,d]=u.useState(null),[m,h]=u.useState(!0),[f,p]=u.useState(0),[g,b]=u.useState(""),[j,y]=u.useState(!1),{toast:N}=Bs(),T=async()=>{h(!0);const B=await Zg(n);B&&d(B),h(!1)};u.useEffect(()=>{T()},[n]);const w=async()=>{const B=await S_(n);B.success?(N({title:"",description:""}),T()):N({title:"",description:B.error||"",variant:"destructive"})},U=async()=>{const B=await C_(n);B.success?(N({title:"",description:""}),T()):N({title:"",description:B.error||"",variant:"destructive"})},O=async()=>{if(f===0){N({title:"",description:" 1 ",variant:"destructive"});return}const B=await k_(n,f,g||void 0);B.success?(N({title:"",description:""}),y(!1),p(0),b(""),T()):N({title:"",description:B.error||"",variant:"destructive"})};return m?e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(nl,{className:"h-4 w-4"}),e.jsx("span",{children:"-"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ll,{className:"h-4 w-4"}),e.jsx("span",{children:"-"})]})]}):r?i?e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",title:`: ${r.downloads.toLocaleString()}`,children:[e.jsx(nl,{className:"h-4 w-4"}),e.jsx("span",{children:r.downloads.toLocaleString()})]}),e.jsxs("div",{className:"flex items-center gap-1",title:`: ${r.rating.toFixed(1)} (${r.rating_count} )`,children:[e.jsx(ll,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),e.jsx("span",{children:r.rating.toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-1",title:`: ${r.likes}`,children:[e.jsx(yu,{className:"h-4 w-4"}),e.jsx("span",{children:r.likes})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"flex flex-col items-center p-3 rounded-lg border bg-card",children:[e.jsx(nl,{className:"h-5 w-5 text-muted-foreground mb-1"}),e.jsx("span",{className:"text-2xl font-bold",children:r.downloads.toLocaleString()}),e.jsx("span",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"flex flex-col items-center p-3 rounded-lg border bg-card",children:[e.jsx(ll,{className:"h-5 w-5 text-yellow-400 mb-1 fill-yellow-400"}),e.jsx("span",{className:"text-2xl font-bold",children:r.rating.toFixed(1)}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[r.rating_count," "]})]}),e.jsxs("div",{className:"flex flex-col items-center p-3 rounded-lg border bg-card",children:[e.jsx(yu,{className:"h-5 w-5 text-green-500 mb-1"}),e.jsx("span",{className:"text-2xl font-bold",children:r.likes}),e.jsx("span",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"flex flex-col items-center p-3 rounded-lg border bg-card",children:[e.jsx(sp,{className:"h-5 w-5 text-red-500 mb-1"}),e.jsx("span",{className:"text-2xl font-bold",children:r.dislikes}),e.jsx("span",{className:"text-xs text-muted-foreground",children:""})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(_,{variant:"outline",size:"sm",onClick:w,children:[e.jsx(yu,{className:"h-4 w-4 mr-1"}),""]}),e.jsxs(_,{variant:"outline",size:"sm",onClick:U,children:[e.jsx(sp,{className:"h-4 w-4 mr-1"}),""]}),e.jsxs(qs,{open:j,onOpenChange:y,children:[e.jsx(Pu,{asChild:!0,children:e.jsxs(_,{variant:"default",size:"sm",children:[e.jsx(ll,{className:"h-4 w-4 mr-1"}),""]})}),e.jsxs(Rs,{children:[e.jsxs(Ls,{children:[e.jsx(Us,{children:""}),e.jsx(Ks,{children:""})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:"flex gap-2",children:[1,2,3,4,5].map(B=>e.jsx("button",{onClick:()=>p(B),className:"focus:outline-none",children:e.jsx(ll,{className:`h-8 w-8 transition-colors ${B<=f?"fill-yellow-400 text-yellow-400":"text-muted-foreground hover:text-yellow-300"}`})},B))}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[f===0&&"",f===1&&"",f===2&&"",f===3&&"",f===4&&"",f===5&&""]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:""}),e.jsx(Ms,{value:g,onChange:B=>b(B.target.value),placeholder:"...",rows:4,maxLength:500}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-1 text-right",children:[g.length," / 500"]})]})]}),e.jsxs(tt,{children:[e.jsx(_,{variant:"outline",onClick:()=>y(!1),children:""}),e.jsx(_,{onClick:O,disabled:f===0,children:""})]})]})]})]}),r.recent_ratings&&r.recent_ratings.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-semibold",children:""}),e.jsx("div",{className:"space-y-3",children:r.recent_ratings.map((B,I)=>e.jsxs("div",{className:"p-3 rounded-lg border bg-muted/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(L=>e.jsx(ll,{className:`h-3 w-3 ${L<=B.rating?"fill-yellow-400 text-yellow-400":"text-muted-foreground"}`},L))}),e.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(B.created_at).toLocaleDateString()})]}),B.comment&&e.jsx("p",{className:"text-sm text-muted-foreground",children:B.comment})]},I))})]})]}):null}const Sp={"Group Management":"","Entertainment & Interaction":"","Utility Tools":"","Content Generation":"",Multimedia:"","External Integration":"","Data Analysis & Insights":"",Other:""};function M_(){const n=ja(),[i,r]=u.useState(null),[d,m]=u.useState(""),[h,f]=u.useState("all"),[p,g]=u.useState("all"),[b,j]=u.useState(!0),[y,N]=u.useState([]),[T,w]=u.useState(!0),[U,O]=u.useState(null),[B,I]=u.useState(null),[L,M]=u.useState(null),[Y,Q]=u.useState(null),[,z]=u.useState([]),[A,W]=u.useState({}),{toast:xe}=Bs(),be=async k=>{const ce=k.map(async fe=>{try{const Ne=await Zg(fe.id);return{id:fe.id,stats:Ne}}catch(Ne){return console.warn(`Failed to load stats for ${fe.id}:`,Ne),{id:fe.id,stats:null}}}),ue=await Promise.all(ce),ie={};ue.forEach(({id:fe,stats:Ne})=>{Ne&&(ie[fe]=Ne)}),W(ie)};u.useEffect(()=>{let k=null,ce=!1;return(async()=>{if(k=p_(ie=>{ce||(M(ie),ie.stage==="success"?setTimeout(()=>{ce||M(null)},2e3):ie.stage==="error"&&(w(!1),O(ie.error||"")))},ie=>{console.error("WebSocket error:",ie),ce||xe({title:"WebSocket ",description:"",variant:"destructive"})}),await new Promise(ie=>{if(!k){ie();return}const fe=()=>{k&&k.readyState===WebSocket.OPEN?(console.log("WebSocket connected, starting to load plugins"),ie()):k&&k.readyState===WebSocket.CLOSED?(console.warn("WebSocket closed before loading plugins"),ie()):setTimeout(fe,100)};fe()}),!ce){const ie=await h_();I(ie),ie.installed||xe({title:"Git ",description:ie.error||" Git ",variant:"destructive"})}if(!ce){const ie=await x_();Q(ie)}if(!ce)try{w(!0),O(null);const ie=await m_();if(!ce){const fe=await nr();z(fe);const Ne=ie.map(me=>{const ee=Bc(me.id,fe),ae=Hc(me.id,fe);return{...me,installed:ee,installed_version:ae}});for(const me of fe)!Ne.some(ae=>ae.id===me.id)&&me.manifest&&Ne.push({id:me.id,manifest:{manifest_version:me.manifest.manifest_version||1,name:me.manifest.name,version:me.manifest.version,description:me.manifest.description||"",author:me.manifest.author,license:me.manifest.license||"Unknown",host_application:me.manifest.host_application,homepage_url:me.manifest.homepage_url,repository_url:me.manifest.repository_url,keywords:me.manifest.keywords||[],categories:me.manifest.categories||[],default_locale:me.manifest.default_locale||"zh-CN",locales_path:me.manifest.locales_path},downloads:0,rating:0,review_count:0,installed:!0,installed_version:me.manifest.version,published_at:new Date().toISOString(),updated_at:new Date().toISOString()});N(Ne),be(Ne)}}catch(ie){if(!ce){const fe=ie instanceof Error?ie.message:"";O(fe),xe({title:"",description:fe,variant:"destructive"})}}finally{ce||w(!1)}})(),()=>{ce=!0,k&&k.close()}},[xe]);const _e=k=>{if(!k.installed&&Y&&!pe(k))return e.jsxs(qe,{variant:"destructive",className:"gap-1",children:[e.jsx(zt,{className:"h-3 w-3"}),""]});if(k.installed){const ce=k.installed_version?.trim(),ue=k.manifest.version?.trim();if(ce!==ue){const ie=ce?.split(".").map(Number)||[0,0,0],fe=ue?.split(".").map(Number)||[0,0,0];for(let Ne=0;Ne<3;Ne++){if((fe[Ne]||0)>(ie[Ne]||0))return e.jsxs(qe,{variant:"outline",className:"gap-1 text-orange-600 border-orange-600",children:[e.jsx(zt,{className:"h-3 w-3"}),""]});if((fe[Ne]||0)<(ie[Ne]||0))break}}return e.jsxs(qe,{variant:"default",className:"gap-1",children:[e.jsx(ta,{className:"h-3 w-3"}),""]})}return null},pe=k=>!Y||!k.manifest?.host_application?!0:f_(k.manifest.host_application.min_version,k.manifest.host_application.max_version,Y),ye=k=>{if(!k.installed||!k.installed_version||!k.manifest?.version)return!1;const ce=k.installed_version.trim(),ue=k.manifest.version.trim();if(ce===ue)return!1;const ie=ce.split(".").map(Number),fe=ue.split(".").map(Number);for(let Ne=0;Ne<3;Ne++){if((fe[Ne]||0)>(ie[Ne]||0))return!0;if((fe[Ne]||0)<(ie[Ne]||0))return!1}return!1},we=y.filter(k=>{if(!k.manifest)return console.warn("[]  manifest :",k.id),!1;const ce=d===""||k.manifest.name?.toLowerCase().includes(d.toLowerCase())||k.manifest.description?.toLowerCase().includes(d.toLowerCase())||k.manifest.keywords&&k.manifest.keywords.some(Ne=>Ne.toLowerCase().includes(d.toLowerCase())),ue=h==="all"||k.manifest.categories&&k.manifest.categories.includes(h);let ie=!0;p==="installed"?ie=k.installed===!0:p==="updates"&&(ie=k.installed===!0&&ye(k));const fe=!b||!Y||pe(k);return ce&&ue&&ie&&fe}),R=()=>{r(null)},X=async k=>{if(!B?.installed){xe({title:"",description:"Git ",variant:"destructive"});return}if(Y&&!pe(k)){xe({title:"",description:"",variant:"destructive"});return}try{await g_(k.id,k.manifest.repository_url||"","main"),T_(k.id).catch(ue=>{console.warn("Failed to record download:",ue)}),xe({title:"",description:`${k.manifest.name} `});const ce=await nr();z(ce),N(ue=>ue.map(ie=>{if(ie.id===k.id){const fe=Bc(ie.id,ce),Ne=Hc(ie.id,ce);return{...ie,installed:fe,installed_version:Ne}}return ie}))}catch(ce){xe({title:"",description:ce instanceof Error?ce.message:"",variant:"destructive"})}},C=async k=>{try{await j_(k.id),xe({title:"",description:`${k.manifest.name} `});const ce=await nr();z(ce),N(ue=>ue.map(ie=>{if(ie.id===k.id){const fe=Bc(ie.id,ce),Ne=Hc(ie.id,ce);return{...ie,installed:fe,installed_version:Ne}}return ie}))}catch(ce){xe({title:"",description:ce instanceof Error?ce.message:"",variant:"destructive"})}},$=async k=>{if(!B?.installed){xe({title:"",description:"Git ",variant:"destructive"});return}try{const ce=await v_(k.id,k.manifest.repository_url||"","main");xe({title:"",description:`${k.manifest.name}  ${ce.old_version}  ${ce.new_version}`});const ue=await nr();z(ue),N(ie=>ie.map(fe=>{if(fe.id===k.id){const Ne=Bc(fe.id,ue),me=Hc(fe.id,ue);return{...fe,installed:Ne,installed_version:me}}return fe}))}catch(ce){xe({title:"",description:ce instanceof Error?ce.message:"",variant:"destructive"})}};return e.jsx(Ke,{className:"h-full",children:e.jsxs("div",{className:"space-y-6 p-4 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:""}),e.jsx("p",{className:"text-muted-foreground mt-2",children:""})]}),e.jsxs(_,{onClick:()=>n({to:"/plugin-mirrors"}),children:[e.jsx(vy,{className:"h-4 w-4 mr-2"}),""]})]}),B&&!B.installed&&e.jsxs($e,{className:"border-orange-600 bg-orange-50 dark:bg-orange-950/20",children:[e.jsx(ss,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(_a,{className:"h-5 w-5 text-orange-600"}),e.jsxs("div",{children:[e.jsx(ts,{className:"text-lg text-orange-900 dark:text-orange-100",children:"Git "}),e.jsx(Ws,{className:"text-orange-800 dark:text-orange-200",children:B.error||" Git "})]})]})}),e.jsx(fs,{children:e.jsxs("p",{className:"text-sm text-orange-800 dark:text-orange-200",children:[" ",e.jsx("a",{href:"https://git-scm.com/downloads",target:"_blank",rel:"noopener noreferrer",className:"underline font-medium",children:"git-scm.com"}),"  Git "]})})]}),e.jsx($e,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Mt,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(ne,{placeholder:"...",value:d,onChange:k=>m(k.target.value),className:"pl-9"})]}),e.jsxs(Oe,{value:h,onValueChange:f,children:[e.jsx(Ae,{className:"w-full sm:w-[200px]",children:e.jsx(Re,{placeholder:""})}),e.jsxs(De,{children:[e.jsx(te,{value:"all",children:""}),e.jsx(te,{value:"Group Management",children:""}),e.jsx(te,{value:"Entertainment & Interaction",children:""}),e.jsx(te,{value:"Utility Tools",children:""}),e.jsx(te,{value:"Content Generation",children:""}),e.jsx(te,{value:"Multimedia",children:""}),e.jsx(te,{value:"External Integration",children:""}),e.jsx(te,{value:"Data Analysis & Insights",children:""}),e.jsx(te,{value:"Other",children:""})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ft,{id:"compatible-only",checked:b,onCheckedChange:k=>j(k===!0)}),e.jsx("label",{htmlFor:"compatible-only",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer",children:""})]})]})}),e.jsx(Sa,{value:p,onValueChange:g,className:"w-full",children:e.jsxs(pa,{className:"grid w-full grid-cols-3",children:[e.jsxs(es,{value:"all",children:[" (",y.filter(k=>{if(!k.manifest)return!1;const ce=d===""||k.manifest.name?.toLowerCase().includes(d.toLowerCase())||k.manifest.description?.toLowerCase().includes(d.toLowerCase())||k.manifest.keywords&&k.manifest.keywords.some(fe=>fe.toLowerCase().includes(d.toLowerCase())),ue=h==="all"||k.manifest.categories&&k.manifest.categories.includes(h),ie=!b||!Y||pe(k);return ce&&ue&&ie}).length,")"]}),e.jsxs(es,{value:"installed",children:[" (",y.filter(k=>{if(!k.manifest)return!1;const ce=d===""||k.manifest.name?.toLowerCase().includes(d.toLowerCase())||k.manifest.description?.toLowerCase().includes(d.toLowerCase())||k.manifest.keywords&&k.manifest.keywords.some(fe=>fe.toLowerCase().includes(d.toLowerCase())),ue=h==="all"||k.manifest.categories&&k.manifest.categories.includes(h),ie=!b||!Y||pe(k);return k.installed&&ce&&ue&&ie}).length,")"]}),e.jsxs(es,{value:"updates",children:[" (",y.filter(k=>{if(!k.manifest)return!1;const ce=d===""||k.manifest.name?.toLowerCase().includes(d.toLowerCase())||k.manifest.description?.toLowerCase().includes(d.toLowerCase())||k.manifest.keywords&&k.manifest.keywords.some(fe=>fe.toLowerCase().includes(d.toLowerCase())),ue=h==="all"||k.manifest.categories&&k.manifest.categories.includes(h),ie=!b||!Y||pe(k);return k.installed&&ye(k)&&ce&&ue&&ie}).length,")"]})]})}),L&&L.stage==="loading"&&e.jsx($e,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(st,{className:"h-4 w-4 animate-spin"}),e.jsxs("span",{className:"text-sm font-medium",children:[L.operation==="fetch"&&"",L.operation==="install"&&`${L.plugin_id?`: ${L.plugin_id}`:""}`,L.operation==="uninstall"&&`${L.plugin_id?`: ${L.plugin_id}`:""}`,L.operation==="update"&&`${L.plugin_id?`: ${L.plugin_id}`:""}`]})]}),e.jsxs("span",{className:"text-sm font-medium",children:[L.progress,"%"]})]}),e.jsx(ni,{value:L.progress,className:"h-2"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:L.message}),L.operation==="fetch"&&L.total_plugins>0&&e.jsxs("div",{className:"text-xs text-muted-foreground text-center",children:[" ",L.loaded_plugins," / ",L.total_plugins," "]})]})}),L&&L.stage==="error"&&L.error&&e.jsx($e,{className:"border-destructive bg-destructive/10",children:e.jsx(ss,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(_a,{className:"h-5 w-5 text-destructive"}),e.jsxs("div",{children:[e.jsx(ts,{className:"text-lg text-destructive",children:""}),e.jsx(Ws,{className:"text-destructive/80",children:L.error})]})]})})}),T?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx(st,{className:"h-8 w-8 animate-spin text-muted-foreground"}),e.jsx("span",{className:"ml-3 text-muted-foreground",children:"..."})]}):U?e.jsx($e,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[e.jsx(_a,{className:"h-12 w-12 text-destructive mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:U}),e.jsx(_,{onClick:()=>window.location.reload(),children:""})]})}):we.length===0?e.jsx($e,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[e.jsx(Mt,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:d||h!=="all"?"":""})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:we.map(k=>e.jsxs($e,{className:"flex flex-col hover:shadow-lg transition-shadow h-full",children:[e.jsxs(ss,{children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx(ts,{className:"text-xl",children:k.manifest?.name||k.id}),e.jsxs("div",{className:"flex flex-col gap-1",children:[k.manifest?.categories&&k.manifest.categories[0]&&e.jsx(qe,{variant:"secondary",className:"text-xs whitespace-nowrap",children:Sp[k.manifest.categories[0]]||k.manifest.categories[0]}),_e(k)]})]}),e.jsx(Ws,{className:"line-clamp-2",children:k.manifest?.description||""})]}),e.jsx(fs,{className:"flex-1",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(nl,{className:"h-4 w-4"}),e.jsx("span",{children:(A[k.id]?.downloads??k.downloads??0).toLocaleString()})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ll,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),e.jsx("span",{children:(A[k.id]?.rating??k.rating??0).toFixed(1)})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[k.manifest?.keywords&&k.manifest.keywords.slice(0,3).map(ce=>e.jsx(qe,{variant:"outline",className:"text-xs",children:ce},ce)),k.manifest?.keywords&&k.manifest.keywords.length>3&&e.jsxs(qe,{variant:"outline",className:"text-xs",children:["+",k.manifest.keywords.length-3]})]}),e.jsxs("div",{className:"text-xs text-muted-foreground pt-2 border-t space-y-1",children:[e.jsxs("div",{children:["v",k.manifest?.version||"unknown","  ",k.manifest?.author?.name||"Unknown"]}),k.manifest?.host_application&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{children:":"}),e.jsxs("span",{className:"font-medium",children:[k.manifest.host_application.min_version,k.manifest.host_application.max_version?` - ${k.manifest.host_application.max_version}`:" - "]})]})]})]})}),e.jsx(Tg,{className:"pt-4",children:e.jsxs("div",{className:"flex items-center justify-end gap-2 w-full",children:[e.jsx(_,{variant:"outline",size:"sm",onClick:()=>r(k),children:""}),k.installed?ye(k)?e.jsxs(_,{size:"sm",disabled:!B?.installed,title:B?.installed?void 0:"Git ",onClick:()=>$(k),children:[e.jsx(Et,{className:"h-4 w-4 mr-1"}),""]}):e.jsxs(_,{variant:"destructive",size:"sm",disabled:!B?.installed,title:B?.installed?void 0:"Git ",onClick:()=>C(k),children:[e.jsx(Pe,{className:"h-4 w-4 mr-1"}),""]}):e.jsxs(_,{size:"sm",disabled:!B?.installed||L?.operation==="install"||Y!==null&&!pe(k),title:B?.installed?Y!==null&&!pe(k)?` ( ${k.manifest?.host_application?.min_version||""}${k.manifest?.host_application?.max_version?` - ${k.manifest.host_application.max_version}`:"+"} ${Y?.version})`:void 0:"Git ",onClick:()=>X(k),children:[e.jsx(nl,{className:"h-4 w-4 mr-1"}),L?.operation==="install"&&L?.plugin_id===k.id?"...":""]})]})})]},k.id))}),e.jsx(qs,{open:i!==null,onOpenChange:R,children:i&&i.manifest&&e.jsx(Rs,{className:"max-w-2xl max-h-[80vh] p-0 flex flex-col",children:e.jsx(Ke,{className:"flex-1 overflow-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsx(Ls,{children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"space-y-2 flex-1",children:[e.jsx(Us,{className:"text-2xl",children:i.manifest.name}),e.jsxs(Ks,{children:[": ",i.manifest.author?.name||"Unknown",i.manifest.author?.url&&e.jsx("a",{href:i.manifest.author.url,target:"_blank",rel:"noopener noreferrer",className:"ml-2 text-primary hover:underline",children:e.jsx(qc,{className:"h-3 w-3 inline"})})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[i.manifest.categories&&i.manifest.categories[0]&&e.jsx(qe,{variant:"secondary",children:Sp[i.manifest.categories[0]]||i.manifest.categories[0]}),_e(i)]})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(z_,{pluginId:i.id}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:""}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["v",i.manifest?.version||"unknown"]}),i.installed&&i.installed_version&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:[": v",i.installed_version]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:(A[i.id]?.downloads??i.downloads??0).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:""}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ll,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[(A[i.id]?.rating??i.rating??0).toFixed(1)," (",A[i.id]?.rating_count??i.review_count??0,")"]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:i.manifest.license||"Unknown"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("p",{className:"text-sm font-medium",children:""}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[i.manifest.host_application?.min_version||"",i.manifest.host_application?.max_version?` - ${i.manifest.host_application.max_version}`:" - "]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:""}),e.jsx("div",{className:"flex flex-wrap gap-2",children:i.manifest.keywords&&i.manifest.keywords.map(k=>e.jsx(qe,{variant:"outline",children:k},k))})]}),i.detailed_description&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-line",children:i.detailed_description})]}),!i.detailed_description&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:i.manifest.description||""})]}),e.jsxs("div",{className:"space-y-2",children:[i.manifest.homepage_url&&e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:": "}),e.jsx("a",{href:i.manifest.homepage_url,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:i.manifest.homepage_url})]}),i.manifest.repository_url&&e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:": "}),e.jsx("a",{href:i.manifest.repository_url,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:i.manifest.repository_url})]})]})]}),e.jsxs(tt,{children:[i.manifest.homepage_url&&e.jsxs(_,{onClick:()=>window.open(i.manifest.homepage_url,"_blank"),children:[e.jsx(qc,{className:"h-4 w-4 mr-2"}),""]}),i.manifest.repository_url&&e.jsxs(_,{variant:"outline",onClick:()=>window.open(i.manifest.repository_url,"_blank"),children:[e.jsx(qc,{className:"h-4 w-4 mr-2"}),""]})]})]})})})})]})})}const Fu=xN,Vu=fN,$u=pN;function A_({field:n,value:i,onChange:r}){const[d,m]=u.useState(!1);switch(n.ui_type){case"switch":return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(S,{children:n.label}),n.hint&&e.jsx("p",{className:"text-xs text-muted-foreground",children:n.hint})]}),e.jsx(Ge,{checked:!!i,onCheckedChange:r,disabled:n.disabled})]});case"number":return e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{children:n.label}),e.jsx(ne,{type:"number",value:i??n.default,onChange:h=>r(parseFloat(h.target.value)||0),min:n.min,max:n.max,step:n.step??1,placeholder:n.placeholder,disabled:n.disabled}),n.hint&&e.jsx("p",{className:"text-xs text-muted-foreground",children:n.hint})]});case"slider":return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(S,{children:n.label}),e.jsx("span",{className:"text-sm text-muted-foreground",children:i??n.default})]}),e.jsx(fa,{value:[i??n.default],onValueChange:h=>r(h[0]),min:n.min??0,max:n.max??100,step:n.step??1,disabled:n.disabled}),n.hint&&e.jsx("p",{className:"text-xs text-muted-foreground",children:n.hint})]});case"select":return e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{children:n.label}),e.jsxs(Oe,{value:String(i??n.default),onValueChange:r,disabled:n.disabled,children:[e.jsx(Ae,{children:e.jsx(Re,{placeholder:n.placeholder??""})}),e.jsx(De,{children:n.choices?.map(h=>e.jsx(te,{value:String(h),children:String(h)},String(h)))})]}),n.hint&&e.jsx("p",{className:"text-xs text-muted-foreground",children:n.hint})]});case"textarea":return e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{children:n.label}),e.jsx(Ms,{value:i??n.default,onChange:h=>r(h.target.value),placeholder:n.placeholder,rows:n.rows??3,disabled:n.disabled}),n.hint&&e.jsx("p",{className:"text-xs text-muted-foreground",children:n.hint})]});case"password":return e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{children:n.label}),e.jsxs("div",{className:"relative",children:[e.jsx(ne,{type:d?"text":"password",value:i??"",onChange:h=>r(h.target.value),placeholder:n.placeholder,disabled:n.disabled,className:"pr-10"}),e.jsx(_,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full px-3",onClick:()=>m(!d),children:d?e.jsx(or,{className:"h-4 w-4"}):e.jsx(Ot,{className:"h-4 w-4"})})]}),n.hint&&e.jsx("p",{className:"text-xs text-muted-foreground",children:n.hint})]});case"text":default:return e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{children:n.label}),e.jsx(ne,{type:"text",value:i??n.default??"",onChange:h=>r(h.target.value),placeholder:n.placeholder,maxLength:n.max_length,disabled:n.disabled}),n.hint&&e.jsx("p",{className:"text-xs text-muted-foreground",children:n.hint})]})}}function Cp({section:n,config:i,onChange:r}){const[d,m]=u.useState(!n.collapsed),h=Object.entries(n.fields).filter(([,f])=>!f.hidden).sort(([,f],[,p])=>f.order-p.order);return e.jsx(Fu,{open:d,onOpenChange:m,children:e.jsxs($e,{children:[e.jsx(Vu,{asChild:!0,children:e.jsxs(ss,{className:"cursor-pointer hover:bg-muted/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[d?e.jsx(Ol,{className:"h-4 w-4 text-muted-foreground"}):e.jsx(Ua,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(ts,{className:"text-lg",children:n.title})]}),e.jsxs(qe,{variant:"secondary",className:"text-xs",children:[h.length," "]})]}),n.description&&e.jsx(Ws,{className:"ml-6",children:n.description})]})}),e.jsx($u,{children:e.jsx(fs,{className:"space-y-4 pt-0",children:h.map(([f,p])=>e.jsx(A_,{field:p,value:i[n.name]?.[f],onChange:g=>r(n.name,f,g),sectionName:n.name},f))})})]})})}function D_({plugin:n,onBack:i}){const{toast:r}=Bs(),[d,m]=u.useState(null),[h,f]=u.useState({}),[p,g]=u.useState({}),[b,j]=u.useState(!0),[y,N]=u.useState(!1),[T,w]=u.useState(!1),[U,O]=u.useState(!1),B=u.useCallback(async()=>{j(!0);try{const[A,W]=await Promise.all([b_(n.id),N_(n.id)]);m(A),f(W),g(JSON.parse(JSON.stringify(W)))}catch(A){r({title:"",description:A instanceof Error?A.message:"",variant:"destructive"})}finally{j(!1)}},[n.id,r]);u.useEffect(()=>{B()},[B]),u.useEffect(()=>{w(JSON.stringify(h)!==JSON.stringify(p))},[h,p]);const I=(A,W,xe)=>{f(be=>({...be,[A]:{...be[A]||{},[W]:xe}}))},L=async()=>{N(!0);try{await y_(n.id,h),g(JSON.parse(JSON.stringify(h))),r({title:"",description:""})}catch(A){r({title:"",description:A instanceof Error?A.message:"",variant:"destructive"})}finally{N(!1)}},M=async()=>{try{await w_(n.id),r({title:"",description:""}),O(!1),B()}catch(A){r({title:"",description:A instanceof Error?A.message:"",variant:"destructive"})}},Y=async()=>{try{const A=await __(n.id);r({title:A.message,description:A.note}),B()}catch(A){r({title:"",description:A instanceof Error?A.message:"",variant:"destructive"})}};if(b)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(st,{className:"h-8 w-8 animate-spin text-muted-foreground"})});if(!d)return e.jsxs("div",{className:"flex flex-col items-center justify-center h-64 space-y-4",children:[e.jsx(zt,{className:"h-12 w-12 text-muted-foreground"}),e.jsx("p",{className:"text-muted-foreground",children:""}),e.jsxs(_,{onClick:i,variant:"outline",children:[e.jsx(Wn,{className:"h-4 w-4 mr-2"}),""]})]});const Q=Object.values(d.sections).sort((A,W)=>A.order-W.order),z=h.plugin?.enabled!==!1;return e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(_,{variant:"ghost",size:"icon",onClick:i,children:e.jsx(Wn,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:d.plugin_info.name||n.manifest.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(qe,{variant:z?"default":"secondary",children:z?"":""}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["v",d.plugin_info.version||n.manifest.version]})]})]})]}),e.jsxs("div",{className:"flex gap-2 ml-10 sm:ml-0",children:[e.jsxs(_,{variant:"outline",size:"sm",onClick:Y,children:[e.jsx(pr,{className:"h-4 w-4 mr-2"}),z?"":""]}),e.jsxs(_,{variant:"outline",size:"sm",onClick:()=>O(!0),children:[e.jsx(Vc,{className:"h-4 w-4 mr-2"}),""]}),e.jsxs(_,{size:"sm",onClick:L,disabled:!T||y,children:[y?e.jsx(st,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(gr,{className:"h-4 w-4 mr-2"}),""]})]})]}),T&&e.jsx($e,{className:"border-orange-200 bg-orange-50 dark:bg-orange-950/20 dark:border-orange-900",children:e.jsx(fs,{className:"py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Oa,{className:"h-4 w-4 text-orange-600"}),e.jsx("p",{className:"text-sm text-orange-800 dark:text-orange-200",children:""})]})})}),d.layout.type==="tabs"&&d.layout.tabs.length>0?e.jsxs(Sa,{defaultValue:d.layout.tabs[0]?.id,children:[e.jsx(pa,{children:d.layout.tabs.map(A=>e.jsxs(es,{value:A.id,children:[A.title,A.badge&&e.jsx(qe,{variant:"secondary",className:"ml-2 text-xs",children:A.badge})]},A.id))}),d.layout.tabs.map(A=>e.jsx(_s,{value:A.id,className:"space-y-4 mt-4",children:A.sections.map(W=>{const xe=d.sections[W];return xe?e.jsx(Cp,{section:xe,config:h,onChange:I},W):null})},A.id))]}):e.jsx("div",{className:"space-y-4",children:Q.map(A=>e.jsx(Cp,{section:A,config:h,onChange:I},A.name))}),e.jsx(qs,{open:U,onOpenChange:O,children:e.jsxs(Rs,{children:[e.jsxs(Ls,{children:[e.jsx(Us,{children:""}),e.jsx(Ks,{children:""})]}),e.jsxs(tt,{children:[e.jsx(_,{variant:"outline",onClick:()=>O(!1),children:""}),e.jsx(_,{variant:"destructive",onClick:M,children:""})]})]})})]})}function O_(){const{toast:n}=Bs(),[i,r]=u.useState([]),[d,m]=u.useState(!0),[h,f]=u.useState(""),[p,g]=u.useState(null),b=async()=>{m(!0);try{const T=await nr();r(T)}catch(T){n({title:"",description:T instanceof Error?T.message:"",variant:"destructive"})}finally{m(!1)}};u.useEffect(()=>{b()},[]);const j=i.filter(T=>{const w=h.toLowerCase();return T.id.toLowerCase().includes(w)||T.manifest.name.toLowerCase().includes(w)||T.manifest.description?.toLowerCase().includes(w)}),y=i.length,N=0;return p?e.jsx(Ke,{className:"h-full",children:e.jsx("div",{className:"p-4 sm:p-6",children:e.jsx(D_,{plugin:p,onBack:()=>g(null)})})}):e.jsx(Ke,{className:"h-full",children:e.jsxs("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:""}),e.jsx("p",{className:"text-muted-foreground mt-1 sm:mt-2 text-sm sm:text-base",children:""})]}),e.jsxs(_,{variant:"outline",size:"sm",onClick:b,children:[e.jsx(Et,{className:`h-4 w-4 mr-2 ${d?"animate-spin":""}`}),""]})]}),e.jsxs("div",{className:"grid gap-4 grid-cols-1 xs:grid-cols-2 lg:grid-cols-3",children:[e.jsxs($e,{children:[e.jsxs(ss,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ts,{className:"text-sm font-medium",children:""}),e.jsx(tn,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(fs,{children:[e.jsx("div",{className:"text-2xl font-bold",children:i.length}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:d?"...":""})]})]}),e.jsxs($e,{children:[e.jsxs(ss,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ts,{className:"text-sm font-medium",children:""}),e.jsx(ta,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(fs,{children:[e.jsx("div",{className:"text-2xl font-bold",children:y}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:""})]})]}),e.jsxs($e,{children:[e.jsxs(ss,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ts,{className:"text-sm font-medium",children:""}),e.jsx(zt,{className:"h-4 w-4 text-orange-600"})]}),e.jsxs(fs,{children:[e.jsx("div",{className:"text-2xl font-bold",children:N}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:""})]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Mt,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(ne,{placeholder:"...",value:h,onChange:T=>f(T.target.value),className:"pl-9"})]}),e.jsxs($e,{children:[e.jsxs(ss,{children:[e.jsx(ts,{children:""}),e.jsx(Ws,{children:""})]}),e.jsx(fs,{children:d?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(st,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):j.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 space-y-4",children:[e.jsx(tn,{className:"h-16 w-16 text-muted-foreground/50"}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("p",{className:"text-lg font-medium text-muted-foreground",children:h?"":""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:h?"":""})]})]}):e.jsx("div",{className:"space-y-2",children:j.map(T=>e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border hover:bg-muted/50 cursor-pointer transition-colors",onClick:()=>g(T),children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsx("div",{className:"h-10 w-10 rounded-lg bg-primary/10 flex items-center justify-center flex-shrink-0",children:e.jsx(tn,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-medium truncate",children:T.manifest.name}),e.jsxs(qe,{variant:"secondary",className:"text-xs flex-shrink-0",children:["v",T.manifest.version]})]}),e.jsx("p",{className:"text-sm text-muted-foreground truncate",children:T.manifest.description||""})]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e.jsx(_,{variant:"ghost",size:"sm",children:e.jsx(ti,{className:"h-4 w-4"})}),e.jsx(Ua,{className:"h-4 w-4 text-muted-foreground"})]})]},T.id))})})]})]})})}function R_(){const n=ja(),{toast:i}=Bs(),[r,d]=u.useState([]),[m,h]=u.useState(!0),[f,p]=u.useState(null),[g,b]=u.useState(null),[j,y]=u.useState(!1),[N,T]=u.useState(!1),[w,U]=u.useState({id:"",name:"",raw_prefix:"",clone_prefix:"",enabled:!0,priority:1}),O=u.useCallback(async()=>{try{h(!0),p(null);const z=localStorage.getItem("access-token"),A=await fetch("/api/webui/plugins/mirrors",{headers:{Authorization:`Bearer ${z}`}});if(!A.ok)throw new Error("");const W=await A.json();d(W.mirrors||[])}catch(z){const A=z instanceof Error?z.message:"";p(A),i({title:"",description:A,variant:"destructive"})}finally{h(!1)}},[i]);u.useEffect(()=>{O()},[O]);const B=async()=>{try{const z=localStorage.getItem("access-token"),A=await fetch("/api/webui/plugins/mirrors",{method:"POST",headers:{Authorization:`Bearer ${z}`,"Content-Type":"application/json"},body:JSON.stringify(w)});if(!A.ok){const W=await A.json();throw new Error(W.detail||"")}i({title:"",description:""}),y(!1),U({id:"",name:"",raw_prefix:"",clone_prefix:"",enabled:!0,priority:1}),O()}catch(z){i({title:"",description:z instanceof Error?z.message:"",variant:"destructive"})}},I=async()=>{if(g)try{const z=localStorage.getItem("access-token");if(!(await fetch(`/api/webui/plugins/mirrors/${g.id}`,{method:"PUT",headers:{Authorization:`Bearer ${z}`,"Content-Type":"application/json"},body:JSON.stringify({name:w.name,raw_prefix:w.raw_prefix,clone_prefix:w.clone_prefix,enabled:w.enabled,priority:w.priority})})).ok)throw new Error("");i({title:"",description:""}),T(!1),b(null),O()}catch(z){i({title:"",description:z instanceof Error?z.message:"",variant:"destructive"})}},L=async z=>{if(confirm(""))try{const A=localStorage.getItem("access-token");if(!(await fetch(`/api/webui/plugins/mirrors/${z}`,{method:"DELETE",headers:{Authorization:`Bearer ${A}`}})).ok)throw new Error("");i({title:"",description:""}),O()}catch(A){i({title:"",description:A instanceof Error?A.message:"",variant:"destructive"})}},M=async z=>{try{const A=localStorage.getItem("access-token");if(!(await fetch(`/api/webui/plugins/mirrors/${z.id}`,{method:"PUT",headers:{Authorization:`Bearer ${A}`,"Content-Type":"application/json"},body:JSON.stringify({enabled:!z.enabled})})).ok)throw new Error("");O()}catch(A){i({title:"",description:A instanceof Error?A.message:"",variant:"destructive"})}},Y=z=>{b(z),U({id:z.id,name:z.name,raw_prefix:z.raw_prefix,clone_prefix:z.clone_prefix,enabled:z.enabled,priority:z.priority}),T(!0)},Q=async(z,A)=>{const W=A==="up"?z.priority-1:z.priority+1;if(!(W<1))try{const xe=localStorage.getItem("access-token");if(!(await fetch(`/api/webui/plugins/mirrors/${z.id}`,{method:"PUT",headers:{Authorization:`Bearer ${xe}`,"Content-Type":"application/json"},body:JSON.stringify({priority:W})})).ok)throw new Error("");O()}catch(xe){i({title:"",description:xe instanceof Error?xe.message:"",variant:"destructive"})}};return e.jsx(Ke,{className:"h-full",children:e.jsxs("div",{className:"space-y-6 p-4 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(_,{variant:"ghost",size:"icon",onClick:()=>n({to:"/plugins"}),children:e.jsx(Wn,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:" Git "})]})]}),e.jsxs(_,{onClick:()=>y(!0),children:[e.jsx(rt,{className:"h-4 w-4 mr-2"}),""]})]}),m?e.jsx($e,{className:"p-6",children:e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(st,{className:"h-8 w-8 animate-spin text-primary"})})}):f?e.jsx($e,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[e.jsx(_a,{className:"h-12 w-12 text-destructive mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:f}),e.jsx(_,{onClick:O,children:""})]})}):e.jsxs($e,{children:[e.jsx("div",{className:"hidden md:block",children:e.jsxs(nn,{children:[e.jsx(rn,{children:e.jsxs(ct,{children:[e.jsx(Xe,{children:""}),e.jsx(Xe,{children:""}),e.jsx(Xe,{children:"ID"}),e.jsx(Xe,{children:""}),e.jsx(Xe,{className:"text-right",children:""})]})}),e.jsx(cn,{children:r.map(z=>e.jsxs(ct,{children:[e.jsx(He,{children:e.jsx(Ge,{checked:z.enabled,onCheckedChange:()=>M(z)})}),e.jsx(He,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:z.name}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Raw: ",z.raw_prefix]})]})}),e.jsx(He,{children:e.jsx(qe,{variant:"outline",children:z.id})}),e.jsx(He,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-mono",children:z.priority}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx(_,{variant:"ghost",size:"icon",className:"h-5 w-5",onClick:()=>Q(z,"up"),disabled:z.priority===1,children:e.jsx(ur,{className:"h-3 w-3"})}),e.jsx(_,{variant:"ghost",size:"icon",className:"h-5 w-5",onClick:()=>Q(z,"down"),children:e.jsx(Ol,{className:"h-3 w-3"})})]})]})}),e.jsx(He,{className:"text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(_,{variant:"ghost",size:"icon",onClick:()=>Y(z),children:e.jsx(an,{className:"h-4 w-4"})}),e.jsx(_,{variant:"ghost",size:"icon",onClick:()=>L(z.id),children:e.jsx(Pe,{className:"h-4 w-4 text-destructive"})})]})})]},z.id))})]})}),e.jsx("div",{className:"md:hidden p-4 space-y-4",children:r.map(z=>e.jsx($e,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-semibold",children:z.name}),z.enabled&&e.jsx(qe,{variant:"default",className:"text-xs",children:""})]}),e.jsx(qe,{variant:"outline",className:"mt-1 text-xs",children:z.id})]}),e.jsx(Ge,{checked:z.enabled,onCheckedChange:()=>M(z)})]}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{className:"text-muted-foreground",children:[e.jsx("span",{className:"font-medium",children:"Raw: "}),e.jsx("span",{className:"break-all",children:z.raw_prefix})]}),e.jsxs("div",{className:"text-muted-foreground",children:[e.jsx("span",{className:"font-medium",children:": "}),e.jsx("span",{className:"font-mono",children:z.priority})]})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t",children:[e.jsxs(_,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>Y(z),children:[e.jsx(an,{className:"h-4 w-4 mr-1"}),""]}),e.jsx(_,{variant:"outline",size:"sm",onClick:()=>Q(z,"up"),disabled:z.priority===1,children:e.jsx(ur,{className:"h-4 w-4"})}),e.jsx(_,{variant:"outline",size:"sm",onClick:()=>Q(z,"down"),children:e.jsx(Ol,{className:"h-4 w-4"})}),e.jsx(_,{variant:"destructive",size:"sm",onClick:()=>L(z.id),children:e.jsx(Pe,{className:"h-4 w-4"})})]})]})},z.id))})]}),e.jsx(qs,{open:j,onOpenChange:y,children:e.jsxs(Rs,{className:"max-w-lg",children:[e.jsxs(Ls,{children:[e.jsx(Us,{children:""}),e.jsx(Ks,{children:" Git "})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"add-id",children:" ID *"}),e.jsx(ne,{id:"add-id",placeholder:": my-mirror",value:w.id,onChange:z=>U({...w,id:z.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"add-name",children:" *"}),e.jsx(ne,{id:"add-name",placeholder:": ",value:w.name,onChange:z=>U({...w,name:z.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"add-raw",children:"Raw  *"}),e.jsx(ne,{id:"add-raw",placeholder:"https://example.com/raw",value:w.raw_prefix,onChange:z=>U({...w,raw_prefix:z.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"add-clone",children:" *"}),e.jsx(ne,{id:"add-clone",placeholder:"https://example.com/clone",value:w.clone_prefix,onChange:z=>U({...w,clone_prefix:z.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"add-priority",children:""}),e.jsx(ne,{id:"add-priority",type:"number",min:"1",value:w.priority,onChange:z=>U({...w,priority:parseInt(z.target.value)||1})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{id:"add-enabled",checked:w.enabled,onCheckedChange:z=>U({...w,enabled:z})}),e.jsx(S,{htmlFor:"add-enabled",children:""})]})]}),e.jsxs(tt,{children:[e.jsx(_,{variant:"outline",onClick:()=>y(!1),children:""}),e.jsx(_,{onClick:B,children:""})]})]})}),e.jsx(qs,{open:N,onOpenChange:T,children:e.jsxs(Rs,{className:"max-w-lg",children:[e.jsxs(Ls,{children:[e.jsx(Us,{children:""}),e.jsx(Ks,{children:""})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{children:" ID"}),e.jsx(ne,{value:w.id,disabled:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"edit-name",children:" *"}),e.jsx(ne,{id:"edit-name",value:w.name,onChange:z=>U({...w,name:z.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"edit-raw",children:"Raw  *"}),e.jsx(ne,{id:"edit-raw",value:w.raw_prefix,onChange:z=>U({...w,raw_prefix:z.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"edit-clone",children:" *"}),e.jsx(ne,{id:"edit-clone",value:w.clone_prefix,onChange:z=>U({...w,clone_prefix:z.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"edit-priority",children:""}),e.jsx(ne,{id:"edit-priority",type:"number",min:"1",value:w.priority,onChange:z=>U({...w,priority:parseInt(z.target.value)||1})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{id:"edit-enabled",checked:w.enabled,onCheckedChange:z=>U({...w,enabled:z})}),e.jsx(S,{htmlFor:"edit-enabled",children:""})]})]}),e.jsxs(tt,{children:[e.jsx(_,{variant:"outline",onClick:()=>T(!1),children:""}),e.jsx(_,{onClick:I,children:""})]})]})})]})})}const ir=u.forwardRef(({className:n,...i},r)=>e.jsx(Qp,{ref:r,className:q("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",n),...i}));ir.displayName=Qp.displayName;const L_=u.forwardRef(({className:n,...i},r)=>e.jsx(Ip,{ref:r,className:q("aspect-square h-full w-full",n),...i}));L_.displayName=Ip.displayName;const rr=u.forwardRef(({className:n,...i},r)=>e.jsx(Yp,{ref:r,className:q("flex h-full w-full items-center justify-center rounded-full bg-muted",n),...i}));rr.displayName=Yp.displayName;function U_(){return"webui_"+Math.random().toString(36).substr(2,9)+"_"+Date.now().toString(36)}function B_(){const n="maibot_webui_user_id";let i=localStorage.getItem(n);return i||(i=U_(),localStorage.setItem(n,i)),i}function H_(){return localStorage.getItem("maibot_webui_user_name")||"WebUI"}function q_(n){localStorage.setItem("maibot_webui_user_name",n)}const Wg="maibot_webui_virtual_tabs";function G_(){try{const n=localStorage.getItem(Wg);if(n)return JSON.parse(n)}catch(n){console.error("[Chat] :",n)}return[]}function kp(n){try{localStorage.setItem(Wg,JSON.stringify(n))}catch(i){console.error("[Chat] :",i)}}function F_(){const n={id:"webui-default",type:"webui",label:"WebUI",messages:[],isConnected:!1,isTyping:!1,sessionInfo:{}},i=()=>{const Be=G_().map(ze=>{const Ie=ze.virtualConfig;return!Ie.groupId&&Ie.platform&&Ie.userId&&(Ie.groupId=`webui_virtual_group_${Ie.platform}_${Ie.userId}`),{id:ze.id,type:"virtual",label:ze.label,virtualConfig:Ie,messages:[],isConnected:!1,isTyping:!1,sessionInfo:{}}});return[n,...Be]},[r,d]=u.useState(i),[m,h]=u.useState("webui-default"),f=r.find(G=>G.id===m)||r[0],[p,g]=u.useState(""),[b,j]=u.useState(!1),[y,N]=u.useState(!0),[T,w]=u.useState(H_()),[U,O]=u.useState(!1),[B,I]=u.useState(""),[L,M]=u.useState(!1),[Y,Q]=u.useState([]),[z,A]=u.useState([]),[W,xe]=u.useState(!1),[be,_e]=u.useState(!1),[pe,ye]=u.useState(""),[we,R]=u.useState({platform:"",personId:"",userId:"",userName:"",groupName:"",groupId:""}),X=u.useRef(B_()),C=u.useRef(new Map),$=u.useRef(null),k=u.useRef(new Map),ce=u.useRef(0),ue=u.useRef(new Map),{toast:ie}=Bs(),fe=G=>(ce.current+=1,`${G}-${Date.now()}-${ce.current}-${Math.random().toString(36).substr(2,9)}`),Ne=u.useCallback((G,Be)=>{d(ze=>ze.map(Ie=>Ie.id===G?{...Ie,...Be}:Ie))},[]),me=u.useCallback((G,Be)=>{d(ze=>ze.map(Ie=>Ie.id===G?{...Ie,messages:[...Ie.messages,Be]}:Ie))},[]),ee=u.useCallback(()=>{$.current?.scrollIntoView({behavior:"smooth"})},[]);u.useEffect(()=>{ee()},[f?.messages,ee]);const ae=u.useCallback(async()=>{xe(!0);try{const G=await Se("/api/chat/platforms");if(console.log("[Chat] :",G.status,G.headers.get("content-type")),G.ok){const Be=G.headers.get("content-type");if(Be&&Be.includes("application/json")){const ze=await G.json();console.log("[Chat] :",ze),Q(ze.platforms||[])}else{const ze=await G.text();console.error("[Chat] :  JSON :",ze.substring(0,200)),ie({title:"",description:" MaiBot ",variant:"destructive"})}}else console.error("[Chat] : HTTP",G.status),ie({title:"",description:`: ${G.status}`,variant:"destructive"})}catch(G){console.error("[Chat] :",G),ie({title:"",description:"",variant:"destructive"})}finally{xe(!1)}},[ie]),V=u.useCallback(async(G,Be)=>{_e(!0);try{const ze=new URLSearchParams;G&&ze.append("platform",G),Be&&ze.append("search",Be),ze.append("limit","50");const Ie=await Se(`/api/chat/persons?${ze.toString()}`);if(Ie.ok){const ks=Ie.headers.get("content-type");if(ks&&ks.includes("application/json")){const Ye=await Ie.json();A(Ye.persons||[])}else console.error("[Chat] :  JSON ")}}catch(ze){console.error("[Chat] :",ze)}finally{_e(!1)}},[]);u.useEffect(()=>{we.platform&&V(we.platform,pe)},[we.platform,pe,V]);const P=u.useCallback(async(G,Be)=>{N(!0);try{const ze=new URLSearchParams;ze.append("user_id",X.current),ze.append("limit","50"),Be&&ze.append("group_id",Be);const Ie=`/api/chat/history?${ze.toString()}`;console.log("[Chat] :",Ie);const ks=await Se(Ie);if(ks.ok){const Ye=await ks.text();try{const dt=JSON.parse(Ye);if(dt.messages&&dt.messages.length>0){const gs=dt.messages.map(ve=>({id:ve.id,type:ve.type,content:ve.content,timestamp:ve.timestamp,sender:{name:ve.sender_name||(ve.is_bot?"":"WebUI"),user_id:ve.user_id,is_bot:ve.is_bot}}));Ne(G,{messages:gs});const Is=ue.current.get(G)||new Set;gs.forEach(ve=>{if(ve.type==="bot"){const We=`bot-${ve.content}-${Math.floor(ve.timestamp*1e3)}`;Is.add(We)}}),ue.current.set(G,Is)}}catch(dt){console.error("[Chat] JSON :",dt)}}}catch(ze){console.error("[Chat] :",ze)}finally{N(!1)}},[Ne]),Ce=u.useCallback((G,Be,ze)=>{const Ie=C.current.get(G);if(Ie?.readyState===WebSocket.OPEN||Ie?.readyState===WebSocket.CONNECTING){console.log(`[Tab ${G}] WebSocket `);return}j(!0);const ks=window.location.protocol==="https:"?"wss:":"ws:",Ye=new URLSearchParams;Be==="virtual"&&ze?(Ye.append("user_id",ze.userId),Ye.append("user_name",ze.userName),Ye.append("platform",ze.platform),Ye.append("person_id",ze.personId),Ye.append("group_name",ze.groupName||"WebUI"),ze.groupId&&Ye.append("group_id",ze.groupId)):(Ye.append("user_id",X.current),Ye.append("user_name",T));const dt=`${ks}//${window.location.host}/api/chat/ws?${Ye.toString()}`;console.log(`[Tab ${G}]  WebSocket:`,dt);try{const gs=new WebSocket(dt);C.current.set(G,gs),gs.onopen=()=>{Ne(G,{isConnected:!0}),j(!1),console.log(`[Tab ${G}] WebSocket `)},gs.onmessage=Is=>{try{const ve=JSON.parse(Is.data);switch(ve.type){case"session_info":Ne(G,{sessionInfo:{session_id:ve.session_id,user_id:ve.user_id,user_name:ve.user_name,bot_name:ve.bot_name}});break;case"system":me(G,{id:fe("sys"),type:"system",content:ve.content||"",timestamp:ve.timestamp||Date.now()/1e3});break;case"user_message":{const We=ve.sender?.user_id,vs=Be==="virtual"&&ze?ze.userId:X.current;if(We===vs)break;me(G,{id:ve.message_id||fe("user"),type:"user",content:ve.content||"",timestamp:ve.timestamp||Date.now()/1e3,sender:ve.sender});break}case"bot_message":{Ne(G,{isTyping:!1});const We=ue.current.get(G)||new Set,vs=`bot-${ve.content}-${Math.floor((ve.timestamp||0)*1e3)}`;if(We.has(vs))break;if(We.add(vs),ue.current.set(G,We),We.size>100){const At=We.values().next().value;At&&We.delete(At)}d(At=>At.map(lt=>{if(lt.id!==G)return lt;const js=lt.messages.filter(Ys=>Ys.type!=="thinking");return{...lt,messages:[...js,{id:fe("bot"),type:"bot",content:ve.content||"",timestamp:ve.timestamp||Date.now()/1e3,sender:ve.sender}]}}));break}case"typing":Ne(G,{isTyping:ve.is_typing||!1});break;case"error":d(We=>We.map(vs=>{if(vs.id!==G)return vs;const At=vs.messages.filter(lt=>lt.type!=="thinking");return{...vs,messages:[...At,{id:fe("error"),type:"error",content:ve.content||"",timestamp:ve.timestamp||Date.now()/1e3}]}})),ie({title:"",description:ve.content,variant:"destructive"});break;case"pong":break;case"history":{const We=ve.messages||[];if(We.length>0){const vs=ue.current.get(G)||new Set,At=We.map(lt=>{const js=lt.is_bot||!1,Ys=lt.id||fe(js?"bot":"user"),aa=`${js?"bot":"user"}-${lt.content}-${Math.floor(lt.timestamp*1e3)}`;return vs.add(aa),{id:Ys,type:js?"bot":"user",content:lt.content,timestamp:lt.timestamp,sender:{name:lt.sender_name||(js?"":""),user_id:lt.sender_id,is_bot:js}}});ue.current.set(G,vs),Ne(G,{messages:At}),console.log(`[Tab ${G}]  ${At.length} `)}break}default:console.log(":",ve.type)}}catch(ve){console.error(":",ve)}},gs.onclose=()=>{Ne(G,{isConnected:!1}),j(!1),C.current.delete(G),console.log(`[Tab ${G}] WebSocket `);const Is=k.current.get(G);Is&&clearTimeout(Is);const ve=window.setTimeout(()=>{if(!Le.current){const We=r.find(vs=>vs.id===G);We&&Ce(G,We.type,We.virtualConfig)}},5e3);k.current.set(G,ve)},gs.onerror=Is=>{console.error(`[Tab ${G}] WebSocket :`,Is),j(!1)}}catch(gs){console.error(`[Tab ${G}]  WebSocket :`,gs),j(!1)}},[T,Ne,me,ie,r]),Le=u.useRef(!1);u.useEffect(()=>{Le.current=!1;const G=C.current,Be=k.current,ze=ue.current;P("webui-default");const Ie=setTimeout(()=>{Le.current||(Ce("webui-default","webui"),r.forEach(Ye=>{Ye.type==="virtual"&&Ye.virtualConfig&&(ze.set(Ye.id,new Set),setTimeout(()=>{Le.current||Ce(Ye.id,"virtual",Ye.virtualConfig)},200))}))},100),ks=setInterval(()=>{G.forEach(Ye=>{Ye.readyState===WebSocket.OPEN&&Ye.send(JSON.stringify({type:"ping"}))})},3e4);return()=>{Le.current=!0,clearTimeout(Ie),clearInterval(ks),Be.forEach(Ye=>{clearTimeout(Ye)}),Be.clear(),G.forEach(Ye=>{Ye.close()}),G.clear()}},[]);const ge=u.useCallback(()=>{const G=C.current.get(m);if(!p.trim()||!G||G.readyState!==WebSocket.OPEN)return;const Be=f?.type==="virtual"&&f.virtualConfig?.userName||T,ze=p.trim(),Ie=Date.now()/1e3;G.send(JSON.stringify({type:"message",content:ze,user_name:Be}));const ks={id:fe("user"),type:"user",content:ze,timestamp:Ie,sender:{name:Be,is_bot:!1}};me(m,ks);const Ye={id:fe("thinking"),type:"thinking",content:"",timestamp:Ie+.001,sender:{name:f?.sessionInfo.bot_name||"",is_bot:!0}};me(m,Ye),g("")},[p,T,m,f,me]),Me=G=>{G.key==="Enter"&&!G.shiftKey&&(G.preventDefault(),ge())},$s=()=>{I(T),O(!0)},gt=()=>{const G=B.trim()||"WebUI";w(G),q_(G),O(!1);const Be=C.current.get(m);Be?.readyState===WebSocket.OPEN&&Be.send(JSON.stringify({type:"update_nickname",user_name:G}))},oe=()=>{I(""),O(!1)},Fe=G=>new Date(G*1e3).toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"}),Qe=()=>{const G=C.current.get(m);G&&(G.close(),C.current.delete(m)),Ce(m,f?.type||"webui",f?.virtualConfig)},Qs=()=>{R({platform:"",personId:"",userId:"",userName:"",groupName:"",groupId:""}),ye(""),ae(),M(!0)},Hs=()=>{if(!we.platform||!we.personId){ie({title:"",description:"",variant:"destructive"});return}const G=`webui_virtual_group_${we.platform}_${we.userId}`,Be=`virtual-${we.platform}-${we.userId}-${Date.now()}`,ze=we.userName||we.userId,Ie={id:Be,type:"virtual",label:ze,virtualConfig:{...we,groupId:G},messages:[],isConnected:!1,isTyping:!1,sessionInfo:{}};d(ks=>{const Ye=[...ks,Ie],dt=Ye.filter(gs=>gs.type==="virtual"&&gs.virtualConfig).map(gs=>({id:gs.id,label:gs.label,virtualConfig:gs.virtualConfig,createdAt:Date.now()}));return kp(dt),Ye}),h(Be),M(!1),ue.current.set(Be,new Set),setTimeout(()=>{Ce(Be,"virtual",we)},100),ie({title:"",description:` ${ze} `})},bt=(G,Be)=>{if(Be?.stopPropagation(),G==="webui-default")return;const ze=C.current.get(G);ze&&(ze.close(),C.current.delete(G));const Ie=k.current.get(G);Ie&&(clearTimeout(Ie),k.current.delete(G)),ue.current.delete(G),d(ks=>{const Ye=ks.filter(gs=>gs.id!==G),dt=Ye.filter(gs=>gs.type==="virtual"&&gs.virtualConfig).map(gs=>({id:gs.id,label:gs.label,virtualConfig:gs.virtualConfig,createdAt:Date.now()}));return kp(dt),Ye}),m===G&&h("webui-default")},ot=G=>{h(G)},Ds=G=>{R(Be=>({...Be,personId:G.person_id,userId:G.user_id,userName:G.nickname||G.person_name}))};return e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsx(qs,{open:L,onOpenChange:M,children:e.jsxs(Rs,{className:"sm:max-w-[500px] max-h-[85vh] overflow-hidden flex flex-col",children:[e.jsxs(Ls,{children:[e.jsxs(Us,{className:"flex items-center gap-2",children:[e.jsx(wu,{className:"h-5 w-5"}),""]}),e.jsx(Ks,{children:""})]}),e.jsxs("div",{className:"space-y-4 flex-1 overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(Uu,{className:"h-4 w-4"}),""]}),e.jsxs(Oe,{value:we.platform,onValueChange:G=>{R(Be=>({...Be,platform:G,personId:"",userId:"",userName:""})),A([])},children:[e.jsx(Ae,{disabled:W,children:e.jsx(Re,{placeholder:W?"...":""})}),e.jsx(De,{children:Y.map(G=>e.jsxs(te,{value:G.platform,children:[G.platform," (",G.count," )"]},G.platform))})]})]}),we.platform&&e.jsxs("div",{className:"space-y-2 flex-1 overflow-hidden flex flex-col",children:[e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(Bu,{className:"h-4 w-4"}),""]}),e.jsxs("div",{className:"relative",children:[e.jsx(Mt,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(ne,{placeholder:"...",value:pe,onChange:G=>ye(G.target.value),className:"pl-9"})]}),e.jsx(Ke,{className:"h-[250px] border rounded-md",children:e.jsx("div",{className:"p-2",children:be?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(st,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):z.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-muted-foreground",children:[e.jsx(Bu,{className:"h-8 w-8 mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:""})]}):e.jsx("div",{className:"space-y-1",children:z.map(G=>e.jsxs("button",{onClick:()=>Ds(G),className:q("w-full flex items-center gap-3 p-2 rounded-md text-left transition-colors",we.personId===G.person_id?"bg-primary text-primary-foreground":"hover:bg-muted"),children:[e.jsx(ir,{className:"h-8 w-8 shrink-0",children:e.jsx(rr,{className:q("text-xs",we.personId===G.person_id?"bg-primary-foreground/20":"bg-muted"),children:(G.nickname||G.person_name||"?").charAt(0)})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"font-medium truncate",children:G.nickname||G.person_name}),e.jsxs("div",{className:q("text-xs truncate",we.personId===G.person_id?"text-primary-foreground/70":"text-muted-foreground"),children:["ID: ",G.user_id,G.is_known&&"  "]})]})]},G.person_id))})})})]}),we.personId&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{children:""}),e.jsx(ne,{placeholder:"WebUI",value:we.groupName,onChange:G=>R(Be=>({...Be,groupName:G.target.value}))}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})]}),e.jsxs(tt,{className:"gap-2 sm:gap-0",children:[e.jsx(_,{variant:"outline",onClick:()=>M(!1),children:""}),e.jsx(_,{onClick:Hs,disabled:!we.platform||!we.personId,children:""})]})]})}),e.jsx("div",{className:"shrink-0 border-b bg-muted/30",children:e.jsx("div",{className:"max-w-4xl mx-auto px-2 sm:px-4",children:e.jsxs("div",{className:"flex items-center gap-1 overflow-x-auto py-1.5 scrollbar-thin",children:[r.map(G=>e.jsxs("button",{onClick:()=>ot(G.id),className:q("flex items-center gap-1.5 px-3 py-1.5 rounded-md text-sm whitespace-nowrap transition-colors","hover:bg-muted",m===G.id?"bg-background shadow-sm border":"text-muted-foreground"),children:[G.type==="webui"?e.jsx(Dl,{className:"h-3.5 w-3.5"}):e.jsx(wu,{className:"h-3.5 w-3.5"}),e.jsx("span",{className:"max-w-[100px] truncate",children:G.label}),e.jsx("span",{className:q("w-1.5 h-1.5 rounded-full",G.isConnected?"bg-green-500":"bg-muted-foreground/50")}),G.id!=="webui-default"&&e.jsx("button",{onClick:Be=>bt(G.id,Be),className:"ml-0.5 p-0.5 rounded hover:bg-muted-foreground/20",children:e.jsx(il,{className:"h-3 w-3"})})]},G.id)),e.jsx("button",{onClick:Qs,className:"flex items-center gap-1 px-2 py-1.5 rounded-md text-sm text-muted-foreground hover:bg-muted hover:text-foreground transition-colors",title:"",children:e.jsx(rt,{className:"h-3.5 w-3.5"})})]})})}),e.jsx("div",{className:"shrink-0 border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:e.jsxs("div",{className:"p-3 sm:p-4 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0",children:[e.jsx(ir,{className:"h-8 w-8 sm:h-10 sm:w-10 shrink-0",children:e.jsx(rr,{className:"bg-primary/10 text-primary",children:e.jsx(ar,{className:"h-4 w-4 sm:h-5 sm:w-5"})})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-base sm:text-lg font-semibold truncate",children:f?.sessionInfo.bot_name||""}),e.jsx("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground",children:f?.isConnected?e.jsxs(e.Fragment,{children:[e.jsx(by,{className:"h-3 w-3 text-green-500"}),e.jsx("span",{className:"text-green-600 dark:text-green-400",children:""})]}):b?e.jsxs(e.Fragment,{children:[e.jsx(st,{className:"h-3 w-3 animate-spin"}),e.jsx("span",{children:"..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Ny,{className:"h-3 w-3 text-red-500"}),e.jsx("span",{className:"text-red-600 dark:text-red-400",children:""})]})})]})]}),e.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[y&&e.jsx(st,{className:"h-4 w-4 animate-spin text-muted-foreground"}),e.jsx(_,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:Qe,disabled:b,title:"",children:e.jsx(Et,{className:q("h-4 w-4",b&&"animate-spin")})})]})]}),e.jsx("div",{className:"hidden sm:flex items-center gap-2 mt-2 text-sm text-muted-foreground",children:f?.type==="virtual"&&f.virtualConfig?e.jsxs(e.Fragment,{children:[e.jsx(wu,{className:"h-3 w-3 text-primary"}),e.jsx("span",{children:""}),e.jsx("span",{className:"font-medium text-primary",children:f.virtualConfig.userName}),e.jsxs("span",{className:"text-xs",children:["(",f.virtualConfig.platform,")"]}),f.virtualConfig.groupName&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"mx-1",children:""}),e.jsxs("span",{className:"text-xs",children:["",f.virtualConfig.groupName]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(Ic,{className:"h-3 w-3"}),e.jsx("span",{children:""}),U?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{value:B,onChange:G=>I(G.target.value),onKeyDown:G=>{G.key==="Enter"&&gt(),G.key==="Escape"&&oe()},className:"h-7 w-32",placeholder:"",autoFocus:!0}),e.jsx(_,{size:"sm",variant:"ghost",className:"h-7 px-2",onClick:gt,children:""}),e.jsx(_,{size:"sm",variant:"ghost",className:"h-7 px-2",onClick:oe,children:""})]}):e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"font-medium text-foreground",children:T}),e.jsx(_,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0",onClick:$s,title:"",children:e.jsx(yy,{className:"h-3 w-3"})})]})]})})]})}),e.jsx("div",{className:"flex-1 overflow-hidden",children:e.jsx(Ke,{className:"h-full",children:e.jsxs("div",{className:"p-3 sm:p-4 max-w-4xl mx-auto space-y-3 sm:space-y-4",children:[f?.messages.length===0&&!y&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-muted-foreground",children:[e.jsx(ar,{className:"h-12 w-12 mb-4 opacity-50"}),e.jsxs("p",{className:"text-sm",children:[" ",f?.sessionInfo.bot_name||""," "]})]}),f?.messages.map(G=>e.jsxs("div",{className:q("flex gap-2 sm:gap-3",G.type==="user"&&"flex-row-reverse",G.type==="system"&&"justify-center",G.type==="error"&&"justify-center"),children:[G.type==="system"&&e.jsx("div",{className:"text-xs text-muted-foreground bg-muted/50 px-3 py-1 rounded-full max-w-[90%]",children:G.content}),G.type==="error"&&e.jsx("div",{className:"text-xs text-red-600 dark:text-red-400 bg-red-100 dark:bg-red-900/30 px-3 py-1 rounded-full max-w-[90%]",children:G.content}),G.type==="thinking"&&e.jsxs(e.Fragment,{children:[e.jsx(ir,{className:"h-7 w-7 sm:h-8 sm:w-8 shrink-0",children:e.jsx(rr,{className:"bg-primary/10 text-primary",children:e.jsx(ar,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})})}),e.jsxs("div",{className:"flex flex-col gap-1 max-w-[75%] sm:max-w-[70%]",children:[e.jsx("div",{className:"flex items-center gap-2 text-[10px] sm:text-xs text-muted-foreground",children:e.jsx("span",{className:"hidden sm:inline",children:G.sender?.name||f?.sessionInfo.bot_name})}),e.jsx("div",{className:"bg-muted rounded-2xl rounded-tl-sm px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex gap-1",children:[e.jsx("span",{className:"w-2 h-2 bg-primary/60 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),e.jsx("span",{className:"w-2 h-2 bg-primary/60 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),e.jsx("span",{className:"w-2 h-2 bg-primary/60 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),e.jsx("span",{className:"text-xs text-muted-foreground ml-1",children:"..."})]})})]})]}),(G.type==="user"||G.type==="bot")&&e.jsxs(e.Fragment,{children:[e.jsx(ir,{className:"h-7 w-7 sm:h-8 sm:w-8 shrink-0",children:e.jsx(rr,{className:q("text-xs",G.type==="bot"?"bg-primary/10 text-primary":"bg-secondary text-secondary-foreground"),children:G.type==="bot"?e.jsx(ar,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}):e.jsx(Ic,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})})}),e.jsxs("div",{className:q("flex flex-col gap-1 max-w-[75%] sm:max-w-[70%]",G.type==="user"&&"items-end"),children:[e.jsxs("div",{className:"flex items-center gap-2 text-[10px] sm:text-xs text-muted-foreground",children:[e.jsx("span",{className:"hidden sm:inline",children:G.sender?.name||(G.type==="bot"?f?.sessionInfo.bot_name:T)}),e.jsx("span",{children:Fe(G.timestamp)})]}),e.jsx("div",{className:q("rounded-2xl px-3 py-2 text-sm whitespace-pre-wrap break-words",G.type==="bot"?"bg-muted rounded-tl-sm":"bg-primary text-primary-foreground rounded-tr-sm"),children:G.content})]})]})]},G.id)),e.jsx("div",{ref:$})]})})}),e.jsx("div",{className:"shrink-0 border-t bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:e.jsx("div",{className:"p-3 sm:p-4 max-w-4xl mx-auto",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ne,{value:p,onChange:G=>g(G.target.value),onKeyDown:Me,placeholder:f?.isConnected?"...":"...",disabled:!f?.isConnected,className:"flex-1 h-10 sm:h-10"}),e.jsx(_,{onClick:ge,disabled:!f?.isConnected||!p.trim(),size:"icon",className:"h-10 w-10 shrink-0",children:e.jsx(wy,{className:"h-4 w-4"})})]})})})]})}var am="Radio",[V_,ej]=cg(am),[$_,Q_]=V_(am),sj=u.forwardRef((n,i)=>{const{__scopeRadio:r,name:d,checked:m=!1,required:h,disabled:f,value:p="on",onCheck:g,form:b,...j}=n,[y,N]=u.useState(null),T=Qu(i,O=>N(O)),w=u.useRef(!1),U=y?b||!!y.closest("form"):!0;return e.jsxs($_,{scope:r,checked:m,disabled:f,children:[e.jsx(Jc.button,{type:"button",role:"radio","aria-checked":m,"data-state":nj(m),"data-disabled":f?"":void 0,disabled:f,value:p,...j,ref:T,onClick:Ru(n.onClick,O=>{m||g?.(),U&&(w.current=O.isPropagationStopped(),w.current||O.stopPropagation())})}),U&&e.jsx(lj,{control:y,bubbles:!w.current,name:d,value:p,checked:m,required:h,disabled:f,form:b,style:{transform:"translateX(-100%)"}})]})});sj.displayName=am;var tj="RadioIndicator",aj=u.forwardRef((n,i)=>{const{__scopeRadio:r,forceMount:d,...m}=n,h=Q_(tj,r);return e.jsx(FN,{present:d||h.checked,children:e.jsx(Jc.span,{"data-state":nj(h.checked),"data-disabled":h.disabled?"":void 0,...m,ref:i})})});aj.displayName=tj;var I_="RadioBubbleInput",lj=u.forwardRef(({__scopeRadio:n,control:i,checked:r,bubbles:d=!0,...m},h)=>{const f=u.useRef(null),p=Qu(f,h),g=VN(r),b=$N(i);return u.useEffect(()=>{const j=f.current;if(!j)return;const y=window.HTMLInputElement.prototype,T=Object.getOwnPropertyDescriptor(y,"checked").set;if(g!==r&&T){const w=new Event("click",{bubbles:d});T.call(j,r),j.dispatchEvent(w)}},[g,r,d]),e.jsx(Jc.input,{type:"radio","aria-hidden":!0,defaultChecked:r,...m,tabIndex:-1,ref:p,style:{...m.style,...b,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});lj.displayName=I_;function nj(n){return n?"checked":"unchecked"}var Y_=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],no="RadioGroup",[X_]=cg(no,[Xp,ej]),ij=Xp(),rj=ej(),[K_,J_]=X_(no),cj=u.forwardRef((n,i)=>{const{__scopeRadioGroup:r,name:d,defaultValue:m,value:h,required:f=!1,disabled:p=!1,orientation:g,dir:b,loop:j=!0,onValueChange:y,...N}=n,T=ij(r),w=qN(b),[U,O]=GN({prop:h,defaultProp:m??null,onChange:y,caller:no});return e.jsx(K_,{scope:r,name:d,required:f,disabled:p,value:U,onValueChange:O,children:e.jsx(gN,{asChild:!0,...T,orientation:g,dir:w,loop:j,children:e.jsx(Jc.div,{role:"radiogroup","aria-required":f,"aria-orientation":g,"data-disabled":p?"":void 0,dir:w,...N,ref:i})})})});cj.displayName=no;var oj="RadioGroupItem",dj=u.forwardRef((n,i)=>{const{__scopeRadioGroup:r,disabled:d,...m}=n,h=J_(oj,r),f=h.disabled||d,p=ij(r),g=rj(r),b=u.useRef(null),j=Qu(i,b),y=h.value===m.value,N=u.useRef(!1);return u.useEffect(()=>{const T=U=>{Y_.includes(U.key)&&(N.current=!0)},w=()=>N.current=!1;return document.addEventListener("keydown",T),document.addEventListener("keyup",w),()=>{document.removeEventListener("keydown",T),document.removeEventListener("keyup",w)}},[]),e.jsx(jN,{asChild:!0,...p,focusable:!f,active:y,children:e.jsx(sj,{disabled:f,required:h.required,checked:y,...g,...m,name:h.name,ref:j,onCheck:()=>h.onValueChange(m.value),onKeyDown:Ru(T=>{T.key==="Enter"&&T.preventDefault()}),onFocus:Ru(m.onFocus,()=>{N.current&&b.current?.click()})})})});dj.displayName=oj;var P_="RadioGroupIndicator",uj=u.forwardRef((n,i)=>{const{__scopeRadioGroup:r,...d}=n,m=rj(r);return e.jsx(aj,{...m,...d,ref:i})});uj.displayName=P_;var mj=cj,hj=dj,Z_=uj;const xj=u.forwardRef(({className:n,...i},r)=>e.jsx(mj,{className:q("grid gap-2",n),...i,ref:r}));xj.displayName=mj.displayName;const fj=u.forwardRef(({className:n,...i},r)=>e.jsx(hj,{ref:r,className:q("aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",n),...i,children:e.jsx(Z_,{className:"flex items-center justify-center",children:e.jsx(_y,{className:"h-2.5 w-2.5 fill-current text-current"})})}));fj.displayName=hj.displayName;function W_({question:n,value:i,onChange:r,error:d,disabled:m=!1}){const[h,f]=u.useState(null),p=m||n.readOnly,g=()=>{switch(n.type){case"single":return e.jsx(xj,{value:i||"",onValueChange:r,disabled:p,className:"space-y-2",children:n.options?.map(b=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(fj,{value:b.value,id:`${n.id}-${b.id}`}),e.jsx(S,{htmlFor:`${n.id}-${b.id}`,className:"cursor-pointer font-normal",children:b.label})]},b.id))});case"multiple":{const b=i||[];return e.jsxs("div",{className:"space-y-2",children:[n.options?.map(j=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ft,{id:`${n.id}-${j.id}`,checked:b.includes(j.value),disabled:p||n.maxSelections!==void 0&&b.length>=n.maxSelections&&!b.includes(j.value),onCheckedChange:y=>{r(y?[...b,j.value]:b.filter(N=>N!==j.value))}}),e.jsx(S,{htmlFor:`${n.id}-${j.id}`,className:"cursor-pointer font-normal",children:j.label})]},j.id)),n.maxSelections&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:[" ",n.maxSelections," "]})]})}case"text":return e.jsx(ne,{value:i||"",onChange:b=>r(b.target.value),placeholder:n.placeholder||"...",disabled:p,readOnly:n.readOnly,maxLength:n.maxLength,className:q(n.readOnly&&"bg-muted cursor-not-allowed")});case"textarea":return e.jsxs("div",{className:"space-y-1",children:[e.jsx(Ms,{value:i||"",onChange:b=>r(b.target.value),placeholder:n.placeholder||"...",disabled:p,readOnly:n.readOnly,maxLength:n.maxLength,rows:4,className:q(n.readOnly&&"bg-muted cursor-not-allowed")}),n.maxLength&&e.jsxs("p",{className:"text-xs text-muted-foreground text-right",children:[(i||"").length," / ",n.maxLength]})]});case"rating":{const b=i||0,j=h!==null?h:b;return e.jsxs("div",{className:"flex items-center gap-1",children:[[1,2,3,4,5].map(y=>e.jsx("button",{type:"button",disabled:p,className:q("p-1 transition-colors focus:outline-none focus:ring-2 focus:ring-ring rounded",p&&"cursor-not-allowed opacity-50"),onMouseEnter:()=>!p&&f(y),onMouseLeave:()=>f(null),onClick:()=>!p&&r(y),children:e.jsx(ll,{className:q("h-6 w-6 transition-colors",y<=j?"fill-yellow-400 text-yellow-400":"text-muted-foreground")})},y)),b>0&&e.jsxs("span",{className:"ml-2 text-sm text-muted-foreground",children:[b," / 5"]})]})}case"scale":{const b=n.min??1,j=n.max??10,y=n.step??1,N=i??b;return e.jsxs("div",{className:"space-y-4",children:[e.jsx(fa,{value:[N],onValueChange:([T])=>r(T),min:b,max:j,step:y,disabled:p}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsx("span",{children:n.minLabel||b}),e.jsx("span",{className:"font-medium text-foreground",children:N}),e.jsx("span",{children:n.maxLabel||j})]})]})}case"dropdown":return e.jsxs(Oe,{value:i||"",onValueChange:r,disabled:p,children:[e.jsx(Ae,{children:e.jsx(Re,{placeholder:n.placeholder||"..."})}),e.jsx(De,{children:n.options?.map(b=>e.jsx(te,{value:b.value,children:b.label},b.id))})]});default:return e.jsx("div",{className:"text-muted-foreground",children:""})}};return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs(S,{className:"text-base font-medium",children:[n.title,n.required&&e.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),n.description&&e.jsx("p",{className:"text-sm text-muted-foreground",children:n.description})]}),g(),d&&e.jsx("p",{className:"text-sm text-destructive",children:d})]})}const pj="https://maibot-plugin-stats.maibot-webui.workers.dev";function gj(){const n="maibot_user_id";let i=localStorage.getItem(n);if(!i){const r=Math.random().toString(36).substring(2,10),d=Date.now().toString(36),m=Math.random().toString(36).substring(2,10);i=`fp_${r}_${d}_${m}`,localStorage.setItem(n,i)}return i}async function eS(n,i,r,d){try{const m=d?.userId||gj(),h={surveyId:n,surveyVersion:i,userId:m,answers:r,submittedAt:new Date().toISOString(),allowMultiple:d?.allowMultiple,metadata:{userAgent:navigator.userAgent,language:navigator.language}},f=await fetch(`${pj}/survey/submit`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)}),p=await f.json();return f.status===429?{success:!1,error:""}:f.status===409?{success:!1,error:p.error||""}:f.ok?{success:!0,submissionId:p.submissionId,message:p.message}:{success:!1,error:p.error||""}}catch(m){return console.error("Error submitting survey:",m),{success:!1,error:""}}}async function sS(n,i){try{const r=i||gj(),d=new URLSearchParams({user_id:r,survey_id:n}),m=await fetch(`${pj}/survey/check?${d}`);return m.ok?{success:!0,hasSubmitted:(await m.json()).hasSubmitted}:{success:!1,error:(await m.json()).error||""}}catch(r){return console.error("Error checking submission:",r),{success:!1,error:""}}}function jj({config:n,initialAnswers:i,onSubmitSuccess:r,onSubmitError:d,showProgress:m=!0,paginateQuestions:h=!1,className:f}){const p=u.useCallback(()=>!i||i.length===0?{}:i.reduce((C,$)=>(C[$.questionId]=$.value,C),{}),[i]),[g,b]=u.useState(()=>p()),[j,y]=u.useState({}),[N,T]=u.useState(0),[w,U]=u.useState(!1),[O,B]=u.useState(!1),[I,L]=u.useState(null),[M,Y]=u.useState(null),[Q,z]=u.useState(!1),[A,W]=u.useState(!0);u.useEffect(()=>{i&&i.length>0&&b(C=>({...C,...p()}))},[i,p]),u.useEffect(()=>{(async()=>{if(!n.settings?.allowMultiple){const $=await sS(n.id);$.success&&$.hasSubmitted&&z(!0)}W(!1)})()},[n.id,n.settings?.allowMultiple]);const xe=u.useCallback(()=>{const C=new Date;return!(n.settings?.startTime&&new Date(n.settings.startTime)>C||n.settings?.endTime&&new Date(n.settings.endTime)<C)},[n.settings?.startTime,n.settings?.endTime]),be=n.questions.filter(C=>{const $=g[C.id];return $==null?!1:Array.isArray($)?$.length>0:typeof $=="string"?$.trim()!=="":!0}).length,_e=be/n.questions.length*100,pe=u.useCallback((C,$)=>{b(k=>({...k,[C]:$})),y(k=>{const ce={...k};return delete ce[C],ce})},[]),ye=u.useCallback(()=>{const C={};for(const $ of n.questions){if($.required){const k=g[$.id];if(k==null){C[$.id]="";continue}if(Array.isArray(k)&&k.length===0){C[$.id]="";continue}if(typeof k=="string"&&k.trim()===""){C[$.id]="";continue}}$.minLength&&typeof g[$.id]=="string"&&g[$.id].length<$.minLength&&(C[$.id]=` ${$.minLength} `)}return y(C),Object.keys(C).length===0},[n.questions,g]),we=u.useCallback(async()=>{if(!ye()){if(h){const C=n.questions.findIndex($=>j[$.id]);C>=0&&T(C)}return}U(!0),L(null);try{const C=n.questions.filter(k=>g[k.id]!==void 0).map(k=>({questionId:k.id,value:g[k.id]})),$=await eS(n.id,n.version,C,{allowMultiple:n.settings?.allowMultiple});if($.success&&$.submissionId)B(!0),Y($.submissionId),r?.($.submissionId);else{const k=$.error||"";L(k),d?.(k)}}catch(C){const $=C instanceof Error?C.message:"";L($),d?.($)}finally{U(!1)}},[ye,h,n,g,j,r,d]),R=u.useCallback(C=>{C>=0&&C<n.questions.length&&T(C)},[n.questions.length]);if(A)return e.jsx($e,{className:q("w-full max-w-2xl mx-auto",f),children:e.jsx(fs,{className:"py-12 flex items-center justify-center",children:e.jsx(st,{className:"h-6 w-6 animate-spin text-muted-foreground"})})});if(Q&&!n.settings?.allowMultiple)return e.jsxs($e,{className:q("w-full max-w-2xl mx-auto",f),children:[e.jsx(ss,{children:e.jsx(ts,{children:n.title})}),e.jsx(fs,{className:"py-8",children:e.jsxs($t,{children:[e.jsx(zt,{className:"h-4 w-4"}),e.jsx(Qt,{children:""})]})})]});if(!xe())return e.jsxs($e,{className:q("w-full max-w-2xl mx-auto",f),children:[e.jsx(ss,{children:e.jsx(ts,{children:n.title})}),e.jsx(fs,{className:"py-8",children:e.jsxs($t,{variant:"destructive",children:[e.jsx(zt,{className:"h-4 w-4"}),e.jsx(Qt,{children:""})]})})]});if(O)return e.jsxs($e,{className:q("w-full max-w-2xl mx-auto",f),children:[e.jsx(ss,{children:e.jsxs(ts,{className:"flex items-center gap-2 text-green-600",children:[e.jsx(ta,{className:"h-6 w-6"}),""]})}),e.jsxs(fs,{className:"py-8",children:[e.jsx("p",{className:"text-center text-muted-foreground",children:n.settings?.thankYouMessage||""}),M&&e.jsxs("p",{className:"text-center text-xs text-muted-foreground mt-4",children:["",M]})]})]});const X=h?[n.questions[N]]:n.questions;return e.jsxs("div",{className:q("h-full flex flex-col",f),children:[e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6 mb-4 shrink-0",children:[e.jsx("h2",{className:"text-xl font-semibold",children:n.title}),n.description&&e.jsx("p",{className:"text-muted-foreground mt-1 text-sm",children:n.description}),m&&e.jsxs("div",{className:"space-y-1 pt-3",children:[e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsx("span",{children:""}),e.jsxs("span",{children:[be," / ",n.questions.length]})]}),e.jsx(ni,{value:_e,className:"h-2"})]})]}),e.jsx(Ke,{className:"flex-1 min-h-0",children:e.jsxs("div",{className:"space-y-4 pr-4",children:[X.map((C,$)=>e.jsxs("div",{className:q("p-4 rounded-lg border bg-card",j[C.id]?"border-destructive bg-destructive/5":"border-border"),children:[h&&e.jsxs("div",{className:"text-xs text-muted-foreground mb-2",children:[" ",N+1," / ",n.questions.length]}),!h&&e.jsxs("div",{className:"text-xs text-muted-foreground mb-2",children:[$+1,"."]}),e.jsx(W_,{question:C,value:g[C.id],onChange:k=>pe(C.id,k),error:j[C.id],disabled:w})]},C.id)),I&&e.jsxs($t,{variant:"destructive",children:[e.jsx(zt,{className:"h-4 w-4"}),e.jsx(Qt,{children:I})]}),e.jsx("div",{className:"flex justify-between items-center py-4",children:h?e.jsxs(e.Fragment,{children:[e.jsxs(_,{variant:"outline",onClick:()=>R(N-1),disabled:N===0||w,children:[e.jsx(rl,{className:"h-4 w-4 mr-1"}),""]}),N===n.questions.length-1?e.jsxs(_,{onClick:we,disabled:w,children:[w&&e.jsx(st,{className:"h-4 w-4 mr-2 animate-spin"}),""]}):e.jsxs(_,{onClick:()=>R(N+1),disabled:w,children:["",e.jsx(Ua,{className:"h-4 w-4 ml-1"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:Object.keys(j).length>0&&e.jsxs("span",{className:"text-destructive",children:[" ",Object.keys(j).length," "]})}),e.jsxs(_,{onClick:we,disabled:w,size:"lg",children:[w&&e.jsx(st,{className:"h-4 w-4 mr-2 animate-spin"}),""]})]})})]})})]})}const tS={id:"webui-feedback-v1",version:"1.0.0",title:" WebUI ",description:" WebUI",questions:[{id:"webui_version",type:"text",title:" WebUI ",description:"",required:!0,readOnly:!0,placeholder:"..."},{id:"ui_design_satisfaction",type:"single",title:" WebUI ",required:!0,options:[{id:"very_satisfied",label:"",value:"very_satisfied"},{id:"satisfied",label:"",value:"satisfied"},{id:"neutral",label:"",value:"neutral"},{id:"dissatisfied",label:"",value:"dissatisfied"},{id:"very_dissatisfied",label:"",value:"very_dissatisfied"}]},{id:"problems_encountered",type:"multiple",title:" WebUI ",description:"",required:!0,options:[{id:"lag",label:"",value:"lag"},{id:"incomplete",label:"",value:"incomplete"},{id:"complex",label:"",value:"complex"},{id:"bugs",label:" Bug",value:"bugs"},{id:"none",label:"",value:"none"},{id:"other",label:"",value:"other"}]},{id:"problems_other",type:"text",title:'""',required:!1,placeholder:"...",maxLength:500},{id:"useful_features",type:"textarea",title:"",required:!0,placeholder:"...",maxLength:1e3},{id:"feature_requests",type:"textarea",title:"",required:!0,placeholder:"...",maxLength:1e3},{id:"overall_satisfaction",type:"single",title:" WebUI ",required:!0,options:[{id:"very_satisfied",label:"",value:"very_satisfied"},{id:"satisfied",label:"",value:"satisfied"},{id:"neutral",label:"",value:"neutral"},{id:"dissatisfied",label:"",value:"dissatisfied"},{id:"very_dissatisfied",label:"",value:"very_dissatisfied"}]},{id:"would_recommend",type:"single",title:" WebUI ",required:!0,options:[{id:"yes",label:"",value:"yes"},{id:"no",label:"",value:"no"}]},{id:"other_suggestions",type:"textarea",title:"",description:"",required:!1,placeholder:"...",maxLength:2e3}],settings:{allowMultiple:!1,thankYouMessage:""}},aS={id:"maibot-feedback-v1",version:"1.0.0",title:"",description:" AI ",questions:[{id:"maibot_version",type:"text",title:"",description:"",required:!0,readOnly:!0,placeholder:"..."},{id:"improvement_areas",type:"textarea",title:"",required:!0,placeholder:"...",maxLength:1e3},{id:"problems_encountered",type:"multiple",title:"",description:"",required:!0,options:[{id:"incomplete",label:"",value:"incomplete"},{id:"slow_response",label:"",value:"slow_response"},{id:"complex",label:"",value:"complex"},{id:"unstable",label:"",value:"unstable"},{id:"config_difficult",label:"",value:"config_difficult"},{id:"none",label:"",value:"none"},{id:"other",label:"",value:"other"}]},{id:"problems_other",type:"text",title:'""',required:!1,placeholder:"...",maxLength:500},{id:"helpful_features",type:"textarea",title:"",required:!0,placeholder:"...",maxLength:1e3},{id:"feature_requests",type:"textarea",title:"",required:!0,placeholder:"...",maxLength:1e3},{id:"overall_satisfaction",type:"single",title:"",required:!0,options:[{id:"very_satisfied",label:"",value:"very_satisfied"},{id:"satisfied",label:"",value:"satisfied"},{id:"neutral",label:"",value:"neutral"},{id:"dissatisfied",label:"",value:"dissatisfied"},{id:"very_dissatisfied",label:"",value:"very_dissatisfied"}]},{id:"would_recommend",type:"single",title:"",required:!0,options:[{id:"yes",label:"",value:"yes"},{id:"no",label:"",value:"no"}]},{id:"other_suggestions",type:"textarea",title:"",description:"",required:!1,placeholder:"...",maxLength:2e3}],settings:{allowMultiple:!1,thankYouMessage:""}};function lS(){const[n,i]=u.useState(null),[r,d]=u.useState(!0);u.useEffect(()=>{const p=JSON.parse(JSON.stringify(tS));i(p),d(!1)},[]);const m=u.useMemo(()=>[{questionId:"webui_version",value:`v${Zc}`}],[]),h=u.useCallback(p=>{console.log("WebUI Survey submitted:",p)},[]),f=u.useCallback(p=>{console.error("WebUI Survey submission error:",p)},[]);return r?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx(st,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):n?e.jsxs("div",{className:"h-[calc(100vh-4rem)] flex flex-col p-4 sm:p-6",children:[e.jsxs("div",{className:"mb-4 sm:mb-6 shrink-0",children:[e.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold flex items-center gap-2",children:[e.jsx(wg,{className:"h-8 w-8",strokeWidth:2}),"WebUI "]}),e.jsx("p",{className:"text-muted-foreground mt-1 text-sm sm:text-base",children:""})]}),e.jsx("div",{className:"flex-1 min-h-0",children:e.jsx(jj,{config:n,initialAnswers:m,showProgress:!0,paginateQuestions:!1,onSubmitSuccess:h,onSubmitError:f})})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] gap-4",children:[e.jsxs($t,{variant:"destructive",className:"max-w-md",children:[e.jsx(zt,{className:"h-4 w-4"}),e.jsx(Qt,{children:""})]}),e.jsx(_,{variant:"outline",onClick:()=>window.location.reload(),children:""})]})}function nS(){const[n,i]=u.useState(null),[r,d]=u.useState(!0),[m,h]=u.useState("");u.useEffect(()=>{(async()=>{try{const y=await Hg();h(y.version||"")}catch(y){console.error("Failed to get MaiBot version:",y),h("")}const j=JSON.parse(JSON.stringify(aS));i(j),d(!1)})()},[]);const f=u.useMemo(()=>[{questionId:"maibot_version",value:m}],[m]),p=u.useCallback(b=>{console.log("MaiBot Survey submitted:",b)},[]),g=u.useCallback(b=>{console.error("MaiBot Survey submission error:",b)},[]);return r?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx(st,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):n?e.jsxs("div",{className:"h-[calc(100vh-4rem)] flex flex-col p-4 sm:p-6",children:[e.jsxs("div",{className:"mb-4 sm:mb-6 shrink-0",children:[e.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold flex items-center gap-2",children:[e.jsx(wg,{className:"h-8 w-8",strokeWidth:2}),""]}),e.jsx("p",{className:"text-muted-foreground mt-1 text-sm sm:text-base",children:" AI "})]}),e.jsx("div",{className:"flex-1 min-h-0",children:e.jsx(jj,{config:n,initialAnswers:f,showProgress:!0,paginateQuestions:!1,onSubmitSuccess:p,onSubmitError:g})})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] gap-4",children:[e.jsxs($t,{variant:"destructive",className:"max-w-md",children:[e.jsx(zt,{className:"h-4 w-4"}),e.jsx(Qt,{children:""})]}),e.jsx(_,{variant:"outline",onClick:()=>window.location.reload(),children:""})]})}function iS(){const n=ja(),[i,r]=u.useState(!0);return u.useEffect(()=>{let d=!1;return(async()=>{try{const h=await Zu();!d&&!h&&n({to:"/auth"})}catch{d||n({to:"/auth"})}finally{d||r(!1)}})(),()=>{d=!0}},[n]),{checking:i}}async function rS(){return await Zu()}const cS=si("pointer-events-none inline-flex select-none items-center gap-1 rounded border bg-muted px-1.5 font-mono font-medium opacity-100",{variants:{size:{sm:"h-5 text-[10px]",default:"h-6 text-xs",lg:"h-7 text-sm"}},defaultVariants:{size:"default"}}),vj=u.forwardRef(({className:n,size:i,abbrTitle:r,children:d,...m},h)=>e.jsx("kbd",{className:q(cS({size:i,className:n})),ref:h,...m,children:r?e.jsx("abbr",{title:r,children:d}):d}));vj.displayName="Kbd";const oS=[{icon:Pc,title:"",description:"",path:"/",category:""},{icon:wa,title:"",description:"",path:"/config/bot",category:""},{icon:_g,title:"",description:"",path:"/config/modelProvider",category:""},{icon:Sg,title:"",description:"",path:"/config/model",category:""},{icon:Iu,title:"",description:"",path:"/resource/emoji",category:""},{icon:Dl,title:"",description:"",path:"/resource/expression",category:""},{icon:Cg,title:"",description:"",path:"/resource/person",category:""},{icon:ei,title:"",description:"",path:"/resource/jargon",category:""},{icon:Sy,title:"",description:"",path:"/statistics",category:""},{icon:tn,title:"",description:"",path:"/plugins",category:""},{icon:Yu,title:"",description:"",path:"/logs",category:""},{icon:ti,title:"",description:"",path:"/settings",category:""}];function dS({open:n,onOpenChange:i}){const[r,d]=u.useState(""),[m,h]=u.useState(0),f=ja(),p=oS.filter(j=>j.title.toLowerCase().includes(r.toLowerCase())||j.description.toLowerCase().includes(r.toLowerCase())||j.category.toLowerCase().includes(r.toLowerCase()));u.useEffect(()=>{n&&(d(""),h(0))},[n]);const g=u.useCallback(j=>{f({to:j}),i(!1)},[f,i]),b=u.useCallback(j=>{j.key==="ArrowDown"?(j.preventDefault(),h(y=>(y+1)%p.length)):j.key==="ArrowUp"?(j.preventDefault(),h(y=>(y-1+p.length)%p.length)):j.key==="Enter"&&p[m]&&(j.preventDefault(),g(p[m].path))},[p,m,g]);return e.jsx(qs,{open:n,onOpenChange:i,children:e.jsxs(Rs,{className:"max-w-2xl p-0 gap-0",children:[e.jsxs(Ls,{className:"px-4 pt-4 pb-0",children:[e.jsx(Us,{className:"sr-only",children:""}),e.jsxs("div",{className:"relative",children:[e.jsx(Mt,{className:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 text-muted-foreground"}),e.jsx(ne,{value:r,onChange:j=>{d(j.target.value),h(0)},onKeyDown:b,placeholder:"...",className:"h-12 pl-11 text-base border-0 focus-visible:ring-0 shadow-none",autoFocus:!0})]})]}),e.jsx("div",{className:"border-t",children:e.jsx(Ke,{className:"h-[400px]",children:p.length>0?e.jsx("div",{className:"p-2",children:p.map((j,y)=>{const N=j.icon;return e.jsxs("button",{onClick:()=>g(j.path),onMouseEnter:()=>h(y),className:q("w-full flex items-center gap-3 px-3 py-2.5 rounded-md text-left transition-colors",y===m?"bg-accent text-accent-foreground":"hover:bg-accent/50"),children:[e.jsx(N,{className:"h-5 w-5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-sm",children:j.title}),e.jsx("div",{className:"text-xs text-muted-foreground truncate",children:j.description})]}),e.jsx("div",{className:"text-xs text-muted-foreground px-2 py-1 bg-muted rounded",children:j.category})]},j.path)})}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx(Mt,{className:"h-12 w-12 text-muted-foreground/50 mb-4"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:r?"":""})]})})}),e.jsx("div",{className:"border-t px-4 py-3 flex items-center justify-between text-xs text-muted-foreground",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("kbd",{className:"px-1.5 py-0.5 bg-muted rounded border",children:""}),e.jsx("kbd",{className:"px-1.5 py-0.5 bg-muted rounded border",children:""}),""]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("kbd",{className:"px-1.5 py-0.5 bg-muted rounded border",children:"Enter"}),""]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("kbd",{className:"px-1.5 py-0.5 bg-muted rounded border",children:"Esc"}),""]})]})})]})})}const uS=IN,mS=YN,hS=XN,bj=u.forwardRef(({className:n,sideOffset:i=4,...r},d)=>e.jsx(QN,{children:e.jsx(og,{ref:d,sideOffset:i,className:q("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",n),...r})}));bj.displayName=og.displayName;function xS({children:n}){const{checking:i}=iS(),[r,d]=u.useState(!0),[m,h]=u.useState(!1),[f,p]=u.useState(!1),{theme:g,setTheme:b}=Ku(),j=Gb();if(u.useEffect(()=>{const U=O=>{(O.metaKey||O.ctrlKey)&&O.key==="k"&&(O.preventDefault(),p(!0))};return window.addEventListener("keydown",U),()=>window.removeEventListener("keydown",U)},[]),i)return e.jsx("div",{className:"flex h-screen items-center justify-center bg-background",children:e.jsx("div",{className:"text-muted-foreground",children:"..."})});const y=[{title:"",items:[{icon:Pc,label:"",path:"/"}]},{title:"",items:[{icon:wa,label:"",path:"/config/bot"},{icon:_g,label:"AI",path:"/config/modelProvider",tourId:"sidebar-model-provider"},{icon:Sg,label:"",path:"/config/model",tourId:"sidebar-model-management"},{icon:tp,label:"",path:"/config/adapter"}]},{title:"",items:[{icon:Iu,label:"",path:"/resource/emoji"},{icon:Dl,label:"",path:"/resource/expression"},{icon:ei,label:"",path:"/resource/jargon"},{icon:Cg,label:"",path:"/resource/person"},{icon:yg,label:"",path:"/resource/knowledge-graph"}]},{title:"",items:[{icon:tn,label:"",path:"/plugins"},{icon:tp,label:"",path:"/plugin-config"},{icon:Yu,label:"",path:"/logs"},{icon:Dl,label:"",path:"/chat"}]},{title:"",items:[{icon:ti,label:"",path:"/settings"}]}],T=g==="system"?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":g,w=async()=>{await X0()};return e.jsx(uS,{delayDuration:300,children:e.jsxs("div",{className:"flex h-screen overflow-hidden",children:[e.jsxs("aside",{className:q("fixed inset-y-0 left-0 z-50 flex flex-col border-r bg-card transition-all duration-300 lg:relative lg:z-0","w-64 lg:w-auto",r?"lg:w-64":"lg:w-16",m?"translate-x-0":"-translate-x-full lg:translate-x-0"),children:[e.jsx("div",{className:"flex h-16 items-center border-b px-4",children:e.jsxs("div",{className:q("relative flex items-center justify-center flex-1 transition-all overflow-hidden","lg:flex-1",!r&&"lg:flex-none lg:w-8"),children:[e.jsxs("div",{className:q("flex items-baseline gap-2",!r&&"lg:hidden"),children:[e.jsx("span",{className:"font-bold text-xl text-primary-gradient whitespace-nowrap",children:"MaiBot WebUI"}),e.jsx("span",{className:"text-xs text-primary/60 whitespace-nowrap",children:A0()})]}),!r&&e.jsx("span",{className:"hidden lg:block font-bold text-primary-gradient text-2xl",children:"M"})]})}),e.jsx(Ke,{className:q("flex-1 overflow-x-hidden",!r&&"lg:w-16"),children:e.jsx("nav",{className:q("p-4",!r&&"lg:p-2 lg:w-16"),children:e.jsx("ul",{className:q("space-y-6",!r&&"lg:space-y-3 lg:w-full"),children:y.map((U,O)=>e.jsxs("li",{children:[e.jsx("div",{className:q("px-3 h-[1.25rem]","mb-2",!r&&"lg:mb-1 lg:invisible"),children:e.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground/60 whitespace-nowrap",children:U.title})}),!r&&O>0&&e.jsx("div",{className:"hidden lg:block mb-2 border-t border-border"}),e.jsx("ul",{className:"space-y-1",children:U.items.map(B=>{const I=j({to:B.path}),L=B.icon,M=e.jsxs(e.Fragment,{children:[I&&e.jsx("div",{className:"absolute left-0 top-1/2 h-8 w-1 -translate-y-1/2 rounded-r-full bg-primary transition-opacity duration-300"}),e.jsxs("div",{className:q("flex items-center transition-all duration-300",r?"gap-3":"gap-3 lg:gap-0"),children:[e.jsx(L,{className:q("h-5 w-5 flex-shrink-0",I&&"text-primary"),strokeWidth:2,fill:"none"}),e.jsx("span",{className:q("text-sm font-medium whitespace-nowrap transition-all duration-300",I&&"font-semibold",r?"opacity-100 max-w-[200px]":"opacity-100 max-w-[200px] lg:opacity-0 lg:max-w-0 lg:overflow-hidden"),children:B.label})]})]});return e.jsx("li",{className:"relative",children:e.jsxs(mS,{children:[e.jsx(hS,{asChild:!0,children:e.jsx(Yn,{to:B.path,"data-tour":B.tourId,className:q("relative flex items-center rounded-lg py-2 transition-all duration-300","hover:bg-accent hover:text-accent-foreground",I?"bg-accent text-foreground":"text-muted-foreground hover:text-foreground",r?"px-3":"px-3 lg:px-0 lg:justify-center lg:w-12 lg:mx-auto"),onClick:()=>h(!1),children:M})}),!r&&e.jsx(bj,{side:"right",className:"hidden lg:block",children:e.jsx("p",{children:B.label})})]})},B.path)})})]},U.title))})})})]}),m&&e.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 lg:hidden",onClick:()=>h(!1)}),e.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[e.jsxs("header",{className:"flex h-16 items-center justify-between border-b bg-card/80 backdrop-blur-md px-4 sticky top-0 z-10",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>h(!m),className:"rounded-lg p-2 hover:bg-accent lg:hidden",children:e.jsx(Cy,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>d(!r),className:"hidden rounded-lg p-2 hover:bg-accent lg:block",title:r?"":"",children:e.jsx(rl,{className:q("h-5 w-5 transition-transform",!r&&"rotate-180")})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>p(!0),className:"relative hidden md:flex items-center w-64 h-9 pl-9 pr-16 bg-background/50 border rounded-md hover:bg-accent/50 transition-colors text-left",children:[e.jsx(Mt,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"..."}),e.jsxs(vj,{size:"sm",className:"absolute right-2 top-1/2 -translate-y-1/2",children:[e.jsx("span",{className:"text-xs",children:""}),"K"]})]}),e.jsx(dS,{open:f,onOpenChange:p}),e.jsxs(_,{variant:"ghost",size:"sm",onClick:()=>window.open("https://docs.mai-mai.org","_blank"),className:"gap-2",title:"",children:[e.jsx(ky,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:""})]}),e.jsx("button",{onClick:U=>{k0(T==="dark"?"light":"dark",b,U)},className:"rounded-lg p-2 hover:bg-accent",title:T==="dark"?"":"",children:T==="dark"?e.jsx(gg,{className:"h-5 w-5"}):e.jsx(jg,{className:"h-5 w-5"})}),e.jsx("div",{className:"h-6 w-px bg-border"}),e.jsxs(_,{variant:"ghost",size:"sm",onClick:w,className:"gap-2",title:"",children:[e.jsx(Ty,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:""})]})]})]}),e.jsx("main",{className:"flex-1 overflow-hidden bg-background",children:n})]})]})})}function fS(n){const i=n.split(`
`).slice(1),r=[];for(const d of i){const m=d.trim();if(!m.startsWith("at "))continue;const h=m.match(/at\s+(?:(.+?)\s+\()?(.+?):(\d+):(\d+)\)?$/);h?r.push({functionName:h[1]||"<anonymous>",fileName:h[2],lineNumber:h[3],columnNumber:h[4],raw:m}):r.push({functionName:"<unknown>",fileName:"",lineNumber:"",columnNumber:"",raw:m})}return r}function pS({error:n,errorInfo:i}){const[r,d]=u.useState(!0),[m,h]=u.useState(!1),[f,p]=u.useState(!1),g=n.stack?fS(n.stack):[],b=async()=>{const j=`
Error: ${n.name}
Message: ${n.message}

Stack Trace:
${n.stack||"No stack trace available"}

Component Stack:
${i?.componentStack||"No component stack available"}

URL: ${window.location.href}
User Agent: ${navigator.userAgent}
Time: ${new Date().toISOString()}
    `.trim();try{await navigator.clipboard.writeText(j),p(!0),setTimeout(()=>p(!1),2e3)}catch(y){console.error("Failed to copy:",y)}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs($t,{variant:"destructive",className:"border-red-500/50 bg-red-500/10",children:[e.jsx(_a,{className:"h-4 w-4"}),e.jsxs(Qt,{className:"font-mono text-sm",children:[e.jsxs("span",{className:"font-semibold",children:[n.name,":"]})," ",n.message]})]}),g.length>0&&e.jsxs(Fu,{open:r,onOpenChange:d,children:[e.jsx(Vu,{asChild:!0,children:e.jsxs(_,{variant:"ghost",className:"w-full justify-between p-3 h-auto",children:[e.jsxs("span",{className:"font-semibold text-sm flex items-center gap-2",children:[e.jsx(Ey,{className:"h-4 w-4"}),"Stack Trace (",g.length," frames)"]}),r?e.jsx(ur,{className:"h-4 w-4"}):e.jsx(Ol,{className:"h-4 w-4"})]})}),e.jsx($u,{children:e.jsx(Ke,{className:"h-[280px] rounded-md border bg-muted/30",children:e.jsx("div",{className:"p-3 space-y-1",children:g.map((j,y)=>e.jsx("div",{className:"font-mono text-xs p-2 rounded hover:bg-muted/50 transition-colors",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsxs("span",{className:"text-muted-foreground w-6 text-right flex-shrink-0",children:[y+1,"."]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("span",{className:"text-primary font-medium",children:j.functionName}),j.fileName&&e.jsxs("div",{className:"text-muted-foreground mt-0.5 break-all",children:[j.fileName,j.lineNumber&&e.jsxs("span",{className:"text-yellow-600 dark:text-yellow-400",children:[":",j.lineNumber,":",j.columnNumber]})]})]})]})},y))})})})]}),i?.componentStack&&e.jsxs(Fu,{open:m,onOpenChange:h,children:[e.jsx(Vu,{asChild:!0,children:e.jsxs(_,{variant:"ghost",className:"w-full justify-between p-3 h-auto",children:[e.jsxs("span",{className:"font-semibold text-sm flex items-center gap-2",children:[e.jsx(_a,{className:"h-4 w-4"}),"Component Stack"]}),m?e.jsx(ur,{className:"h-4 w-4"}):e.jsx(Ol,{className:"h-4 w-4"})]})}),e.jsx($u,{children:e.jsx(Ke,{className:"h-[200px] rounded-md border bg-muted/30",children:e.jsx("pre",{className:"p-3 font-mono text-xs whitespace-pre-wrap text-muted-foreground",children:i.componentStack})})})]}),e.jsx(_,{variant:"outline",size:"sm",onClick:b,className:"w-full",children:f?e.jsxs(e.Fragment,{children:[e.jsx(Vt,{className:"mr-2 h-4 w-4 text-green-500"}),""]}):e.jsxs(e.Fragment,{children:[e.jsx(Qc,{className:"mr-2 h-4 w-4"}),""]})})]})}function Nj({error:n,errorInfo:i}){const r=()=>{window.location.href="/"},d=()=>{window.location.reload()};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:e.jsxs($e,{className:"w-full max-w-2xl shadow-lg",children:[e.jsxs(ss,{className:"text-center pb-2",children:[e.jsx("div",{className:"mx-auto flex h-16 w-16 items-center justify-center rounded-full bg-red-100 dark:bg-red-900/30 mb-4",children:e.jsx(_a,{className:"h-8 w-8 text-red-600 dark:text-red-400"})}),e.jsx(ts,{className:"text-2xl font-bold",children:""}),e.jsx(Ws,{className:"text-base mt-2",children:""})]}),e.jsxs(fs,{className:"space-y-4",children:[e.jsx(pS,{error:n,errorInfo:i}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 pt-2",children:[e.jsxs(_,{onClick:d,className:"flex-1",children:[e.jsx(Et,{className:"mr-2 h-4 w-4"}),""]}),e.jsxs(_,{onClick:r,variant:"outline",className:"flex-1",children:[e.jsx(Pc,{className:"mr-2 h-4 w-4"}),""]})]}),e.jsx("p",{className:"text-xs text-center text-muted-foreground pt-2",children:""})]})]})})}class gS extends u.Component{constructor(i){super(i),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(i){return{hasError:!0,error:i}}componentDidCatch(i,r){console.error("ErrorBoundary caught an error:",i,r),this.setState({errorInfo:r})}handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};render(){return this.state.hasError&&this.state.error?this.props.fallback?this.props.fallback:e.jsx(Nj,{error:this.state.error,errorInfo:this.state.errorInfo}):this.props.children}}function yj({error:n}){return e.jsx(Nj,{error:n,errorInfo:null})}const vr=Fb({component:()=>e.jsxs(e.Fragment,{children:[e.jsx(Tp,{}),!1]}),beforeLoad:()=>{if(window.location.pathname==="/"&&!rS())throw $b({to:"/auth"})}}),jS=at({getParentRoute:()=>vr,path:"/auth",component:K0}),vS=at({getParentRoute:()=>vr,path:"/setup",component:uw}),vt=at({getParentRoute:()=>vr,id:"protected",component:()=>e.jsx(xS,{children:e.jsx(Tp,{})}),errorComponent:({error:n})=>e.jsx(yj,{error:n})}),bS=at({getParentRoute:()=>vt,path:"/",component:S0}),NS=at({getParentRoute:()=>vt,path:"/config/bot",component:Vw}),yS=at({getParentRoute:()=>vt,path:"/config/modelProvider",component:Ww}),wS=at({getParentRoute:()=>vt,path:"/config/model",component:x1}),_S=at({getParentRoute:()=>vt,path:"/config/adapter",component:p1}),SS=at({getParentRoute:()=>vt,path:"/resource/emoji",component:H1}),CS=at({getParentRoute:()=>vt,path:"/resource/expression",component:P1}),kS=at({getParentRoute:()=>vt,path:"/resource/person",component:N2}),TS=at({getParentRoute:()=>vt,path:"/resource/jargon",component:u2}),ES=at({getParentRoute:()=>vt,path:"/resource/knowledge-graph",component:z2}),zS=at({getParentRoute:()=>vt,path:"/logs",component:r_}),MS=at({getParentRoute:()=>vt,path:"/chat",component:F_}),AS=at({getParentRoute:()=>vt,path:"/plugins",component:M_}),DS=at({getParentRoute:()=>vt,path:"/plugin-config",component:O_}),OS=at({getParentRoute:()=>vt,path:"/plugin-mirrors",component:R_}),RS=at({getParentRoute:()=>vt,path:"/settings",component:F0}),LS=at({getParentRoute:()=>vt,path:"/survey/webui-feedback",component:lS}),US=at({getParentRoute:()=>vt,path:"/survey/maibot-feedback",component:nS}),BS=at({getParentRoute:()=>vr,path:"*",component:qg}),HS=vr.addChildren([jS,vS,vt.addChildren([bS,NS,yS,wS,_S,SS,CS,TS,kS,ES,AS,DS,OS,zS,MS,RS,LS,US]),BS]),qS=Vb({routeTree:HS,defaultNotFoundComponent:qg,defaultErrorComponent:({error:n})=>e.jsx(yj,{error:n})});function GS({children:n,defaultTheme:i="system",storageKey:r="ui-theme",...d}){const[m,h]=u.useState(()=>localStorage.getItem(r)||i);u.useEffect(()=>{const p=window.document.documentElement;if(p.classList.remove("light","dark"),m==="system"){const g=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";p.classList.add(g);return}p.classList.add(m)},[m]),u.useEffect(()=>{const p=localStorage.getItem("accent-color");if(p){const g=document.documentElement,j={blue:{hsl:"221.2 83.2% 53.3%",darkHsl:"217.2 91.2% 59.8%",gradient:null},purple:{hsl:"271 91% 65%",darkHsl:"270 95% 75%",gradient:null},green:{hsl:"142 71% 45%",darkHsl:"142 76% 36%",gradient:null},orange:{hsl:"25 95% 53%",darkHsl:"20 90% 48%",gradient:null},pink:{hsl:"330 81% 60%",darkHsl:"330 85% 70%",gradient:null},red:{hsl:"0 84% 60%",darkHsl:"0 90% 70%",gradient:null},"gradient-sunset":{hsl:"15 95% 60%",darkHsl:"15 95% 65%",gradient:"linear-gradient(135deg, hsl(25 95% 53%) 0%, hsl(330 81% 60%) 100%)"},"gradient-ocean":{hsl:"200 90% 55%",darkHsl:"200 90% 60%",gradient:"linear-gradient(135deg, hsl(221.2 83.2% 53.3%) 0%, hsl(189 94% 43%) 100%)"},"gradient-forest":{hsl:"150 70% 45%",darkHsl:"150 75% 40%",gradient:"linear-gradient(135deg, hsl(142 71% 45%) 0%, hsl(158 64% 52%) 100%)"},"gradient-aurora":{hsl:"310 85% 65%",darkHsl:"310 90% 70%",gradient:"linear-gradient(135deg, hsl(271 91% 65%) 0%, hsl(330 81% 60%) 100%)"},"gradient-fire":{hsl:"15 95% 55%",darkHsl:"15 95% 60%",gradient:"linear-gradient(135deg, hsl(0 84% 60%) 0%, hsl(25 95% 53%) 100%)"},"gradient-twilight":{hsl:"250 90% 60%",darkHsl:"250 95% 65%",gradient:"linear-gradient(135deg, hsl(239 84% 67%) 0%, hsl(271 91% 65%) 100%)"}}[p];j&&(g.style.setProperty("--primary",j.hsl),j.gradient?(g.style.setProperty("--primary-gradient",j.gradient),g.classList.add("has-gradient")):(g.style.removeProperty("--primary-gradient"),g.classList.remove("has-gradient")))}},[]);const f={theme:m,setTheme:p=>{localStorage.setItem(r,p),h(p)}};return e.jsx(Dg.Provider,{...d,value:f,children:n})}function FS({children:n,defaultEnabled:i=!0,defaultWavesEnabled:r=!0,storageKey:d="enable-animations",wavesStorageKey:m="enable-waves-background"}){const[h,f]=u.useState(()=>{const j=localStorage.getItem(d);return j!==null?j==="true":i}),[p,g]=u.useState(()=>{const j=localStorage.getItem(m);return j!==null?j==="true":r});u.useEffect(()=>{const j=document.documentElement;h?j.classList.remove("no-animations"):j.classList.add("no-animations"),localStorage.setItem(d,String(h))},[h,d]),u.useEffect(()=>{localStorage.setItem(m,String(p))},[p,m]);const b={enableAnimations:h,setEnableAnimations:f,enableWavesBackground:p,setEnableWavesBackground:g};return e.jsx(Og.Provider,{value:b,children:n})}const VS=KN,wj=u.forwardRef(({className:n,...i},r)=>e.jsx(dg,{ref:r,className:q("fixed bottom-0 right-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:max-w-[420px] gap-2",n),...i}));wj.displayName=dg.displayName;const $S=si("group pointer-events-auto relative flex w-full items-center justify-between space-x-2 overflow-hidden rounded-md border p-4 pr-6 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-slide-in-from-right data-[state=open]:animate-fade-in data-[state=closed]:animate-slide-out-to-right data-[state=closed]:animate-fade-out data-[swipe=end]:animate-slide-out-to-right",{variants:{variant:{default:"border bg-primary/5 text-foreground backdrop-blur-sm",destructive:"destructive group border-destructive bg-destructive/10 text-destructive-foreground backdrop-blur-sm"}},defaultVariants:{variant:"default"}}),_j=u.forwardRef(({className:n,variant:i,...r},d)=>e.jsx(ug,{ref:d,className:q($S({variant:i}),n),...r}));_j.displayName=ug.displayName;const QS=u.forwardRef(({className:n,...i},r)=>e.jsx(mg,{ref:r,className:q("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium transition-colors hover:bg-secondary focus:outline-none focus:ring-1 focus:ring-ring disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...i}));QS.displayName=mg.displayName;const Sj=u.forwardRef(({className:n,...i},r)=>e.jsx(hg,{ref:r,className:q("absolute right-1 top-1 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-1 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...i,children:e.jsx(il,{className:"h-4 w-4"})}));Sj.displayName=hg.displayName;const Cj=u.forwardRef(({className:n,...i},r)=>e.jsx(xg,{ref:r,className:q("text-sm font-semibold [&+div]:text-xs",n),...i}));Cj.displayName=xg.displayName;const kj=u.forwardRef(({className:n,...i},r)=>e.jsx(fg,{ref:r,className:q("text-sm opacity-90",n),...i}));kj.displayName=fg.displayName;function IS(){const{toasts:n}=Bs();return e.jsxs(VS,{children:[n.map(function({id:i,title:r,description:d,action:m,...h}){return e.jsxs(_j,{...h,children:[e.jsxs("div",{className:"grid gap-1",children:[r&&e.jsx(Cj,{children:r}),d&&e.jsx(kj,{children:d})]}),m,e.jsx(Sj,{})]},i)}),e.jsx(wj,{})]})}x0.createRoot(document.getElementById("root")).render(e.jsx(u.StrictMode,{children:e.jsx(gS,{children:e.jsx(GS,{defaultTheme:"system",children:e.jsx(FS,{children:e.jsxs(Xw,{children:[e.jsx(Qb,{router:qS}),e.jsx(Pw,{}),e.jsx(IS,{})]})})})})}));
