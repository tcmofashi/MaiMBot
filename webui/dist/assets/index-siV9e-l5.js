import{r as u,j as e,L as Yc,e as ja,b as cN,f as oN,g as dN,h as uN,k as ft,l as mN,m as hN,O as yp,n as xN}from"./router-CWhjJi2n.js";import{a as fN,b as pN,g as gN}from"./react-vendor-Dtc2IqVY.js";import{I as jN,c as vN,J as ci,K as Bc,L as vu,M as NN,N as tr,O as ar,P as bN,n as Nu}from"./utils-CCeOswSm.js";import{L as wp,T as _p,C as Sp,R as yN,a as Cp,V as wN,b as _N,S as kp,c as SN,d as Tp,I as CN,e as Ep,f as kN,g as zp,h as TN,i as EN,j as zN,O as Ap,P as AN,k as Mp,l as Dp,D as Op,A as Rp,m as Lp,n as MN,o as DN,p as Up,q as ON,r as Bp,s as RN,t as LN,u as UN,v as BN,w as HN,x as Hp,y as qp,F as Gp}from"./radix-extra-BM7iD6Dt.js";import{aj as qN,ak as GN,al as VN,am as FN,an as Hc,ao as qc,ap as lr,aq as $N,ar as bu,as as Gc,at as QN,au as YN,av as XN}from"./charts-Dhri-zxi.js";import{S as KN,G as Vp,O as Fp,o as JN,C as $p,p as ZN,T as Qp,D as Yp,R as IN,q as PN,H as Xp,I as WN,J as Kp,K as Jp,L as eb,M as Zp,V as sb,N as Ip,Q as Pp,U as tb,X as ab,Y as Wp,Z as lb,_ as nb,$ as eg,a0 as ib,a1 as rb,a2 as sg,a3 as cb,a4 as ob,a5 as db,a6 as tg,a7 as ag,a8 as lg,a9 as ng,aa as ig,ab as rg,ac as ub}from"./radix-core-C3XKqQJw.js";import{R as Ct,P as br,C as fa,a as Sa,Z as cn,b as Zc,F as Ra,c as mb,S as oi,A as hb,D as xb,d as Ic,e as li,M as un,T as fb,X as dl,f as pb,g as gb,I as La,h as _a,i as $t,j as Pc,E as xr,k as Dt,l as cg,H as jb,m as ts,n as rl,U as fr,o as og,p as dg,L as Xf,K as ug,q as mg,r as vb,s as Xc,t as kt,u as Nb,B as cr,v as Wc,w as $u,x as bb,y as yb,z as zt,G as ao,J as ii,N as Bl,O as pr,Q as yr,V as wb,W as _b,Y as ot,_ as Qu,$ as on,a0 as di,a1 as Hl,a2 as ul,a3 as ui,a4 as Yu,a5 as Sb,a6 as Cb,a7 as kb,a8 as dn,a9 as Tb,aa as hg,ab as Ru,ac as mn,ad as Eb,ae as ri,af as zb,ag as Lu,ah as Uu,ai as xg,aj as Kf,ak as Ab,al as Mb,am as Db,an as Ul,ao as yu,ap as Jf,aq as Ob,ar as wu,as as Rb,at as Lb,au as Ub,av as Bb,aw as fg,ax as pg,ay as gg,az as Hb,aA as Zf,aB as qb,aC as Gb,aD as Vb,aE as Fb}from"./icons-DUfC2NKX.js";import{S as $b,p as Qb,j as Yb,a as Xb,E as If,R as Kb,o as Jb}from"./codemirror-BHeANvwm.js";import{_ as Qt,c as Zb,g as jg,D as Ib}from"./misc-DyBU7ISD.js";import{u as Pb,a as Pf,D as Wb,c as ey,S as sy,h as ty,b as ay,s as ly,K as ny,P as iy,d as ry,C as cy}from"./dnd-Dyi3CnuX.js";import{D as oy,U as dy}from"./uppy-BHC3OXBx.js";import{M as uy,r as my,a as hy,b as xy}from"./markdown-A1ShuLvG.js";import{r as fy,H as eo,P as so,u as py,a as gy,R as jy,B as vy,b as Ny,C as by,M as yy,c as wy}from"./reactflow-B3n3_Vkw.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))d(h);new MutationObserver(h=>{for(const f of h)if(f.type==="childList")for(const x of f.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&d(x)}).observe(document,{childList:!0,subtree:!0});function c(h){const f={};return h.integrity&&(f.integrity=h.integrity),h.referrerPolicy&&(f.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?f.credentials="include":h.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function d(h){if(h.ep)return;h.ep=!0;const f=c(h);fetch(h.href,f)}})();var _u={exports:{}},nr={},Su={exports:{}},Cu={};var Wf;function _y(){return Wf||(Wf=1,(function(n){function i(A,K){var E=A.length;A.push(K);e:for(;0<E;){var se=E-1>>>1,_=A[se];if(0<h(_,K))A[se]=K,A[E]=_,E=se;else break e}}function c(A){return A.length===0?null:A[0]}function d(A){if(A.length===0)return null;var K=A[0],E=A.pop();if(E!==K){A[0]=E;e:for(var se=0,_=A.length,me=_>>>1;se<me;){var re=2*(se+1)-1,le=A[re],pe=re+1,Ne=A[pe];if(0>h(le,E))pe<_&&0>h(Ne,le)?(A[se]=Ne,A[pe]=E,se=pe):(A[se]=le,A[re]=E,se=re);else if(pe<_&&0>h(Ne,E))A[se]=Ne,A[pe]=E,se=pe;else break e}}return K}function h(A,K){var E=A.sortIndex-K.sortIndex;return E!==0?E:A.id-K.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var f=performance;n.unstable_now=function(){return f.now()}}else{var x=Date,j=x.now();n.unstable_now=function(){return x.now()-j}}var p=[],w=[],v=1,y=null,S=3,k=!1,O=!1,Y=!1,L=!1,R=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function C(A){for(var K=c(w);K!==null;){if(K.callback===null)d(w);else if(K.startTime<=A)d(w),K.sortIndex=K.expirationTime,i(p,K);else break;K=c(w)}}function $(A){if(Y=!1,C(A),!O)if(c(p)!==null)O=!0,G||(G=!0,Se());else{var K=c(w);K!==null&&be($,K.startTime-A)}}var G=!1,T=-1,M=5,ne=-1;function fe(){return L?!0:!(n.unstable_now()-ne<M)}function _e(){if(L=!1,G){var A=n.unstable_now();ne=A;var K=!0;try{e:{O=!1,Y&&(Y=!1,H(T),T=-1),k=!0;var E=S;try{s:{for(C(A),y=c(p);y!==null&&!(y.expirationTime>A&&fe());){var se=y.callback;if(typeof se=="function"){y.callback=null,S=y.priorityLevel;var _=se(y.expirationTime<=A);if(A=n.unstable_now(),typeof _=="function"){y.callback=_,C(A),K=!0;break s}y===c(p)&&d(p),C(A)}else d(p);y=c(p)}if(y!==null)K=!0;else{var me=c(w);me!==null&&be($,me.startTime-A),K=!1}}break e}finally{y=null,S=E,k=!1}K=void 0}}finally{K?Se():G=!1}}}var Se;if(typeof D=="function")Se=function(){D(_e)};else if(typeof MessageChannel<"u"){var je=new MessageChannel,ye=je.port2;je.port1.onmessage=_e,Se=function(){ye.postMessage(null)}}else Se=function(){R(_e,0)};function be(A,K){T=R(function(){A(n.unstable_now())},K)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(A){A.callback=null},n.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<A?Math.floor(1e3/A):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function(A){switch(S){case 1:case 2:case 3:var K=3;break;default:K=S}var E=S;S=K;try{return A()}finally{S=E}},n.unstable_requestPaint=function(){L=!0},n.unstable_runWithPriority=function(A,K){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var E=S;S=A;try{return K()}finally{S=E}},n.unstable_scheduleCallback=function(A,K,E){var se=n.unstable_now();switch(typeof E=="object"&&E!==null?(E=E.delay,E=typeof E=="number"&&0<E?se+E:se):E=se,A){case 1:var _=-1;break;case 2:_=250;break;case 5:_=1073741823;break;case 4:_=1e4;break;default:_=5e3}return _=E+_,A={id:v++,callback:K,priorityLevel:A,startTime:E,expirationTime:_,sortIndex:-1},E>se?(A.sortIndex=E,i(w,A),c(p)===null&&A===c(w)&&(Y?(H(T),T=-1):Y=!0,be($,E-se))):(A.sortIndex=_,i(p,A),O||k||(O=!0,G||(G=!0,Se()))),A},n.unstable_shouldYield=fe,n.unstable_wrapCallback=function(A){var K=S;return function(){var E=S;S=K;try{return A.apply(this,arguments)}finally{S=E}}}})(Cu)),Cu}var ep;function Sy(){return ep||(ep=1,Su.exports=_y()),Su.exports}var sp;function Cy(){if(sp)return nr;sp=1;var n=Sy(),i=fN(),c=pN();function d(s){var t="https://react.dev/errors/"+s;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+s+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function h(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function f(s){var t=s,a=s;if(s.alternate)for(;t.return;)t=t.return;else{s=t;do t=s,(t.flags&4098)!==0&&(a=t.return),s=t.return;while(s)}return t.tag===3?a:null}function x(s){if(s.tag===13){var t=s.memoizedState;if(t===null&&(s=s.alternate,s!==null&&(t=s.memoizedState)),t!==null)return t.dehydrated}return null}function j(s){if(s.tag===31){var t=s.memoizedState;if(t===null&&(s=s.alternate,s!==null&&(t=s.memoizedState)),t!==null)return t.dehydrated}return null}function p(s){if(f(s)!==s)throw Error(d(188))}function w(s){var t=s.alternate;if(!t){if(t=f(s),t===null)throw Error(d(188));return t!==s?null:s}for(var a=s,l=t;;){var r=a.return;if(r===null)break;var o=r.alternate;if(o===null){if(l=r.return,l!==null){a=l;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===a)return p(r),s;if(o===l)return p(r),t;o=o.sibling}throw Error(d(188))}if(a.return!==l.return)a=r,l=o;else{for(var m=!1,g=r.child;g;){if(g===a){m=!0,a=r,l=o;break}if(g===l){m=!0,l=r,a=o;break}g=g.sibling}if(!m){for(g=o.child;g;){if(g===a){m=!0,a=o,l=r;break}if(g===l){m=!0,l=o,a=r;break}g=g.sibling}if(!m)throw Error(d(189))}}if(a.alternate!==l)throw Error(d(190))}if(a.tag!==3)throw Error(d(188));return a.stateNode.current===a?s:t}function v(s){var t=s.tag;if(t===5||t===26||t===27||t===6)return s;for(s=s.child;s!==null;){if(t=v(s),t!==null)return t;s=s.sibling}return null}var y=Object.assign,S=Symbol.for("react.element"),k=Symbol.for("react.transitional.element"),O=Symbol.for("react.portal"),Y=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),H=Symbol.for("react.consumer"),D=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),$=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),ne=Symbol.for("react.activity"),fe=Symbol.for("react.memo_cache_sentinel"),_e=Symbol.iterator;function Se(s){return s===null||typeof s!="object"?null:(s=_e&&s[_e]||s["@@iterator"],typeof s=="function"?s:null)}var je=Symbol.for("react.client.reference");function ye(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===je?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case Y:return"Fragment";case R:return"Profiler";case L:return"StrictMode";case $:return"Suspense";case G:return"SuspenseList";case ne:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case O:return"Portal";case D:return s.displayName||"Context";case H:return(s._context.displayName||"Context")+".Consumer";case C:var t=s.render;return s=s.displayName,s||(s=t.displayName||t.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case T:return t=s.displayName||null,t!==null?t:ye(s.type)||"Memo";case M:t=s._payload,s=s._init;try{return ye(s(t))}catch{}}return null}var be=Array.isArray,A=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K=c.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,E={pending:!1,data:null,method:null,action:null},se=[],_=-1;function me(s){return{current:s}}function re(s){0>_||(s.current=se[_],se[_]=null,_--)}function le(s,t){_++,se[_]=s.current,s.current=t}var pe=me(null),Ne=me(null),he=me(null),Q=me(null);function P(s,t){switch(le(he,t),le(Ne,s),le(pe,null),t.nodeType){case 9:case 11:s=(s=t.documentElement)&&(s=s.namespaceURI)?pf(s):0;break;default:if(s=t.tagName,t=t.namespaceURI)t=pf(t),s=gf(t,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}re(pe),le(pe,s)}function q(){re(pe),re(Ne),re(he)}function W(s){s.memoizedState!==null&&le(Q,s);var t=pe.current,a=gf(t,s.type);t!==a&&(le(Ne,s),le(pe,a))}function Ce(s){Ne.current===s&&(re(pe),re(Ne)),Q.current===s&&(re(Q),Pi._currentValue=E)}var Me,ce;function De(s){if(Me===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);Me=t&&t[1]||"",ce=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Me+s+ce}var Fs=!1;function Qs(s,t){if(!s||Fs)return"";Fs=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(t){var ge=function(){throw Error()};if(Object.defineProperty(ge.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ge,[])}catch(ae){var I=ae}Reflect.construct(s,[],ge)}else{try{ge.call()}catch(ae){I=ae}s.call(ge.prototype)}}else{try{throw Error()}catch(ae){I=ae}(ge=s())&&typeof ge.catch=="function"&&ge.catch(function(){})}}catch(ae){if(ae&&I&&typeof ae.stack=="string")return[ae.stack,I.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var o=l.DetermineComponentFrameRoot(),m=o[0],g=o[1];if(m&&g){var z=m.split(`
`),Z=g.split(`
`);for(r=l=0;l<z.length&&!z[l].includes("DetermineComponentFrameRoot");)l++;for(;r<Z.length&&!Z[r].includes("DetermineComponentFrameRoot");)r++;if(l===z.length||r===Z.length)for(l=z.length-1,r=Z.length-1;1<=l&&0<=r&&z[l]!==Z[r];)r--;for(;1<=l&&0<=r;l--,r--)if(z[l]!==Z[r]){if(l!==1||r!==1)do if(l--,r--,0>r||z[l]!==Z[r]){var oe=`
`+z[l].replace(" at new "," at ");return s.displayName&&oe.includes("<anonymous>")&&(oe=oe.replace("<anonymous>",s.displayName)),oe}while(1<=l&&0<=r);break}}}finally{Fs=!1,Error.prepareStackTrace=a}return(a=s?s.displayName||s.name:"")?De(a):""}function ue(s,t){switch(s.tag){case 26:case 27:case 5:return De(s.type);case 16:return De("Lazy");case 13:return s.child!==t&&t!==null?De("Suspense Fallback"):De("Suspense");case 19:return De("SuspenseList");case 0:case 15:return Qs(s.type,!1);case 11:return Qs(s.type.render,!1);case 1:return Qs(s.type,!0);case 31:return De("Activity");default:return""}}function Ee(s){try{var t="",a=null;do t+=ue(s,a),a=s,s=s.return;while(s);return t}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var as=Object.prototype.hasOwnProperty,Ke=n.unstable_scheduleCallback,lt=n.unstable_cancelCallback,Ot=n.unstable_shouldYield,bt=n.unstable_requestPaint,Pe=n.unstable_now,U=n.unstable_getCurrentPriorityLevel,Re=n.unstable_ImmediatePriority,ze=n.unstable_UserBlockingPriority,Ye=n.unstable_NormalPriority,zs=n.unstable_LowPriority,We=n.unstable_IdlePriority,nt=n.log,vs=n.unstable_setDisableYieldValue,ke=null,ve=null;function is(s){if(typeof nt=="function"&&vs(s),ve&&typeof ve.setStrictMode=="function")try{ve.setStrictMode(ke,s)}catch{}}var _s=Math.clz32?Math.clz32:Ys,At=Math.log,Ps=Math.LN2;function Ys(s){return s>>>=0,s===0?32:31-(At(s)/Ps|0)|0}var Et=256,Rt=262144,Ha=4194304;function Yt(s){var t=s&42;if(t!==0)return t;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function qa(s,t,a){var l=s.pendingLanes;if(l===0)return 0;var r=0,o=s.suspendedLanes,m=s.pingedLanes;s=s.warmLanes;var g=l&134217727;return g!==0?(l=g&~o,l!==0?r=Yt(l):(m&=g,m!==0?r=Yt(m):a||(a=g&~s,a!==0&&(r=Yt(a))))):(g=l&~o,g!==0?r=Yt(g):m!==0?r=Yt(m):a||(a=l&~s,a!==0&&(r=Yt(a)))),r===0?0:t!==0&&t!==r&&(t&o)===0&&(o=r&-r,a=t&-t,o>=a||o===32&&(a&4194048)!==0)?t:r}function Ta(s,t){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&t)===0}function ee(s,t){switch(s){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function we(){var s=Ha;return Ha<<=1,(Ha&62914560)===0&&(Ha=4194304),s}function Ve(s){for(var t=[],a=0;31>a;a++)t.push(s);return t}function pt(s,t){s.pendingLanes|=t,t!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Xt(s,t,a,l,r,o){var m=s.pendingLanes;s.pendingLanes=a,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=a,s.entangledLanes&=a,s.errorRecoveryDisabledLanes&=a,s.shellSuspendCounter=0;var g=s.entanglements,z=s.expirationTimes,Z=s.hiddenUpdates;for(a=m&~a;0<a;){var oe=31-_s(a),ge=1<<oe;g[oe]=0,z[oe]=-1;var I=Z[oe];if(I!==null)for(Z[oe]=null,oe=0;oe<I.length;oe++){var ae=I[oe];ae!==null&&(ae.lane&=-536870913)}a&=~ge}l!==0&&Lt(s,l,0),o!==0&&r===0&&s.tag!==0&&(s.suspendedLanes|=o&~(m&~t))}function Lt(s,t,a){s.pendingLanes|=t,s.suspendedLanes&=~t;var l=31-_s(t);s.entangledLanes|=t,s.entanglements[l]=s.entanglements[l]|1073741824|a&261930}function hl(s,t){var a=s.entangledLanes|=t;for(s=s.entanglements;a;){var l=31-_s(a),r=1<<l;r&t|s[l]&t&&(s[l]|=t),a&=~r}}function Vl(s,t){var a=t&-t;return a=(a&42)!==0?1:pn(a),(a&(s.suspendedLanes|t))!==0?0:a}function pn(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function gn(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function V(){var s=K.p;return s!==0?s:(s=window.event,s===void 0?32:qf(s.type))}function de(s,t){var a=K.p;try{return K.p=s,t()}finally{K.p=a}}var qe=Math.random().toString(36).slice(2),Je="__reactFiber$"+qe,Ns="__reactProps$"+qe,ta="__reactContainer$"+qe,aa="__reactEvents$"+qe,Ea="__reactListeners$"+qe,Pg="__reactHandles$"+qe,tm="__reactResources$"+qe,hi="__reactMarker$"+qe;function uo(s){delete s[Je],delete s[Ns],delete s[aa],delete s[Ea],delete s[Pg]}function jn(s){var t=s[Je];if(t)return t;for(var a=s.parentNode;a;){if(t=a[ta]||a[Je]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(s=_f(s);s!==null;){if(a=s[Je])return a;s=_f(s)}return t}s=a,a=s.parentNode}return null}function vn(s){if(s=s[Je]||s[ta]){var t=s.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return s}return null}function xi(s){var t=s.tag;if(t===5||t===26||t===27||t===6)return s.stateNode;throw Error(d(33))}function Nn(s){var t=s[tm];return t||(t=s[tm]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function vt(s){s[hi]=!0}var am=new Set,lm={};function Fl(s,t){bn(s,t),bn(s+"Capture",t)}function bn(s,t){for(lm[s]=t,s=0;s<t.length;s++)am.add(t[s])}var Wg=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),nm={},im={};function ej(s){return as.call(im,s)?!0:as.call(nm,s)?!1:Wg.test(s)?im[s]=!0:(nm[s]=!0,!1)}function Cr(s,t,a){if(ej(t))if(a===null)s.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":s.removeAttribute(t);return;case"boolean":var l=t.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){s.removeAttribute(t);return}}s.setAttribute(t,""+a)}}function kr(s,t,a){if(a===null)s.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(t);return}s.setAttribute(t,""+a)}}function Ga(s,t,a,l){if(l===null)s.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttributeNS(t,a,""+l)}}function la(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function rm(s){var t=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function sj(s,t,a){var l=Object.getOwnPropertyDescriptor(s.constructor.prototype,t);if(!s.hasOwnProperty(t)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var r=l.get,o=l.set;return Object.defineProperty(s,t,{configurable:!0,get:function(){return r.call(this)},set:function(m){a=""+m,o.call(this,m)}}),Object.defineProperty(s,t,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(m){a=""+m},stopTracking:function(){s._valueTracker=null,delete s[t]}}}}function mo(s){if(!s._valueTracker){var t=rm(s)?"checked":"value";s._valueTracker=sj(s,t,""+s[t])}}function cm(s){if(!s)return!1;var t=s._valueTracker;if(!t)return!0;var a=t.getValue(),l="";return s&&(l=rm(s)?s.checked?"true":"false":s.value),s=l,s!==a?(t.setValue(s),!0):!1}function Tr(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var tj=/[\n"\\]/g;function na(s){return s.replace(tj,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function ho(s,t,a,l,r,o,m,g){s.name="",m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"?s.type=m:s.removeAttribute("type"),t!=null?m==="number"?(t===0&&s.value===""||s.value!=t)&&(s.value=""+la(t)):s.value!==""+la(t)&&(s.value=""+la(t)):m!=="submit"&&m!=="reset"||s.removeAttribute("value"),t!=null?xo(s,m,la(t)):a!=null?xo(s,m,la(a)):l!=null&&s.removeAttribute("value"),r==null&&o!=null&&(s.defaultChecked=!!o),r!=null&&(s.checked=r&&typeof r!="function"&&typeof r!="symbol"),g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"?s.name=""+la(g):s.removeAttribute("name")}function om(s,t,a,l,r,o,m,g){if(o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(s.type=o),t!=null||a!=null){if(!(o!=="submit"&&o!=="reset"||t!=null)){mo(s);return}a=a!=null?""+la(a):"",t=t!=null?""+la(t):a,g||t===s.value||(s.value=t),s.defaultValue=t}l=l??r,l=typeof l!="function"&&typeof l!="symbol"&&!!l,s.checked=g?s.checked:!!l,s.defaultChecked=!!l,m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(s.name=m),mo(s)}function xo(s,t,a){t==="number"&&Tr(s.ownerDocument)===s||s.defaultValue===""+a||(s.defaultValue=""+a)}function yn(s,t,a,l){if(s=s.options,t){t={};for(var r=0;r<a.length;r++)t["$"+a[r]]=!0;for(a=0;a<s.length;a++)r=t.hasOwnProperty("$"+s[a].value),s[a].selected!==r&&(s[a].selected=r),r&&l&&(s[a].defaultSelected=!0)}else{for(a=""+la(a),t=null,r=0;r<s.length;r++){if(s[r].value===a){s[r].selected=!0,l&&(s[r].defaultSelected=!0);return}t!==null||s[r].disabled||(t=s[r])}t!==null&&(t.selected=!0)}}function dm(s,t,a){if(t!=null&&(t=""+la(t),t!==s.value&&(s.value=t),a==null)){s.defaultValue!==t&&(s.defaultValue=t);return}s.defaultValue=a!=null?""+la(a):""}function um(s,t,a,l){if(t==null){if(l!=null){if(a!=null)throw Error(d(92));if(be(l)){if(1<l.length)throw Error(d(93));l=l[0]}a=l}a==null&&(a=""),t=a}a=la(t),s.defaultValue=a,l=s.textContent,l===a&&l!==""&&l!==null&&(s.value=l),mo(s)}function wn(s,t){if(t){var a=s.firstChild;if(a&&a===s.lastChild&&a.nodeType===3){a.nodeValue=t;return}}s.textContent=t}var aj=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function mm(s,t,a){var l=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?s.setProperty(t,""):t==="float"?s.cssFloat="":s[t]="":l?s.setProperty(t,a):typeof a!="number"||a===0||aj.has(t)?t==="float"?s.cssFloat=a:s[t]=(""+a).trim():s[t]=a+"px"}function hm(s,t,a){if(t!=null&&typeof t!="object")throw Error(d(62));if(s=s.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||t!=null&&t.hasOwnProperty(l)||(l.indexOf("--")===0?s.setProperty(l,""):l==="float"?s.cssFloat="":s[l]="");for(var r in t)l=t[r],t.hasOwnProperty(r)&&a[r]!==l&&mm(s,r,l)}else for(var o in t)t.hasOwnProperty(o)&&mm(s,o,t[o])}function fo(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lj=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),nj=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Er(s){return nj.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Va(){}var po=null;function go(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var _n=null,Sn=null;function xm(s){var t=vn(s);if(t&&(s=t.stateNode)){var a=s[Ns]||null;e:switch(s=t.stateNode,t.type){case"input":if(ho(s,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=s;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+na(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var l=a[t];if(l!==s&&l.form===s.form){var r=l[Ns]||null;if(!r)throw Error(d(90));ho(l,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(t=0;t<a.length;t++)l=a[t],l.form===s.form&&cm(l)}break e;case"textarea":dm(s,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&yn(s,!!a.multiple,t,!1)}}}var jo=!1;function fm(s,t,a){if(jo)return s(t,a);jo=!0;try{var l=s(t);return l}finally{if(jo=!1,(_n!==null||Sn!==null)&&(pc(),_n&&(t=_n,s=Sn,Sn=_n=null,xm(t),s)))for(t=0;t<s.length;t++)xm(s[t])}}function fi(s,t){var a=s.stateNode;if(a===null)return null;var l=a[Ns]||null;if(l===null)return null;a=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(s=s.type,l=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!l;break e;default:s=!1}if(s)return null;if(a&&typeof a!="function")throw Error(d(231,t,typeof a));return a}var Fa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vo=!1;if(Fa)try{var pi={};Object.defineProperty(pi,"passive",{get:function(){vo=!0}}),window.addEventListener("test",pi,pi),window.removeEventListener("test",pi,pi)}catch{vo=!1}var xl=null,No=null,zr=null;function pm(){if(zr)return zr;var s,t=No,a=t.length,l,r="value"in xl?xl.value:xl.textContent,o=r.length;for(s=0;s<a&&t[s]===r[s];s++);var m=a-s;for(l=1;l<=m&&t[a-l]===r[o-l];l++);return zr=r.slice(s,1<l?1-l:void 0)}function Ar(s){var t=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&t===13&&(s=13)):s=t,s===10&&(s=13),32<=s||s===13?s:0}function Mr(){return!0}function gm(){return!1}function Ut(s){function t(a,l,r,o,m){this._reactName=a,this._targetInst=r,this.type=l,this.nativeEvent=o,this.target=m,this.currentTarget=null;for(var g in s)s.hasOwnProperty(g)&&(a=s[g],this[g]=a?a(o):o[g]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Mr:gm,this.isPropagationStopped=gm,this}return y(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Mr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Mr)},persist:function(){},isPersistent:Mr}),t}var $l={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Dr=Ut($l),gi=y({},$l,{view:0,detail:0}),ij=Ut(gi),bo,yo,ji,Or=y({},gi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_o,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==ji&&(ji&&s.type==="mousemove"?(bo=s.screenX-ji.screenX,yo=s.screenY-ji.screenY):yo=bo=0,ji=s),bo)},movementY:function(s){return"movementY"in s?s.movementY:yo}}),jm=Ut(Or),rj=y({},Or,{dataTransfer:0}),cj=Ut(rj),oj=y({},gi,{relatedTarget:0}),wo=Ut(oj),dj=y({},$l,{animationName:0,elapsedTime:0,pseudoElement:0}),uj=Ut(dj),mj=y({},$l,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),hj=Ut(mj),xj=y({},$l,{data:0}),vm=Ut(xj),fj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pj={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gj={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jj(s){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(s):(s=gj[s])?!!t[s]:!1}function _o(){return jj}var vj=y({},gi,{key:function(s){if(s.key){var t=fj[s.key]||s.key;if(t!=="Unidentified")return t}return s.type==="keypress"?(s=Ar(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?pj[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_o,charCode:function(s){return s.type==="keypress"?Ar(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Ar(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Nj=Ut(vj),bj=y({},Or,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Nm=Ut(bj),yj=y({},gi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_o}),wj=Ut(yj),_j=y({},$l,{propertyName:0,elapsedTime:0,pseudoElement:0}),Sj=Ut(_j),Cj=y({},Or,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),kj=Ut(Cj),Tj=y({},$l,{newState:0,oldState:0}),Ej=Ut(Tj),zj=[9,13,27,32],So=Fa&&"CompositionEvent"in window,vi=null;Fa&&"documentMode"in document&&(vi=document.documentMode);var Aj=Fa&&"TextEvent"in window&&!vi,bm=Fa&&(!So||vi&&8<vi&&11>=vi),ym=" ",wm=!1;function _m(s,t){switch(s){case"keyup":return zj.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Sm(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Cn=!1;function Mj(s,t){switch(s){case"compositionend":return Sm(t);case"keypress":return t.which!==32?null:(wm=!0,ym);case"textInput":return s=t.data,s===ym&&wm?null:s;default:return null}}function Dj(s,t){if(Cn)return s==="compositionend"||!So&&_m(s,t)?(s=pm(),zr=No=xl=null,Cn=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return bm&&t.locale!=="ko"?null:t.data;default:return null}}var Oj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cm(s){var t=s&&s.nodeName&&s.nodeName.toLowerCase();return t==="input"?!!Oj[s.type]:t==="textarea"}function km(s,t,a,l){_n?Sn?Sn.push(l):Sn=[l]:_n=l,t=wc(t,"onChange"),0<t.length&&(a=new Dr("onChange","change",null,a,l),s.push({event:a,listeners:t}))}var Ni=null,bi=null;function Rj(s){df(s,0)}function Rr(s){var t=xi(s);if(cm(t))return s}function Tm(s,t){if(s==="change")return t}var Em=!1;if(Fa){var Co;if(Fa){var ko="oninput"in document;if(!ko){var zm=document.createElement("div");zm.setAttribute("oninput","return;"),ko=typeof zm.oninput=="function"}Co=ko}else Co=!1;Em=Co&&(!document.documentMode||9<document.documentMode)}function Am(){Ni&&(Ni.detachEvent("onpropertychange",Mm),bi=Ni=null)}function Mm(s){if(s.propertyName==="value"&&Rr(bi)){var t=[];km(t,bi,s,go(s)),fm(Rj,t)}}function Lj(s,t,a){s==="focusin"?(Am(),Ni=t,bi=a,Ni.attachEvent("onpropertychange",Mm)):s==="focusout"&&Am()}function Uj(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Rr(bi)}function Bj(s,t){if(s==="click")return Rr(t)}function Hj(s,t){if(s==="input"||s==="change")return Rr(t)}function qj(s,t){return s===t&&(s!==0||1/s===1/t)||s!==s&&t!==t}var Kt=typeof Object.is=="function"?Object.is:qj;function yi(s,t){if(Kt(s,t))return!0;if(typeof s!="object"||s===null||typeof t!="object"||t===null)return!1;var a=Object.keys(s),l=Object.keys(t);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var r=a[l];if(!as.call(t,r)||!Kt(s[r],t[r]))return!1}return!0}function Dm(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Om(s,t){var a=Dm(s);s=0;for(var l;a;){if(a.nodeType===3){if(l=s+a.textContent.length,s<=t&&l>=t)return{node:a,offset:t-s};s=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Dm(a)}}function Rm(s,t){return s&&t?s===t?!0:s&&s.nodeType===3?!1:t&&t.nodeType===3?Rm(s,t.parentNode):"contains"in s?s.contains(t):s.compareDocumentPosition?!!(s.compareDocumentPosition(t)&16):!1:!1}function Lm(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var t=Tr(s.document);t instanceof s.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)s=t.contentWindow;else break;t=Tr(s.document)}return t}function To(s){var t=s&&s.nodeName&&s.nodeName.toLowerCase();return t&&(t==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||t==="textarea"||s.contentEditable==="true")}var Gj=Fa&&"documentMode"in document&&11>=document.documentMode,kn=null,Eo=null,wi=null,zo=!1;function Um(s,t,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;zo||kn==null||kn!==Tr(l)||(l=kn,"selectionStart"in l&&To(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),wi&&yi(wi,l)||(wi=l,l=wc(Eo,"onSelect"),0<l.length&&(t=new Dr("onSelect","select",null,t,a),s.push({event:t,listeners:l}),t.target=kn)))}function Ql(s,t){var a={};return a[s.toLowerCase()]=t.toLowerCase(),a["Webkit"+s]="webkit"+t,a["Moz"+s]="moz"+t,a}var Tn={animationend:Ql("Animation","AnimationEnd"),animationiteration:Ql("Animation","AnimationIteration"),animationstart:Ql("Animation","AnimationStart"),transitionrun:Ql("Transition","TransitionRun"),transitionstart:Ql("Transition","TransitionStart"),transitioncancel:Ql("Transition","TransitionCancel"),transitionend:Ql("Transition","TransitionEnd")},Ao={},Bm={};Fa&&(Bm=document.createElement("div").style,"AnimationEvent"in window||(delete Tn.animationend.animation,delete Tn.animationiteration.animation,delete Tn.animationstart.animation),"TransitionEvent"in window||delete Tn.transitionend.transition);function Yl(s){if(Ao[s])return Ao[s];if(!Tn[s])return s;var t=Tn[s],a;for(a in t)if(t.hasOwnProperty(a)&&a in Bm)return Ao[s]=t[a];return s}var Hm=Yl("animationend"),qm=Yl("animationiteration"),Gm=Yl("animationstart"),Vj=Yl("transitionrun"),Fj=Yl("transitionstart"),$j=Yl("transitioncancel"),Vm=Yl("transitionend"),Fm=new Map,Mo="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Mo.push("scrollEnd");function va(s,t){Fm.set(s,t),Fl(t,[s])}var Lr=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},ia=[],En=0,Do=0;function Ur(){for(var s=En,t=Do=En=0;t<s;){var a=ia[t];ia[t++]=null;var l=ia[t];ia[t++]=null;var r=ia[t];ia[t++]=null;var o=ia[t];if(ia[t++]=null,l!==null&&r!==null){var m=l.pending;m===null?r.next=r:(r.next=m.next,m.next=r),l.pending=r}o!==0&&$m(a,r,o)}}function Br(s,t,a,l){ia[En++]=s,ia[En++]=t,ia[En++]=a,ia[En++]=l,Do|=l,s.lanes|=l,s=s.alternate,s!==null&&(s.lanes|=l)}function Oo(s,t,a,l){return Br(s,t,a,l),Hr(s)}function Xl(s,t){return Br(s,null,null,t),Hr(s)}function $m(s,t,a){s.lanes|=a;var l=s.alternate;l!==null&&(l.lanes|=a);for(var r=!1,o=s.return;o!==null;)o.childLanes|=a,l=o.alternate,l!==null&&(l.childLanes|=a),o.tag===22&&(s=o.stateNode,s===null||s._visibility&1||(r=!0)),s=o,o=o.return;return s.tag===3?(o=s.stateNode,r&&t!==null&&(r=31-_s(a),s=o.hiddenUpdates,l=s[r],l===null?s[r]=[t]:l.push(t),t.lane=a|536870912),o):null}function Hr(s){if(50<Qi)throw Qi=0,Fd=null,Error(d(185));for(var t=s.return;t!==null;)s=t,t=s.return;return s.tag===3?s.stateNode:null}var zn={};function Qj(s,t,a,l){this.tag=s,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jt(s,t,a,l){return new Qj(s,t,a,l)}function Ro(s){return s=s.prototype,!(!s||!s.isReactComponent)}function $a(s,t){var a=s.alternate;return a===null?(a=Jt(s.tag,t,s.key,s.mode),a.elementType=s.elementType,a.type=s.type,a.stateNode=s.stateNode,a.alternate=s,s.alternate=a):(a.pendingProps=t,a.type=s.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=s.flags&65011712,a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,t=s.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=s.sibling,a.index=s.index,a.ref=s.ref,a.refCleanup=s.refCleanup,a}function Qm(s,t){s.flags&=65011714;var a=s.alternate;return a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),s}function qr(s,t,a,l,r,o){var m=0;if(l=s,typeof s=="function")Ro(s)&&(m=1);else if(typeof s=="string")m=Zv(s,a,pe.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case ne:return s=Jt(31,a,t,r),s.elementType=ne,s.lanes=o,s;case Y:return Kl(a.children,r,o,t);case L:m=8,r|=24;break;case R:return s=Jt(12,a,t,r|2),s.elementType=R,s.lanes=o,s;case $:return s=Jt(13,a,t,r),s.elementType=$,s.lanes=o,s;case G:return s=Jt(19,a,t,r),s.elementType=G,s.lanes=o,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case D:m=10;break e;case H:m=9;break e;case C:m=11;break e;case T:m=14;break e;case M:m=16,l=null;break e}m=29,a=Error(d(130,s===null?"null":typeof s,"")),l=null}return t=Jt(m,a,t,r),t.elementType=s,t.type=l,t.lanes=o,t}function Kl(s,t,a,l){return s=Jt(7,s,l,t),s.lanes=a,s}function Lo(s,t,a){return s=Jt(6,s,null,t),s.lanes=a,s}function Ym(s){var t=Jt(18,null,null,0);return t.stateNode=s,t}function Uo(s,t,a){return t=Jt(4,s.children!==null?s.children:[],s.key,t),t.lanes=a,t.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},t}var Xm=new WeakMap;function ra(s,t){if(typeof s=="object"&&s!==null){var a=Xm.get(s);return a!==void 0?a:(t={value:s,source:t,stack:Ee(t)},Xm.set(s,t),t)}return{value:s,source:t,stack:Ee(t)}}var An=[],Mn=0,Gr=null,_i=0,ca=[],oa=0,fl=null,za=1,Aa="";function Qa(s,t){An[Mn++]=_i,An[Mn++]=Gr,Gr=s,_i=t}function Km(s,t,a){ca[oa++]=za,ca[oa++]=Aa,ca[oa++]=fl,fl=s;var l=za;s=Aa;var r=32-_s(l)-1;l&=~(1<<r),a+=1;var o=32-_s(t)+r;if(30<o){var m=r-r%5;o=(l&(1<<m)-1).toString(32),l>>=m,r-=m,za=1<<32-_s(t)+r|a<<r|l,Aa=o+s}else za=1<<o|a<<r|l,Aa=s}function Bo(s){s.return!==null&&(Qa(s,1),Km(s,1,0))}function Ho(s){for(;s===Gr;)Gr=An[--Mn],An[Mn]=null,_i=An[--Mn],An[Mn]=null;for(;s===fl;)fl=ca[--oa],ca[oa]=null,Aa=ca[--oa],ca[oa]=null,za=ca[--oa],ca[oa]=null}function Jm(s,t){ca[oa++]=za,ca[oa++]=Aa,ca[oa++]=fl,za=t.id,Aa=t.overflow,fl=s}var yt=null,Xs=null,bs=!1,pl=null,da=!1,qo=Error(d(519));function gl(s){var t=Error(d(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Si(ra(t,s)),qo}function Zm(s){var t=s.stateNode,a=s.type,l=s.memoizedProps;switch(t[Je]=s,t[Ns]=l,a){case"dialog":fs("cancel",t),fs("close",t);break;case"iframe":case"object":case"embed":fs("load",t);break;case"video":case"audio":for(a=0;a<Xi.length;a++)fs(Xi[a],t);break;case"source":fs("error",t);break;case"img":case"image":case"link":fs("error",t),fs("load",t);break;case"details":fs("toggle",t);break;case"input":fs("invalid",t),om(t,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":fs("invalid",t);break;case"textarea":fs("invalid",t),um(t,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||l.suppressHydrationWarning===!0||xf(t.textContent,a)?(l.popover!=null&&(fs("beforetoggle",t),fs("toggle",t)),l.onScroll!=null&&fs("scroll",t),l.onScrollEnd!=null&&fs("scrollend",t),l.onClick!=null&&(t.onclick=Va),t=!0):t=!1,t||gl(s,!0)}function Im(s){for(yt=s.return;yt;)switch(yt.tag){case 5:case 31:case 13:da=!1;return;case 27:case 3:da=!0;return;default:yt=yt.return}}function Dn(s){if(s!==yt)return!1;if(!bs)return Im(s),bs=!0,!1;var t=s.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=s.type,a=!(a!=="form"&&a!=="button")||lu(s.type,s.memoizedProps)),a=!a),a&&Xs&&gl(s),Im(s),t===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(d(317));Xs=wf(s)}else if(t===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(d(317));Xs=wf(s)}else t===27?(t=Xs,Al(s.type)?(s=ou,ou=null,Xs=s):Xs=t):Xs=yt?ma(s.stateNode.nextSibling):null;return!0}function Jl(){Xs=yt=null,bs=!1}function Go(){var s=pl;return s!==null&&(Gt===null?Gt=s:Gt.push.apply(Gt,s),pl=null),s}function Si(s){pl===null?pl=[s]:pl.push(s)}var Vo=me(null),Zl=null,Ya=null;function jl(s,t,a){le(Vo,t._currentValue),t._currentValue=a}function Xa(s){s._currentValue=Vo.current,re(Vo)}function Fo(s,t,a){for(;s!==null;){var l=s.alternate;if((s.childLanes&t)!==t?(s.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),s===a)break;s=s.return}}function $o(s,t,a,l){var r=s.child;for(r!==null&&(r.return=s);r!==null;){var o=r.dependencies;if(o!==null){var m=r.child;o=o.firstContext;e:for(;o!==null;){var g=o;o=r;for(var z=0;z<t.length;z++)if(g.context===t[z]){o.lanes|=a,g=o.alternate,g!==null&&(g.lanes|=a),Fo(o.return,a,s),l||(m=null);break e}o=g.next}}else if(r.tag===18){if(m=r.return,m===null)throw Error(d(341));m.lanes|=a,o=m.alternate,o!==null&&(o.lanes|=a),Fo(m,a,s),m=null}else m=r.child;if(m!==null)m.return=r;else for(m=r;m!==null;){if(m===s){m=null;break}if(r=m.sibling,r!==null){r.return=m.return,m=r;break}m=m.return}r=m}}function On(s,t,a,l){s=null;for(var r=t,o=!1;r!==null;){if(!o){if((r.flags&524288)!==0)o=!0;else if((r.flags&262144)!==0)break}if(r.tag===10){var m=r.alternate;if(m===null)throw Error(d(387));if(m=m.memoizedProps,m!==null){var g=r.type;Kt(r.pendingProps.value,m.value)||(s!==null?s.push(g):s=[g])}}else if(r===Q.current){if(m=r.alternate,m===null)throw Error(d(387));m.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(s!==null?s.push(Pi):s=[Pi])}r=r.return}s!==null&&$o(t,s,a,l),t.flags|=262144}function Vr(s){for(s=s.firstContext;s!==null;){if(!Kt(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Il(s){Zl=s,Ya=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function wt(s){return Pm(Zl,s)}function Fr(s,t){return Zl===null&&Il(s),Pm(s,t)}function Pm(s,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},Ya===null){if(s===null)throw Error(d(308));Ya=t,s.dependencies={lanes:0,firstContext:t},s.flags|=524288}else Ya=Ya.next=t;return a}var Yj=typeof AbortController<"u"?AbortController:function(){var s=[],t=this.signal={aborted:!1,addEventListener:function(a,l){s.push(l)}};this.abort=function(){t.aborted=!0,s.forEach(function(a){return a()})}},Xj=n.unstable_scheduleCallback,Kj=n.unstable_NormalPriority,ut={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Qo(){return{controller:new Yj,data:new Map,refCount:0}}function Ci(s){s.refCount--,s.refCount===0&&Xj(Kj,function(){s.controller.abort()})}var ki=null,Yo=0,Rn=0,Ln=null;function Jj(s,t){if(ki===null){var a=ki=[];Yo=0,Rn=Jd(),Ln={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Yo++,t.then(Wm,Wm),t}function Wm(){if(--Yo===0&&ki!==null){Ln!==null&&(Ln.status="fulfilled");var s=ki;ki=null,Rn=0,Ln=null;for(var t=0;t<s.length;t++)(0,s[t])()}}function Zj(s,t){var a=[],l={status:"pending",value:null,reason:null,then:function(r){a.push(r)}};return s.then(function(){l.status="fulfilled",l.value=t;for(var r=0;r<a.length;r++)(0,a[r])(t)},function(r){for(l.status="rejected",l.reason=r,r=0;r<a.length;r++)(0,a[r])(void 0)}),l}var eh=A.S;A.S=function(s,t){Ux=Pe(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&Jj(s,t),eh!==null&&eh(s,t)};var Pl=me(null);function Xo(){var s=Pl.current;return s!==null?s:Us.pooledCache}function $r(s,t){t===null?le(Pl,Pl.current):le(Pl,t.pool)}function sh(){var s=Xo();return s===null?null:{parent:ut._currentValue,pool:s}}var Un=Error(d(460)),Ko=Error(d(474)),Qr=Error(d(542)),Yr={then:function(){}};function th(s){return s=s.status,s==="fulfilled"||s==="rejected"}function ah(s,t,a){switch(a=s[a],a===void 0?s.push(t):a!==t&&(t.then(Va,Va),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw s=t.reason,nh(s),s;default:if(typeof t.status=="string")t.then(Va,Va);else{if(s=Us,s!==null&&100<s.shellSuspendCounter)throw Error(d(482));s=t,s.status="pending",s.then(function(l){if(t.status==="pending"){var r=t;r.status="fulfilled",r.value=l}},function(l){if(t.status==="pending"){var r=t;r.status="rejected",r.reason=l}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw s=t.reason,nh(s),s}throw en=t,Un}}function Wl(s){try{var t=s._init;return t(s._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(en=a,Un):a}}var en=null;function lh(){if(en===null)throw Error(d(459));var s=en;return en=null,s}function nh(s){if(s===Un||s===Qr)throw Error(d(483))}var Bn=null,Ti=0;function Xr(s){var t=Ti;return Ti+=1,Bn===null&&(Bn=[]),ah(Bn,s,t)}function Ei(s,t){t=t.props.ref,s.ref=t!==void 0?t:null}function Kr(s,t){throw t.$$typeof===S?Error(d(525)):(s=Object.prototype.toString.call(t),Error(d(31,s==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":s)))}function ih(s){function t(F,B){if(s){var J=F.deletions;J===null?(F.deletions=[B],F.flags|=16):J.push(B)}}function a(F,B){if(!s)return null;for(;B!==null;)t(F,B),B=B.sibling;return null}function l(F){for(var B=new Map;F!==null;)F.key!==null?B.set(F.key,F):B.set(F.index,F),F=F.sibling;return B}function r(F,B){return F=$a(F,B),F.index=0,F.sibling=null,F}function o(F,B,J){return F.index=J,s?(J=F.alternate,J!==null?(J=J.index,J<B?(F.flags|=67108866,B):J):(F.flags|=67108866,B)):(F.flags|=1048576,B)}function m(F){return s&&F.alternate===null&&(F.flags|=67108866),F}function g(F,B,J,xe){return B===null||B.tag!==6?(B=Lo(J,F.mode,xe),B.return=F,B):(B=r(B,J),B.return=F,B)}function z(F,B,J,xe){var Ge=J.type;return Ge===Y?oe(F,B,J.props.children,xe,J.key):B!==null&&(B.elementType===Ge||typeof Ge=="object"&&Ge!==null&&Ge.$$typeof===M&&Wl(Ge)===B.type)?(B=r(B,J.props),Ei(B,J),B.return=F,B):(B=qr(J.type,J.key,J.props,null,F.mode,xe),Ei(B,J),B.return=F,B)}function Z(F,B,J,xe){return B===null||B.tag!==4||B.stateNode.containerInfo!==J.containerInfo||B.stateNode.implementation!==J.implementation?(B=Uo(J,F.mode,xe),B.return=F,B):(B=r(B,J.children||[]),B.return=F,B)}function oe(F,B,J,xe,Ge){return B===null||B.tag!==7?(B=Kl(J,F.mode,xe,Ge),B.return=F,B):(B=r(B,J),B.return=F,B)}function ge(F,B,J){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=Lo(""+B,F.mode,J),B.return=F,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case k:return J=qr(B.type,B.key,B.props,null,F.mode,J),Ei(J,B),J.return=F,J;case O:return B=Uo(B,F.mode,J),B.return=F,B;case M:return B=Wl(B),ge(F,B,J)}if(be(B)||Se(B))return B=Kl(B,F.mode,J,null),B.return=F,B;if(typeof B.then=="function")return ge(F,Xr(B),J);if(B.$$typeof===D)return ge(F,Fr(F,B),J);Kr(F,B)}return null}function I(F,B,J,xe){var Ge=B!==null?B.key:null;if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return Ge!==null?null:g(F,B,""+J,xe);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case k:return J.key===Ge?z(F,B,J,xe):null;case O:return J.key===Ge?Z(F,B,J,xe):null;case M:return J=Wl(J),I(F,B,J,xe)}if(be(J)||Se(J))return Ge!==null?null:oe(F,B,J,xe,null);if(typeof J.then=="function")return I(F,B,Xr(J),xe);if(J.$$typeof===D)return I(F,B,Fr(F,J),xe);Kr(F,J)}return null}function ae(F,B,J,xe,Ge){if(typeof xe=="string"&&xe!==""||typeof xe=="number"||typeof xe=="bigint")return F=F.get(J)||null,g(B,F,""+xe,Ge);if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case k:return F=F.get(xe.key===null?J:xe.key)||null,z(B,F,xe,Ge);case O:return F=F.get(xe.key===null?J:xe.key)||null,Z(B,F,xe,Ge);case M:return xe=Wl(xe),ae(F,B,J,xe,Ge)}if(be(xe)||Se(xe))return F=F.get(J)||null,oe(B,F,xe,Ge,null);if(typeof xe.then=="function")return ae(F,B,J,Xr(xe),Ge);if(xe.$$typeof===D)return ae(F,B,J,Fr(B,xe),Ge);Kr(B,xe)}return null}function Ae(F,B,J,xe){for(var Ge=null,Ss=null,Oe=B,ls=B=0,js=null;Oe!==null&&ls<J.length;ls++){Oe.index>ls?(js=Oe,Oe=null):js=Oe.sibling;var Cs=I(F,Oe,J[ls],xe);if(Cs===null){Oe===null&&(Oe=js);break}s&&Oe&&Cs.alternate===null&&t(F,Oe),B=o(Cs,B,ls),Ss===null?Ge=Cs:Ss.sibling=Cs,Ss=Cs,Oe=js}if(ls===J.length)return a(F,Oe),bs&&Qa(F,ls),Ge;if(Oe===null){for(;ls<J.length;ls++)Oe=ge(F,J[ls],xe),Oe!==null&&(B=o(Oe,B,ls),Ss===null?Ge=Oe:Ss.sibling=Oe,Ss=Oe);return bs&&Qa(F,ls),Ge}for(Oe=l(Oe);ls<J.length;ls++)js=ae(Oe,F,ls,J[ls],xe),js!==null&&(s&&js.alternate!==null&&Oe.delete(js.key===null?ls:js.key),B=o(js,B,ls),Ss===null?Ge=js:Ss.sibling=js,Ss=js);return s&&Oe.forEach(function(Ll){return t(F,Ll)}),bs&&Qa(F,ls),Ge}function Xe(F,B,J,xe){if(J==null)throw Error(d(151));for(var Ge=null,Ss=null,Oe=B,ls=B=0,js=null,Cs=J.next();Oe!==null&&!Cs.done;ls++,Cs=J.next()){Oe.index>ls?(js=Oe,Oe=null):js=Oe.sibling;var Ll=I(F,Oe,Cs.value,xe);if(Ll===null){Oe===null&&(Oe=js);break}s&&Oe&&Ll.alternate===null&&t(F,Oe),B=o(Ll,B,ls),Ss===null?Ge=Ll:Ss.sibling=Ll,Ss=Ll,Oe=js}if(Cs.done)return a(F,Oe),bs&&Qa(F,ls),Ge;if(Oe===null){for(;!Cs.done;ls++,Cs=J.next())Cs=ge(F,Cs.value,xe),Cs!==null&&(B=o(Cs,B,ls),Ss===null?Ge=Cs:Ss.sibling=Cs,Ss=Cs);return bs&&Qa(F,ls),Ge}for(Oe=l(Oe);!Cs.done;ls++,Cs=J.next())Cs=ae(Oe,F,ls,Cs.value,xe),Cs!==null&&(s&&Cs.alternate!==null&&Oe.delete(Cs.key===null?ls:Cs.key),B=o(Cs,B,ls),Ss===null?Ge=Cs:Ss.sibling=Cs,Ss=Cs);return s&&Oe.forEach(function(rN){return t(F,rN)}),bs&&Qa(F,ls),Ge}function Rs(F,B,J,xe){if(typeof J=="object"&&J!==null&&J.type===Y&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case k:e:{for(var Ge=J.key;B!==null;){if(B.key===Ge){if(Ge=J.type,Ge===Y){if(B.tag===7){a(F,B.sibling),xe=r(B,J.props.children),xe.return=F,F=xe;break e}}else if(B.elementType===Ge||typeof Ge=="object"&&Ge!==null&&Ge.$$typeof===M&&Wl(Ge)===B.type){a(F,B.sibling),xe=r(B,J.props),Ei(xe,J),xe.return=F,F=xe;break e}a(F,B);break}else t(F,B);B=B.sibling}J.type===Y?(xe=Kl(J.props.children,F.mode,xe,J.key),xe.return=F,F=xe):(xe=qr(J.type,J.key,J.props,null,F.mode,xe),Ei(xe,J),xe.return=F,F=xe)}return m(F);case O:e:{for(Ge=J.key;B!==null;){if(B.key===Ge)if(B.tag===4&&B.stateNode.containerInfo===J.containerInfo&&B.stateNode.implementation===J.implementation){a(F,B.sibling),xe=r(B,J.children||[]),xe.return=F,F=xe;break e}else{a(F,B);break}else t(F,B);B=B.sibling}xe=Uo(J,F.mode,xe),xe.return=F,F=xe}return m(F);case M:return J=Wl(J),Rs(F,B,J,xe)}if(be(J))return Ae(F,B,J,xe);if(Se(J)){if(Ge=Se(J),typeof Ge!="function")throw Error(d(150));return J=Ge.call(J),Xe(F,B,J,xe)}if(typeof J.then=="function")return Rs(F,B,Xr(J),xe);if(J.$$typeof===D)return Rs(F,B,Fr(F,J),xe);Kr(F,J)}return typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint"?(J=""+J,B!==null&&B.tag===6?(a(F,B.sibling),xe=r(B,J),xe.return=F,F=xe):(a(F,B),xe=Lo(J,F.mode,xe),xe.return=F,F=xe),m(F)):a(F,B)}return function(F,B,J,xe){try{Ti=0;var Ge=Rs(F,B,J,xe);return Bn=null,Ge}catch(Oe){if(Oe===Un||Oe===Qr)throw Oe;var Ss=Jt(29,Oe,null,F.mode);return Ss.lanes=xe,Ss.return=F,Ss}finally{}}}var sn=ih(!0),rh=ih(!1),vl=!1;function Jo(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Zo(s,t){s=s.updateQueue,t.updateQueue===s&&(t.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Nl(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function bl(s,t,a){var l=s.updateQueue;if(l===null)return null;if(l=l.shared,(ks&2)!==0){var r=l.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),l.pending=t,t=Hr(s),$m(s,null,a),t}return Br(s,l,t,a),Hr(s)}function zi(s,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var l=t.lanes;l&=s.pendingLanes,a|=l,t.lanes=a,hl(s,a)}}function Io(s,t){var a=s.updateQueue,l=s.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var r=null,o=null;if(a=a.firstBaseUpdate,a!==null){do{var m={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};o===null?r=o=m:o=o.next=m,a=a.next}while(a!==null);o===null?r=o=t:o=o.next=t}else r=o=t;a={baseState:l.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:l.shared,callbacks:l.callbacks},s.updateQueue=a;return}s=a.lastBaseUpdate,s===null?a.firstBaseUpdate=t:s.next=t,a.lastBaseUpdate=t}var Po=!1;function Ai(){if(Po){var s=Ln;if(s!==null)throw s}}function Mi(s,t,a,l){Po=!1;var r=s.updateQueue;vl=!1;var o=r.firstBaseUpdate,m=r.lastBaseUpdate,g=r.shared.pending;if(g!==null){r.shared.pending=null;var z=g,Z=z.next;z.next=null,m===null?o=Z:m.next=Z,m=z;var oe=s.alternate;oe!==null&&(oe=oe.updateQueue,g=oe.lastBaseUpdate,g!==m&&(g===null?oe.firstBaseUpdate=Z:g.next=Z,oe.lastBaseUpdate=z))}if(o!==null){var ge=r.baseState;m=0,oe=Z=z=null,g=o;do{var I=g.lane&-536870913,ae=I!==g.lane;if(ae?(gs&I)===I:(l&I)===I){I!==0&&I===Rn&&(Po=!0),oe!==null&&(oe=oe.next={lane:0,tag:g.tag,payload:g.payload,callback:null,next:null});e:{var Ae=s,Xe=g;I=t;var Rs=a;switch(Xe.tag){case 1:if(Ae=Xe.payload,typeof Ae=="function"){ge=Ae.call(Rs,ge,I);break e}ge=Ae;break e;case 3:Ae.flags=Ae.flags&-65537|128;case 0:if(Ae=Xe.payload,I=typeof Ae=="function"?Ae.call(Rs,ge,I):Ae,I==null)break e;ge=y({},ge,I);break e;case 2:vl=!0}}I=g.callback,I!==null&&(s.flags|=64,ae&&(s.flags|=8192),ae=r.callbacks,ae===null?r.callbacks=[I]:ae.push(I))}else ae={lane:I,tag:g.tag,payload:g.payload,callback:g.callback,next:null},oe===null?(Z=oe=ae,z=ge):oe=oe.next=ae,m|=I;if(g=g.next,g===null){if(g=r.shared.pending,g===null)break;ae=g,g=ae.next,ae.next=null,r.lastBaseUpdate=ae,r.shared.pending=null}}while(!0);oe===null&&(z=ge),r.baseState=z,r.firstBaseUpdate=Z,r.lastBaseUpdate=oe,o===null&&(r.shared.lanes=0),Cl|=m,s.lanes=m,s.memoizedState=ge}}function ch(s,t){if(typeof s!="function")throw Error(d(191,s));s.call(t)}function oh(s,t){var a=s.callbacks;if(a!==null)for(s.callbacks=null,s=0;s<a.length;s++)ch(a[s],t)}var Hn=me(null),Jr=me(0);function dh(s,t){s=tl,le(Jr,s),le(Hn,t),tl=s|t.baseLanes}function Wo(){le(Jr,tl),le(Hn,Hn.current)}function ed(){tl=Jr.current,re(Hn),re(Jr)}var Zt=me(null),ua=null;function yl(s){var t=s.alternate;le(it,it.current&1),le(Zt,s),ua===null&&(t===null||Hn.current!==null||t.memoizedState!==null)&&(ua=s)}function sd(s){le(it,it.current),le(Zt,s),ua===null&&(ua=s)}function uh(s){s.tag===22?(le(it,it.current),le(Zt,s),ua===null&&(ua=s)):wl()}function wl(){le(it,it.current),le(Zt,Zt.current)}function It(s){re(Zt),ua===s&&(ua=null),re(it)}var it=me(0);function Zr(s){for(var t=s;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||ru(a)||cu(a)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break;for(;t.sibling===null;){if(t.return===null||t.return===s)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ka=0,es=null,Ds=null,mt=null,Ir=!1,qn=!1,tn=!1,Pr=0,Di=0,Gn=null,Ij=0;function Ws(){throw Error(d(321))}function td(s,t){if(t===null)return!1;for(var a=0;a<t.length&&a<s.length;a++)if(!Kt(s[a],t[a]))return!1;return!0}function ad(s,t,a,l,r,o){return Ka=o,es=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,A.H=s===null||s.memoizedState===null?Kh:jd,tn=!1,o=a(l,r),tn=!1,qn&&(o=hh(t,a,l,r)),mh(s),o}function mh(s){A.H=Li;var t=Ds!==null&&Ds.next!==null;if(Ka=0,mt=Ds=es=null,Ir=!1,Di=0,Gn=null,t)throw Error(d(300));s===null||ht||(s=s.dependencies,s!==null&&Vr(s)&&(ht=!0))}function hh(s,t,a,l){es=s;var r=0;do{if(qn&&(Gn=null),Di=0,qn=!1,25<=r)throw Error(d(301));if(r+=1,mt=Ds=null,s.updateQueue!=null){var o=s.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,o.memoCache!=null&&(o.memoCache.index=0)}A.H=Jh,o=t(a,l)}while(qn);return o}function Pj(){var s=A.H,t=s.useState()[0];return t=typeof t.then=="function"?Oi(t):t,s=s.useState()[0],(Ds!==null?Ds.memoizedState:null)!==s&&(es.flags|=1024),t}function ld(){var s=Pr!==0;return Pr=0,s}function nd(s,t,a){t.updateQueue=s.updateQueue,t.flags&=-2053,s.lanes&=~a}function id(s){if(Ir){for(s=s.memoizedState;s!==null;){var t=s.queue;t!==null&&(t.pending=null),s=s.next}Ir=!1}Ka=0,mt=Ds=es=null,qn=!1,Di=Pr=0,Gn=null}function Mt(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mt===null?es.memoizedState=mt=s:mt=mt.next=s,mt}function rt(){if(Ds===null){var s=es.alternate;s=s!==null?s.memoizedState:null}else s=Ds.next;var t=mt===null?es.memoizedState:mt.next;if(t!==null)mt=t,Ds=s;else{if(s===null)throw es.alternate===null?Error(d(467)):Error(d(310));Ds=s,s={memoizedState:Ds.memoizedState,baseState:Ds.baseState,baseQueue:Ds.baseQueue,queue:Ds.queue,next:null},mt===null?es.memoizedState=mt=s:mt=mt.next=s}return mt}function Wr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Oi(s){var t=Di;return Di+=1,Gn===null&&(Gn=[]),s=ah(Gn,s,t),t=es,(mt===null?t.memoizedState:mt.next)===null&&(t=t.alternate,A.H=t===null||t.memoizedState===null?Kh:jd),s}function ec(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Oi(s);if(s.$$typeof===D)return wt(s)}throw Error(d(438,String(s)))}function rd(s){var t=null,a=es.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var l=es.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(t={data:l.data.map(function(r){return r.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=Wr(),es.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(s),l=0;l<s;l++)a[l]=fe;return t.index++,a}function Ja(s,t){return typeof t=="function"?t(s):t}function sc(s){var t=rt();return cd(t,Ds,s)}function cd(s,t,a){var l=s.queue;if(l===null)throw Error(d(311));l.lastRenderedReducer=a;var r=s.baseQueue,o=l.pending;if(o!==null){if(r!==null){var m=r.next;r.next=o.next,o.next=m}t.baseQueue=r=o,l.pending=null}if(o=s.baseState,r===null)s.memoizedState=o;else{t=r.next;var g=m=null,z=null,Z=t,oe=!1;do{var ge=Z.lane&-536870913;if(ge!==Z.lane?(gs&ge)===ge:(Ka&ge)===ge){var I=Z.revertLane;if(I===0)z!==null&&(z=z.next={lane:0,revertLane:0,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),ge===Rn&&(oe=!0);else if((Ka&I)===I){Z=Z.next,I===Rn&&(oe=!0);continue}else ge={lane:0,revertLane:Z.revertLane,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},z===null?(g=z=ge,m=o):z=z.next=ge,es.lanes|=I,Cl|=I;ge=Z.action,tn&&a(o,ge),o=Z.hasEagerState?Z.eagerState:a(o,ge)}else I={lane:ge,revertLane:Z.revertLane,gesture:Z.gesture,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},z===null?(g=z=I,m=o):z=z.next=I,es.lanes|=ge,Cl|=ge;Z=Z.next}while(Z!==null&&Z!==t);if(z===null?m=o:z.next=g,!Kt(o,s.memoizedState)&&(ht=!0,oe&&(a=Ln,a!==null)))throw a;s.memoizedState=o,s.baseState=m,s.baseQueue=z,l.lastRenderedState=o}return r===null&&(l.lanes=0),[s.memoizedState,l.dispatch]}function od(s){var t=rt(),a=t.queue;if(a===null)throw Error(d(311));a.lastRenderedReducer=s;var l=a.dispatch,r=a.pending,o=t.memoizedState;if(r!==null){a.pending=null;var m=r=r.next;do o=s(o,m.action),m=m.next;while(m!==r);Kt(o,t.memoizedState)||(ht=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),a.lastRenderedState=o}return[o,l]}function xh(s,t,a){var l=es,r=rt(),o=bs;if(o){if(a===void 0)throw Error(d(407));a=a()}else a=t();var m=!Kt((Ds||r).memoizedState,a);if(m&&(r.memoizedState=a,ht=!0),r=r.queue,md(gh.bind(null,l,r,s),[s]),r.getSnapshot!==t||m||mt!==null&&mt.memoizedState.tag&1){if(l.flags|=2048,Vn(9,{destroy:void 0},ph.bind(null,l,r,a,t),null),Us===null)throw Error(d(349));o||(Ka&127)!==0||fh(l,t,a)}return a}function fh(s,t,a){s.flags|=16384,s={getSnapshot:t,value:a},t=es.updateQueue,t===null?(t=Wr(),es.updateQueue=t,t.stores=[s]):(a=t.stores,a===null?t.stores=[s]:a.push(s))}function ph(s,t,a,l){t.value=a,t.getSnapshot=l,jh(t)&&vh(s)}function gh(s,t,a){return a(function(){jh(t)&&vh(s)})}function jh(s){var t=s.getSnapshot;s=s.value;try{var a=t();return!Kt(s,a)}catch{return!0}}function vh(s){var t=Xl(s,2);t!==null&&Vt(t,s,2)}function dd(s){var t=Mt();if(typeof s=="function"){var a=s;if(s=a(),tn){is(!0);try{a()}finally{is(!1)}}}return t.memoizedState=t.baseState=s,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ja,lastRenderedState:s},t}function Nh(s,t,a,l){return s.baseState=a,cd(s,Ds,typeof l=="function"?l:Ja)}function Wj(s,t,a,l,r){if(lc(s))throw Error(d(485));if(s=t.action,s!==null){var o={payload:r,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(m){o.listeners.push(m)}};A.T!==null?a(!0):o.isTransition=!1,l(o),a=t.pending,a===null?(o.next=t.pending=o,bh(t,o)):(o.next=a.next,t.pending=a.next=o)}}function bh(s,t){var a=t.action,l=t.payload,r=s.state;if(t.isTransition){var o=A.T,m={};A.T=m;try{var g=a(r,l),z=A.S;z!==null&&z(m,g),yh(s,t,g)}catch(Z){ud(s,t,Z)}finally{o!==null&&m.types!==null&&(o.types=m.types),A.T=o}}else try{o=a(r,l),yh(s,t,o)}catch(Z){ud(s,t,Z)}}function yh(s,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){wh(s,t,l)},function(l){return ud(s,t,l)}):wh(s,t,a)}function wh(s,t,a){t.status="fulfilled",t.value=a,_h(t),s.state=a,t=s.pending,t!==null&&(a=t.next,a===t?s.pending=null:(a=a.next,t.next=a,bh(s,a)))}function ud(s,t,a){var l=s.pending;if(s.pending=null,l!==null){l=l.next;do t.status="rejected",t.reason=a,_h(t),t=t.next;while(t!==l)}s.action=null}function _h(s){s=s.listeners;for(var t=0;t<s.length;t++)(0,s[t])()}function Sh(s,t){return t}function Ch(s,t){if(bs){var a=Us.formState;if(a!==null){e:{var l=es;if(bs){if(Xs){s:{for(var r=Xs,o=da;r.nodeType!==8;){if(!o){r=null;break s}if(r=ma(r.nextSibling),r===null){r=null;break s}}o=r.data,r=o==="F!"||o==="F"?r:null}if(r){Xs=ma(r.nextSibling),l=r.data==="F!";break e}}gl(l)}l=!1}l&&(t=a[0])}}return a=Mt(),a.memoizedState=a.baseState=t,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sh,lastRenderedState:t},a.queue=l,a=Qh.bind(null,es,l),l.dispatch=a,l=dd(!1),o=gd.bind(null,es,!1,l.queue),l=Mt(),r={state:t,dispatch:null,action:s,pending:null},l.queue=r,a=Wj.bind(null,es,r,o,a),r.dispatch=a,l.memoizedState=s,[t,a,!1]}function kh(s){var t=rt();return Th(t,Ds,s)}function Th(s,t,a){if(t=cd(s,t,Sh)[0],s=sc(Ja)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var l=Oi(t)}catch(m){throw m===Un?Qr:m}else l=t;t=rt();var r=t.queue,o=r.dispatch;return a!==t.memoizedState&&(es.flags|=2048,Vn(9,{destroy:void 0},ev.bind(null,r,a),null)),[l,o,s]}function ev(s,t){s.action=t}function Eh(s){var t=rt(),a=Ds;if(a!==null)return Th(t,a,s);rt(),t=t.memoizedState,a=rt();var l=a.queue.dispatch;return a.memoizedState=s,[t,l,!1]}function Vn(s,t,a,l){return s={tag:s,create:a,deps:l,inst:t,next:null},t=es.updateQueue,t===null&&(t=Wr(),es.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=s.next=s:(l=a.next,a.next=s,s.next=l,t.lastEffect=s),s}function zh(){return rt().memoizedState}function tc(s,t,a,l){var r=Mt();es.flags|=s,r.memoizedState=Vn(1|t,{destroy:void 0},a,l===void 0?null:l)}function ac(s,t,a,l){var r=rt();l=l===void 0?null:l;var o=r.memoizedState.inst;Ds!==null&&l!==null&&td(l,Ds.memoizedState.deps)?r.memoizedState=Vn(t,o,a,l):(es.flags|=s,r.memoizedState=Vn(1|t,o,a,l))}function Ah(s,t){tc(8390656,8,s,t)}function md(s,t){ac(2048,8,s,t)}function sv(s){es.flags|=4;var t=es.updateQueue;if(t===null)t=Wr(),es.updateQueue=t,t.events=[s];else{var a=t.events;a===null?t.events=[s]:a.push(s)}}function Mh(s){var t=rt().memoizedState;return sv({ref:t,nextImpl:s}),function(){if((ks&2)!==0)throw Error(d(440));return t.impl.apply(void 0,arguments)}}function Dh(s,t){return ac(4,2,s,t)}function Oh(s,t){return ac(4,4,s,t)}function Rh(s,t){if(typeof t=="function"){s=s();var a=t(s);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return s=s(),t.current=s,function(){t.current=null}}function Lh(s,t,a){a=a!=null?a.concat([s]):null,ac(4,4,Rh.bind(null,t,s),a)}function hd(){}function Uh(s,t){var a=rt();t=t===void 0?null:t;var l=a.memoizedState;return t!==null&&td(t,l[1])?l[0]:(a.memoizedState=[s,t],s)}function Bh(s,t){var a=rt();t=t===void 0?null:t;var l=a.memoizedState;if(t!==null&&td(t,l[1]))return l[0];if(l=s(),tn){is(!0);try{s()}finally{is(!1)}}return a.memoizedState=[l,t],l}function xd(s,t,a){return a===void 0||(Ka&1073741824)!==0&&(gs&261930)===0?s.memoizedState=t:(s.memoizedState=a,s=Hx(),es.lanes|=s,Cl|=s,a)}function Hh(s,t,a,l){return Kt(a,t)?a:Hn.current!==null?(s=xd(s,a,l),Kt(s,t)||(ht=!0),s):(Ka&42)===0||(Ka&1073741824)!==0&&(gs&261930)===0?(ht=!0,s.memoizedState=a):(s=Hx(),es.lanes|=s,Cl|=s,t)}function qh(s,t,a,l,r){var o=K.p;K.p=o!==0&&8>o?o:8;var m=A.T,g={};A.T=g,gd(s,!1,t,a);try{var z=r(),Z=A.S;if(Z!==null&&Z(g,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var oe=Zj(z,l);Ri(s,t,oe,ea(s))}else Ri(s,t,l,ea(s))}catch(ge){Ri(s,t,{then:function(){},status:"rejected",reason:ge},ea())}finally{K.p=o,m!==null&&g.types!==null&&(m.types=g.types),A.T=m}}function tv(){}function fd(s,t,a,l){if(s.tag!==5)throw Error(d(476));var r=Gh(s).queue;qh(s,r,t,E,a===null?tv:function(){return Vh(s),a(l)})}function Gh(s){var t=s.memoizedState;if(t!==null)return t;t={memoizedState:E,baseState:E,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ja,lastRenderedState:E},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ja,lastRenderedState:a},next:null},s.memoizedState=t,s=s.alternate,s!==null&&(s.memoizedState=t),t}function Vh(s){var t=Gh(s);t.next===null&&(t=s.alternate.memoizedState),Ri(s,t.next.queue,{},ea())}function pd(){return wt(Pi)}function Fh(){return rt().memoizedState}function $h(){return rt().memoizedState}function av(s){for(var t=s.return;t!==null;){switch(t.tag){case 24:case 3:var a=ea();s=Nl(a);var l=bl(t,s,a);l!==null&&(Vt(l,t,a),zi(l,t,a)),t={cache:Qo()},s.payload=t;return}t=t.return}}function lv(s,t,a){var l=ea();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},lc(s)?Yh(t,a):(a=Oo(s,t,a,l),a!==null&&(Vt(a,s,l),Xh(a,t,l)))}function Qh(s,t,a){var l=ea();Ri(s,t,a,l)}function Ri(s,t,a,l){var r={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(lc(s))Yh(t,r);else{var o=s.alternate;if(s.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var m=t.lastRenderedState,g=o(m,a);if(r.hasEagerState=!0,r.eagerState=g,Kt(g,m))return Br(s,t,r,0),Us===null&&Ur(),!1}catch{}finally{}if(a=Oo(s,t,r,l),a!==null)return Vt(a,s,l),Xh(a,t,l),!0}return!1}function gd(s,t,a,l){if(l={lane:2,revertLane:Jd(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},lc(s)){if(t)throw Error(d(479))}else t=Oo(s,a,l,2),t!==null&&Vt(t,s,2)}function lc(s){var t=s.alternate;return s===es||t!==null&&t===es}function Yh(s,t){qn=Ir=!0;var a=s.pending;a===null?t.next=t:(t.next=a.next,a.next=t),s.pending=t}function Xh(s,t,a){if((a&4194048)!==0){var l=t.lanes;l&=s.pendingLanes,a|=l,t.lanes=a,hl(s,a)}}var Li={readContext:wt,use:ec,useCallback:Ws,useContext:Ws,useEffect:Ws,useImperativeHandle:Ws,useLayoutEffect:Ws,useInsertionEffect:Ws,useMemo:Ws,useReducer:Ws,useRef:Ws,useState:Ws,useDebugValue:Ws,useDeferredValue:Ws,useTransition:Ws,useSyncExternalStore:Ws,useId:Ws,useHostTransitionStatus:Ws,useFormState:Ws,useActionState:Ws,useOptimistic:Ws,useMemoCache:Ws,useCacheRefresh:Ws};Li.useEffectEvent=Ws;var Kh={readContext:wt,use:ec,useCallback:function(s,t){return Mt().memoizedState=[s,t===void 0?null:t],s},useContext:wt,useEffect:Ah,useImperativeHandle:function(s,t,a){a=a!=null?a.concat([s]):null,tc(4194308,4,Rh.bind(null,t,s),a)},useLayoutEffect:function(s,t){return tc(4194308,4,s,t)},useInsertionEffect:function(s,t){tc(4,2,s,t)},useMemo:function(s,t){var a=Mt();t=t===void 0?null:t;var l=s();if(tn){is(!0);try{s()}finally{is(!1)}}return a.memoizedState=[l,t],l},useReducer:function(s,t,a){var l=Mt();if(a!==void 0){var r=a(t);if(tn){is(!0);try{a(t)}finally{is(!1)}}}else r=t;return l.memoizedState=l.baseState=r,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:r},l.queue=s,s=s.dispatch=lv.bind(null,es,s),[l.memoizedState,s]},useRef:function(s){var t=Mt();return s={current:s},t.memoizedState=s},useState:function(s){s=dd(s);var t=s.queue,a=Qh.bind(null,es,t);return t.dispatch=a,[s.memoizedState,a]},useDebugValue:hd,useDeferredValue:function(s,t){var a=Mt();return xd(a,s,t)},useTransition:function(){var s=dd(!1);return s=qh.bind(null,es,s.queue,!0,!1),Mt().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,t,a){var l=es,r=Mt();if(bs){if(a===void 0)throw Error(d(407));a=a()}else{if(a=t(),Us===null)throw Error(d(349));(gs&127)!==0||fh(l,t,a)}r.memoizedState=a;var o={value:a,getSnapshot:t};return r.queue=o,Ah(gh.bind(null,l,o,s),[s]),l.flags|=2048,Vn(9,{destroy:void 0},ph.bind(null,l,o,a,t),null),a},useId:function(){var s=Mt(),t=Us.identifierPrefix;if(bs){var a=Aa,l=za;a=(l&~(1<<32-_s(l)-1)).toString(32)+a,t="_"+t+"R_"+a,a=Pr++,0<a&&(t+="H"+a.toString(32)),t+="_"}else a=Ij++,t="_"+t+"r_"+a.toString(32)+"_";return s.memoizedState=t},useHostTransitionStatus:pd,useFormState:Ch,useActionState:Ch,useOptimistic:function(s){var t=Mt();t.memoizedState=t.baseState=s;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=gd.bind(null,es,!0,a),a.dispatch=t,[s,t]},useMemoCache:rd,useCacheRefresh:function(){return Mt().memoizedState=av.bind(null,es)},useEffectEvent:function(s){var t=Mt(),a={impl:s};return t.memoizedState=a,function(){if((ks&2)!==0)throw Error(d(440));return a.impl.apply(void 0,arguments)}}},jd={readContext:wt,use:ec,useCallback:Uh,useContext:wt,useEffect:md,useImperativeHandle:Lh,useInsertionEffect:Dh,useLayoutEffect:Oh,useMemo:Bh,useReducer:sc,useRef:zh,useState:function(){return sc(Ja)},useDebugValue:hd,useDeferredValue:function(s,t){var a=rt();return Hh(a,Ds.memoizedState,s,t)},useTransition:function(){var s=sc(Ja)[0],t=rt().memoizedState;return[typeof s=="boolean"?s:Oi(s),t]},useSyncExternalStore:xh,useId:Fh,useHostTransitionStatus:pd,useFormState:kh,useActionState:kh,useOptimistic:function(s,t){var a=rt();return Nh(a,Ds,s,t)},useMemoCache:rd,useCacheRefresh:$h};jd.useEffectEvent=Mh;var Jh={readContext:wt,use:ec,useCallback:Uh,useContext:wt,useEffect:md,useImperativeHandle:Lh,useInsertionEffect:Dh,useLayoutEffect:Oh,useMemo:Bh,useReducer:od,useRef:zh,useState:function(){return od(Ja)},useDebugValue:hd,useDeferredValue:function(s,t){var a=rt();return Ds===null?xd(a,s,t):Hh(a,Ds.memoizedState,s,t)},useTransition:function(){var s=od(Ja)[0],t=rt().memoizedState;return[typeof s=="boolean"?s:Oi(s),t]},useSyncExternalStore:xh,useId:Fh,useHostTransitionStatus:pd,useFormState:Eh,useActionState:Eh,useOptimistic:function(s,t){var a=rt();return Ds!==null?Nh(a,Ds,s,t):(a.baseState=s,[s,a.queue.dispatch])},useMemoCache:rd,useCacheRefresh:$h};Jh.useEffectEvent=Mh;function vd(s,t,a,l){t=s.memoizedState,a=a(l,t),a=a==null?t:y({},t,a),s.memoizedState=a,s.lanes===0&&(s.updateQueue.baseState=a)}var Nd={enqueueSetState:function(s,t,a){s=s._reactInternals;var l=ea(),r=Nl(l);r.payload=t,a!=null&&(r.callback=a),t=bl(s,r,l),t!==null&&(Vt(t,s,l),zi(t,s,l))},enqueueReplaceState:function(s,t,a){s=s._reactInternals;var l=ea(),r=Nl(l);r.tag=1,r.payload=t,a!=null&&(r.callback=a),t=bl(s,r,l),t!==null&&(Vt(t,s,l),zi(t,s,l))},enqueueForceUpdate:function(s,t){s=s._reactInternals;var a=ea(),l=Nl(a);l.tag=2,t!=null&&(l.callback=t),t=bl(s,l,a),t!==null&&(Vt(t,s,a),zi(t,s,a))}};function Zh(s,t,a,l,r,o,m){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(l,o,m):t.prototype&&t.prototype.isPureReactComponent?!yi(a,l)||!yi(r,o):!0}function Ih(s,t,a,l){s=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,l),t.state!==s&&Nd.enqueueReplaceState(t,t.state,null)}function an(s,t){var a=t;if("ref"in t){a={};for(var l in t)l!=="ref"&&(a[l]=t[l])}if(s=s.defaultProps){a===t&&(a=y({},a));for(var r in s)a[r]===void 0&&(a[r]=s[r])}return a}function Ph(s){Lr(s)}function Wh(s){console.error(s)}function ex(s){Lr(s)}function nc(s,t){try{var a=s.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(l){setTimeout(function(){throw l})}}function sx(s,t,a){try{var l=s.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function bd(s,t,a){return a=Nl(a),a.tag=3,a.payload={element:null},a.callback=function(){nc(s,t)},a}function tx(s){return s=Nl(s),s.tag=3,s}function ax(s,t,a,l){var r=a.type.getDerivedStateFromError;if(typeof r=="function"){var o=l.value;s.payload=function(){return r(o)},s.callback=function(){sx(t,a,l)}}var m=a.stateNode;m!==null&&typeof m.componentDidCatch=="function"&&(s.callback=function(){sx(t,a,l),typeof r!="function"&&(kl===null?kl=new Set([this]):kl.add(this));var g=l.stack;this.componentDidCatch(l.value,{componentStack:g!==null?g:""})})}function nv(s,t,a,l,r){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(t=a.alternate,t!==null&&On(t,a,r,!0),a=Zt.current,a!==null){switch(a.tag){case 31:case 13:return ua===null?gc():a.alternate===null&&et===0&&(et=3),a.flags&=-257,a.flags|=65536,a.lanes=r,l===Yr?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([l]):t.add(l),Yd(s,l,r)),!1;case 22:return a.flags|=65536,l===Yr?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([l]):a.add(l)),Yd(s,l,r)),!1}throw Error(d(435,a.tag))}return Yd(s,l,r),gc(),!1}if(bs)return t=Zt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=r,l!==qo&&(s=Error(d(422),{cause:l}),Si(ra(s,a)))):(l!==qo&&(t=Error(d(423),{cause:l}),Si(ra(t,a))),s=s.current.alternate,s.flags|=65536,r&=-r,s.lanes|=r,l=ra(l,a),r=bd(s.stateNode,l,r),Io(s,r),et!==4&&(et=2)),!1;var o=Error(d(520),{cause:l});if(o=ra(o,a),$i===null?$i=[o]:$i.push(o),et!==4&&(et=2),t===null)return!0;l=ra(l,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,s=r&-r,a.lanes|=s,s=bd(a.stateNode,l,s),Io(a,s),!1;case 1:if(t=a.type,o=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||o!==null&&typeof o.componentDidCatch=="function"&&(kl===null||!kl.has(o))))return a.flags|=65536,r&=-r,a.lanes|=r,r=tx(r),ax(r,s,a,l),Io(a,r),!1}a=a.return}while(a!==null);return!1}var yd=Error(d(461)),ht=!1;function _t(s,t,a,l){t.child=s===null?rh(t,null,a,l):sn(t,s.child,a,l)}function lx(s,t,a,l,r){a=a.render;var o=t.ref;if("ref"in l){var m={};for(var g in l)g!=="ref"&&(m[g]=l[g])}else m=l;return Il(t),l=ad(s,t,a,m,o,r),g=ld(),s!==null&&!ht?(nd(s,t,r),Za(s,t,r)):(bs&&g&&Bo(t),t.flags|=1,_t(s,t,l,r),t.child)}function nx(s,t,a,l,r){if(s===null){var o=a.type;return typeof o=="function"&&!Ro(o)&&o.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=o,ix(s,t,o,l,r)):(s=qr(a.type,null,l,t,t.mode,r),s.ref=t.ref,s.return=t,t.child=s)}if(o=s.child,!zd(s,r)){var m=o.memoizedProps;if(a=a.compare,a=a!==null?a:yi,a(m,l)&&s.ref===t.ref)return Za(s,t,r)}return t.flags|=1,s=$a(o,l),s.ref=t.ref,s.return=t,t.child=s}function ix(s,t,a,l,r){if(s!==null){var o=s.memoizedProps;if(yi(o,l)&&s.ref===t.ref)if(ht=!1,t.pendingProps=l=o,zd(s,r))(s.flags&131072)!==0&&(ht=!0);else return t.lanes=s.lanes,Za(s,t,r)}return wd(s,t,a,l,r)}function rx(s,t,a,l){var r=l.children,o=s!==null?s.memoizedState:null;if(s===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((t.flags&128)!==0){if(o=o!==null?o.baseLanes|a:a,s!==null){for(l=t.child=s.child,r=0;l!==null;)r=r|l.lanes|l.childLanes,l=l.sibling;l=r&~o}else l=0,t.child=null;return cx(s,t,o,a,l)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},s!==null&&$r(t,o!==null?o.cachePool:null),o!==null?dh(t,o):Wo(),uh(t);else return l=t.lanes=536870912,cx(s,t,o!==null?o.baseLanes|a:a,a,l)}else o!==null?($r(t,o.cachePool),dh(t,o),wl(),t.memoizedState=null):(s!==null&&$r(t,null),Wo(),wl());return _t(s,t,r,a),t.child}function Ui(s,t){return s!==null&&s.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function cx(s,t,a,l,r){var o=Xo();return o=o===null?null:{parent:ut._currentValue,pool:o},t.memoizedState={baseLanes:a,cachePool:o},s!==null&&$r(t,null),Wo(),uh(t),s!==null&&On(s,t,l,!0),t.childLanes=r,null}function ic(s,t){return t=cc({mode:t.mode,children:t.children},s.mode),t.ref=s.ref,s.child=t,t.return=s,t}function ox(s,t,a){return sn(t,s.child,null,a),s=ic(t,t.pendingProps),s.flags|=2,It(t),t.memoizedState=null,s}function iv(s,t,a){var l=t.pendingProps,r=(t.flags&128)!==0;if(t.flags&=-129,s===null){if(bs){if(l.mode==="hidden")return s=ic(t,l),t.lanes=536870912,Ui(null,s);if(sd(t),(s=Xs)?(s=yf(s,da),s=s!==null&&s.data==="&"?s:null,s!==null&&(t.memoizedState={dehydrated:s,treeContext:fl!==null?{id:za,overflow:Aa}:null,retryLane:536870912,hydrationErrors:null},a=Ym(s),a.return=t,t.child=a,yt=t,Xs=null)):s=null,s===null)throw gl(t);return t.lanes=536870912,null}return ic(t,l)}var o=s.memoizedState;if(o!==null){var m=o.dehydrated;if(sd(t),r)if(t.flags&256)t.flags&=-257,t=ox(s,t,a);else if(t.memoizedState!==null)t.child=s.child,t.flags|=128,t=null;else throw Error(d(558));else if(ht||On(s,t,a,!1),r=(a&s.childLanes)!==0,ht||r){if(l=Us,l!==null&&(m=Vl(l,a),m!==0&&m!==o.retryLane))throw o.retryLane=m,Xl(s,m),Vt(l,s,m),yd;gc(),t=ox(s,t,a)}else s=o.treeContext,Xs=ma(m.nextSibling),yt=t,bs=!0,pl=null,da=!1,s!==null&&Jm(t,s),t=ic(t,l),t.flags|=4096;return t}return s=$a(s.child,{mode:l.mode,children:l.children}),s.ref=t.ref,t.child=s,s.return=t,s}function rc(s,t){var a=t.ref;if(a===null)s!==null&&s.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(d(284));(s===null||s.ref!==a)&&(t.flags|=4194816)}}function wd(s,t,a,l,r){return Il(t),a=ad(s,t,a,l,void 0,r),l=ld(),s!==null&&!ht?(nd(s,t,r),Za(s,t,r)):(bs&&l&&Bo(t),t.flags|=1,_t(s,t,a,r),t.child)}function dx(s,t,a,l,r,o){return Il(t),t.updateQueue=null,a=hh(t,l,a,r),mh(s),l=ld(),s!==null&&!ht?(nd(s,t,o),Za(s,t,o)):(bs&&l&&Bo(t),t.flags|=1,_t(s,t,a,o),t.child)}function ux(s,t,a,l,r){if(Il(t),t.stateNode===null){var o=zn,m=a.contextType;typeof m=="object"&&m!==null&&(o=wt(m)),o=new a(l,o),t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Nd,t.stateNode=o,o._reactInternals=t,o=t.stateNode,o.props=l,o.state=t.memoizedState,o.refs={},Jo(t),m=a.contextType,o.context=typeof m=="object"&&m!==null?wt(m):zn,o.state=t.memoizedState,m=a.getDerivedStateFromProps,typeof m=="function"&&(vd(t,a,m,l),o.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(m=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),m!==o.state&&Nd.enqueueReplaceState(o,o.state,null),Mi(t,l,o,r),Ai(),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308),l=!0}else if(s===null){o=t.stateNode;var g=t.memoizedProps,z=an(a,g);o.props=z;var Z=o.context,oe=a.contextType;m=zn,typeof oe=="object"&&oe!==null&&(m=wt(oe));var ge=a.getDerivedStateFromProps;oe=typeof ge=="function"||typeof o.getSnapshotBeforeUpdate=="function",g=t.pendingProps!==g,oe||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(g||Z!==m)&&Ih(t,o,l,m),vl=!1;var I=t.memoizedState;o.state=I,Mi(t,l,o,r),Ai(),Z=t.memoizedState,g||I!==Z||vl?(typeof ge=="function"&&(vd(t,a,ge,l),Z=t.memoizedState),(z=vl||Zh(t,a,z,l,I,Z,m))?(oe||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=Z),o.props=l,o.state=Z,o.context=m,l=z):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{o=t.stateNode,Zo(s,t),m=t.memoizedProps,oe=an(a,m),o.props=oe,ge=t.pendingProps,I=o.context,Z=a.contextType,z=zn,typeof Z=="object"&&Z!==null&&(z=wt(Z)),g=a.getDerivedStateFromProps,(Z=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(m!==ge||I!==z)&&Ih(t,o,l,z),vl=!1,I=t.memoizedState,o.state=I,Mi(t,l,o,r),Ai();var ae=t.memoizedState;m!==ge||I!==ae||vl||s!==null&&s.dependencies!==null&&Vr(s.dependencies)?(typeof g=="function"&&(vd(t,a,g,l),ae=t.memoizedState),(oe=vl||Zh(t,a,oe,l,I,ae,z)||s!==null&&s.dependencies!==null&&Vr(s.dependencies))?(Z||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(l,ae,z),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(l,ae,z)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||m===s.memoizedProps&&I===s.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||m===s.memoizedProps&&I===s.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=ae),o.props=l,o.state=ae,o.context=z,l=oe):(typeof o.componentDidUpdate!="function"||m===s.memoizedProps&&I===s.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||m===s.memoizedProps&&I===s.memoizedState||(t.flags|=1024),l=!1)}return o=l,rc(s,t),l=(t.flags&128)!==0,o||l?(o=t.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:o.render(),t.flags|=1,s!==null&&l?(t.child=sn(t,s.child,null,r),t.child=sn(t,null,a,r)):_t(s,t,a,r),t.memoizedState=o.state,s=t.child):s=Za(s,t,r),s}function mx(s,t,a,l){return Jl(),t.flags|=256,_t(s,t,a,l),t.child}var _d={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Sd(s){return{baseLanes:s,cachePool:sh()}}function Cd(s,t,a){return s=s!==null?s.childLanes&~a:0,t&&(s|=Wt),s}function hx(s,t,a){var l=t.pendingProps,r=!1,o=(t.flags&128)!==0,m;if((m=o)||(m=s!==null&&s.memoizedState===null?!1:(it.current&2)!==0),m&&(r=!0,t.flags&=-129),m=(t.flags&32)!==0,t.flags&=-33,s===null){if(bs){if(r?yl(t):wl(),(s=Xs)?(s=yf(s,da),s=s!==null&&s.data!=="&"?s:null,s!==null&&(t.memoizedState={dehydrated:s,treeContext:fl!==null?{id:za,overflow:Aa}:null,retryLane:536870912,hydrationErrors:null},a=Ym(s),a.return=t,t.child=a,yt=t,Xs=null)):s=null,s===null)throw gl(t);return cu(s)?t.lanes=32:t.lanes=536870912,null}var g=l.children;return l=l.fallback,r?(wl(),r=t.mode,g=cc({mode:"hidden",children:g},r),l=Kl(l,r,a,null),g.return=t,l.return=t,g.sibling=l,t.child=g,l=t.child,l.memoizedState=Sd(a),l.childLanes=Cd(s,m,a),t.memoizedState=_d,Ui(null,l)):(yl(t),kd(t,g))}var z=s.memoizedState;if(z!==null&&(g=z.dehydrated,g!==null)){if(o)t.flags&256?(yl(t),t.flags&=-257,t=Td(s,t,a)):t.memoizedState!==null?(wl(),t.child=s.child,t.flags|=128,t=null):(wl(),g=l.fallback,r=t.mode,l=cc({mode:"visible",children:l.children},r),g=Kl(g,r,a,null),g.flags|=2,l.return=t,g.return=t,l.sibling=g,t.child=l,sn(t,s.child,null,a),l=t.child,l.memoizedState=Sd(a),l.childLanes=Cd(s,m,a),t.memoizedState=_d,t=Ui(null,l));else if(yl(t),cu(g)){if(m=g.nextSibling&&g.nextSibling.dataset,m)var Z=m.dgst;m=Z,l=Error(d(419)),l.stack="",l.digest=m,Si({value:l,source:null,stack:null}),t=Td(s,t,a)}else if(ht||On(s,t,a,!1),m=(a&s.childLanes)!==0,ht||m){if(m=Us,m!==null&&(l=Vl(m,a),l!==0&&l!==z.retryLane))throw z.retryLane=l,Xl(s,l),Vt(m,s,l),yd;ru(g)||gc(),t=Td(s,t,a)}else ru(g)?(t.flags|=192,t.child=s.child,t=null):(s=z.treeContext,Xs=ma(g.nextSibling),yt=t,bs=!0,pl=null,da=!1,s!==null&&Jm(t,s),t=kd(t,l.children),t.flags|=4096);return t}return r?(wl(),g=l.fallback,r=t.mode,z=s.child,Z=z.sibling,l=$a(z,{mode:"hidden",children:l.children}),l.subtreeFlags=z.subtreeFlags&65011712,Z!==null?g=$a(Z,g):(g=Kl(g,r,a,null),g.flags|=2),g.return=t,l.return=t,l.sibling=g,t.child=l,Ui(null,l),l=t.child,g=s.child.memoizedState,g===null?g=Sd(a):(r=g.cachePool,r!==null?(z=ut._currentValue,r=r.parent!==z?{parent:z,pool:z}:r):r=sh(),g={baseLanes:g.baseLanes|a,cachePool:r}),l.memoizedState=g,l.childLanes=Cd(s,m,a),t.memoizedState=_d,Ui(s.child,l)):(yl(t),a=s.child,s=a.sibling,a=$a(a,{mode:"visible",children:l.children}),a.return=t,a.sibling=null,s!==null&&(m=t.deletions,m===null?(t.deletions=[s],t.flags|=16):m.push(s)),t.child=a,t.memoizedState=null,a)}function kd(s,t){return t=cc({mode:"visible",children:t},s.mode),t.return=s,s.child=t}function cc(s,t){return s=Jt(22,s,null,t),s.lanes=0,s}function Td(s,t,a){return sn(t,s.child,null,a),s=kd(t,t.pendingProps.children),s.flags|=2,t.memoizedState=null,s}function xx(s,t,a){s.lanes|=t;var l=s.alternate;l!==null&&(l.lanes|=t),Fo(s.return,t,a)}function Ed(s,t,a,l,r,o){var m=s.memoizedState;m===null?s.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:r,treeForkCount:o}:(m.isBackwards=t,m.rendering=null,m.renderingStartTime=0,m.last=l,m.tail=a,m.tailMode=r,m.treeForkCount=o)}function fx(s,t,a){var l=t.pendingProps,r=l.revealOrder,o=l.tail;l=l.children;var m=it.current,g=(m&2)!==0;if(g?(m=m&1|2,t.flags|=128):m&=1,le(it,m),_t(s,t,l,a),l=bs?_i:0,!g&&s!==null&&(s.flags&128)!==0)e:for(s=t.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&xx(s,a,t);else if(s.tag===19)xx(s,a,t);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(r){case"forwards":for(a=t.child,r=null;a!==null;)s=a.alternate,s!==null&&Zr(s)===null&&(r=a),a=a.sibling;a=r,a===null?(r=t.child,t.child=null):(r=a.sibling,a.sibling=null),Ed(t,!1,r,a,o,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,r=t.child,t.child=null;r!==null;){if(s=r.alternate,s!==null&&Zr(s)===null){t.child=r;break}s=r.sibling,r.sibling=a,a=r,r=s}Ed(t,!0,a,null,o,l);break;case"together":Ed(t,!1,null,null,void 0,l);break;default:t.memoizedState=null}return t.child}function Za(s,t,a){if(s!==null&&(t.dependencies=s.dependencies),Cl|=t.lanes,(a&t.childLanes)===0)if(s!==null){if(On(s,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(s!==null&&t.child!==s.child)throw Error(d(153));if(t.child!==null){for(s=t.child,a=$a(s,s.pendingProps),t.child=a,a.return=t;s.sibling!==null;)s=s.sibling,a=a.sibling=$a(s,s.pendingProps),a.return=t;a.sibling=null}return t.child}function zd(s,t){return(s.lanes&t)!==0?!0:(s=s.dependencies,!!(s!==null&&Vr(s)))}function rv(s,t,a){switch(t.tag){case 3:P(t,t.stateNode.containerInfo),jl(t,ut,s.memoizedState.cache),Jl();break;case 27:case 5:W(t);break;case 4:P(t,t.stateNode.containerInfo);break;case 10:jl(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,sd(t),null;break;case 13:var l=t.memoizedState;if(l!==null)return l.dehydrated!==null?(yl(t),t.flags|=128,null):(a&t.child.childLanes)!==0?hx(s,t,a):(yl(t),s=Za(s,t,a),s!==null?s.sibling:null);yl(t);break;case 19:var r=(s.flags&128)!==0;if(l=(a&t.childLanes)!==0,l||(On(s,t,a,!1),l=(a&t.childLanes)!==0),r){if(l)return fx(s,t,a);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),le(it,it.current),l)break;return null;case 22:return t.lanes=0,rx(s,t,a,t.pendingProps);case 24:jl(t,ut,s.memoizedState.cache)}return Za(s,t,a)}function px(s,t,a){if(s!==null)if(s.memoizedProps!==t.pendingProps)ht=!0;else{if(!zd(s,a)&&(t.flags&128)===0)return ht=!1,rv(s,t,a);ht=(s.flags&131072)!==0}else ht=!1,bs&&(t.flags&1048576)!==0&&Km(t,_i,t.index);switch(t.lanes=0,t.tag){case 16:e:{var l=t.pendingProps;if(s=Wl(t.elementType),t.type=s,typeof s=="function")Ro(s)?(l=an(s,l),t.tag=1,t=ux(null,t,s,l,a)):(t.tag=0,t=wd(null,t,s,l,a));else{if(s!=null){var r=s.$$typeof;if(r===C){t.tag=11,t=lx(null,t,s,l,a);break e}else if(r===T){t.tag=14,t=nx(null,t,s,l,a);break e}}throw t=ye(s)||s,Error(d(306,t,""))}}return t;case 0:return wd(s,t,t.type,t.pendingProps,a);case 1:return l=t.type,r=an(l,t.pendingProps),ux(s,t,l,r,a);case 3:e:{if(P(t,t.stateNode.containerInfo),s===null)throw Error(d(387));l=t.pendingProps;var o=t.memoizedState;r=o.element,Zo(s,t),Mi(t,l,null,a);var m=t.memoizedState;if(l=m.cache,jl(t,ut,l),l!==o.cache&&$o(t,[ut],a,!0),Ai(),l=m.element,o.isDehydrated)if(o={element:l,isDehydrated:!1,cache:m.cache},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){t=mx(s,t,l,a);break e}else if(l!==r){r=ra(Error(d(424)),t),Si(r),t=mx(s,t,l,a);break e}else{switch(s=t.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Xs=ma(s.firstChild),yt=t,bs=!0,pl=null,da=!0,a=rh(t,null,l,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Jl(),l===r){t=Za(s,t,a);break e}_t(s,t,l,a)}t=t.child}return t;case 26:return rc(s,t),s===null?(a=Tf(t.type,null,t.pendingProps,null))?t.memoizedState=a:bs||(a=t.type,s=t.pendingProps,l=_c(he.current).createElement(a),l[Je]=t,l[Ns]=s,St(l,a,s),vt(l),t.stateNode=l):t.memoizedState=Tf(t.type,s.memoizedProps,t.pendingProps,s.memoizedState),null;case 27:return W(t),s===null&&bs&&(l=t.stateNode=Sf(t.type,t.pendingProps,he.current),yt=t,da=!0,r=Xs,Al(t.type)?(ou=r,Xs=ma(l.firstChild)):Xs=r),_t(s,t,t.pendingProps.children,a),rc(s,t),s===null&&(t.flags|=4194304),t.child;case 5:return s===null&&bs&&((r=l=Xs)&&(l=Uv(l,t.type,t.pendingProps,da),l!==null?(t.stateNode=l,yt=t,Xs=ma(l.firstChild),da=!1,r=!0):r=!1),r||gl(t)),W(t),r=t.type,o=t.pendingProps,m=s!==null?s.memoizedProps:null,l=o.children,lu(r,o)?l=null:m!==null&&lu(r,m)&&(t.flags|=32),t.memoizedState!==null&&(r=ad(s,t,Pj,null,null,a),Pi._currentValue=r),rc(s,t),_t(s,t,l,a),t.child;case 6:return s===null&&bs&&((s=a=Xs)&&(a=Bv(a,t.pendingProps,da),a!==null?(t.stateNode=a,yt=t,Xs=null,s=!0):s=!1),s||gl(t)),null;case 13:return hx(s,t,a);case 4:return P(t,t.stateNode.containerInfo),l=t.pendingProps,s===null?t.child=sn(t,null,l,a):_t(s,t,l,a),t.child;case 11:return lx(s,t,t.type,t.pendingProps,a);case 7:return _t(s,t,t.pendingProps,a),t.child;case 8:return _t(s,t,t.pendingProps.children,a),t.child;case 12:return _t(s,t,t.pendingProps.children,a),t.child;case 10:return l=t.pendingProps,jl(t,t.type,l.value),_t(s,t,l.children,a),t.child;case 9:return r=t.type._context,l=t.pendingProps.children,Il(t),r=wt(r),l=l(r),t.flags|=1,_t(s,t,l,a),t.child;case 14:return nx(s,t,t.type,t.pendingProps,a);case 15:return ix(s,t,t.type,t.pendingProps,a);case 19:return fx(s,t,a);case 31:return iv(s,t,a);case 22:return rx(s,t,a,t.pendingProps);case 24:return Il(t),l=wt(ut),s===null?(r=Xo(),r===null&&(r=Us,o=Qo(),r.pooledCache=o,o.refCount++,o!==null&&(r.pooledCacheLanes|=a),r=o),t.memoizedState={parent:l,cache:r},Jo(t),jl(t,ut,r)):((s.lanes&a)!==0&&(Zo(s,t),Mi(t,null,null,a),Ai()),r=s.memoizedState,o=t.memoizedState,r.parent!==l?(r={parent:l,cache:l},t.memoizedState=r,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=r),jl(t,ut,l)):(l=o.cache,jl(t,ut,l),l!==r.cache&&$o(t,[ut],a,!0))),_t(s,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(d(156,t.tag))}function Ia(s){s.flags|=4}function Ad(s,t,a,l,r){if((t=(s.mode&32)!==0)&&(t=!1),t){if(s.flags|=16777216,(r&335544128)===r)if(s.stateNode.complete)s.flags|=8192;else if(Fx())s.flags|=8192;else throw en=Yr,Ko}else s.flags&=-16777217}function gx(s,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!Df(t))if(Fx())s.flags|=8192;else throw en=Yr,Ko}function oc(s,t){t!==null&&(s.flags|=4),s.flags&16384&&(t=s.tag!==22?we():536870912,s.lanes|=t,Yn|=t)}function Bi(s,t){if(!bs)switch(s.tailMode){case"hidden":t=s.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?s.tail=null:a.sibling=null;break;case"collapsed":a=s.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?t||s.tail===null?s.tail=null:s.tail.sibling=null:l.sibling=null}}function Ks(s){var t=s.alternate!==null&&s.alternate.child===s.child,a=0,l=0;if(t)for(var r=s.child;r!==null;)a|=r.lanes|r.childLanes,l|=r.subtreeFlags&65011712,l|=r.flags&65011712,r.return=s,r=r.sibling;else for(r=s.child;r!==null;)a|=r.lanes|r.childLanes,l|=r.subtreeFlags,l|=r.flags,r.return=s,r=r.sibling;return s.subtreeFlags|=l,s.childLanes=a,t}function cv(s,t,a){var l=t.pendingProps;switch(Ho(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ks(t),null;case 1:return Ks(t),null;case 3:return a=t.stateNode,l=null,s!==null&&(l=s.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),Xa(ut),q(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(s===null||s.child===null)&&(Dn(t)?Ia(t):s===null||s.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Go())),Ks(t),null;case 26:var r=t.type,o=t.memoizedState;return s===null?(Ia(t),o!==null?(Ks(t),gx(t,o)):(Ks(t),Ad(t,r,null,l,a))):o?o!==s.memoizedState?(Ia(t),Ks(t),gx(t,o)):(Ks(t),t.flags&=-16777217):(s=s.memoizedProps,s!==l&&Ia(t),Ks(t),Ad(t,r,s,l,a)),null;case 27:if(Ce(t),a=he.current,r=t.type,s!==null&&t.stateNode!=null)s.memoizedProps!==l&&Ia(t);else{if(!l){if(t.stateNode===null)throw Error(d(166));return Ks(t),null}s=pe.current,Dn(t)?Zm(t):(s=Sf(r,l,a),t.stateNode=s,Ia(t))}return Ks(t),null;case 5:if(Ce(t),r=t.type,s!==null&&t.stateNode!=null)s.memoizedProps!==l&&Ia(t);else{if(!l){if(t.stateNode===null)throw Error(d(166));return Ks(t),null}if(o=pe.current,Dn(t))Zm(t);else{var m=_c(he.current);switch(o){case 1:o=m.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:o=m.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":o=m.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":o=m.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":o=m.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof l.is=="string"?m.createElement("select",{is:l.is}):m.createElement("select"),l.multiple?o.multiple=!0:l.size&&(o.size=l.size);break;default:o=typeof l.is=="string"?m.createElement(r,{is:l.is}):m.createElement(r)}}o[Je]=t,o[Ns]=l;e:for(m=t.child;m!==null;){if(m.tag===5||m.tag===6)o.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}t.stateNode=o;e:switch(St(o,r,l),r){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Ia(t)}}return Ks(t),Ad(t,t.type,s===null?null:s.memoizedProps,t.pendingProps,a),null;case 6:if(s&&t.stateNode!=null)s.memoizedProps!==l&&Ia(t);else{if(typeof l!="string"&&t.stateNode===null)throw Error(d(166));if(s=he.current,Dn(t)){if(s=t.stateNode,a=t.memoizedProps,l=null,r=yt,r!==null)switch(r.tag){case 27:case 5:l=r.memoizedProps}s[Je]=t,s=!!(s.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||xf(s.nodeValue,a)),s||gl(t,!0)}else s=_c(s).createTextNode(l),s[Je]=t,t.stateNode=s}return Ks(t),null;case 31:if(a=t.memoizedState,s===null||s.memoizedState!==null){if(l=Dn(t),a!==null){if(s===null){if(!l)throw Error(d(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(d(557));s[Je]=t}else Jl(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ks(t),s=!1}else a=Go(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=a),s=!0;if(!s)return t.flags&256?(It(t),t):(It(t),null);if((t.flags&128)!==0)throw Error(d(558))}return Ks(t),null;case 13:if(l=t.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(r=Dn(t),l!==null&&l.dehydrated!==null){if(s===null){if(!r)throw Error(d(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(d(317));r[Je]=t}else Jl(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ks(t),r=!1}else r=Go(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=r),r=!0;if(!r)return t.flags&256?(It(t),t):(It(t),null)}return It(t),(t.flags&128)!==0?(t.lanes=a,t):(a=l!==null,s=s!==null&&s.memoizedState!==null,a&&(l=t.child,r=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(r=l.alternate.memoizedState.cachePool.pool),o=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(o=l.memoizedState.cachePool.pool),o!==r&&(l.flags|=2048)),a!==s&&a&&(t.child.flags|=8192),oc(t,t.updateQueue),Ks(t),null);case 4:return q(),s===null&&Wd(t.stateNode.containerInfo),Ks(t),null;case 10:return Xa(t.type),Ks(t),null;case 19:if(re(it),l=t.memoizedState,l===null)return Ks(t),null;if(r=(t.flags&128)!==0,o=l.rendering,o===null)if(r)Bi(l,!1);else{if(et!==0||s!==null&&(s.flags&128)!==0)for(s=t.child;s!==null;){if(o=Zr(s),o!==null){for(t.flags|=128,Bi(l,!1),s=o.updateQueue,t.updateQueue=s,oc(t,s),t.subtreeFlags=0,s=a,a=t.child;a!==null;)Qm(a,s),a=a.sibling;return le(it,it.current&1|2),bs&&Qa(t,l.treeForkCount),t.child}s=s.sibling}l.tail!==null&&Pe()>xc&&(t.flags|=128,r=!0,Bi(l,!1),t.lanes=4194304)}else{if(!r)if(s=Zr(o),s!==null){if(t.flags|=128,r=!0,s=s.updateQueue,t.updateQueue=s,oc(t,s),Bi(l,!0),l.tail===null&&l.tailMode==="hidden"&&!o.alternate&&!bs)return Ks(t),null}else 2*Pe()-l.renderingStartTime>xc&&a!==536870912&&(t.flags|=128,r=!0,Bi(l,!1),t.lanes=4194304);l.isBackwards?(o.sibling=t.child,t.child=o):(s=l.last,s!==null?s.sibling=o:t.child=o,l.last=o)}return l.tail!==null?(s=l.tail,l.rendering=s,l.tail=s.sibling,l.renderingStartTime=Pe(),s.sibling=null,a=it.current,le(it,r?a&1|2:a&1),bs&&Qa(t,l.treeForkCount),s):(Ks(t),null);case 22:case 23:return It(t),ed(),l=t.memoizedState!==null,s!==null?s.memoizedState!==null!==l&&(t.flags|=8192):l&&(t.flags|=8192),l?(a&536870912)!==0&&(t.flags&128)===0&&(Ks(t),t.subtreeFlags&6&&(t.flags|=8192)):Ks(t),a=t.updateQueue,a!==null&&oc(t,a.retryQueue),a=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(a=s.memoizedState.cachePool.pool),l=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),l!==a&&(t.flags|=2048),s!==null&&re(Pl),null;case 24:return a=null,s!==null&&(a=s.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),Xa(ut),Ks(t),null;case 25:return null;case 30:return null}throw Error(d(156,t.tag))}function ov(s,t){switch(Ho(t),t.tag){case 1:return s=t.flags,s&65536?(t.flags=s&-65537|128,t):null;case 3:return Xa(ut),q(),s=t.flags,(s&65536)!==0&&(s&128)===0?(t.flags=s&-65537|128,t):null;case 26:case 27:case 5:return Ce(t),null;case 31:if(t.memoizedState!==null){if(It(t),t.alternate===null)throw Error(d(340));Jl()}return s=t.flags,s&65536?(t.flags=s&-65537|128,t):null;case 13:if(It(t),s=t.memoizedState,s!==null&&s.dehydrated!==null){if(t.alternate===null)throw Error(d(340));Jl()}return s=t.flags,s&65536?(t.flags=s&-65537|128,t):null;case 19:return re(it),null;case 4:return q(),null;case 10:return Xa(t.type),null;case 22:case 23:return It(t),ed(),s!==null&&re(Pl),s=t.flags,s&65536?(t.flags=s&-65537|128,t):null;case 24:return Xa(ut),null;case 25:return null;default:return null}}function jx(s,t){switch(Ho(t),t.tag){case 3:Xa(ut),q();break;case 26:case 27:case 5:Ce(t);break;case 4:q();break;case 31:t.memoizedState!==null&&It(t);break;case 13:It(t);break;case 19:re(it);break;case 10:Xa(t.type);break;case 22:case 23:It(t),ed(),s!==null&&re(Pl);break;case 24:Xa(ut)}}function Hi(s,t){try{var a=t.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var r=l.next;a=r;do{if((a.tag&s)===s){l=void 0;var o=a.create,m=a.inst;l=o(),m.destroy=l}a=a.next}while(a!==r)}}catch(g){Ms(t,t.return,g)}}function _l(s,t,a){try{var l=t.updateQueue,r=l!==null?l.lastEffect:null;if(r!==null){var o=r.next;l=o;do{if((l.tag&s)===s){var m=l.inst,g=m.destroy;if(g!==void 0){m.destroy=void 0,r=t;var z=a,Z=g;try{Z()}catch(oe){Ms(r,z,oe)}}}l=l.next}while(l!==o)}}catch(oe){Ms(t,t.return,oe)}}function vx(s){var t=s.updateQueue;if(t!==null){var a=s.stateNode;try{oh(t,a)}catch(l){Ms(s,s.return,l)}}}function Nx(s,t,a){a.props=an(s.type,s.memoizedProps),a.state=s.memoizedState;try{a.componentWillUnmount()}catch(l){Ms(s,t,l)}}function qi(s,t){try{var a=s.ref;if(a!==null){switch(s.tag){case 26:case 27:case 5:var l=s.stateNode;break;case 30:l=s.stateNode;break;default:l=s.stateNode}typeof a=="function"?s.refCleanup=a(l):a.current=l}}catch(r){Ms(s,t,r)}}function Ma(s,t){var a=s.ref,l=s.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(r){Ms(s,t,r)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(r){Ms(s,t,r)}else a.current=null}function bx(s){var t=s.type,a=s.memoizedProps,l=s.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(r){Ms(s,s.return,r)}}function Md(s,t,a){try{var l=s.stateNode;Av(l,s.type,a,t),l[Ns]=t}catch(r){Ms(s,s.return,r)}}function yx(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Al(s.type)||s.tag===4}function Dd(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||yx(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Al(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Od(s,t,a){var l=s.tag;if(l===5||l===6)s=s.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(s,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(s),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=Va));else if(l!==4&&(l===27&&Al(s.type)&&(a=s.stateNode,t=null),s=s.child,s!==null))for(Od(s,t,a),s=s.sibling;s!==null;)Od(s,t,a),s=s.sibling}function dc(s,t,a){var l=s.tag;if(l===5||l===6)s=s.stateNode,t?a.insertBefore(s,t):a.appendChild(s);else if(l!==4&&(l===27&&Al(s.type)&&(a=s.stateNode),s=s.child,s!==null))for(dc(s,t,a),s=s.sibling;s!==null;)dc(s,t,a),s=s.sibling}function wx(s){var t=s.stateNode,a=s.memoizedProps;try{for(var l=s.type,r=t.attributes;r.length;)t.removeAttributeNode(r[0]);St(t,l,a),t[Je]=s,t[Ns]=a}catch(o){Ms(s,s.return,o)}}var Pa=!1,xt=!1,Rd=!1,_x=typeof WeakSet=="function"?WeakSet:Set,Nt=null;function dv(s,t){if(s=s.containerInfo,tu=Ac,s=Lm(s),To(s)){if("selectionStart"in s)var a={start:s.selectionStart,end:s.selectionEnd};else e:{a=(a=s.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var r=l.anchorOffset,o=l.focusNode;l=l.focusOffset;try{a.nodeType,o.nodeType}catch{a=null;break e}var m=0,g=-1,z=-1,Z=0,oe=0,ge=s,I=null;s:for(;;){for(var ae;ge!==a||r!==0&&ge.nodeType!==3||(g=m+r),ge!==o||l!==0&&ge.nodeType!==3||(z=m+l),ge.nodeType===3&&(m+=ge.nodeValue.length),(ae=ge.firstChild)!==null;)I=ge,ge=ae;for(;;){if(ge===s)break s;if(I===a&&++Z===r&&(g=m),I===o&&++oe===l&&(z=m),(ae=ge.nextSibling)!==null)break;ge=I,I=ge.parentNode}ge=ae}a=g===-1||z===-1?null:{start:g,end:z}}else a=null}a=a||{start:0,end:0}}else a=null;for(au={focusedElem:s,selectionRange:a},Ac=!1,Nt=t;Nt!==null;)if(t=Nt,s=t.child,(t.subtreeFlags&1028)!==0&&s!==null)s.return=t,Nt=s;else for(;Nt!==null;){switch(t=Nt,o=t.alternate,s=t.flags,t.tag){case 0:if((s&4)!==0&&(s=t.updateQueue,s=s!==null?s.events:null,s!==null))for(a=0;a<s.length;a++)r=s[a],r.ref.impl=r.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&o!==null){s=void 0,a=t,r=o.memoizedProps,o=o.memoizedState,l=a.stateNode;try{var Ae=an(a.type,r);s=l.getSnapshotBeforeUpdate(Ae,o),l.__reactInternalSnapshotBeforeUpdate=s}catch(Xe){Ms(a,a.return,Xe)}}break;case 3:if((s&1024)!==0){if(s=t.stateNode.containerInfo,a=s.nodeType,a===9)iu(s);else if(a===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":iu(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(d(163))}if(s=t.sibling,s!==null){s.return=t.return,Nt=s;break}Nt=t.return}}function Sx(s,t,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:el(s,a),l&4&&Hi(5,a);break;case 1:if(el(s,a),l&4)if(s=a.stateNode,t===null)try{s.componentDidMount()}catch(m){Ms(a,a.return,m)}else{var r=an(a.type,t.memoizedProps);t=t.memoizedState;try{s.componentDidUpdate(r,t,s.__reactInternalSnapshotBeforeUpdate)}catch(m){Ms(a,a.return,m)}}l&64&&vx(a),l&512&&qi(a,a.return);break;case 3:if(el(s,a),l&64&&(s=a.updateQueue,s!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{oh(s,t)}catch(m){Ms(a,a.return,m)}}break;case 27:t===null&&l&4&&wx(a);case 26:case 5:el(s,a),t===null&&l&4&&bx(a),l&512&&qi(a,a.return);break;case 12:el(s,a);break;case 31:el(s,a),l&4&&Tx(s,a);break;case 13:el(s,a),l&4&&Ex(s,a),l&64&&(s=a.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(a=vv.bind(null,a),Hv(s,a))));break;case 22:if(l=a.memoizedState!==null||Pa,!l){t=t!==null&&t.memoizedState!==null||xt,r=Pa;var o=xt;Pa=l,(xt=t)&&!o?sl(s,a,(a.subtreeFlags&8772)!==0):el(s,a),Pa=r,xt=o}break;case 30:break;default:el(s,a)}}function Cx(s){var t=s.alternate;t!==null&&(s.alternate=null,Cx(t)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(t=s.stateNode,t!==null&&uo(t)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Js=null,Bt=!1;function Wa(s,t,a){for(a=a.child;a!==null;)kx(s,t,a),a=a.sibling}function kx(s,t,a){if(ve&&typeof ve.onCommitFiberUnmount=="function")try{ve.onCommitFiberUnmount(ke,a)}catch{}switch(a.tag){case 26:xt||Ma(a,t),Wa(s,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:xt||Ma(a,t);var l=Js,r=Bt;Al(a.type)&&(Js=a.stateNode,Bt=!1),Wa(s,t,a),Ji(a.stateNode),Js=l,Bt=r;break;case 5:xt||Ma(a,t);case 6:if(l=Js,r=Bt,Js=null,Wa(s,t,a),Js=l,Bt=r,Js!==null)if(Bt)try{(Js.nodeType===9?Js.body:Js.nodeName==="HTML"?Js.ownerDocument.body:Js).removeChild(a.stateNode)}catch(o){Ms(a,t,o)}else try{Js.removeChild(a.stateNode)}catch(o){Ms(a,t,o)}break;case 18:Js!==null&&(Bt?(s=Js,Nf(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,a.stateNode),ei(s)):Nf(Js,a.stateNode));break;case 4:l=Js,r=Bt,Js=a.stateNode.containerInfo,Bt=!0,Wa(s,t,a),Js=l,Bt=r;break;case 0:case 11:case 14:case 15:_l(2,a,t),xt||_l(4,a,t),Wa(s,t,a);break;case 1:xt||(Ma(a,t),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Nx(a,t,l)),Wa(s,t,a);break;case 21:Wa(s,t,a);break;case 22:xt=(l=xt)||a.memoizedState!==null,Wa(s,t,a),xt=l;break;default:Wa(s,t,a)}}function Tx(s,t){if(t.memoizedState===null&&(s=t.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{ei(s)}catch(a){Ms(t,t.return,a)}}}function Ex(s,t){if(t.memoizedState===null&&(s=t.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{ei(s)}catch(a){Ms(t,t.return,a)}}function uv(s){switch(s.tag){case 31:case 13:case 19:var t=s.stateNode;return t===null&&(t=s.stateNode=new _x),t;case 22:return s=s.stateNode,t=s._retryCache,t===null&&(t=s._retryCache=new _x),t;default:throw Error(d(435,s.tag))}}function uc(s,t){var a=uv(s);t.forEach(function(l){if(!a.has(l)){a.add(l);var r=Nv.bind(null,s,l);l.then(r,r)}})}function Ht(s,t){var a=t.deletions;if(a!==null)for(var l=0;l<a.length;l++){var r=a[l],o=s,m=t,g=m;e:for(;g!==null;){switch(g.tag){case 27:if(Al(g.type)){Js=g.stateNode,Bt=!1;break e}break;case 5:Js=g.stateNode,Bt=!1;break e;case 3:case 4:Js=g.stateNode.containerInfo,Bt=!0;break e}g=g.return}if(Js===null)throw Error(d(160));kx(o,m,r),Js=null,Bt=!1,o=r.alternate,o!==null&&(o.return=null),r.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)zx(t,s),t=t.sibling}var Na=null;function zx(s,t){var a=s.alternate,l=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Ht(t,s),qt(s),l&4&&(_l(3,s,s.return),Hi(3,s),_l(5,s,s.return));break;case 1:Ht(t,s),qt(s),l&512&&(xt||a===null||Ma(a,a.return)),l&64&&Pa&&(s=s.updateQueue,s!==null&&(l=s.callbacks,l!==null&&(a=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var r=Na;if(Ht(t,s),qt(s),l&512&&(xt||a===null||Ma(a,a.return)),l&4){var o=a!==null?a.memoizedState:null;if(l=s.memoizedState,a===null)if(l===null)if(s.stateNode===null){e:{l=s.type,a=s.memoizedProps,r=r.ownerDocument||r;s:switch(l){case"title":o=r.getElementsByTagName("title")[0],(!o||o[hi]||o[Je]||o.namespaceURI==="http://www.w3.org/2000/svg"||o.hasAttribute("itemprop"))&&(o=r.createElement(l),r.head.insertBefore(o,r.querySelector("head > title"))),St(o,l,a),o[Je]=s,vt(o),l=o;break e;case"link":var m=Af("link","href",r).get(l+(a.href||""));if(m){for(var g=0;g<m.length;g++)if(o=m[g],o.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&o.getAttribute("rel")===(a.rel==null?null:a.rel)&&o.getAttribute("title")===(a.title==null?null:a.title)&&o.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){m.splice(g,1);break s}}o=r.createElement(l),St(o,l,a),r.head.appendChild(o);break;case"meta":if(m=Af("meta","content",r).get(l+(a.content||""))){for(g=0;g<m.length;g++)if(o=m[g],o.getAttribute("content")===(a.content==null?null:""+a.content)&&o.getAttribute("name")===(a.name==null?null:a.name)&&o.getAttribute("property")===(a.property==null?null:a.property)&&o.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&o.getAttribute("charset")===(a.charSet==null?null:a.charSet)){m.splice(g,1);break s}}o=r.createElement(l),St(o,l,a),r.head.appendChild(o);break;default:throw Error(d(468,l))}o[Je]=s,vt(o),l=o}s.stateNode=l}else Mf(r,s.type,s.stateNode);else s.stateNode=zf(r,l,s.memoizedProps);else o!==l?(o===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):o.count--,l===null?Mf(r,s.type,s.stateNode):zf(r,l,s.memoizedProps)):l===null&&s.stateNode!==null&&Md(s,s.memoizedProps,a.memoizedProps)}break;case 27:Ht(t,s),qt(s),l&512&&(xt||a===null||Ma(a,a.return)),a!==null&&l&4&&Md(s,s.memoizedProps,a.memoizedProps);break;case 5:if(Ht(t,s),qt(s),l&512&&(xt||a===null||Ma(a,a.return)),s.flags&32){r=s.stateNode;try{wn(r,"")}catch(Ae){Ms(s,s.return,Ae)}}l&4&&s.stateNode!=null&&(r=s.memoizedProps,Md(s,r,a!==null?a.memoizedProps:r)),l&1024&&(Rd=!0);break;case 6:if(Ht(t,s),qt(s),l&4){if(s.stateNode===null)throw Error(d(162));l=s.memoizedProps,a=s.stateNode;try{a.nodeValue=l}catch(Ae){Ms(s,s.return,Ae)}}break;case 3:if(kc=null,r=Na,Na=Sc(t.containerInfo),Ht(t,s),Na=r,qt(s),l&4&&a!==null&&a.memoizedState.isDehydrated)try{ei(t.containerInfo)}catch(Ae){Ms(s,s.return,Ae)}Rd&&(Rd=!1,Ax(s));break;case 4:l=Na,Na=Sc(s.stateNode.containerInfo),Ht(t,s),qt(s),Na=l;break;case 12:Ht(t,s),qt(s);break;case 31:Ht(t,s),qt(s),l&4&&(l=s.updateQueue,l!==null&&(s.updateQueue=null,uc(s,l)));break;case 13:Ht(t,s),qt(s),s.child.flags&8192&&s.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(hc=Pe()),l&4&&(l=s.updateQueue,l!==null&&(s.updateQueue=null,uc(s,l)));break;case 22:r=s.memoizedState!==null;var z=a!==null&&a.memoizedState!==null,Z=Pa,oe=xt;if(Pa=Z||r,xt=oe||z,Ht(t,s),xt=oe,Pa=Z,qt(s),l&8192)e:for(t=s.stateNode,t._visibility=r?t._visibility&-2:t._visibility|1,r&&(a===null||z||Pa||xt||ln(s)),a=null,t=s;;){if(t.tag===5||t.tag===26){if(a===null){z=a=t;try{if(o=z.stateNode,r)m=o.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none";else{g=z.stateNode;var ge=z.memoizedProps.style,I=ge!=null&&ge.hasOwnProperty("display")?ge.display:null;g.style.display=I==null||typeof I=="boolean"?"":(""+I).trim()}}catch(Ae){Ms(z,z.return,Ae)}}}else if(t.tag===6){if(a===null){z=t;try{z.stateNode.nodeValue=r?"":z.memoizedProps}catch(Ae){Ms(z,z.return,Ae)}}}else if(t.tag===18){if(a===null){z=t;try{var ae=z.stateNode;r?bf(ae,!0):bf(z.stateNode,!1)}catch(Ae){Ms(z,z.return,Ae)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===s)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}l&4&&(l=s.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,uc(s,a))));break;case 19:Ht(t,s),qt(s),l&4&&(l=s.updateQueue,l!==null&&(s.updateQueue=null,uc(s,l)));break;case 30:break;case 21:break;default:Ht(t,s),qt(s)}}function qt(s){var t=s.flags;if(t&2){try{for(var a,l=s.return;l!==null;){if(yx(l)){a=l;break}l=l.return}if(a==null)throw Error(d(160));switch(a.tag){case 27:var r=a.stateNode,o=Dd(s);dc(s,o,r);break;case 5:var m=a.stateNode;a.flags&32&&(wn(m,""),a.flags&=-33);var g=Dd(s);dc(s,g,m);break;case 3:case 4:var z=a.stateNode.containerInfo,Z=Dd(s);Od(s,Z,z);break;default:throw Error(d(161))}}catch(oe){Ms(s,s.return,oe)}s.flags&=-3}t&4096&&(s.flags&=-4097)}function Ax(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var t=s;Ax(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),s=s.sibling}}function el(s,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Sx(s,t.alternate,t),t=t.sibling}function ln(s){for(s=s.child;s!==null;){var t=s;switch(t.tag){case 0:case 11:case 14:case 15:_l(4,t,t.return),ln(t);break;case 1:Ma(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&Nx(t,t.return,a),ln(t);break;case 27:Ji(t.stateNode);case 26:case 5:Ma(t,t.return),ln(t);break;case 22:t.memoizedState===null&&ln(t);break;case 30:ln(t);break;default:ln(t)}s=s.sibling}}function sl(s,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var l=t.alternate,r=s,o=t,m=o.flags;switch(o.tag){case 0:case 11:case 15:sl(r,o,a),Hi(4,o);break;case 1:if(sl(r,o,a),l=o,r=l.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(Z){Ms(l,l.return,Z)}if(l=o,r=l.updateQueue,r!==null){var g=l.stateNode;try{var z=r.shared.hiddenCallbacks;if(z!==null)for(r.shared.hiddenCallbacks=null,r=0;r<z.length;r++)ch(z[r],g)}catch(Z){Ms(l,l.return,Z)}}a&&m&64&&vx(o),qi(o,o.return);break;case 27:wx(o);case 26:case 5:sl(r,o,a),a&&l===null&&m&4&&bx(o),qi(o,o.return);break;case 12:sl(r,o,a);break;case 31:sl(r,o,a),a&&m&4&&Tx(r,o);break;case 13:sl(r,o,a),a&&m&4&&Ex(r,o);break;case 22:o.memoizedState===null&&sl(r,o,a),qi(o,o.return);break;case 30:break;default:sl(r,o,a)}t=t.sibling}}function Ld(s,t){var a=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(a=s.memoizedState.cachePool.pool),s=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),s!==a&&(s!=null&&s.refCount++,a!=null&&Ci(a))}function Ud(s,t){s=null,t.alternate!==null&&(s=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==s&&(t.refCount++,s!=null&&Ci(s))}function ba(s,t,a,l){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Mx(s,t,a,l),t=t.sibling}function Mx(s,t,a,l){var r=t.flags;switch(t.tag){case 0:case 11:case 15:ba(s,t,a,l),r&2048&&Hi(9,t);break;case 1:ba(s,t,a,l);break;case 3:ba(s,t,a,l),r&2048&&(s=null,t.alternate!==null&&(s=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==s&&(t.refCount++,s!=null&&Ci(s)));break;case 12:if(r&2048){ba(s,t,a,l),s=t.stateNode;try{var o=t.memoizedProps,m=o.id,g=o.onPostCommit;typeof g=="function"&&g(m,t.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(z){Ms(t,t.return,z)}}else ba(s,t,a,l);break;case 31:ba(s,t,a,l);break;case 13:ba(s,t,a,l);break;case 23:break;case 22:o=t.stateNode,m=t.alternate,t.memoizedState!==null?o._visibility&2?ba(s,t,a,l):Gi(s,t):o._visibility&2?ba(s,t,a,l):(o._visibility|=2,Fn(s,t,a,l,(t.subtreeFlags&10256)!==0||!1)),r&2048&&Ld(m,t);break;case 24:ba(s,t,a,l),r&2048&&Ud(t.alternate,t);break;default:ba(s,t,a,l)}}function Fn(s,t,a,l,r){for(r=r&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var o=s,m=t,g=a,z=l,Z=m.flags;switch(m.tag){case 0:case 11:case 15:Fn(o,m,g,z,r),Hi(8,m);break;case 23:break;case 22:var oe=m.stateNode;m.memoizedState!==null?oe._visibility&2?Fn(o,m,g,z,r):Gi(o,m):(oe._visibility|=2,Fn(o,m,g,z,r)),r&&Z&2048&&Ld(m.alternate,m);break;case 24:Fn(o,m,g,z,r),r&&Z&2048&&Ud(m.alternate,m);break;default:Fn(o,m,g,z,r)}t=t.sibling}}function Gi(s,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=s,l=t,r=l.flags;switch(l.tag){case 22:Gi(a,l),r&2048&&Ld(l.alternate,l);break;case 24:Gi(a,l),r&2048&&Ud(l.alternate,l);break;default:Gi(a,l)}t=t.sibling}}var Vi=8192;function $n(s,t,a){if(s.subtreeFlags&Vi)for(s=s.child;s!==null;)Dx(s,t,a),s=s.sibling}function Dx(s,t,a){switch(s.tag){case 26:$n(s,t,a),s.flags&Vi&&s.memoizedState!==null&&Iv(a,Na,s.memoizedState,s.memoizedProps);break;case 5:$n(s,t,a);break;case 3:case 4:var l=Na;Na=Sc(s.stateNode.containerInfo),$n(s,t,a),Na=l;break;case 22:s.memoizedState===null&&(l=s.alternate,l!==null&&l.memoizedState!==null?(l=Vi,Vi=16777216,$n(s,t,a),Vi=l):$n(s,t,a));break;default:$n(s,t,a)}}function Ox(s){var t=s.alternate;if(t!==null&&(s=t.child,s!==null)){t.child=null;do t=s.sibling,s.sibling=null,s=t;while(s!==null)}}function Fi(s){var t=s.deletions;if((s.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var l=t[a];Nt=l,Lx(l,s)}Ox(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Rx(s),s=s.sibling}function Rx(s){switch(s.tag){case 0:case 11:case 15:Fi(s),s.flags&2048&&_l(9,s,s.return);break;case 3:Fi(s);break;case 12:Fi(s);break;case 22:var t=s.stateNode;s.memoizedState!==null&&t._visibility&2&&(s.return===null||s.return.tag!==13)?(t._visibility&=-3,mc(s)):Fi(s);break;default:Fi(s)}}function mc(s){var t=s.deletions;if((s.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var l=t[a];Nt=l,Lx(l,s)}Ox(s)}for(s=s.child;s!==null;){switch(t=s,t.tag){case 0:case 11:case 15:_l(8,t,t.return),mc(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,mc(t));break;default:mc(t)}s=s.sibling}}function Lx(s,t){for(;Nt!==null;){var a=Nt;switch(a.tag){case 0:case 11:case 15:_l(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Ci(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Nt=l;else e:for(a=s;Nt!==null;){l=Nt;var r=l.sibling,o=l.return;if(Cx(l),l===a){Nt=null;break e}if(r!==null){r.return=o,Nt=r;break e}Nt=o}}}var mv={getCacheForType:function(s){var t=wt(ut),a=t.data.get(s);return a===void 0&&(a=s(),t.data.set(s,a)),a},cacheSignal:function(){return wt(ut).controller.signal}},hv=typeof WeakMap=="function"?WeakMap:Map,ks=0,Us=null,xs=null,gs=0,As=0,Pt=null,Sl=!1,Qn=!1,Bd=!1,tl=0,et=0,Cl=0,nn=0,Hd=0,Wt=0,Yn=0,$i=null,Gt=null,qd=!1,hc=0,Ux=0,xc=1/0,fc=null,kl=null,gt=0,Tl=null,Xn=null,al=0,Gd=0,Vd=null,Bx=null,Qi=0,Fd=null;function ea(){return(ks&2)!==0&&gs!==0?gs&-gs:A.T!==null?Jd():V()}function Hx(){if(Wt===0)if((gs&536870912)===0||bs){var s=Rt;Rt<<=1,(Rt&3932160)===0&&(Rt=262144),Wt=s}else Wt=536870912;return s=Zt.current,s!==null&&(s.flags|=32),Wt}function Vt(s,t,a){(s===Us&&(As===2||As===9)||s.cancelPendingCommit!==null)&&(Kn(s,0),El(s,gs,Wt,!1)),pt(s,a),((ks&2)===0||s!==Us)&&(s===Us&&((ks&2)===0&&(nn|=a),et===4&&El(s,gs,Wt,!1)),Da(s))}function qx(s,t,a){if((ks&6)!==0)throw Error(d(327));var l=!a&&(t&127)===0&&(t&s.expiredLanes)===0||Ta(s,t),r=l?pv(s,t):Qd(s,t,!0),o=l;do{if(r===0){Qn&&!l&&El(s,t,0,!1);break}else{if(a=s.current.alternate,o&&!xv(a)){r=Qd(s,t,!1),o=!1;continue}if(r===2){if(o=t,s.errorRecoveryDisabledLanes&o)var m=0;else m=s.pendingLanes&-536870913,m=m!==0?m:m&536870912?536870912:0;if(m!==0){t=m;e:{var g=s;r=$i;var z=g.current.memoizedState.isDehydrated;if(z&&(Kn(g,m).flags|=256),m=Qd(g,m,!1),m!==2){if(Bd&&!z){g.errorRecoveryDisabledLanes|=o,nn|=o,r=4;break e}o=Gt,Gt=r,o!==null&&(Gt===null?Gt=o:Gt.push.apply(Gt,o))}r=m}if(o=!1,r!==2)continue}}if(r===1){Kn(s,0),El(s,t,0,!0);break}e:{switch(l=s,o=r,o){case 0:case 1:throw Error(d(345));case 4:if((t&4194048)!==t)break;case 6:El(l,t,Wt,!Sl);break e;case 2:Gt=null;break;case 3:case 5:break;default:throw Error(d(329))}if((t&62914560)===t&&(r=hc+300-Pe(),10<r)){if(El(l,t,Wt,!Sl),qa(l,0,!0)!==0)break e;al=t,l.timeoutHandle=jf(Gx.bind(null,l,a,Gt,fc,qd,t,Wt,nn,Yn,Sl,o,"Throttled",-0,0),r);break e}Gx(l,a,Gt,fc,qd,t,Wt,nn,Yn,Sl,o,null,-0,0)}}break}while(!0);Da(s)}function Gx(s,t,a,l,r,o,m,g,z,Z,oe,ge,I,ae){if(s.timeoutHandle=-1,ge=t.subtreeFlags,ge&8192||(ge&16785408)===16785408){ge={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Va},Dx(t,o,ge);var Ae=(o&62914560)===o?hc-Pe():(o&4194048)===o?Ux-Pe():0;if(Ae=Pv(ge,Ae),Ae!==null){al=o,s.cancelPendingCommit=Ae(Jx.bind(null,s,t,o,a,l,r,m,g,z,oe,ge,null,I,ae)),El(s,o,m,!Z);return}}Jx(s,t,o,a,l,r,m,g,z)}function xv(s){for(var t=s;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var r=a[l],o=r.getSnapshot;r=r.value;try{if(!Kt(o(),r))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===s)break;for(;t.sibling===null;){if(t.return===null||t.return===s)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function El(s,t,a,l){t&=~Hd,t&=~nn,s.suspendedLanes|=t,s.pingedLanes&=~t,l&&(s.warmLanes|=t),l=s.expirationTimes;for(var r=t;0<r;){var o=31-_s(r),m=1<<o;l[o]=-1,r&=~m}a!==0&&Lt(s,a,t)}function pc(){return(ks&6)===0?(Yi(0),!1):!0}function $d(){if(xs!==null){if(As===0)var s=xs.return;else s=xs,Ya=Zl=null,id(s),Bn=null,Ti=0,s=xs;for(;s!==null;)jx(s.alternate,s),s=s.return;xs=null}}function Kn(s,t){var a=s.timeoutHandle;a!==-1&&(s.timeoutHandle=-1,Ov(a)),a=s.cancelPendingCommit,a!==null&&(s.cancelPendingCommit=null,a()),al=0,$d(),Us=s,xs=a=$a(s.current,null),gs=t,As=0,Pt=null,Sl=!1,Qn=Ta(s,t),Bd=!1,Yn=Wt=Hd=nn=Cl=et=0,Gt=$i=null,qd=!1,(t&8)!==0&&(t|=t&32);var l=s.entangledLanes;if(l!==0)for(s=s.entanglements,l&=t;0<l;){var r=31-_s(l),o=1<<r;t|=s[r],l&=~o}return tl=t,Ur(),a}function Vx(s,t){es=null,A.H=Li,t===Un||t===Qr?(t=lh(),As=3):t===Ko?(t=lh(),As=4):As=t===yd?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Pt=t,xs===null&&(et=1,nc(s,ra(t,s.current)))}function Fx(){var s=Zt.current;return s===null?!0:(gs&4194048)===gs?ua===null:(gs&62914560)===gs||(gs&536870912)!==0?s===ua:!1}function $x(){var s=A.H;return A.H=Li,s===null?Li:s}function Qx(){var s=A.A;return A.A=mv,s}function gc(){et=4,Sl||(gs&4194048)!==gs&&Zt.current!==null||(Qn=!0),(Cl&134217727)===0&&(nn&134217727)===0||Us===null||El(Us,gs,Wt,!1)}function Qd(s,t,a){var l=ks;ks|=2;var r=$x(),o=Qx();(Us!==s||gs!==t)&&(fc=null,Kn(s,t)),t=!1;var m=et;e:do try{if(As!==0&&xs!==null){var g=xs,z=Pt;switch(As){case 8:$d(),m=6;break e;case 3:case 2:case 9:case 6:Zt.current===null&&(t=!0);var Z=As;if(As=0,Pt=null,Jn(s,g,z,Z),a&&Qn){m=0;break e}break;default:Z=As,As=0,Pt=null,Jn(s,g,z,Z)}}fv(),m=et;break}catch(oe){Vx(s,oe)}while(!0);return t&&s.shellSuspendCounter++,Ya=Zl=null,ks=l,A.H=r,A.A=o,xs===null&&(Us=null,gs=0,Ur()),m}function fv(){for(;xs!==null;)Yx(xs)}function pv(s,t){var a=ks;ks|=2;var l=$x(),r=Qx();Us!==s||gs!==t?(fc=null,xc=Pe()+500,Kn(s,t)):Qn=Ta(s,t);e:do try{if(As!==0&&xs!==null){t=xs;var o=Pt;s:switch(As){case 1:As=0,Pt=null,Jn(s,t,o,1);break;case 2:case 9:if(th(o)){As=0,Pt=null,Xx(t);break}t=function(){As!==2&&As!==9||Us!==s||(As=7),Da(s)},o.then(t,t);break e;case 3:As=7;break e;case 4:As=5;break e;case 7:th(o)?(As=0,Pt=null,Xx(t)):(As=0,Pt=null,Jn(s,t,o,7));break;case 5:var m=null;switch(xs.tag){case 26:m=xs.memoizedState;case 5:case 27:var g=xs;if(m?Df(m):g.stateNode.complete){As=0,Pt=null;var z=g.sibling;if(z!==null)xs=z;else{var Z=g.return;Z!==null?(xs=Z,jc(Z)):xs=null}break s}}As=0,Pt=null,Jn(s,t,o,5);break;case 6:As=0,Pt=null,Jn(s,t,o,6);break;case 8:$d(),et=6;break e;default:throw Error(d(462))}}gv();break}catch(oe){Vx(s,oe)}while(!0);return Ya=Zl=null,A.H=l,A.A=r,ks=a,xs!==null?0:(Us=null,gs=0,Ur(),et)}function gv(){for(;xs!==null&&!Ot();)Yx(xs)}function Yx(s){var t=px(s.alternate,s,tl);s.memoizedProps=s.pendingProps,t===null?jc(s):xs=t}function Xx(s){var t=s,a=t.alternate;switch(t.tag){case 15:case 0:t=dx(a,t,t.pendingProps,t.type,void 0,gs);break;case 11:t=dx(a,t,t.pendingProps,t.type.render,t.ref,gs);break;case 5:id(t);default:jx(a,t),t=xs=Qm(t,tl),t=px(a,t,tl)}s.memoizedProps=s.pendingProps,t===null?jc(s):xs=t}function Jn(s,t,a,l){Ya=Zl=null,id(t),Bn=null,Ti=0;var r=t.return;try{if(nv(s,r,t,a,gs)){et=1,nc(s,ra(a,s.current)),xs=null;return}}catch(o){if(r!==null)throw xs=r,o;et=1,nc(s,ra(a,s.current)),xs=null;return}t.flags&32768?(bs||l===1?s=!0:Qn||(gs&536870912)!==0?s=!1:(Sl=s=!0,(l===2||l===9||l===3||l===6)&&(l=Zt.current,l!==null&&l.tag===13&&(l.flags|=16384))),Kx(t,s)):jc(t)}function jc(s){var t=s;do{if((t.flags&32768)!==0){Kx(t,Sl);return}s=t.return;var a=cv(t.alternate,t,tl);if(a!==null){xs=a;return}if(t=t.sibling,t!==null){xs=t;return}xs=t=s}while(t!==null);et===0&&(et=5)}function Kx(s,t){do{var a=ov(s.alternate,s);if(a!==null){a.flags&=32767,xs=a;return}if(a=s.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(s=s.sibling,s!==null)){xs=s;return}xs=s=a}while(s!==null);et=6,xs=null}function Jx(s,t,a,l,r,o,m,g,z){s.cancelPendingCommit=null;do vc();while(gt!==0);if((ks&6)!==0)throw Error(d(327));if(t!==null){if(t===s.current)throw Error(d(177));if(o=t.lanes|t.childLanes,o|=Do,Xt(s,a,o,m,g,z),s===Us&&(xs=Us=null,gs=0),Xn=t,Tl=s,al=a,Gd=o,Vd=r,Bx=l,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,bv(Ye,function(){return ef(),null})):(s.callbackNode=null,s.callbackPriority=0),l=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||l){l=A.T,A.T=null,r=K.p,K.p=2,m=ks,ks|=4;try{dv(s,t,a)}finally{ks=m,K.p=r,A.T=l}}gt=1,Zx(),Ix(),Px()}}function Zx(){if(gt===1){gt=0;var s=Tl,t=Xn,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=A.T,A.T=null;var l=K.p;K.p=2;var r=ks;ks|=4;try{zx(t,s);var o=au,m=Lm(s.containerInfo),g=o.focusedElem,z=o.selectionRange;if(m!==g&&g&&g.ownerDocument&&Rm(g.ownerDocument.documentElement,g)){if(z!==null&&To(g)){var Z=z.start,oe=z.end;if(oe===void 0&&(oe=Z),"selectionStart"in g)g.selectionStart=Z,g.selectionEnd=Math.min(oe,g.value.length);else{var ge=g.ownerDocument||document,I=ge&&ge.defaultView||window;if(I.getSelection){var ae=I.getSelection(),Ae=g.textContent.length,Xe=Math.min(z.start,Ae),Rs=z.end===void 0?Xe:Math.min(z.end,Ae);!ae.extend&&Xe>Rs&&(m=Rs,Rs=Xe,Xe=m);var F=Om(g,Xe),B=Om(g,Rs);if(F&&B&&(ae.rangeCount!==1||ae.anchorNode!==F.node||ae.anchorOffset!==F.offset||ae.focusNode!==B.node||ae.focusOffset!==B.offset)){var J=ge.createRange();J.setStart(F.node,F.offset),ae.removeAllRanges(),Xe>Rs?(ae.addRange(J),ae.extend(B.node,B.offset)):(J.setEnd(B.node,B.offset),ae.addRange(J))}}}}for(ge=[],ae=g;ae=ae.parentNode;)ae.nodeType===1&&ge.push({element:ae,left:ae.scrollLeft,top:ae.scrollTop});for(typeof g.focus=="function"&&g.focus(),g=0;g<ge.length;g++){var xe=ge[g];xe.element.scrollLeft=xe.left,xe.element.scrollTop=xe.top}}Ac=!!tu,au=tu=null}finally{ks=r,K.p=l,A.T=a}}s.current=t,gt=2}}function Ix(){if(gt===2){gt=0;var s=Tl,t=Xn,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=A.T,A.T=null;var l=K.p;K.p=2;var r=ks;ks|=4;try{Sx(s,t.alternate,t)}finally{ks=r,K.p=l,A.T=a}}gt=3}}function Px(){if(gt===4||gt===3){gt=0,bt();var s=Tl,t=Xn,a=al,l=Bx;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?gt=5:(gt=0,Xn=Tl=null,Wx(s,s.pendingLanes));var r=s.pendingLanes;if(r===0&&(kl=null),gn(a),t=t.stateNode,ve&&typeof ve.onCommitFiberRoot=="function")try{ve.onCommitFiberRoot(ke,t,void 0,(t.current.flags&128)===128)}catch{}if(l!==null){t=A.T,r=K.p,K.p=2,A.T=null;try{for(var o=s.onRecoverableError,m=0;m<l.length;m++){var g=l[m];o(g.value,{componentStack:g.stack})}}finally{A.T=t,K.p=r}}(al&3)!==0&&vc(),Da(s),r=s.pendingLanes,(a&261930)!==0&&(r&42)!==0?s===Fd?Qi++:(Qi=0,Fd=s):Qi=0,Yi(0)}}function Wx(s,t){(s.pooledCacheLanes&=t)===0&&(t=s.pooledCache,t!=null&&(s.pooledCache=null,Ci(t)))}function vc(){return Zx(),Ix(),Px(),ef()}function ef(){if(gt!==5)return!1;var s=Tl,t=Gd;Gd=0;var a=gn(al),l=A.T,r=K.p;try{K.p=32>a?32:a,A.T=null,a=Vd,Vd=null;var o=Tl,m=al;if(gt=0,Xn=Tl=null,al=0,(ks&6)!==0)throw Error(d(331));var g=ks;if(ks|=4,Rx(o.current),Mx(o,o.current,m,a),ks=g,Yi(0,!1),ve&&typeof ve.onPostCommitFiberRoot=="function")try{ve.onPostCommitFiberRoot(ke,o)}catch{}return!0}finally{K.p=r,A.T=l,Wx(s,t)}}function sf(s,t,a){t=ra(a,t),t=bd(s.stateNode,t,2),s=bl(s,t,2),s!==null&&(pt(s,2),Da(s))}function Ms(s,t,a){if(s.tag===3)sf(s,s,a);else for(;t!==null;){if(t.tag===3){sf(t,s,a);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(kl===null||!kl.has(l))){s=ra(a,s),a=tx(2),l=bl(t,a,2),l!==null&&(ax(a,l,t,s),pt(l,2),Da(l));break}}t=t.return}}function Yd(s,t,a){var l=s.pingCache;if(l===null){l=s.pingCache=new hv;var r=new Set;l.set(t,r)}else r=l.get(t),r===void 0&&(r=new Set,l.set(t,r));r.has(a)||(Bd=!0,r.add(a),s=jv.bind(null,s,t,a),t.then(s,s))}function jv(s,t,a){var l=s.pingCache;l!==null&&l.delete(t),s.pingedLanes|=s.suspendedLanes&a,s.warmLanes&=~a,Us===s&&(gs&a)===a&&(et===4||et===3&&(gs&62914560)===gs&&300>Pe()-hc?(ks&2)===0&&Kn(s,0):Hd|=a,Yn===gs&&(Yn=0)),Da(s)}function tf(s,t){t===0&&(t=we()),s=Xl(s,t),s!==null&&(pt(s,t),Da(s))}function vv(s){var t=s.memoizedState,a=0;t!==null&&(a=t.retryLane),tf(s,a)}function Nv(s,t){var a=0;switch(s.tag){case 31:case 13:var l=s.stateNode,r=s.memoizedState;r!==null&&(a=r.retryLane);break;case 19:l=s.stateNode;break;case 22:l=s.stateNode._retryCache;break;default:throw Error(d(314))}l!==null&&l.delete(t),tf(s,a)}function bv(s,t){return Ke(s,t)}var Nc=null,Zn=null,Xd=!1,bc=!1,Kd=!1,zl=0;function Da(s){s!==Zn&&s.next===null&&(Zn===null?Nc=Zn=s:Zn=Zn.next=s),bc=!0,Xd||(Xd=!0,wv())}function Yi(s,t){if(!Kd&&bc){Kd=!0;do for(var a=!1,l=Nc;l!==null;){if(s!==0){var r=l.pendingLanes;if(r===0)var o=0;else{var m=l.suspendedLanes,g=l.pingedLanes;o=(1<<31-_s(42|s)+1)-1,o&=r&~(m&~g),o=o&201326741?o&201326741|1:o?o|2:0}o!==0&&(a=!0,rf(l,o))}else o=gs,o=qa(l,l===Us?o:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(o&3)===0||Ta(l,o)||(a=!0,rf(l,o));l=l.next}while(a);Kd=!1}}function yv(){af()}function af(){bc=Xd=!1;var s=0;zl!==0&&Dv()&&(s=zl);for(var t=Pe(),a=null,l=Nc;l!==null;){var r=l.next,o=lf(l,t);o===0?(l.next=null,a===null?Nc=r:a.next=r,r===null&&(Zn=a)):(a=l,(s!==0||(o&3)!==0)&&(bc=!0)),l=r}gt!==0&&gt!==5||Yi(s),zl!==0&&(zl=0)}function lf(s,t){for(var a=s.suspendedLanes,l=s.pingedLanes,r=s.expirationTimes,o=s.pendingLanes&-62914561;0<o;){var m=31-_s(o),g=1<<m,z=r[m];z===-1?((g&a)===0||(g&l)!==0)&&(r[m]=ee(g,t)):z<=t&&(s.expiredLanes|=g),o&=~g}if(t=Us,a=gs,a=qa(s,s===t?a:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),l=s.callbackNode,a===0||s===t&&(As===2||As===9)||s.cancelPendingCommit!==null)return l!==null&&l!==null&&lt(l),s.callbackNode=null,s.callbackPriority=0;if((a&3)===0||Ta(s,a)){if(t=a&-a,t===s.callbackPriority)return t;switch(l!==null&&lt(l),gn(a)){case 2:case 8:a=ze;break;case 32:a=Ye;break;case 268435456:a=We;break;default:a=Ye}return l=nf.bind(null,s),a=Ke(a,l),s.callbackPriority=t,s.callbackNode=a,t}return l!==null&&l!==null&&lt(l),s.callbackPriority=2,s.callbackNode=null,2}function nf(s,t){if(gt!==0&&gt!==5)return s.callbackNode=null,s.callbackPriority=0,null;var a=s.callbackNode;if(vc()&&s.callbackNode!==a)return null;var l=gs;return l=qa(s,s===Us?l:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),l===0?null:(qx(s,l,t),lf(s,Pe()),s.callbackNode!=null&&s.callbackNode===a?nf.bind(null,s):null)}function rf(s,t){if(vc())return null;qx(s,t,!0)}function wv(){Rv(function(){(ks&6)!==0?Ke(Re,yv):af()})}function Jd(){if(zl===0){var s=Rn;s===0&&(s=Et,Et<<=1,(Et&261888)===0&&(Et=256)),zl=s}return zl}function cf(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Er(""+s)}function of(s,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,s.id&&a.setAttribute("form",s.id),t.parentNode.insertBefore(a,t),s=new FormData(s),a.parentNode.removeChild(a),s}function _v(s,t,a,l,r){if(t==="submit"&&a&&a.stateNode===r){var o=cf((r[Ns]||null).action),m=l.submitter;m&&(t=(t=m[Ns]||null)?cf(t.formAction):m.getAttribute("formAction"),t!==null&&(o=t,m=null));var g=new Dr("action","action",null,l,r);s.push({event:g,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(zl!==0){var z=m?of(r,m):new FormData(r);fd(a,{pending:!0,data:z,method:r.method,action:o},null,z)}}else typeof o=="function"&&(g.preventDefault(),z=m?of(r,m):new FormData(r),fd(a,{pending:!0,data:z,method:r.method,action:o},o,z))},currentTarget:r}]})}}for(var Zd=0;Zd<Mo.length;Zd++){var Id=Mo[Zd],Sv=Id.toLowerCase(),Cv=Id[0].toUpperCase()+Id.slice(1);va(Sv,"on"+Cv)}va(Hm,"onAnimationEnd"),va(qm,"onAnimationIteration"),va(Gm,"onAnimationStart"),va("dblclick","onDoubleClick"),va("focusin","onFocus"),va("focusout","onBlur"),va(Vj,"onTransitionRun"),va(Fj,"onTransitionStart"),va($j,"onTransitionCancel"),va(Vm,"onTransitionEnd"),bn("onMouseEnter",["mouseout","mouseover"]),bn("onMouseLeave",["mouseout","mouseover"]),bn("onPointerEnter",["pointerout","pointerover"]),bn("onPointerLeave",["pointerout","pointerover"]),Fl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Fl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Fl("onBeforeInput",["compositionend","keypress","textInput","paste"]),Fl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Fl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Fl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kv=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Xi));function df(s,t){t=(t&4)!==0;for(var a=0;a<s.length;a++){var l=s[a],r=l.event;l=l.listeners;e:{var o=void 0;if(t)for(var m=l.length-1;0<=m;m--){var g=l[m],z=g.instance,Z=g.currentTarget;if(g=g.listener,z!==o&&r.isPropagationStopped())break e;o=g,r.currentTarget=Z;try{o(r)}catch(oe){Lr(oe)}r.currentTarget=null,o=z}else for(m=0;m<l.length;m++){if(g=l[m],z=g.instance,Z=g.currentTarget,g=g.listener,z!==o&&r.isPropagationStopped())break e;o=g,r.currentTarget=Z;try{o(r)}catch(oe){Lr(oe)}r.currentTarget=null,o=z}}}}function fs(s,t){var a=t[aa];a===void 0&&(a=t[aa]=new Set);var l=s+"__bubble";a.has(l)||(uf(t,s,2,!1),a.add(l))}function Pd(s,t,a){var l=0;t&&(l|=4),uf(a,s,l,t)}var yc="_reactListening"+Math.random().toString(36).slice(2);function Wd(s){if(!s[yc]){s[yc]=!0,am.forEach(function(a){a!=="selectionchange"&&(kv.has(a)||Pd(a,!1,s),Pd(a,!0,s))});var t=s.nodeType===9?s:s.ownerDocument;t===null||t[yc]||(t[yc]=!0,Pd("selectionchange",!1,t))}}function uf(s,t,a,l){switch(qf(t)){case 2:var r=sN;break;case 8:r=tN;break;default:r=xu}a=r.bind(null,t,a,s),r=void 0,!vo||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),l?r!==void 0?s.addEventListener(t,a,{capture:!0,passive:r}):s.addEventListener(t,a,!0):r!==void 0?s.addEventListener(t,a,{passive:r}):s.addEventListener(t,a,!1)}function eu(s,t,a,l,r){var o=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var m=l.tag;if(m===3||m===4){var g=l.stateNode.containerInfo;if(g===r)break;if(m===4)for(m=l.return;m!==null;){var z=m.tag;if((z===3||z===4)&&m.stateNode.containerInfo===r)return;m=m.return}for(;g!==null;){if(m=jn(g),m===null)return;if(z=m.tag,z===5||z===6||z===26||z===27){l=o=m;continue e}g=g.parentNode}}l=l.return}fm(function(){var Z=o,oe=go(a),ge=[];e:{var I=Fm.get(s);if(I!==void 0){var ae=Dr,Ae=s;switch(s){case"keypress":if(Ar(a)===0)break e;case"keydown":case"keyup":ae=Nj;break;case"focusin":Ae="focus",ae=wo;break;case"focusout":Ae="blur",ae=wo;break;case"beforeblur":case"afterblur":ae=wo;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=jm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=cj;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=wj;break;case Hm:case qm:case Gm:ae=uj;break;case Vm:ae=Sj;break;case"scroll":case"scrollend":ae=ij;break;case"wheel":ae=kj;break;case"copy":case"cut":case"paste":ae=hj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=Nm;break;case"toggle":case"beforetoggle":ae=Ej}var Xe=(t&4)!==0,Rs=!Xe&&(s==="scroll"||s==="scrollend"),F=Xe?I!==null?I+"Capture":null:I;Xe=[];for(var B=Z,J;B!==null;){var xe=B;if(J=xe.stateNode,xe=xe.tag,xe!==5&&xe!==26&&xe!==27||J===null||F===null||(xe=fi(B,F),xe!=null&&Xe.push(Ki(B,xe,J))),Rs)break;B=B.return}0<Xe.length&&(I=new ae(I,Ae,null,a,oe),ge.push({event:I,listeners:Xe}))}}if((t&7)===0){e:{if(I=s==="mouseover"||s==="pointerover",ae=s==="mouseout"||s==="pointerout",I&&a!==po&&(Ae=a.relatedTarget||a.fromElement)&&(jn(Ae)||Ae[ta]))break e;if((ae||I)&&(I=oe.window===oe?oe:(I=oe.ownerDocument)?I.defaultView||I.parentWindow:window,ae?(Ae=a.relatedTarget||a.toElement,ae=Z,Ae=Ae?jn(Ae):null,Ae!==null&&(Rs=f(Ae),Xe=Ae.tag,Ae!==Rs||Xe!==5&&Xe!==27&&Xe!==6)&&(Ae=null)):(ae=null,Ae=Z),ae!==Ae)){if(Xe=jm,xe="onMouseLeave",F="onMouseEnter",B="mouse",(s==="pointerout"||s==="pointerover")&&(Xe=Nm,xe="onPointerLeave",F="onPointerEnter",B="pointer"),Rs=ae==null?I:xi(ae),J=Ae==null?I:xi(Ae),I=new Xe(xe,B+"leave",ae,a,oe),I.target=Rs,I.relatedTarget=J,xe=null,jn(oe)===Z&&(Xe=new Xe(F,B+"enter",Ae,a,oe),Xe.target=J,Xe.relatedTarget=Rs,xe=Xe),Rs=xe,ae&&Ae)s:{for(Xe=Tv,F=ae,B=Ae,J=0,xe=F;xe;xe=Xe(xe))J++;xe=0;for(var Ge=B;Ge;Ge=Xe(Ge))xe++;for(;0<J-xe;)F=Xe(F),J--;for(;0<xe-J;)B=Xe(B),xe--;for(;J--;){if(F===B||B!==null&&F===B.alternate){Xe=F;break s}F=Xe(F),B=Xe(B)}Xe=null}else Xe=null;ae!==null&&mf(ge,I,ae,Xe,!1),Ae!==null&&Rs!==null&&mf(ge,Rs,Ae,Xe,!0)}}e:{if(I=Z?xi(Z):window,ae=I.nodeName&&I.nodeName.toLowerCase(),ae==="select"||ae==="input"&&I.type==="file")var Ss=Tm;else if(Cm(I))if(Em)Ss=Hj;else{Ss=Uj;var Oe=Lj}else ae=I.nodeName,!ae||ae.toLowerCase()!=="input"||I.type!=="checkbox"&&I.type!=="radio"?Z&&fo(Z.elementType)&&(Ss=Tm):Ss=Bj;if(Ss&&(Ss=Ss(s,Z))){km(ge,Ss,a,oe);break e}Oe&&Oe(s,I,Z),s==="focusout"&&Z&&I.type==="number"&&Z.memoizedProps.value!=null&&xo(I,"number",I.value)}switch(Oe=Z?xi(Z):window,s){case"focusin":(Cm(Oe)||Oe.contentEditable==="true")&&(kn=Oe,Eo=Z,wi=null);break;case"focusout":wi=Eo=kn=null;break;case"mousedown":zo=!0;break;case"contextmenu":case"mouseup":case"dragend":zo=!1,Um(ge,a,oe);break;case"selectionchange":if(Gj)break;case"keydown":case"keyup":Um(ge,a,oe)}var ls;if(So)e:{switch(s){case"compositionstart":var js="onCompositionStart";break e;case"compositionend":js="onCompositionEnd";break e;case"compositionupdate":js="onCompositionUpdate";break e}js=void 0}else Cn?_m(s,a)&&(js="onCompositionEnd"):s==="keydown"&&a.keyCode===229&&(js="onCompositionStart");js&&(bm&&a.locale!=="ko"&&(Cn||js!=="onCompositionStart"?js==="onCompositionEnd"&&Cn&&(ls=pm()):(xl=oe,No="value"in xl?xl.value:xl.textContent,Cn=!0)),Oe=wc(Z,js),0<Oe.length&&(js=new vm(js,s,null,a,oe),ge.push({event:js,listeners:Oe}),ls?js.data=ls:(ls=Sm(a),ls!==null&&(js.data=ls)))),(ls=Aj?Mj(s,a):Dj(s,a))&&(js=wc(Z,"onBeforeInput"),0<js.length&&(Oe=new vm("onBeforeInput","beforeinput",null,a,oe),ge.push({event:Oe,listeners:js}),Oe.data=ls)),_v(ge,s,Z,a,oe)}df(ge,t)})}function Ki(s,t,a){return{instance:s,listener:t,currentTarget:a}}function wc(s,t){for(var a=t+"Capture",l=[];s!==null;){var r=s,o=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||o===null||(r=fi(s,a),r!=null&&l.unshift(Ki(s,r,o)),r=fi(s,t),r!=null&&l.push(Ki(s,r,o))),s.tag===3)return l;s=s.return}return[]}function Tv(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function mf(s,t,a,l,r){for(var o=t._reactName,m=[];a!==null&&a!==l;){var g=a,z=g.alternate,Z=g.stateNode;if(g=g.tag,z!==null&&z===l)break;g!==5&&g!==26&&g!==27||Z===null||(z=Z,r?(Z=fi(a,o),Z!=null&&m.unshift(Ki(a,Z,z))):r||(Z=fi(a,o),Z!=null&&m.push(Ki(a,Z,z)))),a=a.return}m.length!==0&&s.push({event:t,listeners:m})}var Ev=/\r\n?/g,zv=/\u0000|\uFFFD/g;function hf(s){return(typeof s=="string"?s:""+s).replace(Ev,`
`).replace(zv,"")}function xf(s,t){return t=hf(t),hf(s)===t}function Os(s,t,a,l,r,o){switch(a){case"children":typeof l=="string"?t==="body"||t==="textarea"&&l===""||wn(s,l):(typeof l=="number"||typeof l=="bigint")&&t!=="body"&&wn(s,""+l);break;case"className":kr(s,"class",l);break;case"tabIndex":kr(s,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":kr(s,a,l);break;case"style":hm(s,l,o);break;case"data":if(t!=="object"){kr(s,"data",l);break}case"src":case"href":if(l===""&&(t!=="a"||a!=="href")){s.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){s.removeAttribute(a);break}l=Er(""+l),s.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){s.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof o=="function"&&(a==="formAction"?(t!=="input"&&Os(s,t,"name",r.name,r,null),Os(s,t,"formEncType",r.formEncType,r,null),Os(s,t,"formMethod",r.formMethod,r,null),Os(s,t,"formTarget",r.formTarget,r,null)):(Os(s,t,"encType",r.encType,r,null),Os(s,t,"method",r.method,r,null),Os(s,t,"target",r.target,r,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){s.removeAttribute(a);break}l=Er(""+l),s.setAttribute(a,l);break;case"onClick":l!=null&&(s.onclick=Va);break;case"onScroll":l!=null&&fs("scroll",s);break;case"onScrollEnd":l!=null&&fs("scrollend",s);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(d(61));if(a=l.__html,a!=null){if(r.children!=null)throw Error(d(60));s.innerHTML=a}}break;case"multiple":s.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":s.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){s.removeAttribute("xlink:href");break}a=Er(""+l),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?s.setAttribute(a,""+l):s.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?s.setAttribute(a,""):s.removeAttribute(a);break;case"capture":case"download":l===!0?s.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?s.setAttribute(a,l):s.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?s.setAttribute(a,l):s.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?s.removeAttribute(a):s.setAttribute(a,l);break;case"popover":fs("beforetoggle",s),fs("toggle",s),Cr(s,"popover",l);break;case"xlinkActuate":Ga(s,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Ga(s,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Ga(s,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Ga(s,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Ga(s,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Ga(s,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Ga(s,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Ga(s,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Ga(s,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Cr(s,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=lj.get(a)||a,Cr(s,a,l))}}function su(s,t,a,l,r,o){switch(a){case"style":hm(s,l,o);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(d(61));if(a=l.__html,a!=null){if(r.children!=null)throw Error(d(60));s.innerHTML=a}}break;case"children":typeof l=="string"?wn(s,l):(typeof l=="number"||typeof l=="bigint")&&wn(s,""+l);break;case"onScroll":l!=null&&fs("scroll",s);break;case"onScrollEnd":l!=null&&fs("scrollend",s);break;case"onClick":l!=null&&(s.onclick=Va);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!lm.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(r=a.endsWith("Capture"),t=a.slice(2,r?a.length-7:void 0),o=s[Ns]||null,o=o!=null?o[a]:null,typeof o=="function"&&s.removeEventListener(t,o,r),typeof l=="function")){typeof o!="function"&&o!==null&&(a in s?s[a]=null:s.hasAttribute(a)&&s.removeAttribute(a)),s.addEventListener(t,l,r);break e}a in s?s[a]=l:l===!0?s.setAttribute(a,""):Cr(s,a,l)}}}function St(s,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":fs("error",s),fs("load",s);var l=!1,r=!1,o;for(o in a)if(a.hasOwnProperty(o)){var m=a[o];if(m!=null)switch(o){case"src":l=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(d(137,t));default:Os(s,t,o,m,a,null)}}r&&Os(s,t,"srcSet",a.srcSet,a,null),l&&Os(s,t,"src",a.src,a,null);return;case"input":fs("invalid",s);var g=o=m=r=null,z=null,Z=null;for(l in a)if(a.hasOwnProperty(l)){var oe=a[l];if(oe!=null)switch(l){case"name":r=oe;break;case"type":m=oe;break;case"checked":z=oe;break;case"defaultChecked":Z=oe;break;case"value":o=oe;break;case"defaultValue":g=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(d(137,t));break;default:Os(s,t,l,oe,a,null)}}om(s,o,g,z,Z,m,r,!1);return;case"select":fs("invalid",s),l=m=o=null;for(r in a)if(a.hasOwnProperty(r)&&(g=a[r],g!=null))switch(r){case"value":o=g;break;case"defaultValue":m=g;break;case"multiple":l=g;default:Os(s,t,r,g,a,null)}t=o,a=m,s.multiple=!!l,t!=null?yn(s,!!l,t,!1):a!=null&&yn(s,!!l,a,!0);return;case"textarea":fs("invalid",s),o=r=l=null;for(m in a)if(a.hasOwnProperty(m)&&(g=a[m],g!=null))switch(m){case"value":l=g;break;case"defaultValue":r=g;break;case"children":o=g;break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(d(91));break;default:Os(s,t,m,g,a,null)}um(s,l,r,o);return;case"option":for(z in a)if(a.hasOwnProperty(z)&&(l=a[z],l!=null))switch(z){case"selected":s.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Os(s,t,z,l,a,null)}return;case"dialog":fs("beforetoggle",s),fs("toggle",s),fs("cancel",s),fs("close",s);break;case"iframe":case"object":fs("load",s);break;case"video":case"audio":for(l=0;l<Xi.length;l++)fs(Xi[l],s);break;case"image":fs("error",s),fs("load",s);break;case"details":fs("toggle",s);break;case"embed":case"source":case"link":fs("error",s),fs("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Z in a)if(a.hasOwnProperty(Z)&&(l=a[Z],l!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":throw Error(d(137,t));default:Os(s,t,Z,l,a,null)}return;default:if(fo(t)){for(oe in a)a.hasOwnProperty(oe)&&(l=a[oe],l!==void 0&&su(s,t,oe,l,a,void 0));return}}for(g in a)a.hasOwnProperty(g)&&(l=a[g],l!=null&&Os(s,t,g,l,a,null))}function Av(s,t,a,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,o=null,m=null,g=null,z=null,Z=null,oe=null;for(ae in a){var ge=a[ae];if(a.hasOwnProperty(ae)&&ge!=null)switch(ae){case"checked":break;case"value":break;case"defaultValue":z=ge;default:l.hasOwnProperty(ae)||Os(s,t,ae,null,l,ge)}}for(var I in l){var ae=l[I];if(ge=a[I],l.hasOwnProperty(I)&&(ae!=null||ge!=null))switch(I){case"type":o=ae;break;case"name":r=ae;break;case"checked":Z=ae;break;case"defaultChecked":oe=ae;break;case"value":m=ae;break;case"defaultValue":g=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(d(137,t));break;default:ae!==ge&&Os(s,t,I,ae,l,ge)}}ho(s,m,g,z,Z,oe,o,r);return;case"select":ae=m=g=I=null;for(o in a)if(z=a[o],a.hasOwnProperty(o)&&z!=null)switch(o){case"value":break;case"multiple":ae=z;default:l.hasOwnProperty(o)||Os(s,t,o,null,l,z)}for(r in l)if(o=l[r],z=a[r],l.hasOwnProperty(r)&&(o!=null||z!=null))switch(r){case"value":I=o;break;case"defaultValue":g=o;break;case"multiple":m=o;default:o!==z&&Os(s,t,r,o,l,z)}t=g,a=m,l=ae,I!=null?yn(s,!!a,I,!1):!!l!=!!a&&(t!=null?yn(s,!!a,t,!0):yn(s,!!a,a?[]:"",!1));return;case"textarea":ae=I=null;for(g in a)if(r=a[g],a.hasOwnProperty(g)&&r!=null&&!l.hasOwnProperty(g))switch(g){case"value":break;case"children":break;default:Os(s,t,g,null,l,r)}for(m in l)if(r=l[m],o=a[m],l.hasOwnProperty(m)&&(r!=null||o!=null))switch(m){case"value":I=r;break;case"defaultValue":ae=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(d(91));break;default:r!==o&&Os(s,t,m,r,l,o)}dm(s,I,ae);return;case"option":for(var Ae in a)if(I=a[Ae],a.hasOwnProperty(Ae)&&I!=null&&!l.hasOwnProperty(Ae))switch(Ae){case"selected":s.selected=!1;break;default:Os(s,t,Ae,null,l,I)}for(z in l)if(I=l[z],ae=a[z],l.hasOwnProperty(z)&&I!==ae&&(I!=null||ae!=null))switch(z){case"selected":s.selected=I&&typeof I!="function"&&typeof I!="symbol";break;default:Os(s,t,z,I,l,ae)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Xe in a)I=a[Xe],a.hasOwnProperty(Xe)&&I!=null&&!l.hasOwnProperty(Xe)&&Os(s,t,Xe,null,l,I);for(Z in l)if(I=l[Z],ae=a[Z],l.hasOwnProperty(Z)&&I!==ae&&(I!=null||ae!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":if(I!=null)throw Error(d(137,t));break;default:Os(s,t,Z,I,l,ae)}return;default:if(fo(t)){for(var Rs in a)I=a[Rs],a.hasOwnProperty(Rs)&&I!==void 0&&!l.hasOwnProperty(Rs)&&su(s,t,Rs,void 0,l,I);for(oe in l)I=l[oe],ae=a[oe],!l.hasOwnProperty(oe)||I===ae||I===void 0&&ae===void 0||su(s,t,oe,I,l,ae);return}}for(var F in a)I=a[F],a.hasOwnProperty(F)&&I!=null&&!l.hasOwnProperty(F)&&Os(s,t,F,null,l,I);for(ge in l)I=l[ge],ae=a[ge],!l.hasOwnProperty(ge)||I===ae||I==null&&ae==null||Os(s,t,ge,I,l,ae)}function ff(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Mv(){if(typeof performance.getEntriesByType=="function"){for(var s=0,t=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var r=a[l],o=r.transferSize,m=r.initiatorType,g=r.duration;if(o&&g&&ff(m)){for(m=0,g=r.responseEnd,l+=1;l<a.length;l++){var z=a[l],Z=z.startTime;if(Z>g)break;var oe=z.transferSize,ge=z.initiatorType;oe&&ff(ge)&&(z=z.responseEnd,m+=oe*(z<g?1:(g-Z)/(z-Z)))}if(--l,t+=8*(o+m)/(r.duration/1e3),s++,10<s)break}}if(0<s)return t/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var tu=null,au=null;function _c(s){return s.nodeType===9?s:s.ownerDocument}function pf(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function gf(s,t){if(s===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&t==="foreignObject"?0:s}function lu(s,t){return s==="textarea"||s==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var nu=null;function Dv(){var s=window.event;return s&&s.type==="popstate"?s===nu?!1:(nu=s,!0):(nu=null,!1)}var jf=typeof setTimeout=="function"?setTimeout:void 0,Ov=typeof clearTimeout=="function"?clearTimeout:void 0,vf=typeof Promise=="function"?Promise:void 0,Rv=typeof queueMicrotask=="function"?queueMicrotask:typeof vf<"u"?function(s){return vf.resolve(null).then(s).catch(Lv)}:jf;function Lv(s){setTimeout(function(){throw s})}function Al(s){return s==="head"}function Nf(s,t){var a=t,l=0;do{var r=a.nextSibling;if(s.removeChild(a),r&&r.nodeType===8)if(a=r.data,a==="/$"||a==="/&"){if(l===0){s.removeChild(r),ei(t);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Ji(s.ownerDocument.documentElement);else if(a==="head"){a=s.ownerDocument.head,Ji(a);for(var o=a.firstChild;o;){var m=o.nextSibling,g=o.nodeName;o[hi]||g==="SCRIPT"||g==="STYLE"||g==="LINK"&&o.rel.toLowerCase()==="stylesheet"||a.removeChild(o),o=m}}else a==="body"&&Ji(s.ownerDocument.body);a=r}while(a);ei(t)}function bf(s,t){var a=s;s=0;do{var l=a.nextSibling;if(a.nodeType===1?t?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(t?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(s===0)break;s--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||s++;a=l}while(a)}function iu(s){var t=s.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":iu(a),uo(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}s.removeChild(a)}}function Uv(s,t,a,l){for(;s.nodeType===1;){var r=a;if(s.nodeName.toLowerCase()!==t.toLowerCase()){if(!l&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(l){if(!s[hi])switch(t){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(o=s.getAttribute("rel"),o==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(o!==r.rel||s.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||s.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||s.getAttribute("title")!==(r.title==null?null:r.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(o=s.getAttribute("src"),(o!==(r.src==null?null:r.src)||s.getAttribute("type")!==(r.type==null?null:r.type)||s.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&o&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(t==="input"&&s.type==="hidden"){var o=r.name==null?null:""+r.name;if(r.type==="hidden"&&s.getAttribute("name")===o)return s}else return s;if(s=ma(s.nextSibling),s===null)break}return null}function Bv(s,t,a){if(t==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!a||(s=ma(s.nextSibling),s===null))return null;return s}function yf(s,t){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!t||(s=ma(s.nextSibling),s===null))return null;return s}function ru(s){return s.data==="$?"||s.data==="$~"}function cu(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function Hv(s,t){var a=s.ownerDocument;if(s.data==="$~")s._reactRetry=t;else if(s.data!=="$?"||a.readyState!=="loading")t();else{var l=function(){t(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),s._reactRetry=l}}function ma(s){for(;s!=null;s=s.nextSibling){var t=s.nodeType;if(t===1||t===3)break;if(t===8){if(t=s.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return s}var ou=null;function wf(s){s=s.nextSibling;for(var t=0;s;){if(s.nodeType===8){var a=s.data;if(a==="/$"||a==="/&"){if(t===0)return ma(s.nextSibling);t--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||t++}s=s.nextSibling}return null}function _f(s){s=s.previousSibling;for(var t=0;s;){if(s.nodeType===8){var a=s.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(t===0)return s;t--}else a!=="/$"&&a!=="/&"||t++}s=s.previousSibling}return null}function Sf(s,t,a){switch(t=_c(a),s){case"html":if(s=t.documentElement,!s)throw Error(d(452));return s;case"head":if(s=t.head,!s)throw Error(d(453));return s;case"body":if(s=t.body,!s)throw Error(d(454));return s;default:throw Error(d(451))}}function Ji(s){for(var t=s.attributes;t.length;)s.removeAttributeNode(t[0]);uo(s)}var ha=new Map,Cf=new Set;function Sc(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var ll=K.d;K.d={f:qv,r:Gv,D:Vv,C:Fv,L:$v,m:Qv,X:Xv,S:Yv,M:Kv};function qv(){var s=ll.f(),t=pc();return s||t}function Gv(s){var t=vn(s);t!==null&&t.tag===5&&t.type==="form"?Vh(t):ll.r(s)}var In=typeof document>"u"?null:document;function kf(s,t,a){var l=In;if(l&&typeof t=="string"&&t){var r=na(t);r='link[rel="'+s+'"][href="'+r+'"]',typeof a=="string"&&(r+='[crossorigin="'+a+'"]'),Cf.has(r)||(Cf.add(r),s={rel:s,crossOrigin:a,href:t},l.querySelector(r)===null&&(t=l.createElement("link"),St(t,"link",s),vt(t),l.head.appendChild(t)))}}function Vv(s){ll.D(s),kf("dns-prefetch",s,null)}function Fv(s,t){ll.C(s,t),kf("preconnect",s,t)}function $v(s,t,a){ll.L(s,t,a);var l=In;if(l&&s&&t){var r='link[rel="preload"][as="'+na(t)+'"]';t==="image"&&a&&a.imageSrcSet?(r+='[imagesrcset="'+na(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(r+='[imagesizes="'+na(a.imageSizes)+'"]')):r+='[href="'+na(s)+'"]';var o=r;switch(t){case"style":o=Pn(s);break;case"script":o=Wn(s)}ha.has(o)||(s=y({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:s,as:t},a),ha.set(o,s),l.querySelector(r)!==null||t==="style"&&l.querySelector(Zi(o))||t==="script"&&l.querySelector(Ii(o))||(t=l.createElement("link"),St(t,"link",s),vt(t),l.head.appendChild(t)))}}function Qv(s,t){ll.m(s,t);var a=In;if(a&&s){var l=t&&typeof t.as=="string"?t.as:"script",r='link[rel="modulepreload"][as="'+na(l)+'"][href="'+na(s)+'"]',o=r;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":o=Wn(s)}if(!ha.has(o)&&(s=y({rel:"modulepreload",href:s},t),ha.set(o,s),a.querySelector(r)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Ii(o)))return}l=a.createElement("link"),St(l,"link",s),vt(l),a.head.appendChild(l)}}}function Yv(s,t,a){ll.S(s,t,a);var l=In;if(l&&s){var r=Nn(l).hoistableStyles,o=Pn(s);t=t||"default";var m=r.get(o);if(!m){var g={loading:0,preload:null};if(m=l.querySelector(Zi(o)))g.loading=5;else{s=y({rel:"stylesheet",href:s,"data-precedence":t},a),(a=ha.get(o))&&du(s,a);var z=m=l.createElement("link");vt(z),St(z,"link",s),z._p=new Promise(function(Z,oe){z.onload=Z,z.onerror=oe}),z.addEventListener("load",function(){g.loading|=1}),z.addEventListener("error",function(){g.loading|=2}),g.loading|=4,Cc(m,t,l)}m={type:"stylesheet",instance:m,count:1,state:g},r.set(o,m)}}}function Xv(s,t){ll.X(s,t);var a=In;if(a&&s){var l=Nn(a).hoistableScripts,r=Wn(s),o=l.get(r);o||(o=a.querySelector(Ii(r)),o||(s=y({src:s,async:!0},t),(t=ha.get(r))&&uu(s,t),o=a.createElement("script"),vt(o),St(o,"link",s),a.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},l.set(r,o))}}function Kv(s,t){ll.M(s,t);var a=In;if(a&&s){var l=Nn(a).hoistableScripts,r=Wn(s),o=l.get(r);o||(o=a.querySelector(Ii(r)),o||(s=y({src:s,async:!0,type:"module"},t),(t=ha.get(r))&&uu(s,t),o=a.createElement("script"),vt(o),St(o,"link",s),a.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},l.set(r,o))}}function Tf(s,t,a,l){var r=(r=he.current)?Sc(r):null;if(!r)throw Error(d(446));switch(s){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=Pn(a.href),a=Nn(r).hoistableStyles,l=a.get(t),l||(l={type:"style",instance:null,count:0,state:null},a.set(t,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){s=Pn(a.href);var o=Nn(r).hoistableStyles,m=o.get(s);if(m||(r=r.ownerDocument||r,m={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},o.set(s,m),(o=r.querySelector(Zi(s)))&&!o._p&&(m.instance=o,m.state.loading=5),ha.has(s)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},ha.set(s,a),o||Jv(r,s,a,m.state))),t&&l===null)throw Error(d(528,""));return m}if(t&&l!==null)throw Error(d(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Wn(a),a=Nn(r).hoistableScripts,l=a.get(t),l||(l={type:"script",instance:null,count:0,state:null},a.set(t,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(d(444,s))}}function Pn(s){return'href="'+na(s)+'"'}function Zi(s){return'link[rel="stylesheet"]['+s+"]"}function Ef(s){return y({},s,{"data-precedence":s.precedence,precedence:null})}function Jv(s,t,a,l){s.querySelector('link[rel="preload"][as="style"]['+t+"]")?l.loading=1:(t=s.createElement("link"),l.preload=t,t.addEventListener("load",function(){return l.loading|=1}),t.addEventListener("error",function(){return l.loading|=2}),St(t,"link",a),vt(t),s.head.appendChild(t))}function Wn(s){return'[src="'+na(s)+'"]'}function Ii(s){return"script[async]"+s}function zf(s,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var l=s.querySelector('style[data-href~="'+na(a.href)+'"]');if(l)return t.instance=l,vt(l),l;var r=y({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(s.ownerDocument||s).createElement("style"),vt(l),St(l,"style",r),Cc(l,a.precedence,s),t.instance=l;case"stylesheet":r=Pn(a.href);var o=s.querySelector(Zi(r));if(o)return t.state.loading|=4,t.instance=o,vt(o),o;l=Ef(a),(r=ha.get(r))&&du(l,r),o=(s.ownerDocument||s).createElement("link"),vt(o);var m=o;return m._p=new Promise(function(g,z){m.onload=g,m.onerror=z}),St(o,"link",l),t.state.loading|=4,Cc(o,a.precedence,s),t.instance=o;case"script":return o=Wn(a.src),(r=s.querySelector(Ii(o)))?(t.instance=r,vt(r),r):(l=a,(r=ha.get(o))&&(l=y({},a),uu(l,r)),s=s.ownerDocument||s,r=s.createElement("script"),vt(r),St(r,"link",l),s.head.appendChild(r),t.instance=r);case"void":return null;default:throw Error(d(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(l=t.instance,t.state.loading|=4,Cc(l,a.precedence,s));return t.instance}function Cc(s,t,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=l.length?l[l.length-1]:null,o=r,m=0;m<l.length;m++){var g=l[m];if(g.dataset.precedence===t)o=g;else if(o!==r)break}o?o.parentNode.insertBefore(s,o.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(s,t.firstChild))}function du(s,t){s.crossOrigin==null&&(s.crossOrigin=t.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=t.referrerPolicy),s.title==null&&(s.title=t.title)}function uu(s,t){s.crossOrigin==null&&(s.crossOrigin=t.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=t.referrerPolicy),s.integrity==null&&(s.integrity=t.integrity)}var kc=null;function Af(s,t,a){if(kc===null){var l=new Map,r=kc=new Map;r.set(a,l)}else r=kc,l=r.get(a),l||(l=new Map,r.set(a,l));if(l.has(s))return l;for(l.set(s,null),a=a.getElementsByTagName(s),r=0;r<a.length;r++){var o=a[r];if(!(o[hi]||o[Je]||s==="link"&&o.getAttribute("rel")==="stylesheet")&&o.namespaceURI!=="http://www.w3.org/2000/svg"){var m=o.getAttribute(t)||"";m=s+m;var g=l.get(m);g?g.push(o):l.set(m,[o])}}return l}function Mf(s,t,a){s=s.ownerDocument||s,s.head.insertBefore(a,t==="title"?s.querySelector("head > title"):null)}function Zv(s,t,a){if(a===1||t.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return s=t.disabled,typeof t.precedence=="string"&&s==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Df(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function Iv(s,t,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var r=Pn(l.href),o=t.querySelector(Zi(r));if(o){t=o._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(s.count++,s=Tc.bind(s),t.then(s,s)),a.state.loading|=4,a.instance=o,vt(o);return}o=t.ownerDocument||t,l=Ef(l),(r=ha.get(r))&&du(l,r),o=o.createElement("link"),vt(o);var m=o;m._p=new Promise(function(g,z){m.onload=g,m.onerror=z}),St(o,"link",l),a.instance=o}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(a,t),(t=a.state.preload)&&(a.state.loading&3)===0&&(s.count++,a=Tc.bind(s),t.addEventListener("load",a),t.addEventListener("error",a))}}var mu=0;function Pv(s,t){return s.stylesheets&&s.count===0&&zc(s,s.stylesheets),0<s.count||0<s.imgCount?function(a){var l=setTimeout(function(){if(s.stylesheets&&zc(s,s.stylesheets),s.unsuspend){var o=s.unsuspend;s.unsuspend=null,o()}},6e4+t);0<s.imgBytes&&mu===0&&(mu=62500*Mv());var r=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&zc(s,s.stylesheets),s.unsuspend)){var o=s.unsuspend;s.unsuspend=null,o()}},(s.imgBytes>mu?50:800)+t);return s.unsuspend=a,function(){s.unsuspend=null,clearTimeout(l),clearTimeout(r)}}:null}function Tc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)zc(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Ec=null;function zc(s,t){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Ec=new Map,t.forEach(Wv,s),Ec=null,Tc.call(s))}function Wv(s,t){if(!(t.state.loading&4)){var a=Ec.get(s);if(a)var l=a.get(null);else{a=new Map,Ec.set(s,a);for(var r=s.querySelectorAll("link[data-precedence],style[data-precedence]"),o=0;o<r.length;o++){var m=r[o];(m.nodeName==="LINK"||m.getAttribute("media")!=="not all")&&(a.set(m.dataset.precedence,m),l=m)}l&&a.set(null,l)}r=t.instance,m=r.getAttribute("data-precedence"),o=a.get(m)||l,o===l&&a.set(null,r),a.set(m,r),this.count++,l=Tc.bind(this),r.addEventListener("load",l),r.addEventListener("error",l),o?o.parentNode.insertBefore(r,o.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(r,s.firstChild)),t.state.loading|=4}}var Pi={$$typeof:D,Provider:null,Consumer:null,_currentValue:E,_currentValue2:E,_threadCount:0};function eN(s,t,a,l,r,o,m,g,z){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ve(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ve(0),this.hiddenUpdates=Ve(null),this.identifierPrefix=l,this.onUncaughtError=r,this.onCaughtError=o,this.onRecoverableError=m,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=z,this.incompleteTransitions=new Map}function Of(s,t,a,l,r,o,m,g,z,Z,oe,ge){return s=new eN(s,t,a,m,z,Z,oe,ge,g),t=1,o===!0&&(t|=24),o=Jt(3,null,null,t),s.current=o,o.stateNode=s,t=Qo(),t.refCount++,s.pooledCache=t,t.refCount++,o.memoizedState={element:l,isDehydrated:a,cache:t},Jo(o),s}function Rf(s){return s?(s=zn,s):zn}function Lf(s,t,a,l,r,o){r=Rf(r),l.context===null?l.context=r:l.pendingContext=r,l=Nl(t),l.payload={element:a},o=o===void 0?null:o,o!==null&&(l.callback=o),a=bl(s,l,t),a!==null&&(Vt(a,s,t),zi(a,s,t))}function Uf(s,t){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var a=s.retryLane;s.retryLane=a!==0&&a<t?a:t}}function hu(s,t){Uf(s,t),(s=s.alternate)&&Uf(s,t)}function Bf(s){if(s.tag===13||s.tag===31){var t=Xl(s,67108864);t!==null&&Vt(t,s,67108864),hu(s,67108864)}}function Hf(s){if(s.tag===13||s.tag===31){var t=ea();t=pn(t);var a=Xl(s,t);a!==null&&Vt(a,s,t),hu(s,t)}}var Ac=!0;function sN(s,t,a,l){var r=A.T;A.T=null;var o=K.p;try{K.p=2,xu(s,t,a,l)}finally{K.p=o,A.T=r}}function tN(s,t,a,l){var r=A.T;A.T=null;var o=K.p;try{K.p=8,xu(s,t,a,l)}finally{K.p=o,A.T=r}}function xu(s,t,a,l){if(Ac){var r=fu(l);if(r===null)eu(s,t,l,Mc,a),Gf(s,l);else if(lN(r,s,t,a,l))l.stopPropagation();else if(Gf(s,l),t&4&&-1<aN.indexOf(s)){for(;r!==null;){var o=vn(r);if(o!==null)switch(o.tag){case 3:if(o=o.stateNode,o.current.memoizedState.isDehydrated){var m=Yt(o.pendingLanes);if(m!==0){var g=o;for(g.pendingLanes|=2,g.entangledLanes|=2;m;){var z=1<<31-_s(m);g.entanglements[1]|=z,m&=~z}Da(o),(ks&6)===0&&(xc=Pe()+500,Yi(0))}}break;case 31:case 13:g=Xl(o,2),g!==null&&Vt(g,o,2),pc(),hu(o,2)}if(o=fu(l),o===null&&eu(s,t,l,Mc,a),o===r)break;r=o}r!==null&&l.stopPropagation()}else eu(s,t,l,null,a)}}function fu(s){return s=go(s),pu(s)}var Mc=null;function pu(s){if(Mc=null,s=jn(s),s!==null){var t=f(s);if(t===null)s=null;else{var a=t.tag;if(a===13){if(s=x(t),s!==null)return s;s=null}else if(a===31){if(s=j(t),s!==null)return s;s=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;s=null}else t!==s&&(s=null)}}return Mc=s,null}function qf(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(U()){case Re:return 2;case ze:return 8;case Ye:case zs:return 32;case We:return 268435456;default:return 32}default:return 32}}var gu=!1,Ml=null,Dl=null,Ol=null,Wi=new Map,er=new Map,Rl=[],aN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Gf(s,t){switch(s){case"focusin":case"focusout":Ml=null;break;case"dragenter":case"dragleave":Dl=null;break;case"mouseover":case"mouseout":Ol=null;break;case"pointerover":case"pointerout":Wi.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":er.delete(t.pointerId)}}function sr(s,t,a,l,r,o){return s===null||s.nativeEvent!==o?(s={blockedOn:t,domEventName:a,eventSystemFlags:l,nativeEvent:o,targetContainers:[r]},t!==null&&(t=vn(t),t!==null&&Bf(t)),s):(s.eventSystemFlags|=l,t=s.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),s)}function lN(s,t,a,l,r){switch(t){case"focusin":return Ml=sr(Ml,s,t,a,l,r),!0;case"dragenter":return Dl=sr(Dl,s,t,a,l,r),!0;case"mouseover":return Ol=sr(Ol,s,t,a,l,r),!0;case"pointerover":var o=r.pointerId;return Wi.set(o,sr(Wi.get(o)||null,s,t,a,l,r)),!0;case"gotpointercapture":return o=r.pointerId,er.set(o,sr(er.get(o)||null,s,t,a,l,r)),!0}return!1}function Vf(s){var t=jn(s.target);if(t!==null){var a=f(t);if(a!==null){if(t=a.tag,t===13){if(t=x(a),t!==null){s.blockedOn=t,de(s.priority,function(){Hf(a)});return}}else if(t===31){if(t=j(a),t!==null){s.blockedOn=t,de(s.priority,function(){Hf(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){s.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Dc(s){if(s.blockedOn!==null)return!1;for(var t=s.targetContainers;0<t.length;){var a=fu(s.nativeEvent);if(a===null){a=s.nativeEvent;var l=new a.constructor(a.type,a);po=l,a.target.dispatchEvent(l),po=null}else return t=vn(a),t!==null&&Bf(t),s.blockedOn=a,!1;t.shift()}return!0}function Ff(s,t,a){Dc(s)&&a.delete(t)}function nN(){gu=!1,Ml!==null&&Dc(Ml)&&(Ml=null),Dl!==null&&Dc(Dl)&&(Dl=null),Ol!==null&&Dc(Ol)&&(Ol=null),Wi.forEach(Ff),er.forEach(Ff)}function Oc(s,t){s.blockedOn===t&&(s.blockedOn=null,gu||(gu=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,nN)))}var Rc=null;function $f(s){Rc!==s&&(Rc=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Rc===s&&(Rc=null);for(var t=0;t<s.length;t+=3){var a=s[t],l=s[t+1],r=s[t+2];if(typeof l!="function"){if(pu(l||a)===null)continue;break}var o=vn(a);o!==null&&(s.splice(t,3),t-=3,fd(o,{pending:!0,data:r,method:a.method,action:l},l,r))}}))}function ei(s){function t(z){return Oc(z,s)}Ml!==null&&Oc(Ml,s),Dl!==null&&Oc(Dl,s),Ol!==null&&Oc(Ol,s),Wi.forEach(t),er.forEach(t);for(var a=0;a<Rl.length;a++){var l=Rl[a];l.blockedOn===s&&(l.blockedOn=null)}for(;0<Rl.length&&(a=Rl[0],a.blockedOn===null);)Vf(a),a.blockedOn===null&&Rl.shift();if(a=(s.ownerDocument||s).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var r=a[l],o=a[l+1],m=r[Ns]||null;if(typeof o=="function")m||$f(a);else if(m){var g=null;if(o&&o.hasAttribute("formAction")){if(r=o,m=o[Ns]||null)g=m.formAction;else if(pu(r)!==null)continue}else g=m.action;typeof g=="function"?a[l+1]=g:(a.splice(l,3),l-=3),$f(a)}}}function Qf(){function s(o){o.canIntercept&&o.info==="react-transition"&&o.intercept({handler:function(){return new Promise(function(m){return r=m})},focusReset:"manual",scroll:"manual"})}function t(){r!==null&&(r(),r=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var o=navigation.currentEntry;o&&o.url!=null&&navigation.navigate(o.url,{state:o.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,r=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),r!==null&&(r(),r=null)}}}function ju(s){this._internalRoot=s}Lc.prototype.render=ju.prototype.render=function(s){var t=this._internalRoot;if(t===null)throw Error(d(409));var a=t.current,l=ea();Lf(a,l,s,t,null,null)},Lc.prototype.unmount=ju.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var t=s.containerInfo;Lf(s.current,2,null,s,null,null),pc(),t[ta]=null}};function Lc(s){this._internalRoot=s}Lc.prototype.unstable_scheduleHydration=function(s){if(s){var t=V();s={blockedOn:null,target:s,priority:t};for(var a=0;a<Rl.length&&t!==0&&t<Rl[a].priority;a++);Rl.splice(a,0,s),a===0&&Vf(s)}};var Yf=i.version;if(Yf!=="19.2.0")throw Error(d(527,Yf,"19.2.0"));K.findDOMNode=function(s){var t=s._reactInternals;if(t===void 0)throw typeof s.render=="function"?Error(d(188)):(s=Object.keys(s).join(","),Error(d(268,s)));return s=w(t),s=s!==null?v(s):null,s=s===null?null:s.stateNode,s};var iN={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:A,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Uc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Uc.isDisabled&&Uc.supportsFiber)try{ke=Uc.inject(iN),ve=Uc}catch{}}return nr.createRoot=function(s,t){if(!h(s))throw Error(d(299));var a=!1,l="",r=Ph,o=Wh,m=ex;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onUncaughtError!==void 0&&(r=t.onUncaughtError),t.onCaughtError!==void 0&&(o=t.onCaughtError),t.onRecoverableError!==void 0&&(m=t.onRecoverableError)),t=Of(s,1,!1,null,null,a,l,null,r,o,m,Qf),s[ta]=t.current,Wd(s),new ju(t)},nr.hydrateRoot=function(s,t,a){if(!h(s))throw Error(d(299));var l=!1,r="",o=Ph,m=Wh,g=ex,z=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(r=a.identifierPrefix),a.onUncaughtError!==void 0&&(o=a.onUncaughtError),a.onCaughtError!==void 0&&(m=a.onCaughtError),a.onRecoverableError!==void 0&&(g=a.onRecoverableError),a.formState!==void 0&&(z=a.formState)),t=Of(s,1,!0,t,a??null,l,r,z,o,m,g,Qf),t.context=Rf(null),a=t.current,l=ea(),l=pn(l),r=Nl(l),r.callback=null,bl(a,r,l),a=l,t.current.lanes=a,pt(t,a),Da(t),s[ta]=t.current,Wd(s),new Lc(t)},nr.version="19.2.0",nr}var tp;function ky(){if(tp)return _u.exports;tp=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(i){console.error(i)}}return n(),_u.exports=Cy(),_u.exports}var Ty=ky();function X(...n){return jN(vN(n))}const Ze=u.forwardRef(({className:n,...i},c)=>e.jsx("div",{ref:c,className:X("rounded-xl border bg-card text-card-foreground shadow",n),...i}));Ze.displayName="Card";const ys=u.forwardRef(({className:n,...i},c)=>e.jsx("div",{ref:c,className:X("flex flex-col space-y-1.5 p-6",n),...i}));ys.displayName="CardHeader";const ws=u.forwardRef(({className:n,...i},c)=>e.jsx("div",{ref:c,className:X("font-semibold leading-none tracking-tight",n),...i}));ws.displayName="CardTitle";const ct=u.forwardRef(({className:n,...i},c)=>e.jsx("div",{ref:c,className:X("text-sm text-muted-foreground",n),...i}));ct.displayName="CardDescription";const Ts=u.forwardRef(({className:n,...i},c)=>e.jsx("div",{ref:c,className:X("p-6 pt-0",n),...i}));Ts.displayName="CardContent";const vg=u.forwardRef(({className:n,...i},c)=>e.jsx("div",{ref:c,className:X("flex items-center p-6 pt-0",n),...i}));vg.displayName="CardFooter";const Ca=yN,pa=u.forwardRef(({className:n,...i},c)=>e.jsx(wp,{ref:c,className:X("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",n),...i}));pa.displayName=wp.displayName;const ns=u.forwardRef(({className:n,...i},c)=>e.jsx(_p,{ref:c,className:X("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all duration-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",n),...i}));ns.displayName=_p.displayName;const Es=u.forwardRef(({className:n,...i},c)=>e.jsx(Sp,{ref:c,className:X("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 data-[state=active]:animate-in data-[state=active]:fade-in data-[state=active]:duration-300",n),...i}));Es.displayName=Sp.displayName;const ss=u.forwardRef(({className:n,children:i,viewportRef:c,...d},h)=>e.jsxs(Cp,{ref:h,className:X("relative overflow-hidden",n),...d,children:[e.jsx(wN,{ref:c,className:"h-full w-full rounded-[inherit]",children:i}),e.jsx(Bu,{}),e.jsx(Bu,{orientation:"horizontal"}),e.jsx(_N,{})]}));ss.displayName=Cp.displayName;const Bu=u.forwardRef(({className:n,orientation:i="vertical",...c},d)=>e.jsx(kp,{ref:d,orientation:i,className:X("flex touch-none select-none transition-colors",i==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",i==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",n),...c,children:e.jsx(SN,{className:"relative flex-1 rounded-full bg-border"})}));Bu.displayName=kp.displayName;function Ng({className:n,...i}){return e.jsx("div",{className:X("animate-pulse rounded-md bg-primary/10",n),...i})}const wr=u.forwardRef(({className:n,value:i,...c},d)=>e.jsx(Tp,{ref:d,className:X("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",n),...c,children:e.jsx(CN,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(i||0)}%)`}})}));wr.displayName=Tp.displayName;const Ey={light:"",dark:".dark"},bg=u.createContext(null);function yg(){const n=u.useContext(bg);if(!n)throw new Error("useChart must be used within a <ChartContainer />");return n}const si=u.forwardRef(({id:n,className:i,children:c,config:d,...h},f)=>{const x=u.useId(),j=`chart-${n||x.replace(/:/g,"")}`;return e.jsx(bg.Provider,{value:{config:d},children:e.jsxs("div",{"data-chart":j,ref:f,className:X("flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none",i),...h,children:[e.jsx(zy,{id:j,config:d}),e.jsx(qN,{children:c})]})})});si.displayName="Chart";const zy=({id:n,config:i})=>{const c=Object.entries(i).filter(([,d])=>d.theme||d.color);return c.length?e.jsx("style",{dangerouslySetInnerHTML:{__html:Object.entries(Ey).map(([d,h])=>`
${h} [data-chart=${n}] {
${c.map(([f,x])=>{const j=x.theme?.[d]||x.color;return j?`  --color-${f}: ${j};`:null}).join(`
`)}
}
`).join(`
`)}}):null},ir=GN,ti=u.forwardRef(({active:n,payload:i,className:c,indicator:d="dot",hideLabel:h=!1,hideIndicator:f=!1,label:x,labelFormatter:j,labelClassName:p,formatter:w,color:v,nameKey:y,labelKey:S},k)=>{const{config:O}=yg(),Y=u.useMemo(()=>{if(h||!i?.length)return null;const[R]=i,H=`${S||R?.dataKey||R?.name||"value"}`,D=Hu(O,R,H),C=!S&&typeof x=="string"?O[x]?.label||x:D?.label;return j?e.jsx("div",{className:X("font-medium",p),children:j(C,i)}):C?e.jsx("div",{className:X("font-medium",p),children:C}):null},[x,j,i,h,p,O,S]);if(!n||!i?.length)return null;const L=i.length===1&&d!=="dot";return e.jsxs("div",{ref:k,className:X("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",c),children:[L?null:Y,e.jsx("div",{className:"grid gap-1.5",children:i.filter(R=>R.type!=="none").map((R,H)=>{const D=`${y||R.name||R.dataKey||"value"}`,C=Hu(O,R,D),$=v||R.payload.fill||R.color;return e.jsx("div",{className:X("flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground",d==="dot"&&"items-center"),children:w&&R?.value!==void 0&&R.name?w(R.value,R.name,R,H,R.payload):e.jsxs(e.Fragment,{children:[C?.icon?e.jsx(C.icon,{}):!f&&e.jsx("div",{className:X("shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]",{"h-2.5 w-2.5":d==="dot","w-1":d==="line","w-0 border-[1.5px] border-dashed bg-transparent":d==="dashed","my-0.5":L&&d==="dashed"}),style:{"--color-bg":$,"--color-border":$}}),e.jsxs("div",{className:X("flex flex-1 justify-between leading-none",L?"items-end":"items-center"),children:[e.jsxs("div",{className:"grid gap-1.5",children:[L?Y:null,e.jsx("span",{className:"text-muted-foreground",children:C?.label||R.name})]}),R.value&&e.jsx("span",{className:"font-mono font-medium tabular-nums text-foreground",children:R.value.toLocaleString()})]})]})},R.dataKey)})})]})});ti.displayName="ChartTooltip";const Ay=VN,wg=u.forwardRef(({className:n,hideIcon:i=!1,payload:c,verticalAlign:d="bottom",nameKey:h},f)=>{const{config:x}=yg();return c?.length?e.jsx("div",{ref:f,className:X("flex items-center justify-center gap-4",d==="top"?"pb-3":"pt-3",n),children:c.filter(j=>j.type!=="none").map(j=>{const p=`${h||j.dataKey||"value"}`,w=Hu(x,j,p);return e.jsxs("div",{className:X("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground"),children:[w?.icon&&!i?e.jsx(w.icon,{}):e.jsx("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:j.color}}),w?.label]},j.value)})}):null});wg.displayName="ChartLegend";function Hu(n,i,c){if(typeof i!="object"||i===null)return;const d="payload"in i&&typeof i.payload=="object"&&i.payload!==null?i.payload:void 0;let h=c;return c in i&&typeof i[c]=="string"?h=i[c]:d&&c in d&&typeof d[c]=="string"&&(h=d[c]),h in n?n[h]:n[c]}const gr=ci("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),N=u.forwardRef(({className:n,variant:i,size:c,asChild:d=!1,...h},f)=>{const x=d?KN:"button";return e.jsx(x,{className:X(gr({variant:i,size:c,className:n})),ref:f,...h})});N.displayName="Button";const My=ci("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function $e({className:n,variant:i,...c}){return e.jsx("div",{className:X(My({variant:i}),n),...c})}const Dy=5,Oy=5e3;let ku=0;function Ry(){return ku=(ku+1)%Number.MAX_SAFE_INTEGER,ku.toString()}const Tu=new Map,ap=n=>{if(Tu.has(n))return;const i=setTimeout(()=>{Tu.delete(n),hr({type:"REMOVE_TOAST",toastId:n})},Oy);Tu.set(n,i)},Ly=(n,i)=>{switch(i.type){case"ADD_TOAST":return{...n,toasts:[i.toast,...n.toasts].slice(0,Dy)};case"UPDATE_TOAST":return{...n,toasts:n.toasts.map(c=>c.id===i.toast.id?{...c,...i.toast}:c)};case"DISMISS_TOAST":{const{toastId:c}=i;return c?ap(c):n.toasts.forEach(d=>{ap(d.id)}),{...n,toasts:n.toasts.map(d=>d.id===c||c===void 0?{...d,open:!1}:d)}}case"REMOVE_TOAST":return i.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(c=>c.id!==i.toastId)}}},Kc=[];let Jc={toasts:[]};function hr(n){Jc=Ly(Jc,n),Kc.forEach(i=>{i(Jc)})}function Uy({...n}){const i=Ry(),c=h=>hr({type:"UPDATE_TOAST",toast:{...h,id:i}}),d=()=>hr({type:"DISMISS_TOAST",toastId:i});return hr({type:"ADD_TOAST",toast:{...n,id:i,open:!0,onOpenChange:h=>{h||d()}}}),{id:i,dismiss:d,update:c}}function Vs(){const[n,i]=u.useState(Jc);return u.useEffect(()=>(Kc.push(i),()=>{const c=Kc.indexOf(i);c>-1&&Kc.splice(c,1)}),[n]),{...n,toast:Uy,dismiss:c=>hr({type:"DISMISS_TOAST",toastId:c})}}const By=n=>{const i=[];for(let c=0;c<n;c++){const d=c*137.508%360;i.push(`hsl(${d}, 70%, 55%)`)}return i};function Hy(){const[n,i]=u.useState(null),[c,d]=u.useState(!0),[h,f]=u.useState(0),[x,j]=u.useState(24),[p,w]=u.useState(!0),[v,y]=u.useState(null),[S,k]=u.useState(!0),[O,Y]=u.useState(null),[L,R]=u.useState(!1),{toast:H}=Vs(),D=u.useCallback(async()=>{try{k(!0);const E=await Bc.get("https://v1.hitokoto.cn/?c=a&c=b&c=c&c=d&c=h&c=i&c=k");y({hitokoto:E.data.hitokoto,from:E.data.from||E.data.from_who||""})}catch(E){console.error(":",E),y({hitokoto:"",from:""})}finally{k(!1)}},[]),C=u.useCallback(async()=>{try{const E=localStorage.getItem("access-token"),se=await Bc.get("/api/webui/system/status",{headers:{Authorization:`Bearer ${E}`}});Y(se.data)}catch(E){console.error(":",E),Y(null)}},[]),$=async()=>{if(!L)try{R(!0);const E=localStorage.getItem("access-token");await Bc.post("/api/webui/system/restart",{},{headers:{Authorization:`Bearer ${E}`}}),H({title:"",description:"..."}),setTimeout(()=>{C(),R(!1)},3e3)}catch(E){console.error(":",E),H({title:"",description:"",variant:"destructive"}),R(!1)}},G=u.useCallback(async()=>{try{const E=localStorage.getItem("access-token"),se=await Bc.get(`/api/webui/statistics/dashboard?hours=${x}`,{headers:{Authorization:`Bearer ${E}`}});i(se.data),d(!1),f(100)}catch(E){console.error("Failed to fetch dashboard data:",E),d(!1),f(100)}},[x]);if(u.useEffect(()=>{if(!c)return;f(0);const E=setTimeout(()=>f(15),200),se=setTimeout(()=>f(30),800),_=setTimeout(()=>f(45),2e3),me=setTimeout(()=>f(60),4e3),re=setTimeout(()=>f(75),6500),le=setTimeout(()=>f(85),9e3),pe=setTimeout(()=>f(92),11e3);return()=>{clearTimeout(E),clearTimeout(se),clearTimeout(_),clearTimeout(me),clearTimeout(re),clearTimeout(le),clearTimeout(pe)}},[c]),u.useEffect(()=>{G(),D(),C()},[G,D,C]),u.useEffect(()=>{if(!p)return;const E=setInterval(()=>{G(),C()},3e4);return()=>clearInterval(E)},[p,G,C]),c||!n)return e.jsx("div",{className:"flex items-center justify-center h-[calc(100vh-200px)]",children:e.jsxs("div",{className:"text-center space-y-6 w-full max-w-md px-4",children:[e.jsx(Ct,{className:"h-12 w-12 animate-spin mx-auto text-primary"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-lg font-medium",children:"..."}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(wr,{value:h,className:"h-2"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[h,"%"]})]})]})});const{summary:T,model_stats:M=[],hourly_data:ne=[],daily_data:fe=[],recent_activity:_e=[]}=n,Se=T??{total_requests:0,total_cost:0,total_tokens:0,online_time:0,total_messages:0,total_replies:0,avg_response_time:0,cost_per_hour:0,tokens_per_hour:0},je=E=>{const se=Math.floor(E/3600),_=Math.floor(E%3600/60);return`${se}${_}`},ye=E=>new Date(E).toLocaleString("zh-CN",{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),be=By(M.length),A=M.map((E,se)=>({name:E.model_name,value:E.request_count,fill:be[se]})),K={requests:{label:"",color:"hsl(var(--chart-1))"},cost:{label:"()",color:"hsl(var(--chart-2))"},tokens:{label:"Tokens",color:"hsl(var(--chart-3))"}};return e.jsx(ss,{className:"h-full",children:e.jsxs("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:""})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(Ca,{value:x.toString(),onValueChange:E=>j(Number(E)),children:e.jsxs(pa,{className:"grid grid-cols-3 w-full sm:w-auto",children:[e.jsx(ns,{value:"24",children:"24"}),e.jsx(ns,{value:"168",children:"7"}),e.jsx(ns,{value:"720",children:"30"})]})}),e.jsxs(N,{variant:p?"default":"outline",size:"sm",onClick:()=>w(!p),className:"gap-2",children:[e.jsx(Ct,{className:`h-4 w-4 ${p?"animate-spin":""}`}),e.jsx("span",{className:"hidden sm:inline",children:""})]}),e.jsx(N,{variant:"outline",size:"sm",onClick:G,children:e.jsx(Ct,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"flex items-center gap-3 px-4 py-2 rounded-lg border border-dashed border-muted-foreground/30 bg-muted/20",children:[S?e.jsx(Ng,{className:"h-5 flex-1"}):v?e.jsxs("p",{className:"flex-1 text-sm text-muted-foreground italic truncate",children:['"',v.hitokoto,'"  ',v.from]}):null,e.jsx(N,{variant:"ghost",size:"icon",className:"h-7 w-7 shrink-0",onClick:D,disabled:S,children:e.jsx(Ct,{className:`h-3.5 w-3.5 ${S?"animate-spin":""}`})})]}),e.jsxs("div",{className:"grid gap-4 grid-cols-1 lg:grid-cols-3",children:[e.jsxs(Ze,{className:"lg:col-span-1",children:[e.jsx(ys,{className:"pb-3",children:e.jsxs(ws,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(br,{className:"h-4 w-4"}),""]})}),e.jsx(Ts,{children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex items-center gap-2",children:O?.running?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-3 w-3 rounded-full bg-green-500 animate-pulse"}),e.jsxs($e,{variant:"outline",className:"text-green-600 border-green-300 bg-green-50",children:[e.jsx(fa,{className:"h-3 w-3 mr-1"}),""]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-3 w-3 rounded-full bg-red-500"}),e.jsxs($e,{variant:"outline",className:"text-red-600 border-red-300 bg-red-50",children:[e.jsx(Sa,{className:"h-3 w-3 mr-1"}),""]})]})}),O&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.jsxs("span",{children:["v",O.version]}),e.jsx("span",{className:"mx-2",children:"|"}),e.jsxs("span",{children:[" ",je(O.uptime)]})]})]})})]}),e.jsxs(Ze,{className:"lg:col-span-2",children:[e.jsx(ys,{className:"pb-3",children:e.jsxs(ws,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(cn,{className:"h-4 w-4"}),""]})}),e.jsx(Ts,{children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(N,{variant:"outline",size:"sm",onClick:$,disabled:L,className:"gap-2",children:[e.jsx(Zc,{className:`h-4 w-4 ${L?"animate-spin":""}`}),L?"...":""]}),e.jsx(N,{variant:"outline",size:"sm",asChild:!0,className:"gap-2",children:e.jsxs(Yc,{to:"/logs",children:[e.jsx(Ra,{className:"h-4 w-4"}),""]})}),e.jsx(N,{variant:"outline",size:"sm",asChild:!0,className:"gap-2",children:e.jsxs(Yc,{to:"/plugins",children:[e.jsx(mb,{className:"h-4 w-4"}),""]})}),e.jsx(N,{variant:"outline",size:"sm",asChild:!0,className:"gap-2",children:e.jsxs(Yc,{to:"/settings",children:[e.jsx(oi,{className:"h-4 w-4"}),""]})})]})})]})]}),e.jsxs("div",{className:"grid gap-4 grid-cols-1 xs:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(Ze,{children:[e.jsxs(ys,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ws,{className:"text-sm font-medium",children:""}),e.jsx(hb,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(Ts,{children:[e.jsx("div",{className:"text-2xl font-bold",children:Se.total_requests.toLocaleString()}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["",x<48?x+"":Math.floor(x/24)+""]})]})]}),e.jsxs(Ze,{children:[e.jsxs(ys,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ws,{className:"text-sm font-medium",children:""}),e.jsx(xb,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(Ts,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["",Se.total_cost.toFixed(2)]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:Se.cost_per_hour>0?`${Se.cost_per_hour.toFixed(2)}/`:""})]})]}),e.jsxs(Ze,{children:[e.jsxs(ys,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ws,{className:"text-sm font-medium",children:"Token"}),e.jsx(Ic,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(Ts,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[(Se.total_tokens/1e3).toFixed(1),"K"]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:Se.tokens_per_hour>0?`${(Se.tokens_per_hour/1e3).toFixed(1)}K/`:""})]})]}),e.jsxs(Ze,{children:[e.jsxs(ys,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ws,{className:"text-sm font-medium",children:""}),e.jsx(cn,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(Ts,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[Se.avg_response_time.toFixed(2),"s"]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"API"})]})]})]}),e.jsxs("div",{className:"grid gap-4 grid-cols-1 sm:grid-cols-3",children:[e.jsxs(Ze,{children:[e.jsxs(ys,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ws,{className:"text-sm font-medium",children:""}),e.jsx(li,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(Ts,{children:e.jsx("div",{className:"text-xl font-bold",children:je(Se.online_time)})})]}),e.jsxs(Ze,{children:[e.jsxs(ys,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ws,{className:"text-sm font-medium",children:""}),e.jsx(un,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(Ts,{children:[e.jsx("div",{className:"text-xl font-bold",children:Se.total_messages.toLocaleString()}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[" ",Se.total_replies.toLocaleString()," "]})]})]}),e.jsxs(Ze,{children:[e.jsxs(ys,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ws,{className:"text-sm font-medium",children:""}),e.jsx(fb,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(Ts,{children:[e.jsx("div",{className:"text-xl font-bold",children:Se.total_messages>0?`${(Se.total_cost/Se.total_messages*100).toFixed(2)}`:"0.00"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"100"})]})]})]}),e.jsxs(Ca,{defaultValue:"trends",className:"space-y-4",children:[e.jsxs(pa,{className:"grid w-full grid-cols-2 sm:grid-cols-4",children:[e.jsx(ns,{value:"trends",children:""}),e.jsx(ns,{value:"models",children:""}),e.jsx(ns,{value:"activity",children:""}),e.jsx(ns,{value:"daily",children:""})]}),e.jsxs(Es,{value:"trends",className:"space-y-4",children:[e.jsxs(Ze,{children:[e.jsxs(ys,{children:[e.jsx(ws,{children:""}),e.jsxs(ct,{children:["",x,""]})]}),e.jsx(Ts,{children:e.jsx(si,{config:K,className:"h-[300px] sm:h-[400px] w-full aspect-auto",children:e.jsxs(FN,{data:ne,children:[e.jsx(Hc,{strokeDasharray:"3 3",stroke:"hsl(var(--muted-foreground) / 0.2)"}),e.jsx(qc,{dataKey:"timestamp",tickFormatter:E=>ye(E),angle:-45,textAnchor:"end",height:60,stroke:"hsl(var(--muted-foreground))",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(lr,{stroke:"hsl(var(--muted-foreground))",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(ir,{content:e.jsx(ti,{labelFormatter:E=>ye(E)})}),e.jsx($N,{type:"monotone",dataKey:"requests",stroke:"var(--color-requests)",strokeWidth:2})]})})})]}),e.jsxs("div",{className:"grid gap-4 grid-cols-1 lg:grid-cols-2",children:[e.jsxs(Ze,{children:[e.jsxs(ys,{children:[e.jsx(ws,{children:""}),e.jsx(ct,{children:"API"})]}),e.jsx(Ts,{children:e.jsx(si,{config:K,className:"h-[250px] sm:h-[300px] w-full aspect-auto",children:e.jsxs(bu,{data:ne,children:[e.jsx(Hc,{strokeDasharray:"3 3",stroke:"hsl(var(--muted-foreground) / 0.2)"}),e.jsx(qc,{dataKey:"timestamp",tickFormatter:E=>ye(E),angle:-45,textAnchor:"end",height:60,stroke:"hsl(var(--muted-foreground))",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(lr,{stroke:"hsl(var(--muted-foreground))",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(ir,{content:e.jsx(ti,{labelFormatter:E=>ye(E)})}),e.jsx(Gc,{dataKey:"cost",fill:"var(--color-cost)"})]})})})]}),e.jsxs(Ze,{children:[e.jsxs(ys,{children:[e.jsx(ws,{children:"Token"}),e.jsx(ct,{children:"Token"})]}),e.jsx(Ts,{children:e.jsx(si,{config:K,className:"h-[250px] sm:h-[300px] w-full aspect-auto",children:e.jsxs(bu,{data:ne,children:[e.jsx(Hc,{strokeDasharray:"3 3",stroke:"hsl(var(--muted-foreground) / 0.2)"}),e.jsx(qc,{dataKey:"timestamp",tickFormatter:E=>ye(E),angle:-45,textAnchor:"end",height:60,stroke:"hsl(var(--muted-foreground))",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(lr,{stroke:"hsl(var(--muted-foreground))",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(ir,{content:e.jsx(ti,{labelFormatter:E=>ye(E)})}),e.jsx(Gc,{dataKey:"tokens",fill:"var(--color-tokens)"})]})})})]})]})]}),e.jsx(Es,{value:"models",className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4 grid-cols-1 lg:grid-cols-2",children:[e.jsxs(Ze,{children:[e.jsxs(ys,{children:[e.jsx(ws,{children:""}),e.jsxs(ct,{children:[" ( ",M.length," )"]})]}),e.jsx(Ts,{children:e.jsx(si,{config:Object.fromEntries(M.map((E,se)=>[E.model_name,{label:E.model_name,color:be[se]}])),className:"h-[300px] sm:h-[400px] w-full aspect-auto",children:e.jsxs(QN,{children:[e.jsx(ir,{content:e.jsx(ti,{})}),e.jsx(YN,{data:A,cx:"50%",cy:"50%",labelLine:!1,label:({name:E,percent:se})=>se&&se<.05?"":`${E} ${se?(se*100).toFixed(0):0}%`,outerRadius:100,dataKey:"value",children:A.map((E,se)=>e.jsx(XN,{fill:E.fill},`cell-${se}`))})]})})})]}),e.jsxs(Ze,{children:[e.jsxs(ys,{children:[e.jsx(ws,{children:""}),e.jsx(ct,{children:""})]}),e.jsx(Ts,{children:e.jsx(ss,{className:"h-[300px] sm:h-[400px]",children:e.jsx("div",{className:"space-y-3",children:M.map((E,se)=>e.jsxs("div",{className:"p-4 rounded-lg border bg-card hover:bg-accent/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-semibold text-sm truncate flex-1 min-w-0",children:E.model_name}),e.jsx("div",{className:"w-3 h-3 rounded-full ml-2 flex-shrink-0",style:{backgroundColor:`hsl(var(--chart-${se%5+1}))`}})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:":"}),e.jsx("span",{className:"ml-1 font-medium",children:E.request_count.toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:":"}),e.jsxs("span",{className:"ml-1 font-medium",children:["",E.total_cost.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Tokens:"}),e.jsxs("span",{className:"ml-1 font-medium",children:[(E.total_tokens/1e3).toFixed(1),"K"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:":"}),e.jsxs("span",{className:"ml-1 font-medium",children:[E.avg_response_time.toFixed(2),"s"]})]})]})]},se))})})})]})]})}),e.jsx(Es,{value:"activity",children:e.jsxs(Ze,{children:[e.jsxs(ys,{children:[e.jsx(ws,{children:""}),e.jsx(ct,{children:"API"})]}),e.jsx(Ts,{children:e.jsx(ss,{className:"h-[400px] sm:h-[500px]",children:e.jsx("div",{className:"space-y-2",children:_e.map((E,se)=>e.jsxs("div",{className:"p-3 sm:p-4 rounded-lg border bg-card hover:bg-accent/50 transition-colors",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-2 mb-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-sm truncate",children:E.model}),e.jsx("div",{className:"text-xs text-muted-foreground",children:E.request_type})]}),e.jsx("div",{className:"text-xs text-muted-foreground flex-shrink-0",children:ye(E.timestamp)})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Tokens:"}),e.jsx("span",{className:"ml-1",children:E.tokens})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:":"}),e.jsxs("span",{className:"ml-1",children:["",E.cost.toFixed(4)]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:":"}),e.jsxs("span",{className:"ml-1",children:[E.time_cost.toFixed(2),"s"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:":"}),e.jsx("span",{className:`ml-1 ${E.status==="success"?"text-green-600":"text-red-600"}`,children:E.status})]})]})]},se))})})})]})}),e.jsx(Es,{value:"daily",children:e.jsxs(Ze,{children:[e.jsxs(ys,{children:[e.jsx(ws,{children:""}),e.jsx(ct,{children:"7"})]}),e.jsx(Ts,{children:e.jsx(si,{config:{requests:{label:"",color:"hsl(var(--chart-1))"},cost:{label:"()",color:"hsl(var(--chart-2))"}},className:"h-[400px] sm:h-[500px] w-full aspect-auto",children:e.jsxs(bu,{data:fe,children:[e.jsx(Hc,{strokeDasharray:"3 3",stroke:"hsl(var(--muted-foreground) / 0.2)"}),e.jsx(qc,{dataKey:"timestamp",tickFormatter:E=>{const se=new Date(E);return`${se.getMonth()+1}/${se.getDate()}`},stroke:"hsl(var(--muted-foreground))",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(lr,{yAxisId:"left",stroke:"hsl(var(--muted-foreground))",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(lr,{yAxisId:"right",orientation:"right",stroke:"hsl(var(--muted-foreground))",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(ir,{content:e.jsx(ti,{labelFormatter:E=>new Date(E).toLocaleDateString("zh-CN")})}),e.jsx(Ay,{content:e.jsx(wg,{})}),e.jsx(Gc,{yAxisId:"left",dataKey:"requests",fill:"var(--color-requests)"}),e.jsx(Gc,{yAxisId:"right",dataKey:"cost",fill:"var(--color-cost)"})]})})})]})})]})]})})}const qy={theme:"system",setTheme:()=>null},_g=u.createContext(qy),Xu=()=>{const n=u.useContext(_g);if(n===void 0)throw new Error("useTheme must be used within a ThemeProvider");return n},Gy=(n,i,c)=>{const d=document.documentElement.classList.contains("no-animations");if(!document.startViewTransition||d){i(n);return}const h=c.clientX,f=c.clientY,x=Math.hypot(Math.max(h,innerWidth-h),Math.max(f,innerHeight-f));document.startViewTransition(()=>{i(n)}).ready.then(()=>{document.documentElement.animate({clipPath:[`circle(0px at ${h}px ${f}px)`,`circle(${x}px at ${h}px ${f}px)`]},{duration:500,easing:"ease-in-out",pseudoElement:"::view-transition-new(root)"})})},Sg=u.createContext(void 0),Cg=()=>{const n=u.useContext(Sg);if(n===void 0)throw new Error("useAnimation must be used within an AnimationProvider");return n},Qe=u.forwardRef(({className:n,...i},c)=>e.jsx(Ep,{className:X("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",n),...i,ref:c,children:e.jsx(kN,{className:X("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));Qe.displayName=Ep.displayName;const Vy=ci("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),b=u.forwardRef(({className:n,...i},c)=>e.jsx(Vp,{ref:c,className:X(Vy(),n),...i}));b.displayName=Vp.displayName;const ie=u.forwardRef(({className:n,type:i,...c},d)=>e.jsx("input",{type:i,className:X("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:d,...c}));ie.displayName="Input";const Fy=[{id:"minLength",label:" 10 ",description:"Token  10 ",validate:n=>n.length>=10},{id:"hasUppercase",label:"",description:" (A-Z)",validate:n=>/[A-Z]/.test(n)},{id:"hasLowercase",label:"",description:" (a-z)",validate:n=>/[a-z]/.test(n)},{id:"hasSpecialChar",label:"",description:" (!@#$%^&*()_+-=[]{}|;:,.<>?/)",validate:n=>/[!@#$%^&*()_+\-=[\]{}|;:,.<>?/]/.test(n)}];function $y(n){const i=Fy.map(d=>({id:d.id,label:d.label,description:d.description,passed:d.validate(n)}));return{isValid:i.every(d=>d.passed),rules:i}}const Ku="0.11.7 Beta",Ju="MaiBot Dashboard",Qy=`${Ju} v${Ku}`,Yy=(n="v")=>`${n}${Ku}`,Ft={THEME:"maibot-ui-theme",ACCENT_COLOR:"accent-color",ENABLE_ANIMATIONS:"maibot-animations",ENABLE_WAVES_BACKGROUND:"maibot-waves-background",LOG_CACHE_SIZE:"maibot-log-cache-size",LOG_AUTO_SCROLL:"maibot-log-auto-scroll",LOG_FONT_SIZE:"maibot-log-font-size",LOG_LINE_SPACING:"maibot-log-line-spacing",DATA_SYNC_INTERVAL:"maibot-data-sync-interval",WS_RECONNECT_INTERVAL:"maibot-ws-reconnect-interval",WS_MAX_RECONNECT_ATTEMPTS:"maibot-ws-max-reconnect-attempts",COMPLETED_TOURS:"maibot-completed-tours"},Oa={theme:"system",accentColor:"blue",enableAnimations:!0,enableWavesBackground:!0,logCacheSize:1e3,logAutoScroll:!0,logFontSize:"xs",logLineSpacing:4,dataSyncInterval:30,wsReconnectInterval:3e3,wsMaxReconnectAttempts:10};function st(n){const i=kg(n),c=localStorage.getItem(i);if(c===null)return Oa[n];const d=Oa[n];if(typeof d=="boolean")return c==="true";if(typeof d=="number"){const h=parseFloat(c);return isNaN(h)?d:h}return c}function ai(n,i){const c=kg(n);localStorage.setItem(c,String(i)),window.dispatchEvent(new CustomEvent("maibot-settings-change",{detail:{key:n,value:i}}))}function Xy(){return{theme:st("theme"),accentColor:st("accentColor"),enableAnimations:st("enableAnimations"),enableWavesBackground:st("enableWavesBackground"),logCacheSize:st("logCacheSize"),logAutoScroll:st("logAutoScroll"),logFontSize:st("logFontSize"),logLineSpacing:st("logLineSpacing"),dataSyncInterval:st("dataSyncInterval"),wsReconnectInterval:st("wsReconnectInterval"),wsMaxReconnectAttempts:st("wsMaxReconnectAttempts")}}function Ky(){const n=Xy(),i=localStorage.getItem(Ft.COMPLETED_TOURS),c=i?JSON.parse(i):[];return{...n,completedTours:c}}function Jy(n){const i=[],c=[];for(const[d,h]of Object.entries(n)){if(d==="completedTours"){Array.isArray(h)?(localStorage.setItem(Ft.COMPLETED_TOURS,JSON.stringify(h)),i.push("completedTours")):c.push("completedTours");continue}if(d in Oa){const f=d,x=Oa[f];if(typeof h==typeof x){if(f==="theme"&&!["light","dark","system"].includes(h)){c.push(d);continue}if(f==="logFontSize"&&!["xs","sm","base"].includes(h)){c.push(d);continue}ai(f,h),i.push(d)}else c.push(d)}else c.push(d)}return{success:i.length>0,imported:i,skipped:c}}function Zy(){for(const n of Object.keys(Oa))ai(n,Oa[n]);localStorage.removeItem(Ft.COMPLETED_TOURS),window.dispatchEvent(new CustomEvent("maibot-settings-reset"))}function Iy(){const n=[],i=[],c=[];for(let d=0;d<localStorage.length;d++){const h=localStorage.key(d);h&&(h.startsWith("maibot")||h.startsWith("accent-color")||h==="access-token")&&c.push(h)}for(const d of c)localStorage.removeItem(d),n.push(d);return{clearedKeys:n,preservedKeys:i}}function lp(){let n=0;const i=[];for(let c=0;c<localStorage.length;c++){const d=localStorage.key(c);if(d){const h=localStorage.getItem(d)||"",f=(d.length+h.length)*2;n+=f,i.push({key:d,size:f})}}return i.sort((c,d)=>d.size-c.size),{used:n,items:localStorage.length,details:i}}function Py(n){if(n===0)return"0 B";const i=1024,c=["B","KB","MB"],d=Math.floor(Math.log(n)/Math.log(i));return parseFloat((n/Math.pow(i,d)).toFixed(2))+" "+c[d]}function kg(n){return{theme:Ft.THEME,accentColor:Ft.ACCENT_COLOR,enableAnimations:Ft.ENABLE_ANIMATIONS,enableWavesBackground:Ft.ENABLE_WAVES_BACKGROUND,logCacheSize:Ft.LOG_CACHE_SIZE,logAutoScroll:Ft.LOG_AUTO_SCROLL,logFontSize:Ft.LOG_FONT_SIZE,logLineSpacing:Ft.LOG_LINE_SPACING,dataSyncInterval:Ft.DATA_SYNC_INTERVAL,wsReconnectInterval:Ft.WS_RECONNECT_INTERVAL,wsMaxReconnectAttempts:Ft.WS_MAX_RECONNECT_ATTEMPTS}[n]}const wa=u.forwardRef(({className:n,...i},c)=>e.jsxs(zp,{ref:c,className:X("relative flex w-full touch-none select-none items-center",n),...i,children:[e.jsx(TN,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:e.jsx(EN,{className:"absolute h-full bg-primary"})}),e.jsx(zN,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}));wa.displayName=zp.displayName;class Wy{ws=null;reconnectTimeout=null;reconnectAttempts=0;heartbeatInterval=null;logCallbacks=new Set;connectionCallbacks=new Set;isConnected=!1;logCache=[];getMaxCacheSize(){return st("logCacheSize")}getMaxReconnectAttempts(){return st("wsMaxReconnectAttempts")}getReconnectInterval(){return st("wsReconnectInterval")}getWebSocketUrl(){{const i=window.location.protocol==="https:"?"wss:":"ws:",c=window.location.host;return`${i}//${c}/ws/logs`}}connect(){if(this.ws?.readyState===WebSocket.OPEN||this.ws?.readyState===WebSocket.CONNECTING)return;const i=this.getWebSocketUrl();try{this.ws=new WebSocket(i),this.ws.onopen=()=>{this.isConnected=!0,this.reconnectAttempts=0,this.notifyConnection(!0),this.startHeartbeat()},this.ws.onmessage=c=>{try{if(c.data==="pong")return;const d=JSON.parse(c.data);this.notifyLog(d)}catch(d){console.error(":",d)}},this.ws.onerror=c=>{console.error(" WebSocket :",c),this.isConnected=!1,this.notifyConnection(!1)},this.ws.onclose=()=>{this.isConnected=!1,this.notifyConnection(!1),this.stopHeartbeat(),this.attemptReconnect()}}catch(c){console.error(" WebSocket :",c),this.attemptReconnect()}}attemptReconnect(){const i=this.getMaxReconnectAttempts();if(this.reconnectAttempts>=i)return;this.reconnectAttempts+=1;const c=this.getReconnectInterval(),d=Math.min(c*this.reconnectAttempts,3e4);this.reconnectTimeout=window.setTimeout(()=>{this.connect()},d)}startHeartbeat(){this.heartbeatInterval=window.setInterval(()=>{this.ws?.readyState===WebSocket.OPEN&&this.ws.send("ping")},3e4)}stopHeartbeat(){this.heartbeatInterval!==null&&(clearInterval(this.heartbeatInterval),this.heartbeatInterval=null)}disconnect(){this.reconnectTimeout!==null&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),this.stopHeartbeat(),this.ws&&(this.ws.close(),this.ws=null),this.isConnected=!1,this.reconnectAttempts=0}onLog(i){return this.logCallbacks.add(i),()=>this.logCallbacks.delete(i)}onConnectionChange(i){return this.connectionCallbacks.add(i),i(this.isConnected),()=>this.connectionCallbacks.delete(i)}notifyLog(i){if(!this.logCache.some(d=>d.id===i.id)){this.logCache.push(i);const d=this.getMaxCacheSize();this.logCache.length>d&&(this.logCache=this.logCache.slice(-d)),this.logCallbacks.forEach(h=>{try{h(i)}catch(f){console.error(":",f)}})}}notifyConnection(i){this.connectionCallbacks.forEach(c=>{try{c(i)}catch(d){console.error(":",d)}})}getAllLogs(){return[...this.logCache]}clearLogs(){this.logCache=[]}getConnectionStatus(){return this.isConnected}}const rn=new Wy;typeof window<"u"&&rn.connect();const $s=IN,Zu=PN,e0=JN,Tg=u.forwardRef(({className:n,...i},c)=>e.jsx(Fp,{ref:c,className:X("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...i}));Tg.displayName=Fp.displayName;const Hs=u.forwardRef(({className:n,children:i,preventOutsideClose:c=!1,...d},h)=>e.jsxs(e0,{children:[e.jsx(Tg,{}),e.jsxs($p,{ref:h,className:X("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),onPointerDownOutside:c?f=>f.preventDefault():void 0,onInteractOutside:c?f=>f.preventDefault():void 0,...d,children:[i,e.jsxs(ZN,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(dl,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Hs.displayName=$p.displayName;const qs=({className:n,...i})=>e.jsx("div",{className:X("flex flex-col space-y-1.5 text-center sm:text-left",n),...i});qs.displayName="DialogHeader";const at=({className:n,...i})=>e.jsx("div",{className:X("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",n),...i});at.displayName="DialogFooter";const Gs=u.forwardRef(({className:n,...i},c)=>e.jsx(Qp,{ref:c,className:X("text-lg font-semibold leading-none tracking-tight",n),...i}));Gs.displayName=Qp.displayName;const Is=u.forwardRef(({className:n,...i},c)=>e.jsx(Yp,{ref:c,className:X("text-sm text-muted-foreground",n),...i}));Is.displayName=Yp.displayName;const ps=MN,tt=DN,s0=AN,Eg=u.forwardRef(({className:n,...i},c)=>e.jsx(Ap,{className:X("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...i,ref:c}));Eg.displayName=Ap.displayName;const rs=u.forwardRef(({className:n,...i},c)=>e.jsxs(s0,{children:[e.jsx(Eg,{}),e.jsx(Mp,{ref:c,className:X("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...i})]}));rs.displayName=Mp.displayName;const cs=({className:n,...i})=>e.jsx("div",{className:X("flex flex-col space-y-2 text-center sm:text-left",n),...i});cs.displayName="AlertDialogHeader";const os=({className:n,...i})=>e.jsx("div",{className:X("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",n),...i});os.displayName="AlertDialogFooter";const ds=u.forwardRef(({className:n,...i},c)=>e.jsx(Dp,{ref:c,className:X("text-lg font-semibold",n),...i}));ds.displayName=Dp.displayName;const us=u.forwardRef(({className:n,...i},c)=>e.jsx(Op,{ref:c,className:X("text-sm text-muted-foreground",n),...i}));us.displayName=Op.displayName;const ms=u.forwardRef(({className:n,...i},c)=>e.jsx(Rp,{ref:c,className:X(gr(),n),...i}));ms.displayName=Rp.displayName;const hs=u.forwardRef(({className:n,...i},c)=>e.jsx(Lp,{ref:c,className:X(gr({variant:"outline"}),"mt-2 sm:mt-0",n),...i}));hs.displayName=Lp.displayName;function t0(){return e.jsxs("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:""}),e.jsx("p",{className:"text-muted-foreground mt-1 sm:mt-2 text-sm sm:text-base",children:""})]})}),e.jsxs(Ca,{defaultValue:"appearance",className:"w-full",children:[e.jsxs(pa,{className:"grid w-full grid-cols-2 sm:grid-cols-4 gap-0.5 sm:gap-1 h-auto p-1",children:[e.jsxs(ns,{value:"appearance",className:"gap-1 sm:gap-2 text-xs sm:text-sm px-2 sm:px-3 py-2",children:[e.jsx(pb,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4",strokeWidth:2,fill:"none"}),e.jsx("span",{children:""})]}),e.jsxs(ns,{value:"security",className:"gap-1 sm:gap-2 text-xs sm:text-sm px-2 sm:px-3 py-2",children:[e.jsx(gb,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4",strokeWidth:2,fill:"none"}),e.jsx("span",{children:""})]}),e.jsxs(ns,{value:"other",className:"gap-1 sm:gap-2 text-xs sm:text-sm px-2 sm:px-3 py-2",children:[e.jsx(oi,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4",strokeWidth:2,fill:"none"}),e.jsx("span",{children:""})]}),e.jsxs(ns,{value:"about",className:"gap-1 sm:gap-2 text-xs sm:text-sm px-2 sm:px-3 py-2",children:[e.jsx(La,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4",strokeWidth:2,fill:"none"}),e.jsx("span",{children:""})]})]}),e.jsxs(ss,{className:"h-[calc(100vh-240px)] sm:h-[calc(100vh-280px)] mt-4 sm:mt-6",children:[e.jsx(Es,{value:"appearance",className:"mt-0",children:e.jsx(a0,{})}),e.jsx(Es,{value:"security",className:"mt-0",children:e.jsx(l0,{})}),e.jsx(Es,{value:"other",className:"mt-0",children:e.jsx(n0,{})}),e.jsx(Es,{value:"about",className:"mt-0",children:e.jsx(i0,{})})]})]})]})}function np(n){const i=document.documentElement,d={blue:{hsl:"221.2 83.2% 53.3%",darkHsl:"217.2 91.2% 59.8%",gradient:null},purple:{hsl:"271 91% 65%",darkHsl:"270 95% 75%",gradient:null},green:{hsl:"142 71% 45%",darkHsl:"142 76% 36%",gradient:null},orange:{hsl:"25 95% 53%",darkHsl:"20 90% 48%",gradient:null},pink:{hsl:"330 81% 60%",darkHsl:"330 85% 70%",gradient:null},red:{hsl:"0 84% 60%",darkHsl:"0 90% 70%",gradient:null},"gradient-sunset":{hsl:"15 95% 60%",darkHsl:"15 95% 65%",gradient:"linear-gradient(135deg, hsl(25 95% 53%) 0%, hsl(330 81% 60%) 100%)"},"gradient-ocean":{hsl:"200 90% 55%",darkHsl:"200 90% 60%",gradient:"linear-gradient(135deg, hsl(221.2 83.2% 53.3%) 0%, hsl(189 94% 43%) 100%)"},"gradient-forest":{hsl:"150 70% 45%",darkHsl:"150 75% 40%",gradient:"linear-gradient(135deg, hsl(142 71% 45%) 0%, hsl(158 64% 52%) 100%)"},"gradient-aurora":{hsl:"310 85% 65%",darkHsl:"310 90% 70%",gradient:"linear-gradient(135deg, hsl(271 91% 65%) 0%, hsl(330 81% 60%) 100%)"},"gradient-fire":{hsl:"15 95% 55%",darkHsl:"15 95% 60%",gradient:"linear-gradient(135deg, hsl(0 84% 60%) 0%, hsl(25 95% 53%) 100%)"},"gradient-twilight":{hsl:"250 90% 60%",darkHsl:"250 95% 65%",gradient:"linear-gradient(135deg, hsl(239 84% 67%) 0%, hsl(271 91% 65%) 100%)"}}[n];if(d)i.style.setProperty("--primary",d.hsl),d.gradient?(i.style.setProperty("--primary-gradient",d.gradient),i.classList.add("has-gradient")):(i.style.removeProperty("--primary-gradient"),i.classList.remove("has-gradient"));else if(n.startsWith("#")){const h=f=>{f=f.replace("#","");const x=parseInt(f.substring(0,2),16)/255,j=parseInt(f.substring(2,4),16)/255,p=parseInt(f.substring(4,6),16)/255,w=Math.max(x,j,p),v=Math.min(x,j,p);let y=0,S=0;const k=(w+v)/2;if(w!==v){const O=w-v;switch(S=k>.5?O/(2-w-v):O/(w+v),w){case x:y=((j-p)/O+(j<p?6:0))/6;break;case j:y=((p-x)/O+2)/6;break;case p:y=((x-j)/O+4)/6;break}}return`${Math.round(y*360)} ${Math.round(S*100)}% ${Math.round(k*100)}%`};i.style.setProperty("--primary",h(n)),i.style.removeProperty("--primary-gradient"),i.classList.remove("has-gradient")}}function a0(){const{theme:n,setTheme:i}=Xu(),{enableAnimations:c,setEnableAnimations:d,enableWavesBackground:h,setEnableWavesBackground:f}=Cg(),[x,j]=u.useState(()=>localStorage.getItem("accent-color")||"blue");u.useEffect(()=>{const w=localStorage.getItem("accent-color")||"blue";np(w)},[]);const p=w=>{j(w),localStorage.setItem("accent-color",w),np(w)};return e.jsxs("div",{className:"space-y-6 sm:space-y-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:""}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 sm:gap-4",children:[e.jsx(Eu,{value:"light",current:n,onChange:i,label:"",description:""}),e.jsx(Eu,{value:"dark",current:n,onChange:i,label:"",description:""}),e.jsx(Eu,{value:"system",current:n,onChange:i,label:"",description:""})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:""}),e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs sm:text-sm font-medium mb-2 sm:mb-3",children:""}),e.jsxs("div",{className:"grid grid-cols-3 sm:grid-cols-6 gap-2 sm:gap-3",children:[e.jsx(xa,{value:"blue",current:x,onChange:p,label:"",colorClass:"bg-blue-500"}),e.jsx(xa,{value:"purple",current:x,onChange:p,label:"",colorClass:"bg-purple-500"}),e.jsx(xa,{value:"green",current:x,onChange:p,label:"",colorClass:"bg-green-500"}),e.jsx(xa,{value:"orange",current:x,onChange:p,label:"",colorClass:"bg-orange-500"}),e.jsx(xa,{value:"pink",current:x,onChange:p,label:"",colorClass:"bg-pink-500"}),e.jsx(xa,{value:"red",current:x,onChange:p,label:"",colorClass:"bg-red-500"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs sm:text-sm font-medium mb-2 sm:mb-3",children:""}),e.jsxs("div",{className:"grid grid-cols-3 sm:grid-cols-6 gap-2 sm:gap-3",children:[e.jsx(xa,{value:"gradient-sunset",current:x,onChange:p,label:"",colorClass:"bg-gradient-to-r from-orange-500 to-pink-500"}),e.jsx(xa,{value:"gradient-ocean",current:x,onChange:p,label:"",colorClass:"bg-gradient-to-r from-blue-500 to-cyan-500"}),e.jsx(xa,{value:"gradient-forest",current:x,onChange:p,label:"",colorClass:"bg-gradient-to-r from-green-500 to-emerald-500"}),e.jsx(xa,{value:"gradient-aurora",current:x,onChange:p,label:"",colorClass:"bg-gradient-to-r from-purple-500 to-pink-500"}),e.jsx(xa,{value:"gradient-fire",current:x,onChange:p,label:"",colorClass:"bg-gradient-to-r from-red-500 to-orange-500"}),e.jsx(xa,{value:"gradient-twilight",current:x,onChange:p,label:"",colorClass:"bg-gradient-to-r from-indigo-500 to-purple-500"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs sm:text-sm font-medium mb-2 sm:mb-3",children:""}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"color",value:x.startsWith("#")?x:"#3b82f6",onChange:w=>p(w.target.value),className:"h-10 sm:h-12 w-full rounded-lg border-2 border-border cursor-pointer",title:""})}),e.jsx("div",{className:"flex-1",children:e.jsx(ie,{type:"text",value:x,onChange:w=>p(w.target.value),placeholder:"#3b82f6",className:"font-mono text-sm"})})]}),e.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground mt-2",children:" HEX "})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:""}),e.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[e.jsx("div",{className:"rounded-lg border bg-card p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5 flex-1",children:[e.jsx(b,{htmlFor:"animations",className:"text-base font-medium cursor-pointer",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),e.jsx(Qe,{id:"animations",checked:c,onCheckedChange:d})]})}),e.jsx("div",{className:"rounded-lg border bg-card p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5 flex-1",children:[e.jsx(b,{htmlFor:"waves-background",className:"text-base font-medium cursor-pointer",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),e.jsx(Qe,{id:"waves-background",checked:h,onCheckedChange:f})]})})]})]})]})}function l0(){const n=ja(),[i,c]=u.useState(""),[d,h]=u.useState(""),[f,x]=u.useState(!1),[j,p]=u.useState(!1),[w,v]=u.useState(!1),[y,S]=u.useState(!1),[k,O]=u.useState(!1),[Y,L]=u.useState(!1),[R,H]=u.useState(""),[D,C]=u.useState(!1),{toast:$}=Vs(),G=u.useMemo(()=>$y(d),[d]),T=async je=>{if(!i){$({title:"",description:"Token  Cookie  Token",variant:"destructive"});return}try{await navigator.clipboard.writeText(je),O(!0),$({title:"",description:"Token "}),setTimeout(()=>O(!1),2e3)}catch{$({title:"",description:" Token",variant:"destructive"})}},M=async()=>{if(!d.trim()){$({title:"",description:" Token",variant:"destructive"});return}if(!G.isValid){const je=G.rules.filter(ye=>!ye.passed).map(ye=>ye.label).join(", ");$({title:"",description:`Token : ${je}`,variant:"destructive"});return}v(!0);try{const je=await fetch("/api/webui/auth/update",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({new_token:d.trim()})}),ye=await je.json();je.ok&&ye.success?(h(""),c(d.trim()),$({title:"",description:"Access Token "}),setTimeout(()=>{n({to:"/auth"})},1500)):$({title:"",description:ye.message||" Token",variant:"destructive"})}catch(je){console.error(" Token :",je),$({title:"",description:"",variant:"destructive"})}finally{v(!1)}},ne=async()=>{S(!0);try{const je=await fetch("/api/webui/auth/regenerate",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"}),ye=await je.json();je.ok&&ye.success?(c(ye.token),H(ye.token),L(!0),C(!1),$({title:"",description:" Access Token "})):$({title:"",description:ye.message||" Token",variant:"destructive"})}catch(je){console.error(" Token :",je),$({title:"",description:"",variant:"destructive"})}finally{S(!1)}},fe=async()=>{try{await navigator.clipboard.writeText(R),C(!0),$({title:"",description:"Token "})}catch{$({title:"",description:" Token",variant:"destructive"})}},_e=()=>{L(!1),setTimeout(()=>{H(""),C(!1)},300),setTimeout(()=>{n({to:"/auth"})},500)},Se=je=>{je||_e()};return e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsx($s,{open:Y,onOpenChange:Se,children:e.jsxs(Hs,{className:"sm:max-w-md",children:[e.jsxs(qs,{children:[e.jsxs(Gs,{className:"flex items-center gap-2",children:[e.jsx(_a,{className:"h-5 w-5 text-yellow-500"})," Access Token"]}),e.jsx(Is,{children:" Token"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"rounded-lg border-2 border-primary/20 bg-primary/5 p-4",children:[e.jsx(b,{className:"text-xs text-muted-foreground mb-2 block",children:" Token (64)"}),e.jsx("div",{className:"font-mono text-sm break-all select-all bg-background p-3 rounded border",children:R})]}),e.jsx("div",{className:"rounded-lg border border-yellow-200 dark:border-yellow-900 bg-yellow-50 dark:bg-yellow-950/30 p-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(_a,{className:"h-4 w-4 text-yellow-600 dark:text-yellow-500 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-yellow-800 dark:text-yellow-300 space-y-1",children:[e.jsx("p",{className:"font-semibold",children:""}),e.jsxs("ul",{className:"list-disc list-inside space-y-0.5 text-xs",children:[e.jsx("li",{children:" Token "}),e.jsx("li",{children:""}),e.jsx("li",{children:""}),e.jsx("li",{children:" Token "})]})]})]})})]}),e.jsxs(at,{className:"gap-2 sm:gap-0",children:[e.jsx(N,{variant:"outline",onClick:fe,className:"gap-2",children:D?e.jsxs(e.Fragment,{children:[e.jsx($t,{className:"h-4 w-4 text-green-500"}),""]}):e.jsxs(e.Fragment,{children:[e.jsx(Pc,{className:"h-4 w-4"})," Token"]})}),e.jsx(N,{onClick:_e,children:""})]})]})}),e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:" Access Token"}),e.jsx("div",{className:"space-y-3 sm:space-y-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"current-token",className:"text-sm",children:""}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ie,{id:"current-token",type:f?"text":"password",value:i||"",readOnly:!0,className:"pr-10 font-mono text-sm",placeholder:"Token  Cookie "}),e.jsx("button",{onClick:()=>{i?x(!f):$({title:"",description:'Token  Cookie  Token ""'})},className:"absolute right-2 top-1/2 -translate-y-1/2 p-1.5 hover:bg-accent rounded",title:f?"":"",children:f?e.jsx(xr,{className:"h-4 w-4 text-muted-foreground"}):e.jsx(Dt,{className:"h-4 w-4 text-muted-foreground"})})]}),e.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[e.jsx(N,{variant:"outline",size:"icon",onClick:()=>T(i),title:"",className:"flex-shrink-0",disabled:!i,children:k?e.jsx($t,{className:"h-4 w-4 text-green-500"}):e.jsx(Pc,{className:"h-4 w-4"})}),e.jsxs(ps,{children:[e.jsx(tt,{asChild:!0,children:e.jsxs(N,{variant:"outline",disabled:y,className:"gap-2 flex-1 sm:flex-none",children:[e.jsx(Ct,{className:X("h-4 w-4",y&&"animate-spin")}),e.jsx("span",{className:"hidden sm:inline",children:""}),e.jsx("span",{className:"sm:hidden",children:""})]})}),e.jsxs(rs,{children:[e.jsxs(cs,{children:[e.jsx(ds,{children:" Token"}),e.jsx(us,{children:" 64  Token   Token "})]}),e.jsxs(os,{children:[e.jsx(hs,{children:""}),e.jsx(ms,{onClick:ne,children:""})]})]})]})]})]}),e.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:" Access Token"})]})})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:" Access Token"}),e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"new-token",className:"text-sm",children:""}),e.jsxs("div",{className:"relative",children:[e.jsx(ie,{id:"new-token",type:j?"text":"password",value:d,onChange:je=>h(je.target.value),className:"pr-10 font-mono text-sm",placeholder:" Token"}),e.jsx("button",{onClick:()=>p(!j),className:"absolute right-2 top-1/2 -translate-y-1/2 p-1.5 hover:bg-accent rounded",title:j?"":"",children:j?e.jsx(xr,{className:"h-4 w-4 text-muted-foreground"}):e.jsx(Dt,{className:"h-4 w-4 text-muted-foreground"})})]}),d&&e.jsxs("div",{className:"mt-3 space-y-2 p-3 rounded-lg bg-muted/50",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:"Token :"}),e.jsx("div",{className:"space-y-1.5",children:G.rules.map(je=>e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[je.passed?e.jsx(fa,{className:"h-4 w-4 text-green-500 flex-shrink-0"}):e.jsx(cg,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),e.jsx("span",{className:X(je.passed?"text-green-600 dark:text-green-400":"text-muted-foreground"),children:je.label})]},je.id))}),G.isValid&&e.jsx("div",{className:"mt-2 pt-2 border-t border-border",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-600 dark:text-green-400",children:[e.jsx($t,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:"Token "})]})})]})]}),e.jsx(N,{onClick:M,disabled:w||!G.isValid||!d,className:"w-full sm:w-auto",children:w?"...":" Token"})]})]}),e.jsxs("div",{className:"rounded-lg border border-yellow-200 dark:border-yellow-900 bg-yellow-50 dark:bg-yellow-950/30 p-3 sm:p-4",children:[e.jsx("h4",{className:"text-sm sm:text-base font-semibold text-yellow-900 dark:text-yellow-200 mb-2",children:""}),e.jsxs("ul",{className:"text-xs sm:text-sm text-yellow-800 dark:text-yellow-300 space-y-1 list-disc list-inside",children:[e.jsx("li",{children:" Token  64 "}),e.jsx("li",{children:" Token "}),e.jsx("li",{children:" Token  Token "}),e.jsx("li",{children:" Token"}),e.jsx("li",{children:" Token "}),e.jsx("li",{children:" Token "})]})]})]})}function n0(){const n=ja(),{toast:i}=Vs(),[c,d]=u.useState(!1),[h,f]=u.useState(!1),[x,j]=u.useState(()=>st("logCacheSize")),[p,w]=u.useState(()=>st("wsReconnectInterval")),[v,y]=u.useState(()=>st("wsMaxReconnectAttempts")),[S,k]=u.useState(()=>st("dataSyncInterval")),[O,Y]=u.useState(()=>lp()),[L,R]=u.useState(!1),[H,D]=u.useState(!1),C=u.useRef(null);if(h)throw new Error("");const $=()=>{Y(lp())},G=A=>{const K=A[0];j(K),ai("logCacheSize",K)},T=A=>{const K=A[0];w(K),ai("wsReconnectInterval",K)},M=A=>{const K=A[0];y(K),ai("wsMaxReconnectAttempts",K)},ne=A=>{const K=A[0];k(K),ai("dataSyncInterval",K)},fe=()=>{rn.clearLogs(),i({title:"",description:""})},_e=()=>{const A=Iy();$(),i({title:"",description:` ${A.clearedKeys.length} `})},Se=()=>{R(!0);try{const A=Ky(),K=JSON.stringify(A,null,2),E=new Blob([K],{type:"application/json"}),se=URL.createObjectURL(E),_=document.createElement("a");_.href=se,_.download=`maibot-webui-settings-${new Date().toISOString().slice(0,10)}.json`,document.body.appendChild(_),_.click(),document.body.removeChild(_),URL.revokeObjectURL(se),i({title:"",description:" JSON "})}catch(A){console.error(":",A),i({title:"",description:"",variant:"destructive"})}finally{R(!1)}},je=A=>{const K=A.target.files?.[0];if(!K)return;D(!0);const E=new FileReader;E.onload=se=>{try{const _=se.target?.result,me=JSON.parse(_),re=Jy(me);re.success?(j(st("logCacheSize")),w(st("wsReconnectInterval")),y(st("wsMaxReconnectAttempts")),k(st("dataSyncInterval")),$(),i({title:"",description:` ${re.imported.length} ${re.skipped.length>0?` ${re.skipped.length} `:""}`}),(re.imported.includes("theme")||re.imported.includes("accentColor"))&&i({title:"",description:""})):i({title:"",description:"",variant:"destructive"})}catch(_){console.error(":",_),i({title:"",description:"",variant:"destructive"})}finally{D(!1),C.current&&(C.current.value="")}},E.readAsText(K)},ye=()=>{Zy(),j(Oa.logCacheSize),w(Oa.wsReconnectInterval),y(Oa.wsMaxReconnectAttempts),k(Oa.dataSyncInterval),$(),i({title:"",description:""})},be=async()=>{d(!0);try{const A=localStorage.getItem("access-token"),K=await fetch("/api/webui/setup/reset",{method:"POST",headers:{Authorization:`Bearer ${A}`}}),E=await K.json();K.ok&&E.success?(i({title:"",description:""}),setTimeout(()=>{n({to:"/setup"})},1e3)):i({title:"",description:E.message||"",variant:"destructive"})}catch(A){console.error(":",A),i({title:"",description:"",variant:"destructive"})}finally{d(!1)}};return e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6",children:[e.jsxs("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4 flex items-center gap-2",children:[e.jsx(Ic,{className:"h-5 w-5"}),""]}),e.jsxs("div",{className:"space-y-4 sm:space-y-5",children:[e.jsxs("div",{className:"rounded-lg bg-muted/50 p-3 sm:p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(jb,{className:"h-4 w-4"}),""]}),e.jsx(N,{variant:"ghost",size:"sm",onClick:$,className:"h-7 px-2",children:e.jsx(Ct,{className:"h-3 w-3"})})]}),e.jsx("div",{className:"text-2xl font-bold text-primary",children:Py(O.used)}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[O.items," "]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(b,{className:"text-sm font-medium",children:""}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[x," "]})]}),e.jsx(wa,{value:[x],onValueChange:G,min:100,max:5e3,step:100,className:"w-full"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(b,{className:"text-sm font-medium",children:""}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[S," "]})]}),e.jsx(wa,{value:[S],onValueChange:ne,min:10,max:120,step:5,className:"w-full"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(b,{className:"text-sm font-medium",children:"WebSocket "}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[p/1e3," "]})]}),e.jsx(wa,{value:[p],onValueChange:T,min:1e3,max:1e4,step:500,className:"w-full"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" WebSocket "})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(b,{className:"text-sm font-medium",children:"WebSocket "}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[v," "]})]}),e.jsx(wa,{value:[v],onValueChange:M,min:3,max:30,step:1,className:"w-full"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 pt-2",children:[e.jsxs(N,{variant:"outline",size:"sm",onClick:fe,className:"gap-2",children:[e.jsx(ts,{className:"h-4 w-4"}),""]}),e.jsxs(ps,{children:[e.jsx(tt,{asChild:!0,children:e.jsxs(N,{variant:"outline",size:"sm",className:"gap-2",children:[e.jsx(ts,{className:"h-4 w-4"}),""]})}),e.jsxs(rs,{children:[e.jsxs(cs,{children:[e.jsx(ds,{children:""}),e.jsx(us,{children:" "})]}),e.jsxs(os,{children:[e.jsx(hs,{children:""}),e.jsx(ms,{onClick:_e,children:""})]})]})]})]})]})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6",children:[e.jsxs("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4 flex items-center gap-2",children:[e.jsx(rl,{className:"h-5 w-5"}),"/"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:""}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(N,{variant:"outline",onClick:Se,disabled:L,className:"gap-2",children:[e.jsx(rl,{className:"h-4 w-4"}),L?"...":""]}),e.jsx("input",{ref:C,type:"file",accept:".json",onChange:je,className:"hidden"}),e.jsxs(N,{variant:"outline",onClick:()=>C.current?.click(),disabled:H,className:"gap-2",children:[e.jsx(fr,{className:"h-4 w-4"}),H?"...":""]})]}),e.jsx("div",{className:"pt-2 border-t",children:e.jsxs(ps,{children:[e.jsx(tt,{asChild:!0,children:e.jsxs(N,{variant:"outline",size:"sm",className:"gap-2 text-destructive hover:text-destructive",children:[e.jsx(Zc,{className:"h-4 w-4"}),""]})}),e.jsxs(rs,{children:[e.jsxs(cs,{children:[e.jsx(ds,{children:""}),e.jsx(us,{children:" "})]}),e.jsxs(os,{children:[e.jsx(hs,{children:""}),e.jsx(ms,{onClick:ye,children:""})]})]})]})})]})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:""}),e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsx("div",{className:"space-y-2",children:e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:""})}),e.jsxs(ps,{children:[e.jsx(tt,{asChild:!0,children:e.jsxs(N,{variant:"outline",disabled:c,className:"gap-2",children:[e.jsx(Zc,{className:X("h-4 w-4",c&&"animate-spin")}),""]})}),e.jsxs(rs,{children:[e.jsxs(cs,{children:[e.jsx(ds,{children:""}),e.jsx(us,{children:""})]}),e.jsxs(os,{children:[e.jsx(hs,{children:""}),e.jsx(ms,{onClick:be,children:""})]})]})]})]})]}),e.jsxs("div",{className:"rounded-lg border border-dashed border-yellow-500/50 bg-yellow-500/5 p-4 sm:p-6",children:[e.jsxs("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4 flex items-center gap-2",children:[e.jsx(_a,{className:"h-5 w-5 text-yellow-500"}),""]}),e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsx("div",{className:"space-y-2",children:e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:""})}),e.jsxs(ps,{children:[e.jsx(tt,{asChild:!0,children:e.jsxs(N,{variant:"destructive",className:"gap-2",children:[e.jsx(_a,{className:"h-4 w-4"}),""]})}),e.jsxs(rs,{children:[e.jsxs(cs,{children:[e.jsx(ds,{children:""}),e.jsx(us,{children:" React  "})]}),e.jsxs(os,{children:[e.jsx(hs,{children:""}),e.jsx(ms,{onClick:()=>f(!0),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:""})]})]})]})]})]})]})}function i0(){return e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsx("div",{className:"rounded-lg border-2 border-primary/30 bg-gradient-to-r from-primary/5 to-primary/10 p-4 sm:p-6",children:e.jsxs("div",{className:"flex items-start gap-3 sm:gap-4",children:[e.jsx("div",{className:"flex-shrink-0 rounded-lg bg-primary/10 p-2 sm:p-3",children:e.jsx("svg",{className:"h-6 w-6 sm:h-8 sm:w-8 text-primary",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-foreground mb-2",children:""}),e.jsx("p",{className:"text-sm sm:text-base text-muted-foreground mb-3",children:" GitHub  Star  "}),e.jsxs("a",{href:"https://github.com/Mai-with-u/MaiBot-Dashboard",target:"_blank",rel:"noopener noreferrer",className:X("inline-flex items-center gap-2 px-4 py-2 rounded-lg","bg-primary text-primary-foreground font-medium text-sm","hover:bg-primary/90 transition-colors","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"),children:[e.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z",clipRule:"evenodd"})})," GitHub",e.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})]})]})}),e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6",children:[e.jsxs("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:[" ",Ju]}),e.jsxs("div",{className:"space-y-2 text-xs sm:text-sm text-muted-foreground",children:[e.jsxs("p",{children:[": ",Ku]}),e.jsx("p",{children:"MaiBot Web "})]})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:""}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"MaiBot "}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Mai-with-u"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"WebUI"}),e.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground",children:["Mai-with-u ",e.jsx("a",{href:"https://github.com/DrSmoothl",target:"_blank",rel:"noopener noreferrer",className:"text-primary underline",children:"@MotricSeven"})]})]})]})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:""}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-xs sm:text-sm text-muted-foreground",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("p",{className:"font-medium text-foreground",children:""}),e.jsxs("ul",{className:"space-y-0.5 list-disc list-inside",children:[e.jsx("li",{children:"React 19.2.0"}),e.jsx("li",{children:"TypeScript 5.7.2"}),e.jsx("li",{children:"Vite 6.0.7"}),e.jsx("li",{children:"TanStack Router 1.94.2"})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("p",{className:"font-medium text-foreground",children:"UI "}),e.jsxs("ul",{className:"space-y-0.5 list-disc list-inside",children:[e.jsx("li",{children:"shadcn/ui"}),e.jsx("li",{children:"Radix UI"}),e.jsx("li",{children:"Tailwind CSS 3.4.17"}),e.jsx("li",{children:"Lucide Icons"})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("p",{className:"font-medium text-foreground",children:""}),e.jsxs("ul",{className:"space-y-0.5 list-disc list-inside",children:[e.jsx("li",{children:"Python 3.12+"}),e.jsx("li",{children:"FastAPI"}),e.jsx("li",{children:"Uvicorn"}),e.jsx("li",{children:"WebSocket"})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("p",{className:"font-medium text-foreground",children:""}),e.jsxs("ul",{className:"space-y-0.5 list-disc list-inside",children:[e.jsx("li",{children:"Bun / npm"}),e.jsx("li",{children:"ESLint 9.17.0"}),e.jsx("li",{children:"PostCSS"})]})]})]})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:""}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mb-3",children:""}),e.jsx(ss,{className:"h-[300px] sm:h-[400px]",children:e.jsxs("div",{className:"space-y-4 pr-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:"UI "}),e.jsxs("div",{className:"grid gap-2 text-xs sm:text-sm",children:[e.jsx(Zs,{name:"React",description:"",license:"MIT"}),e.jsx(Zs,{name:"shadcn/ui",description:" React ",license:"MIT"}),e.jsx(Zs,{name:"Radix UI",description:"",license:"MIT"}),e.jsx(Zs,{name:"Tailwind CSS",description:" CSS ",license:"MIT"}),e.jsx(Zs,{name:"Lucide React",description:"",license:"ISC"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:""}),e.jsxs("div",{className:"grid gap-2 text-xs sm:text-sm",children:[e.jsx(Zs,{name:"TanStack Router",description:"",license:"MIT"}),e.jsx(Zs,{name:"Zustand",description:"",license:"MIT"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:""}),e.jsxs("div",{className:"grid gap-2 text-xs sm:text-sm",children:[e.jsx(Zs,{name:"React Hook Form",description:"",license:"MIT"}),e.jsx(Zs,{name:"Zod",description:"TypeScript  schema ",license:"MIT"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:""}),e.jsxs("div",{className:"grid gap-2 text-xs sm:text-sm",children:[e.jsx(Zs,{name:"clsx",description:" className ",license:"MIT"}),e.jsx(Zs,{name:"tailwind-merge",description:"Tailwind ",license:"MIT"}),e.jsx(Zs,{name:"class-variance-authority",description:"",license:"Apache-2.0"}),e.jsx(Zs,{name:"date-fns",description:"",license:"MIT"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:""}),e.jsxs("div",{className:"grid gap-2 text-xs sm:text-sm",children:[e.jsx(Zs,{name:"Framer Motion",description:"React ",license:"MIT"}),e.jsx(Zs,{name:"vaul",description:"",license:"MIT"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:""}),e.jsxs("div",{className:"grid gap-2 text-xs sm:text-sm",children:[e.jsx(Zs,{name:"FastAPI",description:" Python Web ",license:"MIT"}),e.jsx(Zs,{name:"Uvicorn",description:"ASGI ",license:"BSD-3-Clause"}),e.jsx(Zs,{name:"Pydantic",description:"",license:"MIT"}),e.jsx(Zs,{name:"python-multipart",description:"",license:"Apache-2.0"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:""}),e.jsxs("div",{className:"grid gap-2 text-xs sm:text-sm",children:[e.jsx(Zs,{name:"TypeScript",description:"JavaScript ",license:"Apache-2.0"}),e.jsx(Zs,{name:"Vite",description:"",license:"MIT"}),e.jsx(Zs,{name:"ESLint",description:"JavaScript ",license:"MIT"}),e.jsx(Zs,{name:"PostCSS",description:"CSS ",license:"MIT"})]})]})]})})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:""}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"rounded-lg bg-primary/5 border border-primary/20 p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-start gap-2 sm:gap-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:e.jsx("div",{className:"rounded-md bg-primary/10 px-2 py-1",children:e.jsx("span",{className:"text-xs sm:text-sm font-bold text-primary",children:"GPLv3"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm sm:text-base font-semibold text-foreground mb-1",children:"MaiBot WebUI"}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:" GNU General Public License v3.0  "})]})]})}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"MITApache-2.0BSD  "})]})]})]})}function Zs({name:n,description:i,license:c}){return e.jsxs("div",{className:"flex items-start justify-between gap-2 rounded-lg border bg-muted/30 p-2.5 sm:p-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-foreground truncate",children:n}),e.jsx("p",{className:"text-muted-foreground text-xs mt-0.5",children:i})]}),e.jsx("span",{className:"inline-flex items-center rounded-full bg-primary/10 px-2 py-0.5 text-[10px] font-medium text-primary flex-shrink-0",children:c})]})}function Eu({value:n,current:i,onChange:c,label:d,description:h}){const f=i===n;return e.jsxs("button",{onClick:()=>c(n),className:X("relative rounded-lg border-2 p-3 sm:p-4 text-left transition-all","hover:border-primary/50 hover:bg-accent/50",f?"border-primary bg-accent":"border-border"),children:[f&&e.jsx("div",{className:"absolute top-2 right-2 sm:top-3 sm:right-3 h-2 w-2 rounded-full bg-primary"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-sm sm:text-base font-medium",children:d}),e.jsx("div",{className:"text-[10px] sm:text-xs text-muted-foreground",children:h})]}),e.jsxs("div",{className:"mt-2 sm:mt-3 flex gap-1",children:[n==="light"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-slate-200"}),e.jsx("div",{className:"h-2 w-2 rounded-full bg-slate-300"}),e.jsx("div",{className:"h-2 w-2 rounded-full bg-slate-400"})]}),n==="dark"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-slate-700"}),e.jsx("div",{className:"h-2 w-2 rounded-full bg-slate-800"}),e.jsx("div",{className:"h-2 w-2 rounded-full bg-slate-900"})]}),n==="system"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-gradient-to-r from-slate-200 to-slate-700"}),e.jsx("div",{className:"h-2 w-2 rounded-full bg-gradient-to-r from-slate-300 to-slate-800"}),e.jsx("div",{className:"h-2 w-2 rounded-full bg-gradient-to-r from-slate-400 to-slate-900"})]})]})]})}function xa({value:n,current:i,onChange:c,label:d,colorClass:h}){const f=i===n;return e.jsxs("button",{onClick:()=>c(n),className:X("relative rounded-lg border-2 p-2 sm:p-3 text-left transition-all","hover:border-primary/50 hover:bg-accent/50",f?"border-primary bg-accent":"border-border"),children:[f&&e.jsx("div",{className:"absolute top-1.5 right-1.5 sm:top-2 sm:right-2 h-1.5 w-1.5 sm:h-2 sm:w-2 rounded-full bg-primary"}),e.jsxs("div",{className:"flex flex-col items-center gap-1.5 sm:gap-2",children:[e.jsx("div",{className:X("h-8 w-8 sm:h-10 sm:w-10 rounded-full",h)}),e.jsx("div",{className:"text-[10px] sm:text-xs font-medium text-center",children:d})]})]})}class r0{grad3;p;perm;constructor(i=0){this.grad3=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],this.p=[];for(let c=0;c<256;c++)this.p[c]=Math.floor(Math.random()*256);this.perm=[];for(let c=0;c<512;c++)this.perm[c]=this.p[c&255]}dot(i,c,d){return i[0]*c+i[1]*d}mix(i,c,d){return(1-d)*i+d*c}fade(i){return i*i*i*(i*(i*6-15)+10)}perlin2(i,c){const d=Math.floor(i)&255,h=Math.floor(c)&255;i-=Math.floor(i),c-=Math.floor(c);const f=this.fade(i),x=this.fade(c),j=this.perm[d]+h,p=this.perm[j],w=this.perm[j+1],v=this.perm[d+1]+h,y=this.perm[v],S=this.perm[v+1];return this.mix(this.mix(this.dot(this.grad3[p%12],i,c),this.dot(this.grad3[y%12],i-1,c),f),this.mix(this.dot(this.grad3[w%12],i,c-1),this.dot(this.grad3[S%12],i-1,c-1),f),x)}}function ip(){const n=u.useRef(null),i=u.useRef(null),c=u.useRef(void 0),d=u.useRef({mouse:{x:-10,y:0,lx:0,ly:0,sx:0,sy:0,v:0,vs:0,a:0,set:!1},lines:[],paths:[],noise:new r0(Math.random()),bounding:null});return u.useEffect(()=>{const h=i.current,f=n.current;if(!h||!f)return;const x=d.current,j=()=>{const Y=h.getBoundingClientRect();x.bounding=Y,f.style.width=`${Y.width}px`,f.style.height=`${Y.height}px`},p=()=>{if(!x.bounding)return;const{width:Y,height:L}=x.bounding;x.lines=[],x.paths.forEach(ne=>ne.remove()),x.paths=[];const R=10,H=32,D=Y+200,C=L+30,$=Math.ceil(D/R),G=Math.ceil(C/H),T=(Y-R*$)/2,M=(L-H*G)/2;for(let ne=0;ne<=$;ne++){const fe=[];for(let Se=0;Se<=G;Se++){const je={x:T+R*ne,y:M+H*Se,wave:{x:0,y:0},cursor:{x:0,y:0,vx:0,vy:0}};fe.push(je)}const _e=document.createElementNS("http://www.w3.org/2000/svg","path");f.appendChild(_e),x.paths.push(_e),x.lines.push(fe)}},w=Y=>{const{lines:L,mouse:R,noise:H}=x;L.forEach(D=>{D.forEach(C=>{const $=H.perlin2((C.x+Y*.0125)*.002,(C.y+Y*.005)*.0015)*12;C.wave.x=Math.cos($)*32,C.wave.y=Math.sin($)*16;const G=C.x-R.sx,T=C.y-R.sy,M=Math.hypot(G,T),ne=Math.max(175,R.vs);if(M<ne){const fe=1-M/ne,_e=Math.cos(M*.001)*fe;C.cursor.vx+=Math.cos(R.a)*_e*ne*R.vs*65e-5,C.cursor.vy+=Math.sin(R.a)*_e*ne*R.vs*65e-5}C.cursor.vx+=(0-C.cursor.x)*.005,C.cursor.vy+=(0-C.cursor.y)*.005,C.cursor.vx*=.925,C.cursor.vy*=.925,C.cursor.x+=C.cursor.vx*2,C.cursor.y+=C.cursor.vy*2,C.cursor.x=Math.min(100,Math.max(-100,C.cursor.x)),C.cursor.y=Math.min(100,Math.max(-100,C.cursor.y))})})},v=(Y,L=!0)=>{const R={x:Y.x+Y.wave.x+(L?Y.cursor.x:0),y:Y.y+Y.wave.y+(L?Y.cursor.y:0)};return R.x=Math.round(R.x*10)/10,R.y=Math.round(R.y*10)/10,R},y=()=>{const{lines:Y,paths:L}=x;Y.forEach((R,H)=>{let D=v(R[0],!1),C=`M ${D.x} ${D.y}`;R.forEach(($,G)=>{const T=G===R.length-1;D=v($,!T),C+=`L ${D.x} ${D.y}`}),L[H].setAttribute("d",C)})},S=Y=>{const{mouse:L}=x;L.sx+=(L.x-L.sx)*.1,L.sy+=(L.y-L.sy)*.1;const R=L.x-L.lx,H=L.y-L.ly,D=Math.hypot(R,H);L.v=D,L.vs+=(D-L.vs)*.1,L.vs=Math.min(100,L.vs),L.lx=L.x,L.ly=L.y,L.a=Math.atan2(H,R),h&&(h.style.setProperty("--x",`${L.sx}px`),h.style.setProperty("--y",`${L.sy}px`)),w(Y),y(),c.current=requestAnimationFrame(S)},k=Y=>{if(!x.bounding)return;const{mouse:L}=x;L.x=Y.pageX-x.bounding.left,L.y=Y.pageY-x.bounding.top+window.scrollY,L.set||(L.sx=L.x,L.sy=L.y,L.lx=L.x,L.ly=L.y,L.set=!0)},O=()=>{j(),p()};return j(),p(),window.addEventListener("resize",O),window.addEventListener("mousemove",k),c.current=requestAnimationFrame(S),()=>{window.removeEventListener("resize",O),window.removeEventListener("mousemove",k),c.current&&cancelAnimationFrame(c.current)}},[]),e.jsxs("div",{ref:i,className:"waves-background",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",overflow:"hidden",pointerEvents:"none"},children:[e.jsx("div",{className:"waves-cursor",style:{position:"absolute",top:0,left:0,width:"0.5rem",height:"0.5rem",background:"hsl(var(--primary) / 0.3)",borderRadius:"50%",transform:"translate3d(calc(var(--x, -0.5rem) - 50%), calc(var(--y, 50%) - 50%), 0)",willChange:"transform",pointerEvents:"none"}}),e.jsx("svg",{ref:n,style:{display:"block",width:"100%",height:"100%"},children:e.jsx("style",{children:`
          path {
            fill: none;
            stroke: hsl(var(--primary) / 0.20);
            stroke-width: 1px;
          }
        `})})]})}async function Te(n,i){const c={...i,credentials:"include",headers:{"Content-Type":"application/json",...i?.headers}},d=await fetch(n,c);if(d.status===401)throw window.location.href="/auth",new Error("");return d}function Ls(){return{"Content-Type":"application/json"}}async function c0(){try{await fetch("/api/webui/auth/logout",{method:"POST",credentials:"include"})}catch(n){console.error(":",n)}window.location.href="/auth"}async function Iu(){try{return(await(await fetch("/api/webui/auth/check",{method:"GET",credentials:"include"})).json()).authenticated===!0}catch{return!1}}function o0(){const[n,i]=u.useState(""),[c,d]=u.useState(!1),[h,f]=u.useState(""),[x,j]=u.useState(!0),p=ja(),{enableWavesBackground:w,setEnableWavesBackground:v}=Cg(),{theme:y,setTheme:S}=Xu();u.useEffect(()=>{(async()=>{try{await Iu()&&p({to:"/"})}catch{}finally{j(!1)}})()},[p]);const O=y==="system"?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":y,Y=()=>{S(O==="dark"?"light":"dark")},L=async R=>{if(R.preventDefault(),f(""),!n.trim()){f(" Access Token");return}d(!0);try{const H=await fetch("/api/webui/auth/verify",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({token:n.trim()})}),D=await H.json();H.ok&&D.valid?D.is_first_setup?p({to:"/setup"}):p({to:"/"}):f(D.message||"Token ")}catch(H){console.error("Token :",H),f("")}finally{d(!1)}};return x?e.jsxs("div",{className:"relative flex min-h-screen items-center justify-center overflow-hidden bg-background p-4",children:[w&&e.jsx(ip,{}),e.jsx("div",{className:"text-muted-foreground",children:"..."})]}):e.jsxs("div",{className:"relative flex min-h-screen items-center justify-center overflow-hidden bg-background p-4",children:[w&&e.jsx(ip,{}),e.jsxs(Ze,{className:"relative z-10 w-full max-w-md shadow-2xl backdrop-blur-xl bg-card/80 border-border/50",children:[e.jsx("button",{onClick:Y,className:"absolute right-4 top-4 rounded-lg p-2 hover:bg-accent transition-colors z-10 text-foreground",title:O==="dark"?"":"",children:O==="dark"?e.jsx(og,{className:"h-5 w-5",strokeWidth:2.5,fill:"none"}):e.jsx(dg,{className:"h-5 w-5",strokeWidth:2.5,fill:"none"})}),e.jsxs(ys,{className:"space-y-4 text-center",children:[e.jsx("div",{className:"mx-auto flex h-16 w-16 items-center justify-center rounded-2xl bg-primary/10",children:e.jsx(Xf,{className:"h-8 w-8 text-primary",strokeWidth:2,fill:"none"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ws,{className:"text-2xl font-bold",children:" MaiBot"}),e.jsx(ct,{className:"text-base",children:" Access Token "})]})]}),e.jsx(Ts,{children:e.jsxs("form",{onSubmit:L,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"token",className:"text-sm font-medium",children:"Access Token"}),e.jsxs("div",{className:"relative",children:[e.jsx(ug,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground",strokeWidth:2,fill:"none"}),e.jsx(ie,{id:"token",type:"password",placeholder:" Access Token",value:n,onChange:R=>i(R.target.value),className:X("pl-10",h&&"border-red-500 focus-visible:ring-red-500"),disabled:c,autoFocus:!0,autoComplete:"off"})]})]}),h&&e.jsxs("div",{className:"flex items-center gap-2 rounded-md bg-red-50 p-3 text-sm text-red-600 dark:bg-red-950/50 dark:text-red-400",children:[e.jsx(Sa,{className:"h-4 w-4 flex-shrink-0",strokeWidth:2,fill:"none"}),e.jsx("span",{children:h})]}),e.jsx(N,{type:"submit",className:"w-full",disabled:c,children:c?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}),"..."]}):""}),e.jsxs($s,{children:[e.jsx(Zu,{asChild:!0,children:e.jsxs("button",{className:"w-full text-center text-sm text-primary hover:text-primary/80 transition-colors underline-offset-4 hover:underline flex items-center justify-center gap-1",children:[e.jsx(mg,{className:"h-4 w-4",strokeWidth:2,fill:"none"})," Token Token"]})}),e.jsxs(Hs,{className:"sm:max-w-md",children:[e.jsxs(qs,{children:[e.jsxs(Gs,{className:"flex items-center gap-2",children:[e.jsx(Xf,{className:"h-5 w-5 text-primary",strokeWidth:2,fill:"none"})," Access Token"]}),e.jsx(Is,{children:"Access Token  MaiBot WebUI "})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"rounded-lg border bg-muted/50 p-4 space-y-2",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(vb,{className:"h-5 w-5 text-primary flex-shrink-0 mt-0.5",strokeWidth:2,fill:"none"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("h4",{className:"font-semibold text-sm",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:" MaiBot  WebUI Access Token"}),e.jsxs("div",{className:"rounded bg-background p-2 font-mono text-xs",children:[e.jsx("p",{className:"text-muted-foreground",children:" WebUI Access Token: abc123..."}),e.jsx("p",{className:"text-muted-foreground",children:"  Token  WebUI"})]})]})]})}),e.jsx("div",{className:"rounded-lg border bg-muted/50 p-4 space-y-2",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ra,{className:"h-5 w-5 text-primary flex-shrink-0 mt-0.5",strokeWidth:2,fill:"none"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("h4",{className:"font-semibold text-sm",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Token "}),e.jsx("div",{className:"rounded bg-background p-2 font-mono text-xs break-all",children:e.jsx("code",{className:"text-primary",children:"data/webui.json"})}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[" ",e.jsx("code",{className:"px-1 py-0.5 bg-background rounded",children:"access_token"})," "]})]})]})}),e.jsx("div",{className:"rounded-lg border border-yellow-200 dark:border-yellow-900 bg-yellow-50 dark:bg-yellow-950/30 p-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Sa,{className:"h-4 w-4 text-yellow-600 dark:text-yellow-500 flex-shrink-0 mt-0.5",strokeWidth:2,fill:"none"}),e.jsxs("div",{className:"text-sm text-yellow-800 dark:text-yellow-300 space-y-1",children:[e.jsx("p",{className:"font-semibold",children:""}),e.jsxs("ul",{className:"list-disc list-inside space-y-0.5 text-xs",children:[e.jsx("li",{children:" Token"}),e.jsx("li",{children:" Token"})]})]})]})})]})]})]}),e.jsxs(ps,{children:[e.jsx(tt,{asChild:!0,children:e.jsxs("button",{className:"w-full text-center text-sm text-muted-foreground hover:text-foreground transition-colors underline-offset-4 hover:underline flex items-center justify-center gap-1",children:[e.jsx(cn,{className:"h-4 w-4",strokeWidth:2,fill:"none"}),""]})}),e.jsxs(rs,{children:[e.jsxs(cs,{children:[e.jsxs(ds,{className:"flex items-center gap-2",children:[e.jsx(cn,{className:"h-5 w-5 text-primary",strokeWidth:2,fill:"none"}),""]}),e.jsx(us,{children:""})]}),e.jsx("div",{className:"rounded-lg border bg-muted/50 p-4 space-y-2",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:""})}),e.jsxs(os,{children:[e.jsx(hs,{children:""}),e.jsx(ms,{onClick:()=>v(!1),children:""})]})]})]})]})})]}),e.jsx("div",{className:"absolute bottom-4 left-0 right-0 text-center text-xs text-muted-foreground",children:e.jsx("p",{children:Qy})})]})}const Bs=u.forwardRef(({className:n,...i},c)=>e.jsx("textarea",{className:X("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:c,...i}));Bs.displayName="Textarea";const jr=u.forwardRef(({className:n,orientation:i="horizontal",decorative:c=!0,...d},h)=>e.jsx(Up,{ref:h,decorative:c,orientation:i,className:X("shrink-0 bg-border",i==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",n),...d}));jr.displayName=Up.displayName;function d0({config:n,onChange:i}){const c=h=>{h.trim()&&!n.alias_names.includes(h.trim())&&i({...n,alias_names:[...n.alias_names,h.trim()]})},d=h=>{i({...n,alias_names:n.alias_names.filter((f,x)=>x!==h)})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(b,{htmlFor:"qq_account",children:"QQ *"}),e.jsx(ie,{id:"qq_account",type:"number",placeholder:"QQ",value:n.qq_account||"",onChange:h=>i({...n,qq_account:Number(h.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"QQ"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(b,{htmlFor:"nickname",children:" *"}),e.jsx(ie,{id:"nickname",placeholder:"",value:n.nickname,onChange:h=>i({...n,nickname:h.target.value})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(b,{children:""}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:n.alias_names.map((h,f)=>e.jsxs($e,{variant:"secondary",className:"gap-1",children:[h,e.jsx("button",{type:"button",onClick:()=>d(f),className:"ml-1 hover:text-destructive",children:e.jsx(dl,{className:"h-3 w-3"})})]},f))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ie,{id:"alias_input",placeholder:"",onKeyPress:h=>{h.key==="Enter"&&(c(h.target.value),h.target.value="")}}),e.jsx(N,{type:"button",variant:"outline",onClick:()=>{const h=document.getElementById("alias_input");h&&(c(h.value),h.value="")},children:""})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})]})}function u0({config:n,onChange:i}){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(b,{htmlFor:"personality",children:" *"}),e.jsx(Bs,{id:"personality",placeholder:"120",value:n.personality,onChange:c=>i({...n,personality:c.target.value}),rows:3}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(b,{htmlFor:"reply_style",children:" *"}),e.jsx(Bs,{id:"reply_style",placeholder:"",value:n.reply_style,onChange:c=>i({...n,reply_style:c.target.value}),rows:3}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(b,{htmlFor:"interest",children:" *"}),e.jsx(Bs,{id:"interest",placeholder:"",value:n.interest,onChange:c=>i({...n,interest:c.target.value}),rows:2}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsx(jr,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(b,{htmlFor:"plan_style",children:" *"}),e.jsx(Bs,{id:"plan_style",placeholder:"",value:n.plan_style,onChange:c=>i({...n,plan_style:c.target.value}),rows:4}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(b,{htmlFor:"private_plan_style",children:" *"}),e.jsx(Bs,{id:"private_plan_style",placeholder:"",value:n.private_plan_style,onChange:c=>i({...n,private_plan_style:c.target.value}),rows:3}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})]})}function m0({config:n,onChange:i}){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(b,{htmlFor:"emoji_chance",children:""}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[(n.emoji_chance*100).toFixed(0),"%"]})]}),e.jsx(ie,{id:"emoji_chance",type:"range",min:"0",max:"1",step:"0.1",value:n.emoji_chance,onChange:c=>i({...n,emoji_chance:Number(c.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(b,{htmlFor:"max_reg_num",children:""}),e.jsx(ie,{id:"max_reg_num",type:"number",min:"1",max:"200",value:n.max_reg_num,onChange:c=>i({...n,max_reg_num:Number(c.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(b,{htmlFor:"do_replace",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsx(Qe,{id:"do_replace",checked:n.do_replace,onCheckedChange:c=>i({...n,do_replace:c})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(b,{htmlFor:"check_interval",children:""}),e.jsx(ie,{id:"check_interval",type:"number",min:"1",max:"120",value:n.check_interval,onChange:c=>i({...n,check_interval:Number(c.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsx(jr,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(b,{htmlFor:"steal_emoji",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsx(Qe,{id:"steal_emoji",checked:n.steal_emoji,onCheckedChange:c=>i({...n,steal_emoji:c})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(b,{htmlFor:"content_filtration",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsx(Qe,{id:"content_filtration",checked:n.content_filtration,onCheckedChange:c=>i({...n,content_filtration:c})})]}),n.content_filtration&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(b,{htmlFor:"filtration_prompt",children:""}),e.jsx(ie,{id:"filtration_prompt",placeholder:"",value:n.filtration_prompt,onChange:c=>i({...n,filtration_prompt:c.target.value})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})]})}function h0({config:n,onChange:i}){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(b,{htmlFor:"enable_tool",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsx(Qe,{id:"enable_tool",checked:n.enable_tool,onCheckedChange:c=>i({...n,enable_tool:c})})]}),e.jsx(jr,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(b,{htmlFor:"enable_mood",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsx(Qe,{id:"enable_mood",checked:n.enable_mood,onCheckedChange:c=>i({...n,enable_mood:c})})]}),n.enable_mood&&e.jsxs("div",{className:"ml-6 space-y-6 border-l-2 border-primary/20 pl-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(b,{htmlFor:"mood_update_threshold",children:""}),e.jsx(ie,{id:"mood_update_threshold",type:"number",min:"0.1",max:"10",step:"0.1",value:n.mood_update_threshold||1,onChange:c=>i({...n,mood_update_threshold:Number(c.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(b,{htmlFor:"emotion_style",children:""}),e.jsx(Bs,{id:"emotion_style",placeholder:"",value:n.emotion_style||"",onChange:c=>i({...n,emotion_style:c.target.value}),rows:2}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})]}),e.jsx(jr,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(b,{htmlFor:"all_global",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsx(Qe,{id:"all_global",checked:n.all_global,onCheckedChange:c=>i({...n,all_global:c})})]})]})}function x0({config:n,onChange:i}){const[c,d]=u.useState(!1);return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"rounded-lg bg-blue-50 dark:bg-blue-950/30 border border-blue-200 dark:border-blue-800 p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-0.5",children:e.jsx("svg",{className:"h-5 w-5 text-blue-600 dark:text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{className:"flex-1 text-sm",children:[e.jsx("p",{className:"font-medium text-blue-900 dark:text-blue-100 mb-1",children:" (SiliconFlow)"}),e.jsx("p",{className:"text-blue-700 dark:text-blue-300 mb-2",children:" DeepSeek V3Qwen  API Key "}),e.jsxs("a",{href:"https://cloud.siliconflow.cn",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-blue-600 dark:text-blue-400 hover:underline font-medium",children:[" API Key",e.jsx(Xc,{className:"h-3 w-3"})]})]})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(b,{htmlFor:"siliconflow_api_key",children:"SiliconFlow API Key *"}),e.jsxs("div",{className:"relative",children:[e.jsx(ie,{id:"siliconflow_api_key",type:c?"text":"password",placeholder:"sk-...",value:n.api_key,onChange:h=>i({api_key:h.target.value}),className:"font-mono pr-10"}),e.jsx(N,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 hover:bg-transparent",onClick:()=>d(!c),children:c?e.jsx(xr,{className:"h-4 w-4 text-muted-foreground"}):e.jsx(Dt,{className:"h-4 w-4 text-muted-foreground"})})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" API "})]}),e.jsxs("div",{className:"rounded-lg bg-muted/50 p-4 text-sm space-y-2",children:[e.jsx("p",{className:"font-medium",children:""}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-muted-foreground ml-2",children:[e.jsx("li",{children:"DeepSeek V3 - "}),e.jsx("li",{children:"Qwen3 30B - "}),e.jsx("li",{children:"Qwen3 VL 30B - "}),e.jsx("li",{children:"SenseVoice - "}),e.jsx("li",{children:"BGE-M3 - "}),e.jsx("li",{children:" (LPMM)"})]})]}),e.jsx("div",{className:"rounded-lg border border-amber-200 dark:border-amber-800 bg-amber-50 dark:bg-amber-950/30 p-4",children:e.jsxs("p",{className:"text-sm text-amber-900 dark:text-amber-100",children:[e.jsx("span",{className:"font-medium",children:" "}),'"  " API ']})})]})}async function f0(){const n=await Te("/api/webui/config/bot",{method:"GET",headers:Ls()});if(!n.ok)throw new Error("Bot");const c=(await n.json()).config.bot||{};return{qq_account:c.qq_account||0,nickname:c.nickname||"",alias_names:c.alias_names||[]}}async function p0(){const n=await Te("/api/webui/config/bot",{method:"GET",headers:Ls()});if(!n.ok)throw new Error("");const c=(await n.json()).config.personality||{};return{personality:c.personality||"",reply_style:c.reply_style||"",interest:c.interest||"",plan_style:c.plan_style||"",private_plan_style:c.private_plan_style||""}}async function g0(){const n=await Te("/api/webui/config/bot",{method:"GET",headers:Ls()});if(!n.ok)throw new Error("");const c=(await n.json()).config.emoji||{};return{emoji_chance:c.emoji_chance??.4,max_reg_num:c.max_reg_num??40,do_replace:c.do_replace??!0,check_interval:c.check_interval??10,steal_emoji:c.steal_emoji??!0,content_filtration:c.content_filtration??!1,filtration_prompt:c.filtration_prompt||""}}async function j0(){const n=await Te("/api/webui/config/bot",{method:"GET",headers:Ls()});if(!n.ok)throw new Error("");const c=(await n.json()).config,d=c.tool||{},h=c.mood||{},f=c.jargon||{};return{enable_tool:d.enable_tool??!0,enable_mood:h.enable_mood??!1,mood_update_threshold:h.mood_update_threshold,emotion_style:h.emotion_style,all_global:f.all_global??!0}}async function v0(){const n=await Te("/api/webui/config/model",{method:"GET",headers:Ls()});if(!n.ok)throw new Error("");return{api_key:((await n.json()).config.api_providers||[]).find(f=>f.name==="SiliconFlow")?.api_key||""}}async function N0(n){const i=await Te("/api/webui/config/bot/section/bot",{method:"POST",headers:Ls(),body:JSON.stringify(n)});if(!i.ok){const c=await i.json();throw new Error(c.detail||"Bot")}return await i.json()}async function b0(n){const i=await Te("/api/webui/config/bot/section/personality",{method:"POST",headers:Ls(),body:JSON.stringify(n)});if(!i.ok){const c=await i.json();throw new Error(c.detail||"")}return await i.json()}async function y0(n){const i=await Te("/api/webui/config/bot/section/emoji",{method:"POST",headers:Ls(),body:JSON.stringify(n)});if(!i.ok){const c=await i.json();throw new Error(c.detail||"")}return await i.json()}async function w0(n){const i=[];i.push(Te("/api/webui/config/bot/section/tool",{method:"POST",headers:Ls(),body:JSON.stringify({enable_tool:n.enable_tool})})),i.push(Te("/api/webui/config/bot/section/jargon",{method:"POST",headers:Ls(),body:JSON.stringify({all_global:n.all_global})}));const c={enable_mood:n.enable_mood};n.enable_mood&&(c.mood_update_threshold=n.mood_update_threshold||1,c.emotion_style=n.emotion_style||""),i.push(Te("/api/webui/config/bot/section/mood",{method:"POST",headers:Ls(),body:JSON.stringify(c)}));const d=await Promise.all(i);for(const h of d)if(!h.ok){const f=await h.json();throw new Error(f.detail||"")}return{success:!0}}async function _0(n){const i=await Te("/api/webui/config/model",{method:"GET",headers:Ls()});if(!i.ok)throw new Error("");const d=(await i.json()).config,h=d.api_providers||[],f=h.findIndex(p=>p.name==="SiliconFlow");f>=0?h[f]={...h[f],api_key:n.api_key}:h.push({name:"SiliconFlow",base_url:"https://api.siliconflow.cn/v1",api_key:n.api_key,client_type:"openai",max_retry:3,timeout:120,retry_interval:5});const x={...d,api_providers:h},j=await Te("/api/webui/config/model",{method:"POST",headers:Ls(),body:JSON.stringify(x)});if(!j.ok){const p=await j.json();throw new Error(p.detail||"")}return await j.json()}async function rp(){const n=localStorage.getItem("access-token"),i=await Te("/api/webui/setup/complete",{method:"POST",headers:{Authorization:`Bearer ${n}`}});if(!i.ok){const c=await i.json();throw new Error(c.message||"")}return await i.json()}async function lo(){const n=await Te("/api/webui/system/restart",{method:"POST",headers:Ls()});if(!n.ok){const i=await n.json();throw new Error(i.detail||"")}return await n.json()}async function S0(){const n=await Te("/api/webui/system/status",{method:"GET",headers:Ls()});if(!n.ok){const i=await n.json();throw new Error(i.detail||"")}return await n.json()}function C0(){const n=ja(),{toast:i}=Vs(),[c,d]=u.useState(0),[h,f]=u.useState(!1),[x,j]=u.useState(!1),[p,w]=u.useState(!0),[v,y]=u.useState({qq_account:0,nickname:"",alias_names:[]}),[S,k]=u.useState({personality:"",reply_style:"",interest:"",plan_style:`1.****action****
2.
3.
4.
5.`,private_plan_style:`1.****action****
2.
3.`}),[O,Y]=u.useState({emoji_chance:.4,max_reg_num:40,do_replace:!0,check_interval:10,steal_emoji:!0,content_filtration:!1,filtration_prompt:""}),[L,R]=u.useState({enable_tool:!0,enable_mood:!1,mood_update_threshold:1,emotion_style:"",all_global:!0}),[H,D]=u.useState({api_key:""}),[C,$]=u.useState(!1),[G,T]=u.useState(""),M=[{id:"bot-basic",title:"Bot",description:"",icon:cr},{id:"personality",title:"",description:"",icon:Wc},{id:"emoji",title:"",description:"",icon:$u},{id:"other",title:"",description:"",icon:oi},{id:"siliconflow",title:"API",description:"API",icon:ug}],ne=(c+1)/M.length*100;u.useEffect(()=>{(async()=>{try{w(!0);const[K,E,se,_,me]=await Promise.all([f0(),p0(),g0(),j0(),v0()]);y(K),k(E),Y(se),R(_),D(me)}catch(K){i({title:"",description:K instanceof Error?K.message:"",variant:"destructive"})}finally{w(!1)}})()},[i]);const fe=async()=>{j(!0);try{switch(c){case 0:await N0(v);break;case 1:await b0(S);break;case 2:await y0(O);break;case 3:await w0(L);break;case 4:await _0(H);break}return i({title:"",description:`${M[c].title}`}),!0}catch(A){return i({title:"",description:A instanceof Error?A.message:"",variant:"destructive"}),!1}finally{j(!1)}},_e=async()=>{await fe()&&c<M.length-1&&d(c+1)},Se=()=>{c>0&&d(c-1)},je=async()=>{f(!0),$(!0);try{if(T("API..."),!await fe()){f(!1),$(!1);return}T("..."),await rp(),T("..."),await lo(),i({title:"",description:"..."}),T("...");const K=60;let E=0,se=!1;for(;E<K&&!se;){await new Promise(_=>setTimeout(_,1e3));try{(await S0()).running&&(se=!0,T("..."))}catch{E++}}if(!se)throw new Error(",");setTimeout(()=>{n({to:"/"})},1e3)}catch(A){$(!1),i({title:"",description:A instanceof Error?A.message:"",variant:"destructive"})}finally{f(!1)}},ye=async()=>{try{await rp(),n({to:"/"})}catch(A){i({title:"",description:A instanceof Error?A.message:"",variant:"destructive"})}},be=()=>{switch(c){case 0:return e.jsx(d0,{config:v,onChange:y});case 1:return e.jsx(u0,{config:S,onChange:k});case 2:return e.jsx(m0,{config:O,onChange:Y});case 3:return e.jsx(h0,{config:L,onChange:R});case 4:return e.jsx(x0,{config:H,onChange:D});default:return null}};return e.jsxs("div",{className:"relative flex min-h-screen flex-col items-center justify-center overflow-hidden bg-gradient-to-br from-primary/5 via-background to-secondary/5 p-4 md:p-6",children:[C&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-background/80 backdrop-blur-sm",children:e.jsxs("div",{className:"mx-auto flex max-w-md flex-col items-center space-y-6 rounded-lg border bg-card p-8 text-center shadow-lg",children:[e.jsx("div",{className:"flex h-20 w-20 items-center justify-center rounded-full bg-primary/10",children:e.jsx(kt,{className:"h-10 w-10 animate-spin text-primary"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-2xl font-bold",children:""}),e.jsx("p",{className:"text-muted-foreground",children:G})]}),e.jsx("div",{className:"w-full",children:e.jsx("div",{className:"h-2 w-full overflow-hidden rounded-full bg-secondary",children:e.jsx("div",{className:"h-full w-full animate-pulse bg-primary",style:{animation:"pulse 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite"}})})}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"..."})]})}),e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute left-1/4 top-1/4 h-64 w-64 md:h-96 md:w-96 rounded-full bg-primary/5 blur-3xl"}),e.jsx("div",{className:"absolute right-1/4 bottom-1/4 h-64 w-64 md:h-96 md:w-96 rounded-full bg-secondary/5 blur-3xl"})]}),p?e.jsxs("div",{className:"relative z-10 text-center",children:[e.jsx("div",{className:"mx-auto mb-4 flex h-16 w-16 items-center justify-center",children:e.jsx("div",{className:"h-12 w-12 animate-spin rounded-full border-4 border-primary border-t-transparent"})}),e.jsx("p",{className:"text-lg font-medium",children:"..."}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:""})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative z-10 w-full max-w-4xl",children:[e.jsxs("div",{className:"mb-6 md:mb-8 text-center",children:[e.jsx("div",{className:"mx-auto mb-4 flex h-12 w-12 md:h-16 md:w-16 items-center justify-center rounded-2xl bg-primary/10",children:e.jsx(Nb,{className:"h-6 w-6 md:h-8 md:w-8 text-primary",strokeWidth:2,fill:"none"})}),e.jsx("h1",{className:"mb-2 text-2xl md:text-3xl font-bold",children:""}),e.jsxs("p",{className:"text-sm md:text-base text-muted-foreground",children:[" ",Ju," "]})]}),e.jsxs("div",{className:"mb-6 md:mb-8",children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between text-xs md:text-sm",children:[e.jsxs("span",{className:"text-muted-foreground",children:[" ",c+1," / ",M.length]}),e.jsxs("span",{className:"font-medium text-primary",children:[Math.round(ne),"%"]})]}),e.jsx(wr,{value:ne,className:"h-2"})]}),e.jsx("div",{className:"mb-6 md:mb-8 flex justify-between",children:M.map((A,K)=>{const E=A.icon;return e.jsxs("div",{className:X("flex flex-1 flex-col items-center gap-1 md:gap-2",K<M.length-1&&"relative"),children:[K<M.length-1&&e.jsx("div",{className:X("absolute left-1/2 top-3 md:top-4 h-0.5 w-full",K<c?"bg-primary":"bg-border")}),e.jsx("div",{className:X("relative z-10 flex h-6 w-6 md:h-8 md:w-8 items-center justify-center rounded-full border-2 transition-all",K===c||K<c?"border-primary bg-primary text-primary-foreground":"border-border bg-background text-muted-foreground"),children:K<c?e.jsx(fa,{className:"h-3 w-3 md:h-4 md:w-4",strokeWidth:2.5,fill:"none"}):e.jsx(E,{className:"h-3 w-3 md:h-4 md:w-4"})}),e.jsx("span",{className:X("text-[10px] md:text-xs text-center max-w-[60px] md:max-w-none truncate md:whitespace-normal",K===c?"font-medium text-foreground":"text-muted-foreground"),title:A.title,children:A.title})]},A.id)})}),e.jsx(Ze,{className:"mb-6 md:mb-8 shadow-lg",children:e.jsx(Ts,{className:"p-4 md:p-8",children:e.jsxs("div",{className:"min-h-[300px] md:min-h-[400px]",children:[e.jsxs("div",{className:"mb-4 md:mb-6",children:[e.jsx("h2",{className:"mb-2 text-xl md:text-2xl font-semibold",children:M[c].title}),e.jsx("p",{className:"text-sm md:text-base text-muted-foreground",children:M[c].description})]}),e.jsx(ss,{className:"h-[400px] md:h-[500px]",children:e.jsx("div",{className:"pr-2",children:be()})})]})})}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-3 sm:gap-0",children:[e.jsx(N,{variant:"outline",onClick:Se,disabled:c===0||x,className:"w-full sm:w-auto order-2 sm:order-1",children:""}),e.jsxs("div",{className:"flex gap-2 w-full sm:w-auto order-1 sm:order-2",children:[e.jsxs(ps,{children:[e.jsx(tt,{asChild:!0,children:e.jsxs(N,{variant:"ghost",className:"flex-1 sm:flex-none gap-2",disabled:x||h,children:[e.jsx(bb,{className:"h-4 w-4",strokeWidth:2,fill:"none"}),""]})}),e.jsxs(rs,{children:[e.jsxs(cs,{children:[e.jsx(ds,{children:""}),e.jsx(us,{children:""})]}),e.jsxs(os,{children:[e.jsx(hs,{children:""}),e.jsx(ms,{onClick:ye,children:""})]})]})]}),c===M.length-1?e.jsx(N,{onClick:je,disabled:h||x,className:"flex-1 sm:flex-none",children:h||x?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}),x?"...":"..."]}):e.jsxs(e.Fragment,{children:["",e.jsx(fa,{className:"ml-2 h-4 w-4",strokeWidth:2,fill:"none"})]})}):e.jsx(N,{onClick:_e,disabled:x,className:"flex-1 sm:flex-none",children:x?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}),"..."]}):e.jsxs(e.Fragment,{children:["",e.jsx(yb,{className:"ml-2 h-4 w-4",strokeWidth:2,fill:"none"})]})})]})]})]}),e.jsx("div",{className:"relative z-10 mt-6 md:mt-8 text-center text-xs text-muted-foreground",children:e.jsx("p",{children:""})})]})]})}function zg(){const n=ja();return e.jsx("div",{className:"flex min-h-screen items-center justify-center bg-background p-4",children:e.jsxs("div",{className:"w-full max-w-2xl text-center",children:[e.jsxs("div",{className:"relative mb-8",children:[e.jsx("h1",{className:"text-[150px] font-black leading-none text-primary/10 select-none sm:text-[200px]",children:"404"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx(zt,{className:"h-20 w-20 text-primary/30 sm:h-24 sm:w-24"})})]}),e.jsxs("div",{className:"space-y-4 mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground sm:text-3xl",children:""}),e.jsx("p",{className:"text-base text-muted-foreground sm:text-lg max-w-md mx-auto",children:" URL "})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[e.jsxs(N,{size:"lg",onClick:()=>n({to:"/"}),className:"gap-2 w-full sm:w-auto",children:[e.jsx(ao,{className:"h-4 w-4"}),""]}),e.jsxs(N,{size:"lg",variant:"outline",onClick:()=>window.history.back(),className:"gap-2 w-full sm:w-auto",children:[e.jsx(ii,{className:"h-4 w-4"}),""]})]}),e.jsx("div",{className:"mt-12 pt-8 border-t border-border",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:""})})]})})}const Be=lb,He=nb,Le=u.forwardRef(({className:n,children:i,...c},d)=>e.jsxs(Xp,{ref:d,className:X("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",n),...c,children:[i,e.jsx(WN,{asChild:!0,children:e.jsx(Bl,{className:"h-4 w-4 opacity-50"})})]}));Le.displayName=Xp.displayName;const Ag=u.forwardRef(({className:n,...i},c)=>e.jsx(Kp,{ref:c,className:X("flex cursor-default items-center justify-center py-1",n),...i,children:e.jsx(pr,{className:"h-4 w-4"})}));Ag.displayName=Kp.displayName;const Mg=u.forwardRef(({className:n,...i},c)=>e.jsx(Jp,{ref:c,className:X("flex cursor-default items-center justify-center py-1",n),...i,children:e.jsx(Bl,{className:"h-4 w-4"})}));Mg.displayName=Jp.displayName;const Ue=u.forwardRef(({className:n,children:i,position:c="popper",...d},h)=>e.jsx(eb,{children:e.jsxs(Zp,{ref:h,className:X("relative z-[100] max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-hidden rounded-md border border-border bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",c==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:c,...d,children:[e.jsx(Ag,{}),e.jsx(sb,{className:X("p-1",c==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:i}),e.jsx(Mg,{})]})}));Ue.displayName=Zp.displayName;const k0=u.forwardRef(({className:n,...i},c)=>e.jsx(Ip,{ref:c,className:X("px-2 py-1.5 text-sm font-semibold",n),...i}));k0.displayName=Ip.displayName;const te=u.forwardRef(({className:n,children:i,...c},d)=>e.jsxs(Pp,{ref:d,className:X("relative flex w-full cursor-default select-none items-center rounded-sm py-2 pl-2 pr-8 text-sm outline-none bg-white dark:bg-gray-900 hover:bg-gray-100 dark:hover:bg-gray-800 focus:bg-gray-100 dark:focus:bg-gray-800 data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...c,children:[e.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(tb,{children:e.jsx($t,{className:"h-4 w-4"})})}),e.jsx(ab,{children:i})]}));te.displayName=Pp.displayName;const T0=u.forwardRef(({className:n,...i},c)=>e.jsx(Wp,{ref:c,className:X("-mx-1 my-1 h-px bg-muted",n),...i}));T0.displayName=Wp.displayName;const Ua=RN,Ba=LN,ka=u.forwardRef(({className:n,align:i="center",sideOffset:c=4,...d},h)=>e.jsx(ON,{children:e.jsx(Bp,{ref:h,align:i,sideOffset:c,className:X("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",n),...d})}));ka.displayName=Bp.displayName;const ql="/api/webui/config";async function cp(){const i=await(await Te(`${ql}/bot`)).json();if(!i.success)throw new Error("");return i.config}async function ni(){const i=await(await Te(`${ql}/model`)).json();if(!i.success)throw new Error("");return i.config}async function op(n){const c=await(await Te(`${ql}/bot`,{method:"POST",body:JSON.stringify(n)})).json();if(!c.success)throw new Error(c.message||"")}async function E0(){const i=await(await Te(`${ql}/bot/raw`)).json();if(!i.success)throw new Error("");return i.content}async function z0(n){const c=await(await Te(`${ql}/bot/raw`,{method:"POST",body:JSON.stringify({raw_content:n})})).json();if(!c.success)throw new Error(c.message||"")}async function to(n){const c=await(await Te(`${ql}/model`,{method:"POST",body:JSON.stringify(n)})).json();if(!c.success)throw new Error(c.message||"")}async function A0(n,i){const d=await(await Te(`${ql}/bot/section/${n}`,{method:"POST",body:JSON.stringify(i)})).json();if(!d.success)throw new Error(d.message||` ${n} `)}async function qu(n,i){const d=await(await Te(`${ql}/model/section/${n}`,{method:"POST",body:JSON.stringify(i)})).json();if(!d.success)throw new Error(d.message||` ${n} `)}async function M0(n,i="openai",c="/models"){const d=new URLSearchParams({provider_name:n,parser:i,endpoint:c}),h=await Te(`/api/webui/models/list?${d}`);if(!h.ok){const x=await h.json().catch(()=>({}));throw new Error(x.detail||` (${h.status})`)}const f=await h.json();if(!f.success)throw new Error("");return f.models}async function D0(n){const i=new URLSearchParams({provider_name:n}),c=await Te(`/api/webui/models/test-connection-by-name?${i}`,{method:"POST"});if(!c.ok){const d=await c.json().catch(()=>({}));throw new Error(d.detail||` (${c.status})`)}return await c.json()}const O0=ci("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),cl=u.forwardRef(({className:n,variant:i,...c},d)=>e.jsx("div",{ref:d,role:"alert",className:X(O0({variant:i}),n),...c}));cl.displayName="Alert";const R0=u.forwardRef(({className:n,...i},c)=>e.jsx("h5",{ref:c,className:X("mb-1 font-medium leading-none tracking-tight",n),...i}));R0.displayName="AlertTitle";const ol=u.forwardRef(({className:n,...i},c)=>e.jsx("div",{ref:c,className:X("text-sm [&_p]:leading-relaxed",n),...i}));ol.displayName="AlertDescription";function Pu({onRestartComplete:n,onRestartFailed:i}){const[c,d]=u.useState(0),[h,f]=u.useState("restarting"),[x,j]=u.useState(0),[p,w]=u.useState(0);u.useEffect(()=>{const S=setInterval(()=>{d(Y=>Y>=90?Y:Y+1)},200),k=setInterval(()=>{j(Y=>Y+1)},1e3),O=setTimeout(()=>{f("checking"),v()},3e3);return()=>{clearInterval(S),clearInterval(k),clearTimeout(O)}},[]);const v=()=>{const k=async()=>{try{if(w(Y=>Y+1),(await fetch("/api/webui/system/status",{method:"GET",headers:{"Content-Type":"application/json"},signal:AbortSignal.timeout(3e3)})).ok)d(100),f("success"),setTimeout(()=>{n?.()},1500);else throw new Error("Status check failed")}catch{p<60?setTimeout(k,2e3):(f("failed"),i?.())}};k()},y=S=>{const k=Math.floor(S/60),O=S%60;return`${k}:${O.toString().padStart(2,"0")}`};return e.jsx("div",{className:"fixed inset-0 bg-background/95 backdrop-blur-sm z-50 flex items-center justify-center",children:e.jsxs("div",{className:"max-w-md w-full mx-4 space-y-8",children:[e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[h==="restarting"&&e.jsxs(e.Fragment,{children:[e.jsx(kt,{className:"h-16 w-16 text-primary animate-spin"}),e.jsx("h2",{className:"text-2xl font-bold",children:""}),e.jsx("p",{className:"text-muted-foreground text-center",children:"..."})]}),h==="checking"&&e.jsxs(e.Fragment,{children:[e.jsx(kt,{className:"h-16 w-16 text-primary animate-spin"}),e.jsx("h2",{className:"text-2xl font-bold",children:""}),e.jsxs("p",{className:"text-muted-foreground text-center",children:["... ( ",p,"/60)"]})]}),h==="success"&&e.jsxs(e.Fragment,{children:[e.jsx(fa,{className:"h-16 w-16 text-green-500"}),e.jsx("h2",{className:"text-2xl font-bold",children:""}),e.jsx("p",{className:"text-muted-foreground text-center",children:"..."})]}),h==="failed"&&e.jsxs(e.Fragment,{children:[e.jsx(Sa,{className:"h-16 w-16 text-destructive"}),e.jsx("h2",{className:"text-2xl font-bold",children:""}),e.jsx("p",{className:"text-muted-foreground text-center",children:""})]})]}),h!=="failed"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(wr,{value:c,className:"h-2"}),e.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground",children:[e.jsxs("span",{children:[c,"%"]}),e.jsxs("span",{children:[": ",y(x)]})]})]}),e.jsx("div",{className:"bg-muted/50 rounded-lg p-4 space-y-2",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:[h==="restarting"&&" ...",h==="checking"&&" ...",h==="success"&&" ",h==="failed"&&" "]})}),h==="failed"&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>window.location.reload(),className:"flex-1 px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90",children:""}),e.jsx("button",{onClick:()=>{f("checking"),w(0),v()},className:"flex-1 px-4 py-2 bg-secondary text-secondary-foreground rounded-md hover:bg-secondary/90",children:""})]})]})})}const L0={name:"toml",startState:function(){return{inString:!1,stringType:"",lhs:!0,inArray:0}},token:function(n,i){let c;if(!i.inString&&(c=n.match(/^('''|"""|'|")/))&&(i.stringType=c[0],i.inString=!0),n.sol()&&!i.inString&&i.inArray===0&&(i.lhs=!0),i.inString){for(;i.inString;)if(n.match(i.stringType))i.inString=!1;else if(n.peek()==="\\")n.next(),n.next();else{if(n.eol())break;n.match(/^.[^\\\"\']*/)}return i.lhs?"property":"string"}else{if(i.inArray&&n.peek()==="]")return n.next(),i.inArray--,"bracket";if(i.lhs&&n.peek()==="["&&n.skipTo("]"))return n.next(),n.peek()==="]"&&n.next(),"atom";if(n.peek()==="#")return n.skipToEnd(),"comment";if(n.eatSpace())return null;if(i.lhs&&n.eatWhile(function(d){return d!="="&&d!=" "}))return"property";if(i.lhs&&n.peek()==="=")return n.next(),i.lhs=!1,null;if(!i.lhs&&n.match(/^\d\d\d\d[\d\-\:\.T]*Z/))return"atom";if(!i.lhs&&(n.match("true")||n.match("false")))return"atom";if(!i.lhs&&n.peek()==="[")return i.inArray++,n.next(),"bracket";if(!i.lhs&&n.match(/^\-?\d+(?:\.\d+)?/))return"number";n.eatSpace()||n.next()}return null},languageData:{commentTokens:{line:"#"}}},U0={python:[Qb()],json:[Yb(),Xb()],toml:[$b.define(L0)],text:[]};function B0({value:n,onChange:i,language:c="text",readOnly:d=!1,height:h="400px",minHeight:f,maxHeight:x,placeholder:j,theme:p="dark",className:w=""}){const[v,y]=u.useState(!1);if(u.useEffect(()=>{y(!0)},[]),!v)return e.jsx("div",{className:`rounded-md border bg-muted animate-pulse ${w}`,style:{height:h,minHeight:f,maxHeight:x}});const S=[...U0[c]||[],If.lineWrapping];return d&&S.push(If.editable.of(!1)),e.jsx("div",{className:`rounded-md overflow-hidden border ${w}`,children:e.jsx(Kb,{value:n,height:h,minHeight:f,maxHeight:x,theme:p==="dark"?Jb:void 0,extensions:S,onChange:i,placeholder:j,basicSetup:{lineNumbers:!0,highlightActiveLineGutter:!0,highlightSpecialChars:!0,history:!0,foldGutter:!0,drawSelection:!0,dropCursor:!0,allowMultipleSelections:!0,indentOnInput:!0,syntaxHighlighting:!0,bracketMatching:!0,closeBrackets:!0,autocompletion:!0,rectangularSelection:!0,crosshairCursor:!0,highlightActiveLine:!0,highlightSelectionMatches:!0,closeBracketsKeymap:!0,defaultKeymap:!0,searchKeymap:!0,historyKeymap:!0,foldKeymap:!0,completionKeymap:!0,lintKeymap:!0}})})}function H0(){const[n,i]=u.useState(!0),[c,d]=u.useState(!1),[h,f]=u.useState(!1),[x,j]=u.useState(!1),[p,w]=u.useState(!1),[v,y]=u.useState(!1),[S,k]=u.useState("visual"),[O,Y]=u.useState(""),[L,R]=u.useState(!1),{toast:H}=Vs(),[D,C]=u.useState(null),[$,G]=u.useState(null),[T,M]=u.useState(null),[ne,fe]=u.useState(null),[_e,Se]=u.useState(null),[je,ye]=u.useState(null),[be,A]=u.useState(null),[K,E]=u.useState(null),[se,_]=u.useState(null),[me,re]=u.useState(null),[le,pe]=u.useState(null),[Ne,he]=u.useState(null),[Q,P]=u.useState(null),[q,W]=u.useState(null),[Ce,Me]=u.useState(null),[ce,De]=u.useState(null),[Fs,Qs]=u.useState(null),[ue,Ee]=u.useState(null),as=u.useRef(null),Ke=u.useRef(!0),lt=u.useRef({}),Ot=u.useCallback(async()=>{try{const ke=await E0();Y(ke),R(!1)}catch(ke){H({variant:"destructive",title:"",description:ke instanceof Error?ke.message:""})}},[H]),bt=u.useCallback(async()=>{try{i(!0);const ke=await cp();lt.current=ke,C(ke.bot),G(ke.personality);const ve=ke.chat;ve.talk_value_rules||(ve.talk_value_rules=[]),M(ve),fe(ke.expression),Se(ke.emoji),ye(ke.memory),A(ke.tool),E(ke.mood),_(ke.voice),re(ke.lpmm_knowledge),pe(ke.keyword_reaction),he(ke.response_post_process),P(ke.chinese_typo),W(ke.response_splitter),Me(ke.log),De(ke.debug),Qs(ke.maim_message),Ee(ke.telemetry),j(!1),Ke.current=!1,await Ot()}catch(ke){console.error(":",ke),H({title:"",description:"",variant:"destructive"})}finally{i(!1)}},[H,Ot]);u.useEffect(()=>{bt()},[bt]);const Pe=u.useCallback(async(ke,ve)=>{if(!Ke.current)try{f(!0),await A0(ke,ve),j(!1)}catch(is){console.error(` ${ke} :`,is),j(!0)}finally{f(!1)}},[]),U=u.useCallback((ke,ve)=>{Ke.current||(j(!0),as.current&&clearTimeout(as.current),as.current=setTimeout(()=>{Pe(ke,ve)},2e3))},[Pe]);u.useEffect(()=>{D&&!Ke.current&&U("bot",D)},[D,U]),u.useEffect(()=>{$&&!Ke.current&&U("personality",$)},[$,U]),u.useEffect(()=>{T&&!Ke.current&&U("chat",T)},[T,U]),u.useEffect(()=>{ne&&!Ke.current&&U("expression",ne)},[ne,U]),u.useEffect(()=>{_e&&!Ke.current&&U("emoji",_e)},[_e,U]),u.useEffect(()=>{je&&!Ke.current&&U("memory",je)},[je,U]),u.useEffect(()=>{be&&!Ke.current&&U("tool",be)},[be,U]),u.useEffect(()=>{K&&!Ke.current&&U("mood",K)},[K,U]),u.useEffect(()=>{se&&!Ke.current&&U("voice",se)},[se,U]),u.useEffect(()=>{me&&!Ke.current&&U("lpmm_knowledge",me)},[me,U]),u.useEffect(()=>{le&&!Ke.current&&U("keyword_reaction",le)},[le,U]),u.useEffect(()=>{Ne&&!Ke.current&&U("response_post_process",Ne)},[Ne,U]),u.useEffect(()=>{Q&&!Ke.current&&U("chinese_typo",Q)},[Q,U]),u.useEffect(()=>{q&&!Ke.current&&U("response_splitter",q)},[q,U]),u.useEffect(()=>{Ce&&!Ke.current&&U("log",Ce)},[Ce,U]),u.useEffect(()=>{ce&&!Ke.current&&U("debug",ce)},[ce,U]),u.useEffect(()=>{Fs&&!Ke.current&&U("maim_message",Fs)},[Fs,U]),u.useEffect(()=>{ue&&!Ke.current&&U("telemetry",ue)},[ue,U]);const Re=async()=>{try{d(!0),await z0(O),j(!1),R(!1),H({title:"",description:""}),await bt()}catch(ke){R(!0),H({variant:"destructive",title:"",description:ke instanceof Error?ke.message:""})}finally{d(!1)}},ze=async ke=>{if(x){H({variant:"destructive",title:"",description:""});return}if(k(ke),ke==="source")await Ot();else try{const ve=await cp();lt.current=ve,C(ve.bot),G(ve.personality);const is=ve.chat;is.talk_value_rules||(is.talk_value_rules=[]),M(is),fe(ve.expression),Se(ve.emoji),ye(ve.memory),A(ve.tool),E(ve.mood),_(ve.voice),re(ve.lpmm_knowledge),pe(ve.keyword_reaction),he(ve.response_post_process),P(ve.chinese_typo),W(ve.response_splitter),Me(ve.log),De(ve.debug),Qs(ve.maim_message),Ee(ve.telemetry),j(!1)}catch(ve){console.error(":",ve),H({title:"",description:"",variant:"destructive"})}},Ye=async()=>{try{d(!0),as.current&&clearTimeout(as.current);const ke={...lt.current,bot:D,personality:$,chat:T,expression:ne,emoji:_e,memory:je,tool:be,mood:K,voice:se,lpmm_knowledge:me,keyword_reaction:le,response_post_process:Ne,chinese_typo:Q,response_splitter:q,log:Ce,debug:ce,maim_message:Fs,telemetry:ue};await op(ke),j(!1),H({title:"",description:""})}catch(ke){console.error(":",ke),H({title:"",description:ke.message,variant:"destructive"})}finally{d(!1)}},zs=async()=>{try{w(!0),lo().catch(()=>{}),y(!0)}catch(ke){console.error(":",ke),y(!1),H({title:"",description:"",variant:"destructive"}),w(!1)}},We=async()=>{try{d(!0),as.current&&clearTimeout(as.current);const ke={...lt.current,bot:D,personality:$,chat:T,expression:ne,emoji:_e,memory:je,tool:be,mood:K,voice:se,lpmm_knowledge:me,keyword_reaction:le,response_post_process:Ne,chinese_typo:Q,response_splitter:q,log:Ce,debug:ce,maim_message:Fs,telemetry:ue};await op(ke),j(!1),H({title:"",description:"..."}),await new Promise(ve=>setTimeout(ve,500)),await zs()}catch(ke){console.error(":",ke),H({title:"",description:ke.message,variant:"destructive"})}finally{d(!1)}},nt=()=>{localStorage.removeItem("access-token"),window.location.href="/auth"},vs=()=>{y(!1),w(!1),H({title:"",description:"",variant:"destructive"})};return n?e.jsx(ss,{className:"h-full",children:e.jsx("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("p",{className:"text-muted-foreground",children:"..."})})})}):e.jsx(ss,{className:"h-full",children:e.jsxs("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col gap-3 sm:gap-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl font-bold",children:""}),e.jsx("p",{className:"text-muted-foreground mt-1 text-xs sm:text-sm",children:""})]}),e.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[e.jsxs(N,{onClick:S==="visual"?Ye:Re,disabled:c||h||!x||p,size:"sm",variant:"outline",className:"w-20 sm:w-24",children:[e.jsx(yr,{className:"h-4 w-4 flex-shrink-0",strokeWidth:2,fill:"none"}),e.jsx("span",{className:"ml-1 truncate text-xs sm:text-sm",children:c?"":h?"":x?"":""})]}),e.jsxs(ps,{children:[e.jsx(tt,{asChild:!0,children:e.jsxs(N,{disabled:c||h||p,size:"sm",className:"w-20 sm:w-28",children:[e.jsx(br,{className:"h-4 w-4 flex-shrink-0"}),e.jsx("span",{className:"ml-1 truncate text-xs sm:text-sm",children:p?"":x?"":""})]})}),e.jsxs(rs,{children:[e.jsxs(cs,{children:[e.jsx(ds,{children:""}),e.jsx(us,{asChild:!0,children:e.jsx("div",{children:e.jsx("p",{children:x?",":","})})})]}),e.jsxs(os,{children:[e.jsx(hs,{children:""}),e.jsx(ms,{onClick:x?We:zs,children:x?"":""})]})]})]})]})]}),e.jsx("div",{className:"flex",children:e.jsx(Ca,{value:S,onValueChange:ke=>ze(ke),className:"w-full",children:e.jsxs(pa,{className:"h-8 sm:h-9 w-full grid grid-cols-2",children:[e.jsxs(ns,{value:"visual",className:"text-xs sm:text-sm",children:[e.jsx(wb,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1"}),""]}),e.jsxs(ns,{value:"source",className:"text-xs sm:text-sm",children:[e.jsx(_b,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1"}),""]})]})})})]}),e.jsxs(cl,{children:[e.jsx(La,{className:"h-4 w-4"}),e.jsxs(ol,{children:["",e.jsx("strong",{children:""}),'""']})]}),S==="source"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs(cl,{children:[e.jsx(La,{className:"h-4 w-4"}),e.jsxs(ol,{children:[e.jsx("strong",{children:""})," TOML  TOML ",L&&e.jsx("span",{className:"text-destructive font-semibold ml-2",children:"  TOML "})]})]}),e.jsx(B0,{value:O,onChange:ke=>{Y(ke),j(!0),L&&R(!1)},language:"toml",theme:"dark",height:"calc(100vh - 280px)",minHeight:"500px",placeholder:"TOML "})]}),S==="visual"&&e.jsx(e.Fragment,{children:e.jsxs(Ca,{defaultValue:"bot",className:"w-full",children:[e.jsxs(pa,{className:"flex flex-wrap h-auto gap-1 p-1 sm:grid sm:grid-cols-5 lg:grid-cols-10",children:[e.jsx(ns,{value:"bot",className:"text-xs px-2 py-1.5 sm:px-3 sm:py-2 data-[state=active]:shadow-sm",children:""}),e.jsx(ns,{value:"personality",className:"text-xs px-2 py-1.5 sm:px-3 sm:py-2 data-[state=active]:shadow-sm",children:""}),e.jsx(ns,{value:"chat",className:"text-xs px-2 py-1.5 sm:px-3 sm:py-2 data-[state=active]:shadow-sm",children:""}),e.jsx(ns,{value:"expression",className:"text-xs px-2 py-1.5 sm:px-3 sm:py-2 data-[state=active]:shadow-sm",children:""}),e.jsx(ns,{value:"features",className:"text-xs px-2 py-1.5 sm:px-3 sm:py-2 data-[state=active]:shadow-sm",children:""}),e.jsx(ns,{value:"processing",className:"text-xs px-2 py-1.5 sm:px-3 sm:py-2 data-[state=active]:shadow-sm",children:""}),e.jsx(ns,{value:"mood",className:"text-xs px-2 py-1.5 sm:px-3 sm:py-2 data-[state=active]:shadow-sm",children:""}),e.jsx(ns,{value:"voice",className:"text-xs px-2 py-1.5 sm:px-3 sm:py-2 data-[state=active]:shadow-sm",children:""}),e.jsx(ns,{value:"lpmm",className:"text-xs px-2 py-1.5 sm:px-3 sm:py-2 data-[state=active]:shadow-sm",children:""}),e.jsx(ns,{value:"other",className:"text-xs px-2 py-1.5 sm:px-3 sm:py-2 data-[state=active]:shadow-sm",children:""})]}),e.jsx(Es,{value:"bot",className:"space-y-4",children:D&&e.jsx(q0,{config:D,onChange:C})}),e.jsx(Es,{value:"personality",className:"space-y-4",children:$&&e.jsx(G0,{config:$,onChange:G})}),e.jsx(Es,{value:"chat",className:"space-y-4",children:T&&e.jsx(V0,{config:T,onChange:M})}),e.jsx(Es,{value:"expression",className:"space-y-4",children:ne&&e.jsx($0,{config:ne,onChange:fe})}),e.jsx(Es,{value:"features",className:"space-y-4",children:_e&&je&&be&&e.jsx(Q0,{emojiConfig:_e,memoryConfig:je,toolConfig:be,onEmojiChange:Se,onMemoryChange:ye,onToolChange:A})}),e.jsx(Es,{value:"processing",className:"space-y-4",children:le&&Ne&&Q&&q&&e.jsx(Y0,{keywordReactionConfig:le,responsePostProcessConfig:Ne,chineseTypoConfig:Q,responseSplitterConfig:q,onKeywordReactionChange:pe,onResponsePostProcessChange:he,onChineseTypoChange:P,onResponseSplitterChange:W})}),e.jsx(Es,{value:"mood",className:"space-y-4",children:K&&e.jsx(X0,{config:K,onChange:E})}),e.jsx(Es,{value:"voice",className:"space-y-4",children:se&&e.jsx(K0,{config:se,onChange:_})}),e.jsx(Es,{value:"lpmm",className:"space-y-4",children:me&&e.jsx(J0,{config:me,onChange:re})}),e.jsxs(Es,{value:"other",className:"space-y-4",children:[Ce&&e.jsx(Z0,{config:Ce,onChange:Me}),ce&&e.jsx(I0,{config:ce,onChange:De}),Fs&&e.jsx(P0,{config:Fs,onChange:Qs}),ue&&e.jsx(W0,{config:ue,onChange:Ee})]})]})}),v&&e.jsx(Pu,{onRestartComplete:nt,onRestartFailed:vs})]})})}function q0({config:n,onChange:i}){const c=()=>{i({...n,platforms:[...n.platforms,""]})},d=p=>{i({...n,platforms:n.platforms.filter((w,v)=>v!==p)})},h=(p,w)=>{const v=[...n.platforms];v[p]=w,i({...n,platforms:v})},f=()=>{i({...n,alias_names:[...n.alias_names,""]})},x=p=>{i({...n,alias_names:n.alias_names.filter((w,v)=>v!==p)})},j=(p,w)=>{const v=[...n.alias_names];v[p]=w,i({...n,alias_names:v})};return e.jsx("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:""}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"platform",children:""}),e.jsx(ie,{id:"platform",value:n.platform,onChange:p=>i({...n,platform:p.target.value}),placeholder:"qq"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"qq_account",children:"QQ"}),e.jsx(ie,{id:"qq_account",value:n.qq_account,onChange:p=>i({...n,qq_account:p.target.value}),placeholder:"123456789"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"nickname",children:""}),e.jsx(ie,{id:"nickname",value:n.nickname,onChange:p=>i({...n,nickname:p.target.value}),placeholder:""})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(b,{children:""}),e.jsxs(N,{onClick:c,size:"sm",variant:"outline",children:[e.jsx(ot,{className:"h-4 w-4 mr-1"}),""]})]}),e.jsxs("div",{className:"space-y-2",children:[n.platforms.map((p,w)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ie,{value:p,onChange:v=>h(w,v.target.value),placeholder:"wx:114514"}),e.jsxs(ps,{children:[e.jsx(tt,{asChild:!0,children:e.jsx(N,{size:"icon",variant:"outline",children:e.jsx(ts,{className:"h-4 w-4"})})}),e.jsxs(rs,{children:[e.jsxs(cs,{children:[e.jsx(ds,{children:""}),e.jsxs(us,{children:[' "',p||"()",'" ']})]}),e.jsxs(os,{children:[e.jsx(hs,{children:""}),e.jsx(ms,{onClick:()=>d(w),children:""})]})]})]})]},w)),n.platforms.length===0&&e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(b,{children:""}),e.jsxs(N,{onClick:f,size:"sm",variant:"outline",children:[e.jsx(ot,{className:"h-4 w-4 mr-1"}),""]})]}),e.jsxs("div",{className:"space-y-2",children:[n.alias_names.map((p,w)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ie,{value:p,onChange:v=>j(w,v.target.value),placeholder:""}),e.jsxs(ps,{children:[e.jsx(tt,{asChild:!0,children:e.jsx(N,{size:"icon",variant:"outline",children:e.jsx(ts,{className:"h-4 w-4"})})}),e.jsxs(rs,{children:[e.jsxs(cs,{children:[e.jsx(ds,{children:""}),e.jsxs(us,{children:[' "',p||"()",'" ']})]}),e.jsxs(os,{children:[e.jsx(hs,{children:""}),e.jsx(ms,{onClick:()=>x(w),children:""})]})]})]})]},w)),n.alias_names.length===0&&e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]})]})]})]})})}function G0({config:n,onChange:i}){const c=()=>{i({...n,states:[...n.states,""]})},d=f=>{i({...n,states:n.states.filter((x,j)=>j!==f)})},h=(f,x)=>{const j=[...n.states];j[f]=x,i({...n,states:j})};return e.jsx("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:""}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"personality",children:""}),e.jsx(Bs,{id:"personality",value:n.personality,onChange:f=>i({...n,personality:f.target.value}),placeholder:"120",rows:3}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"120"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"reply_style",children:""}),e.jsx(Bs,{id:"reply_style",value:n.reply_style,onChange:f=>i({...n,reply_style:f.target.value}),placeholder:"",rows:3})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"interest",children:""}),e.jsx(Bs,{id:"interest",value:n.interest,onChange:f=>i({...n,interest:f.target.value}),placeholder:"",rows:2})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"plan_style",children:""}),e.jsx(Bs,{id:"plan_style",value:n.plan_style,onChange:f=>i({...n,plan_style:f.target.value}),placeholder:"",rows:5})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"visual_style",children:""}),e.jsx(Bs,{id:"visual_style",value:n.visual_style,onChange:f=>i({...n,visual_style:f.target.value}),placeholder:"",rows:3})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"private_plan_style",children:""}),e.jsx(Bs,{id:"private_plan_style",value:n.private_plan_style,onChange:f=>i({...n,private_plan_style:f.target.value}),placeholder:"",rows:4})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(b,{children:""}),e.jsxs(N,{onClick:c,size:"sm",variant:"outline",children:[e.jsx(ot,{className:"h-4 w-4 mr-1"}),""]})]}),e.jsx("div",{className:"space-y-2",children:n.states.map((f,x)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Bs,{value:f,onChange:j=>h(x,j.target.value),placeholder:"",rows:2}),e.jsxs(ps,{children:[e.jsx(tt,{asChild:!0,children:e.jsx(N,{size:"icon",variant:"outline",children:e.jsx(ts,{className:"h-4 w-4"})})}),e.jsxs(rs,{children:[e.jsxs(cs,{children:[e.jsx(ds,{children:""}),e.jsx(us,{children:""})]}),e.jsxs(os,{children:[e.jsx(hs,{children:""}),e.jsx(ms,{onClick:()=>d(x),children:""})]})]})]})]},x))})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"state_probability",children:""}),e.jsx(ie,{id:"state_probability",type:"number",step:"0.1",min:"0",max:"1",value:n.state_probability,onChange:f=>i({...n,state_probability:parseFloat(f.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" personality 0.0-1.0"})]})]})]})})}function V0({config:n,onChange:i}){const c=()=>{i({...n,talk_value_rules:[...n.talk_value_rules,{target:"",time:"00:00-23:59",value:1}]})},d=j=>{i({...n,talk_value_rules:n.talk_value_rules.filter((p,w)=>w!==j)})},h=(j,p,w)=>{const v=[...n.talk_value_rules];v[j]={...v[j],[p]:w},i({...n,talk_value_rules:v})},f=({value:j,onChange:p})=>{const[w,v]=u.useState("00"),[y,S]=u.useState("00"),[k,O]=u.useState("23"),[Y,L]=u.useState("59");u.useEffect(()=>{const H=j.split("-");if(H.length===2){const[D,C]=H,[$,G]=D.split(":"),[T,M]=C.split(":");$&&v($.padStart(2,"0")),G&&S(G.padStart(2,"0")),T&&O(T.padStart(2,"0")),M&&L(M.padStart(2,"0"))}},[j]);const R=(H,D,C,$)=>{const G=`${H}:${D}-${C}:${$}`;p(G)};return e.jsxs(Ua,{children:[e.jsx(Ba,{asChild:!0,children:e.jsxs(N,{variant:"outline",className:"w-full justify-start font-mono text-sm",children:[e.jsx(li,{className:"h-4 w-4 mr-2"}),j||""]})}),e.jsx(ka,{className:"w-72 sm:w-80",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm mb-3",children:""}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:gap-3",children:[e.jsxs("div",{children:[e.jsx(b,{className:"text-xs",children:""}),e.jsxs(Be,{value:w,onValueChange:H=>{v(H),R(H,y,k,Y)},children:[e.jsx(Le,{children:e.jsx(He,{})}),e.jsx(Ue,{children:Array.from({length:24},(H,D)=>D).map(H=>e.jsx(te,{value:H.toString().padStart(2,"0"),children:H.toString().padStart(2,"0")},H))})]})]}),e.jsxs("div",{children:[e.jsx(b,{className:"text-xs",children:""}),e.jsxs(Be,{value:y,onValueChange:H=>{S(H),R(w,H,k,Y)},children:[e.jsx(Le,{children:e.jsx(He,{})}),e.jsx(Ue,{children:Array.from({length:60},(H,D)=>D).map(H=>e.jsx(te,{value:H.toString().padStart(2,"0"),children:H.toString().padStart(2,"0")},H))})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm mb-3",children:""}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:gap-3",children:[e.jsxs("div",{children:[e.jsx(b,{className:"text-xs",children:""}),e.jsxs(Be,{value:k,onValueChange:H=>{O(H),R(w,y,H,Y)},children:[e.jsx(Le,{children:e.jsx(He,{})}),e.jsx(Ue,{children:Array.from({length:24},(H,D)=>D).map(H=>e.jsx(te,{value:H.toString().padStart(2,"0"),children:H.toString().padStart(2,"0")},H))})]})]}),e.jsxs("div",{children:[e.jsx(b,{className:"text-xs",children:""}),e.jsxs(Be,{value:Y,onValueChange:H=>{L(H),R(w,y,k,H)},children:[e.jsx(Le,{children:e.jsx(He,{})}),e.jsx(Ue,{children:Array.from({length:60},(H,D)=>D).map(H=>e.jsx(te,{value:H.toString().padStart(2,"0"),children:H.toString().padStart(2,"0")},H))})]})]})]})]})]})})]})},x=({rule:j})=>{const p=`{ target = "${j.target}", time = "${j.time}", value = ${j.value.toFixed(1)} }`;return e.jsxs(Ua,{children:[e.jsx(Ba,{asChild:!0,children:e.jsxs(N,{variant:"outline",size:"sm",children:[e.jsx(Dt,{className:"h-4 w-4 mr-1"}),""]})}),e.jsx(ka,{className:"w-80 sm:w-96",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-sm",children:""}),e.jsx("div",{className:"rounded-md bg-muted p-3 font-mono text-xs break-all",children:p}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" bot_config.toml "})]})})]})};return e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:""}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"talk_value",children:""}),e.jsx(ie,{id:"talk_value",type:"number",step:"0.1",min:"0",max:"1",value:n.talk_value,onChange:j=>i({...n,talk_value:parseFloat(j.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" 0-1"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Qe,{id:"mentioned_bot_reply",checked:n.mentioned_bot_reply,onCheckedChange:j=>i({...n,mentioned_bot_reply:j})}),e.jsx(b,{htmlFor:"mentioned_bot_reply",className:"cursor-pointer",children:""})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"max_context_size",children:""}),e.jsx(ie,{id:"max_context_size",type:"number",min:"1",value:n.max_context_size,onChange:j=>i({...n,max_context_size:parseInt(j.target.value)})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"planner_smooth",children:""}),e.jsx(ie,{id:"planner_smooth",type:"number",step:"1",min:"0",value:n.planner_smooth,onChange:j=>i({...n,planner_smooth:parseFloat(j.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" planner  1-50 "})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Qe,{id:"enable_talk_value_rules",checked:n.enable_talk_value_rules,onCheckedChange:j=>i({...n,enable_talk_value_rules:j})}),e.jsx(b,{htmlFor:"enable_talk_value_rules",className:"cursor-pointer",children:""})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Qe,{id:"include_planner_reasoning",checked:n.include_planner_reasoning,onCheckedChange:j=>i({...n,include_planner_reasoning:j})}),e.jsx(b,{htmlFor:"include_planner_reasoning",className:"cursor-pointer",children:" planner  replyer"})]})]})]}),n.enable_talk_value_rules&&e.jsxs("div",{className:"border-t pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-base font-semibold",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"ID"})]}),e.jsxs(N,{onClick:c,size:"sm",children:[e.jsx(ot,{className:"h-4 w-4 mr-1"}),""]})]}),n.talk_value_rules&&n.talk_value_rules.length>0?e.jsx("div",{className:"space-y-4",children:n.talk_value_rules.map((j,p)=>e.jsxs("div",{className:"rounded-lg border p-4 bg-muted/50 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm font-medium text-muted-foreground",children:[" #",p+1]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x,{rule:j}),e.jsxs(ps,{children:[e.jsx(tt,{asChild:!0,children:e.jsx(N,{variant:"ghost",size:"sm",children:e.jsx(ts,{className:"h-4 w-4 text-destructive"})})}),e.jsxs(rs,{children:[e.jsxs(cs,{children:[e.jsx(ds,{children:""}),e.jsxs(us,{children:[" #",p+1," "]})]}),e.jsxs(os,{children:[e.jsx(hs,{children:""}),e.jsx(ms,{onClick:()=>d(p),children:""})]})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{className:"text-xs font-medium",children:""}),e.jsxs(Be,{value:j.target===""?"global":"specific",onValueChange:w=>{w==="global"?h(p,"target",""):h(p,"target","qq::group")},children:[e.jsx(Le,{children:e.jsx(He,{})}),e.jsxs(Ue,{children:[e.jsx(te,{value:"global",children:""}),e.jsx(te,{value:"specific",children:""})]})]})]}),j.target!==""&&(()=>{const w=j.target.split(":"),v=w[0]||"qq",y=w[1]||"",S=w[2]||"group";return e.jsxs("div",{className:"grid gap-4 p-3 sm:p-4 rounded-lg bg-muted/50",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{className:"text-xs font-medium",children:""}),e.jsxs(Be,{value:v,onValueChange:k=>{h(p,"target",`${k}:${y}:${S}`)},children:[e.jsx(Le,{children:e.jsx(He,{})}),e.jsxs(Ue,{children:[e.jsx(te,{value:"qq",children:"QQ"}),e.jsx(te,{value:"wx",children:""})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{className:"text-xs font-medium",children:" ID"}),e.jsx(ie,{value:y,onChange:k=>{h(p,"target",`${v}:${k.target.value}:${S}`)},placeholder:" ID",className:"font-mono text-sm"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{className:"text-xs font-medium",children:""}),e.jsxs(Be,{value:S,onValueChange:k=>{h(p,"target",`${v}:${y}:${k}`)},children:[e.jsx(Le,{children:e.jsx(He,{})}),e.jsxs(Ue,{children:[e.jsx(te,{value:"group",children:"group"}),e.jsx(te,{value:"private",children:"private"})]})]})]})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[" ID",j.target||""]})]})})(),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{className:"text-xs font-medium",children:" (Time)"}),e.jsx(f,{value:j.time,onChange:w=>h(p,"time",w)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" 23:00-02:00"})]}),e.jsxs("div",{className:"grid gap-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(b,{htmlFor:`rule-value-${p}`,className:"text-xs font-medium",children:" (Value)"}),e.jsx(ie,{id:`rule-value-${p}`,type:"number",step:"0.01",min:"0.01",max:"1",value:j.value,onChange:w=>{const v=parseFloat(w.target.value);isNaN(v)||h(p,"value",Math.max(.01,Math.min(1,v)))},className:"w-20 h-8 text-xs"})]}),e.jsx(wa,{value:[j.value],onValueChange:w=>h(p,"value",w[0]),min:.01,max:1,step:.01,className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsx("span",{children:"0.01 ()"}),e.jsx("span",{children:"0.5"}),e.jsx("span",{children:"1.0 ()"})]})]})]})]},p))}):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:e.jsx("p",{className:"text-sm",children:'""'})}),e.jsxs("div",{className:"mt-4 p-4 bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:[e.jsx("h5",{className:"text-sm font-semibold text-blue-900 dark:text-blue-100 mb-2",children:" "}),e.jsxs("ul",{className:"text-xs text-blue-800 dark:text-blue-200 space-y-1",children:[e.jsxs("li",{children:[" ",e.jsx("strong",{children:"Target "}),""]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"Target "}),"platform:id:type"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:""}),""]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:""})," 23:00-02:00 112"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:""})," 0-10 1 "]})]})]})]})]})}function F0({member:n,groupIndex:i,memberIndex:c,availableChatIds:d,onUpdate:h,onRemove:f}){const x=d.includes(n)||n==="*",[j,p]=u.useState(!x);return e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"flex-1 flex gap-2",children:j?e.jsxs(e.Fragment,{children:[e.jsx(ie,{value:n,onChange:w=>h(i,c,w.target.value),placeholder:' "*"  "qq:123456:group"',className:"flex-1"}),d.length>0&&e.jsx(N,{size:"sm",variant:"outline",onClick:()=>p(!1),title:"",children:""})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Be,{value:n,onValueChange:w=>h(i,c,w),children:[e.jsx(Le,{className:"flex-1",children:e.jsx(He,{placeholder:""})}),e.jsxs(Ue,{children:[e.jsx(te,{value:"*",children:"* ()"}),d.map((w,v)=>e.jsx(te,{value:w,children:w},v))]})]}),e.jsx(N,{size:"sm",variant:"outline",onClick:()=>p(!0),title:"",children:""})]})}),e.jsxs(ps,{children:[e.jsx(tt,{asChild:!0,children:e.jsx(N,{size:"icon",variant:"outline",children:e.jsx(ts,{className:"h-4 w-4"})})}),e.jsxs(rs,{children:[e.jsxs(cs,{children:[e.jsx(ds,{children:""}),e.jsxs(us,{children:[' "',n||"()",'" ']})]}),e.jsxs(os,{children:[e.jsx(hs,{children:""}),e.jsx(ms,{onClick:()=>f(i,c),children:""})]})]})]})]})}function $0({config:n,onChange:i}){const c=()=>{i({...n,learning_list:[...n.learning_list,["","enable","enable","1.0"]]})},d=y=>{i({...n,learning_list:n.learning_list.filter((S,k)=>k!==y)})},h=(y,S,k)=>{const O=[...n.learning_list];O[y][S]=k,i({...n,learning_list:O})},f=({rule:y})=>{const S=`["${y[0]}", "${y[1]}", "${y[2]}", "${y[3]}"]`;return e.jsxs(Ua,{children:[e.jsx(Ba,{asChild:!0,children:e.jsxs(N,{variant:"outline",size:"sm",children:[e.jsx(Dt,{className:"h-4 w-4 mr-1"}),""]})}),e.jsx(ka,{className:"w-80 sm:w-96",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-sm",children:""}),e.jsx("div",{className:"rounded-md bg-muted p-3 font-mono text-xs break-all",children:S}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" bot_config.toml "})]})})]})},x=()=>{i({...n,expression_groups:[...n.expression_groups,[]]})},j=y=>{i({...n,expression_groups:n.expression_groups.filter((S,k)=>k!==y)})},p=y=>{const S=[...n.expression_groups];S[y]=[...S[y],""],i({...n,expression_groups:S})},w=(y,S)=>{const k=[...n.expression_groups];k[y]=k[y].filter((O,Y)=>Y!==S),i({...n,expression_groups:k})},v=(y,S,k)=>{const O=[...n.expression_groups];O[y][S]=k,i({...n,expression_groups:O})};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-6",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:""})]}),e.jsxs(N,{onClick:c,size:"sm",variant:"outline",children:[e.jsx(ot,{className:"h-4 w-4 mr-1"}),""]})]}),e.jsxs("div",{className:"space-y-4",children:[n.learning_list.map((y,S)=>{const k=n.learning_list.some((D,C)=>C!==S&&D[0]===""),O=y[0]==="",Y=y[0].split(":"),L=Y[0]||"qq",R=Y[1]||"",H=Y[2]||"group";return e.jsxs("div",{className:"rounded-lg border p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm font-medium",children:[" ",S+1," ",O&&""]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(f,{rule:y}),e.jsxs(ps,{children:[e.jsx(tt,{asChild:!0,children:e.jsx(N,{size:"sm",variant:"ghost",children:e.jsx(ts,{className:"h-4 w-4"})})}),e.jsxs(rs,{children:[e.jsxs(cs,{children:[e.jsx(ds,{children:""}),e.jsxs(us,{children:[" ",S+1," "]})]}),e.jsxs(os,{children:[e.jsx(hs,{children:""}),e.jsx(ms,{onClick:()=>d(S),children:""})]})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{className:"text-xs font-medium",children:""}),e.jsxs(Be,{value:O?"global":"specific",onValueChange:D=>{D==="global"?h(S,0,""):h(S,0,"qq::group")},disabled:k&&!O,children:[e.jsx(Le,{children:e.jsx(He,{})}),e.jsxs(Ue,{children:[e.jsx(te,{value:"global",children:""}),e.jsx(te,{value:"specific",disabled:k&&!O,children:""})]})]}),k&&!O&&e.jsx("p",{className:"text-xs text-amber-600",children:""})]}),!O&&e.jsxs("div",{className:"grid gap-4 p-3 sm:p-4 rounded-lg bg-muted/50",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{className:"text-xs font-medium",children:""}),e.jsxs(Be,{value:L,onValueChange:D=>{h(S,0,`${D}:${R}:${H}`)},children:[e.jsx(Le,{children:e.jsx(He,{})}),e.jsxs(Ue,{children:[e.jsx(te,{value:"qq",children:"QQ"}),e.jsx(te,{value:"wx",children:""})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{className:"text-xs font-medium",children:" ID"}),e.jsx(ie,{value:R,onChange:D=>{h(S,0,`${L}:${D.target.value}:${H}`)},placeholder:" ID",className:"font-mono text-sm"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{className:"text-xs font-medium",children:""}),e.jsxs(Be,{value:H,onValueChange:D=>{h(S,0,`${L}:${R}:${D}`)},children:[e.jsx(Le,{children:e.jsx(He,{})}),e.jsxs(Ue,{children:[e.jsx(te,{value:"group",children:"group"}),e.jsx(te,{value:"private",children:"private"})]})]})]})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[" ID",y[0]||""]})]}),e.jsx("div",{className:"grid gap-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(b,{className:"text-xs font-medium",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:""})]}),e.jsx(Qe,{checked:y[1]==="enable",onCheckedChange:D=>h(S,1,D?"enable":"disable")})]})}),e.jsx("div",{className:"grid gap-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(b,{className:"text-xs font-medium",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:""})]}),e.jsx(Qe,{checked:y[2]==="enable",onCheckedChange:D=>h(S,2,D?"enable":"disable")})]})}),e.jsxs("div",{className:"grid gap-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(b,{className:"text-xs font-medium",children:""}),e.jsx(ie,{type:"number",step:"0.1",min:"0",max:"5",value:y[3],onChange:D=>{const C=parseFloat(D.target.value);isNaN(C)||h(S,3,Math.max(0,Math.min(5,C)).toFixed(1))},className:"w-20 h-8 text-xs"})]}),e.jsx(wa,{value:[parseFloat(y[3])||1],onValueChange:D=>h(S,3,D[0].toFixed(1)),min:0,max:5,step:.1,className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsx("span",{children:"0 ()"}),e.jsx("span",{children:"2.5"}),e.jsx("span",{children:"5.0 ()"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" = 300/"})]})]})]},S)}),n.learning_list.length===0&&e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:'""'})]})]})}),e.jsx("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-6",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:""})]}),e.jsx(Qe,{checked:n.reflect,onCheckedChange:y=>i({...n,reflect:y})})]}),n.reflect&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"rounded-lg border p-4 space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("span",{className:"text-sm font-medium",children:""})}),e.jsx("div",{className:"space-y-4",children:(()=>{const S=(n.reflect_operator_id||"").split(":"),k=S[0]||"qq",O=S[1]||"",Y=S[2]||"private";return e.jsxs("div",{className:"grid gap-4 p-3 sm:p-4 rounded-lg bg-muted/50",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{className:"text-xs font-medium",children:""}),e.jsxs(Be,{value:k,onValueChange:L=>{i({...n,reflect_operator_id:`${L}:${O}:${Y}`})},children:[e.jsx(Le,{children:e.jsx(He,{})}),e.jsxs(Ue,{children:[e.jsx(te,{value:"qq",children:"QQ"}),e.jsx(te,{value:"wx",children:""})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{className:"text-xs font-medium",children:"/ ID"}),e.jsx(ie,{value:O,onChange:L=>{i({...n,reflect_operator_id:`${k}:${L.target.value}:${Y}`})},placeholder:" ID",className:"font-mono text-sm"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{className:"text-xs font-medium",children:""}),e.jsxs(Be,{value:Y,onValueChange:L=>{i({...n,reflect_operator_id:`${k}:${O}:${L}`})},children:[e.jsx(Le,{children:e.jsx(He,{})}),e.jsxs(Ue,{children:[e.jsx(te,{value:"private",children:"private"}),e.jsx(te,{value:"group",children:"group"})]})]})]})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[" ID",n.reflect_operator_id||""]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})})()})]}),e.jsxs("div",{className:"rounded-lg border p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:""})]}),e.jsxs(N,{onClick:()=>{i({...n,allow_reflect:[...n.allow_reflect||[],"qq::group"]})},size:"sm",variant:"outline",children:[e.jsx(ot,{className:"h-4 w-4 mr-1"}),""]})]}),e.jsxs("div",{className:"space-y-2",children:[(n.allow_reflect||[]).map((y,S)=>{const k=y.split(":"),O=k[0]||"qq",Y=k[1]||"",L=k[2]||"group";return e.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-lg bg-muted/50",children:[e.jsxs(Be,{value:O,onValueChange:R=>{const H=[...n.allow_reflect];H[S]=`${R}:${Y}:${L}`,i({...n,allow_reflect:H})},children:[e.jsx(Le,{className:"w-24",children:e.jsx(He,{})}),e.jsxs(Ue,{children:[e.jsx(te,{value:"qq",children:"QQ"}),e.jsx(te,{value:"wx",children:""})]})]}),e.jsx(ie,{value:Y,onChange:R=>{const H=[...n.allow_reflect];H[S]=`${O}:${R.target.value}:${L}`,i({...n,allow_reflect:H})},placeholder:"ID",className:"flex-1 font-mono text-sm"}),e.jsxs(Be,{value:L,onValueChange:R=>{const H=[...n.allow_reflect];H[S]=`${O}:${Y}:${R}`,i({...n,allow_reflect:H})},children:[e.jsx(Le,{className:"w-32",children:e.jsx(He,{})}),e.jsxs(Ue,{children:[e.jsx(te,{value:"group",children:""}),e.jsx(te,{value:"private",children:""})]})]}),e.jsx(N,{onClick:()=>{i({...n,allow_reflect:n.allow_reflect.filter((R,H)=>H!==S)})},size:"sm",variant:"ghost",children:e.jsx(ts,{className:"h-4 w-4"})})]},S)}),(!n.allow_reflect||n.allow_reflect.length===0)&&e.jsx("div",{className:"text-center py-4 text-muted-foreground text-sm",children:""})]})]})]})]})}),e.jsx("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-6",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:""})]}),e.jsxs(N,{onClick:x,size:"sm",variant:"outline",children:[e.jsx(ot,{className:"h-4 w-4 mr-1"}),""]})]}),e.jsxs("div",{className:"space-y-4",children:[n.expression_groups.map((y,S)=>{const k=n.learning_list.map(O=>O[0]).filter(O=>O!=="");return e.jsxs("div",{className:"rounded-lg border p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm font-medium",children:[" ",S+1,y.length===1&&y[0]==="*"&&""]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(N,{onClick:()=>p(S),size:"sm",variant:"outline",children:e.jsx(ot,{className:"h-4 w-4"})}),e.jsxs(ps,{children:[e.jsx(tt,{asChild:!0,children:e.jsx(N,{size:"sm",variant:"ghost",children:e.jsx(ts,{className:"h-4 w-4"})})}),e.jsxs(rs,{children:[e.jsxs(cs,{children:[e.jsx(ds,{children:""}),e.jsxs(us,{children:[" ",S+1," "]})]}),e.jsxs(os,{children:[e.jsx(hs,{children:""}),e.jsx(ms,{onClick:()=>j(S),children:""})]})]})]})]})]}),e.jsx("div",{className:"space-y-2",children:y.map((O,Y)=>e.jsx(F0,{member:O,groupIndex:S,memberIndex:Y,availableChatIds:k,onUpdate:v,onRemove:w},`${S}-${Y}`))}),e.jsx("p",{className:"text-xs text-muted-foreground",children:' "*" '})]},S)}),n.expression_groups.length===0&&e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:'""'})]})]})})]})}function Q0({emojiConfig:n,memoryConfig:i,toolConfig:c,onEmojiChange:d,onMemoryChange:h,onToolChange:f}){return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-4",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:""}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Qe,{id:"enable_tool",checked:c.enable_tool,onCheckedChange:x=>f({...c,enable_tool:x})}),e.jsx(b,{htmlFor:"enable_tool",className:"cursor-pointer",children:""})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:""})]})}),e.jsx("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-4",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:""}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"max_agent_iterations",children:""}),e.jsx(ie,{id:"max_agent_iterations",type:"number",min:"1",value:i.max_agent_iterations,onChange:x=>h({...i,max_agent_iterations:parseInt(x.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" 1"})]})]})}),e.jsx("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-4",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:""}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"emoji_chance",children:""}),e.jsx(ie,{id:"emoji_chance",type:"number",step:"0.1",min:"0",max:"1",value:n.emoji_chance,onChange:x=>d({...n,emoji_chance:parseFloat(x.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" 0-1"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"max_reg_num",children:""}),e.jsx(ie,{id:"max_reg_num",type:"number",min:"1",value:n.max_reg_num,onChange:x=>d({...n,max_reg_num:parseInt(x.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"check_interval",children:""}),e.jsx(ie,{id:"check_interval",type:"number",min:"1",value:n.check_interval,onChange:x=>d({...n,check_interval:parseInt(x.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Qe,{id:"do_replace",checked:n.do_replace,onCheckedChange:x=>d({...n,do_replace:x})}),e.jsx(b,{htmlFor:"do_replace",className:"cursor-pointer",children:""})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Qe,{id:"steal_emoji",checked:n.steal_emoji,onCheckedChange:x=>d({...n,steal_emoji:x})}),e.jsx(b,{htmlFor:"steal_emoji",className:"cursor-pointer",children:""})]}),e.jsx("p",{className:"text-xs text-muted-foreground -mt-2",children:""}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Qe,{id:"content_filtration",checked:n.content_filtration,onCheckedChange:x=>d({...n,content_filtration:x})}),e.jsx(b,{htmlFor:"content_filtration",className:"cursor-pointer",children:""})]}),n.content_filtration&&e.jsxs("div",{className:"grid gap-2 pl-6 border-l-2 border-primary/20",children:[e.jsx(b,{htmlFor:"filtration_prompt",children:""}),e.jsx(ie,{id:"filtration_prompt",value:n.filtration_prompt,onChange:x=>d({...n,filtration_prompt:x.target.value}),placeholder:""}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})]})]})})]})}function Y0({keywordReactionConfig:n,responsePostProcessConfig:i,chineseTypoConfig:c,responseSplitterConfig:d,onKeywordReactionChange:h,onResponsePostProcessChange:f,onChineseTypoChange:x,onResponseSplitterChange:j}){const p=()=>{h({...n,regex_rules:[...n.regex_rules,{regex:[""],reaction:""}]})},w=C=>{h({...n,regex_rules:n.regex_rules.filter(($,G)=>G!==C)})},v=(C,$,G)=>{const T=[...n.regex_rules];$==="regex"&&typeof G=="string"?T[C]={...T[C],regex:[G]}:$==="reaction"&&typeof G=="string"&&(T[C]={...T[C],reaction:G}),h({...n,regex_rules:T})},y=({regex:C,reaction:$,onRegexChange:G,onReactionChange:T})=>{const[M,ne]=u.useState(!1),[fe,_e]=u.useState(""),[Se,je]=u.useState(null),[ye,be]=u.useState(""),[A,K]=u.useState({}),[E,se]=u.useState(""),_=u.useRef(null),[me,re]=u.useState("build"),le=Q=>Q.replace(/\(\?P<([^>]+)>/g,"(?<$1>"),pe=(Q,P=0)=>{const q=_.current;if(!q)return;const W=q.selectionStart||0,Ce=q.selectionEnd||0,Me=C.substring(0,W)+Q+C.substring(Ce);G(Me),setTimeout(()=>{const ce=W+Q.length+P;q.setSelectionRange(ce,ce),q.focus()},0)};u.useEffect(()=>{if(!C||!fe){je(null),K({}),se($),be("");return}try{const Q=le(C),P=new RegExp(Q,"g"),q=fe.match(P);je(q),be("");const Ce=new RegExp(Q).exec(fe);if(Ce&&Ce.groups){K(Ce.groups);let Me=$;Object.entries(Ce.groups).forEach(([ce,De])=>{Me=Me.replace(new RegExp(`\\[${ce}\\]`,"g"),De||"")}),se(Me)}else K({}),se($)}catch(Q){be(Q.message),je(null),K({}),se($)}},[C,fe,$]);const Ne=()=>{if(!fe||!Se||Se.length===0)return e.jsx("span",{className:"text-muted-foreground",children:fe||""});try{const Q=le(C),P=new RegExp(Q,"g");let q=0;const W=[];let Ce;for(;(Ce=P.exec(fe))!==null;)Ce.index>q&&W.push(e.jsx("span",{children:fe.substring(q,Ce.index)},`text-${q}`)),W.push(e.jsx("span",{className:"bg-yellow-200 dark:bg-yellow-900 font-semibold",children:Ce[0]},`match-${Ce.index}`)),q=Ce.index+Ce[0].length;return q<fe.length&&W.push(e.jsx("span",{children:fe.substring(q)},`text-${q}`)),e.jsx(e.Fragment,{children:W})}catch{return e.jsx("span",{children:fe})}},he=[{category:"",items:[{label:"",pattern:".",desc:""},{label:"",pattern:"\\d",desc:" 0-9"},{label:"",pattern:"\\D",desc:""},{label:"",pattern:"\\w",desc:""},{label:"",pattern:"\\W",desc:""},{label:"",pattern:"\\s",desc:""},{label:"",pattern:"\\S",desc:""}]},{category:"",items:[{label:"",pattern:"^",desc:""},{label:"",pattern:"$",desc:""},{label:"",pattern:"\\b",desc:""}]},{category:"",items:[{label:"0",pattern:"*",desc:"0"},{label:"1",pattern:"+",desc:"1"},{label:"01",pattern:"?",desc:"01"},{label:"",pattern:"{n}",desc:"nn"},{label:"",pattern:"{m,n}",desc:"mn"}]},{category:"",items:[{label:"",pattern:"()",desc:"",moveCursor:-1},{label:"",pattern:"(?P<name>)",desc:"Python",moveCursor:-1},{label:"",pattern:"(?:)",desc:"",moveCursor:-1}]},{category:"",items:[{label:"",pattern:"[]",desc:"",moveCursor:-1},{label:"",pattern:"[^]",desc:"",moveCursor:-1},{label:"",pattern:"[a-z]",desc:"az"},{label:"",pattern:"[\\u4e00-\\u9fa5]",desc:""}]},{category:"",items:[{label:"",pattern:"(?P<word>\\S+)",desc:""},{label:"",pattern:"(?P<sentence>.+)",desc:""},{label:"",pattern:"(?P<num>\\d+)",desc:""},{label:"",pattern:"(?:1|2)",desc:""}]}];return e.jsxs($s,{open:M,onOpenChange:ne,children:[e.jsx(Zu,{asChild:!0,children:e.jsxs(N,{variant:"outline",size:"sm",children:[e.jsx(Qu,{className:"h-4 w-4 mr-1"}),""]})}),e.jsxs(Hs,{className:"max-w-[95vw] sm:max-w-[900px] max-h-[90vh]",children:[e.jsxs(qs,{children:[e.jsx(Gs,{children:""}),e.jsx(Is,{className:"text-sm",children:""})]}),e.jsx(ss,{className:"max-h-[calc(90vh-120px)]",children:e.jsxs(Ca,{value:me,onValueChange:Q=>re(Q),className:"w-full",children:[e.jsxs(pa,{className:"grid w-full grid-cols-2",children:[e.jsx(ns,{value:"build",children:" "}),e.jsx(ns,{value:"test",children:" "})]}),e.jsxs(Es,{value:"build",className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{className:"text-sm font-medium",children:""}),e.jsx(ie,{ref:_,value:C,onChange:Q=>G(Q.target.value),className:"font-mono text-sm",placeholder:"..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{className:"text-sm font-medium",children:"Reaction "}),e.jsx(Bs,{value:$,onChange:Q=>T(Q.target.value),placeholder:" [] ...",rows:3,className:"text-sm"})]}),e.jsxs("div",{className:"space-y-4 border-t pt-4",children:[he.map(Q=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("h5",{className:"text-xs font-semibold text-primary",children:Q.category}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:Q.items.map(P=>e.jsx(N,{variant:"outline",size:"sm",className:"justify-start h-auto py-2 px-3",onClick:()=>pe(P.pattern,P.moveCursor||0),children:e.jsxs("div",{className:"flex flex-col items-start w-full",children:[e.jsxs("div",{className:"flex items-center gap-2 w-full",children:[e.jsx("span",{className:"text-xs font-medium",children:P.label}),e.jsx("code",{className:"ml-auto text-xs bg-muted px-1.5 py-0.5 rounded font-mono",children:P.pattern})]}),e.jsx("span",{className:"text-xs text-muted-foreground mt-0.5",children:P.desc})]})},P.label))})]},Q.category)),e.jsxs("div",{className:"space-y-2 border-t pt-4",children:[e.jsx("h5",{className:"text-xs font-semibold text-primary",children:""}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{variant:"outline",size:"sm",className:"w-full justify-start h-auto py-2 px-3",onClick:()=>G("^(?P<n>\\S{1,20})$"),children:e.jsxs("div",{className:"flex flex-col items-start w-full",children:[e.jsxs("code",{className:"text-xs font-mono bg-muted px-2 py-1 rounded w-full overflow-x-auto",children:["^(?P<n>\\S","{1,20}",")$"]}),e.jsx("span",{className:"text-xs text-muted-foreground mt-1",children:""})]})}),e.jsx(N,{variant:"outline",size:"sm",className:"w-full justify-start h-auto py-2 px-3",onClick:()=>G("(?:[^.\\s]+\\s*)?(?:)?[]\\s*(?P<action>.+?)[.,]?$"),children:e.jsxs("div",{className:"flex flex-col items-start w-full",children:[e.jsx("code",{className:"text-xs font-mono bg-muted px-2 py-1 rounded w-full overflow-x-auto",children:"(?:[^.\\s]+\\s*)?(?:)?[]\\s*(?P<action>.+?)[.,]?$"}),e.jsx("span",{className:"text-xs text-muted-foreground mt-1",children:""})]})}),e.jsx(N,{variant:"outline",size:"sm",className:"w-full justify-start h-auto py-2 px-3",onClick:()=>G("(?P<subject>.+?)(?:||)"),children:e.jsxs("div",{className:"flex flex-col items-start w-full",children:[e.jsx("code",{className:"text-xs font-mono bg-muted px-2 py-1 rounded w-full overflow-x-auto",children:"(?P<subject>.+?)(?:||)"}),e.jsx("span",{className:"text-xs text-muted-foreground mt-1",children:""})]})})]})]})]}),e.jsxs("div",{className:"rounded-md bg-blue-50 dark:bg-blue-950/30 border border-blue-200 dark:border-blue-800 p-3 space-y-1",children:[e.jsx("p",{className:"text-xs font-medium text-blue-900 dark:text-blue-100",children:" "}),e.jsxs("ul",{className:"text-xs text-blue-700 dark:text-blue-300 space-y-1 list-disc list-inside",children:[e.jsx("li",{children:""}),e.jsxs("li",{children:["",e.jsx("code",{className:"bg-blue-100 dark:bg-blue-900 px-1 rounded",children:"(?P<>)"})]}),e.jsxs("li",{children:[" reaction  ",e.jsx("code",{className:"bg-blue-100 dark:bg-blue-900 px-1 rounded",children:"[]"})," "]}),e.jsx("li",{children:""})]})]})]}),e.jsxs(Es,{value:"test",className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{className:"text-sm font-medium",children:""}),e.jsx("div",{className:"rounded-md bg-muted p-3 font-mono text-xs break-all",children:C||"()"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"test-text",className:"text-sm font-medium",children:""}),e.jsx(Bs,{id:"test-text",value:fe,onChange:Q=>_e(Q.target.value),placeholder:`...
`,className:"min-h-[100px] text-sm"})]}),ye&&e.jsxs("div",{className:"rounded-md bg-destructive/10 border border-destructive/20 p-3",children:[e.jsx("p",{className:"text-sm text-destructive font-medium",children:""}),e.jsx("p",{className:"text-xs text-destructive/80 mt-1",children:ye})]}),!ye&&fe&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex items-center gap-2",children:Se&&Se.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-green-500"}),e.jsxs("span",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:[" (",Se.length," )"]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:""})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{className:"text-sm font-medium",children:""}),e.jsx(ss,{className:"h-40 rounded-md bg-muted p-3",children:e.jsx("div",{className:"text-sm break-words",children:Ne()})})]}),Object.keys(A).length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{className:"text-sm font-medium",children:""}),e.jsx(ss,{className:"h-32 rounded-md border p-3",children:e.jsx("div",{className:"space-y-2",children:Object.entries(A).map(([Q,P])=>e.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[e.jsxs("span",{className:"font-mono font-semibold text-primary min-w-[80px]",children:["[",Q,"]"]}),e.jsx("span",{className:"text-muted-foreground",children:"="}),e.jsx("span",{className:"font-mono bg-muted px-2 py-0.5 rounded",children:P})]},Q))})})]}),Object.keys(A).length>0&&$&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{className:"text-sm font-medium",children:"Reaction "}),e.jsx(ss,{className:"h-48 rounded-md bg-blue-50 dark:bg-blue-950/30 border border-blue-200 dark:border-blue-800 p-3",children:e.jsx("div",{className:"text-sm break-words",children:E})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"reaction  [name] "})]})]}),e.jsxs("div",{className:"rounded-md bg-blue-50 dark:bg-blue-950/30 border border-blue-200 dark:border-blue-800 p-3 space-y-1",children:[e.jsx("p",{className:"text-xs font-medium text-blue-900 dark:text-blue-100",children:" "}),e.jsxs("ul",{className:"text-xs text-blue-700 dark:text-blue-300 space-y-1 list-disc list-inside",children:[e.jsx("li",{children:""}),e.jsx("li",{children:""}),e.jsx("li",{children:"Reaction "}),e.jsx("li",{children:""})]})]})]})]})})]})]})},S=()=>{h({...n,keyword_rules:[...n.keyword_rules,{keywords:[],reaction:""}]})},k=C=>{h({...n,keyword_rules:n.keyword_rules.filter(($,G)=>G!==C)})},O=(C,$,G)=>{const T=[...n.keyword_rules];typeof G=="string"&&(T[C]={...T[C],reaction:G}),h({...n,keyword_rules:T})},Y=C=>{const $=[...n.keyword_rules];$[C]={...$[C],keywords:[...$[C].keywords||[],""]},h({...n,keyword_rules:$})},L=(C,$)=>{const G=[...n.keyword_rules];G[C]={...G[C],keywords:(G[C].keywords||[]).filter((T,M)=>M!==$)},h({...n,keyword_rules:G})},R=(C,$,G)=>{const T=[...n.keyword_rules],M=[...T[C].keywords||[]];M[$]=G,T[C]={...T[C],keywords:M},h({...n,keyword_rules:T})},H=({rule:C})=>{const $=`{ regex = [${(C.regex||[]).map(G=>`"${G}"`).join(", ")}], reaction = "${C.reaction}" }`;return e.jsxs(Ua,{children:[e.jsx(Ba,{asChild:!0,children:e.jsxs(N,{variant:"outline",size:"sm",children:[e.jsx(Dt,{className:"h-4 w-4 mr-1"}),""]})}),e.jsx(ka,{className:"w-[95vw] sm:w-[500px]",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-sm",children:""}),e.jsx(ss,{className:"h-60 rounded-md bg-muted p-3",children:e.jsx("pre",{className:"font-mono text-xs break-all",children:$})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" bot_config.toml "})]})})]})},D=({rule:C})=>{const $=`[[keyword_reaction.keyword_rules]]
keywords = [${(C.keywords||[]).map(G=>`"${G}"`).join(", ")}]
reaction = "${C.reaction}"`;return e.jsxs(Ua,{children:[e.jsx(Ba,{asChild:!0,children:e.jsxs(N,{variant:"outline",size:"sm",children:[e.jsx(Dt,{className:"h-4 w-4 mr-1"}),""]})}),e.jsx(ka,{className:"w-[95vw] sm:w-[500px]",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-sm",children:""}),e.jsx(ss,{className:"h-60 rounded-md bg-muted p-3",children:e.jsx("pre",{className:"font-mono text-xs whitespace-pre-wrap break-all",children:$})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" bot_config.toml "})]})})]})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-base font-semibold",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:""})]}),e.jsxs(N,{onClick:p,size:"sm",variant:"outline",children:[e.jsx(ot,{className:"h-4 w-4 mr-1"}),""]})]}),e.jsxs("div",{className:"space-y-3",children:[n.regex_rules.map((C,$)=>e.jsxs("div",{className:"rounded-lg border p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm font-medium",children:[" ",$+1]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{regex:C.regex&&C.regex[0]||"",reaction:C.reaction,onRegexChange:G=>v($,"regex",G),onReactionChange:G=>v($,"reaction",G)}),e.jsx(H,{rule:C}),e.jsxs(ps,{children:[e.jsx(tt,{asChild:!0,children:e.jsx(N,{size:"sm",variant:"ghost",children:e.jsx(ts,{className:"h-4 w-4"})})}),e.jsxs(rs,{children:[e.jsxs(cs,{children:[e.jsx(ds,{children:""}),e.jsxs(us,{children:[" ",$+1," "]})]}),e.jsxs(os,{children:[e.jsx(hs,{children:""}),e.jsx(ms,{onClick:()=>w($),children:""})]})]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{className:"text-xs font-medium",children:"Python "}),e.jsx(ie,{value:C.regex&&C.regex[0]||"",onChange:G=>v($,"regex",G.target.value),placeholder:"^(?P<n>\\\\S{1,20})$ ",className:"font-mono text-sm"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:' (?P<name>pattern) reaction  [name] ""'})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{className:"text-xs font-medium",children:""}),e.jsx(Bs,{value:C.reaction,onChange:G=>v($,"reaction",G.target.value),placeholder:`...
 [] `,rows:3,className:"text-sm"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" []  [n] "})]})]})]},$)),n.regex_rules.length===0&&e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:'""'})]})]}),e.jsxs("div",{className:"space-y-4 border-t pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-base font-semibold",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:""})]}),e.jsxs(N,{onClick:S,size:"sm",variant:"outline",children:[e.jsx(ot,{className:"h-4 w-4 mr-1"}),""]})]}),e.jsxs("div",{className:"space-y-3",children:[n.keyword_rules.map((C,$)=>e.jsxs("div",{className:"rounded-lg border p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm font-medium",children:[" ",$+1]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{rule:C}),e.jsxs(ps,{children:[e.jsx(tt,{asChild:!0,children:e.jsx(N,{size:"sm",variant:"ghost",children:e.jsx(ts,{className:"h-4 w-4"})})}),e.jsxs(rs,{children:[e.jsxs(cs,{children:[e.jsx(ds,{children:""}),e.jsxs(us,{children:[" ",$+1," "]})]}),e.jsxs(os,{children:[e.jsx(hs,{children:""}),e.jsx(ms,{onClick:()=>k($),children:""})]})]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(b,{className:"text-xs font-medium",children:""}),e.jsxs(N,{onClick:()=>Y($),size:"sm",variant:"ghost",children:[e.jsx(ot,{className:"h-3 w-3 mr-1"}),""]})]}),e.jsxs("div",{className:"space-y-2",children:[(C.keywords||[]).map((G,T)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{value:G,onChange:M=>R($,T,M.target.value),placeholder:"",className:"flex-1"}),e.jsx(N,{onClick:()=>L($,T),size:"sm",variant:"ghost",children:e.jsx(ts,{className:"h-4 w-4"})})]},T)),(!C.keywords||C.keywords.length===0)&&e.jsx("p",{className:"text-xs text-muted-foreground text-center py-2",children:'""'})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{className:"text-xs font-medium",children:""}),e.jsx(Bs,{value:C.reaction,onChange:G=>O($,"reaction",G.target.value),placeholder:"...",rows:3,className:"text-sm"})]})]})]},$)),n.keyword_rules.length===0&&e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:'""'})]})]})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:""}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Qe,{id:"enable_response_post_process",checked:i.enable_response_post_process,onCheckedChange:C=>f({...i,enable_response_post_process:C})}),e.jsx(b,{htmlFor:"enable_response_post_process",className:"cursor-pointer",children:""})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:""})]}),i.enable_response_post_process&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"border-t pt-6 space-y-4",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(Qe,{id:"enable_chinese_typo",checked:c.enable,onCheckedChange:C=>x({...c,enable:C})}),e.jsx(b,{htmlFor:"enable_chinese_typo",className:"cursor-pointer font-semibold",children:""})]}),e.jsx("p",{className:"text-xs text-muted-foreground mb-4",children:""}),c.enable&&e.jsxs("div",{className:"grid gap-4 pl-6 border-l-2 border-primary/20",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"error_rate",className:"text-xs font-medium",children:""}),e.jsx(ie,{id:"error_rate",type:"number",step:"0.001",min:"0",max:"1",value:c.error_rate,onChange:C=>x({...c,error_rate:parseFloat(C.target.value)})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"min_freq",className:"text-xs font-medium",children:""}),e.jsx(ie,{id:"min_freq",type:"number",min:"0",value:c.min_freq,onChange:C=>x({...c,min_freq:parseInt(C.target.value)})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"tone_error_rate",className:"text-xs font-medium",children:""}),e.jsx(ie,{id:"tone_error_rate",type:"number",step:"0.01",min:"0",max:"1",value:c.tone_error_rate,onChange:C=>x({...c,tone_error_rate:parseFloat(C.target.value)})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"word_replace_rate",className:"text-xs font-medium",children:""}),e.jsx(ie,{id:"word_replace_rate",type:"number",step:"0.001",min:"0",max:"1",value:c.word_replace_rate,onChange:C=>x({...c,word_replace_rate:parseFloat(C.target.value)})})]})]})]})}),e.jsx("div",{className:"border-t pt-6 space-y-4",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(Qe,{id:"enable_response_splitter",checked:d.enable,onCheckedChange:C=>j({...d,enable:C})}),e.jsx(b,{htmlFor:"enable_response_splitter",className:"cursor-pointer font-semibold",children:""})]}),e.jsx("p",{className:"text-xs text-muted-foreground mb-4",children:""}),d.enable&&e.jsxs("div",{className:"grid gap-4 pl-6 border-l-2 border-primary/20",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"max_length",className:"text-xs font-medium",children:""}),e.jsx(ie,{id:"max_length",type:"number",min:"1",value:d.max_length,onChange:C=>j({...d,max_length:parseInt(C.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"max_sentence_num",className:"text-xs font-medium",children:""}),e.jsx(ie,{id:"max_sentence_num",type:"number",min:"1",value:d.max_sentence_num,onChange:C=>j({...d,max_sentence_num:parseInt(C.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Qe,{id:"enable_kaomoji_protection",checked:d.enable_kaomoji_protection,onCheckedChange:C=>j({...d,enable_kaomoji_protection:C})}),e.jsx(b,{htmlFor:"enable_kaomoji_protection",className:"cursor-pointer",children:""})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Qe,{id:"enable_overflow_return_all",checked:d.enable_overflow_return_all,onCheckedChange:C=>j({...d,enable_overflow_return_all:C})}),e.jsx(b,{htmlFor:"enable_overflow_return_all",className:"cursor-pointer",children:""})]}),e.jsx("p",{className:"text-xs text-muted-foreground -mt-2",children:""})]})]})})]})]})]})}function X0({config:n,onChange:i}){return e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:""}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Qe,{checked:n.enable_mood,onCheckedChange:c=>i({...n,enable_mood:c})}),e.jsx(b,{className:"cursor-pointer",children:""})]}),n.enable_mood&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{children:""}),e.jsx(ie,{type:"number",min:"1",value:n.mood_update_threshold,onChange:c=>i({...n,mood_update_threshold:parseInt(c.target.value)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{children:""}),e.jsx(Bs,{value:n.emotion_style,onChange:c=>i({...n,emotion_style:c.target.value}),placeholder:"",rows:2})]})]})]})]})}function K0({config:n,onChange:i}){return e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:""}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Qe,{checked:n.enable_asr,onCheckedChange:c=>i({...n,enable_asr:c})}),e.jsx(b,{className:"cursor-pointer",children:""})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})}function J0({config:n,onChange:i}){return e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"LPMM "}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Qe,{checked:n.enable,onCheckedChange:c=>i({...n,enable:c})}),e.jsx(b,{className:"cursor-pointer",children:" LPMM "})]}),n.enable&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{children:"LPMM "}),e.jsxs(Be,{value:n.lpmm_mode,onValueChange:c=>i({...n,lpmm_mode:c}),children:[e.jsx(Le,{children:e.jsx(He,{placeholder:" LPMM "})}),e.jsxs(Ue,{children:[e.jsx(te,{value:"classic",children:""}),e.jsx(te,{value:"agent",children:"Agent "})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{children:" TopK"}),e.jsx(ie,{type:"number",min:"1",value:n.rag_synonym_search_top_k,onChange:c=>i({...n,rag_synonym_search_top_k:parseInt(c.target.value)})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{children:""}),e.jsx(ie,{type:"number",step:"0.1",min:"0",max:"1",value:n.rag_synonym_threshold,onChange:c=>i({...n,rag_synonym_threshold:parseFloat(c.target.value)})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{children:""}),e.jsx(ie,{type:"number",min:"1",value:n.info_extraction_workers,onChange:c=>i({...n,info_extraction_workers:parseInt(c.target.value)})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{children:""}),e.jsx(ie,{type:"number",min:"1",value:n.embedding_dimension,onChange:c=>i({...n,embedding_dimension:parseInt(c.target.value)})})]})]})]})]})]})}function Z0({config:n,onChange:i}){const[c,d]=u.useState(""),[h,f]=u.useState("WARNING"),x=()=>{c&&!n.suppress_libraries.includes(c)&&(i({...n,suppress_libraries:[...n.suppress_libraries,c]}),d(""))},j=k=>{i({...n,suppress_libraries:n.suppress_libraries.filter(O=>O!==k)})},p=()=>{c&&!n.library_log_levels[c]&&(i({...n,library_log_levels:{...n.library_log_levels,[c]:h}}),d(""),f("WARNING"))},w=k=>{const O={...n.library_log_levels};delete O[k],i({...n,library_log_levels:O})},v=["DEBUG","INFO","WARNING","ERROR","CRITICAL"],y=["FULL","compact","lite"],S=["none","title","full"];return e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:""}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{children:""}),e.jsx(ie,{value:n.date_style,onChange:k=>i({...n,date_style:k.target.value}),placeholder:": m-d H:i:s"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"m=, d=, H=, i=, s="})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{children:""}),e.jsxs(Be,{value:n.log_level_style,onValueChange:k=>i({...n,log_level_style:k}),children:[e.jsx(Le,{children:e.jsx(He,{})}),e.jsx(Ue,{children:y.map(k=>e.jsx(te,{value:k,children:k},k))})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{children:""}),e.jsxs(Be,{value:n.color_text,onValueChange:k=>i({...n,color_text:k}),children:[e.jsx(Le,{children:e.jsx(He,{})}),e.jsx(Ue,{children:S.map(k=>e.jsx(te,{value:k,children:k},k))})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{children:""}),e.jsxs(Be,{value:n.log_level,onValueChange:k=>i({...n,log_level:k}),children:[e.jsx(Le,{children:e.jsx(He,{})}),e.jsx(Ue,{children:v.map(k=>e.jsx(te,{value:k,children:k},k))})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{children:""}),e.jsxs(Be,{value:n.console_log_level,onValueChange:k=>i({...n,console_log_level:k}),children:[e.jsx(Le,{children:e.jsx(He,{})}),e.jsx(Ue,{children:v.map(k=>e.jsx(te,{value:k,children:k},k))})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{children:""}),e.jsxs(Be,{value:n.file_log_level,onValueChange:k=>i({...n,file_log_level:k}),children:[e.jsx(Le,{children:e.jsx(He,{})}),e.jsx(Ue,{children:v.map(k=>e.jsx(te,{value:k,children:k},k))})]})]})]})]}),e.jsxs("div",{children:[e.jsx(b,{className:"mb-2 block",children:""}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx(ie,{value:c,onChange:k=>d(k.target.value),placeholder:"",className:"flex-1",onKeyDown:k=>{k.key==="Enter"&&(k.preventDefault(),x())}}),e.jsx(N,{onClick:x,size:"sm",className:"flex-shrink-0",children:e.jsx(ot,{className:"h-4 w-4",strokeWidth:2,fill:"none"})})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:n.suppress_libraries.map(k=>e.jsxs("div",{className:"flex items-center gap-1 bg-secondary px-3 py-1 rounded-md",children:[e.jsx("span",{className:"text-sm",children:k}),e.jsx(N,{variant:"ghost",size:"sm",className:"h-5 w-5 p-0",onClick:()=>j(k),children:e.jsx(ts,{className:"h-3 w-3",strokeWidth:2,fill:"none"})})]},k))})]}),e.jsxs("div",{children:[e.jsx(b,{className:"mb-2 block",children:""}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx(ie,{value:c,onChange:k=>d(k.target.value),placeholder:"",className:"flex-1"}),e.jsxs(Be,{value:h,onValueChange:f,children:[e.jsx(Le,{className:"w-32",children:e.jsx(He,{})}),e.jsx(Ue,{children:v.map(k=>e.jsx(te,{value:k,children:k},k))})]}),e.jsx(N,{onClick:p,size:"sm",children:e.jsx(ot,{className:"h-4 w-4",strokeWidth:2,fill:"none"})})]}),e.jsx("div",{className:"space-y-2",children:Object.entries(n.library_log_levels).map(([k,O])=>e.jsxs("div",{className:"flex items-center justify-between bg-secondary px-3 py-2 rounded-md",children:[e.jsx("span",{className:"text-sm font-medium",children:k}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:O}),e.jsx(N,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>w(k),children:e.jsx(ts,{className:"h-3 w-3",strokeWidth:2,fill:"none"})})]})]},k))})]})]})}function I0({config:n,onChange:i}){return e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:""}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(b,{children:" Prompt"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),e.jsx(Qe,{checked:n.show_prompt,onCheckedChange:c=>i({...n,show_prompt:c})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(b,{children:" Prompt"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),e.jsx(Qe,{checked:n.show_replyer_prompt,onCheckedChange:c=>i({...n,show_replyer_prompt:c})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(b,{children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),e.jsx(Qe,{checked:n.show_replyer_reasoning,onCheckedChange:c=>i({...n,show_replyer_reasoning:c})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(b,{children:" Jargon Prompt"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),e.jsx(Qe,{checked:n.show_jargon_prompt,onCheckedChange:c=>i({...n,show_jargon_prompt:c})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(b,{children:" Prompt"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),e.jsx(Qe,{checked:n.show_memory_prompt,onCheckedChange:c=>i({...n,show_memory_prompt:c})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(b,{children:" Planner Prompt"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:" Planner "})]}),e.jsx(Qe,{checked:n.show_planner_prompt,onCheckedChange:c=>i({...n,show_planner_prompt:c})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(b,{children:" LPMM "}),e.jsx("p",{className:"text-sm text-muted-foreground",children:" LPMM "})]}),e.jsx(Qe,{checked:n.show_lpmm_paragraph,onCheckedChange:c=>i({...n,show_lpmm_paragraph:c})})]})]})]})}function P0({config:n,onChange:i}){const[c,d]=u.useState(""),h=()=>{c&&!n.auth_token.includes(c)&&(i({...n,auth_token:[...n.auth_token,c]}),d(""))},f=x=>{i({...n,auth_token:n.auth_token.filter((j,p)=>p!==x)})};return e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"MaimMessage "}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(b,{children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:" MaimMessage "})]}),e.jsx(Qe,{checked:n.use_custom,onCheckedChange:x=>i({...n,use_custom:x})})]}),n.use_custom&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{children:""}),e.jsx(ie,{value:n.host,onChange:x=>i({...n,host:x.target.value}),placeholder:"127.0.0.1"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{children:""}),e.jsx(ie,{type:"number",value:n.port,onChange:x=>i({...n,port:parseInt(x.target.value)}),placeholder:"8090"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{children:""}),e.jsxs(Be,{value:n.mode,onValueChange:x=>i({...n,mode:x}),children:[e.jsx(Le,{children:e.jsx(He,{})}),e.jsxs(Ue,{children:[e.jsx(te,{value:"ws",children:"WebSocket (ws)"}),e.jsx(te,{value:"tcp",children:"TCP"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Qe,{checked:n.use_wss,onCheckedChange:x=>i({...n,use_wss:x}),disabled:n.mode!=="ws"}),e.jsx(b,{children:" WSS "})]})]}),n.use_wss&&n.mode==="ws"&&e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{children:"SSL "}),e.jsx(ie,{value:n.cert_file,onChange:x=>i({...n,cert_file:x.target.value}),placeholder:"cert.pem"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{children:"SSL "}),e.jsx(ie,{value:n.key_file,onChange:x=>i({...n,key_file:x.target.value}),placeholder:"key.pem"})]})]})]})]})]}),e.jsxs("div",{children:[e.jsx(b,{className:"mb-2 block",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:" API "}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx(ie,{value:c,onChange:x=>d(x.target.value),placeholder:"",onKeyDown:x=>{x.key==="Enter"&&(x.preventDefault(),h())}}),e.jsx(N,{onClick:h,size:"sm",children:e.jsx(ot,{className:"h-4 w-4",strokeWidth:2,fill:"none"})})]}),e.jsx("div",{className:"space-y-2",children:n.auth_token.map((x,j)=>e.jsxs("div",{className:"flex items-center justify-between bg-secondary px-3 py-2 rounded-md",children:[e.jsx("span",{className:"text-sm font-mono",children:x}),e.jsx(N,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>f(j),children:e.jsx(ts,{className:"h-3 w-3",strokeWidth:2,fill:"none"})})]},j))})]})]})}function W0({config:n,onChange:i}){return e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:""}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(b,{children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),e.jsx(Qe,{checked:n.enable,onCheckedChange:c=>i({...n,enable:c})})]})]})}const hn=u.forwardRef(({className:n,...i},c)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:c,className:X("w-full caption-bottom text-sm",n),...i})}));hn.displayName="Table";const xn=u.forwardRef(({className:n,...i},c)=>e.jsx("thead",{ref:c,className:X("[&_tr]:border-b",n),...i}));xn.displayName="TableHeader";const fn=u.forwardRef(({className:n,...i},c)=>e.jsx("tbody",{ref:c,className:X("[&_tr:last-child]:border-0",n),...i}));fn.displayName="TableBody";const ew=u.forwardRef(({className:n,...i},c)=>e.jsx("tfoot",{ref:c,className:X("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",n),...i}));ew.displayName="TableFooter";const dt=u.forwardRef(({className:n,...i},c)=>e.jsx("tr",{ref:c,className:X("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",n),...i}));dt.displayName="TableRow";const Ie=u.forwardRef(({className:n,...i},c)=>e.jsx("th",{ref:c,className:X("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",n),...i}));Ie.displayName="TableHead";const Fe=u.forwardRef(({className:n,...i},c)=>e.jsx("td",{ref:c,className:X("px-4 py-3 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",n),...i}));Fe.displayName="TableCell";const sw=u.forwardRef(({className:n,...i},c)=>e.jsx("caption",{ref:c,className:X("mt-4 text-sm text-muted-foreground",n),...i}));sw.displayName="TableCaption";const no=u.forwardRef(({className:n,...i},c)=>e.jsx(Qt,{ref:c,className:X("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",n),...i}));no.displayName=Qt.displayName;const io=u.forwardRef(({className:n,...i},c)=>e.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[e.jsx(zt,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),e.jsx(Qt.Input,{ref:c,className:X("flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",n),...i})]}));io.displayName=Qt.Input.displayName;const ro=u.forwardRef(({className:n,...i},c)=>e.jsx(Qt.List,{ref:c,className:X("max-h-[300px] overflow-y-auto overflow-x-hidden",n),...i}));ro.displayName=Qt.List.displayName;const co=u.forwardRef((n,i)=>e.jsx(Qt.Empty,{ref:i,className:"py-6 text-center text-sm",...n}));co.displayName=Qt.Empty.displayName;const vr=u.forwardRef(({className:n,...i},c)=>e.jsx(Qt.Group,{ref:c,className:X("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",n),...i}));vr.displayName=Qt.Group.displayName;const tw=u.forwardRef(({className:n,...i},c)=>e.jsx(Qt.Separator,{ref:c,className:X("-mx-1 h-px bg-border",n),...i}));tw.displayName=Qt.Separator.displayName;const Nr=u.forwardRef(({className:n,...i},c)=>e.jsx(Qt.Item,{ref:c,className:X("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",n),...i}));Nr.displayName=Qt.Item.displayName;const jt=u.forwardRef(({className:n,...i},c)=>e.jsx(eg,{ref:c,className:X("grid place-content-center peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",n),...i,children:e.jsx(ib,{className:X("grid place-content-center text-current"),children:e.jsx($t,{className:"h-4 w-4"})})}));jt.displayName=eg.displayName;const Dg=u.createContext(null),Og="maibot-completed-tours";function aw(){try{const n=localStorage.getItem(Og);return n?new Set(JSON.parse(n)):new Set}catch{return new Set}}function dp(n){localStorage.setItem(Og,JSON.stringify([...n]))}function lw({children:n}){const[i,c]=u.useState({activeTourId:null,stepIndex:0,isRunning:!1}),d=u.useRef(new Map),[,h]=u.useState(0),[f,x]=u.useState(aw),j=u.useCallback((D,C)=>{d.current.set(D,C),h($=>$+1)},[]),p=u.useCallback(D=>{d.current.delete(D),c(C=>C.activeTourId===D?{...C,activeTourId:null,isRunning:!1,stepIndex:0}:C)},[]),w=u.useCallback((D,C=0)=>{d.current.has(D)&&c({activeTourId:D,stepIndex:C,isRunning:!0})},[]),v=u.useCallback(()=>{c(D=>({...D,isRunning:!1}))},[]),y=u.useCallback(D=>{c(C=>({...C,stepIndex:D}))},[]),S=u.useCallback(()=>{c(D=>({...D,stepIndex:D.stepIndex+1}))},[]),k=u.useCallback(()=>{c(D=>({...D,stepIndex:Math.max(0,D.stepIndex-1)}))},[]),O=u.useCallback(()=>i.activeTourId?d.current.get(i.activeTourId)||[]:[],[i.activeTourId]),Y=u.useCallback(D=>{x(C=>{const $=new Set(C);return $.add(D),dp($),$})},[]),L=u.useCallback(D=>{const{action:C,index:$,status:G,type:T}=D,M=["finished","skipped"];if(C==="close"){c(ne=>({...ne,isRunning:!1,stepIndex:0}));return}M.includes(G)?c(ne=>(G==="finished"&&ne.activeTourId&&setTimeout(()=>Y(ne.activeTourId),0),{...ne,isRunning:!1,stepIndex:0})):T==="step:after"&&(C==="next"?c(ne=>({...ne,stepIndex:$+1})):C==="prev"&&c(ne=>({...ne,stepIndex:$-1})))},[Y]),R=u.useCallback(D=>f.has(D),[f]),H=u.useCallback(D=>{x(C=>{const $=new Set(C);return $.delete(D),dp($),$})},[]);return e.jsx(Dg.Provider,{value:{state:i,tours:d.current,registerTour:j,unregisterTour:p,startTour:w,stopTour:v,goToStep:y,nextStep:S,prevStep:k,getCurrentSteps:O,handleJoyrideCallback:L,isTourCompleted:R,markTourCompleted:Y,resetTourCompleted:H},children:n})}function Wu(){const n=u.useContext(Dg);if(!n)throw new Error("useTour must be used within a TourProvider");return n}const nw={options:{zIndex:1e4,primaryColor:"hsl(var(--primary))",textColor:"hsl(var(--foreground))",backgroundColor:"hsl(var(--background))",arrowColor:"hsl(var(--background))",overlayColor:"rgba(0, 0, 0, 0.5)"},tooltip:{borderRadius:"var(--radius)",padding:"1rem"},tooltipContainer:{textAlign:"left"},tooltipTitle:{fontSize:"1rem",fontWeight:600,marginBottom:"0.5rem"},tooltipContent:{fontSize:"0.875rem",padding:"0.5rem 0"},buttonNext:{backgroundColor:"hsl(var(--primary))",color:"hsl(var(--primary-foreground))",borderRadius:"calc(var(--radius) - 2px)",fontSize:"0.875rem",padding:"0.5rem 1rem"},buttonBack:{color:"hsl(var(--muted-foreground))",fontSize:"0.875rem",marginRight:"0.5rem"},buttonSkip:{color:"hsl(var(--muted-foreground))",fontSize:"0.875rem"},buttonClose:{color:"hsl(var(--muted-foreground))"},spotlight:{borderRadius:"var(--radius)"}},iw={back:"",close:"",last:"",next:"",nextLabelWithProgress:" ({step}/{steps})",open:"",skip:""};function rw(){const{state:n,getCurrentSteps:i,handleJoyrideCallback:c}=Wu(),d=i(),[h,f]=u.useState(!1),x=u.useRef(n.stepIndex),j=u.useRef(null);u.useEffect(()=>{x.current!==n.stepIndex&&(f(!1),x.current=n.stepIndex)},[n.stepIndex]),u.useEffect(()=>{if(!n.isRunning||d.length===0){f(!1);return}const v=d[n.stepIndex];if(!v){f(!1);return}const y=v.target;if(y==="body"){f(!0);return}f(!1);const S=setTimeout(()=>{const k=()=>{const R=document.querySelector(y);if(R){const H=R.getBoundingClientRect();if(H.width>0&&H.height>0)return!0}return!1};if(k()){setTimeout(()=>f(!0),100);return}const O=setInterval(()=>{k()&&(clearInterval(O),setTimeout(()=>f(!0),100))},100),Y=setTimeout(()=>{clearInterval(O),f(!0)},5e3),L=()=>{clearInterval(O),clearTimeout(Y)};j.current=L},150);return()=>{clearTimeout(S),j.current&&(j.current(),j.current=null)}},[n.isRunning,n.stepIndex,d]);const p=u.useRef(null);if(u.useEffect(()=>{let v=document.getElementById("tour-portal-container");return v||(v=document.createElement("div"),v.id="tour-portal-container",v.style.cssText="position: fixed; top: 0; left: 0; z-index: 99999; pointer-events: none;",document.body.appendChild(v)),p.current=v,()=>{}},[]),!n.isRunning||d.length===0||!h)return null;const w=e.jsx(Zb,{steps:d,stepIndex:n.stepIndex,run:n.isRunning,continuous:!0,showSkipButton:!0,showProgress:!0,disableOverlayClose:!0,disableScrolling:!1,disableScrollParentFix:!1,callback:c,styles:nw,locale:iw,scrollOffset:80,scrollToFirstStep:!0,floaterProps:{styles:{floater:{zIndex:99999}},disableAnimation:!0}},`tour-step-${n.stepIndex}`);return p.current?cN.createPortal(w,p.current):w}const il="model-assignment-tour",Rg=[{target:"body",content:"",placement:"center",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="sidebar-model-provider"]',content:' DeepSeek Siliconflow""',placement:"right",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="add-provider-button"]',content:'""',placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!0,hideFooter:!0},{target:'[data-tour="provider-dialog"]',content:"",placement:"left",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="provider-name-input"]',content:"",placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="provider-apikey-input"]',content:" API  API ",placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="provider-url-input"]',content:" API API ",placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="provider-template-select"]',content:"",placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="provider-save-button"]',content:"",placement:"top",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="provider-cancel-button"]',content:"",placement:"top",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!0,hideFooter:!0},{target:'[data-tour="sidebar-model-management"]',content:'""',placement:"right",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="add-model-button"]',content:'""',placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!0,hideFooter:!0},{target:'[data-tour="model-dialog"]',content:"",placement:"left",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="model-name-input"]',content:"",placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="model-provider-select"]',content:"",placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="model-identifier-input"]',content:"",placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="model-save-button"]',content:"",placement:"top",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1},{target:'[data-tour="model-cancel-button"]',content:"",placement:"top",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!0,hideFooter:!0},{target:'[data-tour="tasks-tab-trigger"]',content:'""',placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!0,hideFooter:!0},{target:'[data-tour="task-model-select"]',content:"",placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,hideCloseButton:!1,spotlightClicks:!1}],Lg={0:"/config/model",1:"/config/model",2:"/config/modelProvider",3:"/config/modelProvider",4:"/config/modelProvider",5:"/config/modelProvider",6:"/config/modelProvider",7:"/config/modelProvider",8:"/config/modelProvider",9:"/config/modelProvider",10:"/config/modelProvider",11:"/config/model",12:"/config/model",13:"/config/model",14:"/config/model",15:"/config/model",16:"/config/model",17:"/config/model",18:"/config/model",19:"/config/model"},or=[{id:"siliconflow",name:"SiliconFlow",base_url:"https://api.siliconflow.cn/v1",client_type:"openai",display_name:" (SiliconFlow)",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"deepseek",name:"DeepSeek",base_url:"https://api.deepseek.com",client_type:"openai",display_name:"DeepSeek",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"rinkoai",name:"RinkoAI",base_url:"https://rinkoai.com/v1",client_type:"openai",display_name:"RinkoAI",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"zhipu",name:"ZhipuAI",base_url:"https://open.bigmodel.cn/api/paas/v4",client_type:"openai",display_name:" AI (ZhipuAI / GLM)",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"moonshot",name:"Moonshot",base_url:"https://api.moonshot.cn/v1",client_type:"openai",display_name:" (Moonshot / Kimi)",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"doubao",name:"Doubao",base_url:"https://ark.cn-beijing.volces.com/api/v3",client_type:"openai",display_name:" (Doubao)",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"alibaba",name:"Alibaba",base_url:"https://dashscope.aliyuncs.com/compatible-mode/v1",client_type:"openai",display_name:" (Alibaba Qwen)",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"baichuan",name:"Baichuan",base_url:"https://api.baichuan-ai.com/v1",client_type:"openai",display_name:" (Baichuan)",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"minimax",name:"MiniMax",base_url:"https://api.minimax.chat/v1",client_type:"openai",display_name:"MiniMax ( AI)",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"stepfun",name:"StepFun",base_url:"https://api.stepfun.com/v1",client_type:"openai",display_name:" (StepFun)",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"lingyi",name:"Lingyi",base_url:"https://api.lingyiwanwu.com/v1",client_type:"openai",display_name:" (Lingyi / Yi)",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"openai",name:"OpenAI",base_url:"https://api.openai.com/v1",client_type:"openai",display_name:"OpenAI",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"xai",name:"xAI",base_url:"https://api.x.ai/v1",client_type:"openai",display_name:"xAI (Grok)",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"anthropic",name:"Anthropic",base_url:"https://api.anthropic.com/v1",client_type:"openai",display_name:"Anthropic (Claude)"},{id:"gemini",name:"Gemini",base_url:"https://generativelanguage.googleapis.com/v1beta",client_type:"gemini",display_name:"Google Gemini",modelFetcher:{endpoint:"/models",parser:"gemini"}},{id:"cohere",name:"Cohere",base_url:"https://api.cohere.ai/v1",client_type:"openai",display_name:"Cohere"},{id:"groq",name:"Groq",base_url:"https://api.groq.com/openai/v1",client_type:"openai",display_name:"Groq",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"together",name:"Together AI",base_url:"https://api.together.xyz/v1",client_type:"openai",display_name:"Together AI",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"fireworks",name:"Fireworks",base_url:"https://api.fireworks.ai/inference/v1",client_type:"openai",display_name:"Fireworks AI",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"mistral",name:"Mistral",base_url:"https://api.mistral.ai/v1",client_type:"openai",display_name:"Mistral AI",modelFetcher:{endpoint:"/models",parser:"openai"}},{id:"perplexity",name:"Perplexity",base_url:"https://api.perplexity.ai",client_type:"openai",display_name:"Perplexity AI"},{id:"custom",name:"",base_url:"",client_type:"openai",display_name:""}];function up(n){return n?n.replace(/\/+$/,"").toLowerCase():""}function cw(n){if(!n)return null;const i=up(n);return or.find(c=>c.id!=="custom"&&up(c.base_url)===i)||null}function ow(){const[n,i]=u.useState([]),[c,d]=u.useState(!0),[h,f]=u.useState(!1),[x,j]=u.useState(!1),[p,w]=u.useState(!1),[v,y]=u.useState(!1),[S,k]=u.useState(!1),[O,Y]=u.useState(!1),[L,R]=u.useState(null),[H,D]=u.useState(null),[C,$]=u.useState("custom"),[G,T]=u.useState(!1),[M,ne]=u.useState(!1),[fe,_e]=u.useState(null),[Se,je]=u.useState(!1),[ye,be]=u.useState(""),[A,K]=u.useState(new Set),[E,se]=u.useState(!1),[_,me]=u.useState(1),[re,le]=u.useState(20),[pe,Ne]=u.useState(""),[he,Q]=u.useState({}),[P,q]=u.useState(new Set),[W,Ce]=u.useState(new Map),{toast:Me}=Vs(),ce=ja(),{state:De,goToStep:Fs,registerTour:Qs}=Wu(),ue=u.useRef(null),Ee=u.useRef(!0);u.useEffect(()=>{Qs(il,Rg)},[Qs]),u.useEffect(()=>{if(De.activeTourId===il&&De.isRunning){const ee=Lg[De.stepIndex];ee&&!window.location.pathname.endsWith(ee.replace("/config/",""))&&ce({to:ee})}},[De.stepIndex,De.activeTourId,De.isRunning,ce]);const as=u.useRef(De.stepIndex);u.useEffect(()=>{if(De.activeTourId===il&&De.isRunning){const ee=as.current,we=De.stepIndex;ee>=3&&ee<=9&&we<3&&Y(!1),ee>=10&&we>=3&&we<=9&&(Q({}),$("custom"),R({name:"",base_url:"",api_key:"",client_type:"openai",max_retry:2,timeout:30,retry_interval:10}),D(null),je(!1),Y(!0)),as.current=we}},[De.stepIndex,De.activeTourId,De.isRunning]),u.useEffect(()=>{if(De.activeTourId!==il||!De.isRunning)return;const ee=we=>{const Ve=we.target,pt=De.stepIndex;pt===2&&Ve.closest('[data-tour="add-provider-button"]')?setTimeout(()=>Fs(3),300):pt===9&&Ve.closest('[data-tour="provider-cancel-button"]')&&setTimeout(()=>Fs(10),300)};return document.addEventListener("click",ee,!0),()=>document.removeEventListener("click",ee,!0)},[De,Fs]),u.useEffect(()=>{Ke()},[]);const Ke=async()=>{try{d(!0);const ee=await ni();i(ee.api_providers||[]),w(!1),Ee.current=!1}catch(ee){console.error(":",ee)}finally{d(!1)}},lt=async()=>{try{y(!0),lo().catch(()=>{}),k(!0)}catch(ee){console.error(":",ee),k(!1),Me({title:"",description:"",variant:"destructive"}),y(!1)}},Ot=async()=>{try{f(!0),ue.current&&clearTimeout(ue.current);const ee=await ni();ee.api_providers=n,await to(ee),w(!1),Me({title:"",description:"..."}),await lt()}catch(ee){console.error(":",ee),Me({title:"",description:ee.message,variant:"destructive"}),f(!1)}},bt=()=>{localStorage.removeItem("access-token"),window.location.href="/auth"},Pe=()=>{k(!1),y(!1),Me({title:"",description:"",variant:"destructive"})},U=u.useCallback(async ee=>{if(!Ee.current)try{j(!0),await qu("api_providers",ee),w(!1)}catch(we){console.error(":",we),w(!0)}finally{j(!1)}},[]);u.useEffect(()=>{if(!Ee.current)return w(!0),ue.current&&clearTimeout(ue.current),ue.current=setTimeout(()=>{U(n)},2e3),()=>{ue.current&&clearTimeout(ue.current)}},[n,U]);const Re=async()=>{try{f(!0),ue.current&&clearTimeout(ue.current);const ee=await ni();ee.api_providers=n,await to(ee),w(!1),Me({title:"",description:""})}catch(ee){console.error(":",ee),Me({title:"",description:ee.message,variant:"destructive"})}finally{f(!1)}},ze=(ee,we)=>{if(Q({}),ee){const Ve=or.find(pt=>pt.base_url===ee.base_url&&pt.client_type===ee.client_type);$(Ve?.id||"custom"),R(ee)}else $("custom"),R({name:"",base_url:"",api_key:"",client_type:"openai",max_retry:2,timeout:30,retry_interval:10});D(we),je(!1),Y(!0)},Ye=ee=>{$(ee),T(!1);const we=or.find(Ve=>Ve.id===ee);we&&we.id!=="custom"?R(Ve=>({...Ve,name:we.name,base_url:we.base_url,client_type:we.client_type})):we?.id==="custom"&&R(Ve=>({...Ve,name:"",base_url:"",client_type:"openai"}))},zs=u.useMemo(()=>C!=="custom",[C]),We=async()=>{if(L?.api_key)try{await navigator.clipboard.writeText(L.api_key),Me({title:"",description:"API Key "})}catch{Me({title:"",description:"",variant:"destructive"})}},nt=()=>{if(!L)return;const ee={};if(L.name?.trim()||(ee.name=""),L.base_url?.trim()||(ee.base_url=" URL"),L.api_key?.trim()||(ee.api_key=" API Key"),Object.keys(ee).length>0){Q(ee);return}Q({});const we={...L,max_retry:L.max_retry??2,timeout:L.timeout??30,retry_interval:L.retry_interval??10};if(H!==null){const Ve=[...n];Ve[H]=we,i(Ve)}else i([...n,we]);Y(!1),R(null),D(null)},vs=ee=>{if(!ee&&L){const we={...L,max_retry:L.max_retry??2,timeout:L.timeout??30,retry_interval:L.retry_interval??10};R(we)}Y(ee)},ke=ee=>{_e(ee),ne(!0)},ve=()=>{if(fe!==null){const ee=n.filter((we,Ve)=>Ve!==fe);i(ee),Me({title:"",description:""})}ne(!1),_e(null)},is=ee=>{const we=new Set(A);we.has(ee)?we.delete(ee):we.add(ee),K(we)},_s=()=>{if(A.size===Ys.length)K(new Set);else{const ee=Ys.map((we,Ve)=>n.findIndex(pt=>pt===Ys[Ve]));K(new Set(ee))}},At=()=>{if(A.size===0){Me({title:"",description:"",variant:"default"});return}se(!0)},Ps=()=>{const ee=n.filter((we,Ve)=>!A.has(Ve));i(ee),K(new Set),se(!1),Me({title:"",description:` ${A.size} `})},Ys=n.filter(ee=>{if(!ye)return!0;const we=ye.toLowerCase();return ee.name.toLowerCase().includes(we)||ee.base_url.toLowerCase().includes(we)||ee.client_type.toLowerCase().includes(we)}),Et=Math.ceil(Ys.length/re),Rt=Ys.slice((_-1)*re,_*re),Ha=()=>{const ee=parseInt(pe);ee>=1&&ee<=Et&&(me(ee),Ne(""))},Yt=async ee=>{q(we=>new Set(we).add(ee));try{const we=await D0(ee);Ce(Ve=>new Map(Ve).set(ee,we)),we.network_ok?we.api_key_valid===!0?Me({title:"",description:`${ee} API Key  (${we.latency_ms}ms)`}):we.api_key_valid===!1?Me({title:" Key ",description:`${ee}  API Key `,variant:"destructive"}):Me({title:"",description:`${ee}  (${we.latency_ms}ms)`}):Me({title:"",description:we.error||"",variant:"destructive"})}catch(we){Me({title:"",description:we.message,variant:"destructive"})}finally{q(we=>{const Ve=new Set(we);return Ve.delete(ee),Ve})}},qa=async()=>{for(const ee of n)await Yt(ee.name)},Ta=ee=>{const we=P.has(ee),Ve=W.get(ee);return we?e.jsxs($e,{variant:"secondary",className:"gap-1",children:[e.jsx(kt,{className:"h-3 w-3 animate-spin"}),""]}):Ve?Ve.network_ok?Ve.api_key_valid===!0?e.jsxs($e,{className:"gap-1 bg-green-600 hover:bg-green-700",children:[e.jsx(fa,{className:"h-3 w-3"}),""]}):Ve.api_key_valid===!1?e.jsxs($e,{variant:"destructive",className:"gap-1",children:[e.jsx(Sa,{className:"h-3 w-3"}),"Key"]}):e.jsxs($e,{className:"gap-1 bg-blue-600 hover:bg-blue-700",children:[e.jsx(fa,{className:"h-3 w-3"}),""]}):e.jsxs($e,{variant:"destructive",className:"gap-1",children:[e.jsx(cg,{className:"h-3 w-3"}),""]}):null};return c?e.jsx("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("p",{className:"text-muted-foreground",children:"..."})})}):e.jsxs("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"AI"}),e.jsx("p",{className:"text-muted-foreground mt-1 sm:mt-2 text-sm sm:text-base",children:" AI  API "})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[A.size>0&&e.jsxs(N,{onClick:At,size:"sm",variant:"destructive",className:"w-full sm:w-auto",children:[e.jsx(ts,{className:"mr-2 h-4 w-4",strokeWidth:2,fill:"none"})," (",A.size,")"]}),e.jsxs(N,{onClick:qa,size:"sm",variant:"outline",className:"w-full sm:w-auto",disabled:n.length===0||P.size>0,children:[e.jsx(cn,{className:"mr-2 h-4 w-4"}),P.size>0?` (${P.size})`:""]}),e.jsxs(N,{onClick:()=>ze(null,null),size:"sm",className:"w-full sm:w-auto","data-tour":"add-provider-button",children:[e.jsx(ot,{className:"mr-2 h-4 w-4",strokeWidth:2,fill:"none"}),""]}),e.jsxs(N,{onClick:Re,disabled:h||x||!p||v,size:"sm",variant:"outline",className:"w-full sm:w-auto sm:min-w-[120px]",children:[e.jsx(yr,{className:"mr-2 h-4 w-4",strokeWidth:2,fill:"none"}),h?"...":x?"...":p?"":""]}),e.jsxs(ps,{children:[e.jsx(tt,{asChild:!0,children:e.jsxs(N,{disabled:h||x||v,size:"sm",className:"w-full sm:w-auto sm:min-w-[120px]",children:[e.jsx(br,{className:"mr-2 h-4 w-4"}),v?"...":p?"":""]})}),e.jsxs(rs,{children:[e.jsxs(cs,{children:[e.jsx(ds,{children:""}),e.jsx(us,{asChild:!0,children:e.jsx("div",{children:e.jsx("p",{children:p?",":","})})})]}),e.jsxs(os,{children:[e.jsx(hs,{children:""}),e.jsx(ms,{onClick:p?Ot:lt,children:p?"":""})]})]})]})]})]}),e.jsxs(cl,{children:[e.jsx(La,{className:"h-4 w-4"}),e.jsxs(ol,{children:["",e.jsx("strong",{children:""}),'""']})]}),e.jsxs(ss,{className:"h-[calc(100vh-260px)]",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2 mb-4",children:[e.jsxs("div",{className:"relative w-full sm:flex-1 sm:max-w-sm",children:[e.jsx(zt,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(ie,{placeholder:"URL ...",value:ye,onChange:ee=>be(ee.target.value),className:"pl-9"})]}),ye&&e.jsxs("p",{className:"text-sm text-muted-foreground whitespace-nowrap",children:[" ",Ys.length," "]})]}),e.jsx("div",{className:"md:hidden space-y-3",children:Ys.length===0?e.jsx("div",{className:"text-center text-muted-foreground py-8 rounded-lg border bg-card",children:ye?"":'""'}):Rt.map((ee,we)=>{const Ve=n.findIndex(pt=>pt===ee);return e.jsxs("div",{className:"rounded-lg border bg-card p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("h3",{className:"font-semibold text-base truncate",children:ee.name}),Ta(ee.name)]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1 break-all",children:ee.base_url})]}),e.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[e.jsx(N,{variant:"outline",size:"sm",onClick:()=>Yt(ee.name),disabled:P.has(ee.name),title:"",children:P.has(ee.name)?e.jsx(kt,{className:"h-4 w-4 animate-spin"}):e.jsx(cn,{className:"h-4 w-4"})}),e.jsx(N,{variant:"default",size:"sm",onClick:()=>ze(ee,Ve),children:e.jsx(on,{className:"h-4 w-4",strokeWidth:2,fill:"none"})}),e.jsx(N,{size:"sm",onClick:()=>ke(Ve),className:"bg-red-600 hover:bg-red-700 text-white",children:e.jsx(ts,{className:"h-4 w-4",strokeWidth:2,fill:"none"})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground text-xs",children:""}),e.jsx("p",{className:"font-medium",children:ee.client_type})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground text-xs",children:""}),e.jsx("p",{className:"font-medium",children:ee.max_retry})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground text-xs",children:"()"}),e.jsx("p",{className:"font-medium",children:ee.timeout})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground text-xs",children:"()"}),e.jsx("p",{className:"font-medium",children:ee.retry_interval})]})]})]},we)})}),e.jsx("div",{className:"hidden md:block rounded-lg border bg-card overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(hn,{children:[e.jsx(xn,{children:e.jsxs(dt,{children:[e.jsx(Ie,{className:"w-12",children:e.jsx(jt,{checked:A.size===Ys.length&&Ys.length>0,onCheckedChange:_s})}),e.jsx(Ie,{children:""}),e.jsx(Ie,{children:""}),e.jsx(Ie,{children:"URL"}),e.jsx(Ie,{children:""}),e.jsx(Ie,{className:"text-right",children:""}),e.jsx(Ie,{className:"text-right",children:"()"}),e.jsx(Ie,{className:"text-right",children:"()"}),e.jsx(Ie,{className:"text-right",children:""})]})}),e.jsx(fn,{children:Rt.length===0?e.jsx(dt,{children:e.jsx(Fe,{colSpan:9,className:"text-center text-muted-foreground py-8",children:ye?"":'""'})}):Rt.map((ee,we)=>{const Ve=n.findIndex(pt=>pt===ee);return e.jsxs(dt,{children:[e.jsx(Fe,{children:e.jsx(jt,{checked:A.has(Ve),onCheckedChange:()=>is(Ve)})}),e.jsx(Fe,{children:Ta(ee.name)||e.jsx($e,{variant:"outline",className:"text-muted-foreground",children:""})}),e.jsx(Fe,{className:"font-medium",children:ee.name}),e.jsx(Fe,{className:"max-w-xs truncate",title:ee.base_url,children:ee.base_url}),e.jsx(Fe,{children:ee.client_type}),e.jsx(Fe,{className:"text-right",children:ee.max_retry}),e.jsx(Fe,{className:"text-right",children:ee.timeout}),e.jsx(Fe,{className:"text-right",children:ee.retry_interval}),e.jsx(Fe,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(N,{variant:"outline",size:"sm",onClick:()=>Yt(ee.name),disabled:P.has(ee.name),title:"",children:P.has(ee.name)?e.jsx(kt,{className:"h-4 w-4 animate-spin"}):e.jsx(cn,{className:"h-4 w-4"})}),e.jsxs(N,{variant:"default",size:"sm",onClick:()=>ze(ee,Ve),children:[e.jsx(on,{className:"h-4 w-4 mr-1",strokeWidth:2,fill:"none"}),""]}),e.jsxs(N,{size:"sm",onClick:()=>ke(Ve),className:"bg-red-600 hover:bg-red-700 text-white",children:[e.jsx(ts,{className:"h-4 w-4 mr-1",strokeWidth:2,fill:"none"}),""]})]})})]},we)})})]})})}),Ys.length>0&&e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{htmlFor:"page-size-provider",className:"text-sm whitespace-nowrap",children:""}),e.jsxs(Be,{value:re.toString(),onValueChange:ee=>{le(parseInt(ee)),me(1),K(new Set)},children:[e.jsx(Le,{id:"page-size-provider",className:"w-20",children:e.jsx(He,{})}),e.jsxs(Ue,{children:[e.jsx(te,{value:"10",children:"10"}),e.jsx(te,{value:"20",children:"20"}),e.jsx(te,{value:"50",children:"50"}),e.jsx(te,{value:"100",children:"100"})]})]}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[" ",(_-1)*re+1," "," ",Math.min(_*re,Ys.length),"  ",Ys.length," "]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{variant:"outline",size:"sm",onClick:()=>me(1),disabled:_===1,className:"hidden sm:flex",children:e.jsx(di,{className:"h-4 w-4"})}),e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>me(ee=>Math.max(1,ee-1)),disabled:_===1,children:[e.jsx(Hl,{className:"h-4 w-4 sm:mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{type:"number",value:pe,onChange:ee=>Ne(ee.target.value),onKeyDown:ee=>ee.key==="Enter"&&Ha(),placeholder:_.toString(),className:"w-16 h-8 text-center",min:1,max:Et}),e.jsx(N,{variant:"outline",size:"sm",onClick:Ha,disabled:!pe,className:"h-8",children:""})]}),e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>me(ee=>ee+1),disabled:_>=Et,children:[e.jsx("span",{className:"hidden sm:inline",children:""}),e.jsx(ul,{className:"h-4 w-4 sm:ml-1"})]}),e.jsx(N,{variant:"outline",size:"sm",onClick:()=>me(Et),disabled:_>=Et,className:"hidden sm:flex",children:e.jsx(ui,{className:"h-4 w-4"})})]})]})]}),e.jsx($s,{open:O,onOpenChange:vs,children:e.jsxs(Hs,{className:"max-w-[95vw] sm:max-w-2xl max-h-[90vh] overflow-y-auto","data-tour":"provider-dialog",preventOutsideClose:De.isRunning,children:[e.jsxs(qs,{children:[e.jsx(Gs,{children:H!==null?"":""}),e.jsx(Is,{children:" API "})]}),e.jsxs("form",{onSubmit:ee=>{ee.preventDefault(),nt()},autoComplete:"off",children:[e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2","data-tour":"provider-template-select",children:[e.jsx(b,{htmlFor:"template",children:""}),e.jsxs(Ua,{open:G,onOpenChange:T,children:[e.jsx(Ba,{asChild:!0,children:e.jsxs(N,{variant:"outline",role:"combobox","aria-expanded":G,className:"w-full justify-between",children:[C?or.find(ee=>ee.id===C)?.display_name:"...",e.jsx(Yu,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsx(ka,{className:"p-0",align:"start",style:{width:"var(--radix-popover-trigger-width)"},children:e.jsxs(no,{children:[e.jsx(io,{placeholder:"..."}),e.jsx(ss,{className:"h-[300px]",children:e.jsxs(ro,{className:"max-h-none overflow-visible",children:[e.jsx(co,{children:""}),e.jsx(vr,{children:or.map(ee=>e.jsxs(Nr,{value:ee.display_name,onSelect:()=>Ye(ee.id),children:[e.jsx($t,{className:`mr-2 h-4 w-4 ${C===ee.id?"opacity-100":"opacity-0"}`}),ee.display_name]},ee.id))})]})})]})})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" URL ,"})]}),e.jsxs("div",{className:"grid gap-2","data-tour":"provider-name-input",children:[e.jsx(b,{htmlFor:"name",className:he.name?"text-destructive":"",children:" *"}),e.jsx(ie,{id:"name",value:L?.name||"",onChange:ee=>{R(we=>we?{...we,name:ee.target.value}:null),he.name&&Q(we=>({...we,name:void 0}))},placeholder:": DeepSeek, SiliconFlow",className:he.name?"border-destructive focus-visible:ring-destructive":""}),he.name&&e.jsx("p",{className:"text-xs text-destructive",children:he.name})]}),e.jsxs("div",{className:"grid gap-2","data-tour":"provider-url-input",children:[e.jsx(b,{htmlFor:"base_url",className:he.base_url?"text-destructive":"",children:" URL *"}),e.jsx(ie,{id:"base_url",value:L?.base_url||"",onChange:ee=>{R(we=>we?{...we,base_url:ee.target.value}:null),he.base_url&&Q(we=>({...we,base_url:void 0}))},placeholder:"https://api.example.com/v1",disabled:zs,className:`${zs?"bg-muted cursor-not-allowed":""} ${he.base_url?"border-destructive focus-visible:ring-destructive":""}`}),he.base_url&&e.jsx("p",{className:"text-xs text-destructive",children:he.base_url}),zs&&!he.base_url&&e.jsx("p",{className:"text-xs text-muted-foreground",children:' URL ,""'})]}),e.jsxs("div",{className:"grid gap-2","data-tour":"provider-apikey-input",children:[e.jsx(b,{htmlFor:"api_key",className:he.api_key?"text-destructive":"",children:"API Key *"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ie,{id:"api_key",type:Se?"text":"password",value:L?.api_key||"",onChange:ee=>{R(we=>we?{...we,api_key:ee.target.value}:null),he.api_key&&Q(we=>({...we,api_key:void 0}))},placeholder:"sk-...",className:`flex-1 ${he.api_key?"border-destructive focus-visible:ring-destructive":""}`}),e.jsx(N,{type:"button",variant:"outline",size:"icon",onClick:()=>je(!Se),title:Se?"":"",children:Se?e.jsx(xr,{className:"h-4 w-4"}):e.jsx(Dt,{className:"h-4 w-4"})}),e.jsx(N,{type:"button",variant:"outline",size:"icon",onClick:We,title:"",children:e.jsx(Pc,{className:"h-4 w-4"})})]}),he.api_key&&e.jsx("p",{className:"text-xs text-destructive",children:he.api_key})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"client_type",children:""}),e.jsxs(Be,{value:L?.client_type||"openai",onValueChange:ee=>R(we=>we?{...we,client_type:ee}:null),disabled:zs,children:[e.jsx(Le,{id:"client_type",className:zs?"bg-muted cursor-not-allowed":"",children:e.jsx(He,{placeholder:""})}),e.jsxs(Ue,{children:[e.jsx(te,{value:"openai",children:"OpenAI"}),e.jsx(te,{value:"gemini",children:"Gemini"})]})]}),zs&&e.jsx("p",{className:"text-xs text-muted-foreground",children:',""'})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"max_retry",children:""}),e.jsx(ie,{id:"max_retry",type:"number",min:"0",value:L?.max_retry??"",onChange:ee=>{const we=ee.target.value===""?null:parseInt(ee.target.value);R(Ve=>Ve?{...Ve,max_retry:we}:null)},placeholder:": 2"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"timeout",children:"()"}),e.jsx(ie,{id:"timeout",type:"number",min:"1",value:L?.timeout??"",onChange:ee=>{const we=ee.target.value===""?null:parseInt(ee.target.value);R(Ve=>Ve?{...Ve,timeout:we}:null)},placeholder:": 30"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"retry_interval",children:"()"}),e.jsx(ie,{id:"retry_interval",type:"number",min:"1",value:L?.retry_interval??"",onChange:ee=>{const we=ee.target.value===""?null:parseInt(ee.target.value);R(Ve=>Ve?{...Ve,retry_interval:we}:null)},placeholder:": 10"})]})]})]}),e.jsxs(at,{children:[e.jsx(N,{type:"button",variant:"outline",onClick:()=>Y(!1),"data-tour":"provider-cancel-button",children:""}),e.jsx(N,{type:"submit","data-tour":"provider-save-button",children:""})]})]})]})}),e.jsx(ps,{open:M,onOpenChange:ne,children:e.jsxs(rs,{children:[e.jsxs(cs,{children:[e.jsx(ds,{children:""}),e.jsxs(us,{children:[' "',fe!==null?n[fe]?.name:"",'"  ']})]}),e.jsxs(os,{children:[e.jsx(hs,{children:""}),e.jsx(ms,{onClick:ve,children:""})]})]})}),e.jsx(ps,{open:E,onOpenChange:se,children:e.jsxs(rs,{children:[e.jsxs(cs,{children:[e.jsx(ds,{children:""}),e.jsxs(us,{children:[" ",A.size,"  "]})]}),e.jsxs(os,{children:[e.jsx(hs,{children:""}),e.jsx(ms,{onClick:Ps,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:""})]})]})}),S&&e.jsx(Pu,{onRestartComplete:bt,onRestartFailed:Pe})]})}function dw({value:n,label:i,onRemove:c}){const{attributes:d,listeners:h,setNodeRef:f,transform:x,transition:j,isDragging:p}=ry({id:n}),w={transform:cy.Transform.toString(x),transition:j,opacity:p?.5:1},v=S=>{S.preventDefault(),S.stopPropagation(),c(n)},y=S=>{S.stopPropagation()};return e.jsx("div",{ref:f,style:w,className:X("inline-flex items-center gap-1",p&&"shadow-lg"),children:e.jsxs($e,{variant:"secondary",className:"cursor-move hover:bg-secondary/80 flex items-center gap-1",children:[e.jsx("div",{...d,...h,className:"cursor-grab active:cursor-grabbing flex items-center",children:e.jsx(Sb,{className:"h-3 w-3 text-muted-foreground"})}),e.jsx("span",{children:i}),e.jsx("button",{type:"button",className:"ml-1 rounded-sm hover:bg-destructive/20 focus:outline-none focus:ring-1 focus:ring-destructive",onClick:v,onPointerDown:y,onMouseDown:S=>S.stopPropagation(),children:e.jsx(dl,{className:"h-3 w-3 cursor-pointer hover:text-destructive",strokeWidth:2,fill:"none"})})]})})}function uw({options:n,selected:i,onChange:c,placeholder:d="...",emptyText:h="",className:f}){const[x,j]=u.useState(!1),p=Pb(Pf(iy,{activationConstraint:{distance:8}}),Pf(ny,{coordinateGetter:ly})),w=S=>{i.includes(S)?c(i.filter(k=>k!==S)):c([...i,S])},v=S=>{c(i.filter(k=>k!==S))},y=S=>{const{active:k,over:O}=S;if(O&&k.id!==O.id){const Y=i.indexOf(k.id),L=i.indexOf(O.id);c(ay(i,Y,L))}};return e.jsxs(Ua,{open:x,onOpenChange:j,children:[e.jsx(Ba,{asChild:!0,children:e.jsxs(N,{variant:"outline",role:"combobox","aria-expanded":x,className:X("w-full justify-between min-h-10 h-auto",f),children:[e.jsx(Wb,{sensors:p,collisionDetection:ey,onDragEnd:y,children:e.jsx(sy,{items:i,strategy:ty,children:e.jsx("div",{className:"flex gap-1 flex-wrap flex-1",children:i.length===0?e.jsx("span",{className:"text-muted-foreground",children:d}):i.map(S=>{const k=n.find(O=>O.value===S);return e.jsx(dw,{value:S,label:k?.label||S,onRemove:v},S)})})})}),e.jsx(Yu,{className:"ml-2 h-4 w-4 shrink-0 opacity-50",strokeWidth:2,fill:"none"})]})}),e.jsx(ka,{className:"w-full p-0",align:"start",children:e.jsxs(no,{children:[e.jsx(io,{placeholder:"...",className:"h-9"}),e.jsxs(ro,{children:[e.jsx(co,{children:h}),e.jsx(vr,{children:n.map(S=>{const k=i.includes(S.value);return e.jsxs(Nr,{value:S.value,onSelect:()=>w(S.value),children:[e.jsx("div",{className:X("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",k?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"),children:e.jsx($t,{className:"h-3 w-3",strokeWidth:2,fill:"none"})}),e.jsx("span",{children:S.label})]},S.value)})})]})]})})]})}function Ug(n){return typeof n=="boolean"?"boolean":typeof n=="number"?"number":"string"}function mw(n,i){switch(i){case"boolean":return n==="true";case"number":{const c=parseFloat(n);return isNaN(c)?0:c}default:return n}}function zu(n){return Object.entries(n).map(([i,c])=>({id:crypto.randomUUID(),key:i,value:c,type:Ug(c)}))}function Au(n){const i={};for(const c of n)c.key.trim()&&(i[c.key.trim()]=c.value);return i}function Mu(n){if(!n.trim())return{valid:!0,parsed:{}};try{const i=JSON.parse(n);if(typeof i!="object"||i===null||Array.isArray(i))return{valid:!1,error:" JSON  {}"};for(const[c,d]of Object.entries(i))if(d!==null&&!["string","number","boolean"].includes(typeof d))return{valid:!1,error:` "${c}"  string/number/boolean`};return{valid:!0,parsed:i}}catch{return{valid:!1,error:"JSON "}}}function hw(n){switch(n){case"boolean":return"";case"number":return"";default:return""}}function xw(n){switch(n){case"boolean":return"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400";case"number":return"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400";default:return"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400"}}function fw({value:n,onChange:i,className:c,placeholder:d="..."}){const[h,f]=u.useState("list"),[x,j]=u.useState(()=>zu(n||{})),[p,w]=u.useState(()=>Object.keys(n||{}).length>0?JSON.stringify(n,null,2):""),[v,y]=u.useState(null);u.useEffect(()=>{const H=zu(n||{});j(H),w(Object.keys(n||{}).length>0?JSON.stringify(n,null,2):"")},[n]);const S=u.useMemo(()=>{const H=Mu(p);return H.valid&&H.parsed?{success:!0,data:H.parsed}:{success:!1,data:{}}},[p]),k=u.useCallback(H=>{const D=H;if(D==="json"&&h==="list"){const C=Au(x);w(Object.keys(C).length>0?JSON.stringify(C,null,2):""),y(null)}else if(D==="list"&&h==="json"){const C=Mu(p);C.valid&&C.parsed&&(j(zu(C.parsed)),y(null))}f(D)},[h,x,p]),O=u.useCallback(()=>{const H={id:crypto.randomUUID(),key:"",value:"",type:"string"},D=[...x,H];j(D)},[x]),Y=u.useCallback(H=>{const D=x.filter(C=>C.id!==H);j(D),i(Au(D))},[x,i]),L=u.useCallback((H,D,C)=>{const $=x.map(G=>{if(G.id!==H)return G;if(D==="type"){const T=C;let M;return T==="boolean"?M=G.value==="true"||G.value===!0:T==="number"?M=typeof G.value=="number"?G.value:parseFloat(String(G.value))||0:M=String(G.value),{...G,type:T,value:M}}else return D==="value"?{...G,value:mw(C,G.type)}:{...G,[D]:C}});j($),i(Au($))},[x,i]),R=u.useCallback(H=>{w(H);const D=Mu(H);D.valid&&D.parsed?(y(null),i(D.parsed)):y(D.error||"JSON ")},[i]);return e.jsxs("div",{className:X("space-y-3",c),children:[e.jsx(b,{className:"text-sm font-medium",children:""}),e.jsxs(Ca,{value:h,onValueChange:k,className:"w-full",children:[e.jsxs(pa,{className:"h-8 p-0.5 bg-muted/60",children:[e.jsx(ns,{value:"list",className:"h-7 px-3 text-xs data-[state=active]:bg-background data-[state=active]:shadow-sm",children:""}),e.jsx(ns,{value:"json",className:"h-7 px-3 text-xs data-[state=active]:bg-background data-[state=active]:shadow-sm",children:"JSON"})]}),e.jsxs(Es,{value:"list",className:"mt-3 space-y-2",children:[x.length===0?e.jsx("div",{className:"text-sm text-muted-foreground text-center py-4 border border-dashed rounded-md",children:d}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"grid grid-cols-[1fr_1fr_90px_32px] gap-2 text-xs text-muted-foreground px-1",children:[e.jsx("span",{children:""}),e.jsx("span",{children:""}),e.jsx("span",{children:""}),e.jsx("span",{})]}),x.map(H=>e.jsxs("div",{className:"grid grid-cols-[1fr_1fr_90px_32px] gap-2 items-center",children:[e.jsx(ie,{value:H.key,onChange:D=>L(H.id,"key",D.target.value),placeholder:"key",className:"h-8 text-sm"}),H.type==="boolean"?e.jsxs("div",{className:"flex items-center h-8 px-3 border rounded-md bg-background",children:[e.jsx(Qe,{checked:H.value===!0,onCheckedChange:D=>L(H.id,"value",String(D))}),e.jsx("span",{className:"ml-2 text-sm text-muted-foreground",children:H.value?"true":"false"})]}):e.jsx(ie,{type:H.type==="number"?"number":"text",value:H.value,onChange:D=>L(H.id,"value",D.target.value),placeholder:"value",className:"h-8 text-sm",step:H.type==="number"?"any":void 0}),e.jsxs(Be,{value:H.type,onValueChange:D=>L(H.id,"type",D),children:[e.jsx(Le,{className:"h-8 text-xs",children:e.jsx(He,{})}),e.jsxs(Ue,{children:[e.jsx(te,{value:"string",children:""}),e.jsx(te,{value:"number",children:""}),e.jsx(te,{value:"boolean",children:""})]})]}),e.jsx(N,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8 text-muted-foreground hover:text-destructive",onClick:()=>Y(H.id),children:e.jsx(ts,{className:"h-4 w-4"})})]},H.id))]}),e.jsxs(N,{type:"button",variant:"outline",size:"sm",className:"w-full h-8",onClick:O,children:[e.jsx(ot,{className:"h-4 w-4 mr-1"}),""]})]}),e.jsx(Es,{value:"json",className:"mt-3",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:""}),v?e.jsxs("div",{className:"flex items-center gap-1 text-xs text-destructive",children:[e.jsx(Sa,{className:"h-3 w-3"}),e.jsx("span",{className:"truncate max-w-[150px]",children:v})]}):p.trim()&&e.jsxs("div",{className:"flex items-center gap-1 text-xs text-green-600 dark:text-green-400",children:[e.jsx($t,{className:"h-3 w-3"}),e.jsx("span",{children:""})]})]}),e.jsx(Bs,{value:p,onChange:H=>R(H.target.value),placeholder:`{
  "key": "value"
}`,className:X("font-mono text-sm min-h-[140px] h-[140px] resize-y flex-1",v&&"border-destructive focus-visible:ring-destructive")}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" stringnumberboolean "})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:""}),e.jsx("div",{className:"min-h-[140px] h-[140px] flex-1 rounded-md border bg-muted/30 p-3 overflow-auto",children:S.success&&Object.keys(S.data).length>0?e.jsx("div",{className:"space-y-2",children:Object.entries(S.data).map(([H,D])=>{const C=Ug(D);return e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("code",{className:"px-1.5 py-0.5 bg-background rounded text-xs font-medium",children:H}),e.jsx("span",{className:"text-muted-foreground",children:"="}),e.jsx("span",{className:X("font-mono",C==="boolean"&&(D?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),C==="number"&&"text-blue-600 dark:text-blue-400",C==="string"&&"text-amber-600 dark:text-amber-400"),children:C==="string"?`"${D}"`:String(D)}),e.jsx($e,{variant:"secondary",className:X("h-5 text-[10px] px-1.5",xw(C)),children:hw(C)})]},H)})}):S.success?e.jsx("div",{className:"flex items-center justify-center h-full text-sm text-muted-foreground",children:""}):e.jsx("div",{className:"flex items-center justify-center h-full text-sm text-destructive",children:"JSON "})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})]})})]})]})}const mp=new Map,pw=300*1e3;function gw(){const[n,i]=u.useState([]),[c,d]=u.useState([]),[h,f]=u.useState([]),[x,j]=u.useState([]),[p,w]=u.useState(null),[v,y]=u.useState(!0),[S,k]=u.useState(!1),[O,Y]=u.useState(!1),[L,R]=u.useState(!1),[H,D]=u.useState(!1),[C,$]=u.useState(!1),[G,T]=u.useState(!1),[M,ne]=u.useState(null),[fe,_e]=u.useState(null),[Se,je]=u.useState(!1),[ye,be]=u.useState(null),[A,K]=u.useState(""),[E,se]=u.useState(new Set),[_,me]=u.useState(!1),[re,le]=u.useState(1),[pe,Ne]=u.useState(20),[he,Q]=u.useState(""),[P,q]=u.useState([]),[W,Ce]=u.useState(!1),[Me,ce]=u.useState(null),[De,Fs]=u.useState(!1),[Qs,ue]=u.useState(null),[Ee,as]=u.useState({}),{toast:Ke}=Vs(),lt=ja(),{registerTour:Ot,startTour:bt,state:Pe,goToStep:U}=Wu(),Re=u.useRef(null),ze=u.useRef(null),Ye=u.useRef(!0);u.useEffect(()=>{Ot(il,Rg)},[Ot]),u.useEffect(()=>{if(Pe.activeTourId===il&&Pe.isRunning){const V=Lg[Pe.stepIndex];V&&!window.location.pathname.endsWith(V.replace("/config/",""))&&lt({to:V})}},[Pe.stepIndex,Pe.activeTourId,Pe.isRunning,lt]);const zs=u.useRef(Pe.stepIndex);u.useEffect(()=>{if(Pe.activeTourId===il&&Pe.isRunning){const V=zs.current,de=Pe.stepIndex;V>=12&&V<=17&&de<12&&T(!1),zs.current=de}},[Pe.stepIndex,Pe.activeTourId,Pe.isRunning]),u.useEffect(()=>{if(Pe.activeTourId!==il||!Pe.isRunning)return;const V=de=>{const qe=de.target,Je=Pe.stepIndex;Je===2&&qe.closest('[data-tour="add-provider-button"]')?setTimeout(()=>U(3),300):Je===9&&qe.closest('[data-tour="provider-cancel-button"]')?setTimeout(()=>U(10),300):Je===11&&qe.closest('[data-tour="add-model-button"]')?setTimeout(()=>U(12),300):Je===17&&qe.closest('[data-tour="model-cancel-button"]')?setTimeout(()=>U(18),300):Je===18&&qe.closest('[data-tour="tasks-tab-trigger"]')&&setTimeout(()=>U(19),300)};return document.addEventListener("click",V,!0),()=>document.removeEventListener("click",V,!0)},[Pe,U]);const We=()=>{bt(il)};u.useEffect(()=>{nt()},[]);const nt=async()=>{try{y(!0);const V=await ni(),de=V.models||[];i(de),j(de.map(Je=>Je.name));const qe=V.api_providers||[];d(qe.map(Je=>Je.name)),f(qe),w(V.model_task_config||null),R(!1),Ye.current=!1}catch(V){console.error(":",V)}finally{y(!1)}},vs=u.useCallback(V=>h.find(de=>de.name===V),[h]),ke=u.useCallback(async(V,de=!1)=>{const qe=vs(V);if(!qe?.base_url){q([]),ue(null),ce('""');return}if(!qe.api_key){q([]),ue(null),ce(' API Key""');return}const Je=cw(qe.base_url);if(ue(Je),!Je?.modelFetcher){q([]),ce(null);return}const Ns=`${V}:${qe.base_url}`,ta=mp.get(Ns);if(!de&&ta&&Date.now()-ta.timestamp<pw){q(ta.models),ce(null);return}Ce(!0),ce(null);try{const aa=await M0(V,Je.modelFetcher.parser,Je.modelFetcher.endpoint);q(aa),mp.set(Ns,{models:aa,timestamp:Date.now()})}catch(aa){console.error(":",aa);const Ea=aa.message||"";Ea.includes("")||Ea.includes("")||Ea.includes("API Key")?ce('API Key ""'):Ea.includes("")?ce(" API Key "):Ea.includes("timeout")||Ea.includes("")?ce(""):Ea.includes("")?ce(""):ce(Ea),q([])}finally{Ce(!1)}},[vs]);u.useEffect(()=>{G&&M?.api_provider&&ke(M.api_provider)},[G,M?.api_provider,ke]);const ve=async()=>{try{D(!0),lo().catch(()=>{}),$(!0)}catch(V){console.error(":",V),$(!1),Ke({title:"",description:"",variant:"destructive"}),D(!1)}},is=async()=>{try{k(!0),Re.current&&clearTimeout(Re.current),ze.current&&clearTimeout(ze.current);const V=await ni();V.models=n,V.model_task_config=p,await to(V),R(!1),Ke({title:"",description:"..."}),await ve()}catch(V){console.error(":",V),Ke({title:"",description:V.message,variant:"destructive"}),k(!1)}},_s=()=>{localStorage.removeItem("access-token"),window.location.href="/auth"},At=()=>{$(!1),D(!1),Ke({title:"",description:"",variant:"destructive"})},Ps=u.useCallback(async V=>{if(!Ye.current)try{Y(!0),await qu("models",V),R(!1)}catch(de){console.error(":",de),R(!0)}finally{Y(!1)}},[]),Ys=u.useCallback(async V=>{if(!Ye.current)try{Y(!0),await qu("model_task_config",V),R(!1)}catch(de){console.error(":",de),R(!0)}finally{Y(!1)}},[]);u.useEffect(()=>{if(!Ye.current)return R(!0),Re.current&&clearTimeout(Re.current),Re.current=setTimeout(()=>{Ps(n)},2e3),()=>{Re.current&&clearTimeout(Re.current)}},[n,Ps]),u.useEffect(()=>{if(!(Ye.current||!p))return R(!0),ze.current&&clearTimeout(ze.current),ze.current=setTimeout(()=>{Ys(p)},2e3),()=>{ze.current&&clearTimeout(ze.current)}},[p,Ys]);const Et=async()=>{try{k(!0),Re.current&&clearTimeout(Re.current),ze.current&&clearTimeout(ze.current);const V=await ni();V.models=n,V.model_task_config=p,await to(V),R(!1),Ke({title:"",description:""}),await nt()}catch(V){console.error(":",V),Ke({title:"",description:V.message,variant:"destructive"})}finally{k(!1)}},Rt=(V,de)=>{as({}),ne(V||{model_identifier:"",name:"",api_provider:c[0]||"",price_in:0,price_out:0,temperature:null,max_tokens:null,force_stream_mode:!1,extra_params:{}}),_e(de),T(!0)},Ha=()=>{if(!M)return;const V={};if(M.name?.trim()||(V.name=""),M.api_provider?.trim()||(V.api_provider=" API "),M.model_identifier?.trim()||(V.model_identifier=""),Object.keys(V).length>0){as(V);return}as({});const de={...M,price_in:M.price_in??0,price_out:M.price_out??0};let qe,Je=null;if(fe!==null?(Je=n[fe].name,qe=[...n],qe[fe]=de):qe=[...n,de],i(qe),j(qe.map(Ns=>Ns.name)),Je&&Je!==de.name&&p){const Ns=ta=>ta.map(aa=>aa===Je?de.name:aa);w({...p,utils:{...p.utils,model_list:Ns(p.utils?.model_list||[])},utils_small:{...p.utils_small,model_list:Ns(p.utils_small?.model_list||[])},tool_use:{...p.tool_use,model_list:Ns(p.tool_use?.model_list||[])},replyer:{...p.replyer,model_list:Ns(p.replyer?.model_list||[])},planner:{...p.planner,model_list:Ns(p.planner?.model_list||[])},vlm:{...p.vlm,model_list:Ns(p.vlm?.model_list||[])},voice:{...p.voice,model_list:Ns(p.voice?.model_list||[])},embedding:{...p.embedding,model_list:Ns(p.embedding?.model_list||[])},lpmm_entity_extract:{...p.lpmm_entity_extract,model_list:Ns(p.lpmm_entity_extract?.model_list||[])},lpmm_rdf_build:{...p.lpmm_rdf_build,model_list:Ns(p.lpmm_rdf_build?.model_list||[])},lpmm_qa:{...p.lpmm_qa,model_list:Ns(p.lpmm_qa?.model_list||[])}})}T(!1),ne(null),_e(null)},Yt=V=>{if(!V&&M){const de={...M,price_in:M.price_in??0,price_out:M.price_out??0};ne(de)}T(V)},qa=V=>{be(V),je(!0)},Ta=()=>{if(ye!==null){const V=n.filter((de,qe)=>qe!==ye);i(V),j(V.map(de=>de.name)),Ke({title:"",description:""})}je(!1),be(null)},ee=V=>{const de=new Set(E);de.has(V)?de.delete(V):de.add(V),se(de)},we=()=>{if(E.size===Lt.length)se(new Set);else{const V=Lt.map((de,qe)=>n.findIndex(Je=>Je===Lt[qe]));se(new Set(V))}},Ve=()=>{if(E.size===0){Ke({title:"",description:"",variant:"default"});return}me(!0)},pt=()=>{const V=n.filter((de,qe)=>!E.has(qe));i(V),j(V.map(de=>de.name)),se(new Set),me(!1),Ke({title:"",description:` ${E.size} `})},Xt=(V,de,qe)=>{p&&w({...p,[V]:{...p[V],[de]:qe}})},Lt=n.filter(V=>{if(!A)return!0;const de=A.toLowerCase();return V.name.toLowerCase().includes(de)||V.model_identifier.toLowerCase().includes(de)||V.api_provider.toLowerCase().includes(de)}),hl=Math.ceil(Lt.length/pe),Vl=Lt.slice((re-1)*pe,re*pe),pn=()=>{const V=parseInt(he);V>=1&&V<=hl&&(le(V),Q(""))},gn=V=>p?[p.utils?.model_list||[],p.utils_small?.model_list||[],p.tool_use?.model_list||[],p.replyer?.model_list||[],p.planner?.model_list||[],p.vlm?.model_list||[],p.voice?.model_list||[],p.embedding?.model_list||[],p.lpmm_entity_extract?.model_list||[],p.lpmm_rdf_build?.model_list||[],p.lpmm_qa?.model_list||[]].some(qe=>qe.includes(V)):!1;return v?e.jsx(ss,{className:"h-full",children:e.jsx("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("p",{className:"text-muted-foreground",children:"..."})})})}):e.jsx(ss,{className:"h-full",children:e.jsxs("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:""}),e.jsx("p",{className:"text-muted-foreground mt-1 sm:mt-2 text-sm sm:text-base",children:""})]}),e.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[e.jsxs(N,{onClick:Et,disabled:S||O||!L||H,size:"sm",variant:"outline",className:"flex-1 sm:flex-none sm:min-w-[120px]",children:[e.jsx(yr,{className:"mr-2 h-4 w-4",strokeWidth:2,fill:"none"}),S?"...":O?"...":L?"":""]}),e.jsxs(ps,{children:[e.jsx(tt,{asChild:!0,children:e.jsxs(N,{disabled:S||O||H,size:"sm",className:"flex-1 sm:flex-none sm:min-w-[120px]",children:[e.jsx(br,{className:"mr-2 h-4 w-4"}),H?"...":L?"":""]})}),e.jsxs(rs,{children:[e.jsxs(cs,{children:[e.jsx(ds,{children:""}),e.jsx(us,{asChild:!0,children:e.jsx("div",{children:e.jsx("p",{children:L?",":","})})})]}),e.jsxs(os,{children:[e.jsx(hs,{children:""}),e.jsx(ms,{onClick:L?is:ve,children:L?"":""})]})]})]})]})]}),e.jsxs(cl,{children:[e.jsx(La,{className:"h-4 w-4"}),e.jsxs(ol,{children:["",e.jsx("strong",{children:""}),'""']})]}),e.jsxs(cl,{className:"hidden lg:flex border-primary/30 bg-primary/5 cursor-pointer hover:bg-primary/10 transition-colors",onClick:We,children:[e.jsx(Cb,{className:"h-4 w-4 text-primary"}),e.jsxs(ol,{className:"flex items-center justify-between",children:[e.jsxs("span",{children:[e.jsx("strong",{className:"text-primary",children:""}),""]}),e.jsx(N,{variant:"outline",size:"sm",className:"ml-4 shrink-0",children:""})]})]}),e.jsxs(Ca,{defaultValue:"models",className:"w-full",children:[e.jsxs(pa,{className:"grid w-full max-w-full sm:max-w-md grid-cols-2",children:[e.jsx(ns,{value:"models",children:""}),e.jsx(ns,{value:"tasks","data-tour":"tasks-tab-trigger",children:""})]}),e.jsxs(Es,{value:"models",className:"space-y-4 mt-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:""}),e.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[E.size>0&&e.jsxs(N,{onClick:Ve,size:"sm",variant:"destructive",className:"w-full sm:w-auto",children:[e.jsx(ts,{className:"mr-2 h-4 w-4",strokeWidth:2,fill:"none"})," (",E.size,")"]}),e.jsxs(N,{onClick:()=>Rt(null,null),size:"sm",variant:"outline",className:"w-full sm:w-auto","data-tour":"add-model-button",children:[e.jsx(ot,{className:"mr-2 h-4 w-4",strokeWidth:2,fill:"none"}),""]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2",children:[e.jsxs("div",{className:"relative w-full sm:flex-1 sm:max-w-sm",children:[e.jsx(zt,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(ie,{placeholder:"...",value:A,onChange:V=>K(V.target.value),className:"pl-9"})]}),A&&e.jsxs("p",{className:"text-sm text-muted-foreground whitespace-nowrap",children:[" ",Lt.length," "]})]}),e.jsx("div",{className:"md:hidden space-y-3",children:Vl.length===0?e.jsx("div",{className:"text-center text-muted-foreground py-8 rounded-lg border bg-card",children:A?"":""}):Vl.map((V,de)=>{const qe=n.findIndex(Ns=>Ns===V),Je=gn(V.name);return e.jsxs("div",{className:"rounded-lg border bg-card p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"font-semibold text-base",children:V.name}),e.jsx($e,{variant:Je?"default":"secondary",className:Je?"bg-green-600 hover:bg-green-700":"",children:Je?"":""})]}),e.jsx("p",{className:"text-xs text-muted-foreground break-all",title:V.model_identifier,children:V.model_identifier})]}),e.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[e.jsxs(N,{variant:"default",size:"sm",onClick:()=>Rt(V,qe),children:[e.jsx(on,{className:"h-4 w-4 mr-1",strokeWidth:2,fill:"none"}),""]}),e.jsxs(N,{size:"sm",onClick:()=>qa(qe),className:"bg-red-600 hover:bg-red-700 text-white",children:[e.jsx(ts,{className:"h-4 w-4 mr-1",strokeWidth:2,fill:"none"}),""]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground text-xs",children:""}),e.jsx("p",{className:"font-medium",children:V.api_provider})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground text-xs",children:""}),e.jsx("p",{className:"font-medium",children:V.temperature!=null?V.temperature:e.jsx("span",{className:"text-muted-foreground",children:""})})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground text-xs",children:""}),e.jsxs("p",{className:"font-medium",children:["",V.price_in,"/M"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground text-xs",children:""}),e.jsxs("p",{className:"font-medium",children:["",V.price_out,"/M"]})]})]})]},de)})}),e.jsx("div",{className:"hidden md:block rounded-lg border bg-card overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(hn,{children:[e.jsx(xn,{children:e.jsxs(dt,{children:[e.jsx(Ie,{className:"w-12",children:e.jsx(jt,{checked:E.size===Lt.length&&Lt.length>0,onCheckedChange:we})}),e.jsx(Ie,{className:"w-24",children:""}),e.jsx(Ie,{children:""}),e.jsx(Ie,{children:""}),e.jsx(Ie,{children:""}),e.jsx(Ie,{className:"text-center",children:""}),e.jsx(Ie,{className:"text-right",children:""}),e.jsx(Ie,{className:"text-right",children:""}),e.jsx(Ie,{className:"text-right",children:""})]})}),e.jsx(fn,{children:Vl.length===0?e.jsx(dt,{children:e.jsx(Fe,{colSpan:9,className:"text-center text-muted-foreground py-8",children:A?"":""})}):Vl.map((V,de)=>{const qe=n.findIndex(Ns=>Ns===V),Je=gn(V.name);return e.jsxs(dt,{children:[e.jsx(Fe,{children:e.jsx(jt,{checked:E.has(qe),onCheckedChange:()=>ee(qe)})}),e.jsx(Fe,{children:e.jsx($e,{variant:Je?"default":"secondary",className:Je?"bg-green-600 hover:bg-green-700":"",children:Je?"":""})}),e.jsx(Fe,{className:"font-medium",children:V.name}),e.jsx(Fe,{className:"max-w-xs truncate",title:V.model_identifier,children:V.model_identifier}),e.jsx(Fe,{children:V.api_provider}),e.jsx(Fe,{className:"text-center",children:V.temperature!=null?V.temperature:e.jsx("span",{className:"text-muted-foreground",children:"-"})}),e.jsxs(Fe,{className:"text-right",children:["",V.price_in,"/M"]}),e.jsxs(Fe,{className:"text-right",children:["",V.price_out,"/M"]}),e.jsx(Fe,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsxs(N,{variant:"default",size:"sm",onClick:()=>Rt(V,qe),children:[e.jsx(on,{className:"h-4 w-4 mr-1",strokeWidth:2,fill:"none"}),""]}),e.jsxs(N,{size:"sm",onClick:()=>qa(qe),className:"bg-red-600 hover:bg-red-700 text-white",children:[e.jsx(ts,{className:"h-4 w-4 mr-1",strokeWidth:2,fill:"none"}),""]})]})})]},de)})})]})})}),Lt.length>0&&e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{htmlFor:"page-size-model",className:"text-sm whitespace-nowrap",children:""}),e.jsxs(Be,{value:pe.toString(),onValueChange:V=>{Ne(parseInt(V)),le(1),se(new Set)},children:[e.jsx(Le,{id:"page-size-model",className:"w-20",children:e.jsx(He,{})}),e.jsxs(Ue,{children:[e.jsx(te,{value:"10",children:"10"}),e.jsx(te,{value:"20",children:"20"}),e.jsx(te,{value:"50",children:"50"}),e.jsx(te,{value:"100",children:"100"})]})]}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[" ",(re-1)*pe+1," "," ",Math.min(re*pe,Lt.length),"  ",Lt.length," "]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{variant:"outline",size:"sm",onClick:()=>le(1),disabled:re===1,className:"hidden sm:flex",children:e.jsx(di,{className:"h-4 w-4"})}),e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>le(V=>Math.max(1,V-1)),disabled:re===1,children:[e.jsx(Hl,{className:"h-4 w-4 sm:mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{type:"number",value:he,onChange:V=>Q(V.target.value),onKeyDown:V=>V.key==="Enter"&&pn(),placeholder:re.toString(),className:"w-16 h-8 text-center",min:1,max:hl}),e.jsx(N,{variant:"outline",size:"sm",onClick:pn,disabled:!he,className:"h-8",children:""})]}),e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>le(V=>V+1),disabled:re>=hl,children:[e.jsx("span",{className:"hidden sm:inline",children:""}),e.jsx(ul,{className:"h-4 w-4 sm:ml-1"})]}),e.jsx(N,{variant:"outline",size:"sm",onClick:()=>le(hl),disabled:re>=hl,className:"hidden sm:flex",children:e.jsx(ui,{className:"h-4 w-4"})})]})]})]}),e.jsxs(Es,{value:"tasks",className:"space-y-6 mt-0",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:""}),p&&e.jsxs("div",{className:"grid gap-4 sm:gap-6",children:[e.jsx(ya,{title:" (utils)",description:"",taskConfig:p.utils,modelNames:x,onChange:(V,de)=>Xt("utils",V,de),dataTour:"task-model-select"}),e.jsx(ya,{title:" (utils_small)",description:"",taskConfig:p.utils_small,modelNames:x,onChange:(V,de)=>Xt("utils_small",V,de)}),e.jsx(ya,{title:" (tool_use)",description:"",taskConfig:p.tool_use,modelNames:x,onChange:(V,de)=>Xt("tool_use",V,de)}),e.jsx(ya,{title:" (replyer)",description:"",taskConfig:p.replyer,modelNames:x,onChange:(V,de)=>Xt("replyer",V,de)}),e.jsx(ya,{title:" (planner)",description:"",taskConfig:p.planner,modelNames:x,onChange:(V,de)=>Xt("planner",V,de)}),e.jsx(ya,{title:" (vlm)",description:"",taskConfig:p.vlm,modelNames:x,onChange:(V,de)=>Xt("vlm",V,de),hideTemperature:!0}),e.jsx(ya,{title:" (voice)",description:"",taskConfig:p.voice,modelNames:x,onChange:(V,de)=>Xt("voice",V,de),hideTemperature:!0,hideMaxTokens:!0}),e.jsx(ya,{title:" (embedding)",description:"",taskConfig:p.embedding,modelNames:x,onChange:(V,de)=>Xt("embedding",V,de),hideTemperature:!0,hideMaxTokens:!0}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"LPMM "}),e.jsx(ya,{title:" (lpmm_entity_extract)",description:"",taskConfig:p.lpmm_entity_extract,modelNames:x,onChange:(V,de)=>Xt("lpmm_entity_extract",V,de)}),e.jsx(ya,{title:"RDF  (lpmm_rdf_build)",description:"",taskConfig:p.lpmm_rdf_build,modelNames:x,onChange:(V,de)=>Xt("lpmm_rdf_build",V,de)}),e.jsx(ya,{title:" (lpmm_qa)",description:"",taskConfig:p.lpmm_qa,modelNames:x,onChange:(V,de)=>Xt("lpmm_qa",V,de)})]})]})]})]}),e.jsx($s,{open:G,onOpenChange:Yt,children:e.jsxs(Hs,{className:"max-w-[95vw] sm:max-w-2xl max-h-[90vh] overflow-y-auto","data-tour":"model-dialog",preventOutsideClose:Pe.isRunning,children:[e.jsxs(qs,{children:[e.jsx(Gs,{children:fe!==null?"":""}),e.jsx(Is,{children:""})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2","data-tour":"model-name-input",children:[e.jsx(b,{htmlFor:"model_name",className:Ee.name?"text-destructive":"",children:" *"}),e.jsx(ie,{id:"model_name",value:M?.name||"",onChange:V=>{ne(de=>de?{...de,name:V.target.value}:null),Ee.name&&as(de=>({...de,name:void 0}))},placeholder:": qwen3-30b",className:Ee.name?"border-destructive focus-visible:ring-destructive":""}),Ee.name?e.jsx("p",{className:"text-xs text-destructive",children:Ee.name}):e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"grid gap-2","data-tour":"model-provider-select",children:[e.jsx(b,{htmlFor:"api_provider",className:Ee.api_provider?"text-destructive":"",children:"API  *"}),e.jsxs(Be,{value:M?.api_provider||"",onValueChange:V=>{ne(de=>de?{...de,api_provider:V}:null),q([]),ce(null),Ee.api_provider&&as(de=>({...de,api_provider:void 0}))},children:[e.jsx(Le,{id:"api_provider",className:Ee.api_provider?"border-destructive focus-visible:ring-destructive":"",children:e.jsx(He,{placeholder:""})}),e.jsx(Ue,{children:c.map(V=>e.jsx(te,{value:V,children:V},V))})]}),Ee.api_provider&&e.jsx("p",{className:"text-xs text-destructive",children:Ee.api_provider})]}),e.jsxs("div",{className:"grid gap-2","data-tour":"model-identifier-input",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(b,{htmlFor:"model_identifier",className:Ee.model_identifier?"text-destructive":"",children:" *"}),Qs?.modelFetcher&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($e,{variant:"secondary",className:"text-xs",children:Qs.display_name}),e.jsx(N,{variant:"ghost",size:"sm",className:"h-6 px-2",onClick:()=>M?.api_provider&&ke(M.api_provider,!0),disabled:W,children:W?e.jsx(kt,{className:"h-3 w-3 animate-spin"}):e.jsx(Ct,{className:"h-3 w-3"})})]})]}),Qs?.modelFetcher?e.jsxs(Ua,{open:De,onOpenChange:Fs,children:[e.jsx(Ba,{asChild:!0,children:e.jsxs(N,{variant:"outline",role:"combobox","aria-expanded":De,className:"w-full justify-between font-normal",disabled:W||!!Me,children:[W?e.jsxs("span",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(kt,{className:"h-4 w-4 animate-spin"}),"..."]}):Me?e.jsx("span",{className:"text-muted-foreground text-sm",children:""}):M?.model_identifier?e.jsx("span",{className:"truncate",children:M.model_identifier}):e.jsx("span",{className:"text-muted-foreground",children:"..."}),e.jsx(Yu,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsx(ka,{className:"p-0",align:"start",style:{width:"var(--radix-popover-trigger-width)"},children:e.jsxs(no,{children:[e.jsx(io,{placeholder:"..."}),e.jsx(ss,{className:"h-[300px]",children:e.jsxs(ro,{className:"max-h-none overflow-visible",children:[e.jsx(co,{children:Me?e.jsxs("div",{className:"py-4 px-2 text-center space-y-2",children:[e.jsx("p",{className:"text-sm text-destructive",children:Me}),!Me.includes("API Key")&&e.jsx(N,{variant:"link",size:"sm",onClick:()=>M?.api_provider&&ke(M.api_provider,!0),children:""})]}):""}),e.jsx(vr,{heading:"",children:P.map(V=>e.jsxs(Nr,{value:V.id,onSelect:()=>{ne(de=>de?{...de,model_identifier:V.id}:null),Fs(!1)},children:[e.jsx($t,{className:`mr-2 h-4 w-4 ${M?.model_identifier===V.id?"opacity-100":"opacity-0"}`}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{children:V.id}),V.name!==V.id&&e.jsx("span",{className:"text-xs text-muted-foreground",children:V.name})]})]},V.id))}),e.jsx(vr,{heading:"",children:e.jsxs(Nr,{value:"__manual_input__",onSelect:()=>{Fs(!1)},children:[e.jsx(on,{className:"mr-2 h-4 w-4"}),"..."]})})]})})]})})]}):e.jsx(ie,{id:"model_identifier",value:M?.model_identifier||"",onChange:V=>{ne(de=>de?{...de,model_identifier:V.target.value}:null),Ee.model_identifier&&as(de=>({...de,model_identifier:void 0}))},placeholder:"Qwen/Qwen3-30B-A3B-Instruct-2507",className:Ee.model_identifier?"border-destructive focus-visible:ring-destructive":""}),Ee.model_identifier&&e.jsx("p",{className:"text-xs text-destructive",children:Ee.model_identifier}),Me&&Qs?.modelFetcher&&!Ee.model_identifier&&e.jsxs(cl,{variant:"destructive",className:"mt-2 py-2",children:[e.jsx(La,{className:"h-4 w-4"}),e.jsx(ol,{className:"text-xs",children:Me})]}),Qs?.modelFetcher&&e.jsx(ie,{value:M?.model_identifier||"",onChange:V=>{ne(de=>de?{...de,model_identifier:V.target.value}:null),Ee.model_identifier&&as(de=>({...de,model_identifier:void 0}))},placeholder:"",className:`mt-2 ${Ee.model_identifier?"border-destructive focus-visible:ring-destructive":""}`}),!Ee.model_identifier&&e.jsx("p",{className:"text-xs text-muted-foreground",children:Me?'"" API Key':Qs?.modelFetcher?` ${Qs.display_name}`:"API  ID"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"price_in",children:" (/M token)"}),e.jsx(ie,{id:"price_in",type:"number",step:"0.1",min:"0",value:M?.price_in??"",onChange:V=>{const de=V.target.value===""?null:parseFloat(V.target.value);ne(qe=>qe?{...qe,price_in:de}:null)},placeholder:": 0"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"price_out",children:" (/M token)"}),e.jsx(ie,{id:"price_out",type:"number",step:"0.1",min:"0",value:M?.price_out??"",onChange:V=>{const de=V.target.value===""?null:parseFloat(V.target.value);ne(qe=>qe?{...qe,price_out:de}:null)},placeholder:": 0"})]})]}),e.jsxs("div",{className:"rounded-lg border p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(b,{htmlFor:"enable_model_temperature",className:"cursor-pointer",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsx(Qe,{id:"enable_model_temperature",checked:M?.temperature!=null,onCheckedChange:V=>{ne(V?de=>de?{...de,temperature:.5}:null:de=>de?{...de,temperature:null}:null)}})]}),M?.temperature!=null&&e.jsxs("div",{className:"space-y-2 pt-2 border-t",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(b,{className:"text-sm",children:""}),e.jsx("span",{className:"text-sm font-medium tabular-nums",children:M.temperature.toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"0"}),e.jsx(wa,{value:[M.temperature],onValueChange:V=>ne(de=>de?{...de,temperature:V[0]}:null),min:0,max:1,step:.1,className:"flex-1"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"1"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"0.1-0.30.7-1.0"})]})]}),e.jsxs("div",{className:"rounded-lg border p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(b,{htmlFor:"enable_model_max_tokens",className:"cursor-pointer",children:" Token"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" Token "})]}),e.jsx(Qe,{id:"enable_model_max_tokens",checked:M?.max_tokens!=null,onCheckedChange:V=>{ne(V?de=>de?{...de,max_tokens:2048}:null:de=>de?{...de,max_tokens:null}:null)}})]}),M?.max_tokens!=null&&e.jsxs("div",{className:"space-y-2 pt-2 border-t",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(b,{className:"text-sm",children:" Token "}),e.jsx(ie,{type:"number",min:"1",max:"128000",value:M.max_tokens,onChange:V=>{const de=parseInt(V.target.value);!isNaN(de)&&de>=1&&ne(qe=>qe?{...qe,max_tokens:de}:null)},className:"w-28 h-8 text-sm"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" token "})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Qe,{id:"force_stream_mode",checked:M?.force_stream_mode||!1,onCheckedChange:V=>ne(de=>de?{...de,force_stream_mode:V}:null)}),e.jsx(b,{htmlFor:"force_stream_mode",className:"cursor-pointer",children:""})]}),e.jsx(fw,{value:M?.extra_params||{},onChange:V=>ne(de=>de?{...de,extra_params:V}:null),placeholder:" enable_thinkingtop_p ..."})]}),e.jsxs(at,{children:[e.jsx(N,{variant:"outline",onClick:()=>T(!1),"data-tour":"model-cancel-button",children:""}),e.jsx(N,{onClick:Ha,"data-tour":"model-save-button",children:""})]})]})}),e.jsx(ps,{open:Se,onOpenChange:je,children:e.jsxs(rs,{children:[e.jsxs(cs,{children:[e.jsx(ds,{children:""}),e.jsxs(us,{children:[' "',ye!==null?n[ye]?.name:"",'"  ']})]}),e.jsxs(os,{children:[e.jsx(hs,{children:""}),e.jsx(ms,{onClick:Ta,children:""})]})]})}),e.jsx(ps,{open:_,onOpenChange:me,children:e.jsxs(rs,{children:[e.jsxs(cs,{children:[e.jsx(ds,{children:""}),e.jsxs(us,{children:[" ",E.size,"  "]})]}),e.jsxs(os,{children:[e.jsx(hs,{children:""}),e.jsx(ms,{onClick:pt,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:""})]})]})}),C&&e.jsx(Pu,{onRestartComplete:_s,onRestartFailed:At})]})})}function ya({title:n,description:i,taskConfig:c,modelNames:d,onChange:h,hideTemperature:f=!1,hideMaxTokens:x=!1,dataTour:j}){const p=w=>{h("model_list",w)};return e.jsxs("div",{className:"rounded-lg border bg-card p-4 sm:p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-base sm:text-lg",children:n}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mt-1",children:i})]}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-2","data-tour":j,children:[e.jsx(b,{children:""}),e.jsx(uw,{options:d.map(w=>({label:w,value:w})),selected:c.model_list||[],onChange:p,placeholder:"...",emptyText:""})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[!f&&e.jsxs("div",{className:"grid gap-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(b,{children:""}),e.jsx(ie,{type:"number",step:"0.1",min:"0",max:"1",value:c.temperature??.3,onChange:w=>{const v=parseFloat(w.target.value);!isNaN(v)&&v>=0&&v<=1&&h("temperature",v)},className:"w-20 h-8 text-sm"})]}),e.jsx(wa,{value:[c.temperature??.3],onValueChange:w=>h("temperature",w[0]),min:0,max:1,step:.1,className:"w-full"})]}),!x&&e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{children:" Token"}),e.jsx(ie,{type:"number",step:"1",min:"1",value:c.max_tokens??1024,onChange:w=>h("max_tokens",parseInt(w.target.value))})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(b,{children:" ()"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:""})]}),e.jsx(ie,{type:"number",step:"1",min:"1",value:c.slow_threshold??15,onChange:w=>{const v=parseInt(w.target.value);!isNaN(v)&&v>=1&&h("slow_threshold",v)},placeholder:"15"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})]})]})}const oo="/api/webui/config";async function jw(){const i=await(await Te(`${oo}/adapter-config/path`)).json();return!i.success||!i.path?null:{path:i.path,lastModified:i.lastModified}}async function hp(n){const c=await(await Te(`${oo}/adapter-config/path`,{method:"POST",headers:Ls(),body:JSON.stringify({path:n})})).json();if(!c.success)throw new Error(c.message||"")}async function xp(n){const c=await(await Te(`${oo}/adapter-config?path=${encodeURIComponent(n)}`)).json();if(!c.success)throw new Error("");return c.content}async function fp(n,i){const d=await(await Te(`${oo}/adapter-config`,{method:"POST",headers:Ls(),body:JSON.stringify({path:n,content:i})})).json();if(!d.success)throw new Error(d.message||"")}const sa={inner:{version:"0.1.2"},nickname:{nickname:""},napcat_server:{host:"localhost",port:8095,token:"",heartbeat_interval:30},maibot_server:{host:"localhost",port:8e3},chat:{group_list_type:"whitelist",group_list:[],private_list_type:"whitelist",private_list:[],ban_user_id:[],ban_qq_bot:!1,enable_poke:!0},voice:{use_tts:!1},debug:{level:"INFO"}},Du={oneclick:{name:"",description:"",path:"../MaiBot-Napcat-Adapter/config.toml",icon:dn},docker:{name:"Docker",description:"Docker Compose ",path:"/MaiMBot/adapters-config/config.toml",icon:kb}};function vw(){const[n,i]=u.useState("upload"),[c,d]=u.useState(null),[h,f]=u.useState(""),[x,j]=u.useState(""),[p,w]=u.useState("oneclick"),[v,y]=u.useState(""),[S,k]=u.useState(!1),[O,Y]=u.useState(!1),[L,R]=u.useState(!1),[H,D]=u.useState(!1),[C,$]=u.useState(null),G=u.useRef(null),{toast:T}=Vs(),M=u.useRef(null),ne=Q=>{if(!Q.trim())return{valid:!1,error:""};if(!Q.toLowerCase().endsWith(".toml"))return{valid:!1,error:" .toml "};const P=/^([a-zA-Z]:\\|\\\\[^\\]+\\[^\\]+\\).+\.toml$/i,q=/^(\/|~\/).+\.toml$/i,W=/^(\.{1,2}[\\/]|[^:\\/]).+\.toml$/i,Ce=P.test(Q),Me=q.test(Q),ce=W.test(Q);return!Ce&&!Me&&!ce?{valid:!1,error:""}:/[<>"|?*\x00-\x1F]/.test(Q)?{valid:!1,error:""}:{valid:!0,error:""}},fe=Q=>{if(j(Q),Q.trim()){const P=ne(Q);y(P.error)}else y("")},_e=u.useCallback(async Q=>{const P=Du[Q];Y(!0);try{const q=await xp(P.path),W=re(q);d(W),w(Q),j(P.path),await hp(P.path),T({title:"",description:`${P.name}`})}catch(q){console.error(":",q),T({title:"",description:q instanceof Error?q.message:"",variant:"destructive"})}finally{Y(!1)}},[T]),Se=u.useCallback(async Q=>{const P=ne(Q);if(!P.valid){y(P.error),T({title:"",description:P.error,variant:"destructive"});return}y(""),Y(!0);try{const q=await xp(Q),W=re(q);d(W),j(Q),await hp(Q),T({title:"",description:""})}catch(q){console.error(":",q),T({title:"",description:q instanceof Error?q.message:"",variant:"destructive"})}finally{Y(!1)}},[T]);u.useEffect(()=>{(async()=>{try{const P=await jw();if(P&&P.path){j(P.path);const q=Object.entries(Du).find(([,W])=>W.path===P.path);q?(i("preset"),w(q[0]),await _e(q[0])):(i("path"),await Se(P.path))}}catch(P){console.error(":",P)}})()},[Se,_e]);const je=u.useCallback(Q=>{n!=="path"&&n!=="preset"||!x||(M.current&&clearTimeout(M.current),M.current=setTimeout(async()=>{k(!0);try{const P=le(Q);await fp(x,P),T({title:"",description:""})}catch(P){console.error(":",P),T({title:"",description:P instanceof Error?P.message:"",variant:"destructive"})}finally{k(!1)}},1e3))},[n,x,T]),ye=async()=>{if(!c||!x)return;const Q=ne(x);if(!Q.valid){T({title:"",description:Q.error,variant:"destructive"});return}k(!0);try{const P=le(c);await fp(x,P),T({title:"",description:""})}catch(P){console.error(":",P),T({title:"",description:P instanceof Error?P.message:"",variant:"destructive"})}finally{k(!1)}},be=async()=>{x&&await Se(x)},A=Q=>{if(Q!==n){if(c){$(Q),R(!0);return}K(Q)}},K=Q=>{d(null),f(""),y(""),i(Q),Q==="preset"&&_e("oneclick"),T({title:"",description:{upload:"",path:"",preset:""}[Q]})},E=()=>{C&&(K(C),$(null)),R(!1)},se=()=>{if(c){D(!0);return}_()},_=()=>{j(""),d(null),y(""),T({title:"",description:""})},me=()=>{_(),D(!1)},re=Q=>{const P=JSON.parse(JSON.stringify(sa)),q=Q.split(`
`);let W="";for(const Ce of q){const Me=Ce.trim();if(!Me||Me.startsWith("#"))continue;const ce=Me.match(/^\[(\w+)\]/);if(ce){W=ce[1];continue}const De=Me.match(/^(\w+)\s*=\s*(.+)$/);if(De&&W){const[,Fs,Qs]=De;let ue=Qs.trim();const Ee=ue.match(/^("[^"]*")/);if(Ee)ue=Ee[1];else{const Ke=ue.indexOf("#");Ke!==-1&&(ue=ue.substring(0,Ke).trim())}let as;if(ue==="true")as=!0;else if(ue==="false")as=!1;else if(ue.startsWith("[")&&ue.endsWith("]")){const Ke=ue.slice(1,-1).trim();if(Ke){const lt=Ke.split(",").map(bt=>{const Pe=bt.trim();return isNaN(Number(Pe))?Pe.replace(/"/g,""):Number(Pe)}),Ot=typeof lt[0];as=lt.every(bt=>typeof bt===Ot)?lt:lt.filter(bt=>typeof bt=="number")}else as=[]}else ue.startsWith('"')&&ue.endsWith('"')?as=ue.slice(1,-1):isNaN(Number(ue))?as=ue.replace(/"/g,""):as=Number(ue);if(W in P){const Ke=P[W];Ke[Fs]=as}}}return P},le=Q=>{const P=[],q=(W,Ce)=>W===""||W===null||W===void 0?Ce:W;return P.push("[inner]"),P.push(`version = "${q(Q.inner.version,sa.inner.version)}" # `),P.push("# "),P.push(""),P.push("[nickname] # "),P.push(`nickname = "${q(Q.nickname.nickname,sa.nickname.nickname)}"`),P.push(""),P.push("[napcat_server] # Napcatws"),P.push(`host = "${q(Q.napcat_server.host,sa.napcat_server.host)}"      # Napcat`),P.push(`port = ${q(Q.napcat_server.port||0,sa.napcat_server.port)}             # Napcat`),P.push(`token = "${q(Q.napcat_server.token,sa.napcat_server.token)}"              # Napcat`),P.push(`heartbeat_interval = ${q(Q.napcat_server.heartbeat_interval||0,sa.napcat_server.heartbeat_interval)} # Napcat`),P.push(""),P.push("[maibot_server] # ws"),P.push(`host = "${q(Q.maibot_server.host,sa.maibot_server.host)}" # .envHOST`),P.push(`port = ${q(Q.maibot_server.port||0,sa.maibot_server.port)}        # .envPORT`),P.push(""),P.push("[chat] # "),P.push(`group_list_type = "${q(Q.chat.group_list_type,sa.chat.group_list_type)}" # whitelist, blacklist`),P.push(`group_list = [${Q.chat.group_list.join(", ")}]               # `),P.push("# group_list_typewhitelist"),P.push("# group_list_typeblacklist"),P.push(`private_list_type = "${q(Q.chat.private_list_type,sa.chat.private_list_type)}" # whitelist, blacklist`),P.push(`private_list = [${Q.chat.private_list.join(", ")}]               # `),P.push("# private_list_typewhitelist"),P.push("# private_list_typeblacklist"),P.push(`ban_user_id = [${Q.chat.ban_user_id.join(", ")}]   # `),P.push(`ban_qq_bot = ${Q.chat.ban_qq_bot} # QQ`),P.push(`enable_poke = ${Q.chat.enable_poke} # `),P.push(""),P.push("[voice] # "),P.push(`use_tts = ${Q.voice.use_tts} # ttsttsadapter`),P.push(""),P.push("[debug]"),P.push(`level = "${q(Q.debug.level,sa.debug.level)}" # DEBUG, INFO, WARNING, ERROR, CRITICAL`),P.join(`
`)},pe=Q=>{const P=Q.target.files?.[0];if(!P)return;const q=new FileReader;q.onload=W=>{try{const Ce=W.target?.result,Me=re(Ce);d(Me),f(P.name),T({title:"",description:`${P.name}`})}catch(Ce){console.error(":",Ce),T({title:"",description:"",variant:"destructive"})}},q.readAsText(P)},Ne=()=>{if(!c)return;const Q=le(c),P=new Blob([Q],{type:"text/plain;charset=utf-8"}),q=URL.createObjectURL(P),W=document.createElement("a");W.href=q,W.download=h||"config.toml",document.body.appendChild(W),W.click(),document.body.removeChild(W),URL.revokeObjectURL(q),T({title:"",description:""})},he=()=>{d(JSON.parse(JSON.stringify(sa))),f("config.toml"),T({title:"",description:""})};return e.jsx(ss,{className:"h-full",children:e.jsxs("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:""}),e.jsx("p",{className:"text-muted-foreground mt-1 sm:mt-2 text-sm sm:text-base",children:" QQ "})]})}),e.jsxs("div",{className:"flex items-start gap-2 p-3 rounded-lg border border-amber-500/50 bg-amber-500/10 text-amber-700 dark:text-amber-400",children:[e.jsx(Sa,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-sm",children:" WebUI "})]}),e.jsxs(Ze,{children:[e.jsxs(ys,{children:[e.jsx(ws,{children:""}),e.jsx(ct,{children:""})]}),e.jsxs(Ts,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 md:gap-4",children:[e.jsx("div",{className:`border-2 rounded-lg p-3 md:p-4 cursor-pointer transition-all ${n==="preset"?"border-primary bg-primary/5":"border-muted hover:border-primary/50 active:border-primary/70"}`,onClick:()=>A("preset"),children:e.jsxs("div",{className:"flex items-start gap-2 md:gap-3",children:[e.jsx(dn,{className:"h-4 w-4 md:h-5 md:w-5 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"font-semibold text-sm md:text-base",children:""}),e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground mt-1 line-clamp-2",children:""})]})]})}),e.jsx("div",{className:`border-2 rounded-lg p-3 md:p-4 cursor-pointer transition-all ${n==="upload"?"border-primary bg-primary/5":"border-muted hover:border-primary/50 active:border-primary/70"}`,onClick:()=>A("upload"),children:e.jsxs("div",{className:"flex items-start gap-2 md:gap-3",children:[e.jsx(fr,{className:"h-4 w-4 md:h-5 md:w-5 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"font-semibold text-sm md:text-base",children:""}),e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground mt-1 line-clamp-2",children:""})]})]})}),e.jsx("div",{className:`border-2 rounded-lg p-3 md:p-4 cursor-pointer transition-all ${n==="path"?"border-primary bg-primary/5":"border-muted hover:border-primary/50 active:border-primary/70"}`,onClick:()=>A("path"),children:e.jsxs("div",{className:"flex items-start gap-2 md:gap-3",children:[e.jsx(Tb,{className:"h-4 w-4 md:h-5 md:w-5 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"font-semibold text-sm md:text-base",children:""}),e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground mt-1 line-clamp-2",children:""})]})]})})]}),n==="preset"&&e.jsxs("div",{className:"space-y-3 pt-2 border-t",children:[e.jsx(b,{className:"text-sm md:text-base",children:""}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:Object.entries(Du).map(([Q,P])=>{const q=P.icon,W=p===Q;return e.jsx("div",{className:`border-2 rounded-lg p-3 cursor-pointer transition-all ${W?"border-primary bg-primary/5":"border-muted hover:border-primary/50"}`,onClick:()=>{w(Q),_e(Q)},children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(q,{className:"h-5 w-5 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h4",{className:"font-semibold text-sm",children:P.name}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:P.description}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1 font-mono break-all",children:P.path})]})]})},Q)})})]}),n==="path"&&e.jsxs("div",{className:"space-y-3 pt-2 border-t",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"config-path",className:"text-sm md:text-base",children:""}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsx(ie,{id:"config-path",value:x,onChange:Q=>fe(Q.target.value),placeholder:": C:\\Adapter\\config.toml",className:`text-sm ${v?"border-destructive":""}`}),v&&e.jsx("p",{className:"text-xs text-destructive",children:v})]}),e.jsx(N,{onClick:()=>Se(x),disabled:O||!x||!!v,className:"w-full sm:w-auto",children:O?e.jsxs(e.Fragment,{children:[e.jsx(Ct,{className:"h-4 w-4 animate-spin mr-2"}),e.jsx("span",{className:"sm:hidden",children:"..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"sm:hidden",children:""}),e.jsx("span",{className:"hidden sm:inline",children:""})]})})]})]}),e.jsxs("details",{className:"rounded-lg bg-muted/50 p-3 group",children:[e.jsxs("summary",{className:"text-xs font-medium cursor-pointer select-none list-none flex items-center justify-between",children:[e.jsx("span",{children:""}),e.jsx("svg",{className:"h-4 w-4 transition-transform group-open:rotate-180",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),e.jsxs("div",{className:"mt-2 space-y-2 text-xs text-muted-foreground",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"font-mono bg-background px-1.5 py-0.5 rounded text-[10px] md:text-xs whitespace-nowrap",children:"Windows"})}),e.jsxs("div",{className:"pl-2 space-y-0.5 text-[10px] md:text-xs break-all",children:[e.jsx("div",{children:"C:\\Adapter\\config.toml"}),e.jsx("div",{className:"hidden sm:block",children:"D:\\MaiBot\\adapter\\config.toml"}),e.jsx("div",{className:"hidden sm:block",children:"\\\\server\\share\\config.toml"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"font-mono bg-background px-1.5 py-0.5 rounded text-[10px] md:text-xs whitespace-nowrap",children:"Linux"})}),e.jsxs("div",{className:"pl-2 space-y-0.5 text-[10px] md:text-xs break-all",children:[e.jsx("div",{children:"/opt/adapter/config.toml"}),e.jsx("div",{className:"hidden sm:block",children:"/home/user/adapter/config.toml"}),e.jsx("div",{className:"hidden sm:block",children:"~/adapter/config.toml"})]})]}),e.jsx("p",{className:"pt-1 border-t text-[10px] md:text-xs",children:"  1 "})]})]})]})]})]}),e.jsxs(cl,{children:[e.jsx(La,{className:"h-4 w-4"}),e.jsx(ol,{children:n==="preset"?e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:""})," 1 ",S&&" (...)"]}):n==="upload"?e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:""}),"      "]}):e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:""})," 1 ",S&&" (...)"]})})]}),n==="upload"&&!c&&e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full",children:[e.jsx("input",{ref:G,type:"file",accept:".toml",className:"hidden",onChange:pe}),e.jsxs(N,{onClick:()=>G.current?.click(),size:"sm",variant:"outline",className:"w-full sm:w-auto",children:[e.jsx(fr,{className:"mr-2 h-4 w-4"}),""]}),e.jsxs(N,{onClick:he,size:"sm",className:"w-full sm:w-auto",children:[e.jsx(Ra,{className:"mr-2 h-4 w-4"}),""]})]}),n==="upload"&&c&&e.jsx("div",{className:"flex gap-2",children:e.jsxs(N,{onClick:Ne,size:"sm",className:"w-full sm:w-auto",children:[e.jsx(rl,{className:"mr-2 h-4 w-4"}),""]})}),(n==="preset"||n==="path")&&c&&e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs(N,{onClick:ye,size:"sm",disabled:S||!!v,className:"w-full sm:w-auto",children:[e.jsx(yr,{className:"mr-2 h-4 w-4"}),S?"...":""]}),e.jsxs(N,{onClick:be,size:"sm",variant:"outline",disabled:O,className:"w-full sm:w-auto",children:[e.jsx(Ct,{className:`mr-2 h-4 w-4 ${O?"animate-spin":""}`}),""]}),n==="path"&&e.jsxs(N,{onClick:se,size:"sm",variant:"destructive",className:"w-full sm:w-auto",children:[e.jsx(ts,{className:"mr-2 h-4 w-4"}),""]})]}),c?e.jsxs(Ca,{defaultValue:"napcat",className:"w-full",children:[e.jsx("div",{className:"overflow-x-auto -mx-4 px-4 sm:mx-0 sm:px-0",children:e.jsxs(pa,{className:"inline-flex w-auto min-w-full sm:grid sm:w-full sm:grid-cols-5",children:[e.jsxs(ns,{value:"napcat",className:"flex-shrink-0 text-xs sm:text-sm whitespace-nowrap",children:[e.jsx("span",{className:"hidden sm:inline",children:"Napcat "}),e.jsx("span",{className:"sm:hidden",children:"Napcat"})]}),e.jsxs(ns,{value:"maibot",className:"flex-shrink-0 text-xs sm:text-sm whitespace-nowrap",children:[e.jsx("span",{className:"hidden sm:inline",children:""}),e.jsx("span",{className:"sm:hidden",children:""})]}),e.jsxs(ns,{value:"chat",className:"flex-shrink-0 text-xs sm:text-sm whitespace-nowrap",children:[e.jsx("span",{className:"hidden sm:inline",children:""}),e.jsx("span",{className:"sm:hidden",children:""})]}),e.jsxs(ns,{value:"voice",className:"flex-shrink-0 text-xs sm:text-sm whitespace-nowrap",children:[e.jsx("span",{className:"hidden sm:inline",children:""}),e.jsx("span",{className:"sm:hidden",children:""})]}),e.jsx(ns,{value:"debug",className:"flex-shrink-0 text-xs sm:text-sm whitespace-nowrap",children:""})]})}),e.jsx(Es,{value:"napcat",className:"space-y-4",children:e.jsx(Nw,{config:c,onChange:Q=>{d(Q),je(Q)}})}),e.jsx(Es,{value:"maibot",className:"space-y-4",children:e.jsx(bw,{config:c,onChange:Q=>{d(Q),je(Q)}})}),e.jsx(Es,{value:"chat",className:"space-y-4",children:e.jsx(yw,{config:c,onChange:Q=>{d(Q),je(Q)}})}),e.jsx(Es,{value:"voice",className:"space-y-4",children:e.jsx(ww,{config:c,onChange:Q=>{d(Q),je(Q)}})}),e.jsx(Es,{value:"debug",className:"space-y-4",children:e.jsx(_w,{config:c,onChange:Q=>{d(Q),je(Q)}})})]}):e.jsx("div",{className:"rounded-lg border bg-card p-6 md:p-12",children:e.jsxs("div",{className:"text-center space-y-3 md:space-y-4",children:[e.jsx(Ra,{className:"h-12 w-12 md:h-16 md:w-16 mx-auto text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold",children:""}),e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground mt-2 px-4",children:n==="preset"?"":n==="upload"?"":""})]})]})}),e.jsx(ps,{open:L,onOpenChange:R,children:e.jsxs(rs,{children:[e.jsxs(cs,{children:[e.jsx(ds,{children:""}),e.jsxs(us,{children:["",e.jsx("br",{}),e.jsx("span",{className:"text-destructive font-medium",children:""})]})]}),e.jsxs(os,{children:[e.jsx(hs,{onClick:()=>{R(!1),$(null)},children:""}),e.jsx(ms,{onClick:E,children:""})]})]})}),e.jsx(ps,{open:H,onOpenChange:D,children:e.jsxs(rs,{children:[e.jsxs(cs,{children:[e.jsx(ds,{children:""}),e.jsxs(us,{children:["",e.jsx("br",{}),e.jsx("span",{className:"text-muted-foreground text-sm",children:""})]})]}),e.jsxs(os,{children:[e.jsx(hs,{onClick:()=>D(!1),children:""}),e.jsx(ms,{onClick:me,className:"bg-destructive hover:bg-destructive/90",children:""})]})]})})]})})}function Nw({config:n,onChange:i}){return e.jsx("div",{className:"rounded-lg border bg-card p-4 md:p-6 space-y-4 md:space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold mb-3 md:mb-4",children:"Napcat WebSocket "}),e.jsxs("div",{className:"grid gap-3 md:gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"napcat-host",className:"text-sm md:text-base",children:""}),e.jsx(ie,{id:"napcat-host",value:n.napcat_server.host,onChange:c=>i({...n,napcat_server:{...n.napcat_server,host:c.target.value}}),placeholder:"localhost",className:"text-sm md:text-base"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Napcat "})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"napcat-port",className:"text-sm md:text-base",children:""}),e.jsx(ie,{id:"napcat-port",type:"number",value:n.napcat_server.port||"",onChange:c=>i({...n,napcat_server:{...n.napcat_server,port:c.target.value?parseInt(c.target.value):0}}),placeholder:"8095",className:"text-sm md:text-base"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Napcat  8095"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"napcat-token",className:"text-sm md:text-base",children:"Token"}),e.jsx(ie,{id:"napcat-token",type:"password",value:n.napcat_server.token,onChange:c=>i({...n,napcat_server:{...n.napcat_server,token:c.target.value}}),placeholder:"",className:"text-sm md:text-base"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Napcat "})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"napcat-heartbeat",className:"text-sm md:text-base",children:""}),e.jsx(ie,{id:"napcat-heartbeat",type:"number",value:n.napcat_server.heartbeat_interval||"",onChange:c=>i({...n,napcat_server:{...n.napcat_server,heartbeat_interval:c.target.value?parseInt(c.target.value):0}}),placeholder:"30",className:"text-sm md:text-base"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" Napcat  30"})]})]})]})})}function bw({config:n,onChange:i}){return e.jsx("div",{className:"rounded-lg border bg-card p-4 md:p-6 space-y-4 md:space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold mb-3 md:mb-4",children:" WebSocket "}),e.jsxs("div",{className:"grid gap-3 md:gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"maibot-host",className:"text-sm md:text-base",children:""}),e.jsx(ie,{id:"maibot-host",value:n.maibot_server.host,onChange:c=>i({...n,maibot_server:{...n.maibot_server,host:c.target.value}}),placeholder:"localhost",className:"text-sm md:text-base"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" .env  HOST "})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"maibot-port",className:"text-sm md:text-base",children:""}),e.jsx(ie,{id:"maibot-port",type:"number",value:n.maibot_server.port||"",onChange:c=>i({...n,maibot_server:{...n.maibot_server,port:c.target.value?parseInt(c.target.value):0}}),placeholder:"8000",className:"text-sm md:text-base"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:" .env  PORT  8000"})]})]})]})})}function yw({config:n,onChange:i}){const c=f=>{const x={...n};f==="group"?x.chat.group_list=[...x.chat.group_list,0]:f==="private"?x.chat.private_list=[...x.chat.private_list,0]:x.chat.ban_user_id=[...x.chat.ban_user_id,0],i(x)},d=(f,x)=>{const j={...n};f==="group"?j.chat.group_list=j.chat.group_list.filter((p,w)=>w!==x):f==="private"?j.chat.private_list=j.chat.private_list.filter((p,w)=>w!==x):j.chat.ban_user_id=j.chat.ban_user_id.filter((p,w)=>w!==x),i(j)},h=(f,x,j)=>{const p={...n};f==="group"?p.chat.group_list[x]=j:f==="private"?p.chat.private_list[x]=j:p.chat.ban_user_id[x]=j,i(p)};return e.jsx("div",{className:"rounded-lg border bg-card p-4 md:p-6 space-y-4 md:space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold mb-3 md:mb-4",children:""}),e.jsxs("div",{className:"grid gap-4 md:gap-6",children:[e.jsxs("div",{className:"space-y-3 md:space-y-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{className:"text-sm md:text-base",children:""}),e.jsxs(Be,{value:n.chat.group_list_type,onValueChange:f=>i({...n,chat:{...n.chat,group_list_type:f}}),children:[e.jsx(Le,{children:e.jsx(He,{})}),e.jsxs(Ue,{children:[e.jsx(te,{value:"whitelist",children:""}),e.jsx(te,{value:"blacklist",children:""})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-0",children:[e.jsx(b,{className:"text-sm md:text-base",children:""}),e.jsxs(N,{onClick:()=>c("group"),size:"sm",variant:"outline",className:"w-full sm:w-auto",children:[e.jsx(Ra,{className:"mr-1 h-4 w-4"}),""]})]}),n.chat.group_list.map((f,x)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ie,{type:"number",value:f,onChange:j=>h("group",x,parseInt(j.target.value)||0),placeholder:"",className:"text-sm md:text-base"}),e.jsxs(ps,{children:[e.jsx(tt,{asChild:!0,children:e.jsx(N,{size:"icon",variant:"outline",children:e.jsx(ts,{className:"h-4 w-4"})})}),e.jsxs(rs,{children:[e.jsxs(cs,{children:[e.jsx(ds,{children:""}),e.jsxs(us,{children:[" ",f," "]})]}),e.jsxs(os,{children:[e.jsx(hs,{children:""}),e.jsx(ms,{onClick:()=>d("group",x),children:""})]})]})]})]},x)),n.chat.group_list.length===0&&e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]})]}),e.jsxs("div",{className:"space-y-3 md:space-y-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{className:"text-sm md:text-base",children:""}),e.jsxs(Be,{value:n.chat.private_list_type,onValueChange:f=>i({...n,chat:{...n.chat,private_list_type:f}}),children:[e.jsx(Le,{children:e.jsx(He,{})}),e.jsxs(Ue,{children:[e.jsx(te,{value:"whitelist",children:""}),e.jsx(te,{value:"blacklist",children:""})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-0",children:[e.jsx(b,{className:"text-sm md:text-base",children:""}),e.jsxs(N,{onClick:()=>c("private"),size:"sm",variant:"outline",className:"w-full sm:w-auto",children:[e.jsx(Ra,{className:"mr-1 h-4 w-4"}),""]})]}),n.chat.private_list.map((f,x)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ie,{type:"number",value:f,onChange:j=>h("private",x,parseInt(j.target.value)||0),placeholder:"QQ",className:"text-sm md:text-base"}),e.jsxs(ps,{children:[e.jsx(tt,{asChild:!0,children:e.jsx(N,{size:"icon",variant:"outline",children:e.jsx(ts,{className:"h-4 w-4"})})}),e.jsxs(rs,{children:[e.jsxs(cs,{children:[e.jsx(ds,{children:""}),e.jsxs(us,{children:[" ",f," "]})]}),e.jsxs(os,{children:[e.jsx(hs,{children:""}),e.jsx(ms,{onClick:()=>d("private",x),children:""})]})]})]})]},x)),n.chat.private_list.length===0&&e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-0",children:[e.jsxs("div",{children:[e.jsx(b,{className:"text-sm md:text-base",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:""})]}),e.jsxs(N,{onClick:()=>c("ban"),size:"sm",variant:"outline",className:"w-full sm:w-auto",children:[e.jsx(Ra,{className:"mr-1 h-4 w-4"}),""]})]}),n.chat.ban_user_id.map((f,x)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ie,{type:"number",value:f,onChange:j=>h("ban",x,parseInt(j.target.value)||0),placeholder:"QQ",className:"text-sm md:text-base"}),e.jsxs(ps,{children:[e.jsx(tt,{asChild:!0,children:e.jsx(N,{size:"icon",variant:"outline",children:e.jsx(ts,{className:"h-4 w-4"})})}),e.jsxs(rs,{children:[e.jsxs(cs,{children:[e.jsx(ds,{children:""}),e.jsxs(us,{children:[" ",f," "]})]}),e.jsxs(os,{children:[e.jsx(hs,{children:""}),e.jsx(ms,{onClick:()=>d("ban",x),children:""})]})]})]})]},x)),n.chat.ban_user_id.length===0&&e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(b,{className:"text-sm md:text-base",children:"QQ"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"QQ"})]}),e.jsx(Qe,{checked:n.chat.ban_qq_bot,onCheckedChange:f=>i({...n,chat:{...n.chat,ban_qq_bot:f}})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(b,{className:"text-sm md:text-base",children:""}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:""})]}),e.jsx(Qe,{checked:n.chat.enable_poke,onCheckedChange:f=>i({...n,chat:{...n.chat,enable_poke:f}})})]})]})]})})}function ww({config:n,onChange:i}){return e.jsx("div",{className:"rounded-lg border bg-card p-4 md:p-6 space-y-4 md:space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold mb-3 md:mb-4",children:""}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(b,{className:"text-sm md:text-base",children:" TTS "}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:" TTS "})]}),e.jsx(Qe,{checked:n.voice.use_tts,onCheckedChange:c=>i({...n,voice:{use_tts:c}})})]})]})})}function _w({config:n,onChange:i}){return e.jsx("div",{className:"rounded-lg border bg-card p-4 md:p-6 space-y-4 md:space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold mb-3 md:mb-4",children:""}),e.jsx("div",{className:"grid gap-3 md:gap-4",children:e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{className:"text-sm md:text-base",children:""}),e.jsxs(Be,{value:n.debug.level,onValueChange:c=>i({...n,debug:{level:c}}),children:[e.jsx(Le,{children:e.jsx(He,{})}),e.jsxs(Ue,{children:[e.jsx(te,{value:"DEBUG",children:"DEBUG"}),e.jsx(te,{value:"INFO",children:"INFO"}),e.jsx(te,{value:"WARNING",children:"WARNING"}),e.jsx(te,{value:"ERROR",children:"ERROR"}),e.jsx(te,{value:"CRITICAL",children:"CRITICAL"})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})})]})})}const Sw=["defaultChecked","defaultValue","suppressContentEditableWarning","suppressHydrationWarning","dangerouslySetInnerHTML","accessKey","className","contentEditable","contextMenu","dir","draggable","hidden","id","lang","placeholder","slot","spellCheck","style","tabIndex","title","translate","radioGroup","role","about","datatype","inlist","prefix","property","resource","typeof","vocab","autoCapitalize","autoCorrect","autoSave","color","itemProp","itemScope","itemType","itemID","itemRef","results","security","unselectable","inputMode","is","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Cw=/^(aria-|data-)/,Bg=n=>Object.fromEntries(Object.entries(n).filter(([i])=>Cw.test(i)||Sw.includes(i)));function kw(n,i){const c=Bg(n);return Object.keys(n).some(d=>!Object.hasOwn(c,d)&&n[d]!==i[d])}class Tw extends u.Component{container;plugin;componentDidMount(){this.installPlugin()}componentDidUpdate(i){if(i.uppy!==this.props.uppy)this.uninstallPlugin(i),this.installPlugin();else if(kw(this.props,i)){const{uppy:c,...d}={...this.props,target:this.container};this.plugin.setOptions(d)}}componentWillUnmount(){this.uninstallPlugin()}installPlugin(){const{uppy:i,...c}={id:"Dashboard",...this.props,inline:!0,target:this.container};i.use(oy,c),this.plugin=i.getPlugin(c.id)}uninstallPlugin(i=this.props){const{uppy:c}=i;c.removePlugin(this.plugin)}render(){return u.createElement("div",{className:"uppy-Container",ref:i=>{this.container=i},...Bg(this.props)})}}function Ew({src:n,alt:i="",className:c,maxRetries:d=5,retryInterval:h=1500}){const[f,x]=u.useState("loading"),[j,p]=u.useState(0),[w,v]=u.useState(null),y=u.useCallback(async()=>{try{const S=await fetch(n,{credentials:"include"});if(S.status===202){x("generating"),j<d?setTimeout(()=>{p(Y=>Y+1)},h):x("error");return}if(!S.ok){x("error");return}const k=await S.blob(),O=URL.createObjectURL(k);v(O),x("loaded")}catch(S){console.error(":",S),x("error")}},[n,j,d,h]);return u.useEffect(()=>{x("loading"),p(0),v(null)},[n]),u.useEffect(()=>{y()},[y]),u.useEffect(()=>()=>{w&&URL.revokeObjectURL(w)},[w]),f==="loading"||f==="generating"?e.jsx(Ng,{className:X("w-full h-full",c)}):f==="error"||!w?e.jsx("div",{className:X("w-full h-full flex items-center justify-center bg-muted",c),children:e.jsx(hg,{className:"h-8 w-8 text-muted-foreground"})}):e.jsx("img",{src:w,alt:i,className:X("w-full h-full object-contain",c)})}function zw({content:n,className:i=""}){return e.jsx("div",{className:`prose prose-sm dark:prose-invert max-w-none ${i}`,children:e.jsx(uy,{remarkPlugins:[hy,xy],rehypePlugins:[my],components:{code({inline:c,className:d,children:h,...f}){return c?e.jsx("code",{className:"bg-muted px-1.5 py-0.5 rounded text-sm font-mono",...f,children:h}):e.jsx("code",{className:`${d} block bg-muted p-4 rounded-lg overflow-x-auto`,...f,children:h})},table({children:c,...d}){return e.jsx("div",{className:"overflow-x-auto",children:e.jsx("table",{className:"border-collapse border border-border",...d,children:c})})},th({children:c,...d}){return e.jsx("th",{className:"border border-border bg-muted px-4 py-2 text-left font-semibold",...d,children:c})},td({children:c,...d}){return e.jsx("td",{className:"border border-border px-4 py-2",...d,children:c})},a({children:c,...d}){return e.jsx("a",{className:"text-primary hover:underline",target:"_blank",rel:"noopener noreferrer",...d,children:c})},blockquote({children:c,...d}){return e.jsx("blockquote",{className:"border-l-4 border-primary pl-4 italic text-muted-foreground",...d,children:c})},h1({children:c,...d}){return e.jsx("h1",{className:"text-3xl font-bold mt-6 mb-4",...d,children:c})},h2({children:c,...d}){return e.jsx("h2",{className:"text-2xl font-bold mt-5 mb-3",...d,children:c})},h3({children:c,...d}){return e.jsx("h3",{className:"text-xl font-bold mt-4 mb-2",...d,children:c})},h4({children:c,...d}){return e.jsx("h4",{className:"text-lg font-semibold mt-3 mb-2",...d,children:c})},ul({children:c,...d}){return e.jsx("ul",{className:"list-disc list-inside space-y-1 my-2",...d,children:c})},ol({children:c,...d}){return e.jsx("ol",{className:"list-decimal list-inside space-y-1 my-2",...d,children:c})},p({children:c,...d}){return e.jsx("p",{className:"my-2 leading-relaxed",...d,children:c})},hr({...c}){return e.jsx("hr",{className:"my-4 border-border",...c})}},children:n})})}function Aw({children:n,className:i}){return e.jsx(zw,{content:n,className:i})}const ga="/api/webui/emoji";async function Mw(n){const i=new URLSearchParams;n.page&&i.append("page",n.page.toString()),n.page_size&&i.append("page_size",n.page_size.toString()),n.search&&i.append("search",n.search),n.is_registered!==void 0&&i.append("is_registered",n.is_registered.toString()),n.is_banned!==void 0&&i.append("is_banned",n.is_banned.toString()),n.format&&i.append("format",n.format),n.sort_by&&i.append("sort_by",n.sort_by),n.sort_order&&i.append("sort_order",n.sort_order);const c=await Te(`${ga}/list?${i}`,{});if(!c.ok)throw new Error(`: ${c.statusText}`);return c.json()}async function Dw(n){const i=await Te(`${ga}/${n}`,{});if(!i.ok)throw new Error(`: ${i.statusText}`);return i.json()}async function Ow(n,i){const c=await Te(`${ga}/${n}`,{method:"PATCH",body:JSON.stringify(i)});if(!c.ok)throw new Error(`: ${c.statusText}`);return c.json()}async function Rw(n){const i=await Te(`${ga}/${n}`,{method:"DELETE"});if(!i.ok)throw new Error(`: ${i.statusText}`);return i.json()}async function Lw(){const n=await Te(`${ga}/stats/summary`,{});if(!n.ok)throw new Error(`: ${n.statusText}`);return n.json()}async function Uw(n){const i=await Te(`${ga}/${n}/register`,{method:"POST"});if(!i.ok)throw new Error(`: ${i.statusText}`);return i.json()}async function Bw(n){const i=await Te(`${ga}/${n}/ban`,{method:"POST"});if(!i.ok)throw new Error(`: ${i.statusText}`);return i.json()}function Hw(n,i=!1){return i?`${ga}/${n}/thumbnail?original=true`:`${ga}/${n}/thumbnail`}function qw(n){return`${ga}/${n}/thumbnail?original=true`}async function Gw(n){const i=await Te(`${ga}/batch/delete`,{method:"POST",body:JSON.stringify({emoji_ids:n})});if(!i.ok){const c=await i.json();throw new Error(c.detail||"")}return i.json()}function Vw(){return`${ga}/upload`}function Fw(){const[n,i]=u.useState([]),[c,d]=u.useState(null),[h,f]=u.useState(!1),[x,j]=u.useState(1),[p,w]=u.useState(0),[v,y]=u.useState(20),[S,k]=u.useState("all"),[O,Y]=u.useState("all"),[L,R]=u.useState("all"),[H,D]=u.useState("usage_count"),[C,$]=u.useState("desc"),[G,T]=u.useState(null),[M,ne]=u.useState(!1),[fe,_e]=u.useState(!1),[Se,je]=u.useState(!1),[ye,be]=u.useState(new Set),[A,K]=u.useState(!1),[E,se]=u.useState(""),[_,me]=u.useState("medium"),[re,le]=u.useState(!1),{toast:pe}=Vs(),Ne=u.useCallback(async()=>{try{f(!0);const ue=await Mw({page:x,page_size:v,is_registered:S==="all"?void 0:S==="registered",is_banned:O==="all"?void 0:O==="banned",format:L==="all"?void 0:L,sort_by:H,sort_order:C});i(ue.data),w(ue.total)}catch(ue){const Ee=ue instanceof Error?ue.message:"";pe({title:"",description:Ee,variant:"destructive"})}finally{f(!1)}},[x,v,S,O,L,H,C,pe]),he=async()=>{try{const ue=await Lw();d(ue.data)}catch(ue){console.error(":",ue)}};u.useEffect(()=>{Ne()},[Ne]),u.useEffect(()=>{he()},[]);const Q=async ue=>{try{const Ee=await Dw(ue.id);T(Ee.data),ne(!0)}catch(Ee){const as=Ee instanceof Error?Ee.message:"";pe({title:"",description:as,variant:"destructive"})}},P=ue=>{T(ue),_e(!0)},q=ue=>{T(ue),je(!0)},W=async()=>{if(G)try{await Rw(G.id),pe({title:"",description:""}),je(!1),T(null),Ne(),he()}catch(ue){const Ee=ue instanceof Error?ue.message:"";pe({title:"",description:Ee,variant:"destructive"})}},Ce=async ue=>{try{await Uw(ue.id),pe({title:"",description:""}),Ne(),he()}catch(Ee){const as=Ee instanceof Error?Ee.message:"";pe({title:"",description:as,variant:"destructive"})}},Me=async ue=>{try{await Bw(ue.id),pe({title:"",description:""}),Ne(),he()}catch(Ee){const as=Ee instanceof Error?Ee.message:"";pe({title:"",description:as,variant:"destructive"})}},ce=ue=>{const Ee=new Set(ye);Ee.has(ue)?Ee.delete(ue):Ee.add(ue),be(Ee)},De=async()=>{try{const ue=await Gw(Array.from(ye));pe({title:"",description:ue.message}),be(new Set),K(!1),Ne(),he()}catch(ue){pe({title:"",description:ue instanceof Error?ue.message:"",variant:"destructive"})}},Fs=()=>{const ue=parseInt(E),Ee=Math.ceil(p/v);ue>=1&&ue<=Ee?(j(ue),se("")):pe({title:"",description:`1-${Ee}`,variant:"destructive"})},Qs=c?.formats?Object.keys(c.formats):[];return e.jsxs("div",{className:"h-[calc(100vh-4rem)] flex flex-col p-4 sm:p-6",children:[e.jsxs("div",{className:"mb-4 sm:mb-6 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:""})]}),e.jsxs(N,{onClick:()=>le(!0),className:"gap-2",children:[e.jsx(fr,{className:"h-4 w-4"}),""]})]}),e.jsx(ss,{className:"flex-1",children:e.jsxs("div",{className:"space-y-4 sm:space-y-6 pr-4",children:[c&&e.jsxs("div",{className:"grid gap-4 grid-cols-2 lg:grid-cols-4",children:[e.jsx(Ze,{children:e.jsxs(ys,{className:"pb-2",children:[e.jsx(ct,{children:""}),e.jsx(ws,{className:"text-2xl",children:c.total})]})}),e.jsx(Ze,{children:e.jsxs(ys,{className:"pb-2",children:[e.jsx(ct,{children:""}),e.jsx(ws,{className:"text-2xl text-green-600",children:c.registered})]})}),e.jsx(Ze,{children:e.jsxs(ys,{className:"pb-2",children:[e.jsx(ct,{children:""}),e.jsx(ws,{className:"text-2xl text-red-600",children:c.banned})]})}),e.jsx(Ze,{children:e.jsxs(ys,{className:"pb-2",children:[e.jsx(ct,{children:""}),e.jsx(ws,{className:"text-2xl text-gray-600",children:c.unregistered})]})})]}),e.jsxs(Ze,{children:[e.jsx(ys,{children:e.jsxs(ws,{className:"flex items-center gap-2",children:[e.jsx(Ru,{className:"h-5 w-5"}),""]})}),e.jsxs(Ts,{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{children:""}),e.jsxs(Be,{value:`${H}-${C}`,onValueChange:ue=>{const[Ee,as]=ue.split("-");D(Ee),$(as),j(1)},children:[e.jsx(Le,{children:e.jsx(He,{})}),e.jsxs(Ue,{children:[e.jsx(te,{value:"usage_count-desc",children:" ()"}),e.jsx(te,{value:"usage_count-asc",children:" ()"}),e.jsx(te,{value:"register_time-desc",children:" ()"}),e.jsx(te,{value:"register_time-asc",children:" ()"}),e.jsx(te,{value:"record_time-desc",children:" ()"}),e.jsx(te,{value:"record_time-asc",children:" ()"}),e.jsx(te,{value:"last_used_time-desc",children:" ()"}),e.jsx(te,{value:"last_used_time-asc",children:" ()"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{children:""}),e.jsxs(Be,{value:S,onValueChange:ue=>{k(ue),j(1)},children:[e.jsx(Le,{children:e.jsx(He,{})}),e.jsxs(Ue,{children:[e.jsx(te,{value:"all",children:""}),e.jsx(te,{value:"registered",children:""}),e.jsx(te,{value:"unregistered",children:""})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{children:""}),e.jsxs(Be,{value:O,onValueChange:ue=>{Y(ue),j(1)},children:[e.jsx(Le,{children:e.jsx(He,{})}),e.jsxs(Ue,{children:[e.jsx(te,{value:"all",children:""}),e.jsx(te,{value:"banned",children:""}),e.jsx(te,{value:"unbanned",children:""})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{children:""}),e.jsxs(Be,{value:L,onValueChange:ue=>{R(ue),j(1)},children:[e.jsx(Le,{children:e.jsx(He,{})}),e.jsxs(Ue,{children:[e.jsx(te,{value:"all",children:""}),Qs.map(ue=>e.jsxs(te,{value:ue,children:[ue.toUpperCase()," (",c?.formats[ue],")"]},ue))]})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 pt-4 border-t",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[ye.size>0&&e.jsxs("span",{className:"text-sm text-muted-foreground",children:[" ",ye.size," "]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{className:"text-sm whitespace-nowrap",children:""}),e.jsxs(Be,{value:_,onValueChange:ue=>me(ue),children:[e.jsx(Le,{className:"w-24",children:e.jsx(He,{})}),e.jsxs(Ue,{children:[e.jsx(te,{value:"small",children:""}),e.jsx(te,{value:"medium",children:""}),e.jsx(te,{value:"large",children:""})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{htmlFor:"emoji-page-size",className:"text-sm whitespace-nowrap",children:""}),e.jsxs(Be,{value:v.toString(),onValueChange:ue=>{y(parseInt(ue)),j(1),be(new Set)},children:[e.jsx(Le,{id:"emoji-page-size",className:"w-20",children:e.jsx(He,{})}),e.jsxs(Ue,{children:[e.jsx(te,{value:"20",children:"20"}),e.jsx(te,{value:"40",children:"40"}),e.jsx(te,{value:"60",children:"60"}),e.jsx(te,{value:"100",children:"100"})]})]}),ye.size>0&&e.jsxs(e.Fragment,{children:[e.jsx(N,{variant:"outline",size:"sm",onClick:()=>be(new Set),children:""}),e.jsxs(N,{variant:"destructive",size:"sm",onClick:()=>K(!0),children:[e.jsx(ts,{className:"h-4 w-4 mr-1"}),""]})]})]})]}),e.jsx("div",{className:"flex justify-end pt-4 border-t",children:e.jsxs(N,{variant:"outline",size:"sm",onClick:Ne,disabled:h,children:[e.jsx(Ct,{className:`h-4 w-4 mr-2 ${h?"animate-spin":""}`}),""]})})]})]}),e.jsxs(Ze,{children:[e.jsxs(ys,{children:[e.jsx(ws,{children:""}),e.jsxs(ct,{children:[" ",p,"  ",x," "]})]}),e.jsxs(Ts,{children:[n.length===0?e.jsx("div",{className:"text-center py-12 text-muted-foreground",children:""}):e.jsx("div",{className:`grid gap-3 ${_==="small"?"grid-cols-3 sm:grid-cols-4 md:grid-cols-6 lg:grid-cols-8 xl:grid-cols-10":_==="medium"?"grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 xl:grid-cols-8":"grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5"}`,children:n.map(ue=>e.jsxs("div",{className:`group relative rounded-lg border bg-card overflow-hidden hover:ring-2 hover:ring-primary transition-all cursor-pointer ${ye.has(ue.id)?"ring-2 ring-primary bg-primary/5":""}`,onClick:()=>ce(ue.id),children:[e.jsx("div",{className:`absolute top-1 left-1 z-10 transition-opacity ${ye.has(ue.id)?"opacity-100":"opacity-0 group-hover:opacity-100"}`,children:e.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${ye.has(ue.id)?"bg-primary border-primary text-primary-foreground":"bg-background/80 border-muted-foreground/50"}`,children:ye.has(ue.id)&&e.jsx(fa,{className:"h-3 w-3"})})}),e.jsxs("div",{className:"absolute top-1 right-1 z-10 flex flex-col gap-0.5",children:[ue.is_registered&&e.jsx($e,{variant:"default",className:"bg-green-600 text-[10px] px-1 py-0",children:""}),ue.is_banned&&e.jsx($e,{variant:"destructive",className:"text-[10px] px-1 py-0",children:""})]}),e.jsx("div",{className:`aspect-square bg-muted flex items-center justify-center overflow-hidden ${_==="small"?"p-1":_==="medium"?"p-2":"p-3"}`,children:e.jsx(Ew,{src:Hw(ue.id),alt:""})}),e.jsxs("div",{className:`border-t bg-card ${_==="small"?"p-1":"p-2"}`,children:[e.jsxs("div",{className:"flex items-center justify-between gap-1 text-xs text-muted-foreground mb-1",children:[e.jsx($e,{variant:"outline",className:"text-[10px] px-1 py-0",children:ue.format.toUpperCase()}),e.jsxs("span",{className:"font-mono",children:[ue.usage_count,""]})]}),e.jsxs("div",{className:`flex gap-1 justify-center opacity-0 group-hover:opacity-100 transition-opacity ${_==="small"?"flex-wrap":""}`,children:[e.jsx(N,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:Ee=>{Ee.stopPropagation(),P(ue)},title:"",children:e.jsx(mn,{className:"h-3 w-3"})}),e.jsx(N,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:Ee=>{Ee.stopPropagation(),Q(ue)},title:"",children:e.jsx(La,{className:"h-3 w-3"})}),!ue.is_registered&&e.jsx(N,{variant:"ghost",size:"icon",className:"h-6 w-6 text-green-600 hover:text-green-700",onClick:Ee=>{Ee.stopPropagation(),Ce(ue)},title:"",children:e.jsx(fa,{className:"h-3 w-3"})}),!ue.is_banned&&e.jsx(N,{variant:"ghost",size:"icon",className:"h-6 w-6 text-orange-600 hover:text-orange-700",onClick:Ee=>{Ee.stopPropagation(),Me(ue)},title:"",children:e.jsx(Eb,{className:"h-3 w-3"})}),e.jsx(N,{variant:"ghost",size:"icon",className:"h-6 w-6 text-red-600 hover:text-red-700",onClick:Ee=>{Ee.stopPropagation(),q(ue)},title:"",children:e.jsx(ts,{className:"h-3 w-3"})})]})]})]},ue.id))}),p>0&&e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 mt-4",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:[" ",(x-1)*v+1," "," ",Math.min(x*v,p),"  ",p," "]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{variant:"outline",size:"sm",onClick:()=>j(1),disabled:x===1,className:"hidden sm:flex",children:e.jsx(di,{className:"h-4 w-4"})}),e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>j(ue=>Math.max(1,ue-1)),disabled:x===1,children:[e.jsx(Hl,{className:"h-4 w-4 sm:mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{type:"number",value:E,onChange:ue=>se(ue.target.value),onKeyDown:ue=>ue.key==="Enter"&&Fs(),placeholder:x.toString(),className:"w-16 h-8 text-center",min:1,max:Math.ceil(p/v)}),e.jsx(N,{variant:"outline",size:"sm",onClick:Fs,disabled:!E,className:"h-8",children:""})]}),e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>j(ue=>ue+1),disabled:x>=Math.ceil(p/v),children:[e.jsx("span",{className:"hidden sm:inline",children:""}),e.jsx(ul,{className:"h-4 w-4 sm:ml-1"})]}),e.jsx(N,{variant:"outline",size:"sm",onClick:()=>j(Math.ceil(p/v)),disabled:x>=Math.ceil(p/v),className:"hidden sm:flex",children:e.jsx(ui,{className:"h-4 w-4"})})]})]})]})]}),e.jsx($w,{emoji:G,open:M,onOpenChange:ne}),e.jsx(Qw,{emoji:G,open:fe,onOpenChange:_e,onSuccess:()=>{Ne(),he()}}),e.jsx(Yw,{open:re,onOpenChange:le,onSuccess:()=>{Ne(),he()}})]})}),e.jsx(ps,{open:A,onOpenChange:K,children:e.jsxs(rs,{children:[e.jsxs(cs,{children:[e.jsx(ds,{children:""}),e.jsxs(us,{children:[" ",ye.size," "]})]}),e.jsxs(os,{children:[e.jsx(hs,{children:""}),e.jsx(ms,{onClick:De,children:""})]})]})}),e.jsx($s,{open:Se,onOpenChange:je,children:e.jsxs(Hs,{children:[e.jsxs(qs,{children:[e.jsx(Gs,{children:""}),e.jsx(Is,{children:""})]}),e.jsxs(at,{children:[e.jsx(N,{variant:"outline",onClick:()=>je(!1),children:""}),e.jsx(N,{variant:"destructive",onClick:W,children:""})]})]})})]})}function $w({emoji:n,open:i,onOpenChange:c}){if(!n)return null;const d=h=>h?new Date(h*1e3).toLocaleString("zh-CN"):"-";return e.jsx($s,{open:i,onOpenChange:c,children:e.jsxs(Hs,{className:"max-w-2xl max-h-[90vh]",children:[e.jsx(qs,{children:e.jsx(Gs,{children:""})}),e.jsx(ss,{className:"max-h-[calc(90vh-8rem)] pr-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"w-32 h-32 bg-muted rounded-lg flex items-center justify-center overflow-hidden",children:e.jsx("img",{src:qw(n.id),alt:n.description||"",className:"w-full h-full object-cover",onError:h=>{const f=h.target;f.style.display="none";const x=f.parentElement;x&&(x.innerHTML='<svg class="h-16 w-16 text-muted-foreground" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg>')}})})}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(b,{className:"text-muted-foreground",children:"ID"}),e.jsx("div",{className:"mt-1 font-mono",children:n.id})]}),e.jsxs("div",{children:[e.jsx(b,{className:"text-muted-foreground",children:""}),e.jsx("div",{className:"mt-1",children:e.jsx($e,{variant:"outline",children:n.format.toUpperCase()})})]})]}),e.jsxs("div",{children:[e.jsx(b,{className:"text-muted-foreground",children:""}),e.jsx("div",{className:"mt-1 font-mono text-sm break-all bg-muted p-2 rounded",children:n.full_path})]}),e.jsxs("div",{children:[e.jsx(b,{className:"text-muted-foreground",children:""}),e.jsx("div",{className:"mt-1 font-mono text-sm break-all bg-muted p-2 rounded",children:n.emoji_hash})]}),e.jsxs("div",{children:[e.jsx(b,{className:"text-muted-foreground",children:""}),n.description?e.jsx("div",{className:"mt-1 rounded-lg border bg-muted/50 p-3",children:e.jsx(Aw,{className:"prose-sm",children:n.description})}):e.jsx("div",{className:"mt-1 text-sm text-muted-foreground",children:"-"})]}),e.jsxs("div",{children:[e.jsx(b,{className:"text-muted-foreground",children:""}),e.jsx("div",{className:"mt-1",children:n.emotion?e.jsx("span",{className:"text-sm",children:n.emotion}):e.jsx("span",{className:"text-sm text-muted-foreground",children:"-"})})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(b,{className:"text-muted-foreground",children:""}),e.jsxs("div",{className:"mt-2 flex gap-2",children:[n.is_registered&&e.jsx($e,{variant:"default",className:"bg-green-600",children:""}),n.is_banned&&e.jsx($e,{variant:"destructive",children:""}),!n.is_registered&&!n.is_banned&&e.jsx($e,{variant:"outline",children:""})]})]}),e.jsxs("div",{children:[e.jsx(b,{className:"text-muted-foreground",children:""}),e.jsx("div",{className:"mt-1 font-mono text-lg",children:n.usage_count})]})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(b,{className:"text-muted-foreground",children:""}),e.jsx("div",{className:"mt-1 text-sm",children:d(n.record_time)})]}),e.jsxs("div",{children:[e.jsx(b,{className:"text-muted-foreground",children:""}),e.jsx("div",{className:"mt-1 text-sm",children:d(n.register_time)})]})]}),e.jsxs("div",{children:[e.jsx(b,{className:"text-muted-foreground",children:""}),e.jsx("div",{className:"mt-1 text-sm",children:d(n.last_used_time)})]})]})})]})})}function Qw({emoji:n,open:i,onOpenChange:c,onSuccess:d}){const[h,f]=u.useState(""),[x,j]=u.useState(!1),[p,w]=u.useState(!1),[v,y]=u.useState(!1),{toast:S}=Vs();u.useEffect(()=>{n&&(f(n.emotion||""),j(n.is_registered),w(n.is_banned))},[n]);const k=async()=>{if(n)try{y(!0);const O=h.split(/[,,]/).map(Y=>Y.trim()).filter(Boolean).join(",");await Ow(n.id,{emotion:O||void 0,is_registered:x,is_banned:p}),S({title:"",description:""}),c(!1),d()}catch(O){const Y=O instanceof Error?O.message:"";S({title:"",description:Y,variant:"destructive"})}finally{y(!1)}};return n?e.jsx($s,{open:i,onOpenChange:c,children:e.jsxs(Hs,{className:"max-w-2xl",children:[e.jsxs(qs,{children:[e.jsx(Gs,{children:""}),e.jsx(Is,{children:""})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(b,{children:""}),e.jsx(Bs,{value:h,onChange:O=>f(O.target.value),placeholder:"...",rows:2,className:"mt-1"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:""})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(jt,{id:"is_registered",checked:x,onCheckedChange:O=>{O===!0?(j(!0),w(!1)):j(!1)}}),e.jsx(b,{htmlFor:"is_registered",className:"cursor-pointer",children:""})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(jt,{id:"is_banned",checked:p,onCheckedChange:O=>{O===!0?(w(!0),j(!1)):w(!1)}}),e.jsx(b,{htmlFor:"is_banned",className:"cursor-pointer",children:""})]})]})]}),e.jsxs(at,{children:[e.jsx(N,{variant:"outline",onClick:()=>c(!1),children:""}),e.jsx(N,{onClick:k,disabled:v,children:v?"...":""})]})]})}):null}function Yw({open:n,onOpenChange:i,onSuccess:c}){const[d,h]=u.useState("select"),[f,x]=u.useState([]),[j,p]=u.useState(null),[w,v]=u.useState(!1),{toast:y}=Vs(),S=u.useMemo(()=>new dy({id:"emoji-uploader",autoProceed:!1,restrictions:{maxFileSize:10485760,allowedFileTypes:["image/jpeg","image/png","image/gif","image/webp"],maxNumberOfFiles:20},locale:{pluralize:()=>0,strings:{addMoreFiles:"",addingMoreFiles:"",allowedFileTypes:"%{types}",cancel:"",closeModal:"",complete:"",connectedToInternet:"",copyLink:"",copyLinkToClipboardFallback:"",copyLinkToClipboardSuccess:"",dashboardTitle:"",dashboardWindowTitle:" ESC ",done:"",dropHereOr:" %{browse}",dropHint:"",dropPasteFiles:" %{browseFiles}",dropPasteFolders:" %{browseFolders}",dropPasteBoth:"%{browseFiles}  %{browseFolders}",dropPasteImportFiles:"%{browseFiles} ",dropPasteImportFolders:"%{browseFolders} ",dropPasteImportBoth:"%{browseFiles}%{browseFolders} ",editFile:"",editing:" %{file}",emptyFolderAdded:"",exceedsSize:"%{file}  %{size}",failedToUpload:" %{file} ",fileSource:"%{name}",filesUploadedOfTotal:{0:" %{complete} / %{smart_count} ",1:" %{complete} / %{smart_count} "},filter:"",finishEditingFile:"",folderAdded:{0:" %{folder}  %{smart_count} ",1:" %{folder}  %{smart_count} "},generatingThumbnails:"...",import:"",importFiles:"",importFrom:" %{name} ",loading:"...",logOut:"",myDevice:"",noFilesFound:"",noInternetConnection:"",openFolderNamed:" %{name}",pause:"",pauseUpload:"",paused:"",poweredBy:"%{uppy}",processingXFiles:{0:" %{smart_count} ",1:" %{smart_count} "},recording:"",removeFile:"",resetFilter:"",resume:"",resumeUpload:"",retry:"",retryUpload:"",save:"",saveChanges:"",selectFileNamed:" %{name}",selectX:{0:" %{smart_count}",1:" %{smart_count}"},smile:"",startRecording:"",stopRecording:"",takePicture:"",timedOut:" %{seconds} ",upload:"",uploadComplete:"",uploadFailed:"",uploadPaused:"",uploadXFiles:{0:"%{smart_count} ",1:"%{smart_count} "},uploadXNewFiles:{0:"+%{smart_count} ",1:"+%{smart_count} "},uploading:"",uploadingXFiles:{0:" %{smart_count} ",1:" %{smart_count} "},xFilesSelected:{0:" %{smart_count} ",1:" %{smart_count} "},xMoreFilesAdded:{0:" %{smart_count} ",1:" %{smart_count} "},xTimeLeft:" %{time}",youCanOnlyUploadFileTypes:"%{types}",youCanOnlyUploadX:{0:" %{smart_count} ",1:" %{smart_count} "},youHaveToAtLeastSelectX:{0:" %{smart_count} ",1:" %{smart_count} "},browseFiles:"",browseFolders:"",cancelUpload:"",addMore:"",back:"",editFileWithFilename:" %{file}"}}}),[]);u.useEffect(()=>{const G=()=>{const T=S.getFiles();if(T.length===0)return;const M=T.map(ne=>({id:ne.id,name:ne.name,previewUrl:ne.preview||URL.createObjectURL(ne.data),emotion:"",description:"",isRegistered:!0,file:ne.data}));x(M),T.length===1?(p(M[0].id),h("edit-single")):h("edit-multiple")};return S.on("upload",G),()=>{S.off("upload",G)}},[S]),u.useEffect(()=>{n||(S.cancelAll(),h("select"),x([]),p(null),v(!1))},[n,S]);const k=u.useCallback((G,T)=>{x(M=>M.map(ne=>ne.id===G?{...ne,...T}:ne))},[]),O=u.useCallback(G=>G.emotion.trim().length>0,[]),Y=u.useMemo(()=>f.length>0&&f.every(O),[f,O]),L=u.useMemo(()=>f.find(G=>G.id===j)||null,[f,j]),R=u.useCallback(()=>{(d==="edit-single"||d==="edit-multiple")&&(h("select"),x([]),p(null))},[d]),H=u.useCallback(async()=>{if(!Y){y({title:"",description:"",variant:"destructive"});return}v(!0);const G=localStorage.getItem("access-token")||"";let T=0,M=0;try{for(const ne of f){const fe=new FormData;fe.append("file",ne.file),fe.append("emotion",ne.emotion),fe.append("description",ne.description),fe.append("is_registered",ne.isRegistered.toString());try{(await fetch(Vw(),{method:"POST",headers:{Authorization:`Bearer ${G}`},body:fe})).ok?T++:M++}catch{M++}}M===0?(y({title:"",description:` ${T} `}),i(!1),c()):(y({title:"",description:` ${T}  ${M} `,variant:"destructive"}),c())}finally{v(!1)}},[Y,f,y,i,c]),D=()=>e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"border rounded-lg overflow-hidden w-full",children:e.jsx(Tw,{uppy:S,proudlyDisplayPoweredByUppy:!1,hideProgressDetails:!0,height:350,width:"100%",theme:"auto",note:" JPGPNGGIFWebP  20 "})})}),C=()=>{const G=f[0];return G?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(N,{variant:"ghost",size:"sm",onClick:R,children:[e.jsx(ii,{className:"h-4 w-4 mr-1"}),""]}),e.jsx("span",{className:"text-sm text-muted-foreground",children:""})]}),e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("div",{className:"flex-shrink-0",children:[e.jsx("div",{className:"w-32 h-32 rounded-lg border overflow-hidden bg-muted flex items-center justify-center",children:e.jsx("img",{src:G.previewUrl,alt:G.name,className:"max-w-full max-h-full object-contain"})}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2 text-center truncate max-w-32",children:G.name})]}),e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(b,{htmlFor:"single-emotion",children:[" ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(ie,{id:"single-emotion",value:G.emotion,onChange:T=>k(G.id,{emotion:T.target.value}),placeholder:",",className:G.emotion.trim()?"":"border-destructive"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"single-description",children:""}),e.jsx(ie,{id:"single-description",value:G.description,onChange:T=>k(G.id,{description:T.target.value}),placeholder:"..."})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(jt,{id:"single-is-registered",checked:G.isRegistered,onCheckedChange:T=>k(G.id,{isRegistered:T===!0})}),e.jsx(b,{htmlFor:"single-is-registered",className:"cursor-pointer",children:""})]})]})]}),e.jsx(at,{children:e.jsx(N,{onClick:H,disabled:!Y||w,children:w?"...":""})})]}):null},$=()=>{const G=f.filter(O).length,T=f.length;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(N,{variant:"ghost",size:"sm",onClick:R,children:[e.jsx(ii,{className:"h-4 w-4 mr-1"}),""]}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["",G,"/",T," "]})]}),e.jsx($e,{variant:Y?"default":"secondary",children:Y?e.jsxs(e.Fragment,{children:[e.jsx($t,{className:"h-3 w-3 mr-1"}),""]}):e.jsxs(e.Fragment,{children:[e.jsx(dl,{className:"h-3 w-3 mr-1"}),""]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(ss,{className:"h-[350px] pr-2",children:e.jsx("div",{className:"space-y-2",children:f.map(M=>{const ne=O(M),fe=j===M.id;return e.jsxs("div",{onClick:()=>p(M.id),className:`
                      flex items-center gap-3 p-3 rounded-lg border-2 cursor-pointer transition-all
                      ${fe?"ring-2 ring-primary":""}
                      ${ne?"border-green-500 bg-green-50 dark:bg-green-950/20":"border-border hover:border-muted-foreground/50"}
                    `,children:[e.jsx("div",{className:"w-12 h-12 rounded border overflow-hidden bg-muted flex-shrink-0 flex items-center justify-center",children:e.jsx("img",{src:M.previewUrl,alt:M.name,className:"max-w-full max-h-full object-contain"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:M.name}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:M.emotion||""})]}),ne?e.jsx(fa,{className:"h-5 w-5 text-green-500 flex-shrink-0"}):e.jsx("div",{className:"h-5 w-5 rounded-full border-2 border-muted-foreground/30 flex-shrink-0"})]},M.id)})})}),e.jsx("div",{className:"border rounded-lg p-4",children:L?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-16 h-16 rounded border overflow-hidden bg-muted flex items-center justify-center",children:e.jsx("img",{src:L.previewUrl,alt:L.name,className:"max-w-full max-h-full object-contain"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium truncate",children:L.name}),O(L)&&e.jsxs($e,{variant:"outline",className:"text-green-600 border-green-600",children:[e.jsx($t,{className:"h-3 w-3 mr-1"}),""]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(b,{htmlFor:"multi-emotion",children:[" ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(ie,{id:"multi-emotion",value:L.emotion,onChange:M=>k(L.id,{emotion:M.target.value}),placeholder:",",className:L.emotion.trim()?"":"border-destructive"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"multi-description",children:""}),e.jsx(ie,{id:"multi-description",value:L.description,onChange:M=>k(L.id,{description:M.target.value}),placeholder:"..."})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(jt,{id:"multi-is-registered",checked:L.isRegistered,onCheckedChange:M=>k(L.id,{isRegistered:M===!0})}),e.jsx(b,{htmlFor:"multi-is-registered",className:"cursor-pointer text-sm",children:""})]})]}):e.jsx("div",{className:"h-full flex items-center justify-center text-muted-foreground",children:e.jsxs("div",{className:"text-center",children:[e.jsx(hg,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:""})]})})})]}),e.jsx(at,{children:e.jsx(N,{onClick:H,disabled:!Y||w,children:w?"...":` (${T})`})})]})};return e.jsx($s,{open:n,onOpenChange:i,children:e.jsxs(Hs,{className:"max-w-3xl max-h-[90vh] overflow-hidden",children:[e.jsxs(qs,{children:[e.jsxs(Gs,{className:"flex items-center gap-2",children:[e.jsx(fr,{className:"h-5 w-5"}),d==="select"&&" - ",d==="edit-single"&&" - ",d==="edit-multiple"&&" - "]}),e.jsxs(Is,{children:[d==="select"&&" JPGPNGGIFWebP  10MB",d==="edit-single"&&"",d==="edit-multiple"&&""]})]}),e.jsxs("div",{className:"overflow-y-auto pr-1",children:[d==="select"&&D(),d==="edit-single"&&C(),d==="edit-multiple"&&$()]})]})})}const Gl="/api/webui/expression";async function Xw(){const n=await Te(`${Gl}/chats`,{});if(!n.ok){const i=await n.json();throw new Error(i.detail||"")}return n.json()}async function Kw(n){const i=new URLSearchParams;n.page&&i.append("page",n.page.toString()),n.page_size&&i.append("page_size",n.page_size.toString()),n.search&&i.append("search",n.search),n.chat_id&&i.append("chat_id",n.chat_id);const c=await Te(`${Gl}/list?${i}`,{});if(!c.ok){const d=await c.json();throw new Error(d.detail||"")}return c.json()}async function Jw(n){const i=await Te(`${Gl}/${n}`,{});if(!i.ok){const c=await i.json();throw new Error(c.detail||"")}return i.json()}async function Zw(n){const i=await Te(`${Gl}/`,{method:"POST",body:JSON.stringify(n)});if(!i.ok){const c=await i.json();throw new Error(c.detail||"")}return i.json()}async function Iw(n,i){const c=await Te(`${Gl}/${n}`,{method:"PATCH",body:JSON.stringify(i)});if(!c.ok){const d=await c.json();throw new Error(d.detail||"")}return c.json()}async function Pw(n){const i=await Te(`${Gl}/${n}`,{method:"DELETE"});if(!i.ok){const c=await i.json();throw new Error(c.detail||"")}return i.json()}async function Ww(n){const i=await Te(`${Gl}/batch/delete`,{method:"POST",body:JSON.stringify({ids:n})});if(!i.ok){const c=await i.json();throw new Error(c.detail||"")}return i.json()}async function e1(){const n=await Te(`${Gl}/stats/summary`,{});if(!n.ok){const i=await n.json();throw new Error(i.detail||"")}return n.json()}function s1(){const[n,i]=u.useState([]),[c,d]=u.useState(!0),[h,f]=u.useState(0),[x,j]=u.useState(1),[p,w]=u.useState(20),[v,y]=u.useState(""),[S,k]=u.useState(null),[O,Y]=u.useState(!1),[L,R]=u.useState(!1),[H,D]=u.useState(!1),[C,$]=u.useState(null),[G,T]=u.useState(new Set),[M,ne]=u.useState(!1),[fe,_e]=u.useState(""),[Se,je]=u.useState({total:0,recent_7days:0,chat_count:0,top_chats:{}}),[ye,be]=u.useState([]),[A,K]=u.useState(new Map),{toast:E}=Vs(),se=async()=>{try{d(!0);const W=await Kw({page:x,page_size:p,search:v||void 0});i(W.data),f(W.total)}catch(W){E({title:"",description:W instanceof Error?W.message:"",variant:"destructive"})}finally{d(!1)}},_=async()=>{try{const W=await e1();W?.data&&je(W.data)}catch(W){console.error(":",W)}},me=async()=>{try{const W=await Xw();if(W?.data){be(W.data);const Ce=new Map;W.data.forEach(Me=>{Ce.set(Me.chat_id,Me.chat_name)}),K(Ce)}}catch(W){console.error(":",W)}},re=W=>A.get(W)||W;u.useEffect(()=>{se(),_(),me()},[x,p,v]);const le=async W=>{try{const Ce=await Jw(W.id);k(Ce.data),Y(!0)}catch(Ce){E({title:"",description:Ce instanceof Error?Ce.message:"",variant:"destructive"})}},pe=W=>{k(W),R(!0)},Ne=async W=>{try{await Pw(W.id),E({title:"",description:`: ${W.situation}`}),$(null),se(),_()}catch(Ce){E({title:"",description:Ce instanceof Error?Ce.message:"",variant:"destructive"})}},he=W=>{const Ce=new Set(G);Ce.has(W)?Ce.delete(W):Ce.add(W),T(Ce)},Q=()=>{G.size===n.length&&n.length>0?T(new Set):T(new Set(n.map(W=>W.id)))},P=async()=>{try{await Ww(Array.from(G)),E({title:"",description:` ${G.size} `}),T(new Set),ne(!1),se(),_()}catch(W){E({title:"",description:W instanceof Error?W.message:"",variant:"destructive"})}},q=()=>{const W=parseInt(fe),Ce=Math.ceil(h/p);W>=1&&W<=Ce?(j(W),_e("")):E({title:"",description:`1-${Ce}`,variant:"destructive"})};return e.jsxs("div",{className:"h-[calc(100vh-4rem)] flex flex-col p-4 sm:p-6",children:[e.jsx("div",{className:"mb-4 sm:mb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold flex items-center gap-2",children:[e.jsx(un,{className:"h-8 w-8",strokeWidth:2}),""]}),e.jsx("p",{className:"text-muted-foreground mt-1 text-sm sm:text-base",children:""})]}),e.jsxs(N,{onClick:()=>D(!0),className:"gap-2",children:[e.jsx(ot,{className:"h-4 w-4"}),""]})]})}),e.jsx(ss,{className:"flex-1",children:e.jsxs("div",{className:"space-y-4 sm:space-y-6 pr-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"rounded-lg border bg-card p-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:""}),e.jsx("div",{className:"text-2xl font-bold mt-1",children:Se.total})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"7"}),e.jsx("div",{className:"text-2xl font-bold mt-1 text-green-600",children:Se.recent_7days})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:""}),e.jsx("div",{className:"text-2xl font-bold mt-1 text-blue-600",children:Se.chat_count})]})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4",children:[e.jsx(b,{htmlFor:"search",children:""}),e.jsx("div",{className:"flex flex-col sm:flex-row gap-2 mt-1.5",children:e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(zt,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(ie,{id:"search",placeholder:"...",value:v,onChange:W=>y(W.target.value),className:"pl-9"})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 mt-4 pt-4 border-t",children:[e.jsx("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:G.size>0&&e.jsxs("span",{children:[" ",G.size," "]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{htmlFor:"page-size",className:"text-sm whitespace-nowrap",children:""}),e.jsxs(Be,{value:p.toString(),onValueChange:W=>{w(parseInt(W)),j(1),T(new Set)},children:[e.jsx(Le,{id:"page-size",className:"w-20",children:e.jsx(He,{})}),e.jsxs(Ue,{children:[e.jsx(te,{value:"10",children:"10"}),e.jsx(te,{value:"20",children:"20"}),e.jsx(te,{value:"50",children:"50"}),e.jsx(te,{value:"100",children:"100"})]})]}),G.size>0&&e.jsxs(e.Fragment,{children:[e.jsx(N,{variant:"outline",size:"sm",onClick:()=>T(new Set),children:""}),e.jsxs(N,{variant:"destructive",size:"sm",onClick:()=>ne(!0),children:[e.jsx(ts,{className:"h-4 w-4 mr-1"}),""]})]})]})]})]}),e.jsxs("div",{className:"rounded-lg border bg-card",children:[e.jsx("div",{className:"hidden md:block",children:e.jsxs(hn,{children:[e.jsx(xn,{children:e.jsxs(dt,{children:[e.jsx(Ie,{className:"w-12",children:e.jsx(jt,{checked:G.size===n.length&&n.length>0,onCheckedChange:Q})}),e.jsx(Ie,{children:""}),e.jsx(Ie,{children:""}),e.jsx(Ie,{children:""}),e.jsx(Ie,{className:"text-right",children:""})]})}),e.jsx(fn,{children:c?e.jsx(dt,{children:e.jsx(Fe,{colSpan:5,className:"text-center py-8 text-muted-foreground",children:"..."})}):n.length===0?e.jsx(dt,{children:e.jsx(Fe,{colSpan:5,className:"text-center py-8 text-muted-foreground",children:""})}):n.map(W=>e.jsxs(dt,{children:[e.jsx(Fe,{children:e.jsx(jt,{checked:G.has(W.id),onCheckedChange:()=>he(W.id)})}),e.jsx(Fe,{className:"font-medium max-w-xs truncate",children:W.situation}),e.jsx(Fe,{className:"max-w-xs truncate",children:W.style}),e.jsx(Fe,{className:"max-w-[200px] truncate",title:re(W.chat_id),style:{wordBreak:"keep-all"},children:e.jsx("span",{className:"whitespace-nowrap overflow-hidden text-ellipsis block",children:re(W.chat_id)})}),e.jsx(Fe,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsxs(N,{variant:"default",size:"sm",onClick:()=>pe(W),children:[e.jsx(mn,{className:"h-4 w-4 mr-1"}),""]}),e.jsx(N,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>le(W),title:"",children:e.jsx(Dt,{className:"h-4 w-4"})}),e.jsxs(N,{size:"sm",onClick:()=>$(W),className:"bg-red-600 hover:bg-red-700 text-white",children:[e.jsx(ts,{className:"h-4 w-4 mr-1"}),""]})]})})]},W.id))})]})}),e.jsx("div",{className:"md:hidden space-y-3 p-4",children:c?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"..."}):n.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:""}):n.map(W=>e.jsxs("div",{className:"rounded-lg border bg-card p-4 space-y-3 overflow-hidden",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(jt,{checked:G.has(W.id),onCheckedChange:()=>he(W.id),className:"mt-1"}),e.jsxs("div",{className:"min-w-0 flex-1 overflow-hidden space-y-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:""}),e.jsx("h3",{className:"font-semibold text-sm line-clamp-2 w-full break-all",title:W.situation,children:W.situation})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:""}),e.jsx("p",{className:"text-sm line-clamp-2 w-full break-all",title:W.style,children:W.style})]})]})]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:""}),e.jsx("p",{className:"text-sm truncate",title:re(W.chat_id),style:{wordBreak:"keep-all"},children:re(W.chat_id)})]}),e.jsxs("div",{className:"flex flex-wrap gap-1 pt-2 border-t overflow-hidden",children:[e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>pe(W),className:"text-xs px-2 py-1 h-auto flex-shrink-0",children:[e.jsx(mn,{className:"h-3 w-3 mr-1"}),""]}),e.jsx(N,{variant:"outline",size:"sm",onClick:()=>le(W),className:"text-xs px-2 py-1 h-auto flex-shrink-0",children:e.jsx(Dt,{className:"h-3 w-3"})}),e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>$(W),className:"text-xs px-2 py-1 h-auto flex-shrink-0 text-destructive hover:text-destructive",children:[e.jsx(ts,{className:"h-3 w-3 mr-1"}),""]})]})]},W.id))}),h>0&&e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 px-4 py-3 border-t",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:[" ",h,"  ",x," / ",Math.ceil(h/p)," "]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{variant:"outline",size:"sm",onClick:()=>j(1),disabled:x===1,className:"hidden sm:flex",children:e.jsx(di,{className:"h-4 w-4"})}),e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>j(x-1),disabled:x===1,children:[e.jsx(Hl,{className:"h-4 w-4 sm:mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{type:"number",value:fe,onChange:W=>_e(W.target.value),onKeyDown:W=>W.key==="Enter"&&q(),placeholder:x.toString(),className:"w-16 h-8 text-center",min:1,max:Math.ceil(h/p)}),e.jsx(N,{variant:"outline",size:"sm",onClick:q,disabled:!fe,className:"h-8",children:""})]}),e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>j(x+1),disabled:x>=Math.ceil(h/p),children:[e.jsx("span",{className:"hidden sm:inline",children:""}),e.jsx(ul,{className:"h-4 w-4 sm:ml-1"})]}),e.jsx(N,{variant:"outline",size:"sm",onClick:()=>j(Math.ceil(h/p)),disabled:x>=Math.ceil(h/p),className:"hidden sm:flex",children:e.jsx(ui,{className:"h-4 w-4"})})]})]})]})]})}),e.jsx(t1,{expression:S,open:O,onOpenChange:Y,chatNameMap:A}),e.jsx(a1,{open:H,onOpenChange:D,chatList:ye,onSuccess:()=>{se(),_(),D(!1)}}),e.jsx(l1,{expression:S,open:L,onOpenChange:R,chatList:ye,onSuccess:()=>{se(),_(),R(!1)}}),e.jsx(ps,{open:!!C,onOpenChange:()=>$(null),children:e.jsxs(rs,{children:[e.jsxs(cs,{children:[e.jsx(ds,{children:""}),e.jsxs(us,{children:[' "',C?.situation,'"  ']})]}),e.jsxs(os,{children:[e.jsx(hs,{children:""}),e.jsx(ms,{onClick:()=>C&&Ne(C),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:""})]})]})}),e.jsx(n1,{open:M,onOpenChange:ne,onConfirm:P,count:G.size})]})}function t1({expression:n,open:i,onOpenChange:c,chatNameMap:d}){if(!n)return null;const h=x=>x?new Date(x*1e3).toLocaleString("zh-CN"):"-",f=x=>d.get(x)||x;return e.jsx($s,{open:i,onOpenChange:c,children:e.jsxs(Hs,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(qs,{children:[e.jsx(Gs,{children:""}),e.jsx(Is,{children:""})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(rr,{label:"",value:n.situation}),e.jsx(rr,{label:"",value:n.style}),e.jsx(rr,{label:"",value:f(n.chat_id)}),e.jsx(rr,{icon:ri,label:"ID",value:n.id.toString(),mono:!0})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:e.jsx(rr,{icon:li,label:"",value:h(n.create_date)})})]}),e.jsx(at,{children:e.jsx(N,{onClick:()=>c(!1),children:""})})]})})}function rr({icon:n,label:i,value:c,mono:d=!1}){return e.jsxs("div",{className:"space-y-1",children:[e.jsxs(b,{className:"text-xs text-muted-foreground flex items-center gap-1",children:[n&&e.jsx(n,{className:"h-3 w-3"}),i]}),e.jsx("div",{className:X("text-sm",d&&"font-mono",!c&&"text-muted-foreground"),children:c||"-"})]})}function a1({open:n,onOpenChange:i,chatList:c,onSuccess:d}){const[h,f]=u.useState({situation:"",style:"",chat_id:""}),[x,j]=u.useState(!1),{toast:p}=Vs(),w=async()=>{if(!h.situation||!h.style||!h.chat_id){p({title:"",description:"",variant:"destructive"});return}try{j(!0),await Zw(h),p({title:"",description:""}),f({situation:"",style:"",chat_id:""}),d()}catch(v){p({title:"",description:v instanceof Error?v.message:"",variant:"destructive"})}finally{j(!1)}};return e.jsx($s,{open:n,onOpenChange:i,children:e.jsxs(Hs,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(qs,{children:[e.jsx(Gs,{children:""}),e.jsx(Is,{children:""})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(b,{htmlFor:"situation",children:[" ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(ie,{id:"situation",value:h.situation,onChange:v=>f({...h,situation:v.target.value}),placeholder:""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(b,{htmlFor:"style",children:[" ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(ie,{id:"style",value:h.style,onChange:v=>f({...h,style:v.target.value}),placeholder:""})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(b,{htmlFor:"chat_id",children:[" ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs(Be,{value:h.chat_id,onValueChange:v=>f({...h,chat_id:v}),children:[e.jsx(Le,{children:e.jsx(He,{placeholder:""})}),e.jsx(Ue,{children:c.map(v=>e.jsx(te,{value:v.chat_id,children:e.jsxs("span",{className:"truncate",style:{wordBreak:"keep-all"},children:[v.chat_name,v.is_group&&e.jsx("span",{className:"text-muted-foreground ml-1",children:"()"})]})},v.chat_id))})]})]})]}),e.jsxs(at,{children:[e.jsx(N,{variant:"outline",onClick:()=>i(!1),children:""}),e.jsx(N,{onClick:w,disabled:x,children:x?"...":""})]})]})})}function l1({expression:n,open:i,onOpenChange:c,chatList:d,onSuccess:h}){const[f,x]=u.useState({}),[j,p]=u.useState(!1),{toast:w}=Vs();u.useEffect(()=>{n&&x({situation:n.situation,style:n.style,chat_id:n.chat_id})},[n]);const v=async()=>{if(n)try{p(!0),await Iw(n.id,f),w({title:"",description:""}),h()}catch(y){w({title:"",description:y instanceof Error?y.message:"",variant:"destructive"})}finally{p(!1)}};return n?e.jsx($s,{open:i,onOpenChange:c,children:e.jsxs(Hs,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(qs,{children:[e.jsx(Gs,{children:""}),e.jsx(Is,{children:""})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"edit_situation",children:""}),e.jsx(ie,{id:"edit_situation",value:f.situation||"",onChange:y=>x({...f,situation:y.target.value}),placeholder:""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"edit_style",children:""}),e.jsx(ie,{id:"edit_style",value:f.style||"",onChange:y=>x({...f,style:y.target.value}),placeholder:""})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"edit_chat_id",children:""}),e.jsxs(Be,{value:f.chat_id||"",onValueChange:y=>x({...f,chat_id:y}),children:[e.jsx(Le,{children:e.jsx(He,{placeholder:""})}),e.jsx(Ue,{children:d.map(y=>e.jsx(te,{value:y.chat_id,children:e.jsxs("span",{className:"truncate",style:{wordBreak:"keep-all"},children:[y.chat_name,y.is_group&&e.jsx("span",{className:"text-muted-foreground ml-1",children:"()"})]})},y.chat_id))})]})]})]}),e.jsxs(at,{children:[e.jsx(N,{variant:"outline",onClick:()=>c(!1),children:""}),e.jsx(N,{onClick:v,disabled:j,children:j?"...":""})]})]})}):null}function n1({open:n,onOpenChange:i,onConfirm:c,count:d}){return e.jsx(ps,{open:n,onOpenChange:i,children:e.jsxs(rs,{children:[e.jsxs(cs,{children:[e.jsx(ds,{children:""}),e.jsxs(us,{children:[" ",d," "]})]}),e.jsxs(os,{children:[e.jsx(hs,{children:""}),e.jsx(ms,{onClick:c,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:""})]})]})})}const ml="/api/webui/jargon";async function i1(){const n=await Te(`${ml}/chats`,{});if(!n.ok){const i=await n.json();throw new Error(i.detail||"")}return n.json()}async function r1(n){const i=new URLSearchParams;n.page&&i.append("page",n.page.toString()),n.page_size&&i.append("page_size",n.page_size.toString()),n.search&&i.append("search",n.search),n.chat_id&&i.append("chat_id",n.chat_id),n.is_jargon!==void 0&&n.is_jargon!==null&&i.append("is_jargon",n.is_jargon.toString()),n.is_global!==void 0&&i.append("is_global",n.is_global.toString());const c=await Te(`${ml}/list?${i}`,{});if(!c.ok){const d=await c.json();throw new Error(d.detail||"")}return c.json()}async function c1(n){const i=await Te(`${ml}/${n}`,{});if(!i.ok){const c=await i.json();throw new Error(c.detail||"")}return i.json()}async function o1(n){const i=await Te(`${ml}/`,{method:"POST",body:JSON.stringify(n)});if(!i.ok){const c=await i.json();throw new Error(c.detail||"")}return i.json()}async function d1(n,i){const c=await Te(`${ml}/${n}`,{method:"PATCH",body:JSON.stringify(i)});if(!c.ok){const d=await c.json();throw new Error(d.detail||"")}return c.json()}async function u1(n){const i=await Te(`${ml}/${n}`,{method:"DELETE"});if(!i.ok){const c=await i.json();throw new Error(c.detail||"")}return i.json()}async function m1(n){const i=await Te(`${ml}/batch/delete`,{method:"POST",body:JSON.stringify({ids:n})});if(!i.ok){const c=await i.json();throw new Error(c.detail||"")}return i.json()}async function h1(){const n=await Te(`${ml}/stats/summary`,{});if(!n.ok){const i=await n.json();throw new Error(i.detail||"")}return n.json()}async function x1(n,i){const c=new URLSearchParams;n.forEach(h=>c.append("ids",h.toString())),c.append("is_jargon",i.toString());const d=await Te(`${ml}/batch/set-jargon?${c}`,{method:"POST"});if(!d.ok){const h=await d.json();throw new Error(h.detail||"")}return d.json()}function f1(){const[n,i]=u.useState([]),[c,d]=u.useState(!0),[h,f]=u.useState(0),[x,j]=u.useState(1),[p,w]=u.useState(20),[v,y]=u.useState(""),[S,k]=u.useState("all"),[O,Y]=u.useState("all"),[L,R]=u.useState(null),[H,D]=u.useState(!1),[C,$]=u.useState(!1),[G,T]=u.useState(!1),[M,ne]=u.useState(null),[fe,_e]=u.useState(new Set),[Se,je]=u.useState(!1),[ye,be]=u.useState(""),[A,K]=u.useState({total:0,confirmed_jargon:0,confirmed_not_jargon:0,pending:0,global_count:0,complete_count:0,chat_count:0,top_chats:{}}),[E,se]=u.useState([]),{toast:_}=Vs(),me=async()=>{try{d(!0);const ce=await r1({page:x,page_size:p,search:v||void 0,chat_id:S==="all"?void 0:S,is_jargon:O==="all"?void 0:O==="true"?!0:O==="false"?!1:void 0});i(ce.data),f(ce.total)}catch(ce){_({title:"",description:ce instanceof Error?ce.message:"",variant:"destructive"})}finally{d(!1)}},re=async()=>{try{const ce=await h1();ce?.data&&K(ce.data)}catch(ce){console.error(":",ce)}},le=async()=>{try{const ce=await i1();ce?.data&&se(ce.data)}catch(ce){console.error(":",ce)}};u.useEffect(()=>{me(),re(),le()},[x,p,v,S,O]);const pe=async ce=>{try{const De=await c1(ce.id);R(De.data),D(!0)}catch(De){_({title:"",description:De instanceof Error?De.message:"",variant:"destructive"})}},Ne=ce=>{R(ce),$(!0)},he=async ce=>{try{await u1(ce.id),_({title:"",description:`: ${ce.content}`}),ne(null),me(),re()}catch(De){_({title:"",description:De instanceof Error?De.message:"",variant:"destructive"})}},Q=ce=>{const De=new Set(fe);De.has(ce)?De.delete(ce):De.add(ce),_e(De)},P=()=>{fe.size===n.length&&n.length>0?_e(new Set):_e(new Set(n.map(ce=>ce.id)))},q=async()=>{try{await m1(Array.from(fe)),_({title:"",description:` ${fe.size} `}),_e(new Set),je(!1),me(),re()}catch(ce){_({title:"",description:ce instanceof Error?ce.message:"",variant:"destructive"})}},W=async ce=>{try{await x1(Array.from(fe),ce),_({title:"",description:` ${fe.size} ${ce?"":""}`}),_e(new Set),me(),re()}catch(De){_({title:"",description:De instanceof Error?De.message:"",variant:"destructive"})}},Ce=()=>{const ce=parseInt(ye),De=Math.ceil(h/p);ce>=1&&ce<=De?(j(ce),be("")):_({title:"",description:`1-${De}`,variant:"destructive"})},Me=ce=>ce===!0?e.jsxs($e,{variant:"default",className:"bg-green-600 hover:bg-green-700",children:[e.jsx($t,{className:"h-3 w-3 mr-1"}),""]}):ce===!1?e.jsxs($e,{variant:"secondary",children:[e.jsx(dl,{className:"h-3 w-3 mr-1"}),""]}):e.jsxs($e,{variant:"outline",children:[e.jsx(mg,{className:"h-3 w-3 mr-1"}),""]});return e.jsxs("div",{className:"h-[calc(100vh-4rem)] flex flex-col p-4 sm:p-6",children:[e.jsx("div",{className:"mb-4 sm:mb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold flex items-center gap-2",children:[e.jsx(zb,{className:"h-8 w-8",strokeWidth:2}),""]}),e.jsx("p",{className:"text-muted-foreground mt-1 text-sm sm:text-base",children:""})]}),e.jsxs(N,{onClick:()=>T(!0),className:"gap-2",children:[e.jsx(ot,{className:"h-4 w-4"}),""]})]})}),e.jsx(ss,{className:"flex-1",children:e.jsxs("div",{className:"space-y-4 sm:space-y-6 pr-4",children:[e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 lg:grid-cols-7 gap-3",children:[e.jsxs("div",{className:"rounded-lg border bg-card p-3 sm:p-4",children:[e.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:""}),e.jsx("div",{className:"text-xl sm:text-2xl font-bold mt-1",children:A.total})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-3 sm:p-4",children:[e.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:""}),e.jsx("div",{className:"text-xl sm:text-2xl font-bold mt-1 text-green-600",children:A.confirmed_jargon})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-3 sm:p-4",children:[e.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:""}),e.jsx("div",{className:"text-xl sm:text-2xl font-bold mt-1 text-gray-500",children:A.confirmed_not_jargon})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-3 sm:p-4",children:[e.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:""}),e.jsx("div",{className:"text-xl sm:text-2xl font-bold mt-1 text-yellow-600",children:A.pending})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-3 sm:p-4",children:[e.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:""}),e.jsx("div",{className:"text-xl sm:text-2xl font-bold mt-1 text-blue-600",children:A.global_count})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-3 sm:p-4",children:[e.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:""}),e.jsx("div",{className:"text-xl sm:text-2xl font-bold mt-1 text-purple-600",children:A.complete_count})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-3 sm:p-4",children:[e.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:""}),e.jsx("div",{className:"text-xl sm:text-2xl font-bold mt-1",children:A.chat_count})]})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(b,{htmlFor:"search",children:""}),e.jsxs("div",{className:"relative",children:[e.jsx(zt,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(ie,{id:"search",placeholder:"...",value:v,onChange:ce=>y(ce.target.value),className:"pl-9"})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(b,{children:""}),e.jsxs(Be,{value:S,onValueChange:k,children:[e.jsx(Le,{children:e.jsx(He,{placeholder:""})}),e.jsxs(Ue,{children:[e.jsx(te,{value:"all",children:""}),E.map(ce=>e.jsx(te,{value:ce.chat_id,children:ce.chat_name},ce.chat_id))]})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(b,{children:""}),e.jsxs(Be,{value:O,onValueChange:Y,children:[e.jsx(Le,{children:e.jsx(He,{placeholder:""})}),e.jsxs(Ue,{children:[e.jsx(te,{value:"all",children:""}),e.jsx(te,{value:"true",children:""}),e.jsx(te,{value:"false",children:""}),e.jsx(te,{value:"null",children:""})]})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(b,{htmlFor:"page-size",children:""}),e.jsxs(Be,{value:p.toString(),onValueChange:ce=>{w(parseInt(ce)),j(1),_e(new Set)},children:[e.jsx(Le,{id:"page-size",children:e.jsx(He,{})}),e.jsxs(Ue,{children:[e.jsx(te,{value:"10",children:"10"}),e.jsx(te,{value:"20",children:"20"}),e.jsx(te,{value:"50",children:"50"}),e.jsx(te,{value:"100",children:"100"})]})]})]})]}),fe.size>0&&e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-4 pt-4 border-t",children:[e.jsxs("span",{className:"text-sm text-muted-foreground",children:[" ",fe.size," "]}),e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>W(!0),children:[e.jsx($t,{className:"h-4 w-4 mr-1"}),""]}),e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>W(!1),children:[e.jsx(dl,{className:"h-4 w-4 mr-1"}),""]}),e.jsx(N,{variant:"outline",size:"sm",onClick:()=>_e(new Set),children:""}),e.jsxs(N,{variant:"destructive",size:"sm",onClick:()=>je(!0),children:[e.jsx(ts,{className:"h-4 w-4 mr-1"}),""]})]})]}),e.jsxs("div",{className:"rounded-lg border bg-card",children:[e.jsx("div",{className:"hidden md:block",children:e.jsxs(hn,{children:[e.jsx(xn,{children:e.jsxs(dt,{children:[e.jsx(Ie,{className:"w-12",children:e.jsx(jt,{checked:fe.size===n.length&&n.length>0,onCheckedChange:P})}),e.jsx(Ie,{children:""}),e.jsx(Ie,{children:""}),e.jsx(Ie,{children:""}),e.jsx(Ie,{children:""}),e.jsx(Ie,{className:"text-center",children:""}),e.jsx(Ie,{className:"text-right",children:""})]})}),e.jsx(fn,{children:c?e.jsx(dt,{children:e.jsx(Fe,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:"..."})}):n.length===0?e.jsx(dt,{children:e.jsx(Fe,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:""})}):n.map(ce=>e.jsxs(dt,{children:[e.jsx(Fe,{children:e.jsx(jt,{checked:fe.has(ce.id),onCheckedChange:()=>Q(ce.id)})}),e.jsx(Fe,{className:"font-medium max-w-[200px]",children:e.jsxs("div",{className:"flex items-center gap-2",children:[ce.is_global&&e.jsx("span",{title:"",children:e.jsx(Lu,{className:"h-4 w-4 text-blue-500 flex-shrink-0"})}),e.jsx("span",{className:"truncate",title:ce.content,children:ce.content})]})}),e.jsx(Fe,{className:"max-w-[200px] truncate",title:ce.meaning||"",children:ce.meaning||e.jsx("span",{className:"text-muted-foreground",children:"-"})}),e.jsx(Fe,{className:"max-w-[150px] truncate",title:ce.chat_name||ce.chat_id,children:ce.chat_name||ce.chat_id}),e.jsx(Fe,{children:Me(ce.is_jargon)}),e.jsx(Fe,{className:"text-center",children:ce.count}),e.jsx(Fe,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsxs(N,{variant:"default",size:"sm",onClick:()=>Ne(ce),children:[e.jsx(mn,{className:"h-4 w-4 mr-1"}),""]}),e.jsx(N,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>pe(ce),title:"",children:e.jsx(Dt,{className:"h-4 w-4"})}),e.jsxs(N,{size:"sm",onClick:()=>ne(ce),className:"bg-red-600 hover:bg-red-700 text-white",children:[e.jsx(ts,{className:"h-4 w-4 mr-1"}),""]})]})})]},ce.id))})]})}),e.jsx("div",{className:"md:hidden space-y-3 p-4",children:c?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"..."}):n.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:""}):n.map(ce=>e.jsxs("div",{className:"rounded-lg border bg-card p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(jt,{checked:fe.has(ce.id),onCheckedChange:()=>Q(ce.id),className:"mt-1"}),e.jsxs("div",{className:"min-w-0 flex-1 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[ce.is_global&&e.jsx(Lu,{className:"h-4 w-4 text-blue-500 flex-shrink-0"}),e.jsx("h3",{className:"font-semibold text-sm break-all",children:ce.content})]}),ce.meaning&&e.jsx("p",{className:"text-sm text-muted-foreground break-all",children:ce.meaning}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs",children:[Me(ce.is_jargon),e.jsxs("span",{className:"text-muted-foreground",children:[": ",ce.count]})]}),e.jsxs("div",{className:"text-xs text-muted-foreground truncate",children:[": ",ce.chat_name||ce.chat_id]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-1 pt-2 border-t",children:[e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>Ne(ce),className:"text-xs px-2 py-1 h-auto",children:[e.jsx(mn,{className:"h-3 w-3 mr-1"}),""]}),e.jsx(N,{variant:"outline",size:"sm",onClick:()=>pe(ce),className:"text-xs px-2 py-1 h-auto",children:e.jsx(Dt,{className:"h-3 w-3"})}),e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>ne(ce),className:"text-xs px-2 py-1 h-auto text-destructive hover:text-destructive",children:[e.jsx(ts,{className:"h-3 w-3 mr-1"}),""]})]})]},ce.id))}),h>0&&e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 px-4 py-3 border-t",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:[" ",h,"  ",x," / ",Math.ceil(h/p)," "]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{variant:"outline",size:"sm",onClick:()=>j(1),disabled:x===1,className:"hidden sm:flex",children:e.jsx(di,{className:"h-4 w-4"})}),e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>j(x-1),disabled:x===1,children:[e.jsx(Hl,{className:"h-4 w-4 sm:mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{type:"number",value:ye,onChange:ce=>be(ce.target.value),onKeyDown:ce=>ce.key==="Enter"&&Ce(),placeholder:x.toString(),className:"w-16 h-8 text-center",min:1,max:Math.ceil(h/p)}),e.jsx(N,{variant:"outline",size:"sm",onClick:Ce,disabled:!ye,className:"h-8",children:""})]}),e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>j(x+1),disabled:x>=Math.ceil(h/p),children:[e.jsx("span",{className:"hidden sm:inline",children:""}),e.jsx(ul,{className:"h-4 w-4 sm:ml-1"})]}),e.jsx(N,{variant:"outline",size:"sm",onClick:()=>j(Math.ceil(h/p)),disabled:x>=Math.ceil(h/p),className:"hidden sm:flex",children:e.jsx(ui,{className:"h-4 w-4"})})]})]})]})]})}),e.jsx(p1,{jargon:L,open:H,onOpenChange:D}),e.jsx(g1,{open:G,onOpenChange:T,chatList:E,onSuccess:()=>{me(),re(),T(!1)}}),e.jsx(j1,{jargon:L,open:C,onOpenChange:$,chatList:E,onSuccess:()=>{me(),re(),$(!1)}}),e.jsx(ps,{open:!!M,onOpenChange:()=>ne(null),children:e.jsxs(rs,{children:[e.jsxs(cs,{children:[e.jsx(ds,{children:""}),e.jsxs(us,{children:[' "',M?.content,'" ']})]}),e.jsxs(os,{children:[e.jsx(hs,{children:""}),e.jsx(ms,{onClick:()=>M&&he(M),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:""})]})]})}),e.jsx(ps,{open:Se,onOpenChange:je,children:e.jsxs(rs,{children:[e.jsxs(cs,{children:[e.jsx(ds,{children:""}),e.jsxs(us,{children:[" ",fe.size," "]})]}),e.jsxs(os,{children:[e.jsx(hs,{children:""}),e.jsx(ms,{onClick:q,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:""})]})]})})]})}function p1({jargon:n,open:i,onOpenChange:c}){return n?e.jsx($s,{open:i,onOpenChange:c,children:e.jsxs(Hs,{className:"max-w-2xl max-h-[80vh] grid grid-rows-[auto_1fr_auto] overflow-hidden",children:[e.jsxs(qs,{children:[e.jsx(Gs,{children:""}),e.jsx(Is,{children:""})]}),e.jsx(ss,{className:"h-full pr-4",children:e.jsxs("div",{className:"space-y-4 pb-2",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(Ou,{icon:ri,label:"ID",value:n.id.toString(),mono:!0}),e.jsx(Ou,{label:"",value:n.count.toString()})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(b,{className:"text-xs text-muted-foreground",children:""}),e.jsx("div",{className:"text-sm p-2 bg-muted rounded break-all whitespace-pre-wrap",children:n.content})]}),n.raw_content&&e.jsxs("div",{className:"space-y-1",children:[e.jsx(b,{className:"text-xs text-muted-foreground",children:""}),e.jsx("div",{className:"text-sm p-2 bg-muted rounded break-all",children:(()=>{try{const d=JSON.parse(n.raw_content);return Array.isArray(d)?d.map((h,f)=>e.jsxs("div",{children:[f>0&&e.jsx("hr",{className:"my-3 border-border"}),e.jsx("div",{className:"whitespace-pre-wrap",children:h})]},f)):e.jsx("div",{className:"whitespace-pre-wrap",children:n.raw_content})}catch{return e.jsx("div",{className:"whitespace-pre-wrap",children:n.raw_content})}})()})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(b,{className:"text-xs text-muted-foreground",children:""}),e.jsx("div",{className:"text-sm p-2 bg-muted rounded break-all whitespace-pre-wrap",children:n.meaning||"-"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(Ou,{label:"",value:n.chat_name||n.chat_id}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(b,{className:"text-xs text-muted-foreground",children:""}),e.jsxs("div",{className:"flex items-center gap-2",children:[n.is_jargon===!0&&e.jsx($e,{variant:"default",className:"bg-green-600",children:""}),n.is_jargon===!1&&e.jsx($e,{variant:"secondary",children:""}),n.is_jargon===null&&e.jsx($e,{variant:"outline",children:""}),n.is_global&&e.jsx($e,{variant:"outline",className:"border-blue-500 text-blue-500",children:""}),n.is_complete&&e.jsx($e,{variant:"outline",className:"border-purple-500 text-purple-500",children:""})]})]})]}),n.inference_with_context&&e.jsxs("div",{className:"space-y-1",children:[e.jsx(b,{className:"text-xs text-muted-foreground",children:""}),e.jsx("div",{className:"p-2 bg-muted rounded break-all whitespace-pre-wrap font-mono text-xs max-h-[200px] overflow-y-auto",children:n.inference_with_context})]}),n.inference_content_only&&e.jsxs("div",{className:"space-y-1",children:[e.jsx(b,{className:"text-xs text-muted-foreground",children:""}),e.jsx("div",{className:"p-2 bg-muted rounded break-all whitespace-pre-wrap font-mono text-xs max-h-[200px] overflow-y-auto",children:n.inference_content_only})]})]})}),e.jsx(at,{className:"flex-shrink-0",children:e.jsx(N,{onClick:()=>c(!1),children:""})})]})}):null}function Ou({icon:n,label:i,value:c,mono:d=!1}){return e.jsxs("div",{className:"space-y-1",children:[e.jsxs(b,{className:"text-xs text-muted-foreground flex items-center gap-1",children:[n&&e.jsx(n,{className:"h-3 w-3"}),i]}),e.jsx("div",{className:X("text-sm",d&&"font-mono",!c&&"text-muted-foreground"),children:c||"-"})]})}function g1({open:n,onOpenChange:i,chatList:c,onSuccess:d}){const[h,f]=u.useState({content:"",meaning:"",chat_id:"",is_global:!1}),[x,j]=u.useState(!1),{toast:p}=Vs(),w=async()=>{if(!h.content||!h.chat_id){p({title:"",description:"",variant:"destructive"});return}try{j(!0),await o1(h),p({title:"",description:""}),f({content:"",meaning:"",chat_id:"",is_global:!1}),d()}catch(v){p({title:"",description:v instanceof Error?v.message:"",variant:"destructive"})}finally{j(!1)}};return e.jsx($s,{open:n,onOpenChange:i,children:e.jsxs(Hs,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(qs,{children:[e.jsx(Gs,{children:""}),e.jsx(Is,{children:""})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(b,{htmlFor:"content",children:[" ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(ie,{id:"content",value:h.content,onChange:v=>f({...h,content:v.target.value}),placeholder:""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"meaning",children:""}),e.jsx(Bs,{id:"meaning",value:h.meaning||"",onChange:v=>f({...h,meaning:v.target.value}),placeholder:"",rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(b,{htmlFor:"chat_id",children:[" ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs(Be,{value:h.chat_id,onValueChange:v=>f({...h,chat_id:v}),children:[e.jsx(Le,{children:e.jsx(He,{placeholder:""})}),e.jsx(Ue,{children:c.map(v=>e.jsx(te,{value:v.chat_id,children:v.chat_name},v.chat_id))})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Qe,{id:"is_global",checked:h.is_global,onCheckedChange:v=>f({...h,is_global:v})}),e.jsx(b,{htmlFor:"is_global",children:""})]})]}),e.jsxs(at,{children:[e.jsx(N,{variant:"outline",onClick:()=>i(!1),children:""}),e.jsx(N,{onClick:w,disabled:x,children:x?"...":""})]})]})})}function j1({jargon:n,open:i,onOpenChange:c,chatList:d,onSuccess:h}){const[f,x]=u.useState({}),[j,p]=u.useState(!1),{toast:w}=Vs();u.useEffect(()=>{n&&x({content:n.content,meaning:n.meaning||"",chat_id:n.stream_id||n.chat_id,is_global:n.is_global,is_jargon:n.is_jargon})},[n]);const v=async()=>{if(n)try{p(!0),await d1(n.id,f),w({title:"",description:""}),h()}catch(y){w({title:"",description:y instanceof Error?y.message:"",variant:"destructive"})}finally{p(!1)}};return n?e.jsx($s,{open:i,onOpenChange:c,children:e.jsxs(Hs,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(qs,{children:[e.jsx(Gs,{children:""}),e.jsx(Is,{children:""})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"edit_content",children:""}),e.jsx(ie,{id:"edit_content",value:f.content||"",onChange:y=>x({...f,content:y.target.value}),placeholder:""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"edit_meaning",children:""}),e.jsx(Bs,{id:"edit_meaning",value:f.meaning||"",onChange:y=>x({...f,meaning:y.target.value}),placeholder:"",rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"edit_chat_id",children:""}),e.jsxs(Be,{value:f.chat_id||"",onValueChange:y=>x({...f,chat_id:y}),children:[e.jsx(Le,{children:e.jsx(He,{placeholder:""})}),e.jsx(Ue,{children:d.map(y=>e.jsx(te,{value:y.chat_id,children:y.chat_name},y.chat_id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{children:""}),e.jsxs(Be,{value:f.is_jargon===null?"null":f.is_jargon?.toString()||"null",onValueChange:y=>x({...f,is_jargon:y==="null"?null:y==="true"}),children:[e.jsx(Le,{children:e.jsx(He,{})}),e.jsxs(Ue,{children:[e.jsx(te,{value:"null",children:""}),e.jsx(te,{value:"true",children:""}),e.jsx(te,{value:"false",children:""})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Qe,{id:"edit_is_global",checked:f.is_global,onCheckedChange:y=>x({...f,is_global:y})}),e.jsx(b,{htmlFor:"edit_is_global",children:""})]})]}),e.jsxs(at,{children:[e.jsx(N,{variant:"outline",onClick:()=>c(!1),children:""}),e.jsx(N,{onClick:v,disabled:j,children:j?"...":""})]})]})}):null}const mi="/api/webui/person";async function v1(n){const i=new URLSearchParams;n.page&&i.append("page",n.page.toString()),n.page_size&&i.append("page_size",n.page_size.toString()),n.search&&i.append("search",n.search),n.is_known!==void 0&&i.append("is_known",n.is_known.toString()),n.platform&&i.append("platform",n.platform);const c=await Te(`${mi}/list?${i}`,{headers:Ls()});if(!c.ok){const d=await c.json();throw new Error(d.detail||"")}return c.json()}async function N1(n){const i=await Te(`${mi}/${n}`,{headers:Ls()});if(!i.ok){const c=await i.json();throw new Error(c.detail||"")}return i.json()}async function b1(n,i){const c=await Te(`${mi}/${n}`,{method:"PATCH",headers:Ls(),body:JSON.stringify(i)});if(!c.ok){const d=await c.json();throw new Error(d.detail||"")}return c.json()}async function y1(n){const i=await Te(`${mi}/${n}`,{method:"DELETE",headers:Ls()});if(!i.ok){const c=await i.json();throw new Error(c.detail||"")}return i.json()}async function w1(){const n=await Te(`${mi}/stats/summary`,{headers:Ls()});if(!n.ok){const i=await n.json();throw new Error(i.detail||"")}return n.json()}async function _1(n){const i=await Te(`${mi}/batch/delete`,{method:"POST",headers:Ls(),body:JSON.stringify({person_ids:n})});if(!i.ok){const c=await i.json();throw new Error(c.detail||"")}return i.json()}function S1(){const[n,i]=u.useState([]),[c,d]=u.useState(!0),[h,f]=u.useState(0),[x,j]=u.useState(1),[p,w]=u.useState(20),[v,y]=u.useState(""),[S,k]=u.useState(void 0),[O,Y]=u.useState(void 0),[L,R]=u.useState(null),[H,D]=u.useState(!1),[C,$]=u.useState(!1),[G,T]=u.useState(null),[M,ne]=u.useState({total:0,known:0,unknown:0,platforms:{}}),[fe,_e]=u.useState(new Set),[Se,je]=u.useState(!1),[ye,be]=u.useState(""),{toast:A}=Vs(),K=async()=>{try{d(!0);const q=await v1({page:x,page_size:p,search:v||void 0,is_known:S,platform:O});i(q.data),f(q.total)}catch(q){A({title:"",description:q instanceof Error?q.message:"",variant:"destructive"})}finally{d(!1)}},E=async()=>{try{const q=await w1();q?.data&&ne(q.data)}catch(q){console.error(":",q)}};u.useEffect(()=>{K(),E()},[x,p,v,S,O]);const se=async q=>{try{const W=await N1(q.person_id);R(W.data),D(!0)}catch(W){A({title:"",description:W instanceof Error?W.message:"",variant:"destructive"})}},_=q=>{R(q),$(!0)},me=async q=>{try{await y1(q.person_id),A({title:"",description:`: ${q.person_name||q.nickname||q.user_id}`}),T(null),K(),E()}catch(W){A({title:"",description:W instanceof Error?W.message:"",variant:"destructive"})}},re=u.useMemo(()=>Object.keys(M.platforms),[M.platforms]),le=q=>{const W=new Set(fe);W.has(q)?W.delete(q):W.add(q),_e(W)},pe=()=>{fe.size===n.length&&n.length>0?_e(new Set):_e(new Set(n.map(q=>q.person_id)))},Ne=()=>{if(fe.size===0){A({title:"",description:"",variant:"destructive"});return}je(!0)},he=async()=>{try{const q=await _1(Array.from(fe));A({title:"",description:q.message}),_e(new Set),je(!1),K(),E()}catch(q){A({title:"",description:q instanceof Error?q.message:"",variant:"destructive"})}},Q=()=>{const q=parseInt(ye),W=Math.ceil(h/p);q>=1&&q<=W?(j(q),be("")):A({title:"",description:`1-${W}`,variant:"destructive"})},P=q=>q?new Date(q*1e3).toLocaleString("zh-CN"):"-";return e.jsxs("div",{className:"h-[calc(100vh-4rem)] flex flex-col p-4 sm:p-6",children:[e.jsx("div",{className:"mb-4 sm:mb-6",children:e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold flex items-center gap-2",children:[e.jsx(Uu,{className:"h-8 w-8",strokeWidth:2}),""]}),e.jsx("p",{className:"text-muted-foreground mt-1 text-sm sm:text-base",children:""})]})})}),e.jsx(ss,{className:"flex-1",children:e.jsxs("div",{className:"space-y-4 sm:space-y-6 pr-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"rounded-lg border bg-card p-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:""}),e.jsx("div",{className:"text-2xl font-bold mt-1",children:M.total})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:""}),e.jsx("div",{className:"text-2xl font-bold mt-1 text-green-600",children:M.known})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:""}),e.jsx("div",{className:"text-2xl font-bold mt-1 text-muted-foreground",children:M.unknown})]})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx(b,{htmlFor:"search",children:""}),e.jsxs("div",{className:"relative mt-1.5",children:[e.jsx(zt,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(ie,{id:"search",placeholder:"ID...",value:v,onChange:q=>y(q.target.value),className:"pl-9"})]})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"filter-known",children:""}),e.jsxs(Be,{value:S===void 0?"all":S.toString(),onValueChange:q=>{k(q==="all"?void 0:q==="true"),j(1)},children:[e.jsx(Le,{id:"filter-known",className:"mt-1.5",children:e.jsx(He,{})}),e.jsxs(Ue,{children:[e.jsx(te,{value:"all",children:""}),e.jsx(te,{value:"true",children:""}),e.jsx(te,{value:"false",children:""})]})]})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"filter-platform",children:""}),e.jsxs(Be,{value:O||"all",onValueChange:q=>{Y(q==="all"?void 0:q),j(1)},children:[e.jsx(Le,{id:"filter-platform",className:"mt-1.5",children:e.jsx(He,{})}),e.jsxs(Ue,{children:[e.jsx(te,{value:"all",children:""}),re.map(q=>e.jsxs(te,{value:q,children:[q," (",M.platforms[q],")"]},q))]})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 mt-4 pt-4 border-t",children:[e.jsx("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:fe.size>0&&e.jsxs("span",{children:[" ",fe.size," "]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{htmlFor:"page-size",className:"text-sm whitespace-nowrap",children:""}),e.jsxs(Be,{value:p.toString(),onValueChange:q=>{w(parseInt(q)),j(1),_e(new Set)},children:[e.jsx(Le,{id:"page-size",className:"w-20",children:e.jsx(He,{})}),e.jsxs(Ue,{children:[e.jsx(te,{value:"10",children:"10"}),e.jsx(te,{value:"20",children:"20"}),e.jsx(te,{value:"50",children:"50"}),e.jsx(te,{value:"100",children:"100"})]})]}),fe.size>0&&e.jsxs(e.Fragment,{children:[e.jsx(N,{variant:"outline",size:"sm",onClick:()=>_e(new Set),children:""}),e.jsxs(N,{variant:"destructive",size:"sm",onClick:Ne,children:[e.jsx(ts,{className:"h-4 w-4 mr-1"}),""]})]})]})]})]}),e.jsxs("div",{className:"rounded-lg border bg-card",children:[e.jsx("div",{className:"hidden md:block",children:e.jsxs(hn,{children:[e.jsx(xn,{children:e.jsxs(dt,{children:[e.jsx(Ie,{className:"w-12",children:e.jsx(jt,{checked:n.length>0&&fe.size===n.length,onCheckedChange:pe,"aria-label":""})}),e.jsx(Ie,{children:""}),e.jsx(Ie,{children:""}),e.jsx(Ie,{children:""}),e.jsx(Ie,{children:""}),e.jsx(Ie,{children:"ID"}),e.jsx(Ie,{children:""}),e.jsx(Ie,{className:"text-right",children:""})]})}),e.jsx(fn,{children:c?e.jsx(dt,{children:e.jsx(Fe,{colSpan:8,className:"text-center py-8 text-muted-foreground",children:"..."})}):n.length===0?e.jsx(dt,{children:e.jsx(Fe,{colSpan:8,className:"text-center py-8 text-muted-foreground",children:""})}):n.map(q=>e.jsxs(dt,{children:[e.jsx(Fe,{children:e.jsx(jt,{checked:fe.has(q.person_id),onCheckedChange:()=>le(q.person_id),"aria-label":` ${q.person_name||q.nickname||q.user_id}`})}),e.jsx(Fe,{children:e.jsx("div",{className:X("inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium",q.is_known?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-400"),children:q.is_known?"":""})}),e.jsx(Fe,{className:"font-medium",children:q.person_name||e.jsx("span",{className:"text-muted-foreground",children:"-"})}),e.jsx(Fe,{children:q.nickname||"-"}),e.jsx(Fe,{children:q.platform}),e.jsx(Fe,{className:"font-mono text-sm",children:q.user_id}),e.jsx(Fe,{className:"text-sm text-muted-foreground",children:P(q.last_know)}),e.jsx(Fe,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsxs(N,{variant:"default",size:"sm",onClick:()=>se(q),children:[e.jsx(Dt,{className:"h-4 w-4 mr-1"}),""]}),e.jsxs(N,{variant:"default",size:"sm",onClick:()=>_(q),children:[e.jsx(mn,{className:"h-4 w-4 mr-1"}),""]}),e.jsxs(N,{size:"sm",onClick:()=>T(q),className:"bg-red-600 hover:bg-red-700 text-white",children:[e.jsx(ts,{className:"h-4 w-4 mr-1"}),""]})]})})]},q.id))})]})}),e.jsx("div",{className:"md:hidden space-y-3 p-4",children:c?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"..."}):n.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:""}):n.map(q=>e.jsxs("div",{className:"rounded-lg border bg-card p-4 space-y-3 overflow-hidden",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(jt,{checked:fe.has(q.person_id),onCheckedChange:()=>le(q.person_id),className:"mt-1"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:X("inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium mb-2",q.is_known?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-400"),children:q.is_known?"":""}),e.jsx("h3",{className:"font-semibold text-sm line-clamp-1 w-full break-all",children:q.person_name||e.jsx("span",{className:"text-muted-foreground",children:""})}),q.nickname&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1 line-clamp-1 w-full break-all",children:[": ",q.nickname]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:""}),e.jsx("p",{className:"font-medium text-xs",children:q.platform})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"ID"}),e.jsx("p",{className:"font-mono text-xs truncate",title:q.user_id,children:q.user_id})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:""}),e.jsx("p",{className:"text-xs",children:P(q.last_know)})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-1 pt-2 border-t overflow-hidden",children:[e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>se(q),className:"text-xs px-2 py-1 h-auto flex-shrink-0",children:[e.jsx(Dt,{className:"h-3 w-3 mr-1"}),""]}),e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>_(q),className:"text-xs px-2 py-1 h-auto flex-shrink-0",children:[e.jsx(mn,{className:"h-3 w-3 mr-1"}),""]}),e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>T(q),className:"text-xs px-2 py-1 h-auto flex-shrink-0 text-destructive hover:text-destructive",children:[e.jsx(ts,{className:"h-3 w-3 mr-1"}),""]})]})]},q.id))}),h>0&&e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 px-4 py-3 border-t",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:[" ",h,"  ",x," / ",Math.ceil(h/p)," "]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{variant:"outline",size:"sm",onClick:()=>j(1),disabled:x===1,className:"hidden sm:flex",children:e.jsx(di,{className:"h-4 w-4"})}),e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>j(x-1),disabled:x===1,children:[e.jsx(Hl,{className:"h-4 w-4 sm:mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{type:"number",value:ye,onChange:q=>be(q.target.value),onKeyDown:q=>q.key==="Enter"&&Q(),placeholder:x.toString(),className:"w-16 h-8 text-center",min:1,max:Math.ceil(h/p)}),e.jsx(N,{variant:"outline",size:"sm",onClick:Q,disabled:!ye,className:"h-8",children:""})]}),e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>j(x+1),disabled:x>=Math.ceil(h/p),children:[e.jsx("span",{className:"hidden sm:inline",children:""}),e.jsx(ul,{className:"h-4 w-4 sm:ml-1"})]}),e.jsx(N,{variant:"outline",size:"sm",onClick:()=>j(Math.ceil(h/p)),disabled:x>=Math.ceil(h/p),className:"hidden sm:flex",children:e.jsx(ui,{className:"h-4 w-4"})})]})]})]})]})}),e.jsx(C1,{person:L,open:H,onOpenChange:D}),e.jsx(k1,{person:L,open:C,onOpenChange:$,onSuccess:()=>{K(),E(),$(!1)}}),e.jsx(ps,{open:!!G,onOpenChange:()=>T(null),children:e.jsxs(rs,{children:[e.jsxs(cs,{children:[e.jsx(ds,{children:""}),e.jsxs(us,{children:[' "',G?.person_name||G?.nickname||G?.user_id,'"  ']})]}),e.jsxs(os,{children:[e.jsx(hs,{children:""}),e.jsx(ms,{onClick:()=>G&&me(G),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:""})]})]})}),e.jsx(ps,{open:Se,onOpenChange:je,children:e.jsxs(rs,{children:[e.jsxs(cs,{children:[e.jsx(ds,{children:""}),e.jsxs(us,{children:[" ",fe.size,"  "]})]}),e.jsxs(os,{children:[e.jsx(hs,{children:""}),e.jsx(ms,{onClick:he,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:""})]})]})})]})}function C1({person:n,open:i,onOpenChange:c}){if(!n)return null;const d=h=>h?new Date(h*1e3).toLocaleString("zh-CN"):"-";return e.jsx($s,{open:i,onOpenChange:c,children:e.jsxs(Hs,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(qs,{children:[e.jsx(Gs,{children:""}),e.jsxs(Is,{children:[" ",n.person_name||n.nickname||n.user_id," "]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(nl,{icon:Wc,label:"",value:n.person_name}),e.jsx(nl,{icon:un,label:"",value:n.nickname}),e.jsx(nl,{icon:ri,label:"ID",value:n.user_id,mono:!0}),e.jsx(nl,{icon:ri,label:"ID",value:n.person_id,mono:!0}),e.jsx(nl,{label:"",value:n.platform}),e.jsx(nl,{label:"",value:n.is_known?"":""})]}),n.name_reason&&e.jsxs("div",{className:"rounded-lg border bg-muted/50 p-3",children:[e.jsx(b,{className:"text-xs text-muted-foreground",children:""}),e.jsx("p",{className:"mt-1 text-sm",children:n.name_reason})]}),n.memory_points&&e.jsxs("div",{className:"rounded-lg border bg-muted/50 p-3",children:[e.jsx(b,{className:"text-xs text-muted-foreground",children:""}),e.jsx("p",{className:"mt-1 text-sm whitespace-pre-wrap",children:n.memory_points})]}),n.group_nick_name&&n.group_nick_name.length>0&&e.jsxs("div",{className:"rounded-lg border bg-muted/50 p-3",children:[e.jsx(b,{className:"text-xs text-muted-foreground",children:""}),e.jsx("div",{className:"mt-2 space-y-1",children:n.group_nick_name.map((h,f)=>e.jsxs("div",{className:"text-sm flex items-center gap-2",children:[e.jsx("span",{className:"font-mono text-xs text-muted-foreground",children:h.group_id}),e.jsx("span",{children:""}),e.jsx("span",{children:h.group_nick_name})]},f))})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx(nl,{icon:li,label:"",value:d(n.know_times)}),e.jsx(nl,{icon:li,label:"",value:d(n.know_since)}),e.jsx(nl,{icon:li,label:"",value:d(n.last_know)})]})]}),e.jsx(at,{children:e.jsx(N,{onClick:()=>c(!1),children:""})})]})})}function nl({icon:n,label:i,value:c,mono:d=!1}){return e.jsxs("div",{className:"space-y-1",children:[e.jsxs(b,{className:"text-xs text-muted-foreground flex items-center gap-1",children:[n&&e.jsx(n,{className:"h-3 w-3"}),i]}),e.jsx("div",{className:X("text-sm",d&&"font-mono",!c&&"text-muted-foreground"),children:c||"-"})]})}function k1({person:n,open:i,onOpenChange:c,onSuccess:d}){const[h,f]=u.useState({}),[x,j]=u.useState(!1),{toast:p}=Vs();u.useEffect(()=>{n&&f({person_name:n.person_name||"",name_reason:n.name_reason||"",nickname:n.nickname||"",memory_points:n.memory_points||"",is_known:n.is_known})},[n]);const w=async()=>{if(n)try{j(!0),await b1(n.person_id,h),p({title:"",description:""}),d()}catch(v){p({title:"",description:v instanceof Error?v.message:"",variant:"destructive"})}finally{j(!1)}};return n?e.jsx($s,{open:i,onOpenChange:c,children:e.jsxs(Hs,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(qs,{children:[e.jsx(Gs,{children:""}),e.jsxs(Is,{children:[" ",n.person_name||n.nickname||n.user_id," "]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"person_name",children:""}),e.jsx(ie,{id:"person_name",value:h.person_name||"",onChange:v=>f({...h,person_name:v.target.value}),placeholder:""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"nickname",children:""}),e.jsx(ie,{id:"nickname",value:h.nickname||"",onChange:v=>f({...h,nickname:v.target.value}),placeholder:""})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"name_reason",children:""}),e.jsx(Bs,{id:"name_reason",value:h.name_reason||"",onChange:v=>f({...h,name_reason:v.target.value}),placeholder:"",rows:2})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"memory_points",children:""}),e.jsx(Bs,{id:"memory_points",value:h.memory_points||"",onChange:v=>f({...h,memory_points:v.target.value}),placeholder:"...",rows:4})]}),e.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3",children:[e.jsxs("div",{children:[e.jsx(b,{htmlFor:"is_known",className:"text-base font-medium",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),e.jsx(Qe,{id:"is_known",checked:h.is_known,onCheckedChange:v=>f({...h,is_known:v})})]})]}),e.jsxs(at,{children:[e.jsx(N,{variant:"outline",onClick:()=>c(!1),children:""}),e.jsx(N,{onClick:w,disabled:x,children:x?"...":""})]})]})}):null}var T1=fy();const pp=gN(T1),em="/api/webui";async function E1(n=100,i="all"){const c=`${em}/knowledge/graph?limit=${n}&node_type=${i}`,d=await fetch(c);if(!d.ok)throw new Error(`: ${d.status}`);return d.json()}async function z1(){const n=await fetch(`${em}/knowledge/stats`);if(!n.ok)throw new Error("");return n.json()}async function A1(n){const i=await fetch(`${em}/knowledge/search?query=${encodeURIComponent(n)}`);if(!i.ok)throw new Error("");return i.json()}const Hg=u.memo(({data:n})=>e.jsxs("div",{className:"px-4 py-2 shadow-md rounded-lg bg-gradient-to-br from-blue-500 to-blue-600 border-2 border-blue-700 min-w-[120px]",children:[e.jsx(eo,{type:"target",position:so.Top}),e.jsx("div",{className:"font-semibold text-white text-sm truncate max-w-[200px]",title:n.content,children:n.label}),e.jsx(eo,{type:"source",position:so.Bottom})]}));Hg.displayName="EntityNode";const qg=u.memo(({data:n})=>e.jsxs("div",{className:"px-3 py-2 shadow-md rounded-md bg-gradient-to-br from-green-500 to-green-600 border-2 border-green-700 min-w-[100px]",children:[e.jsx(eo,{type:"target",position:so.Top}),e.jsx("div",{className:"font-medium text-white text-xs truncate max-w-[150px]",title:n.content,children:n.label}),e.jsx(eo,{type:"source",position:so.Bottom})]}));qg.displayName="ParagraphNode";const M1={entity:Hg,paragraph:qg};function D1(n,i){const c=new pp.graphlib.Graph;c.setDefaultEdgeLabel(()=>({})),c.setGraph({rankdir:"TB",ranksep:100,nodesep:80});const d=[],h=[];return n.forEach(f=>{c.setNode(f.id,{width:150,height:50})}),i.forEach(f=>{c.setEdge(f.source,f.target)}),pp.layout(c),n.forEach(f=>{const x=c.node(f.id);d.push({id:f.id,type:f.type,position:{x:x.x-75,y:x.y-25},data:{label:f.content.slice(0,20)+(f.content.length>20?"...":""),content:f.content}})}),i.forEach((f,x)=>{const j={id:`edge-${x}`,source:f.source,target:f.target,animated:n.length<=200&&f.weight>5,style:{strokeWidth:Math.min(f.weight/2,5),opacity:.6}};f.weight>10&&n.length<100&&(j.label=`${f.weight.toFixed(0)}`),h.push(j)}),{nodes:d,edges:h}}function O1(){const n=ja(),[i,c]=u.useState(!1),[d,h]=u.useState(null),[f,x]=u.useState(""),[j,p]=u.useState("all"),[w,v]=u.useState(50),[y,S]=u.useState("50"),[k,O]=u.useState(!1),[Y,L]=u.useState(!0),[R,H]=u.useState(!1),[D,C]=u.useState(!1),[$,G,T]=py([]),[M,ne,fe]=gy([]),[_e,Se]=u.useState(0),[je,ye]=u.useState(null),[be,A]=u.useState(null),{toast:K}=Vs(),E=u.useCallback(he=>he.type==="entity"?"#6366f1":he.type==="paragraph"?"#10b981":"#6b7280",[]),se=u.useCallback(async(he=!1)=>{try{if(!he&&w>200){C(!0);return}c(!0);const[Q,P]=await Promise.all([E1(w,j),z1()]);if(h(P),Q.nodes.length===0){K({title:"",description:""}),G([]),ne([]);return}const{nodes:q,edges:W}=D1(Q.nodes,Q.edges);G(q),ne(W),Se(q.length),P&&P.total_nodes>w&&K({title:"",description:` ${P.total_nodes}  ${q.length} `}),K({title:"",description:` ${q.length} ${W.length} `})}catch(Q){console.error(":",Q),K({title:"",description:Q instanceof Error?Q.message:"",variant:"destructive"})}finally{c(!1)}},[w,j,K]),_=u.useCallback(async()=>{if(!f.trim()){K({title:"",description:""});return}try{const he=await A1(f);if(he.length===0){K({title:"",description:""});return}const Q=new Set(he.map(P=>P.id));G(P=>P.map(q=>({...q,style:{...q.style,opacity:Q.has(q.id)?1:.3,filter:Q.has(q.id)?"brightness(1.2)":"brightness(0.8)"}}))),K({title:"",description:` ${he.length} `})}catch(he){console.error(":",he),K({title:"",description:he instanceof Error?he.message:"",variant:"destructive"})}},[f,K]),me=u.useCallback(()=>{G(he=>he.map(Q=>({...Q,style:{...Q.style,opacity:1,filter:"brightness(1)"}})))},[]),re=u.useCallback(()=>{L(!1),H(!0),se()},[se]),le=u.useCallback(()=>{C(!1),setTimeout(()=>{se(!0)},0)},[se]),pe=u.useCallback((he,Q)=>{$.find(q=>q.id===Q.id)&&ye({id:Q.id,type:Q.type,content:Q.data.content})},[$]);u.useEffect(()=>{Y||R&&se()},[w,j,Y,R]);const Ne=u.useCallback((he,Q)=>{const P=$.find(Ce=>Ce.id===Q.source),q=$.find(Ce=>Ce.id===Q.target),W=M.find(Ce=>Ce.id===Q.id);P&&q&&W&&A({source:{id:P.id,type:P.type,content:P.data.content},target:{id:q.id,type:q.type,content:q.data.content},edge:{source:Q.source,target:Q.target,weight:parseFloat(Q.label||"0")}})},[$,M]);return e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"flex-shrink-0 p-4 border-b bg-background",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:""}),e.jsx("p",{className:"text-muted-foreground mt-1",children:""})]}),d&&e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs($e,{variant:"outline",className:"gap-1",children:[e.jsx(Ic,{className:"h-3 w-3"}),": ",d.total_nodes]}),e.jsxs($e,{variant:"outline",className:"gap-1",children:[e.jsx(xg,{className:"h-3 w-3"}),": ",d.total_edges]}),e.jsxs($e,{variant:"outline",className:"gap-1",children:[e.jsx(La,{className:"h-3 w-3"}),": ",d.entity_nodes]}),e.jsxs($e,{variant:"outline",className:"gap-1",children:[e.jsx(Ra,{className:"h-3 w-3"}),": ",d.paragraph_nodes]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mt-4",children:[e.jsxs("div",{className:"flex-1 flex gap-2",children:[e.jsx(ie,{placeholder:"...",value:f,onChange:he=>x(he.target.value),onKeyDown:he=>he.key==="Enter"&&_(),className:"flex-1"}),e.jsx(N,{onClick:_,size:"sm",children:e.jsx(zt,{className:"h-4 w-4"})}),e.jsx(N,{onClick:me,variant:"outline",size:"sm",children:""})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Be,{value:j,onValueChange:he=>p(he),children:[e.jsx(Le,{className:"w-[120px]",children:e.jsx(He,{})}),e.jsxs(Ue,{children:[e.jsx(te,{value:"all",children:""}),e.jsx(te,{value:"entity",children:""}),e.jsx(te,{value:"paragraph",children:""})]})]}),e.jsxs(Be,{value:w===1e4?"all":k?"custom":w.toString(),onValueChange:he=>{he==="custom"?(O(!0),S(w.toString())):he==="all"?(O(!1),v(1e4)):(O(!1),v(Number(he)))},children:[e.jsx(Le,{className:"w-[120px]",children:e.jsx(He,{})}),e.jsxs(Ue,{children:[e.jsx(te,{value:"50",children:"50 "}),e.jsx(te,{value:"100",children:"100 "}),e.jsx(te,{value:"200",children:"200 "}),e.jsx(te,{value:"500",children:"500 "}),e.jsx(te,{value:"1000",children:"1000 "}),e.jsx(te,{value:"all",children:" (10000)"}),e.jsx(te,{value:"custom",children:"..."})]})]}),k&&e.jsx(ie,{type:"number",min:"50",value:y,onChange:he=>S(he.target.value),onBlur:()=>{const he=parseInt(y);!isNaN(he)&&he>=50?v(he):(S("50"),v(50))},onKeyDown:he=>{if(he.key==="Enter"){const Q=parseInt(y);!isNaN(Q)&&Q>=50?v(Q):(S("50"),v(50))}},placeholder:"50",className:"w-[120px]"}),e.jsx(N,{onClick:()=>se(),variant:"outline",size:"sm",disabled:i,children:e.jsx(Ct,{className:X("h-4 w-4",i&&"animate-spin")})})]})]})]}),e.jsx("div",{className:"flex-1 relative",children:i?e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ct,{className:"h-8 w-8 animate-spin mx-auto mb-2 text-muted-foreground"}),e.jsx("p",{className:"text-muted-foreground",children:"..."})]})}):$.length===0?e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ic,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:""}),e.jsx("p",{className:"text-muted-foreground",children:""})]})}):e.jsxs(jy,{nodes:$,edges:M,onNodesChange:T,onEdgesChange:fe,onNodeClick:pe,onEdgeClick:Ne,nodeTypes:M1,fitView:!0,minZoom:.05,maxZoom:1.5,defaultViewport:{x:0,y:0,zoom:.5},elevateNodesOnSelect:_e<=500,nodesDraggable:_e<=1e3,attributionPosition:"bottom-left",children:[e.jsx(vy,{variant:Ny.Dots,gap:12,size:1}),e.jsx(by,{}),_e<=500&&e.jsx(yy,{nodeColor:E,nodeBorderRadius:8,pannable:!0,zoomable:!0}),e.jsxs(wy,{position:"top-right",className:"bg-background/95 backdrop-blur-sm rounded-lg border p-3 shadow-lg",children:[e.jsx("div",{className:"text-sm font-semibold mb-2",children:""}),e.jsxs("div",{className:"space-y-2 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded bg-gradient-to-br from-blue-500 to-blue-600 border-2 border-blue-700"}),e.jsx("span",{children:""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded bg-gradient-to-br from-green-500 to-green-600 border-2 border-green-700"}),e.jsx("span",{children:""})]}),_e>200&&e.jsxs("div",{className:"mt-2 pt-2 border-t text-yellow-600 dark:text-yellow-500",children:[e.jsx("div",{className:"font-semibold",children:""}),e.jsx("div",{children:""}),_e>500&&e.jsx("div",{children:""})]})]})]})]})}),e.jsx($s,{open:!!je,onOpenChange:he=>!he&&ye(null),children:e.jsxs(Hs,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsx(qs,{children:e.jsx(Gs,{children:""})}),je&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"grid grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:""}),e.jsx("div",{className:"mt-1",children:e.jsx($e,{variant:je.type==="entity"?"default":"secondary",children:je.type==="entity"?" ":" "})})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"ID"}),e.jsx("code",{className:"mt-1 block p-2 bg-muted rounded text-xs break-all",children:je.id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:""}),e.jsx(ss,{className:"mt-1 h-40 p-3 bg-muted rounded",children:e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:je.content})})]})]})]})}),e.jsx($s,{open:!!be,onOpenChange:he=>!he&&A(null),children:e.jsxs(Hs,{className:"max-w-2xl max-h-[80vh] overflow-hidden flex flex-col",children:[e.jsx(qs,{children:e.jsx(Gs,{children:""})}),be&&e.jsx(ss,{className:"flex-1 pr-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0 p-3 bg-blue-50 dark:bg-blue-950 rounded border-2 border-blue-200 dark:border-blue-800",children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:""}),e.jsx("div",{className:"font-medium text-sm mb-2 truncate",children:be.source.content}),e.jsxs("code",{className:"text-xs text-muted-foreground truncate block",children:[be.source.id.slice(0,40),"..."]})]}),e.jsx("div",{className:"text-2xl text-muted-foreground flex-shrink-0",children:""}),e.jsxs("div",{className:"flex-1 min-w-0 p-3 bg-green-50 dark:bg-green-950 rounded border-2 border-green-200 dark:border-green-800",children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:""}),e.jsx("div",{className:"font-medium text-sm mb-2 truncate",children:be.target.content}),e.jsxs("code",{className:"text-xs text-muted-foreground truncate block",children:[be.target.id.slice(0,40),"..."]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:""}),e.jsx("div",{className:"mt-1",children:e.jsx($e,{variant:"outline",className:"text-base font-mono",children:be.edge.weight.toFixed(4)})})]})]})})]})}),e.jsx(ps,{open:Y,onOpenChange:L,children:e.jsxs(rs,{children:[e.jsxs(cs,{children:[e.jsx(ds,{children:""}),e.jsxs(us,{children:["",e.jsx("br",{}),"?"]})]}),e.jsxs(os,{children:[e.jsx(hs,{onClick:()=>n({to:"/"}),children:" ()"}),e.jsx(ms,{onClick:re,children:""})]})]})}),e.jsx(ps,{open:D,onOpenChange:C,children:e.jsxs(rs,{children:[e.jsxs(cs,{children:[e.jsx(ds,{children:" "}),e.jsx(us,{asChild:!0,children:e.jsxs("div",{children:[e.jsxs("p",{children:[" ",e.jsx("strong",{className:"text-orange-600",children:w>=1e4?" (10000)":w})," "]}),e.jsx("p",{className:"mt-4",children:":"}),e.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[e.jsx("li",{children:""}),e.jsx("li",{children:""}),e.jsx("li",{children:""})]}),e.jsx("p",{className:"mt-4",children:" (50-200 )"})]})})]}),e.jsxs(os,{children:[e.jsx(hs,{onClick:()=>{C(!1),w>200&&(v(50),O(!1))},children:""}),e.jsx(ms,{onClick:le,className:"bg-orange-600 hover:bg-orange-700",children:""})]})]})})]})}function gp({className:n,classNames:i,showOutsideDays:c=!0,captionLayout:d="label",buttonVariant:h="ghost",formatters:f,components:x,...j}){const p=jg();return e.jsx(Ib,{showOutsideDays:c,className:X("bg-background group/calendar p-3 [--cell-size:2rem] [[data-slot=card-content]_&]:bg-transparent [[data-slot=popover-content]_&]:bg-transparent",String.raw`rtl:**:[.rdp-button\_next>svg]:rotate-180`,String.raw`rtl:**:[.rdp-button\_previous>svg]:rotate-180`,n),captionLayout:d,formatters:{formatMonthDropdown:w=>w.toLocaleString("default",{month:"short"}),...f},classNames:{root:X("w-fit",p.root),months:X("relative flex flex-col gap-4 md:flex-row",p.months),month:X("flex w-full flex-col gap-4",p.month),nav:X("absolute inset-x-0 top-0 flex w-full items-center justify-between gap-1",p.nav),button_previous:X(gr({variant:h}),"h-[--cell-size] w-[--cell-size] select-none p-0 aria-disabled:opacity-50",p.button_previous),button_next:X(gr({variant:h}),"h-[--cell-size] w-[--cell-size] select-none p-0 aria-disabled:opacity-50",p.button_next),month_caption:X("flex h-[--cell-size] w-full items-center justify-center px-[--cell-size]",p.month_caption),dropdowns:X("flex h-[--cell-size] w-full items-center justify-center gap-1.5 text-sm font-medium",p.dropdowns),dropdown_root:X("has-focus:border-ring border-input shadow-xs has-focus:ring-ring/50 has-focus:ring-[3px] relative rounded-md border",p.dropdown_root),dropdown:X("bg-popover absolute inset-0 opacity-0",p.dropdown),caption_label:X("select-none font-medium",d==="label"?"text-sm":"[&>svg]:text-muted-foreground flex h-8 items-center gap-1 rounded-md pl-2 pr-1 text-sm [&>svg]:size-3.5",p.caption_label),table:"w-full border-collapse",weekdays:X("flex",p.weekdays),weekday:X("text-muted-foreground flex-1 select-none rounded-md text-[0.8rem] font-normal",p.weekday),week:X("mt-2 flex w-full",p.week),week_number_header:X("w-[--cell-size] select-none",p.week_number_header),week_number:X("text-muted-foreground select-none text-[0.8rem]",p.week_number),day:X("group/day relative aspect-square h-full w-full select-none p-0 text-center [&:first-child[data-selected=true]_button]:rounded-l-md [&:last-child[data-selected=true]_button]:rounded-r-md",p.day),range_start:X("bg-accent rounded-l-md",p.range_start),range_middle:X("rounded-none",p.range_middle),range_end:X("bg-accent rounded-r-md",p.range_end),today:X("bg-accent text-accent-foreground rounded-md data-[selected=true]:rounded-none",p.today),outside:X("text-muted-foreground aria-selected:text-muted-foreground",p.outside),disabled:X("text-muted-foreground opacity-50",p.disabled),hidden:X("invisible",p.hidden),...i},components:{Root:({className:w,rootRef:v,...y})=>e.jsx("div",{"data-slot":"calendar",ref:v,className:X(w),...y}),Chevron:({className:w,orientation:v,...y})=>v==="left"?e.jsx(Hl,{className:X("size-4",w),...y}):v==="right"?e.jsx(ul,{className:X("size-4",w),...y}):e.jsx(Bl,{className:X("size-4",w),...y}),DayButton:R1,WeekNumber:({children:w,...v})=>e.jsx("td",{...v,children:e.jsx("div",{className:"flex size-[--cell-size] items-center justify-center text-center",children:w})}),...x},...j})}function R1({className:n,day:i,modifiers:c,...d}){const h=jg(),f=u.useRef(null);return u.useEffect(()=>{c.focused&&f.current?.focus()},[c.focused]),e.jsx(N,{ref:f,variant:"ghost",size:"icon","data-day":i.date.toLocaleDateString(),"data-selected-single":c.selected&&!c.range_start&&!c.range_end&&!c.range_middle,"data-range-start":c.range_start,"data-range-end":c.range_end,"data-range-middle":c.range_middle,className:X("data-[selected-single=true]:bg-primary data-[selected-single=true]:text-primary-foreground data-[range-middle=true]:bg-accent data-[range-middle=true]:text-accent-foreground data-[range-start=true]:bg-primary data-[range-start=true]:text-primary-foreground data-[range-end=true]:bg-primary data-[range-end=true]:text-primary-foreground group-data-[focused=true]/day:border-ring group-data-[focused=true]/day:ring-ring/50 flex aspect-square h-auto w-full min-w-[--cell-size] flex-col gap-1 font-normal leading-none data-[range-end=true]:rounded-md data-[range-middle=true]:rounded-none data-[range-start=true]:rounded-md group-data-[focused=true]/day:relative group-data-[focused=true]/day:z-10 group-data-[focused=true]/day:ring-[3px] [&>span]:text-xs [&>span]:opacity-70",h.day,n),...d})}const L1={lessThanXSeconds:{one:" 1 ",other:" {{count}} "},xSeconds:{one:"1 ",other:"{{count}} "},halfAMinute:"",lessThanXMinutes:{one:" 1 ",other:" {{count}} "},xMinutes:{one:"1 ",other:"{{count}} "},xHours:{one:"1 ",other:"{{count}} "},aboutXHours:{one:" 1 ",other:" {{count}} "},xDays:{one:"1 ",other:"{{count}} "},aboutXWeeks:{one:" 1 ",other:" {{count}} "},xWeeks:{one:"1 ",other:"{{count}} "},aboutXMonths:{one:" 1 ",other:" {{count}} "},xMonths:{one:"1 ",other:"{{count}} "},aboutXYears:{one:" 1 ",other:" {{count}} "},xYears:{one:"1 ",other:"{{count}} "},overXYears:{one:" 1 ",other:" {{count}} "},almostXYears:{one:" 1 ",other:" {{count}} "}},U1=(n,i,c)=>{let d;const h=L1[n];return typeof h=="string"?d=h:i===1?d=h.one:d=h.other.replace("{{count}}",String(i)),c?.addSuffix?c.comparison&&c.comparison>0?d+"":d+"":d},B1={full:"y''M''d'' EEEE",long:"y''M''d''",medium:"yyyy-MM-dd",short:"yy-MM-dd"},H1={full:"zzzz a h:mm:ss",long:"z a h:mm:ss",medium:"a h:mm:ss",short:"a h:mm"},q1={full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},G1={date:vu({formats:B1,defaultWidth:"full"}),time:vu({formats:H1,defaultWidth:"full"}),dateTime:vu({formats:q1,defaultWidth:"full"})};function jp(n,i,c){const d="eeee p";return NN(n,i,c)?d:n.getTime()>i.getTime()?"''"+d:"''"+d}const V1={lastWeek:jp,yesterday:"'' p",today:"'' p",tomorrow:"'' p",nextWeek:jp,other:"PP p"},F1=(n,i,c,d)=>{const h=V1[n];return typeof h=="function"?h(i,c,d):h},$1={narrow:["",""],abbreviated:["",""],wide:["",""]},Q1={narrow:["1","2","3","4"],abbreviated:["","","",""],wide:["","","",""]},Y1={narrow:["","","","","","","","","","","",""],abbreviated:["1","2","3","4","5","6","7","8","9","10","11","12"],wide:["","","","","","","","","","","",""]},X1={narrow:["","","","","","",""],short:["","","","","","",""],abbreviated:["","","","","","",""],wide:["","","","","","",""]},K1={narrow:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},abbreviated:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},wide:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""}},J1={narrow:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},abbreviated:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},wide:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""}},Z1=(n,i)=>{const c=Number(n);switch(i?.unit){case"date":return c.toString()+"";case"hour":return c.toString()+"";case"minute":return c.toString()+"";case"second":return c.toString()+"";default:return" "+c.toString()}},I1={ordinalNumber:Z1,era:tr({values:$1,defaultWidth:"wide"}),quarter:tr({values:Q1,defaultWidth:"wide",argumentCallback:n=>n-1}),month:tr({values:Y1,defaultWidth:"wide"}),day:tr({values:X1,defaultWidth:"wide"}),dayPeriod:tr({values:K1,defaultWidth:"wide",formattingValues:J1,defaultFormattingWidth:"wide"})},P1=/^(\s*)?\d+(|||)?/i,W1=/\d+/i,e2={narrow:/^()/i,abbreviated:/^()/i,wide:/^(|)/i},s2={any:[/^()/i,/^()/i]},t2={narrow:/^[1234]/i,abbreviated:/^[]/i,wide:/^[]/i},a2={any:[/(1|)/i,/(2|)/i,/(3|)/i,/(4|)/i]},l2={narrow:/^(|||||||||[])/i,abbreviated:/^(|||||||||[]|\d|1[12])/i,wide:/^(|||||||||[])/i},n2={narrow:[/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^(?!(|))/i,/^/i,/^/i],any:[/^|1/i,/^|2/i,/^|3/i,/^|4/i,/^|5/i,/^|6/i,/^|7/i,/^|8/i,/^|9/i,/^(?!(|))|10/i,/^|11/i,/^|12/i]},i2={narrow:/^[]/i,short:/^[]/i,abbreviated:/^[]/i,wide:/^[]/i},r2={any:[//i,//i,//i,//i,//i,//i,//i]},c2={any:/^(?|?||[]|?||?||)/i},o2={any:{am:/^?/i,pm:/^?/i,midnight:/^/i,noon:/^[]/i,morning:/^/i,afternoon:/^/i,evening:/^?/i,night:/^/i}},d2={ordinalNumber:bN({matchPattern:P1,parsePattern:W1,valueCallback:n=>parseInt(n,10)}),era:ar({matchPatterns:e2,defaultMatchWidth:"wide",parsePatterns:s2,defaultParseWidth:"any"}),quarter:ar({matchPatterns:t2,defaultMatchWidth:"wide",parsePatterns:a2,defaultParseWidth:"any",valueCallback:n=>n+1}),month:ar({matchPatterns:l2,defaultMatchWidth:"wide",parsePatterns:n2,defaultParseWidth:"any"}),day:ar({matchPatterns:i2,defaultMatchWidth:"wide",parsePatterns:r2,defaultParseWidth:"any"}),dayPeriod:ar({matchPatterns:c2,defaultMatchWidth:"any",parsePatterns:o2,defaultParseWidth:"any"})},Vc={code:"zh-CN",formatDistance:U1,formatLong:G1,formatRelative:F1,localize:I1,match:d2,options:{weekStartsOn:1,firstWeekContainsDate:4}},Fc={xs:{label:"",rowHeight:28,class:"text-[10px] sm:text-xs"},sm:{label:"",rowHeight:36,class:"text-xs sm:text-sm"},base:{label:"",rowHeight:44,class:"text-sm sm:text-base"}};function u2(){const[n,i]=u.useState([]),[c,d]=u.useState(""),[h,f]=u.useState("all"),[x,j]=u.useState("all"),[p,w]=u.useState(void 0),[v,y]=u.useState(void 0),[S,k]=u.useState(!0),[O,Y]=u.useState(!1),[L,R]=u.useState("xs"),[H,D]=u.useState(4),C=u.useRef(null);u.useEffect(()=>{const E=rn.getAllLogs();i(E);const se=rn.onLog(()=>{i(rn.getAllLogs())}),_=rn.onConnectionChange(me=>{Y(me)});return()=>{se(),_()}},[]);const $=u.useMemo(()=>{const E=new Set(n.map(se=>se.module).filter(se=>se&&se.trim()!==""));return Array.from(E).sort()},[n]),G=E=>{switch(E){case"DEBUG":return"text-muted-foreground";case"INFO":return"text-blue-500 dark:text-blue-400";case"WARNING":return"text-yellow-600 dark:text-yellow-500";case"ERROR":return"text-red-600 dark:text-red-500";case"CRITICAL":return"text-red-700 dark:text-red-400 font-bold";default:return"text-foreground"}},T=E=>{switch(E){case"DEBUG":return"bg-gray-800/30 dark:bg-gray-800/50";case"INFO":return"bg-blue-900/20 dark:bg-blue-500/20";case"WARNING":return"bg-yellow-900/20 dark:bg-yellow-500/20";case"ERROR":return"bg-red-900/20 dark:bg-red-500/20";case"CRITICAL":return"bg-red-900/30 dark:bg-red-600/30";default:return"bg-gray-800/20 dark:bg-gray-800/30"}},M=()=>{window.location.reload()},ne=()=>{rn.clearLogs(),i([])},fe=()=>{const E=je.map(re=>`${re.timestamp} [${re.level.padEnd(8)}] [${re.module}] ${re.message}`).join(`
`),se=new Blob([E],{type:"text/plain;charset=utf-8"}),_=URL.createObjectURL(se),me=document.createElement("a");me.href=_,me.download=`logs-${Nu(new Date,"yyyy-MM-dd-HHmmss")}.txt`,me.click(),URL.revokeObjectURL(_)},_e=()=>{k(!S)},Se=()=>{w(void 0),y(void 0)},je=u.useMemo(()=>n.filter(E=>{const se=c===""||E.message.toLowerCase().includes(c.toLowerCase())||E.module.toLowerCase().includes(c.toLowerCase()),_=h==="all"||E.level===h,me=x==="all"||E.module===x;let re=!0;if(p||v){const le=new Date(E.timestamp);if(p){const pe=new Date(p);pe.setHours(0,0,0,0),re=re&&le>=pe}if(v){const pe=new Date(v);pe.setHours(23,59,59,999),re=re&&le<=pe}}return se&&_&&me&&re}),[n,c,h,x,p,v]),ye=Fc[L].rowHeight+H,be=oN({count:je.length,getScrollElement:()=>C.current,estimateSize:()=>ye,overscan:15}),A=u.useRef(!1),K=u.useRef(je.length);return u.useEffect(()=>{const E=C.current;if(!E)return;const se=()=>{if(A.current)return;const{scrollTop:_,scrollHeight:me,clientHeight:re}=E,le=me-_-re;le>100&&S?k(!1):le<50&&!S&&k(!0)};return E.addEventListener("scroll",se,{passive:!0}),()=>E.removeEventListener("scroll",se)},[S]),u.useEffect(()=>{const E=je.length>K.current;K.current=je.length,S&&je.length>0&&E&&(A.current=!0,be.scrollToIndex(je.length-1,{align:"end",behavior:"auto"}),requestAnimationFrame(()=>{requestAnimationFrame(()=>{A.current=!1})}))},[je.length,S,be]),e.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"flex-shrink-0 space-y-4 p-3 sm:p-4 lg:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold",children:""}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mt-1",children:""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:X("h-2.5 w-2.5 sm:h-3 sm:w-3 rounded-full",O?"bg-green-500 animate-pulse":"bg-red-500")}),e.jsx("span",{className:"text-xs sm:text-sm text-muted-foreground",children:O?"":""})]})]}),e.jsx(Ze,{className:"p-3 sm:p-4",children:e.jsxs("div",{className:"flex flex-col gap-3 sm:gap-4",children:[e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(zt,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(ie,{placeholder:"...",value:c,onChange:E=>d(E.target.value),className:"pl-9 h-9 text-sm"})]}),e.jsxs(Be,{value:h,onValueChange:f,children:[e.jsxs(Le,{className:"w-full sm:w-[140px] lg:w-[180px] h-9 text-sm",children:[e.jsx(Ru,{className:"h-4 w-4 mr-2"}),e.jsx(He,{placeholder:""})]}),e.jsxs(Ue,{children:[e.jsx(te,{value:"all",children:""}),e.jsx(te,{value:"DEBUG",children:"DEBUG"}),e.jsx(te,{value:"INFO",children:"INFO"}),e.jsx(te,{value:"WARNING",children:"WARNING"}),e.jsx(te,{value:"ERROR",children:"ERROR"}),e.jsx(te,{value:"CRITICAL",children:"CRITICAL"})]})]}),e.jsxs(Be,{value:x,onValueChange:j,children:[e.jsxs(Le,{className:"w-full sm:w-[160px] lg:w-[200px] h-9 text-sm",children:[e.jsx(Ru,{className:"h-4 w-4 mr-2"}),e.jsx(He,{placeholder:""})]}),e.jsxs(Ue,{children:[e.jsx(te,{value:"all",children:""}),$.map(E=>e.jsx(te,{value:E,children:E},E))]})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:gap-4",children:[e.jsxs(Ua,{children:[e.jsx(Ba,{asChild:!0,children:e.jsxs(N,{variant:"outline",size:"sm",className:X("w-full sm:w-[200px] lg:w-[240px] justify-start text-left font-normal h-9",!p&&"text-muted-foreground"),children:[e.jsx(Kf,{className:"mr-2 h-4 w-4"}),e.jsx("span",{className:"text-xs sm:text-sm",children:p?Nu(p,"PPP",{locale:Vc}):""})]})}),e.jsx(ka,{className:"w-auto p-0",align:"start",children:e.jsx(gp,{mode:"single",selected:p,onSelect:w,initialFocus:!0,locale:Vc})})]}),e.jsxs(Ua,{children:[e.jsx(Ba,{asChild:!0,children:e.jsxs(N,{variant:"outline",size:"sm",className:X("w-full sm:w-[200px] lg:w-[240px] justify-start text-left font-normal h-9",!v&&"text-muted-foreground"),children:[e.jsx(Kf,{className:"mr-2 h-4 w-4"}),e.jsx("span",{className:"text-xs sm:text-sm",children:v?Nu(v,"PPP",{locale:Vc}):""})]})}),e.jsx(ka,{className:"w-auto p-0",align:"start",children:e.jsx(gp,{mode:"single",selected:v,onSelect:y,initialFocus:!0,locale:Vc})})]}),(p||v)&&e.jsxs(N,{variant:"outline",size:"sm",onClick:Se,className:"w-full sm:w-auto h-9",children:[e.jsx(dl,{className:"h-4 w-4 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline text-sm",children:""}),e.jsx("span",{className:"sm:hidden text-sm",children:""})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:flex-wrap sm:items-center",children:[e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs(N,{variant:S?"default":"outline",size:"sm",onClick:_e,className:"flex-1 sm:flex-none h-9",children:[S?e.jsx(Ab,{className:"h-4 w-4"}):e.jsx(Mb,{className:"h-4 w-4"}),e.jsx("span",{className:"ml-2 text-sm",children:S?"":""})]}),e.jsxs(N,{variant:"outline",size:"sm",onClick:M,className:"flex-1 sm:flex-none h-9",children:[e.jsx(Ct,{className:"h-4 w-4"}),e.jsx("span",{className:"ml-2 text-sm",children:""})]}),e.jsxs(N,{variant:"outline",size:"sm",onClick:ne,className:"flex-1 sm:flex-none h-9",children:[e.jsx(ts,{className:"h-4 w-4"}),e.jsx("span",{className:"ml-2 text-sm",children:""})]}),e.jsxs(N,{variant:"outline",size:"sm",onClick:fe,className:"flex-1 sm:flex-none h-9",children:[e.jsx(rl,{className:"h-4 w-4"}),e.jsx("span",{className:"ml-2 text-sm",children:""})]})]}),e.jsx("div",{className:"flex-1 hidden sm:block"}),e.jsxs("div",{className:"text-xs sm:text-sm text-muted-foreground flex items-center justify-center sm:justify-end",children:[e.jsxs("span",{className:"font-mono",children:[je.length," / ",n.length]}),e.jsx("span",{className:"ml-1",children:""})]})]}),e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:gap-6 pt-2 border-t border-border/50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(Db,{className:"h-4 w-4"}),e.jsx("span",{children:""})]}),e.jsx("div",{className:"flex gap-1",children:Object.keys(Fc).map(E=>e.jsx(N,{variant:L===E?"default":"outline",size:"sm",onClick:()=>R(E),className:"h-7 px-3 text-xs",children:Fc[E].label},E))})]}),e.jsxs("div",{className:"flex items-center gap-3 flex-1 max-w-xs",children:[e.jsx("span",{className:"text-sm text-muted-foreground whitespace-nowrap",children:""}),e.jsx(wa,{value:[H],onValueChange:([E])=>D(E),min:0,max:12,step:2,className:"flex-1"}),e.jsxs("span",{className:"text-xs text-muted-foreground w-8",children:[H,"px"]})]})]})]})})]}),e.jsx("div",{className:"flex-1 min-h-0 px-3 sm:px-4 lg:px-6 pb-3 sm:pb-4 lg:pb-6",children:e.jsx(Ze,{className:"bg-black dark:bg-gray-950 border-gray-800 dark:border-gray-900 h-full",children:e.jsx(ss,{viewportRef:C,className:"h-full",children:e.jsx("div",{className:X("p-2 sm:p-3 font-mono relative",Fc[L].class),style:{height:`${be.getTotalSize()}px`},children:je.length===0?e.jsx("div",{className:"text-gray-500 dark:text-gray-600 text-center py-8 text-sm",children:""}):be.getVirtualItems().map(E=>{const se=je[E.index];return e.jsxs("div",{"data-index":E.index,ref:be.measureElement,className:X("absolute top-0 left-0 w-full px-2 sm:px-3 rounded hover:bg-white/5 transition-colors group",T(se.level)),style:{transform:`translateY(${E.start}px)`,paddingTop:`${H/2}px`,paddingBottom:`${H/2}px`},children:[e.jsxs("div",{className:"flex flex-col gap-0.5 sm:hidden",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-600",children:se.timestamp}),e.jsxs("span",{className:X("font-semibold",G(se.level)),children:["[",se.level,"]"]})]}),e.jsx("div",{className:"text-cyan-400 dark:text-cyan-500 truncate",children:se.module}),e.jsx("div",{className:"text-gray-300 dark:text-gray-400 whitespace-pre-wrap break-words",children:se.message})]}),e.jsxs("div",{className:"hidden sm:flex gap-2 items-start",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-600 flex-shrink-0 w-[130px] lg:w-[160px]",children:se.timestamp}),e.jsxs("span",{className:X("flex-shrink-0 w-[65px] lg:w-[75px] font-semibold",G(se.level)),children:["[",se.level,"]"]}),e.jsx("span",{className:"text-cyan-400 dark:text-cyan-500 flex-shrink-0 w-[100px] lg:w-[130px] truncate",children:se.module}),e.jsx("span",{className:"text-gray-300 dark:text-gray-400 flex-1 whitespace-pre-wrap break-words",children:se.message})]})]},E.key)})})})})})]})}const m2="Mai-with-u",h2="plugin-repo",x2="main",f2="plugin_details.json";async function p2(){try{const n=await Te("/api/webui/plugins/fetch-raw",{method:"POST",body:JSON.stringify({owner:m2,repo:h2,branch:x2,file_path:f2})});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const i=await n.json();if(!i.success||!i.data)throw new Error(i.error||"");return JSON.parse(i.data).filter(h=>!h?.id||!h?.manifest?(console.warn(":",h),!1):!h.manifest.name||!h.manifest.version?(console.warn(":",h.id),!1):!0).map(h=>({id:h.id,manifest:{manifest_version:h.manifest.manifest_version||1,name:h.manifest.name,version:h.manifest.version,description:h.manifest.description||"",author:h.manifest.author||{name:"Unknown"},license:h.manifest.license||"Unknown",host_application:h.manifest.host_application||{min_version:"0.0.0"},homepage_url:h.manifest.homepage_url,repository_url:h.manifest.repository_url,keywords:h.manifest.keywords||[],categories:h.manifest.categories||[],default_locale:h.manifest.default_locale||"zh-CN",locales_path:h.manifest.locales_path},downloads:0,rating:0,review_count:0,installed:!1,published_at:new Date().toISOString(),updated_at:new Date().toISOString()}))}catch(n){throw console.error("Failed to fetch plugin list:",n),n}}async function g2(){try{const n=await Te("/api/webui/plugins/git-status");if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return await n.json()}catch(n){return console.error("Failed to check Git status:",n),{installed:!1,error:" Git "}}}async function j2(){try{const n=await Te("/api/webui/plugins/version");if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return await n.json()}catch(n){return console.error("Failed to get Maimai version:",n),{version:"0.0.0",version_major:0,version_minor:0,version_patch:0}}}function v2(n,i,c){const d=n.split(".").map(j=>parseInt(j)||0),h=d[0]||0,f=d[1]||0,x=d[2]||0;if(c.version_major<h||c.version_major===h&&c.version_minor<f||c.version_major===h&&c.version_minor===f&&c.version_patch<x)return!1;if(i){const j=i.split(".").map(y=>parseInt(y)||0),p=j[0]||0,w=j[1]||0,v=j[2]||0;if(c.version_major>p||c.version_major===p&&c.version_minor>w||c.version_major===p&&c.version_minor===w&&c.version_patch>v)return!1}return!0}function N2(n,i){const c=window.location.protocol==="https:"?"wss:":"ws:",d=window.location.host,h=new WebSocket(`${c}//${d}/api/webui/ws/plugin-progress`);return h.onopen=()=>{console.log("Plugin progress WebSocket connected");const f=setInterval(()=>{h.readyState===WebSocket.OPEN?h.send("ping"):clearInterval(f)},3e4)},h.onmessage=f=>{try{if(f.data==="pong")return;const x=JSON.parse(f.data);n(x)}catch(x){console.error("Failed to parse progress data:",x)}},h.onerror=f=>{console.error("Plugin progress WebSocket error:",f),i?.(f)},h.onclose=()=>{console.log("Plugin progress WebSocket disconnected")},h}async function dr(){try{const n=await Te("/api/webui/plugins/installed",{headers:Ls()});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const i=await n.json();if(!i.success)throw new Error(i.message||"");return i.plugins||[]}catch(n){return console.error("Failed to get installed plugins:",n),[]}}function $c(n,i){return i.some(c=>c.id===n)}function Qc(n,i){const c=i.find(d=>d.id===n);if(c)return c.manifest?.version||c.version}async function b2(n,i,c="main"){const d=await Te("/api/webui/plugins/install",{method:"POST",body:JSON.stringify({plugin_id:n,repository_url:i,branch:c})});if(!d.ok){const h=await d.json();throw new Error(h.detail||"")}return await d.json()}async function y2(n){const i=await Te("/api/webui/plugins/uninstall",{method:"POST",body:JSON.stringify({plugin_id:n})});if(!i.ok){const c=await i.json();throw new Error(c.detail||"")}return await i.json()}async function w2(n,i,c="main"){const d=await Te("/api/webui/plugins/update",{method:"POST",body:JSON.stringify({plugin_id:n,repository_url:i,branch:c})});if(!d.ok){const h=await d.json();throw new Error(h.detail||"")}return await d.json()}async function _2(n){const i=await Te(`/api/webui/plugins/config/${n}/schema`,{headers:Ls()});if(!i.ok){const d=await i.json();throw new Error(d.detail||" Schema ")}const c=await i.json();if(!c.success)throw new Error(c.message||" Schema ");return c.schema}async function S2(n){const i=await Te(`/api/webui/plugins/config/${n}`,{headers:Ls()});if(!i.ok){const d=await i.json();throw new Error(d.detail||"")}const c=await i.json();if(!c.success)throw new Error(c.message||"");return c.config}async function C2(n,i){const c=await Te(`/api/webui/plugins/config/${n}`,{method:"PUT",body:JSON.stringify({config:i})});if(!c.ok){const d=await c.json();throw new Error(d.detail||"")}return await c.json()}async function k2(n){const i=await Te(`/api/webui/plugins/config/${n}/reset`,{method:"POST",headers:Ls()});if(!i.ok){const c=await i.json();throw new Error(c.detail||"")}return await i.json()}async function T2(n){const i=await Te(`/api/webui/plugins/config/${n}/toggle`,{method:"POST",headers:Ls()});if(!i.ok){const c=await i.json();throw new Error(c.detail||"")}return await i.json()}const _r="https://maibot-plugin-stats.maibot-webui.workers.dev";async function Gg(n){try{const i=await fetch(`${_r}/stats/${n}`);return i.ok?await i.json():(console.error("Failed to fetch plugin stats:",i.statusText),null)}catch(i){return console.error("Error fetching plugin stats:",i),null}}async function E2(n,i){try{const c=i||sm(),d=await fetch(`${_r}/stats/like`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({plugin_id:n,user_id:c})}),h=await d.json();return d.status===429?{success:!1,error:""}:d.ok?{success:!0,...h}:{success:!1,error:h.error||""}}catch(c){return console.error("Error liking plugin:",c),{success:!1,error:""}}}async function z2(n,i){try{const c=i||sm(),d=await fetch(`${_r}/stats/dislike`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({plugin_id:n,user_id:c})}),h=await d.json();return d.status===429?{success:!1,error:""}:d.ok?{success:!0,...h}:{success:!1,error:h.error||""}}catch(c){return console.error("Error disliking plugin:",c),{success:!1,error:""}}}async function A2(n,i,c,d){if(i<1||i>5)return{success:!1,error:" 1-5 "};try{const h=d||sm(),f=await fetch(`${_r}/stats/rate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({plugin_id:n,rating:i,comment:c,user_id:h})}),x=await f.json();return f.status===429?{success:!1,error:" 3 "}:f.ok?{success:!0,...x}:{success:!1,error:x.error||""}}catch(h){return console.error("Error rating plugin:",h),{success:!1,error:""}}}async function M2(n){try{const i=await fetch(`${_r}/stats/download`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({plugin_id:n})}),c=await i.json();return i.status===429?(console.warn("Download recording rate limited"),{success:!0}):i.ok?{success:!0,...c}:(console.error("Failed to record download:",c.error),{success:!1,error:c.error})}catch(i){return console.error("Error recording download:",i),{success:!1,error:""}}}function D2(){const n=navigator,i=[navigator.userAgent,navigator.language,navigator.languages?.join(",")||"",navigator.platform,navigator.hardwareConcurrency||0,screen.width,screen.height,screen.colorDepth,screen.pixelDepth,new Date().getTimezoneOffset(),Intl.DateTimeFormat().resolvedOptions().timeZone,navigator.maxTouchPoints||0,n.deviceMemory||0].join("|");let c=0;for(let d=0;d<i.length;d++){const h=i.charCodeAt(d);c=(c<<5)-c+h,c=c&c}return`fp_${Math.abs(c).toString(36)}`}function sm(){const n="maibot_user_id";let i=localStorage.getItem(n);if(!i){const c=D2(),d=Date.now().toString(36),h=Math.random().toString(36).substring(2,15);i=`${c}_${d}_${h}`,localStorage.setItem(n,i)}return i}function O2({pluginId:n,compact:i=!1}){const[c,d]=u.useState(null),[h,f]=u.useState(!0),[x,j]=u.useState(0),[p,w]=u.useState(""),[v,y]=u.useState(!1),{toast:S}=Vs(),k=async()=>{f(!0);const R=await Gg(n);R&&d(R),f(!1)};u.useEffect(()=>{k()},[n]);const O=async()=>{const R=await E2(n);R.success?(S({title:"",description:""}),k()):S({title:"",description:R.error||"",variant:"destructive"})},Y=async()=>{const R=await z2(n);R.success?(S({title:"",description:""}),k()):S({title:"",description:R.error||"",variant:"destructive"})},L=async()=>{if(x===0){S({title:"",description:" 1 ",variant:"destructive"});return}const R=await A2(n,x,p||void 0);R.success?(S({title:"",description:""}),y(!1),j(0),w(""),k()):S({title:"",description:R.error||"",variant:"destructive"})};return h?e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(rl,{className:"h-4 w-4"}),e.jsx("span",{children:"-"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ul,{className:"h-4 w-4"}),e.jsx("span",{children:"-"})]})]}):c?i?e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",title:`: ${c.downloads.toLocaleString()}`,children:[e.jsx(rl,{className:"h-4 w-4"}),e.jsx("span",{children:c.downloads.toLocaleString()})]}),e.jsxs("div",{className:"flex items-center gap-1",title:`: ${c.rating.toFixed(1)} (${c.rating_count} )`,children:[e.jsx(Ul,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),e.jsx("span",{children:c.rating.toFixed(1)})]}),e.jsxs("div",{className:"flex items-center gap-1",title:`: ${c.likes}`,children:[e.jsx(yu,{className:"h-4 w-4"}),e.jsx("span",{children:c.likes})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"flex flex-col items-center p-3 rounded-lg border bg-card",children:[e.jsx(rl,{className:"h-5 w-5 text-muted-foreground mb-1"}),e.jsx("span",{className:"text-2xl font-bold",children:c.downloads.toLocaleString()}),e.jsx("span",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"flex flex-col items-center p-3 rounded-lg border bg-card",children:[e.jsx(Ul,{className:"h-5 w-5 text-yellow-400 mb-1 fill-yellow-400"}),e.jsx("span",{className:"text-2xl font-bold",children:c.rating.toFixed(1)}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[c.rating_count," "]})]}),e.jsxs("div",{className:"flex flex-col items-center p-3 rounded-lg border bg-card",children:[e.jsx(yu,{className:"h-5 w-5 text-green-500 mb-1"}),e.jsx("span",{className:"text-2xl font-bold",children:c.likes}),e.jsx("span",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"flex flex-col items-center p-3 rounded-lg border bg-card",children:[e.jsx(Jf,{className:"h-5 w-5 text-red-500 mb-1"}),e.jsx("span",{className:"text-2xl font-bold",children:c.dislikes}),e.jsx("span",{className:"text-xs text-muted-foreground",children:""})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(N,{variant:"outline",size:"sm",onClick:O,children:[e.jsx(yu,{className:"h-4 w-4 mr-1"}),""]}),e.jsxs(N,{variant:"outline",size:"sm",onClick:Y,children:[e.jsx(Jf,{className:"h-4 w-4 mr-1"}),""]}),e.jsxs($s,{open:v,onOpenChange:y,children:[e.jsx(Zu,{asChild:!0,children:e.jsxs(N,{variant:"default",size:"sm",children:[e.jsx(Ul,{className:"h-4 w-4 mr-1"}),""]})}),e.jsxs(Hs,{children:[e.jsxs(qs,{children:[e.jsx(Gs,{children:""}),e.jsx(Is,{children:""})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:"flex gap-2",children:[1,2,3,4,5].map(R=>e.jsx("button",{onClick:()=>j(R),className:"focus:outline-none",children:e.jsx(Ul,{className:`h-8 w-8 transition-colors ${R<=x?"fill-yellow-400 text-yellow-400":"text-muted-foreground hover:text-yellow-300"}`})},R))}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[x===0&&"",x===1&&"",x===2&&"",x===3&&"",x===4&&"",x===5&&""]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:""}),e.jsx(Bs,{value:p,onChange:R=>w(R.target.value),placeholder:"...",rows:4,maxLength:500}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-1 text-right",children:[p.length," / 500"]})]})]}),e.jsxs(at,{children:[e.jsx(N,{variant:"outline",onClick:()=>y(!1),children:""}),e.jsx(N,{onClick:L,disabled:x===0,children:""})]})]})]})]}),c.recent_ratings&&c.recent_ratings.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-semibold",children:""}),e.jsx("div",{className:"space-y-3",children:c.recent_ratings.map((R,H)=>e.jsxs("div",{className:"p-3 rounded-lg border bg-muted/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(D=>e.jsx(Ul,{className:`h-3 w-3 ${D<=R.rating?"fill-yellow-400 text-yellow-400":"text-muted-foreground"}`},D))}),e.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(R.created_at).toLocaleDateString()})]}),R.comment&&e.jsx("p",{className:"text-sm text-muted-foreground",children:R.comment})]},H))})]})]}):null}const vp={"Group Management":"","Entertainment & Interaction":"","Utility Tools":"","Content Generation":"",Multimedia:"","External Integration":"","Data Analysis & Insights":"",Other:""};function R2(){const n=ja(),[i,c]=u.useState(null),[d,h]=u.useState(""),[f,x]=u.useState("all"),[j,p]=u.useState("all"),[w,v]=u.useState(!0),[y,S]=u.useState([]),[k,O]=u.useState(!0),[Y,L]=u.useState(null),[R,H]=u.useState(null),[D,C]=u.useState(null),[$,G]=u.useState(null),[,T]=u.useState([]),[M,ne]=u.useState({}),{toast:fe}=Vs(),_e=async _=>{const me=_.map(async pe=>{try{const Ne=await Gg(pe.id);return{id:pe.id,stats:Ne}}catch(Ne){return console.warn(`Failed to load stats for ${pe.id}:`,Ne),{id:pe.id,stats:null}}}),re=await Promise.all(me),le={};re.forEach(({id:pe,stats:Ne})=>{Ne&&(le[pe]=Ne)}),ne(le)};u.useEffect(()=>{let _=null,me=!1;return(async()=>{if(_=N2(le=>{me||(C(le),le.stage==="success"?setTimeout(()=>{me||C(null)},2e3):le.stage==="error"&&(O(!1),L(le.error||"")))},le=>{console.error("WebSocket error:",le),me||fe({title:"WebSocket ",description:"",variant:"destructive"})}),await new Promise(le=>{if(!_){le();return}const pe=()=>{_&&_.readyState===WebSocket.OPEN?(console.log("WebSocket connected, starting to load plugins"),le()):_&&_.readyState===WebSocket.CLOSED?(console.warn("WebSocket closed before loading plugins"),le()):setTimeout(pe,100)};pe()}),!me){const le=await g2();H(le),le.installed||fe({title:"Git ",description:le.error||" Git ",variant:"destructive"})}if(!me){const le=await j2();G(le)}if(!me)try{O(!0),L(null);const le=await p2();if(!me){const pe=await dr();T(pe);const Ne=le.map(he=>{const Q=$c(he.id,pe),P=Qc(he.id,pe);return{...he,installed:Q,installed_version:P}});for(const he of pe)!Ne.some(P=>P.id===he.id)&&he.manifest&&Ne.push({id:he.id,manifest:{manifest_version:he.manifest.manifest_version||1,name:he.manifest.name,version:he.manifest.version,description:he.manifest.description||"",author:he.manifest.author,license:he.manifest.license||"Unknown",host_application:he.manifest.host_application,homepage_url:he.manifest.homepage_url,repository_url:he.manifest.repository_url,keywords:he.manifest.keywords||[],categories:he.manifest.categories||[],default_locale:he.manifest.default_locale||"zh-CN",locales_path:he.manifest.locales_path},downloads:0,rating:0,review_count:0,installed:!0,installed_version:he.manifest.version,published_at:new Date().toISOString(),updated_at:new Date().toISOString()});S(Ne),_e(Ne)}}catch(le){if(!me){const pe=le instanceof Error?le.message:"";L(pe),fe({title:"",description:pe,variant:"destructive"})}}finally{me||O(!1)}})(),()=>{me=!0,_&&_.close()}},[fe]);const Se=_=>{if(!_.installed&&$&&!je(_))return e.jsxs($e,{variant:"destructive",className:"gap-1",children:[e.jsx(Sa,{className:"h-3 w-3"}),""]});if(_.installed){const me=_.installed_version?.trim(),re=_.manifest.version?.trim();if(me!==re){const le=me?.split(".").map(Number)||[0,0,0],pe=re?.split(".").map(Number)||[0,0,0];for(let Ne=0;Ne<3;Ne++){if((pe[Ne]||0)>(le[Ne]||0))return e.jsxs($e,{variant:"outline",className:"gap-1 text-orange-600 border-orange-600",children:[e.jsx(Sa,{className:"h-3 w-3"}),""]});if((pe[Ne]||0)<(le[Ne]||0))break}}return e.jsxs($e,{variant:"default",className:"gap-1",children:[e.jsx(fa,{className:"h-3 w-3"}),""]})}return null},je=_=>!$||!_.manifest?.host_application?!0:v2(_.manifest.host_application.min_version,_.manifest.host_application.max_version,$),ye=_=>{if(!_.installed||!_.installed_version||!_.manifest?.version)return!1;const me=_.installed_version.trim(),re=_.manifest.version.trim();if(me===re)return!1;const le=me.split(".").map(Number),pe=re.split(".").map(Number);for(let Ne=0;Ne<3;Ne++){if((pe[Ne]||0)>(le[Ne]||0))return!0;if((pe[Ne]||0)<(le[Ne]||0))return!1}return!1},be=y.filter(_=>{if(!_.manifest)return console.warn("[]  manifest :",_.id),!1;const me=d===""||_.manifest.name?.toLowerCase().includes(d.toLowerCase())||_.manifest.description?.toLowerCase().includes(d.toLowerCase())||_.manifest.keywords&&_.manifest.keywords.some(Ne=>Ne.toLowerCase().includes(d.toLowerCase())),re=f==="all"||_.manifest.categories&&_.manifest.categories.includes(f);let le=!0;j==="installed"?le=_.installed===!0:j==="updates"&&(le=_.installed===!0&&ye(_));const pe=!w||!$||je(_);return me&&re&&le&&pe}),A=()=>{c(null)},K=async _=>{if(!R?.installed){fe({title:"",description:"Git ",variant:"destructive"});return}if($&&!je(_)){fe({title:"",description:"",variant:"destructive"});return}try{await b2(_.id,_.manifest.repository_url||"","main"),M2(_.id).catch(re=>{console.warn("Failed to record download:",re)}),fe({title:"",description:`${_.manifest.name} `});const me=await dr();T(me),S(re=>re.map(le=>{if(le.id===_.id){const pe=$c(le.id,me),Ne=Qc(le.id,me);return{...le,installed:pe,installed_version:Ne}}return le}))}catch(me){fe({title:"",description:me instanceof Error?me.message:"",variant:"destructive"})}},E=async _=>{try{await y2(_.id),fe({title:"",description:`${_.manifest.name} `});const me=await dr();T(me),S(re=>re.map(le=>{if(le.id===_.id){const pe=$c(le.id,me),Ne=Qc(le.id,me);return{...le,installed:pe,installed_version:Ne}}return le}))}catch(me){fe({title:"",description:me instanceof Error?me.message:"",variant:"destructive"})}},se=async _=>{if(!R?.installed){fe({title:"",description:"Git ",variant:"destructive"});return}try{const me=await w2(_.id,_.manifest.repository_url||"","main");fe({title:"",description:`${_.manifest.name}  ${me.old_version}  ${me.new_version}`});const re=await dr();T(re),S(le=>le.map(pe=>{if(pe.id===_.id){const Ne=$c(pe.id,re),he=Qc(pe.id,re);return{...pe,installed:Ne,installed_version:he}}return pe}))}catch(me){fe({title:"",description:me instanceof Error?me.message:"",variant:"destructive"})}};return e.jsx(ss,{className:"h-full",children:e.jsxs("div",{className:"space-y-6 p-4 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:""}),e.jsx("p",{className:"text-muted-foreground mt-2",children:""})]}),e.jsxs(N,{onClick:()=>n({to:"/plugin-mirrors"}),children:[e.jsx(Ob,{className:"h-4 w-4 mr-2"}),""]})]}),R&&!R.installed&&e.jsxs(Ze,{className:"border-orange-600 bg-orange-50 dark:bg-orange-950/20",children:[e.jsx(ys,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(_a,{className:"h-5 w-5 text-orange-600"}),e.jsxs("div",{children:[e.jsx(ws,{className:"text-lg text-orange-900 dark:text-orange-100",children:"Git "}),e.jsx(ct,{className:"text-orange-800 dark:text-orange-200",children:R.error||" Git "})]})]})}),e.jsx(Ts,{children:e.jsxs("p",{className:"text-sm text-orange-800 dark:text-orange-200",children:[" ",e.jsx("a",{href:"https://git-scm.com/downloads",target:"_blank",rel:"noopener noreferrer",className:"underline font-medium",children:"git-scm.com"}),"  Git "]})})]}),e.jsx(Ze,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(zt,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(ie,{placeholder:"...",value:d,onChange:_=>h(_.target.value),className:"pl-9"})]}),e.jsxs(Be,{value:f,onValueChange:x,children:[e.jsx(Le,{className:"w-full sm:w-[200px]",children:e.jsx(He,{placeholder:""})}),e.jsxs(Ue,{children:[e.jsx(te,{value:"all",children:""}),e.jsx(te,{value:"Group Management",children:""}),e.jsx(te,{value:"Entertainment & Interaction",children:""}),e.jsx(te,{value:"Utility Tools",children:""}),e.jsx(te,{value:"Content Generation",children:""}),e.jsx(te,{value:"Multimedia",children:""}),e.jsx(te,{value:"External Integration",children:""}),e.jsx(te,{value:"Data Analysis & Insights",children:""}),e.jsx(te,{value:"Other",children:""})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(jt,{id:"compatible-only",checked:w,onCheckedChange:_=>v(_===!0)}),e.jsx("label",{htmlFor:"compatible-only",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer",children:""})]})]})}),e.jsx(Ca,{value:j,onValueChange:p,className:"w-full",children:e.jsxs(pa,{className:"grid w-full grid-cols-3",children:[e.jsxs(ns,{value:"all",children:[" (",y.filter(_=>{if(!_.manifest)return!1;const me=d===""||_.manifest.name?.toLowerCase().includes(d.toLowerCase())||_.manifest.description?.toLowerCase().includes(d.toLowerCase())||_.manifest.keywords&&_.manifest.keywords.some(pe=>pe.toLowerCase().includes(d.toLowerCase())),re=f==="all"||_.manifest.categories&&_.manifest.categories.includes(f),le=!w||!$||je(_);return me&&re&&le}).length,")"]}),e.jsxs(ns,{value:"installed",children:[" (",y.filter(_=>{if(!_.manifest)return!1;const me=d===""||_.manifest.name?.toLowerCase().includes(d.toLowerCase())||_.manifest.description?.toLowerCase().includes(d.toLowerCase())||_.manifest.keywords&&_.manifest.keywords.some(pe=>pe.toLowerCase().includes(d.toLowerCase())),re=f==="all"||_.manifest.categories&&_.manifest.categories.includes(f),le=!w||!$||je(_);return _.installed&&me&&re&&le}).length,")"]}),e.jsxs(ns,{value:"updates",children:[" (",y.filter(_=>{if(!_.manifest)return!1;const me=d===""||_.manifest.name?.toLowerCase().includes(d.toLowerCase())||_.manifest.description?.toLowerCase().includes(d.toLowerCase())||_.manifest.keywords&&_.manifest.keywords.some(pe=>pe.toLowerCase().includes(d.toLowerCase())),re=f==="all"||_.manifest.categories&&_.manifest.categories.includes(f),le=!w||!$||je(_);return _.installed&&ye(_)&&me&&re&&le}).length,")"]})]})}),D&&D.stage==="loading"&&e.jsx(Ze,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(kt,{className:"h-4 w-4 animate-spin"}),e.jsxs("span",{className:"text-sm font-medium",children:[D.operation==="fetch"&&"",D.operation==="install"&&`${D.plugin_id?`: ${D.plugin_id}`:""}`,D.operation==="uninstall"&&`${D.plugin_id?`: ${D.plugin_id}`:""}`,D.operation==="update"&&`${D.plugin_id?`: ${D.plugin_id}`:""}`]})]}),e.jsxs("span",{className:"text-sm font-medium",children:[D.progress,"%"]})]}),e.jsx(wr,{value:D.progress,className:"h-2"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:D.message}),D.operation==="fetch"&&D.total_plugins>0&&e.jsxs("div",{className:"text-xs text-muted-foreground text-center",children:[" ",D.loaded_plugins," / ",D.total_plugins," "]})]})}),D&&D.stage==="error"&&D.error&&e.jsx(Ze,{className:"border-destructive bg-destructive/10",children:e.jsx(ys,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(_a,{className:"h-5 w-5 text-destructive"}),e.jsxs("div",{children:[e.jsx(ws,{className:"text-lg text-destructive",children:""}),e.jsx(ct,{className:"text-destructive/80",children:D.error})]})]})})}),k?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx(kt,{className:"h-8 w-8 animate-spin text-muted-foreground"}),e.jsx("span",{className:"ml-3 text-muted-foreground",children:"..."})]}):Y?e.jsx(Ze,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[e.jsx(_a,{className:"h-12 w-12 text-destructive mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:Y}),e.jsx(N,{onClick:()=>window.location.reload(),children:""})]})}):be.length===0?e.jsx(Ze,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[e.jsx(zt,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:d||f!=="all"?"":""})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:be.map(_=>e.jsxs(Ze,{className:"flex flex-col hover:shadow-lg transition-shadow h-full",children:[e.jsxs(ys,{children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx(ws,{className:"text-xl",children:_.manifest?.name||_.id}),e.jsxs("div",{className:"flex flex-col gap-1",children:[_.manifest?.categories&&_.manifest.categories[0]&&e.jsx($e,{variant:"secondary",className:"text-xs whitespace-nowrap",children:vp[_.manifest.categories[0]]||_.manifest.categories[0]}),Se(_)]})]}),e.jsx(ct,{className:"line-clamp-2",children:_.manifest?.description||""})]}),e.jsx(Ts,{className:"flex-1",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(rl,{className:"h-4 w-4"}),e.jsx("span",{children:(M[_.id]?.downloads??_.downloads??0).toLocaleString()})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ul,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),e.jsx("span",{children:(M[_.id]?.rating??_.rating??0).toFixed(1)})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[_.manifest?.keywords&&_.manifest.keywords.slice(0,3).map(me=>e.jsx($e,{variant:"outline",className:"text-xs",children:me},me)),_.manifest?.keywords&&_.manifest.keywords.length>3&&e.jsxs($e,{variant:"outline",className:"text-xs",children:["+",_.manifest.keywords.length-3]})]}),e.jsxs("div",{className:"text-xs text-muted-foreground pt-2 border-t space-y-1",children:[e.jsxs("div",{children:["v",_.manifest?.version||"unknown","  ",_.manifest?.author?.name||"Unknown"]}),_.manifest?.host_application&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{children:":"}),e.jsxs("span",{className:"font-medium",children:[_.manifest.host_application.min_version,_.manifest.host_application.max_version?` - ${_.manifest.host_application.max_version}`:" - "]})]})]})]})}),e.jsx(vg,{className:"pt-4",children:e.jsxs("div",{className:"flex items-center justify-end gap-2 w-full",children:[e.jsx(N,{variant:"outline",size:"sm",onClick:()=>c(_),children:""}),_.installed?ye(_)?e.jsxs(N,{size:"sm",disabled:!R?.installed,title:R?.installed?void 0:"Git ",onClick:()=>se(_),children:[e.jsx(Ct,{className:"h-4 w-4 mr-1"}),""]}):e.jsxs(N,{variant:"destructive",size:"sm",disabled:!R?.installed,title:R?.installed?void 0:"Git ",onClick:()=>E(_),children:[e.jsx(ts,{className:"h-4 w-4 mr-1"}),""]}):e.jsxs(N,{size:"sm",disabled:!R?.installed||D?.operation==="install"||$!==null&&!je(_),title:R?.installed?$!==null&&!je(_)?` ( ${_.manifest?.host_application?.min_version||""}${_.manifest?.host_application?.max_version?` - ${_.manifest.host_application.max_version}`:"+"} ${$?.version})`:void 0:"Git ",onClick:()=>K(_),children:[e.jsx(rl,{className:"h-4 w-4 mr-1"}),D?.operation==="install"&&D?.plugin_id===_.id?"...":""]})]})})]},_.id))}),e.jsx($s,{open:i!==null,onOpenChange:A,children:i&&i.manifest&&e.jsx(Hs,{className:"max-w-2xl max-h-[80vh] p-0 flex flex-col",children:e.jsx(ss,{className:"flex-1 overflow-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsx(qs,{children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"space-y-2 flex-1",children:[e.jsx(Gs,{className:"text-2xl",children:i.manifest.name}),e.jsxs(Is,{children:[": ",i.manifest.author?.name||"Unknown",i.manifest.author?.url&&e.jsx("a",{href:i.manifest.author.url,target:"_blank",rel:"noopener noreferrer",className:"ml-2 text-primary hover:underline",children:e.jsx(Xc,{className:"h-3 w-3 inline"})})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[i.manifest.categories&&i.manifest.categories[0]&&e.jsx($e,{variant:"secondary",children:vp[i.manifest.categories[0]]||i.manifest.categories[0]}),Se(i)]})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(O2,{pluginId:i.id}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:""}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["v",i.manifest?.version||"unknown"]}),i.installed&&i.installed_version&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:[": v",i.installed_version]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:(M[i.id]?.downloads??i.downloads??0).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:""}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ul,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[(M[i.id]?.rating??i.rating??0).toFixed(1)," (",M[i.id]?.rating_count??i.review_count??0,")"]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:i.manifest.license||"Unknown"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("p",{className:"text-sm font-medium",children:""}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[i.manifest.host_application?.min_version||"",i.manifest.host_application?.max_version?` - ${i.manifest.host_application.max_version}`:" - "]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:""}),e.jsx("div",{className:"flex flex-wrap gap-2",children:i.manifest.keywords&&i.manifest.keywords.map(_=>e.jsx($e,{variant:"outline",children:_},_))})]}),i.detailed_description&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-line",children:i.detailed_description})]}),!i.detailed_description&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:i.manifest.description||""})]}),e.jsxs("div",{className:"space-y-2",children:[i.manifest.homepage_url&&e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:": "}),e.jsx("a",{href:i.manifest.homepage_url,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:i.manifest.homepage_url})]}),i.manifest.repository_url&&e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:": "}),e.jsx("a",{href:i.manifest.repository_url,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:i.manifest.repository_url})]})]})]}),e.jsxs(at,{children:[i.manifest.homepage_url&&e.jsxs(N,{onClick:()=>window.open(i.manifest.homepage_url,"_blank"),children:[e.jsx(Xc,{className:"h-4 w-4 mr-2"}),""]}),i.manifest.repository_url&&e.jsxs(N,{variant:"outline",onClick:()=>window.open(i.manifest.repository_url,"_blank"),children:[e.jsx(Xc,{className:"h-4 w-4 mr-2"}),""]})]})]})})})})]})})}const Gu=UN,Vu=BN,Fu=HN;function L2({field:n,value:i,onChange:c}){const[d,h]=u.useState(!1);switch(n.ui_type){case"switch":return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(b,{children:n.label}),n.hint&&e.jsx("p",{className:"text-xs text-muted-foreground",children:n.hint})]}),e.jsx(Qe,{checked:!!i,onCheckedChange:c,disabled:n.disabled})]});case"number":return e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{children:n.label}),e.jsx(ie,{type:"number",value:i??n.default,onChange:f=>c(parseFloat(f.target.value)||0),min:n.min,max:n.max,step:n.step??1,placeholder:n.placeholder,disabled:n.disabled}),n.hint&&e.jsx("p",{className:"text-xs text-muted-foreground",children:n.hint})]});case"slider":return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(b,{children:n.label}),e.jsx("span",{className:"text-sm text-muted-foreground",children:i??n.default})]}),e.jsx(wa,{value:[i??n.default],onValueChange:f=>c(f[0]),min:n.min??0,max:n.max??100,step:n.step??1,disabled:n.disabled}),n.hint&&e.jsx("p",{className:"text-xs text-muted-foreground",children:n.hint})]});case"select":return e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{children:n.label}),e.jsxs(Be,{value:String(i??n.default),onValueChange:c,disabled:n.disabled,children:[e.jsx(Le,{children:e.jsx(He,{placeholder:n.placeholder??""})}),e.jsx(Ue,{children:n.choices?.map(f=>e.jsx(te,{value:String(f),children:String(f)},String(f)))})]}),n.hint&&e.jsx("p",{className:"text-xs text-muted-foreground",children:n.hint})]});case"textarea":return e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{children:n.label}),e.jsx(Bs,{value:i??n.default,onChange:f=>c(f.target.value),placeholder:n.placeholder,rows:n.rows??3,disabled:n.disabled}),n.hint&&e.jsx("p",{className:"text-xs text-muted-foreground",children:n.hint})]});case"password":return e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{children:n.label}),e.jsxs("div",{className:"relative",children:[e.jsx(ie,{type:d?"text":"password",value:i??"",onChange:f=>c(f.target.value),placeholder:n.placeholder,disabled:n.disabled,className:"pr-10"}),e.jsx(N,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full px-3",onClick:()=>h(!d),children:d?e.jsx(xr,{className:"h-4 w-4"}):e.jsx(Dt,{className:"h-4 w-4"})})]}),n.hint&&e.jsx("p",{className:"text-xs text-muted-foreground",children:n.hint})]});case"text":default:return e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{children:n.label}),e.jsx(ie,{type:"text",value:i??n.default??"",onChange:f=>c(f.target.value),placeholder:n.placeholder,maxLength:n.max_length,disabled:n.disabled}),n.hint&&e.jsx("p",{className:"text-xs text-muted-foreground",children:n.hint})]})}}function Np({section:n,config:i,onChange:c}){const[d,h]=u.useState(!n.collapsed),f=Object.entries(n.fields).filter(([,x])=>!x.hidden).sort(([,x],[,j])=>x.order-j.order);return e.jsx(Gu,{open:d,onOpenChange:h,children:e.jsxs(Ze,{children:[e.jsx(Vu,{asChild:!0,children:e.jsxs(ys,{className:"cursor-pointer hover:bg-muted/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[d?e.jsx(Bl,{className:"h-4 w-4 text-muted-foreground"}):e.jsx(ul,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(ws,{className:"text-lg",children:n.title})]}),e.jsxs($e,{variant:"secondary",className:"text-xs",children:[f.length," "]})]}),n.description&&e.jsx(ct,{className:"ml-6",children:n.description})]})}),e.jsx(Fu,{children:e.jsx(Ts,{className:"space-y-4 pt-0",children:f.map(([x,j])=>e.jsx(L2,{field:j,value:i[n.name]?.[x],onChange:p=>c(n.name,x,p),sectionName:n.name},x))})})]})})}function U2({plugin:n,onBack:i}){const{toast:c}=Vs(),[d,h]=u.useState(null),[f,x]=u.useState({}),[j,p]=u.useState({}),[w,v]=u.useState(!0),[y,S]=u.useState(!1),[k,O]=u.useState(!1),[Y,L]=u.useState(!1),R=u.useCallback(async()=>{v(!0);try{const[M,ne]=await Promise.all([_2(n.id),S2(n.id)]);h(M),x(ne),p(JSON.parse(JSON.stringify(ne)))}catch(M){c({title:"",description:M instanceof Error?M.message:"",variant:"destructive"})}finally{v(!1)}},[n.id,c]);u.useEffect(()=>{R()},[R]),u.useEffect(()=>{O(JSON.stringify(f)!==JSON.stringify(j))},[f,j]);const H=(M,ne,fe)=>{x(_e=>({..._e,[M]:{..._e[M]||{},[ne]:fe}}))},D=async()=>{S(!0);try{await C2(n.id,f),p(JSON.parse(JSON.stringify(f))),c({title:"",description:""})}catch(M){c({title:"",description:M instanceof Error?M.message:"",variant:"destructive"})}finally{S(!1)}},C=async()=>{try{await k2(n.id),c({title:"",description:""}),L(!1),R()}catch(M){c({title:"",description:M instanceof Error?M.message:"",variant:"destructive"})}},$=async()=>{try{const M=await T2(n.id);c({title:M.message,description:M.note}),R()}catch(M){c({title:"",description:M instanceof Error?M.message:"",variant:"destructive"})}};if(w)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(kt,{className:"h-8 w-8 animate-spin text-muted-foreground"})});if(!d)return e.jsxs("div",{className:"flex flex-col items-center justify-center h-64 space-y-4",children:[e.jsx(Sa,{className:"h-12 w-12 text-muted-foreground"}),e.jsx("p",{className:"text-muted-foreground",children:""}),e.jsxs(N,{onClick:i,variant:"outline",children:[e.jsx(ii,{className:"h-4 w-4 mr-2"}),""]})]});const G=Object.values(d.sections).sort((M,ne)=>M.order-ne.order),T=f.plugin?.enabled!==!1;return e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(N,{variant:"ghost",size:"icon",onClick:i,children:e.jsx(ii,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:d.plugin_info.name||n.manifest.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx($e,{variant:T?"default":"secondary",children:T?"":""}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["v",d.plugin_info.version||n.manifest.version]})]})]})]}),e.jsxs("div",{className:"flex gap-2 ml-10 sm:ml-0",children:[e.jsxs(N,{variant:"outline",size:"sm",onClick:$,children:[e.jsx(br,{className:"h-4 w-4 mr-2"}),T?"":""]}),e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>L(!0),children:[e.jsx(Zc,{className:"h-4 w-4 mr-2"}),""]}),e.jsxs(N,{size:"sm",onClick:D,disabled:!k||y,children:[y?e.jsx(kt,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(yr,{className:"h-4 w-4 mr-2"}),""]})]})]}),k&&e.jsx(Ze,{className:"border-orange-200 bg-orange-50 dark:bg-orange-950/20 dark:border-orange-900",children:e.jsx(Ts,{className:"py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(La,{className:"h-4 w-4 text-orange-600"}),e.jsx("p",{className:"text-sm text-orange-800 dark:text-orange-200",children:""})]})})}),d.layout.type==="tabs"&&d.layout.tabs.length>0?e.jsxs(Ca,{defaultValue:d.layout.tabs[0]?.id,children:[e.jsx(pa,{children:d.layout.tabs.map(M=>e.jsxs(ns,{value:M.id,children:[M.title,M.badge&&e.jsx($e,{variant:"secondary",className:"ml-2 text-xs",children:M.badge})]},M.id))}),d.layout.tabs.map(M=>e.jsx(Es,{value:M.id,className:"space-y-4 mt-4",children:M.sections.map(ne=>{const fe=d.sections[ne];return fe?e.jsx(Np,{section:fe,config:f,onChange:H},ne):null})},M.id))]}):e.jsx("div",{className:"space-y-4",children:G.map(M=>e.jsx(Np,{section:M,config:f,onChange:H},M.name))}),e.jsx($s,{open:Y,onOpenChange:L,children:e.jsxs(Hs,{children:[e.jsxs(qs,{children:[e.jsx(Gs,{children:""}),e.jsx(Is,{children:""})]}),e.jsxs(at,{children:[e.jsx(N,{variant:"outline",onClick:()=>L(!1),children:""}),e.jsx(N,{variant:"destructive",onClick:C,children:""})]})]})})]})}function B2(){const{toast:n}=Vs(),[i,c]=u.useState([]),[d,h]=u.useState(!0),[f,x]=u.useState(""),[j,p]=u.useState(null),w=async()=>{h(!0);try{const k=await dr();c(k)}catch(k){n({title:"",description:k instanceof Error?k.message:"",variant:"destructive"})}finally{h(!1)}};u.useEffect(()=>{w()},[]);const v=i.filter(k=>{const O=f.toLowerCase();return k.id.toLowerCase().includes(O)||k.manifest.name.toLowerCase().includes(O)||k.manifest.description?.toLowerCase().includes(O)}),y=i.length,S=0;return j?e.jsx(ss,{className:"h-full",children:e.jsx("div",{className:"p-4 sm:p-6",children:e.jsx(U2,{plugin:j,onBack:()=>p(null)})})}):e.jsx(ss,{className:"h-full",children:e.jsxs("div",{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:""}),e.jsx("p",{className:"text-muted-foreground mt-1 sm:mt-2 text-sm sm:text-base",children:""})]}),e.jsxs(N,{variant:"outline",size:"sm",onClick:w,children:[e.jsx(Ct,{className:`h-4 w-4 mr-2 ${d?"animate-spin":""}`}),""]})]}),e.jsxs("div",{className:"grid gap-4 grid-cols-1 xs:grid-cols-2 lg:grid-cols-3",children:[e.jsxs(Ze,{children:[e.jsxs(ys,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ws,{className:"text-sm font-medium",children:""}),e.jsx(dn,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(Ts,{children:[e.jsx("div",{className:"text-2xl font-bold",children:i.length}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:d?"...":""})]})]}),e.jsxs(Ze,{children:[e.jsxs(ys,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ws,{className:"text-sm font-medium",children:""}),e.jsx(fa,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(Ts,{children:[e.jsx("div",{className:"text-2xl font-bold",children:y}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:""})]})]}),e.jsxs(Ze,{children:[e.jsxs(ys,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ws,{className:"text-sm font-medium",children:""}),e.jsx(Sa,{className:"h-4 w-4 text-orange-600"})]}),e.jsxs(Ts,{children:[e.jsx("div",{className:"text-2xl font-bold",children:S}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:""})]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(zt,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(ie,{placeholder:"...",value:f,onChange:k=>x(k.target.value),className:"pl-9"})]}),e.jsxs(Ze,{children:[e.jsxs(ys,{children:[e.jsx(ws,{children:""}),e.jsx(ct,{children:""})]}),e.jsx(Ts,{children:d?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(kt,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):v.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 space-y-4",children:[e.jsx(dn,{className:"h-16 w-16 text-muted-foreground/50"}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("p",{className:"text-lg font-medium text-muted-foreground",children:f?"":""}),e.jsx("p",{className:"text-sm text-muted-foreground",children:f?"":""})]})]}):e.jsx("div",{className:"space-y-2",children:v.map(k=>e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border hover:bg-muted/50 cursor-pointer transition-colors",onClick:()=>p(k),children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsx("div",{className:"h-10 w-10 rounded-lg bg-primary/10 flex items-center justify-center flex-shrink-0",children:e.jsx(dn,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-medium truncate",children:k.manifest.name}),e.jsxs($e,{variant:"secondary",className:"text-xs flex-shrink-0",children:["v",k.manifest.version]})]}),e.jsx("p",{className:"text-sm text-muted-foreground truncate",children:k.manifest.description||""})]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e.jsx(N,{variant:"ghost",size:"sm",children:e.jsx(oi,{className:"h-4 w-4"})}),e.jsx(ul,{className:"h-4 w-4 text-muted-foreground"})]})]},k.id))})})]})]})})}function H2(){const n=ja(),{toast:i}=Vs(),[c,d]=u.useState([]),[h,f]=u.useState(!0),[x,j]=u.useState(null),[p,w]=u.useState(null),[v,y]=u.useState(!1),[S,k]=u.useState(!1),[O,Y]=u.useState({id:"",name:"",raw_prefix:"",clone_prefix:"",enabled:!0,priority:1}),L=u.useCallback(async()=>{try{f(!0),j(null);const T=localStorage.getItem("access-token"),M=await fetch("/api/webui/plugins/mirrors",{headers:{Authorization:`Bearer ${T}`}});if(!M.ok)throw new Error("");const ne=await M.json();d(ne.mirrors||[])}catch(T){const M=T instanceof Error?T.message:"";j(M),i({title:"",description:M,variant:"destructive"})}finally{f(!1)}},[i]);u.useEffect(()=>{L()},[L]);const R=async()=>{try{const T=localStorage.getItem("access-token"),M=await fetch("/api/webui/plugins/mirrors",{method:"POST",headers:{Authorization:`Bearer ${T}`,"Content-Type":"application/json"},body:JSON.stringify(O)});if(!M.ok){const ne=await M.json();throw new Error(ne.detail||"")}i({title:"",description:""}),y(!1),Y({id:"",name:"",raw_prefix:"",clone_prefix:"",enabled:!0,priority:1}),L()}catch(T){i({title:"",description:T instanceof Error?T.message:"",variant:"destructive"})}},H=async()=>{if(p)try{const T=localStorage.getItem("access-token");if(!(await fetch(`/api/webui/plugins/mirrors/${p.id}`,{method:"PUT",headers:{Authorization:`Bearer ${T}`,"Content-Type":"application/json"},body:JSON.stringify({name:O.name,raw_prefix:O.raw_prefix,clone_prefix:O.clone_prefix,enabled:O.enabled,priority:O.priority})})).ok)throw new Error("");i({title:"",description:""}),k(!1),w(null),L()}catch(T){i({title:"",description:T instanceof Error?T.message:"",variant:"destructive"})}},D=async T=>{if(confirm(""))try{const M=localStorage.getItem("access-token");if(!(await fetch(`/api/webui/plugins/mirrors/${T}`,{method:"DELETE",headers:{Authorization:`Bearer ${M}`}})).ok)throw new Error("");i({title:"",description:""}),L()}catch(M){i({title:"",description:M instanceof Error?M.message:"",variant:"destructive"})}},C=async T=>{try{const M=localStorage.getItem("access-token");if(!(await fetch(`/api/webui/plugins/mirrors/${T.id}`,{method:"PUT",headers:{Authorization:`Bearer ${M}`,"Content-Type":"application/json"},body:JSON.stringify({enabled:!T.enabled})})).ok)throw new Error("");L()}catch(M){i({title:"",description:M instanceof Error?M.message:"",variant:"destructive"})}},$=T=>{w(T),Y({id:T.id,name:T.name,raw_prefix:T.raw_prefix,clone_prefix:T.clone_prefix,enabled:T.enabled,priority:T.priority}),k(!0)},G=async(T,M)=>{const ne=M==="up"?T.priority-1:T.priority+1;if(!(ne<1))try{const fe=localStorage.getItem("access-token");if(!(await fetch(`/api/webui/plugins/mirrors/${T.id}`,{method:"PUT",headers:{Authorization:`Bearer ${fe}`,"Content-Type":"application/json"},body:JSON.stringify({priority:ne})})).ok)throw new Error("");L()}catch(fe){i({title:"",description:fe instanceof Error?fe.message:"",variant:"destructive"})}};return e.jsx(ss,{className:"h-full",children:e.jsxs("div",{className:"space-y-6 p-4 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(N,{variant:"ghost",size:"icon",onClick:()=>n({to:"/plugins"}),children:e.jsx(ii,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:" Git "})]})]}),e.jsxs(N,{onClick:()=>y(!0),children:[e.jsx(ot,{className:"h-4 w-4 mr-2"}),""]})]}),h?e.jsx(Ze,{className:"p-6",children:e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(kt,{className:"h-8 w-8 animate-spin text-primary"})})}):x?e.jsx(Ze,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[e.jsx(_a,{className:"h-12 w-12 text-destructive mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:""}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:x}),e.jsx(N,{onClick:L,children:""})]})}):e.jsxs(Ze,{children:[e.jsx("div",{className:"hidden md:block",children:e.jsxs(hn,{children:[e.jsx(xn,{children:e.jsxs(dt,{children:[e.jsx(Ie,{children:""}),e.jsx(Ie,{children:""}),e.jsx(Ie,{children:"ID"}),e.jsx(Ie,{children:""}),e.jsx(Ie,{className:"text-right",children:""})]})}),e.jsx(fn,{children:c.map(T=>e.jsxs(dt,{children:[e.jsx(Fe,{children:e.jsx(Qe,{checked:T.enabled,onCheckedChange:()=>C(T)})}),e.jsx(Fe,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:T.name}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Raw: ",T.raw_prefix]})]})}),e.jsx(Fe,{children:e.jsx($e,{variant:"outline",children:T.id})}),e.jsx(Fe,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-mono",children:T.priority}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx(N,{variant:"ghost",size:"icon",className:"h-5 w-5",onClick:()=>G(T,"up"),disabled:T.priority===1,children:e.jsx(pr,{className:"h-3 w-3"})}),e.jsx(N,{variant:"ghost",size:"icon",className:"h-5 w-5",onClick:()=>G(T,"down"),children:e.jsx(Bl,{className:"h-3 w-3"})})]})]})}),e.jsx(Fe,{className:"text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(N,{variant:"ghost",size:"icon",onClick:()=>$(T),children:e.jsx(on,{className:"h-4 w-4"})}),e.jsx(N,{variant:"ghost",size:"icon",onClick:()=>D(T.id),children:e.jsx(ts,{className:"h-4 w-4 text-destructive"})})]})})]},T.id))})]})}),e.jsx("div",{className:"md:hidden p-4 space-y-4",children:c.map(T=>e.jsx(Ze,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-semibold",children:T.name}),T.enabled&&e.jsx($e,{variant:"default",className:"text-xs",children:""})]}),e.jsx($e,{variant:"outline",className:"mt-1 text-xs",children:T.id})]}),e.jsx(Qe,{checked:T.enabled,onCheckedChange:()=>C(T)})]}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{className:"text-muted-foreground",children:[e.jsx("span",{className:"font-medium",children:"Raw: "}),e.jsx("span",{className:"break-all",children:T.raw_prefix})]}),e.jsxs("div",{className:"text-muted-foreground",children:[e.jsx("span",{className:"font-medium",children:": "}),e.jsx("span",{className:"font-mono",children:T.priority})]})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t",children:[e.jsxs(N,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>$(T),children:[e.jsx(on,{className:"h-4 w-4 mr-1"}),""]}),e.jsx(N,{variant:"outline",size:"sm",onClick:()=>G(T,"up"),disabled:T.priority===1,children:e.jsx(pr,{className:"h-4 w-4"})}),e.jsx(N,{variant:"outline",size:"sm",onClick:()=>G(T,"down"),children:e.jsx(Bl,{className:"h-4 w-4"})}),e.jsx(N,{variant:"destructive",size:"sm",onClick:()=>D(T.id),children:e.jsx(ts,{className:"h-4 w-4"})})]})]})},T.id))})]}),e.jsx($s,{open:v,onOpenChange:y,children:e.jsxs(Hs,{className:"max-w-lg",children:[e.jsxs(qs,{children:[e.jsx(Gs,{children:""}),e.jsx(Is,{children:" Git "})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"add-id",children:" ID *"}),e.jsx(ie,{id:"add-id",placeholder:": my-mirror",value:O.id,onChange:T=>Y({...O,id:T.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"add-name",children:" *"}),e.jsx(ie,{id:"add-name",placeholder:": ",value:O.name,onChange:T=>Y({...O,name:T.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"add-raw",children:"Raw  *"}),e.jsx(ie,{id:"add-raw",placeholder:"https://example.com/raw",value:O.raw_prefix,onChange:T=>Y({...O,raw_prefix:T.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"add-clone",children:" *"}),e.jsx(ie,{id:"add-clone",placeholder:"https://example.com/clone",value:O.clone_prefix,onChange:T=>Y({...O,clone_prefix:T.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"add-priority",children:""}),e.jsx(ie,{id:"add-priority",type:"number",min:"1",value:O.priority,onChange:T=>Y({...O,priority:parseInt(T.target.value)||1})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Qe,{id:"add-enabled",checked:O.enabled,onCheckedChange:T=>Y({...O,enabled:T})}),e.jsx(b,{htmlFor:"add-enabled",children:""})]})]}),e.jsxs(at,{children:[e.jsx(N,{variant:"outline",onClick:()=>y(!1),children:""}),e.jsx(N,{onClick:R,children:""})]})]})}),e.jsx($s,{open:S,onOpenChange:k,children:e.jsxs(Hs,{className:"max-w-lg",children:[e.jsxs(qs,{children:[e.jsx(Gs,{children:""}),e.jsx(Is,{children:""})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{children:" ID"}),e.jsx(ie,{value:O.id,disabled:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"edit-name",children:" *"}),e.jsx(ie,{id:"edit-name",value:O.name,onChange:T=>Y({...O,name:T.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"edit-raw",children:"Raw  *"}),e.jsx(ie,{id:"edit-raw",value:O.raw_prefix,onChange:T=>Y({...O,raw_prefix:T.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"edit-clone",children:" *"}),e.jsx(ie,{id:"edit-clone",value:O.clone_prefix,onChange:T=>Y({...O,clone_prefix:T.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"edit-priority",children:""}),e.jsx(ie,{id:"edit-priority",type:"number",min:"1",value:O.priority,onChange:T=>Y({...O,priority:parseInt(T.target.value)||1})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Qe,{id:"edit-enabled",checked:O.enabled,onCheckedChange:T=>Y({...O,enabled:T})}),e.jsx(b,{htmlFor:"edit-enabled",children:""})]})]}),e.jsxs(at,{children:[e.jsx(N,{variant:"outline",onClick:()=>k(!1),children:""}),e.jsx(N,{onClick:H,children:""})]})]})})]})})}const ur=u.forwardRef(({className:n,...i},c)=>e.jsx(Hp,{ref:c,className:X("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",n),...i}));ur.displayName=Hp.displayName;const q2=u.forwardRef(({className:n,...i},c)=>e.jsx(qp,{ref:c,className:X("aspect-square h-full w-full",n),...i}));q2.displayName=qp.displayName;const mr=u.forwardRef(({className:n,...i},c)=>e.jsx(Gp,{ref:c,className:X("flex h-full w-full items-center justify-center rounded-full bg-muted",n),...i}));mr.displayName=Gp.displayName;function G2(){return"webui_"+Math.random().toString(36).substr(2,9)+"_"+Date.now().toString(36)}function V2(){const n="maibot_webui_user_id";let i=localStorage.getItem(n);return i||(i=G2(),localStorage.setItem(n,i)),i}function F2(){return localStorage.getItem("maibot_webui_user_name")||"WebUI"}function $2(n){localStorage.setItem("maibot_webui_user_name",n)}const Vg="maibot_webui_virtual_tabs";function Q2(){try{const n=localStorage.getItem(Vg);if(n)return JSON.parse(n)}catch(n){console.error("[Chat] :",n)}return[]}function bp(n){try{localStorage.setItem(Vg,JSON.stringify(n))}catch(i){console.error("[Chat] :",i)}}function Y2(){const n={id:"webui-default",type:"webui",label:"WebUI",messages:[],isConnected:!1,isTyping:!1,sessionInfo:{}},i=()=>{const Re=Q2().map(ze=>{const Ye=ze.virtualConfig;return!Ye.groupId&&Ye.platform&&Ye.userId&&(Ye.groupId=`webui_virtual_group_${Ye.platform}_${Ye.userId}`),{id:ze.id,type:"virtual",label:ze.label,virtualConfig:Ye,messages:[],isConnected:!1,isTyping:!1,sessionInfo:{}}});return[n,...Re]},[c,d]=u.useState(i),[h,f]=u.useState("webui-default"),x=c.find(U=>U.id===h)||c[0],[j,p]=u.useState(""),[w,v]=u.useState(!1),[y,S]=u.useState(!0),[k,O]=u.useState(F2()),[Y,L]=u.useState(!1),[R,H]=u.useState(""),[D,C]=u.useState(!1),[$,G]=u.useState([]),[T,M]=u.useState([]),[ne,fe]=u.useState(!1),[_e,Se]=u.useState(!1),[je,ye]=u.useState(""),[be,A]=u.useState({platform:"",personId:"",userId:"",userName:"",groupName:"",groupId:""}),K=u.useRef(V2()),E=u.useRef(new Map),se=u.useRef(null),_=u.useRef(new Map),me=u.useRef(0),re=u.useRef(new Map),{toast:le}=Vs(),pe=U=>(me.current+=1,`${U}-${Date.now()}-${me.current}-${Math.random().toString(36).substr(2,9)}`),Ne=u.useCallback((U,Re)=>{d(ze=>ze.map(Ye=>Ye.id===U?{...Ye,...Re}:Ye))},[]),he=u.useCallback((U,Re)=>{d(ze=>ze.map(Ye=>Ye.id===U?{...Ye,messages:[...Ye.messages,Re]}:Ye))},[]),Q=u.useCallback(()=>{se.current?.scrollIntoView({behavior:"smooth"})},[]);u.useEffect(()=>{Q()},[x?.messages,Q]);const P=u.useCallback(async()=>{fe(!0);try{const U=await Te("/api/chat/platforms");if(console.log("[Chat] :",U.status,U.headers.get("content-type")),U.ok){const Re=U.headers.get("content-type");if(Re&&Re.includes("application/json")){const ze=await U.json();console.log("[Chat] :",ze),G(ze.platforms||[])}else{const ze=await U.text();console.error("[Chat] :  JSON :",ze.substring(0,200)),le({title:"",description:" MaiBot ",variant:"destructive"})}}else console.error("[Chat] : HTTP",U.status),le({title:"",description:`: ${U.status}`,variant:"destructive"})}catch(U){console.error("[Chat] :",U),le({title:"",description:"",variant:"destructive"})}finally{fe(!1)}},[le]),q=u.useCallback(async(U,Re)=>{Se(!0);try{const ze=new URLSearchParams;U&&ze.append("platform",U),Re&&ze.append("search",Re),ze.append("limit","50");const Ye=await Te(`/api/chat/persons?${ze.toString()}`);if(Ye.ok){const zs=Ye.headers.get("content-type");if(zs&&zs.includes("application/json")){const We=await Ye.json();M(We.persons||[])}else console.error("[Chat] :  JSON ")}}catch(ze){console.error("[Chat] :",ze)}finally{Se(!1)}},[]);u.useEffect(()=>{be.platform&&q(be.platform,je)},[be.platform,je,q]);const W=u.useCallback(async(U,Re)=>{S(!0);try{const ze=new URLSearchParams;ze.append("user_id",K.current),ze.append("limit","50"),Re&&ze.append("group_id",Re);const Ye=`/api/chat/history?${ze.toString()}`;console.log("[Chat] :",Ye);const zs=await Te(Ye);if(zs.ok){const We=await zs.text();try{const nt=JSON.parse(We);if(nt.messages&&nt.messages.length>0){const vs=nt.messages.map(ve=>({id:ve.id,type:ve.type,content:ve.content,timestamp:ve.timestamp,sender:{name:ve.sender_name||(ve.is_bot?"":"WebUI"),user_id:ve.user_id,is_bot:ve.is_bot}}));Ne(U,{messages:vs});const ke=re.current.get(U)||new Set;vs.forEach(ve=>{if(ve.type==="bot"){const is=`bot-${ve.content}-${Math.floor(ve.timestamp*1e3)}`;ke.add(is)}}),re.current.set(U,ke)}}catch(nt){console.error("[Chat] JSON :",nt)}}}catch(ze){console.error("[Chat] :",ze)}finally{S(!1)}},[Ne]),Ce=u.useCallback((U,Re,ze)=>{const Ye=E.current.get(U);if(Ye?.readyState===WebSocket.OPEN||Ye?.readyState===WebSocket.CONNECTING){console.log(`[Tab ${U}] WebSocket `);return}v(!0);const zs=window.location.protocol==="https:"?"wss:":"ws:",We=new URLSearchParams;Re==="virtual"&&ze?(We.append("user_id",ze.userId),We.append("user_name",ze.userName),We.append("platform",ze.platform),We.append("person_id",ze.personId),We.append("group_name",ze.groupName||"WebUI"),ze.groupId&&We.append("group_id",ze.groupId)):(We.append("user_id",K.current),We.append("user_name",k));const nt=`${zs}//${window.location.host}/api/chat/ws?${We.toString()}`;console.log(`[Tab ${U}]  WebSocket:`,nt);try{const vs=new WebSocket(nt);E.current.set(U,vs),vs.onopen=()=>{Ne(U,{isConnected:!0}),v(!1),console.log(`[Tab ${U}] WebSocket `)},vs.onmessage=ke=>{try{const ve=JSON.parse(ke.data);switch(ve.type){case"session_info":Ne(U,{sessionInfo:{session_id:ve.session_id,user_id:ve.user_id,user_name:ve.user_name,bot_name:ve.bot_name}});break;case"system":he(U,{id:pe("sys"),type:"system",content:ve.content||"",timestamp:ve.timestamp||Date.now()/1e3});break;case"user_message":{const is=ve.sender?.user_id,_s=Re==="virtual"&&ze?ze.userId:K.current;if(is===_s)break;he(U,{id:ve.message_id||pe("user"),type:"user",content:ve.content||"",timestamp:ve.timestamp||Date.now()/1e3,sender:ve.sender});break}case"bot_message":{Ne(U,{isTyping:!1});const is=re.current.get(U)||new Set,_s=`bot-${ve.content}-${Math.floor((ve.timestamp||0)*1e3)}`;if(is.has(_s))break;if(is.add(_s),re.current.set(U,is),is.size>100){const At=is.values().next().value;At&&is.delete(At)}d(At=>At.map(Ps=>{if(Ps.id!==U)return Ps;const Ys=Ps.messages.filter(Et=>Et.type!=="thinking");return{...Ps,messages:[...Ys,{id:pe("bot"),type:"bot",content:ve.content||"",timestamp:ve.timestamp||Date.now()/1e3,sender:ve.sender}]}}));break}case"typing":Ne(U,{isTyping:ve.is_typing||!1});break;case"error":d(is=>is.map(_s=>{if(_s.id!==U)return _s;const At=_s.messages.filter(Ps=>Ps.type!=="thinking");return{..._s,messages:[...At,{id:pe("error"),type:"error",content:ve.content||"",timestamp:ve.timestamp||Date.now()/1e3}]}})),le({title:"",description:ve.content,variant:"destructive"});break;case"pong":break;case"history":{const is=ve.messages||[];if(is.length>0){const _s=re.current.get(U)||new Set,At=is.map(Ps=>{const Ys=Ps.is_bot||!1,Et=Ps.id||pe(Ys?"bot":"user"),Rt=`${Ys?"bot":"user"}-${Ps.content}-${Math.floor(Ps.timestamp*1e3)}`;return _s.add(Rt),{id:Et,type:Ys?"bot":"user",content:Ps.content,timestamp:Ps.timestamp,sender:{name:Ps.sender_name||(Ys?"":""),user_id:Ps.sender_id,is_bot:Ys}}});re.current.set(U,_s),Ne(U,{messages:At}),console.log(`[Tab ${U}]  ${At.length} `)}break}default:console.log(":",ve.type)}}catch(ve){console.error(":",ve)}},vs.onclose=()=>{Ne(U,{isConnected:!1}),v(!1),E.current.delete(U),console.log(`[Tab ${U}] WebSocket `);const ke=_.current.get(U);ke&&clearTimeout(ke);const ve=window.setTimeout(()=>{if(!Me.current){const is=c.find(_s=>_s.id===U);is&&Ce(U,is.type,is.virtualConfig)}},5e3);_.current.set(U,ve)},vs.onerror=ke=>{console.error(`[Tab ${U}] WebSocket :`,ke),v(!1)}}catch(vs){console.error(`[Tab ${U}]  WebSocket :`,vs),v(!1)}},[k,Ne,he,le,c]),Me=u.useRef(!1);u.useEffect(()=>{Me.current=!1;const U=E.current,Re=_.current,ze=re.current;W("webui-default");const Ye=setTimeout(()=>{Me.current||(Ce("webui-default","webui"),c.forEach(We=>{We.type==="virtual"&&We.virtualConfig&&(ze.set(We.id,new Set),setTimeout(()=>{Me.current||Ce(We.id,"virtual",We.virtualConfig)},200))}))},100),zs=setInterval(()=>{U.forEach(We=>{We.readyState===WebSocket.OPEN&&We.send(JSON.stringify({type:"ping"}))})},3e4);return()=>{Me.current=!0,clearTimeout(Ye),clearInterval(zs),Re.forEach(We=>{clearTimeout(We)}),Re.clear(),U.forEach(We=>{We.close()}),U.clear()}},[]);const ce=u.useCallback(()=>{const U=E.current.get(h);if(!j.trim()||!U||U.readyState!==WebSocket.OPEN)return;const Re=x?.type==="virtual"&&x.virtualConfig?.userName||k,ze=j.trim(),Ye=Date.now()/1e3;U.send(JSON.stringify({type:"message",content:ze,user_name:Re}));const zs={id:pe("user"),type:"user",content:ze,timestamp:Ye,sender:{name:Re,is_bot:!1}};he(h,zs);const We={id:pe("thinking"),type:"thinking",content:"",timestamp:Ye+.001,sender:{name:x?.sessionInfo.bot_name||"",is_bot:!0}};he(h,We),p("")},[j,k,h,x,he]),De=U=>{U.key==="Enter"&&!U.shiftKey&&(U.preventDefault(),ce())},Fs=()=>{H(k),L(!0)},Qs=()=>{const U=R.trim()||"WebUI";O(U),$2(U),L(!1);const Re=E.current.get(h);Re?.readyState===WebSocket.OPEN&&Re.send(JSON.stringify({type:"update_nickname",user_name:U}))},ue=()=>{H(""),L(!1)},Ee=U=>new Date(U*1e3).toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"}),as=()=>{const U=E.current.get(h);U&&(U.close(),E.current.delete(h)),Ce(h,x?.type||"webui",x?.virtualConfig)},Ke=()=>{A({platform:"",personId:"",userId:"",userName:"",groupName:"",groupId:""}),ye(""),P(),C(!0)},lt=()=>{if(!be.platform||!be.personId){le({title:"",description:"",variant:"destructive"});return}const U=`webui_virtual_group_${be.platform}_${be.userId}`,Re=`virtual-${be.platform}-${be.userId}-${Date.now()}`,ze=be.userName||be.userId,Ye={id:Re,type:"virtual",label:ze,virtualConfig:{...be,groupId:U},messages:[],isConnected:!1,isTyping:!1,sessionInfo:{}};d(zs=>{const We=[...zs,Ye],nt=We.filter(vs=>vs.type==="virtual"&&vs.virtualConfig).map(vs=>({id:vs.id,label:vs.label,virtualConfig:vs.virtualConfig,createdAt:Date.now()}));return bp(nt),We}),f(Re),C(!1),re.current.set(Re,new Set),setTimeout(()=>{Ce(Re,"virtual",be)},100),le({title:"",description:` ${ze} `})},Ot=(U,Re)=>{if(Re?.stopPropagation(),U==="webui-default")return;const ze=E.current.get(U);ze&&(ze.close(),E.current.delete(U));const Ye=_.current.get(U);Ye&&(clearTimeout(Ye),_.current.delete(U)),re.current.delete(U),d(zs=>{const We=zs.filter(vs=>vs.id!==U),nt=We.filter(vs=>vs.type==="virtual"&&vs.virtualConfig).map(vs=>({id:vs.id,label:vs.label,virtualConfig:vs.virtualConfig,createdAt:Date.now()}));return bp(nt),We}),h===U&&f("webui-default")},bt=U=>{f(U)},Pe=U=>{A(Re=>({...Re,personId:U.person_id,userId:U.user_id,userName:U.nickname||U.person_name}))};return e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsx($s,{open:D,onOpenChange:C,children:e.jsxs(Hs,{className:"sm:max-w-[500px] max-h-[85vh] overflow-hidden flex flex-col",children:[e.jsxs(qs,{children:[e.jsxs(Gs,{className:"flex items-center gap-2",children:[e.jsx(wu,{className:"h-5 w-5"}),""]}),e.jsx(Is,{children:""})]}),e.jsxs("div",{className:"space-y-4 flex-1 overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(b,{className:"flex items-center gap-2",children:[e.jsx(Lu,{className:"h-4 w-4"}),""]}),e.jsxs(Be,{value:be.platform,onValueChange:U=>{A(Re=>({...Re,platform:U,personId:"",userId:"",userName:""})),M([])},children:[e.jsx(Le,{disabled:ne,children:e.jsx(He,{placeholder:ne?"...":""})}),e.jsx(Ue,{children:$.map(U=>e.jsxs(te,{value:U.platform,children:[U.platform," (",U.count," )"]},U.platform))})]})]}),be.platform&&e.jsxs("div",{className:"space-y-2 flex-1 overflow-hidden flex flex-col",children:[e.jsxs(b,{className:"flex items-center gap-2",children:[e.jsx(Uu,{className:"h-4 w-4"}),""]}),e.jsxs("div",{className:"relative",children:[e.jsx(zt,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(ie,{placeholder:"...",value:je,onChange:U=>ye(U.target.value),className:"pl-9"})]}),e.jsx(ss,{className:"h-[250px] border rounded-md",children:e.jsx("div",{className:"p-2",children:_e?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(kt,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):T.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-muted-foreground",children:[e.jsx(Uu,{className:"h-8 w-8 mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:""})]}):e.jsx("div",{className:"space-y-1",children:T.map(U=>e.jsxs("button",{onClick:()=>Pe(U),className:X("w-full flex items-center gap-3 p-2 rounded-md text-left transition-colors",be.personId===U.person_id?"bg-primary text-primary-foreground":"hover:bg-muted"),children:[e.jsx(ur,{className:"h-8 w-8 shrink-0",children:e.jsx(mr,{className:X("text-xs",be.personId===U.person_id?"bg-primary-foreground/20":"bg-muted"),children:(U.nickname||U.person_name||"?").charAt(0)})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"font-medium truncate",children:U.nickname||U.person_name}),e.jsxs("div",{className:X("text-xs truncate",be.personId===U.person_id?"text-primary-foreground/70":"text-muted-foreground"),children:["ID: ",U.user_id,U.is_known&&"  "]})]})]},U.person_id))})})})]}),be.personId&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{children:""}),e.jsx(ie,{placeholder:"WebUI",value:be.groupName,onChange:U=>A(Re=>({...Re,groupName:U.target.value}))}),e.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})]}),e.jsxs(at,{className:"gap-2 sm:gap-0",children:[e.jsx(N,{variant:"outline",onClick:()=>C(!1),children:""}),e.jsx(N,{onClick:lt,disabled:!be.platform||!be.personId,children:""})]})]})}),e.jsx("div",{className:"shrink-0 border-b bg-muted/30",children:e.jsx("div",{className:"max-w-4xl mx-auto px-2 sm:px-4",children:e.jsxs("div",{className:"flex items-center gap-1 overflow-x-auto py-1.5 scrollbar-thin",children:[c.map(U=>e.jsxs("button",{onClick:()=>bt(U.id),className:X("flex items-center gap-1.5 px-3 py-1.5 rounded-md text-sm whitespace-nowrap transition-colors","hover:bg-muted",h===U.id?"bg-background shadow-sm border":"text-muted-foreground"),children:[U.type==="webui"?e.jsx(un,{className:"h-3.5 w-3.5"}):e.jsx(wu,{className:"h-3.5 w-3.5"}),e.jsx("span",{className:"max-w-[100px] truncate",children:U.label}),e.jsx("span",{className:X("w-1.5 h-1.5 rounded-full",U.isConnected?"bg-green-500":"bg-muted-foreground/50")}),U.id!=="webui-default"&&e.jsx("button",{onClick:Re=>Ot(U.id,Re),className:"ml-0.5 p-0.5 rounded hover:bg-muted-foreground/20",children:e.jsx(dl,{className:"h-3 w-3"})})]},U.id)),e.jsx("button",{onClick:Ke,className:"flex items-center gap-1 px-2 py-1.5 rounded-md text-sm text-muted-foreground hover:bg-muted hover:text-foreground transition-colors",title:"",children:e.jsx(ot,{className:"h-3.5 w-3.5"})})]})})}),e.jsx("div",{className:"shrink-0 border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:e.jsxs("div",{className:"p-3 sm:p-4 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0",children:[e.jsx(ur,{className:"h-8 w-8 sm:h-10 sm:w-10 shrink-0",children:e.jsx(mr,{className:"bg-primary/10 text-primary",children:e.jsx(cr,{className:"h-4 w-4 sm:h-5 sm:w-5"})})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-base sm:text-lg font-semibold truncate",children:x?.sessionInfo.bot_name||""}),e.jsx("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground",children:x?.isConnected?e.jsxs(e.Fragment,{children:[e.jsx(Rb,{className:"h-3 w-3 text-green-500"}),e.jsx("span",{className:"text-green-600 dark:text-green-400",children:""})]}):w?e.jsxs(e.Fragment,{children:[e.jsx(kt,{className:"h-3 w-3 animate-spin"}),e.jsx("span",{children:"..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Lb,{className:"h-3 w-3 text-red-500"}),e.jsx("span",{className:"text-red-600 dark:text-red-400",children:""})]})})]})]}),e.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[y&&e.jsx(kt,{className:"h-4 w-4 animate-spin text-muted-foreground"}),e.jsx(N,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:as,disabled:w,title:"",children:e.jsx(Ct,{className:X("h-4 w-4",w&&"animate-spin")})})]})]}),e.jsx("div",{className:"hidden sm:flex items-center gap-2 mt-2 text-sm text-muted-foreground",children:x?.type==="virtual"&&x.virtualConfig?e.jsxs(e.Fragment,{children:[e.jsx(wu,{className:"h-3 w-3 text-primary"}),e.jsx("span",{children:""}),e.jsx("span",{className:"font-medium text-primary",children:x.virtualConfig.userName}),e.jsxs("span",{className:"text-xs",children:["(",x.virtualConfig.platform,")"]}),x.virtualConfig.groupName&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"mx-1",children:""}),e.jsxs("span",{className:"text-xs",children:["",x.virtualConfig.groupName]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(Wc,{className:"h-3 w-3"}),e.jsx("span",{children:""}),Y?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{value:R,onChange:U=>H(U.target.value),onKeyDown:U=>{U.key==="Enter"&&Qs(),U.key==="Escape"&&ue()},className:"h-7 w-32",placeholder:"",autoFocus:!0}),e.jsx(N,{size:"sm",variant:"ghost",className:"h-7 px-2",onClick:Qs,children:""}),e.jsx(N,{size:"sm",variant:"ghost",className:"h-7 px-2",onClick:ue,children:""})]}):e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"font-medium text-foreground",children:k}),e.jsx(N,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0",onClick:Fs,title:"",children:e.jsx(Ub,{className:"h-3 w-3"})})]})]})})]})}),e.jsx("div",{className:"flex-1 overflow-hidden",children:e.jsx(ss,{className:"h-full",children:e.jsxs("div",{className:"p-3 sm:p-4 max-w-4xl mx-auto space-y-3 sm:space-y-4",children:[x?.messages.length===0&&!y&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-muted-foreground",children:[e.jsx(cr,{className:"h-12 w-12 mb-4 opacity-50"}),e.jsxs("p",{className:"text-sm",children:[" ",x?.sessionInfo.bot_name||""," "]})]}),x?.messages.map(U=>e.jsxs("div",{className:X("flex gap-2 sm:gap-3",U.type==="user"&&"flex-row-reverse",U.type==="system"&&"justify-center",U.type==="error"&&"justify-center"),children:[U.type==="system"&&e.jsx("div",{className:"text-xs text-muted-foreground bg-muted/50 px-3 py-1 rounded-full max-w-[90%]",children:U.content}),U.type==="error"&&e.jsx("div",{className:"text-xs text-red-600 dark:text-red-400 bg-red-100 dark:bg-red-900/30 px-3 py-1 rounded-full max-w-[90%]",children:U.content}),U.type==="thinking"&&e.jsxs(e.Fragment,{children:[e.jsx(ur,{className:"h-7 w-7 sm:h-8 sm:w-8 shrink-0",children:e.jsx(mr,{className:"bg-primary/10 text-primary",children:e.jsx(cr,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})})}),e.jsxs("div",{className:"flex flex-col gap-1 max-w-[75%] sm:max-w-[70%]",children:[e.jsx("div",{className:"flex items-center gap-2 text-[10px] sm:text-xs text-muted-foreground",children:e.jsx("span",{className:"hidden sm:inline",children:U.sender?.name||x?.sessionInfo.bot_name})}),e.jsx("div",{className:"bg-muted rounded-2xl rounded-tl-sm px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex gap-1",children:[e.jsx("span",{className:"w-2 h-2 bg-primary/60 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),e.jsx("span",{className:"w-2 h-2 bg-primary/60 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),e.jsx("span",{className:"w-2 h-2 bg-primary/60 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),e.jsx("span",{className:"text-xs text-muted-foreground ml-1",children:"..."})]})})]})]}),(U.type==="user"||U.type==="bot")&&e.jsxs(e.Fragment,{children:[e.jsx(ur,{className:"h-7 w-7 sm:h-8 sm:w-8 shrink-0",children:e.jsx(mr,{className:X("text-xs",U.type==="bot"?"bg-primary/10 text-primary":"bg-secondary text-secondary-foreground"),children:U.type==="bot"?e.jsx(cr,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}):e.jsx(Wc,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})})}),e.jsxs("div",{className:X("flex flex-col gap-1 max-w-[75%] sm:max-w-[70%]",U.type==="user"&&"items-end"),children:[e.jsxs("div",{className:"flex items-center gap-2 text-[10px] sm:text-xs text-muted-foreground",children:[e.jsx("span",{className:"hidden sm:inline",children:U.sender?.name||(U.type==="bot"?x?.sessionInfo.bot_name:k)}),e.jsx("span",{children:Ee(U.timestamp)})]}),e.jsx("div",{className:X("rounded-2xl px-3 py-2 text-sm whitespace-pre-wrap break-words",U.type==="bot"?"bg-muted rounded-tl-sm":"bg-primary text-primary-foreground rounded-tr-sm"),children:U.content})]})]})]},U.id)),e.jsx("div",{ref:se})]})})}),e.jsx("div",{className:"shrink-0 border-t bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:e.jsx("div",{className:"p-3 sm:p-4 max-w-4xl mx-auto",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ie,{value:j,onChange:U=>p(U.target.value),onKeyDown:De,placeholder:x?.isConnected?"...":"...",disabled:!x?.isConnected,className:"flex-1 h-10 sm:h-10"}),e.jsx(N,{onClick:ce,disabled:!x?.isConnected||!j.trim(),size:"icon",className:"h-10 w-10 shrink-0",children:e.jsx(Bb,{className:"h-4 w-4"})})]})})})]})}function X2(){const n=ja(),[i,c]=u.useState(!0);return u.useEffect(()=>{let d=!1;return(async()=>{try{const f=await Iu();!d&&!f&&n({to:"/auth"})}catch{d||n({to:"/auth"})}finally{d||c(!1)}})(),()=>{d=!0}},[n]),{checking:i}}async function K2(){return await Iu()}const J2=ci("pointer-events-none inline-flex select-none items-center gap-1 rounded border bg-muted px-1.5 font-mono font-medium opacity-100",{variants:{size:{sm:"h-5 text-[10px]",default:"h-6 text-xs",lg:"h-7 text-sm"}},defaultVariants:{size:"default"}}),Fg=u.forwardRef(({className:n,size:i,abbrTitle:c,children:d,...h},f)=>e.jsx("kbd",{className:X(J2({size:i,className:n})),ref:f,...h,children:c?e.jsx("abbr",{title:c,children:d}):d}));Fg.displayName="Kbd";const Z2=[{icon:ao,title:"",description:"",path:"/",category:""},{icon:Ra,title:"",description:"",path:"/config/bot",category:""},{icon:fg,title:"",description:"",path:"/config/modelProvider",category:""},{icon:pg,title:"",description:"",path:"/config/model",category:""},{icon:$u,title:"",description:"",path:"/resource/emoji",category:""},{icon:un,title:"",description:"",path:"/resource/expression",category:""},{icon:gg,title:"",description:"",path:"/resource/person",category:""},{icon:ri,title:"",description:"",path:"/resource/jargon",category:""},{icon:Hb,title:"",description:"",path:"/statistics",category:""},{icon:dn,title:"",description:"",path:"/plugins",category:""},{icon:Qu,title:"",description:"",path:"/logs",category:""},{icon:oi,title:"",description:"",path:"/settings",category:""}];function I2({open:n,onOpenChange:i}){const[c,d]=u.useState(""),[h,f]=u.useState(0),x=ja(),j=Z2.filter(v=>v.title.toLowerCase().includes(c.toLowerCase())||v.description.toLowerCase().includes(c.toLowerCase())||v.category.toLowerCase().includes(c.toLowerCase()));u.useEffect(()=>{n&&(d(""),f(0))},[n]);const p=u.useCallback(v=>{x({to:v}),i(!1)},[x,i]),w=u.useCallback(v=>{v.key==="ArrowDown"?(v.preventDefault(),f(y=>(y+1)%j.length)):v.key==="ArrowUp"?(v.preventDefault(),f(y=>(y-1+j.length)%j.length)):v.key==="Enter"&&j[h]&&(v.preventDefault(),p(j[h].path))},[j,h,p]);return e.jsx($s,{open:n,onOpenChange:i,children:e.jsxs(Hs,{className:"max-w-2xl p-0 gap-0",children:[e.jsxs(qs,{className:"px-4 pt-4 pb-0",children:[e.jsx(Gs,{className:"sr-only",children:""}),e.jsxs("div",{className:"relative",children:[e.jsx(zt,{className:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 text-muted-foreground"}),e.jsx(ie,{value:c,onChange:v=>{d(v.target.value),f(0)},onKeyDown:w,placeholder:"...",className:"h-12 pl-11 text-base border-0 focus-visible:ring-0 shadow-none",autoFocus:!0})]})]}),e.jsx("div",{className:"border-t",children:e.jsx(ss,{className:"h-[400px]",children:j.length>0?e.jsx("div",{className:"p-2",children:j.map((v,y)=>{const S=v.icon;return e.jsxs("button",{onClick:()=>p(v.path),onMouseEnter:()=>f(y),className:X("w-full flex items-center gap-3 px-3 py-2.5 rounded-md text-left transition-colors",y===h?"bg-accent text-accent-foreground":"hover:bg-accent/50"),children:[e.jsx(S,{className:"h-5 w-5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-sm",children:v.title}),e.jsx("div",{className:"text-xs text-muted-foreground truncate",children:v.description})]}),e.jsx("div",{className:"text-xs text-muted-foreground px-2 py-1 bg-muted rounded",children:v.category})]},v.path)})}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx(zt,{className:"h-12 w-12 text-muted-foreground/50 mb-4"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:c?"":""})]})})}),e.jsx("div",{className:"border-t px-4 py-3 flex items-center justify-between text-xs text-muted-foreground",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("kbd",{className:"px-1.5 py-0.5 bg-muted rounded border",children:""}),e.jsx("kbd",{className:"px-1.5 py-0.5 bg-muted rounded border",children:""}),""]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("kbd",{className:"px-1.5 py-0.5 bg-muted rounded border",children:"Enter"}),""]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("kbd",{className:"px-1.5 py-0.5 bg-muted rounded border",children:"Esc"}),""]})]})})]})})}const P2=cb,W2=ob,e_=db,$g=u.forwardRef(({className:n,sideOffset:i=4,...c},d)=>e.jsx(rb,{children:e.jsx(sg,{ref:d,sideOffset:i,className:X("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",n),...c})}));$g.displayName=sg.displayName;function s_({children:n}){const{checking:i}=X2(),[c,d]=u.useState(!0),[h,f]=u.useState(!1),[x,j]=u.useState(!1),{theme:p,setTheme:w}=Xu(),v=dN();if(u.useEffect(()=>{const Y=L=>{(L.metaKey||L.ctrlKey)&&L.key==="k"&&(L.preventDefault(),j(!0))};return window.addEventListener("keydown",Y),()=>window.removeEventListener("keydown",Y)},[]),i)return e.jsx("div",{className:"flex h-screen items-center justify-center bg-background",children:e.jsx("div",{className:"text-muted-foreground",children:"..."})});const y=[{title:"",items:[{icon:ao,label:"",path:"/"}]},{title:"",items:[{icon:Ra,label:"",path:"/config/bot"},{icon:fg,label:"AI",path:"/config/modelProvider",tourId:"sidebar-model-provider"},{icon:pg,label:"",path:"/config/model",tourId:"sidebar-model-management"},{icon:Zf,label:"",path:"/config/adapter"}]},{title:"",items:[{icon:$u,label:"",path:"/resource/emoji"},{icon:un,label:"",path:"/resource/expression"},{icon:ri,label:"",path:"/resource/jargon"},{icon:gg,label:"",path:"/resource/person"},{icon:xg,label:"",path:"/resource/knowledge-graph"}]},{title:"",items:[{icon:dn,label:"",path:"/plugins"},{icon:Zf,label:"",path:"/plugin-config"},{icon:Qu,label:"",path:"/logs"},{icon:un,label:"",path:"/chat"}]},{title:"",items:[{icon:oi,label:"",path:"/settings"}]}],k=p==="system"?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":p,O=async()=>{await c0()};return e.jsx(P2,{delayDuration:300,children:e.jsxs("div",{className:"flex h-screen overflow-hidden",children:[e.jsxs("aside",{className:X("fixed inset-y-0 left-0 z-50 flex flex-col border-r bg-card transition-all duration-300 lg:relative lg:z-0","w-64 lg:w-auto",c?"lg:w-64":"lg:w-16",h?"translate-x-0":"-translate-x-full lg:translate-x-0"),children:[e.jsx("div",{className:"flex h-16 items-center border-b px-4",children:e.jsxs("div",{className:X("relative flex items-center justify-center flex-1 transition-all overflow-hidden","lg:flex-1",!c&&"lg:flex-none lg:w-8"),children:[e.jsxs("div",{className:X("flex items-baseline gap-2",!c&&"lg:hidden"),children:[e.jsx("span",{className:"font-bold text-xl text-primary-gradient whitespace-nowrap",children:"MaiBot WebUI"}),e.jsx("span",{className:"text-xs text-primary/60 whitespace-nowrap",children:Yy()})]}),!c&&e.jsx("span",{className:"hidden lg:block font-bold text-primary-gradient text-2xl",children:"M"})]})}),e.jsx(ss,{className:X("flex-1 overflow-x-hidden",!c&&"lg:w-16"),children:e.jsx("nav",{className:X("p-4",!c&&"lg:p-2 lg:w-16"),children:e.jsx("ul",{className:X("space-y-6",!c&&"lg:space-y-3 lg:w-full"),children:y.map((Y,L)=>e.jsxs("li",{children:[e.jsx("div",{className:X("px-3 h-[1.25rem]","mb-2",!c&&"lg:mb-1 lg:invisible"),children:e.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground/60 whitespace-nowrap",children:Y.title})}),!c&&L>0&&e.jsx("div",{className:"hidden lg:block mb-2 border-t border-border"}),e.jsx("ul",{className:"space-y-1",children:Y.items.map(R=>{const H=v({to:R.path}),D=R.icon,C=e.jsxs(e.Fragment,{children:[H&&e.jsx("div",{className:"absolute left-0 top-1/2 h-8 w-1 -translate-y-1/2 rounded-r-full bg-primary transition-opacity duration-300"}),e.jsxs("div",{className:X("flex items-center transition-all duration-300",c?"gap-3":"gap-3 lg:gap-0"),children:[e.jsx(D,{className:X("h-5 w-5 flex-shrink-0",H&&"text-primary"),strokeWidth:2,fill:"none"}),e.jsx("span",{className:X("text-sm font-medium whitespace-nowrap transition-all duration-300",H&&"font-semibold",c?"opacity-100 max-w-[200px]":"opacity-100 max-w-[200px] lg:opacity-0 lg:max-w-0 lg:overflow-hidden"),children:R.label})]})]});return e.jsx("li",{className:"relative",children:e.jsxs(W2,{children:[e.jsx(e_,{asChild:!0,children:e.jsx(Yc,{to:R.path,"data-tour":R.tourId,className:X("relative flex items-center rounded-lg py-2 transition-all duration-300","hover:bg-accent hover:text-accent-foreground",H?"bg-accent text-foreground":"text-muted-foreground hover:text-foreground",c?"px-3":"px-3 lg:px-0 lg:justify-center lg:w-12 lg:mx-auto"),onClick:()=>f(!1),children:C})}),!c&&e.jsx($g,{side:"right",className:"hidden lg:block",children:e.jsx("p",{children:R.label})})]})},R.path)})})]},Y.title))})})})]}),h&&e.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 lg:hidden",onClick:()=>f(!1)}),e.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[e.jsxs("header",{className:"flex h-16 items-center justify-between border-b bg-card/80 backdrop-blur-md px-4 sticky top-0 z-10",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>f(!h),className:"rounded-lg p-2 hover:bg-accent lg:hidden",children:e.jsx(qb,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>d(!c),className:"hidden rounded-lg p-2 hover:bg-accent lg:block",title:c?"":"",children:e.jsx(Hl,{className:X("h-5 w-5 transition-transform",!c&&"rotate-180")})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>j(!0),className:"relative hidden md:flex items-center w-64 h-9 pl-9 pr-16 bg-background/50 border rounded-md hover:bg-accent/50 transition-colors text-left",children:[e.jsx(zt,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"..."}),e.jsxs(Fg,{size:"sm",className:"absolute right-2 top-1/2 -translate-y-1/2",children:[e.jsx("span",{className:"text-xs",children:""}),"K"]})]}),e.jsx(I2,{open:x,onOpenChange:j}),e.jsxs(N,{variant:"ghost",size:"sm",onClick:()=>window.open("https://docs.mai-mai.org","_blank"),className:"gap-2",title:"",children:[e.jsx(Gb,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:""})]}),e.jsx("button",{onClick:Y=>{Gy(k==="dark"?"light":"dark",w,Y)},className:"rounded-lg p-2 hover:bg-accent",title:k==="dark"?"":"",children:k==="dark"?e.jsx(og,{className:"h-5 w-5"}):e.jsx(dg,{className:"h-5 w-5"})}),e.jsx("div",{className:"h-6 w-px bg-border"}),e.jsxs(N,{variant:"ghost",size:"sm",onClick:O,className:"gap-2",title:"",children:[e.jsx(Vb,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:""})]})]})]}),e.jsx("main",{className:"flex-1 overflow-hidden bg-background",children:n})]})]})})}function t_(n){const i=n.split(`
`).slice(1),c=[];for(const d of i){const h=d.trim();if(!h.startsWith("at "))continue;const f=h.match(/at\s+(?:(.+?)\s+\()?(.+?):(\d+):(\d+)\)?$/);f?c.push({functionName:f[1]||"<anonymous>",fileName:f[2],lineNumber:f[3],columnNumber:f[4],raw:h}):c.push({functionName:"<unknown>",fileName:"",lineNumber:"",columnNumber:"",raw:h})}return c}function a_({error:n,errorInfo:i}){const[c,d]=u.useState(!0),[h,f]=u.useState(!1),[x,j]=u.useState(!1),p=n.stack?t_(n.stack):[],w=async()=>{const v=`
Error: ${n.name}
Message: ${n.message}

Stack Trace:
${n.stack||"No stack trace available"}

Component Stack:
${i?.componentStack||"No component stack available"}

URL: ${window.location.href}
User Agent: ${navigator.userAgent}
Time: ${new Date().toISOString()}
    `.trim();try{await navigator.clipboard.writeText(v),j(!0),setTimeout(()=>j(!1),2e3)}catch(y){console.error("Failed to copy:",y)}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs(cl,{variant:"destructive",className:"border-red-500/50 bg-red-500/10",children:[e.jsx(_a,{className:"h-4 w-4"}),e.jsxs(ol,{className:"font-mono text-sm",children:[e.jsxs("span",{className:"font-semibold",children:[n.name,":"]})," ",n.message]})]}),p.length>0&&e.jsxs(Gu,{open:c,onOpenChange:d,children:[e.jsx(Vu,{asChild:!0,children:e.jsxs(N,{variant:"ghost",className:"w-full justify-between p-3 h-auto",children:[e.jsxs("span",{className:"font-semibold text-sm flex items-center gap-2",children:[e.jsx(Fb,{className:"h-4 w-4"}),"Stack Trace (",p.length," frames)"]}),c?e.jsx(pr,{className:"h-4 w-4"}):e.jsx(Bl,{className:"h-4 w-4"})]})}),e.jsx(Fu,{children:e.jsx(ss,{className:"h-[280px] rounded-md border bg-muted/30",children:e.jsx("div",{className:"p-3 space-y-1",children:p.map((v,y)=>e.jsx("div",{className:"font-mono text-xs p-2 rounded hover:bg-muted/50 transition-colors",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsxs("span",{className:"text-muted-foreground w-6 text-right flex-shrink-0",children:[y+1,"."]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("span",{className:"text-primary font-medium",children:v.functionName}),v.fileName&&e.jsxs("div",{className:"text-muted-foreground mt-0.5 break-all",children:[v.fileName,v.lineNumber&&e.jsxs("span",{className:"text-yellow-600 dark:text-yellow-400",children:[":",v.lineNumber,":",v.columnNumber]})]})]})]})},y))})})})]}),i?.componentStack&&e.jsxs(Gu,{open:h,onOpenChange:f,children:[e.jsx(Vu,{asChild:!0,children:e.jsxs(N,{variant:"ghost",className:"w-full justify-between p-3 h-auto",children:[e.jsxs("span",{className:"font-semibold text-sm flex items-center gap-2",children:[e.jsx(_a,{className:"h-4 w-4"}),"Component Stack"]}),h?e.jsx(pr,{className:"h-4 w-4"}):e.jsx(Bl,{className:"h-4 w-4"})]})}),e.jsx(Fu,{children:e.jsx(ss,{className:"h-[200px] rounded-md border bg-muted/30",children:e.jsx("pre",{className:"p-3 font-mono text-xs whitespace-pre-wrap text-muted-foreground",children:i.componentStack})})})]}),e.jsx(N,{variant:"outline",size:"sm",onClick:w,className:"w-full",children:x?e.jsxs(e.Fragment,{children:[e.jsx($t,{className:"mr-2 h-4 w-4 text-green-500"}),""]}):e.jsxs(e.Fragment,{children:[e.jsx(Pc,{className:"mr-2 h-4 w-4"}),""]})})]})}function Qg({error:n,errorInfo:i}){const c=()=>{window.location.href="/"},d=()=>{window.location.reload()};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:e.jsxs(Ze,{className:"w-full max-w-2xl shadow-lg",children:[e.jsxs(ys,{className:"text-center pb-2",children:[e.jsx("div",{className:"mx-auto flex h-16 w-16 items-center justify-center rounded-full bg-red-100 dark:bg-red-900/30 mb-4",children:e.jsx(_a,{className:"h-8 w-8 text-red-600 dark:text-red-400"})}),e.jsx(ws,{className:"text-2xl font-bold",children:""}),e.jsx(ct,{className:"text-base mt-2",children:""})]}),e.jsxs(Ts,{className:"space-y-4",children:[e.jsx(a_,{error:n,errorInfo:i}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 pt-2",children:[e.jsxs(N,{onClick:d,className:"flex-1",children:[e.jsx(Ct,{className:"mr-2 h-4 w-4"}),""]}),e.jsxs(N,{onClick:c,variant:"outline",className:"flex-1",children:[e.jsx(ao,{className:"mr-2 h-4 w-4"}),""]})]}),e.jsx("p",{className:"text-xs text-center text-muted-foreground pt-2",children:""})]})]})})}class l_ extends u.Component{constructor(i){super(i),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(i){return{hasError:!0,error:i}}componentDidCatch(i,c){console.error("ErrorBoundary caught an error:",i,c),this.setState({errorInfo:c})}handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};render(){return this.state.hasError&&this.state.error?this.props.fallback?this.props.fallback:e.jsx(Qg,{error:this.state.error,errorInfo:this.state.errorInfo}):this.props.children}}function Yg({error:n}){return e.jsx(Qg,{error:n,errorInfo:null})}const Sr=uN({component:()=>e.jsxs(e.Fragment,{children:[e.jsx(yp,{}),!1]}),beforeLoad:()=>{if(window.location.pathname==="/"&&!K2())throw hN({to:"/auth"})}}),n_=ft({getParentRoute:()=>Sr,path:"/auth",component:o0}),i_=ft({getParentRoute:()=>Sr,path:"/setup",component:C0}),Tt=ft({getParentRoute:()=>Sr,id:"protected",component:()=>e.jsx(s_,{children:e.jsx(yp,{})}),errorComponent:({error:n})=>e.jsx(Yg,{error:n})}),r_=ft({getParentRoute:()=>Tt,path:"/",component:Hy}),c_=ft({getParentRoute:()=>Tt,path:"/config/bot",component:H0}),o_=ft({getParentRoute:()=>Tt,path:"/config/modelProvider",component:ow}),d_=ft({getParentRoute:()=>Tt,path:"/config/model",component:gw}),u_=ft({getParentRoute:()=>Tt,path:"/config/adapter",component:vw}),m_=ft({getParentRoute:()=>Tt,path:"/resource/emoji",component:Fw}),h_=ft({getParentRoute:()=>Tt,path:"/resource/expression",component:s1}),x_=ft({getParentRoute:()=>Tt,path:"/resource/person",component:S1}),f_=ft({getParentRoute:()=>Tt,path:"/resource/jargon",component:f1}),p_=ft({getParentRoute:()=>Tt,path:"/resource/knowledge-graph",component:O1}),g_=ft({getParentRoute:()=>Tt,path:"/logs",component:u2}),j_=ft({getParentRoute:()=>Tt,path:"/chat",component:Y2}),v_=ft({getParentRoute:()=>Tt,path:"/plugins",component:R2}),N_=ft({getParentRoute:()=>Tt,path:"/plugin-config",component:B2}),b_=ft({getParentRoute:()=>Tt,path:"/plugin-mirrors",component:H2}),y_=ft({getParentRoute:()=>Tt,path:"/settings",component:t0}),w_=ft({getParentRoute:()=>Sr,path:"*",component:zg}),__=Sr.addChildren([n_,i_,Tt.addChildren([r_,c_,o_,d_,u_,m_,h_,f_,x_,p_,v_,N_,b_,g_,j_,y_]),w_]),S_=mN({routeTree:__,defaultNotFoundComponent:zg,defaultErrorComponent:({error:n})=>e.jsx(Yg,{error:n})});function C_({children:n,defaultTheme:i="system",storageKey:c="ui-theme",...d}){const[h,f]=u.useState(()=>localStorage.getItem(c)||i);u.useEffect(()=>{const j=window.document.documentElement;if(j.classList.remove("light","dark"),h==="system"){const p=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";j.classList.add(p);return}j.classList.add(h)},[h]),u.useEffect(()=>{const j=localStorage.getItem("accent-color");if(j){const p=document.documentElement,v={blue:{hsl:"221.2 83.2% 53.3%",darkHsl:"217.2 91.2% 59.8%",gradient:null},purple:{hsl:"271 91% 65%",darkHsl:"270 95% 75%",gradient:null},green:{hsl:"142 71% 45%",darkHsl:"142 76% 36%",gradient:null},orange:{hsl:"25 95% 53%",darkHsl:"20 90% 48%",gradient:null},pink:{hsl:"330 81% 60%",darkHsl:"330 85% 70%",gradient:null},red:{hsl:"0 84% 60%",darkHsl:"0 90% 70%",gradient:null},"gradient-sunset":{hsl:"15 95% 60%",darkHsl:"15 95% 65%",gradient:"linear-gradient(135deg, hsl(25 95% 53%) 0%, hsl(330 81% 60%) 100%)"},"gradient-ocean":{hsl:"200 90% 55%",darkHsl:"200 90% 60%",gradient:"linear-gradient(135deg, hsl(221.2 83.2% 53.3%) 0%, hsl(189 94% 43%) 100%)"},"gradient-forest":{hsl:"150 70% 45%",darkHsl:"150 75% 40%",gradient:"linear-gradient(135deg, hsl(142 71% 45%) 0%, hsl(158 64% 52%) 100%)"},"gradient-aurora":{hsl:"310 85% 65%",darkHsl:"310 90% 70%",gradient:"linear-gradient(135deg, hsl(271 91% 65%) 0%, hsl(330 81% 60%) 100%)"},"gradient-fire":{hsl:"15 95% 55%",darkHsl:"15 95% 60%",gradient:"linear-gradient(135deg, hsl(0 84% 60%) 0%, hsl(25 95% 53%) 100%)"},"gradient-twilight":{hsl:"250 90% 60%",darkHsl:"250 95% 65%",gradient:"linear-gradient(135deg, hsl(239 84% 67%) 0%, hsl(271 91% 65%) 100%)"}}[j];v&&(p.style.setProperty("--primary",v.hsl),v.gradient?(p.style.setProperty("--primary-gradient",v.gradient),p.classList.add("has-gradient")):(p.style.removeProperty("--primary-gradient"),p.classList.remove("has-gradient")))}},[]);const x={theme:h,setTheme:j=>{localStorage.setItem(c,j),f(j)}};return e.jsx(_g.Provider,{...d,value:x,children:n})}function k_({children:n,defaultEnabled:i=!0,defaultWavesEnabled:c=!0,storageKey:d="enable-animations",wavesStorageKey:h="enable-waves-background"}){const[f,x]=u.useState(()=>{const v=localStorage.getItem(d);return v!==null?v==="true":i}),[j,p]=u.useState(()=>{const v=localStorage.getItem(h);return v!==null?v==="true":c});u.useEffect(()=>{const v=document.documentElement;f?v.classList.remove("no-animations"):v.classList.add("no-animations"),localStorage.setItem(d,String(f))},[f,d]),u.useEffect(()=>{localStorage.setItem(h,String(j))},[j,h]);const w={enableAnimations:f,setEnableAnimations:x,enableWavesBackground:j,setEnableWavesBackground:p};return e.jsx(Sg.Provider,{value:w,children:n})}const T_=ub,Xg=u.forwardRef(({className:n,...i},c)=>e.jsx(tg,{ref:c,className:X("fixed bottom-0 right-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:max-w-[420px] gap-2",n),...i}));Xg.displayName=tg.displayName;const E_=ci("group pointer-events-auto relative flex w-full items-center justify-between space-x-2 overflow-hidden rounded-md border p-4 pr-6 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-slide-in-from-right data-[state=open]:animate-fade-in data-[state=closed]:animate-slide-out-to-right data-[state=closed]:animate-fade-out data-[swipe=end]:animate-slide-out-to-right",{variants:{variant:{default:"border bg-primary/5 text-foreground backdrop-blur-sm",destructive:"destructive group border-destructive bg-destructive/10 text-destructive-foreground backdrop-blur-sm"}},defaultVariants:{variant:"default"}}),Kg=u.forwardRef(({className:n,variant:i,...c},d)=>e.jsx(ag,{ref:d,className:X(E_({variant:i}),n),...c}));Kg.displayName=ag.displayName;const z_=u.forwardRef(({className:n,...i},c)=>e.jsx(lg,{ref:c,className:X("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium transition-colors hover:bg-secondary focus:outline-none focus:ring-1 focus:ring-ring disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...i}));z_.displayName=lg.displayName;const Jg=u.forwardRef(({className:n,...i},c)=>e.jsx(ng,{ref:c,className:X("absolute right-1 top-1 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-1 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...i,children:e.jsx(dl,{className:"h-4 w-4"})}));Jg.displayName=ng.displayName;const Zg=u.forwardRef(({className:n,...i},c)=>e.jsx(ig,{ref:c,className:X("text-sm font-semibold [&+div]:text-xs",n),...i}));Zg.displayName=ig.displayName;const Ig=u.forwardRef(({className:n,...i},c)=>e.jsx(rg,{ref:c,className:X("text-sm opacity-90",n),...i}));Ig.displayName=rg.displayName;function A_(){const{toasts:n}=Vs();return e.jsxs(T_,{children:[n.map(function({id:i,title:c,description:d,action:h,...f}){return e.jsxs(Kg,{...f,children:[e.jsxs("div",{className:"grid gap-1",children:[c&&e.jsx(Zg,{children:c}),d&&e.jsx(Ig,{children:d})]}),h,e.jsx(Jg,{})]},i)}),e.jsx(Xg,{})]})}Ty.createRoot(document.getElementById("root")).render(e.jsx(u.StrictMode,{children:e.jsx(l_,{children:e.jsx(C_,{defaultTheme:"system",children:e.jsx(k_,{children:e.jsxs(lw,{children:[e.jsx(xN,{router:S_}),e.jsx(rw,{}),e.jsx(A_,{})]})})})})}));
